{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/momen/projects/spotmycrib-master/client/accounts/forgot/forgot.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/accounts/forgot/forgot.js","filename":"/home/momen/projects/spotmycrib-master/client/accounts/forgot/forgot.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/home/momen/projects/spotmycrib-master","root":"/home/momen/projects/spotmycrib-master","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.13.10","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/momen/projects/spotmycrib-master/client/accounts/forgot/forgot.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/accounts/forgot/forgot.js"}},"code":"module.link(\"../helpers.js\");\nmodule.link(\"../validation.js\");\nTemplate.loginFormResetPasswordView.events({\n  /**\n   * Submit the password reset form\n   * @param {Event} event - jQuery Event\n   * @param {Object} template - Blaze Template\n   * @return {void}\n   */\n  \"click .tryAgainBtn\": function () {\n    Template.instance().showForm.set(true);\n  },\n  \"click .contactusBtn\": function () {\n    if ($) if ($.fancybox) $.fancybox.close();\n  },\n  \"click [data-event-action=signIn]\": function (event, template) {\n    var isOnPage = false;\n    if (template.data) if (template.data.onPage) isOnPage = true;\n\n    if (!isOnPage) {\n      Session.set('showForgotForm', false);\n      Session.set('showSignupForm', false);\n      Session.set('showLoginSignupFancyBoxDialog', true);\n      Session.set('showLoginDialog', true);\n    } else {\n      Session.set('showForgotForm', false);\n    }\n  },\n  \"submit form\": (event, template) => {\n    event.preventDefault();\n    let emailAddress = template.$(\".login-input-email\").val().trim();\n    let validatedEmail = LoginFormValidation.email(emailAddress);\n    let templateInstance = Template.instance();\n    var errors = [];\n    templateInstance.formMessages.set({});\n    templateInstance.isLoading.set(true);\n\n    if (validatedEmail !== true) {\n      errors.push(validatedEmail);\n    }\n\n    if (errors.length) {\n      templateInstance.formMessages.set({\n        errors: errors\n      }); // prevent signup\n\n      templateInstance.isLoading.set(false);\n      return;\n    }\n\n    Accounts.forgotPassword({\n      email: emailAddress\n    }, error => {\n      templateInstance.isLoading.set(false); // Show some message confirming result\n\n      if (error) {\n        console.log(error);\n        templateInstance.formMessages.set({\n          errors: [error]\n        });\n      } else {\n        templateInstance.showForm.set(false);\n        templateInstance.formMessages.set({\n          info: [{\n            reason: \"Password reset mail sent.\"\n          }]\n        });\n      }\n    });\n  }\n});\n/**\n * loginFormResetPasswordView\n *\n */\n\nTemplate.loginFormResetPasswordView.onCreated(() => {\n  let template = Template.instance(); // template.uniqueId = Random.id();\n\n  template.formMessages = new ReactiveVar({});\n  template.showForm = new ReactiveVar(true);\n  template.isLoading = new ReactiveVar(true);\n});\nTemplate.loginFormResetPasswordView.onRendered(function () {\n  $('#signin-div').find('#email').focus();\n  $('.new-focus').click(function () {\n    $('#signin-div').find('#email').focus();\n  });\n  Template.instance().isLoading.set(false);\n});\nTemplate.loginFormResetPasswordView.helpers(LoginFormSharedHelpers);","map":{"version":3,"sources":["client/accounts/forgot/forgot.js"],"names":["module","link","Template","loginFormResetPasswordView","events","instance","showForm","set","$","fancybox","close","event","template","isOnPage","data","onPage","Session","preventDefault","emailAddress","val","trim","validatedEmail","LoginFormValidation","email","templateInstance","errors","formMessages","isLoading","push","length","Accounts","forgotPassword","error","console","log","info","reason","onCreated","ReactiveVar","onRendered","find","focus","click","helpers","LoginFormSharedHelpers"],"mappings":"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","sourcesContent":["// import \"./forgot.html\";\nimport \"../helpers.js\";\nimport \"../validation.js\";\n\nTemplate.loginFormResetPasswordView.events({\n\n  /**\n   * Submit the password reset form\n   * @param {Event} event - jQuery Event\n   * @param {Object} template - Blaze Template\n   * @return {void}\n   */\n  \"click .tryAgainBtn\":function(){\n      Template.instance().showForm.set(true);\n  },\n  \"click .contactusBtn\":function(){\n        if($)\n            if($.fancybox)\n                $.fancybox.close();\n  },\n  \"click [data-event-action=signIn]\": function (event, template) {\n      var isOnPage = false;\n      if(template.data)if(template.data.onPage)isOnPage = true;\n      if( !isOnPage ){\n          Session.set('showForgotForm',false)\n          Session.set('showSignupForm',false)\n          Session.set('showLoginSignupFancyBoxDialog',true)\n          Session.set('showLoginDialog',true)\n      }else{\n          Session.set('showForgotForm',false)\n      }\n  },\n  \"submit form\": (event, template) => {\n    event.preventDefault();\n\n    let emailAddress = template.$(\".login-input-email\").val().trim();\n    let validatedEmail = LoginFormValidation.email(emailAddress);\n    let templateInstance = Template.instance();\n\n    var errors = []\n\n    templateInstance.formMessages.set({});\n    templateInstance.isLoading.set(true);\n\n    if (validatedEmail !== true) {\n      errors.push(validatedEmail);\n    }\n\n    if (errors.length) {\n      templateInstance.formMessages.set({\n          errors: errors\n      });\n      // prevent signup\n      templateInstance.isLoading.set(false)\n      return;\n    }\n\n\n\n    Accounts.forgotPassword({ email: emailAddress}, (error) => {\n        templateInstance.isLoading.set(false)\n      // Show some message confirming result\n      if (error) {\n        console.log(error)\n        templateInstance.formMessages.set({\n          errors: [error]\n        });\n      } else {\n\n        templateInstance.showForm.set(false)\n\n        templateInstance.formMessages.set({\n          info: [{\n            reason:  \"Password reset mail sent.\"\n          }]\n        });\n      }\n    });\n  }\n\n});\n\n\n/**\n * loginFormResetPasswordView\n *\n */\nTemplate.loginFormResetPasswordView.onCreated(() => {\n  let template = Template.instance();\n\n  // template.uniqueId = Random.id();\n  template.formMessages = new ReactiveVar({});\n  template.showForm = new ReactiveVar(true);\n  template.isLoading = new ReactiveVar(true);\n});\n\nTemplate.loginFormResetPasswordView.onRendered( function(){\n\n    $('#signin-div').find('#email').focus();\n    $('.new-focus').click(function(){\n        $('#signin-div').find('#email').focus();\n    });\n\n    Template.instance().isLoading.set(false)\n\n});\n\nTemplate.loginFormResetPasswordView.helpers(LoginFormSharedHelpers);\n"]},"sourceType":"module","hash":"e8929924869cd41ab2d0b4efd80dfdaae6771920"}
