{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/momen/projects/spotmycrib-master/client/accounts/signUp/signUp.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/accounts/signUp/signUp.js","filename":"/home/momen/projects/spotmycrib-master/client/accounts/signUp/signUp.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/home/momen/projects/spotmycrib-master","root":"/home/momen/projects/spotmycrib-master","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.13.10","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/momen/projects/spotmycrib-master/client/accounts/signUp/signUp.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/accounts/signUp/signUp.js"}},"code":"module.link(\"../helpers.js\");\nmodule.link(\"../validation.js\");\nTemplate.loginFormSignUpView.onCreated(function () {\n  var template = Template.instance(); // template.uniqueId = Random.id();\n\n  template.formMessages = new ReactiveVar({});\n  template.type = \"signUp\";\n  template.isOTPverified = new ReactiveVar(false);\n  template.isLoading = new ReactiveVar(true);\n});\nTemplate.loginFormSignUpView.onRendered(function () {\n  // This is the new 1 line code I have added\n  this.$(\".SignupFormMobileField\").intlTelInput({\n    preferredCountries: [\"ie\", \"gb\", 'in']\n  });\n  $('#signin-div').find('#name').focus();\n  $('.new-focus').click(function () {\n    $('#signin-div').find('#name').focus();\n  });\n  Template.instance().isLoading.set(false);\n});\nTemplate.loginFormSignUpView.helpers(LoginFormSharedHelpers);\n/**\n * Events: Login form sign up view\n */\n\nTemplate.loginFormSignUpView.events({\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"click [data-event-action=signIn]\": function (event, template) {\n    Session.set('showForgotForm', false);\n    Session.set('showSignupForm', false);\n    Session.set('showLoginSignupFancyBoxDialog', true);\n    Session.set('showLoginDialog', true);\n  },\n  \"submit form\": function (event, template) {\n    event.preventDefault(); // var usernameInput = template.$(\".login-input--username\");\n\n    var emailInput = template.$(\".login-input-email\");\n    var passwordInput = template.$(\".login-input-password\");\n    var fullNameInput = template.$(\".login-input-fullName\");\n    var mobileInput = template.$(\".login-input-mobile\");\n    var email = emailInput.val().trim();\n    var password = passwordInput.val().trim();\n    var fullName = fullNameInput.val().trim();\n    var mobile = mobileInput.val().trim(); // mobile = mobileInput.intlTelInput(\"getNumber\");//not working\n    // mobileInput.val();\n\n    var validatedEmail = LoginFormValidation.email(email);\n    var validatedFullName = LoginFormValidation.username(fullName);\n    var validatedPassword = LoginFormValidation.password(password, {\n      validationLevel: \"length\"\n    });\n    var validatedMobile = LoginFormValidation.mobile(mobile);\n    var templateInstance = Template.instance();\n    var errors = [];\n    templateInstance.formMessages.set({});\n    templateInstance.isLoading.set(true);\n\n    if (validatedEmail !== true) {\n      errors.push(validatedEmail);\n    }\n\n    if (validatedFullName !== true) {\n      errors.push(validatedFullName);\n    }\n\n    if (validatedMobile !== true) {\n      errors.push(validatedMobile);\n    }\n\n    if (validatedPassword !== true) {\n      errors.push(validatedPassword);\n    }\n\n    if (errors.length) {\n      templateInstance.formMessages.set({\n        errors: errors\n      }); // prevent signup\n\n      templateInstance.isLoading.set(false);\n      return;\n    } //if(!templateInstance.isOTPverified.get()){\n    //  //Show OTP screen\n    //\n    //}\n\n\n    var newUserData = {\n      // username: username,\n      email: email,\n      password: password,\n      profile: {\n        name: fullName,\n        email: email,\n        mobile: mobile\n      }\n    };\n    Accounts.createUser(newUserData, function (error, result) {\n      templateInstance.isLoading.set(false);\n\n      if (error) {\n        // Show some error message\n        templateInstance.formMessages.set({\n          errors: [error]\n        });\n      } else {\n        var isOnPage = false;\n        if (templateInstance.data) if (templateInstance.data.onPage) isOnPage = true;\n\n        if (!isOnPage) {\n          $('#signin-div , .fancybox-overlay').hide();\n          Session.set('showLoginDialog', false);\n          Session.set('showSignupDialog', false);\n          Session.set('showLoginSignupFancyBoxDialog', false);\n        }\n\n        Session.set('loginFlowComplete', true);\n        Session.set('loginFlowStart', undefined);\n        delete Session.keys.loginFlowStart;\n      }\n    }); //,\n    //name: fullName,\n    //  \"profile.mobile\" :[mobile]\n  }\n});\nTemplate.loginFormSignUpViewLandlord.onCreated(function () {\n  var template = Template.instance(); // template.uniqueId = Random.id();\n\n  template.formMessages = new ReactiveVar({});\n  template.type = \"signUp\";\n  template.isOTPverified = new ReactiveVar(false);\n  template.isLoading = new ReactiveVar(true);\n});\nTemplate.loginFormSignUpViewLandlord.onRendered(function () {\n  this.$(\".SignupFormMobileField\").intlTelInput({\n    preferredCountries: [\"ie\", \"gb\", 'in']\n  });\n  $('#signin-div').find('#name').focus();\n  $('.new-focus').click(function () {\n    $('#signin-div').find('#name').focus();\n  });\n  Template.instance().isLoading.set(false);\n});\nTemplate.loginFormSignUpViewLandlord.helpers(LoginFormSharedHelpers);\n/**\n * Events: Login form sign up view\n */\n\nTemplate.loginFormSignUpViewLandlord.events({\n  \"click [data-event-action=signIn]\": function (event, template) {\n    Session.set('showForgotForm', false);\n    Session.set('showSignupForm', false);\n    Session.set('showLoginSignupFancyBoxDialog', true);\n    Session.set('showLoginDialog', true);\n  },\n\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"submit form\": function (event, template) {\n    event.preventDefault(); // var usernameInput = template.$(\".login-input--username\");\n\n    var emailInput = template.$(\".login-input-email\");\n    var passwordInput = template.$(\".login-input-password\");\n    var fullNameInput = template.$(\".login-input-fullName\");\n    var mobileInput = template.$(\".login-input-mobile\");\n    var email = emailInput.val().trim();\n    var password = passwordInput.val().trim();\n    var fullName = fullNameInput.val().trim();\n    var mobile = mobileInput.val().trim();\n    var validatedEmail = LoginFormValidation.email(email);\n    var validatedFullName = LoginFormValidation.username(fullName);\n    var validatedPassword = LoginFormValidation.password(password, {\n      validationLevel: \"length\"\n    });\n    var validatedMobile = LoginFormValidation.mobile(mobile);\n    var templateInstance = Template.instance();\n    var errors = [];\n    templateInstance.formMessages.set({});\n    templateInstance.isLoading.set(true);\n\n    if (validatedEmail !== true) {\n      errors.push(validatedEmail);\n    }\n\n    if (validatedFullName !== true) {\n      errors.push(validatedFullName);\n    }\n\n    if (validatedMobile !== true) {\n      errors.push(validatedMobile);\n    }\n\n    if (validatedPassword !== true) {\n      errors.push(validatedPassword);\n    }\n\n    if (errors.length) {\n      templateInstance.formMessages.set({\n        errors: errors\n      }); // prevent signup\n\n      templateInstance.isLoading.set(false);\n      return;\n    } //if(!templateInstance.isOTPverified.get()){\n    //  //Show OTP screen\n    //\n    //}\n\n\n    var newUserData = {\n      // username: username,\n      email: email,\n      password: password,\n      profile: {\n        name: fullName,\n        email: email,\n        mobile: mobile\n      }\n    };\n    Accounts.createUser(newUserData, function (error, result) {\n      templateInstance.isLoading.set(false);\n\n      if (error) {\n        // Show some error message\n        templateInstance.formMessages.set({\n          errors: [error]\n        });\n      } else {\n        var isOnPage = false;\n        if (templateInstance.data) if (templateInstance.data.onPage) isOnPage = true;\n\n        if (!isOnPage) {\n          $('#signin-div , .fancybox-overlay').hide();\n          Session.set('showLoginDialog', false);\n          Session.set('showSignupDialog', false);\n          Session.set('showLoginSignupFancyBoxDialog', false);\n        }\n\n        Session.set('loginFlowComplete', true);\n        Session.set('loginFlowStart', undefined);\n        delete Session.keys.loginFlowStart;\n      }\n    }); //,\n    //name: fullName,\n    //  \"profile.mobile\" :[mobile]\n  }\n});","map":{"version":3,"sources":["client/accounts/signUp/signUp.js"],"names":["module","link","Template","loginFormSignUpView","onCreated","template","instance","formMessages","ReactiveVar","type","isOTPverified","isLoading","onRendered","$","intlTelInput","preferredCountries","find","focus","click","set","helpers","LoginFormSharedHelpers","events","event","Session","preventDefault","emailInput","passwordInput","fullNameInput","mobileInput","email","val","trim","password","fullName","mobile","validatedEmail","LoginFormValidation","validatedFullName","username","validatedPassword","validationLevel","validatedMobile","templateInstance","errors","push","length","newUserData","profile","name","Accounts","createUser","error","result","isOnPage","data","onPage","hide","undefined","keys","loginFlowStart","loginFormSignUpViewLandlord"],"mappings":"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","sourcesContent":["// import \"./signUp.html\";\nimport \"../helpers.js\";\nimport \"../validation.js\";\n\n\nTemplate.loginFormSignUpView.onCreated(() => {\n  let template = Template.instance();\n\n  // template.uniqueId = Random.id();\n  template.formMessages = new ReactiveVar({});\n  template.type = \"signUp\";\n  template.isOTPverified =  new ReactiveVar(false);\n  template.isLoading = new ReactiveVar(true);\n});\n\nTemplate.loginFormSignUpView.onRendered( function(){\n// This is the new 1 line code I have added\n  this.$(\".SignupFormMobileField\").intlTelInput({\n    preferredCountries:[\"ie\",\"gb\",'in']\n  });\n\n $('#signin-div').find('#name').focus();\n  $('.new-focus').click(function(){\n    $('#signin-div').find('#name').focus();\n  });\n    Template.instance().isLoading.set(false)\n\n});\n\nTemplate.loginFormSignUpView.helpers(LoginFormSharedHelpers);\n\n\n/**\n * Events: Login form sign up view\n */\nTemplate.loginFormSignUpView.events({\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"click [data-event-action=signIn]\": function (event, template) {\n      Session.set('showForgotForm',false)\n      Session.set('showSignupForm',false)\n      Session.set('showLoginSignupFancyBoxDialog',true)\n      Session.set('showLoginDialog',true)\n  },\n  \"submit form\": function (event, template) {\n    event.preventDefault();\n\n    // var usernameInput = template.$(\".login-input--username\");\n    let emailInput = template.$(\".login-input-email\");\n    let passwordInput = template.$(\".login-input-password\");\n    let fullNameInput = template.$(\".login-input-fullName\");\n    let mobileInput = template.$(\".login-input-mobile\");\n\n    let email = emailInput.val().trim();\n    let password = passwordInput.val().trim();\n    let fullName = fullNameInput.val().trim();\n    let mobile = mobileInput.val().trim();\n    // mobile = mobileInput.intlTelInput(\"getNumber\");//not working\n    // mobileInput.val();\n\n    let validatedEmail = LoginFormValidation.email(email);\n    let validatedFullName = LoginFormValidation.username(fullName);\n    let validatedPassword = LoginFormValidation.password(password, {validationLevel: \"length\"});\n    let validatedMobile = LoginFormValidation.mobile(mobile);\n\n    let templateInstance = Template.instance();\n    var errors = []\n\n    templateInstance.formMessages.set({});\n    templateInstance.isLoading.set(true);\n\n\n    if (validatedEmail !== true) {\n        errors.push(validatedEmail);\n    }\n\n    if (validatedFullName !== true) {\n        errors.push(validatedFullName);\n    }\n\n    if (validatedMobile !== true) {\n        errors.push(validatedMobile);\n    }\n\n    if (validatedPassword !== true) {\n        errors.push(validatedPassword);\n    }\n\n\n    if (errors.length) {\n        templateInstance.formMessages.set({\n            errors: errors\n        });\n        // prevent signup\n        templateInstance.isLoading.set(false)\n        return;\n    }\n\n    //if(!templateInstance.isOTPverified.get()){\n    //  //Show OTP screen\n    //\n    //}\n\n\n    let newUserData = {\n      // username: username,\n      email: email,\n      password: password,\n      profile:{\n        name:fullName,\n        email: email,\n        mobile:mobile\n      }\n    };\n\n    Accounts.createUser(newUserData, function (error, result) {\n        templateInstance.isLoading.set(false)\n      if (error) {\n        // Show some error message\n        templateInstance.formMessages.set({\n          errors: [error]\n        });\n      } else {\n          var isOnPage = false;\n          if(templateInstance.data)if(templateInstance.data.onPage)isOnPage = true;\n          if( !isOnPage ){\n              $('#signin-div , .fancybox-overlay').hide()\n              Session.set('showLoginDialog',false)\n              Session.set('showSignupDialog',false)\n              Session.set('showLoginSignupFancyBoxDialog',false)\n          }\n\n          Session.set('loginFlowComplete', true)\n          Session.set('loginFlowStart',undefined)\n          delete Session.keys.loginFlowStart\n      }\n    });\n\n    //,\n    //name: fullName,\n    //  \"profile.mobile\" :[mobile]\n\n  }\n});\n\nTemplate.loginFormSignUpViewLandlord.onCreated(() => {\n  let template = Template.instance();\n\n  // template.uniqueId = Random.id();\n  template.formMessages = new ReactiveVar({});\n  template.type = \"signUp\";\n  template.isOTPverified =  new ReactiveVar(false);\n  template.isLoading = new ReactiveVar(true);\n});\n\nTemplate.loginFormSignUpViewLandlord.onRendered( function(){\n\n  this.$(\".SignupFormMobileField\").intlTelInput({\n    preferredCountries:[\"ie\",\"gb\",'in']\n  });\n\n $('#signin-div').find('#name').focus();\n  $('.new-focus').click(function(){\n    $('#signin-div').find('#name').focus();\n  });\n    Template.instance().isLoading.set(false)\n\n});\n\nTemplate.loginFormSignUpViewLandlord.helpers(LoginFormSharedHelpers);\n\n\n/**\n * Events: Login form sign up view\n */\nTemplate.loginFormSignUpViewLandlord.events({\n    \"click [data-event-action=signIn]\": function (event, template) {\n        Session.set('showForgotForm',false)\n        Session.set('showSignupForm',false)\n        Session.set('showLoginSignupFancyBoxDialog',true)\n        Session.set('showLoginDialog',true)\n    },\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"submit form\": function (event, template) {\n    event.preventDefault();\n\n    // var usernameInput = template.$(\".login-input--username\");\n    let emailInput = template.$(\".login-input-email\");\n    let passwordInput = template.$(\".login-input-password\");\n    let fullNameInput = template.$(\".login-input-fullName\");\n    let mobileInput = template.$(\".login-input-mobile\");\n\n    let email = emailInput.val().trim();\n    let password = passwordInput.val().trim();\n    let fullName = fullNameInput.val().trim();\n    let mobile = mobileInput.val().trim();\n\n    let validatedEmail = LoginFormValidation.email(email);\n    let validatedFullName = LoginFormValidation.username(fullName);\n    let validatedPassword = LoginFormValidation.password(password, {validationLevel: \"length\"});\n    let validatedMobile = LoginFormValidation.mobile(mobile);\n\n    let templateInstance = Template.instance();\n    var errors = []\n\n    templateInstance.formMessages.set({});\n      templateInstance.isLoading.set(true);\n\n\n    if (validatedEmail !== true) {\n      errors.push(validatedEmail);\n    }\n\n    if (validatedFullName !== true) {\n      errors.push(validatedFullName);\n    }\n\n    if (validatedMobile !== true) {\n      errors.push(validatedMobile);\n    }\n\n    if (validatedPassword !== true) {\n      errors.push(validatedPassword);\n    }\n\n\n    if (errors.length) {\n      templateInstance.formMessages.set({\n        errors: errors\n      });\n      // prevent signup\n        templateInstance.isLoading.set(false)\n      return;\n    }\n\n    //if(!templateInstance.isOTPverified.get()){\n    //  //Show OTP screen\n    //\n    //}\n\n\n    let newUserData = {\n      // username: username,\n      email: email,\n      password: password,\n      profile:{\n        name:fullName,\n        email: email,\n        mobile:mobile\n      }\n    };\n\n    Accounts.createUser(newUserData, function (error, result) {\n        templateInstance.isLoading.set(false)\n      if (error) {\n        // Show some error message\n        templateInstance.formMessages.set({\n          errors: [error]\n        });\n      } else {\n          var isOnPage = false;\n          if(templateInstance.data)if(templateInstance.data.onPage)isOnPage = true;\n          if( !isOnPage ){\n              $('#signin-div , .fancybox-overlay').hide()\n              Session.set('showLoginDialog',false)\n              Session.set('showSignupDialog',false)\n              Session.set('showLoginSignupFancyBoxDialog',false)\n          }\n\n          Session.set('loginFlowComplete', true)\n          Session.set('loginFlowStart',undefined)\n          delete Session.keys.loginFlowStart\n      }\n    });\n\n    //,\n    //name: fullName,\n    //  \"profile.mobile\" :[mobile]\n\n  }\n});\n"]},"sourceType":"module","hash":"88d2ef6c2e477940bc1437d9d45267f011324509"}
