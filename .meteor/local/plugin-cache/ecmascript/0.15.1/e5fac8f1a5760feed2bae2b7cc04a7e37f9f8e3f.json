{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/momen/projects/spotmycrib-master/server/core/manageproperty.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.linux.x86_64"},"sourceFileName":"server/core/manageproperty.js","filename":"/home/momen/projects/spotmycrib-master/server/core/manageproperty.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/home/momen/projects/spotmycrib-master","root":"/home/momen/projects/spotmycrib-master","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.13.10","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/momen/projects/spotmycrib-master/server/core/manageproperty.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"server/core/manageproperty.js"}},"code":"let check;\nmodule.link(\"meteor/check\", {\n  check(v) {\n    check = v;\n  }\n\n}, 0);\n// import TokenGen from 'token-gen';\nMeteor.methods({\n  addManageProperty: function (propertyId) {\n    check(propertyId, String);\n    console.log(\"server method addManageProperty called\");\n    console.log(propertyId);\n    const userId = Meteor.userId();\n    console.log(userId);\n\n    if (!userId) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    const property = Collections.Properties.findOne({\n      _id: propertyId\n    });\n    if (!property) throw new Meteor.Error('Invalid property');\n    var doc = {\n      \"propertyId\": propertyId,\n      \"rent\": {\n        \"price\": 0,\n        \"collectionDayInMonth\": 1,\n        \"frequency\": \"monthly\",\n        \"reminderEmail\": false\n      },\n      \"econtract\": {\n        \"manualFileUploaded\": false,\n        \"file\": {\n          \"name\": \"\",\n          \"relative_url\": \"\",\n          \"url\": \"\"\n        },\n        \"reminderEmail\": false\n      },\n      \"tenants\": [],\n      \"prevActivationsCount\": 0,\n      \"createdAt\": new Date(),\n      \"updatedAt\": new Date()\n    };\n    var docId = Collections.PropertyManage.insert(doc);\n    return docId;\n  }\n});\n\nArray.prototype.pushUnique = function (item) {\n  if (this.indexOf(item) == -1) {\n    //if(jQuery.inArray(item, this) == -1) {\n    this.push(item);\n    return true;\n  }\n\n  return false;\n};\n\nfunction numDifferentiation(val) {\n  if (val >= 1000000000) val = (val / 1000000000).toFixed(2) + ' Billion';else if (val >= 1000000) val = (val / 1000000).toFixed(2) + ' Million';\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}","map":{"version":3,"sources":["server/core/manageproperty.js"],"names":["check","module","link","v","Meteor","methods","addManageProperty","propertyId","String","console","log","userId","Error","property","Collections","Properties","findOne","_id","doc","Date","docId","PropertyManage","insert","Array","prototype","pushUnique","item","indexOf","push","numDifferentiation","val","toFixed","toString","replace","titleCase","str","charAt","toUpperCase","toLowerCase","substring"],"mappings":"AAAA,IAAIA,KAAJ;AAAUC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACF,EAAAA,KAAK,CAACG,CAAD,EAAG;AAACH,IAAAA,KAAK,GAACG,CAAN;AAAQ;;AAAlB,CAA3B,EAA+C,CAA/C;AACV;AAEAC,MAAM,CAACC,OAAP,CAAe;AACXC,EAAAA,iBAAiB,EAAE,UAASC,UAAT,EAAqB;AACpCP,IAAAA,KAAK,CAACO,UAAD,EAAaC,MAAb,CAAL;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ;AAEAD,IAAAA,OAAO,CAACC,GAAR,CAAYH,UAAZ;AACA,UAAMI,MAAM,GAAGP,MAAM,CAACO,MAAP,EAAf;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYC,MAAZ;;AAEA,QAAI,CAACA,MAAL,EAAa;AACT,YAAM,IAAIP,MAAM,CAACQ,KAAX,CAAiB,gBAAjB,CAAN;AACH;;AACD,UAAMC,QAAQ,GAAGC,WAAW,CAACC,UAAZ,CAAuBC,OAAvB,CAA+B;AAC5CC,MAAAA,GAAG,EAAEV;AADuC,KAA/B,CAAjB;AAGA,QAAI,CAACM,QAAL,EAAc,MAAM,IAAIT,MAAM,CAACQ,KAAX,CAAiB,kBAAjB,CAAN;AAEd,QAAIM,GAAG,GAAG;AACN,oBAAeX,UADT;AAEN,cAAS;AACL,iBAAU,CADL;AAEL,gCAAyB,CAFpB;AAGL,qBAAc,SAHT;AAIL,yBAAkB;AAJb,OAFH;AAQN,mBAAc;AACV,8BAAuB,KADb;AAEV,gBAAS;AACL,kBAAS,EADJ;AAEL,0BAAiB,EAFZ;AAGL,iBAAQ;AAHH,SAFC;AAOV,yBAAkB;AAPR,OARR;AAiBN,iBAAY,EAjBN;AAkBN,8BAAyB,CAlBnB;AAmBN,mBAAY,IAAIY,IAAJ,EAnBN;AAoBN,mBAAY,IAAIA,IAAJ;AApBN,KAAV;AAwBA,QAAIC,KAAK,GAAGN,WAAW,CAACO,cAAZ,CAA2BC,MAA3B,CAAkCJ,GAAlC,CAAZ;AAEA,WAAOE,KAAP;AAEH;AA9CU,CAAf;;AAgDAG,KAAK,CAACC,SAAN,CAAgBC,UAAhB,GAA6B,UAAUC,IAAV,EAAe;AACxC,MAAG,KAAKC,OAAL,CAAaD,IAAb,KAAsB,CAAC,CAA1B,EAA6B;AACzB;AACA,SAAKE,IAAL,CAAUF,IAAV;AACA,WAAO,IAAP;AACH;;AACD,SAAO,KAAP;AACH,CAPD;;AAQA,SAASG,kBAAT,CAA4BC,GAA5B,EAAiC;AAC7B,MAAGA,GAAG,IAAI,UAAV,EAAsBA,GAAG,GAAG,CAACA,GAAG,GAAC,UAAL,EAAiBC,OAAjB,CAAyB,CAAzB,IAA8B,UAApC,CAAtB,KACK,IAAGD,GAAG,IAAI,OAAV,EAAmBA,GAAG,GAAG,CAACA,GAAG,GAAC,OAAL,EAAcC,OAAd,CAAsB,CAAtB,IAA2B,UAAjC;AACxB,SAAOD,GAAG,CAACE,QAAJ,GAAeC,OAAf,CAAuB,uBAAvB,EAAgD,GAAhD,CAAP;AACH;;AACD,SAASC,SAAT,CAAmBC,GAAnB,EAAuB;AACnB,MAAG,CAACA,GAAJ,EAAQ;AACR,SAAOA,GAAG,CAACC,MAAJ,CAAW,CAAX,EAAcC,WAAd,KAA8BF,GAAG,CAACG,WAAJ,GAAkBC,SAAlB,CAA4B,CAA5B,CAArC;AACH","sourcesContent":["import {check} from \"meteor/check\";\n// import TokenGen from 'token-gen';\n\nMeteor.methods({\n    addManageProperty: function(propertyId) {\n        check(propertyId, String);\n\n        console.log(\"server method addManageProperty called\")\n\n        console.log(propertyId);\n        const userId = Meteor.userId();\n        console.log(userId)\n\n        if (!userId) {\n            throw new Meteor.Error('not-authorized');\n        }\n        const property = Collections.Properties.findOne({\n            _id: propertyId\n        });\n        if (!property)throw new Meteor.Error('Invalid property');\n\n        var doc = {\n            \"propertyId\" : propertyId,\n            \"rent\" : {\n                \"price\" : 0,\n                \"collectionDayInMonth\" : 1,\n                \"frequency\" : \"monthly\",\n                \"reminderEmail\" : false\n            },\n            \"econtract\" : {\n                \"manualFileUploaded\" : false,\n                \"file\" : {\n                    \"name\" : \"\",\n                    \"relative_url\" : \"\",\n                    \"url\" : \"\"\n                },\n                \"reminderEmail\" : false\n            },\n            \"tenants\" : [],\n            \"prevActivationsCount\" : 0,\n            \"createdAt\":new Date(),\n            \"updatedAt\":new Date()\n        }\n\n\n        var docId = Collections.PropertyManage.insert(doc);\n\n        return docId;\n\n    }\n})\nArray.prototype.pushUnique = function (item){\n    if(this.indexOf(item) == -1) {\n        //if(jQuery.inArray(item, this) == -1) {\n        this.push(item);\n        return true;\n    }\n    return false;\n}\nfunction numDifferentiation(val) {\n    if(val >= 1000000000) val = (val/1000000000).toFixed(2) + ' Billion';\n    else if(val >= 1000000) val = (val/1000000).toFixed(2) + ' Million';\n    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}"]},"sourceType":"module","hash":"e5fac8f1a5760feed2bae2b7cc04a7e37f9f8e3f"}
