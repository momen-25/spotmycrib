{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/momen/projects/spotmycrib-master/packages/msavin:mongol/client/row_trash/main.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/msavin:mongol/client/row_trash/main.js","filename":"/home/momen/projects/spotmycrib-master/packages/msavin:mongol/client/row_trash/main.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/home/momen/projects/spotmycrib-master","root":"/home/momen/projects/spotmycrib-master","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.13.10","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/momen/projects/spotmycrib-master/packages/msavin:mongol/client/row_trash/main.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/msavin:mongol/client/row_trash/main.js"}},"code":"var ToyKit;\nmodule.link(\"meteor/meteortoys:toykit\", {\n  ToyKit: function (v) {\n    ToyKit = v;\n  }\n}, 0);\nvar Mongol;\nmodule.link(\"../../lib/index.js\", {\n  Mongol: function (v) {\n    Mongol = v;\n  }\n}, 1);\nmodule.link(\"./main.html\");\nTemplate.Mongol_trash.events({\n  'click': function () {\n    if (!ToyKit.get(\"Mongol_Trash_Count\")) {\n      ToyKit.set(\"Mongol_Trash_Count\", 0);\n    }\n  }\n});\nTemplate.Mongol_trash.helpers({\n  collectionCount: function () {\n    var collectionName = \"MeteorToys.Mongol\";\n    var collectionVar = Mongol.Collection(collectionName);\n    return collectionVar && collectionVar.find().count() || 0;\n  },\n  currentPosition: function () {\n    var sessionKey = \"Mongol_Trash_Count\";\n    var current = ToyKit.get(sessionKey);\n    var count = current + 1;\n    return count;\n  }\n});\nTemplate.Mongol_trash_viewer.helpers({\n  currentDocument: function () {\n    var collectionName = \"MeteorToys.Mongol\",\n        docNumber = ToyKit.get(\"Mongol_Trash_Count\"),\n        doc = ToyKit.collection.get(\"MeteorToys.Mongol\").find().fetch()[docNumber];\n\n    if (doc) {\n      delete doc['Mongol_origin'];\n      delete doc['Mongol_date'];\n      var stringDoc = JSON.stringify(doc, undefined, 2);\n      var content = ToyKit.colorize(stringDoc);\n      return content;\n    }\n  },\n  collectionName: function () {\n    var collectionName = \"MeteorToys.Mongol\",\n        docNumber = ToyKit.get(\"Mongol_Trash_Count\"),\n        doc = Package[\"msavin:mongol\"].Mongol.Collection(\"MeteorToys.Mongol\").find().fetch()[docNumber];\n\n    if (doc) {\n      return doc.Mongol_origin;\n    }\n  }\n});\nTemplate.Mongol_trash_menu.events({\n  'click .Mongol_m_edit': function () {\n    var collectionName = \"MeteorToys.Mongol\",\n        docNumber = ToyKit.get(\"Mongol_Trash_Count\"),\n        doc = ToyKit.collection.get(\"MeteorToys.Mongol\").find().fetch()[docNumber];\n    var targetCollection = String(doc.Mongol_origin);\n    var docID = String(doc._id);\n    delete doc['Mongol_origin'];\n    delete doc['Mongol_date'];\n    Meteor.call(\"Mongol_insert\", targetCollection, doc, function (e, r) {\n      if (e) {\n        alert(\"There was an error restoring your document.\");\n      }\n    });\n    Meteor.call(\"Mongol_remove\", \"MeteorToys.Mongol\", docID, true, function (e, r) {\n      if (e) {\n        alert(\"There was an error removing document from trash,\");\n      }\n    }); // Set the position\n\n    var sessionKey = \"Mongol_Trash_Count\";\n    var CurrentDocument = ToyKit.get(sessionKey);\n    var collectionVar = Package[\"msavin:mongol\"].Mongol.Collection(\"MeteorToys.Mongol\");\n    var collectionCount = collectionVar.find().count() - 1;\n\n    if (collectionCount === CurrentDocument) {\n      var button = document.getElementsByClassName(\"Mongol_m_left\");\n      button[0].click();\n    }\n  },\n  'click .Mongol_m_right': function () {\n    // Set the key\n    var sessionKey = \"Mongol_Trash_Count\"; // Grab the key\n\n    var CurrentDocument = ToyKit.get(sessionKey);\n    var collectionVar = Package[\"msavin:mongol\"].Mongol.Collection(\"MeteorToys.Mongol\");\n    var collectionCount = collectionVar.find().count() - 1;\n\n    if (CurrentDocument > collectionCount) {\n      ToyKit.set(sessionKey, 0);\n      return;\n    }\n\n    if (collectionCount === CurrentDocument) {\n      // Go back to document 1 \n      ToyKit.set(sessionKey, 0);\n    } else {\n      // Go to next document\n      var MongolDocNumber = ToyKit.get(sessionKey) + 1;\n      ToyKit.set(sessionKey, MongolDocNumber);\n    }\n  },\n  'click .Mongol_m_left': function () {\n    var sessionKey = \"Mongol_Trash_Count\";\n    var CurrentDocument = ToyKit.get(sessionKey);\n    var collectionVar = Package[\"msavin:mongol\"].Mongol.Collection(\"MeteorToys.Mongol\");\n    var collectionCount = collectionVar.find().count() - 1;\n\n    if (CurrentDocument > collectionCount) {\n      ToyKit.set(sessionKey, collectionCount);\n      return;\n    }\n\n    if (ToyKit.get(sessionKey) === 0) {\n      ToyKit.set(sessionKey, collectionCount);\n    } else {\n      var MongolDocNumber = ToyKit.get(sessionKey) - 1;\n      ToyKit.set(sessionKey, MongolDocNumber);\n    }\n  }\n});","map":{"version":3,"sources":["packages/msavin:mongol/client/row_trash/main.js"],"names":["ToyKit","module","link","v","Mongol","Template","Mongol_trash","events","get","set","helpers","collectionCount","collectionName","collectionVar","Collection","find","count","currentPosition","sessionKey","current","Mongol_trash_viewer","currentDocument","docNumber","doc","collection","fetch","stringDoc","JSON","stringify","undefined","content","colorize","Package","Mongol_origin","Mongol_trash_menu","targetCollection","String","docID","_id","Meteor","call","e","r","alert","CurrentDocument","button","document","getElementsByClassName","click","MongolDocNumber"],"mappings":"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","sourcesContent":["import { ToyKit } from \"meteor/meteortoys:toykit\"\nimport { Mongol } from \"../../lib/index.js\"\nimport \"./main.html\"\n\nTemplate.Mongol_trash.events({\n\t'click': function () {\n\t\tif (!ToyKit.get(\"Mongol_Trash_Count\")) {\n\t\t\tToyKit.set(\"Mongol_Trash_Count\", 0)\n\t\t}\n\t}\n});\n\nTemplate.Mongol_trash.helpers({\n\tcollectionCount: function () {\n\t\tvar collectionName = \"MeteorToys.Mongol\";\n\t\tvar collectionVar = Mongol.Collection(collectionName);\n\t\treturn collectionVar && collectionVar.find().count() || 0;\n\t},\n\tcurrentPosition: function () {\n\t\tvar sessionKey = \"Mongol_Trash_Count\";\n\t\tvar current = ToyKit.get(sessionKey);\n\t\tvar count = current + 1;\n\t\treturn count;\n\t}\n});\n\nTemplate.Mongol_trash_viewer.helpers({\n\tcurrentDocument: function () {\n\t\tvar collectionName = \"MeteorToys.Mongol\",\n\t\t\tdocNumber      = ToyKit.get(\"Mongol_Trash_Count\"),\n\t\t\tdoc            = ToyKit.collection.get(\"MeteorToys.Mongol\").find().fetch()[docNumber];\n\t\t\n\t\tif (doc) {\n\t\t\tdelete doc['Mongol_origin']; \n\t\t\tdelete doc['Mongol_date'];\n\t\t\tvar stringDoc = JSON.stringify(doc, undefined, 2)\n\t\t\tvar content = ToyKit.colorize(stringDoc);\n\t\t\treturn content;\n\t\t}\n\t},\n\tcollectionName: function () {\n\t\tvar collectionName = \"MeteorToys.Mongol\",\n\t\t\tdocNumber      = ToyKit.get(\"Mongol_Trash_Count\"),\n\t\t\tdoc            = Package[\"msavin:mongol\"].Mongol.Collection(\"MeteorToys.Mongol\").find().fetch()[docNumber];\n\t\t\n\t\tif (doc) {\n\t\t\treturn doc.Mongol_origin;\n\t\t}\n\t}\n});\n\nTemplate.Mongol_trash_menu.events({\n\t'click .Mongol_m_edit': function () {\n\t\tvar collectionName = \"MeteorToys.Mongol\",\n\t\t\tdocNumber      = ToyKit.get(\"Mongol_Trash_Count\"),\n\t\t\tdoc            = ToyKit.collection.get(\"MeteorToys.Mongol\").find().fetch()[docNumber];\n\t\t\n\t\tvar targetCollection = String(doc.Mongol_origin);\n\t\tvar docID = String(doc._id);\n\n\t\tdelete doc['Mongol_origin']; \n\t\tdelete doc['Mongol_date'];\n\n\t\tMeteor.call(\"Mongol_insert\", targetCollection, doc, function (e, r) {\n\t\t\tif (e) {\n\t\t\t\talert(\"There was an error restoring your document.\");\n\t\t\t}\n\t\t});\n\n\t\tMeteor.call(\"Mongol_remove\", \"MeteorToys.Mongol\", docID, true, function (e, r) {\n\t\t\tif (e) {\n\t\t\t\talert(\"There was an error removing document from trash,\");\n\t\t\t}\n\t\t});\n\n\t\t// Set the position\n\t\tvar sessionKey \t\t= \"Mongol_Trash_Count\";\n\t\tvar CurrentDocument = ToyKit.get(sessionKey);        \n\t\tvar collectionVar   = Package[\"msavin:mongol\"].Mongol.Collection(\"MeteorToys.Mongol\");\n\t\tvar collectionCount = collectionVar.find().count() - 1;\n\n\t\tif (collectionCount === CurrentDocument) {\n\t\t\tvar button = document.getElementsByClassName(\"Mongol_m_left\");\n\t\t\tbutton[0].click()\n\t\t}\n\t},\n\t'click .Mongol_m_right': function() {\n\t\t// Set the key\n\t\tvar sessionKey = \"Mongol_Trash_Count\";\n\n\t\t// Grab the key\n\t\tvar CurrentDocument = ToyKit.get(sessionKey);        \n\t\tvar collectionVar   = Package[\"msavin:mongol\"].Mongol.Collection(\"MeteorToys.Mongol\");\n\t\tvar collectionCount = collectionVar.find().count() - 1;\n\n\t\tif (CurrentDocument > collectionCount) {\n\t\t\tToyKit.set(sessionKey, 0)\n\t\t\treturn;\n\t\t}\n\n\t\tif (collectionCount === CurrentDocument) {\n\t\t\t// Go back to document 1 \n\t\t\tToyKit.set(sessionKey, 0);\n\t\t} else {\n\t\t\t// Go to next document\n\t\t\tvar MongolDocNumber = ToyKit.get(sessionKey) + 1;\n\t\t\tToyKit.set(sessionKey, MongolDocNumber);\n\t\t}\n\n\t},\n\t'click .Mongol_m_left': function() {\n\t\tvar sessionKey = \"Mongol_Trash_Count\";\n\t\tvar CurrentDocument = ToyKit.get(sessionKey);\n\t\tvar collectionVar   = Package[\"msavin:mongol\"].Mongol.Collection(\"MeteorToys.Mongol\");\n\t\tvar collectionCount = collectionVar.find().count() - 1;\n\n\t\tif (CurrentDocument > collectionCount) {\n\t\t\tToyKit.set(sessionKey, collectionCount)\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (ToyKit.get(sessionKey) === 0) {\n\t\t\tToyKit.set(sessionKey, collectionCount)\n\t\t} else {\n\t\t\tvar MongolDocNumber = ToyKit.get(sessionKey) - 1;\n\t\t\tToyKit.set(sessionKey, MongolDocNumber);\n\t\t}\n\t},\n});"]},"sourceType":"module","hash":"a8f1ce074d86842c09b4e246df1e00bc8e9c7176"}
