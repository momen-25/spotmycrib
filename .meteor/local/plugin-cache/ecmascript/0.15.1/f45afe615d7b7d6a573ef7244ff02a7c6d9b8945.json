{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/momen/projects/spotmycrib-master/imports/reactui/pages/AdvertiseWithUs.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.linux.x86_64"},"sourceFileName":"imports/reactui/pages/AdvertiseWithUs.jsx","filename":"/home/momen/projects/spotmycrib-master/imports/reactui/pages/AdvertiseWithUs.jsx","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/home/momen/projects/spotmycrib-master","root":"/home/momen/projects/spotmycrib-master","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.13.10","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/momen/projects/spotmycrib-master/imports/reactui/pages/AdvertiseWithUs.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/reactui/pages/AdvertiseWithUs.jsx"}},"code":"let Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet ReactDOM;\nmodule.link(\"react-dom\", {\n  default(v) {\n    ReactDOM = v;\n  }\n\n}, 2);\nlet withTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  withTracker(v) {\n    withTracker = v;\n  }\n\n}, 3);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 4);\nlet MainLayoutHeader, LoginFormHorizontalT;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  },\n\n  LoginFormHorizontalT(v) {\n    LoginFormHorizontalT = v;\n  }\n\n}, 5);\nlet Collections;\nmodule.link(\"../../api/collections\", {\n  Collections(v) {\n    Collections = v;\n  }\n\n}, 6);\nif (Meteor.isClient) Session.set('subscriptionsReady', false);\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n} // function getAreas(countySelected) {\n//     var distinctEntries = _.uniq(Collections.Areas.find({County:countySelected}, {\n//         sort: {Area: 1}, fields: {Area: true}\n//     }).fetch().map(function(x) {\n//         return x.Area;\n//     }), true);\n//     allareas = []\n//     for(var i=0;i< distinctEntries.length;i++){\n//         if(!distinctEntries[i])continue;\n//         allareas.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n//     }\n//     return allareas;\n// }\n\n\nsearialisedAdvertiseForm = '';\n\nfunction saveToLocalStorage() {\n  searialisedAdvertiseForm = $('#advertiseWithUsFormCF').serializeArray();\n\n  if (localStorage) {\n    // localStorage.searialisedAdvertiseForm=searialisedAdvertiseForm// doesn' work as it saves as string, but we need to store as object\n    localStorage.advertisewithusFormData = {};\n    localStorage.advertisewithusFormData_address = $(\"input[name='address.address']\").val();\n    localStorage.advertisewithusFormData_price = $(\"input[name='price']\").val();\n    localStorage.advertisewithusFormData_county = $(\"select[name='address.county']\").val();\n    localStorage.advertisewithusFormData_area = $(\"select[name='address.area']\").val();\n    localStorage.advertisewithusFormData_type = $(\"select[name='type']\").val();\n    localStorage.advertisewithusFormData_furnished = $(\"select[name='furnished']\").val();\n    localStorage.advertisewithusFormData_baths = $(\"input[name='baths']\").val();\n    localStorage.advertisewithusFormData_numBedRoomCount = $(\"input[name='numBedRoomCount']\").val();\n  }\n}\n\nclass AdvertiseWithUs extends Component {\n  constructor(props) {\n    super(props);\n    this.components = {\n      c1: AwsStep1,\n      c2: AwsStep2,\n      AwsStep1: AwsStep1,\n      AwsStep2: AwsStep2,\n      AwsStep3: AwsStep3\n    };\n  }\n\n  render() {\n    const self = this;\n    const TagName = this.components[this.props.curStepComponent];\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"video-div\",\n      style: {\n        display: \"none\"\n      }\n    }, /*#__PURE__*/React.createElement(\"iframe\", {\n      width: \"560\",\n      height: \"315\",\n      src: \"https://www.youtube.com/embed/L689NIDwFdc?autoplay=1&rel=0\",\n      frameBorder: \"0\",\n      allowFullScreen: true\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"mar-top-20 mar-btm-20\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container background-white \"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-holder mar-top-20 pad-btm-20\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"autoFrm\"\n    }, /*#__PURE__*/React.createElement(TagName, null))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n\nmodule.exportDefault(withTracker(() => {\n  if (Meteor.isClient) {\n    var pageno = FlowRouter.getParam('pageno');\n    if (!pageno) pageno = 1;\n    var loginFlowComplete = Session.get('loginFlowComplete');\n\n    if (pageno == 2 && loginFlowComplete) {\n      FlowRouter.go('advertisewithus', {\n        pageno: 3\n      });\n      Session.set('loginFlowComplete', undefined);\n      if (typeof fbq !== 'undefined') fbq('track', 'Lead');\n      if (typeof ga !== 'undefined') ga('send', 'event', 'AdvertiseWithUsPage', 'UserLoginCompleted', 'User login / signup');\n    }\n  }\n\n  return {};\n})(AdvertiseWithUs));\n\nclass AwsStep1 extends Component {\n  componentDidMount() {\n    setTimeout(function () {\n      try {\n        $.fancybox({\n          'padding': 0,\n          'href': '#video-div'\n        });\n      } catch (e) {}\n    }, 3000);\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \"Advertise your property to rent for FREE!\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, \"List your property to rent in SpotMyCrib. Let thousands of verified tenants apply for your letting. Choose if you are a landlord, agent or the current tenant looking for a replacement so you can move. \"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, \"Enter the details of the property below and click submit.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(AdvertiseWithUsFormT, null));\n  }\n\n}\n\nclass AwsStep2 extends Component {\n  constructor(props) {\n    super(props);\n    this.backBtnHandler = this.backBtnHandler.bind(this);\n  }\n\n  backBtnHandler() {\n    FlowRouter.go('advertisewithus');\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \"Advertise your property to rent (step 2 of 3)\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:void(0)\",\n      className: \"backBtn\",\n      onClick: this.backBtnHandler\n    }, \"<< Back to step 1\"), /*#__PURE__*/React.createElement(\"p\", null, \"Connect your advert to your account. Login now or sign up with your social account. \", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(LoginFormHorizontalT, {\n      isLandLordMode: true\n    }));\n  }\n\n}\n\nclass AwsStep3 extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      propertyId: '',\n      auctionId: '',\n      myPropertyLink: ''\n    };\n    this.backBtnHandler = this.backBtnHandler.bind(this);\n    this.addPropImagesHandler = this.addPropImagesHandler.bind(this);\n  }\n\n  backBtnHandler() {\n    FlowRouter.go('advertisewithus');\n  }\n\n  addPropImagesHandler() {\n    if (typeof ga !== 'undefined') ga('send', 'event', 'AdvertiseWithUsPage', 'addPropertyImagesBtnClick', 'AddPropertyImages button clicked.');\n    Session.set('OpenImageUploader', true);\n    Session.set('fromAdvertiseWithUsPage', true);\n    FlowRouter.go('account/editproperty', {\n      id: this.state.propertyId\n    });\n  }\n\n  myPropertyLink() {\n    var propertyId = this.state.propertyId;\n    if (!propertyId) return '';\n    var auctionId = this.state.auctionId;\n    if (!auctionId) return '';\n    var prop = Collections.Properties.findOne(propertyId);\n    if (!prop) return '';\n    var auction = Collections.Auctions.findOne({\n      _id: auctionId\n    });\n    if (!auction) return '';\n    return FlowRouter.path('rent', {\n      slug: prop.slug,\n      key: auction.lettingAuctionCode\n    });\n  }\n\n  componentDidMount() {\n    if (Meteor.isClient) {\n      var user = Meteor.user();\n\n      if (!user) {\n        //\n        FlowRouter.go('advertisewithus', {\n          pageno: 2\n        });\n        return;\n      }\n\n      if (!searialisedAdvertiseForm) {\n        FlowRouter.go('advertisewithus');\n        return;\n      }\n\n      this.addPropertyCallback = function (error, propertyId) {\n        if (error) {\n          console.log(error);\n          var tmp = Session.get(\"showErrorDlg\");\n          if (!tmp) tmp = [];\n          var msg = 'An error occurred.';\n          if (error.reason) msg += ' ' + error.reason + '.';else if (error.message) msg += ' ' + error.message + '.';\n          tmp.push(msg);\n          Session.set(\"showErrorDlg\", tmp);\n          return;\n        }\n\n        this.setState({\n          propertyId: propertyId\n        });\n        Meteor.subscribe('editProperty', propertyId); //Can also be used for advertisewithus\n\n        this.addAdvertisementFormCallback = function (error, auctionId) {\n          if (error) {\n            console.log(error); //    validator.showErrors({\n            //         email: error.reason\n            //     });\n\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            var msg = 'An error occurred.';\n            if (error.reason) msg += ' ' + error.reason + '.';else if (error.message) msg += ' ' + error.message + '.';\n            tmp.push(msg);\n            Session.set(\"showErrorDlg\", tmp);\n            return;\n          }\n\n          console.log('addAdvertisement created successfully');\n          console.log(auctionId);\n          var templateInstance = this;\n          this.setState({\n            auctionId: auctionId\n          }, function () {\n            var propertyId = templateInstance.state.propertyId;\n            if (!propertyId) return '';\n            var auctionId = templateInstance.state.auctionId;\n            if (!auctionId) return '';\n            var prop = Collections.Properties.findOne({\n              _id: propertyId\n            });\n            if (!prop) return '';\n            var auction = Collections.Auctions.findOne({\n              _id: auctionId\n            });\n            if (!auction) return '';\n            var myPropertyLink = FlowRouter.url('rent', {\n              slug: prop.slug,\n              key: auction.lettingAuctionCode\n            });\n            this.setState({\n              myPropertyLink: myPropertyLink\n            });\n          });\n        };\n\n        this.addAdvertisementFormCallback = this.addAdvertisementFormCallback.bind(this);\n        Meteor.call('addAdvertisement', searialisedAdvertiseForm, propertyId, this.addAdvertisementFormCallback);\n      };\n\n      this.addPropertyCallback = this.addPropertyCallback.bind(this);\n      Meteor.call('addProperty', searialisedAdvertiseForm, this.addPropertyCallback);\n    }\n  } //todo: this is page is not developed. So finish it.\n\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \"Congratulations! Your property is now live.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:void(0)\",\n      className: \"backBtn\",\n      onClick: this.backBtnHandler\n    }, \"<< Back to step 1\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        margin: '10px 0 10px 0px'\n      }\n    }, \"Choose add property images button below to add images to your advert to make it clear and attractive. Add description and choose amenities available by choosing edit option below. Choose preview below to view it, use the link from the preview window to share it with others. \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signin-form cf-1\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clearfix\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-full-width\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btns blue-btn addPropImages\",\n      onClick: self.addPropImagesHandler\n    }, \"Add property images\"), self.state.propertyId ? /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('account/editproperty', {\n        id: self.state.propertyId\n      }),\n      className: \"btns transparent-btn mar-left-10\"\n    }, \"Edit property\") : \"\", /*#__PURE__*/React.createElement(\"a\", {\n      href: self.state.myPropertyLink,\n      target: \"_blank\",\n      className: \"btns blue-btn mar-left-10\"\n    }, \"Preview property\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\"\n    }))), /*#__PURE__*/React.createElement(\"h2\", null, \"Whats next?\"), /*#__PURE__*/React.createElement(\"p\", null, \"Visit \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('account/myProperties')\n    }, \"my properties\"), \" from \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('account/myProperties')\n    }, \"here\"), \" or from top menu to see the list of all your properties. Visit \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-text\"\n    }, \"view applications\"), \" from my properties to see list of all applications your property receive. .\"));\n  }\n\n}\n\nclass AdvertiseWithUsForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      addPropertyFormSaving: false,\n      numBedRoomCount: 0,\n      numBedRoomCountArr: 0,\n      counties: props.counties,\n      areas: props.areas,\n      countySelected: props.countySelected,\n      propertyTypes: props.propertyTypes\n    };\n    this.countySelectedHandler = this.countySelectedHandler.bind(this);\n    this.areaSelectedHandler = this.areaSelectedHandler.bind(this);\n    this.propertyTypeHandler = this.propertyTypeHandler.bind(this);\n  }\n\n  countySelectedHandler(event) {\n    var countySelected = event.target.value;\n    this.setState({\n      countySelected: countySelected\n    });\n    if (Meteor.isClient) Session.set('countySelected', countySelected); // if(countySelected) this.setState({areas:getAreas(countySelected)})\n\n    setTimeout(function () {\n      $('.areaSelected').val(\"\");\n      saveToLocalStorage();\n    }, 250);\n  }\n\n  areaSelectedHandler(event) {\n    this.setState({\n      areaSelected: event.target.value\n    });\n    setTimeout(saveToLocalStorage, 250);\n  }\n\n  propertyTypeHandler(event) {\n    this.setState({\n      propertyTypeSelected: event.target.value\n    });\n    setTimeout(saveToLocalStorage, 250);\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    this.setState({\n      addPropertyFormSaving: true\n    });\n    var instance = this;\n    setTimeout(function () {\n      instance.setState({\n        addPropertyFormSaving: false\n      });\n    }, 2000);\n    const address = ReactDOM.findDOMNode(this.refs.address).value.trim();\n    const price = ReactDOM.findDOMNode(this.refs.price).value.trim();\n    const county = ReactDOM.findDOMNode(this.refs.county).value.trim();\n  }\n\n  updateNumBedRoomCount(event) {\n    this.setState({\n      numBedRoomCount: event.target.value\n    });\n    var countArr = [];\n\n    for (var i = 0; i < event.target.value; i++) {\n      countArr.push({\n        'index': i + 1\n      });\n    }\n\n    this.setState({\n      numBedRoomCountArr: countArr\n    });\n  }\n\n  componentDidMount() {\n    // console.log(this.props)\n    var instance = this;\n\n    if (Meteor.isClient) {\n      var validator = $('#advertiseWithUsFormCF').validate({\n        submitHandler: function (event) {\n          // addPropertyFormSaving.set(true);//Not needed on this form.\n          console.log(\"You just submitted the 'addPropertyForm' form.\");\n          saveToLocalStorage();\n\n          if (instance.props.user) {\n            FlowRouter.go('advertisewithus', {\n              pageno: 3\n            });\n          } else {\n            FlowRouter.go('advertisewithus', {\n              pageno: 2\n            });\n          }\n        }\n      });\n    }\n\n    setTimeout(function () {\n      try {\n        jQuery(\"html,body\").animate({\n          scrollTop: 0\n        }, 250);\n      } catch (e) {\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n      }\n\n      instance.restoreLocalStorageSettings();\n    }, 500);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.propertyTypes.length) //update only if it has vals.\n      this.setState({\n        propertyTypes: nextProps.propertyTypes\n      });\n    if (nextProps.areas.length) //update only if it has vals.\n      this.setState({\n        areas: nextProps.areas\n      });\n  }\n\n  restoreLocalStorageSettings() {\n    var county = '';\n\n    if (localStorage) {\n      if (localStorage.advertisewithusFormData_county) {\n        county = localStorage.advertisewithusFormData_county;\n      } else if (localStorage.advertisewithusFormData_county === undefined) {\n        //Only for first time users\n        county = 'Dublin';\n      }\n\n      if (localStorage.advertisewithusFormData_type) {\n        this.setState({\n          propertyTypeSelected: localStorage.advertisewithusFormData_type\n        });\n      }\n    }\n\n    this.setState({\n      countySelected: county\n    });\n    if (Meteor.isClient) Session.set('countySelected', county); // if(county)this.setState({areas:getAreas(county)})\n\n    if (localStorage) if (localStorage.advertisewithusFormData_area) {\n      this.setState({\n        areaSelected: localStorage.advertisewithusFormData_area\n      });\n    }\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signin-form cf-1\",\n      id: \"advertiseWithUsFormCF\",\n      onSubmit: this.handleSubmit.bind(this)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clearfix\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input \"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"address.address\",\n      id: \"address.address\",\n      required: true,\n      ref: \"address\"\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      id: \"address.address-error\",\n      className: \"error\",\n      htmlFor: \"address.address\"\n    }, \"This field is required.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"label\", null, \"Name and Street *\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input \"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"price\",\n      required: true,\n      ref: \"price\"\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      id: \"address.address-error\",\n      className: \"error\",\n      htmlFor: \"address.address\"\n    }, \"This field is required.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"label\", null, \"Rent *\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"label\", null, \"County\"), /*#__PURE__*/React.createElement(\"select\", {\n      autoComplete: \"on\",\n      name: \"address.county\",\n      ref: \"county\",\n      required: true,\n      className: \"countySelected\",\n      onChange: this.countySelectedHandler,\n      value: this.state.countySelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"(Select One)\"), this.state.counties.map(function (c, i) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: c.value\n      }, c.label);\n    })), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"label\", null, \"Area *\"), /*#__PURE__*/React.createElement(\"select\", {\n      autoComplete: \"on\",\n      name: \"address.area\",\n      required: true,\n      className: \"areaSelected\",\n      onChange: this.areaSelectedHandler,\n      value: this.state.areaSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"(Select One)\"), this.state.areas.map(function (c, i) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: c.value\n      }, c.label);\n    })), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"label\", null, \"Property type *\"), /*#__PURE__*/React.createElement(\"select\", {\n      autoComplete: \"on\",\n      name: \"type\",\n      ref: \"type\",\n      required: true,\n      className: \"\",\n      onChange: this.propertyTypeHandler,\n      value: this.state.propertyTypeSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"(Select One)\"), this.state.propertyTypes.map(function (c, i) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: c.value\n      }, c.label);\n    })), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"label\", null, \"Furnished? *\"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      required: true,\n      autoComplete: \"on\",\n      ref: \"furnished\"\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"true\"\n    }, \"Yes\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"false\"\n    }, \"No\")), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input underline\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"baths\",\n      id: \"baths\",\n      required: true,\n      ref: \"baths\"\n    }), /*#__PURE__*/React.createElement(\"label\", null, \"Number of bathrooms\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input underline\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"numBedRoomCount\",\n      id: \"numBedRoomCount\",\n      required: true,\n      ref: \"numBedRoomCount\",\n      onChange: this.updateNumBedRoomCount.bind(this),\n      value: self.state.numBedRoomCount\n    }), /*#__PURE__*/React.createElement(\"label\", null, \"Number of bedrooms\"), /*#__PURE__*/React.createElement(\"span\", null)), self.state.numBedRoomCountArr ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-full-width\"\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"sep-label\"\n    }, \"Ensuite? \"), this.state.numBedRoomCountArr.map(function (arr, k) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: k,\n        className: \"styled-input-select styled-input-checkbox max-20\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"checkbox disabled\"\n      }, /*#__PURE__*/React.createElement(\"label\", null, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        name: \"bedrooms.\" + arr.index + \".ensuite\"\n      }), \"Bedroom \", arr.index, \" Ensuite?\")), /*#__PURE__*/React.createElement(\"label\", null, \"Bed Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        required: \"\",\n        autoComplete: \"\",\n        name: \"bedrooms.\" + arr.index + \".bedType\"\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"single\"\n      }, \"Single\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"double\"\n      }, \"Double\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"twin\"\n      }, \"Twin\")), /*#__PURE__*/React.createElement(\"span\", null));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\"\n    })) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-full-width\"\n    }, self.state.addPropertyFormSaving ? /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btns transparent-btn\"\n    }, \"Saving\") : /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btns blue-btn addPropertyFormSaveBtn\"\n    }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btns transparent-btn addPropertyFormCancelBtn mar-left-10\"\n    }, \"Cancel\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\"\n    })));\n  }\n\n}\n\nAdvertiseWithUsFormT = withTracker(() => {\n  var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n  var allareas = [];\n  var allcounties = [];\n  var countySelected = 'Dublin';\n  if (Meteor.isClient) if (Session.get('countySelected')) countySelected = Session.get('countySelected');\n\n  for (var i = 0; i < staticCounties.length; i++) {\n    if (!staticCounties[i]) continue;\n    allcounties.push({\n      label: staticCounties[i],\n      value: staticCounties[i]\n    });\n  }\n\n  var distinctEntries = _.uniq(Collections.Areas.find({}, {\n    //County:countySelected ; Dynamically load areas based on the subscription.\n    sort: {\n      Area: 1\n    },\n    fields: {\n      Area: true\n    }\n  }).fetch().map(function (x) {\n    return x.Area;\n  }), true);\n\n  allareas = [];\n\n  for (var i = 0; i < distinctEntries.length; i++) {\n    if (!distinctEntries[i]) continue;\n    allareas.push({\n      label: titleCase(distinctEntries[i]),\n      value: distinctEntries[i]\n    });\n  }\n\n  var Config = Collections.Config.find().fetch();\n  Config = Config[0];\n  var propertyTypes = [];\n  if (Config) for (var i = 0; i < Config.propertyType.length; i++) {\n    propertyTypes.push({\n      label: titleCase(Config.propertyType[i].name),\n      value: Config.propertyType[i].value\n    });\n  }\n  const AreasSub = Meteor.subscribe('Areas', '', '', countySelected, '', '', function () {\n    if (ConfigSub.ready()) Session.set('subscriptionsReady', true);\n  });\n  const ConfigSub = Meteor.subscribe('Config', function () {\n    if (AreasSub.ready()) Session.set('subscriptionsReady', true);\n  });\n  if (Meteor.isClient) Session.get('subscriptionsReady'); // Meteor.subscribe('Areas');\n  // Meteor.subscribe('Config');\n\n  Meteor.subscribe('userData');\n  return {\n    user: Meteor.user(),\n    counties: allcounties,\n    countySelected: countySelected,\n    areas: allareas,\n    propertyTypes: propertyTypes\n  };\n})(AdvertiseWithUsForm);","map":{"version":3,"sources":["imports/reactui/pages/AdvertiseWithUs.jsx"],"names":["Meteor","module","link","v","React","Component","default","ReactDOM","withTracker","MainLayoutFooter","MainLayoutHeader","LoginFormHorizontalT","Collections","isClient","Session","set","titleCase","str","charAt","toUpperCase","toLowerCase","substring","searialisedAdvertiseForm","saveToLocalStorage","$","serializeArray","localStorage","advertisewithusFormData","advertisewithusFormData_address","val","advertisewithusFormData_price","advertisewithusFormData_county","advertisewithusFormData_area","advertisewithusFormData_type","advertisewithusFormData_furnished","advertisewithusFormData_baths","advertisewithusFormData_numBedRoomCount","AdvertiseWithUs","constructor","props","components","c1","AwsStep1","c2","AwsStep2","AwsStep3","render","self","TagName","curStepComponent","display","exportDefault","pageno","FlowRouter","getParam","loginFlowComplete","get","go","undefined","fbq","ga","componentDidMount","setTimeout","fancybox","e","backBtnHandler","bind","state","propertyId","auctionId","myPropertyLink","addPropImagesHandler","id","prop","Properties","findOne","auction","Auctions","_id","path","slug","key","lettingAuctionCode","user","addPropertyCallback","error","console","log","tmp","msg","reason","message","push","setState","subscribe","addAdvertisementFormCallback","templateInstance","url","call","margin","AdvertiseWithUsForm","addPropertyFormSaving","numBedRoomCount","numBedRoomCountArr","counties","areas","countySelected","propertyTypes","countySelectedHandler","areaSelectedHandler","propertyTypeHandler","event","target","value","areaSelected","propertyTypeSelected","handleSubmit","preventDefault","instance","address","findDOMNode","refs","trim","price","county","updateNumBedRoomCount","countArr","i","validator","validate","submitHandler","jQuery","animate","scrollTop","document","body","documentElement","restoreLocalStorageSettings","componentWillReceiveProps","nextProps","length","map","c","label","arr","k","index","AdvertiseWithUsFormT","staticCounties","allareas","allcounties","distinctEntries","_","uniq","Areas","find","sort","Area","fields","fetch","x","Config","propertyType","name","AreasSub","ConfigSub","ready"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { withTracker } from 'meteor/react-meteor-data';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader, {LoginFormHorizontalT}  from '../layout/MainLayoutHeader.jsx'\nimport {Collections} from \"../../api/collections\";\nif(Meteor.isClient)Session.set('subscriptionsReady',false);\n\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n// function getAreas(countySelected) {\n//     var distinctEntries = _.uniq(Collections.Areas.find({County:countySelected}, {\n//         sort: {Area: 1}, fields: {Area: true}\n//     }).fetch().map(function(x) {\n//         return x.Area;\n//     }), true);\n//     allareas = []\n//     for(var i=0;i< distinctEntries.length;i++){\n//         if(!distinctEntries[i])continue;\n//         allareas.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n//     }\n//     return allareas;\n// }\nsearialisedAdvertiseForm = '';\nfunction saveToLocalStorage(){\n    searialisedAdvertiseForm = $('#advertiseWithUsFormCF').serializeArray();\n    if (localStorage) {\n        // localStorage.searialisedAdvertiseForm=searialisedAdvertiseForm// doesn' work as it saves as string, but we need to store as object\n        localStorage.advertisewithusFormData={}\n        localStorage.advertisewithusFormData_address = $( \"input[name='address.address']\" ).val();\n        localStorage.advertisewithusFormData_price = $( \"input[name='price']\" ).val();\n        localStorage.advertisewithusFormData_county = $( \"select[name='address.county']\" ).val();\n        localStorage.advertisewithusFormData_area = $( \"select[name='address.area']\" ).val();\n        localStorage.advertisewithusFormData_type = $( \"select[name='type']\" ).val();\n        localStorage.advertisewithusFormData_furnished = $( \"select[name='furnished']\" ).val();\n        localStorage.advertisewithusFormData_baths = $( \"input[name='baths']\" ).val();\n        localStorage.advertisewithusFormData_numBedRoomCount = $( \"input[name='numBedRoomCount']\" ).val();\n    }\n}\nclass AdvertiseWithUs extends Component {\n\n    constructor(props){\n        super(props)\n        this.components = {\n            c1: AwsStep1,\n            c2: AwsStep2,\n            AwsStep1: AwsStep1,\n            AwsStep2: AwsStep2,\n            AwsStep3: AwsStep3\n        }\n    }\n\n    render(){\n        const self = this;\n        const TagName = this.components[this.props.curStepComponent];\n\n        return (\n        <div>\n            <MainLayoutHeader />\n            <div id=\"video-div\" style={{display: \"none\"}}>\n                <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/L689NIDwFdc?autoplay=1&rel=0\" frameBorder=\"0\" allowFullScreen></iframe>\n                {/* allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" */}\n            </div>\n            <section className=\"mar-top-20 mar-btm-20\">\n                <div className=\"container background-white \">\n                    <div className=\"filter-holder mar-top-20 pad-btm-20\">\n                        <div className=\"autoFrm\">\n                            <TagName />\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n        </div>\n    )\n    }\n}\nexport default withTracker(() => {\n    if(Meteor.isClient){\n        var pageno = FlowRouter.getParam('pageno'); if(!pageno)pageno=1;\n\n        var loginFlowComplete = Session.get('loginFlowComplete')\n        if(pageno == 2 && loginFlowComplete){\n            FlowRouter.go('advertisewithus',{pageno:3})\n            Session.set('loginFlowComplete', undefined);\n            if(typeof fbq !== 'undefined')fbq('track', 'Lead');\n            if(typeof ga !== 'undefined')ga('send', 'event', 'AdvertiseWithUsPage', 'UserLoginCompleted', 'User login / signup')\n        }\n    }\n\n    return {}\n})(AdvertiseWithUs);\nclass AwsStep1 extends Component {\n    componentDidMount(){\n        setTimeout(function(){\n            try{\n                $.fancybox({\n                    'padding': 0,\n                    'href':'#video-div'\n                })\n            }catch(e){}\n        },3000)\n    }\n    render(){\n        const self = this;\n        return (\n        <div>\n            <h1>Advertise your property to rent for FREE!</h1><br />\n            <p>List your property to rent in SpotMyCrib. Let thousands of verified tenants apply for your letting. Choose if you are a landlord, agent or the current tenant looking for a replacement so you can move. </p><br />\n            <p>Enter the details of the property below and click submit.<br /><br /><br /><br /></p>\n            <AdvertiseWithUsFormT/>\n        </div>\n        )\n    }\n}\nclass AwsStep2 extends Component {\n    constructor(props){\n        super(props);\n        this.backBtnHandler = this.backBtnHandler.bind(this);\n    }\n    backBtnHandler(){\n        FlowRouter.go('advertisewithus')\n    }\n    render(){\n        const self = this;\n        return (\n        <div>\n            <h1>Advertise your property to rent (step 2 of 3)</h1><br />\n            <a href=\"javascript:void(0)\" className=\"backBtn\" onClick={this.backBtnHandler}>&lt;&lt; Back to step 1</a>\n            <p>Connect your advert to your account. Login now or sign up with your social account. <br /><br /><br /><br /></p>\n\n            <LoginFormHorizontalT isLandLordMode={true}/>\n\n        </div>\n        )\n    }\n}\nclass AwsStep3 extends Component {\n\n    constructor(props){\n        super(props);\n        this.state={\n            propertyId:'',\n            auctionId:'',\n            myPropertyLink:'',\n        }\n        this.backBtnHandler = this.backBtnHandler.bind(this);\n        this.addPropImagesHandler = this.addPropImagesHandler.bind(this);\n    }\n    backBtnHandler(){\n        FlowRouter.go('advertisewithus')\n    }\n    addPropImagesHandler(){\n        if(typeof ga !== 'undefined')ga('send', 'event', 'AdvertiseWithUsPage', 'addPropertyImagesBtnClick', 'AddPropertyImages button clicked.');\n        Session.set('OpenImageUploader',true);\n        Session.set('fromAdvertiseWithUsPage',true);\n        FlowRouter.go('account/editproperty',{id:this.state.propertyId})\n    }\n    myPropertyLink(){\n        var propertyId = this.state.propertyId; if(!propertyId)return '';\n        var auctionId = this.state.auctionId; if(!auctionId)return '';\n        var prop = Collections.Properties.findOne(propertyId); if(!prop)return '';\n        var auction = Collections.Auctions.findOne({_id:auctionId}); if(!auction)return '';\n\n        return FlowRouter.path('rent',{slug:prop.slug,key:auction.lettingAuctionCode})\n    }\n    componentDidMount(){\n        if(Meteor.isClient){\n            var user = Meteor.user();\n            if(!user){//\n                FlowRouter.go('advertisewithus',{pageno:2})\n                return;\n            }\n            if(!searialisedAdvertiseForm){\n                FlowRouter.go('advertisewithus')\n                return;\n            }\n            this.addPropertyCallback = function (error, propertyId) {\n\n                if(error){\n                    console.log(error)\n                    var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                    var msg = 'An error occurred.';\n                    if(error.reason)msg += ' '+error.reason+'.'\n                    else if(error.message)msg += ' '+error.message+'.'\n                    tmp.push(msg);\n                    Session.set(\"showErrorDlg\",tmp)\n                    return;\n                }\n                this.setState({propertyId:propertyId})\n                Meteor.subscribe('editProperty',propertyId)//Can also be used for advertisewithus\n                this.addAdvertisementFormCallback = function (error, auctionId) {\n                    if(error){\n                        console.log(error)\n                        //    validator.showErrors({\n                        //         email: error.reason\n                        //     });\n                        var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                        var msg = 'An error occurred.';\n                        if(error.reason)msg += ' '+error.reason+'.'\n                        else if(error.message)msg += ' '+error.message+'.'\n                        tmp.push(msg);\n                        Session.set(\"showErrorDlg\",tmp)\n                        return;\n                    }\n                    console.log('addAdvertisement created successfully')\n                    console.log(auctionId);\n                    var templateInstance = this;\n                    this.setState({auctionId:auctionId},function () {\n                        var propertyId = templateInstance.state.propertyId; if(!propertyId)return '';\n                        var auctionId = templateInstance.state.auctionId; if(!auctionId)return '';\n                        var prop = Collections.Properties.findOne({_id:propertyId}); if(!prop)return '';\n                        var auction = Collections.Auctions.findOne({_id:auctionId}); if(!auction)return '';\n\n                        var myPropertyLink = FlowRouter.url('rent',{slug:prop.slug,key:auction.lettingAuctionCode})\n                        this.setState({myPropertyLink:myPropertyLink})\n                    })\n                }\n                this.addAdvertisementFormCallback = this.addAdvertisementFormCallback.bind(this)\n                Meteor.call('addAdvertisement',searialisedAdvertiseForm,propertyId,this.addAdvertisementFormCallback)\n            }\n            this.addPropertyCallback = this.addPropertyCallback.bind(this);\n            Meteor.call('addProperty',searialisedAdvertiseForm,this.addPropertyCallback)\n        }\n\n\n\n    }\n    //todo: this is page is not developed. So finish it.\n    render(){\n        const self = this;\n        return (\n        <div>\n            <h1>Congratulations! Your property is now live.</h1><br />\n            <a href=\"javascript:void(0)\" className=\"backBtn\" onClick={this.backBtnHandler}>&lt;&lt; Back to step 1</a>\n            {/*<h2>Add property images. </h2>*/}\n            <p style={{margin: '10px 0 10px 0px'}}>Choose add property images button below to add images to your advert to make it clear and attractive. Add description and choose amenities available by choosing edit option below. Choose preview below to view it, use the link from the preview window to share it with others. </p>\n            <div className=\"signin-form cf-1\">\n                <div className=\"clearfix\">\n                    <div className=\"styled-full-width\">\n                        <button className=\"btns blue-btn addPropImages\" onClick={self.addPropImagesHandler}>Add property images</button>\n                        {self.state.propertyId ? (\n                            <a href={FlowRouter.url('account/editproperty', {id:self.state.propertyId})} className=\"btns transparent-btn mar-left-10\">Edit property</a>\n                        ) : \"\"}\n                        <a href={self.state.myPropertyLink} target=\"_blank\" className=\"btns blue-btn mar-left-10\">Preview property</a>\n                    </div>\n                    <div className=\"w-100\" />\n                </div>\n            </div>\n            <h2>Whats next?</h2>\n            <p>Visit <a href={FlowRouter.url('account/myProperties')}>my properties</a> from <a href={FlowRouter.url('account/myProperties')}>here</a> or from top menu to see the list of all your properties. Visit <span className=\"green-text\">view applications</span> from my properties to see list of all applications your property receive. .</p>\n        </div>\n        )\n    }\n}\nclass AdvertiseWithUsForm extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            addPropertyFormSaving : false,\n            numBedRoomCount:0,\n            numBedRoomCountArr:0,\n            counties:props.counties,\n            areas:props.areas,\n            countySelected:props.countySelected,\n            propertyTypes:props.propertyTypes\n        };\n        this.countySelectedHandler = this.countySelectedHandler.bind(this);\n        this.areaSelectedHandler = this.areaSelectedHandler.bind(this);\n        this.propertyTypeHandler = this.propertyTypeHandler.bind(this);\n    }\n    countySelectedHandler(event){\n        var countySelected = event.target.value\n        this.setState({countySelected:countySelected})\n\n        if( Meteor.isClient )Session.set('countySelected', countySelected);\n        // if(countySelected) this.setState({areas:getAreas(countySelected)})\n\n        setTimeout(function(){\n            $('.areaSelected').val(\"\")\n            saveToLocalStorage();\n        },250)\n    }\n\n    areaSelectedHandler(event){\n        this.setState({areaSelected:event.target.value})\n        setTimeout(saveToLocalStorage,250)\n    }\n\n    propertyTypeHandler(event){\n        this.setState({propertyTypeSelected:event.target.value})\n        setTimeout(saveToLocalStorage,250)\n    }\n\n    handleSubmit(event){\n        event.preventDefault();\n        this.setState({addPropertyFormSaving:true})\n        var instance = this;\n        setTimeout(function(){\n            instance.setState({addPropertyFormSaving:false})\n        },2000)\n        const address = ReactDOM.findDOMNode(this.refs.address).value.trim()\n        const price = ReactDOM.findDOMNode(this.refs.price).value.trim()\n        const county = ReactDOM.findDOMNode(this.refs.county).value.trim()\n    }\n\n    updateNumBedRoomCount(event){\n        this.setState({numBedRoomCount:event.target.value})\n        var countArr = [];\n        for (var i=0; i<event.target.value; i++){\n            countArr.push({'index':i+1});\n        }\n        this.setState({numBedRoomCountArr:countArr})\n    }\n\n    componentDidMount(){\n        // console.log(this.props)\n        var instance = this;\n        if(Meteor.isClient) {\n            var validator = $('#advertiseWithUsFormCF').validate({\n                submitHandler: function (event) {\n                    // addPropertyFormSaving.set(true);//Not needed on this form.\n                    console.log(\"You just submitted the 'addPropertyForm' form.\");\n                    saveToLocalStorage();\n                    if (instance.props.user) {\n                        FlowRouter.go('advertisewithus', {pageno: 3})\n                    }\n                    else {\n                        FlowRouter.go('advertisewithus', {pageno: 2})\n                    }\n\n                }\n            });\n        }\n        setTimeout(function(){\n            try {\n                jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n            } catch (e) {\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\n            }\n            instance.restoreLocalStorageSettings();\n        },500)\n    }\n    componentWillReceiveProps(nextProps) {\n        if(nextProps.propertyTypes.length)//update only if it has vals.\n            this.setState({propertyTypes:nextProps.propertyTypes})\n        if(nextProps.areas.length)//update only if it has vals.\n            this.setState({areas:nextProps.areas})\n\n        \n    }\n    restoreLocalStorageSettings(){\n        var county = '';\n        if(localStorage) {\n            if (localStorage.advertisewithusFormData_county) {\n                county=localStorage.advertisewithusFormData_county;\n            }else if(localStorage.advertisewithusFormData_county===undefined){//Only for first time users\n                county = 'Dublin'\n            }\n            if (localStorage.advertisewithusFormData_type) {\n                this.setState({propertyTypeSelected:localStorage.advertisewithusFormData_type})\n            }\n        }\n        this.setState({countySelected:county})\n        if( Meteor.isClient )Session.set('countySelected', county);\n        // if(county)this.setState({areas:getAreas(county)})\n\n        if(localStorage)\n        if (localStorage.advertisewithusFormData_area) {\n            this.setState({areaSelected:localStorage.advertisewithusFormData_area})\n        }\n    }\n\n    render(){\n        const self = this;\n        return (\n        <form className=\"signin-form cf-1\" id=\"advertiseWithUsFormCF\" onSubmit={this.handleSubmit.bind(this)}>\n            <div className=\"clearfix\">\n                <div className=\"styled-input \">\n                    <input type=\"text\" name=\"address.address\" id=\"address.address\" required ref=\"address\"/>\n                    <label id=\"address.address-error\" className=\"error\" htmlFor=\"address.address\">This field is required.</label>\n                    <br />\n                    <label>Name and Street *</label>\n                    <span />\n                </div>\n                <div className=\"styled-input \">\n                    <input type=\"number\" name=\"price\" required ref=\"price\" />\n                    <label id=\"address.address-error\" className=\"error\" htmlFor=\"address.address\">This field is required.</label>\n                    <br />\n                    <label>Rent *</label>\n                    <span />\n                </div>\n                <div className=\"styled-input styled-input-select\">\n                    <label>County</label>\n                    <select autoComplete=\"on\" name=\"address.county\" ref=\"county\" required className=\"countySelected\" onChange={this.countySelectedHandler} value={this.state.countySelected}>\n                        <option value={\"\"}>(Select One)</option>\n                        {this.state.counties.map(function(c,i){\n                            return (\n                                <option key={i} value={c.value} >{c.label}</option>\n                            )\n                        })}\n                    </select>\n                    <span />\n                </div>\n                <div className=\"styled-input styled-input-select\">\n                    <label>Area *</label>\n                    <select autoComplete=\"on\" name=\"address.area\" required className=\"areaSelected\" onChange={this.areaSelectedHandler} value={this.state.areaSelected}>\n                        <option value={\"\"}>(Select One)</option>\n                        {this.state.areas.map(function(c,i){\n                            return (\n                                <option key={i} value={c.value} >{c.label}</option>\n                            )\n                        })}\n                    </select>\n                    <span />\n                </div>\n                <div className=\"styled-input styled-input-select\">\n                    <label>Property type *</label>\n                    <select autoComplete=\"on\" name=\"type\" ref=\"type\" required className=\"\" onChange={this.propertyTypeHandler} value={this.state.propertyTypeSelected}>\n                        <option value={\"\"}>(Select One)</option>\n                        {this.state.propertyTypes.map(function(c,i){\n                            return (\n                                <option key={i} value={c.value} >{c.label}</option>\n                            )\n                        })}\n                    </select>\n                    <span />\n                </div>\n                <div className=\"styled-input styled-input-select\">\n                    <label>Furnished? *</label>\n                    <select name=\"furnished\" required autoComplete=\"on\" ref=\"furnished\">\n                        <option value=\"true\">Yes</option>\n                        <option value=\"false\">No</option>\n                    </select>\n                    <span />\n                </div>\n                <div className=\"styled-input underline\">\n                    <input type=\"number\" name=\"baths\" id=\"baths\" required ref=\"baths\"/>\n                    <label>Number of bathrooms</label>\n                    <span />\n                </div>\n                <div className=\"styled-input underline\">\n                    <input type=\"number\" name=\"numBedRoomCount\" id=\"numBedRoomCount\" required ref=\"numBedRoomCount\" onChange={this.updateNumBedRoomCount.bind(this)} value={self.state.numBedRoomCount}/>\n                    <label>Number of bedrooms</label>\n                    <span />\n                </div>\n                { self.state.numBedRoomCountArr ? (\n                    <div>\n                        <div className=\"styled-full-width\">\n                            <label className=\"sep-label\">Ensuite? </label>\n                            {this.state.numBedRoomCountArr.map(function (arr,k) {\n                                return (\n                                    <div key={k} className=\"styled-input-select styled-input-checkbox max-20\">\n                                        <div className=\"checkbox disabled\">\n                                            <label><input type=\"checkbox\"\n                                                          name={\"bedrooms.\"+arr.index+\".ensuite\"}/>Bedroom {arr.index} Ensuite?</label>\n                                        </div>\n                                        <label>Bed Type</label>\n                                        <select required=\"\" autoComplete=\"\" name={\"bedrooms.\"+arr.index+\".bedType\"}>\n                                            <option value=\"single\">Single</option>\n                                            <option value=\"double\">Double</option>\n                                            <option value=\"twin\">Twin</option>\n                                        </select>\n                                        <span></span>\n                                    </div>\n                                )\n                            })}\n\n\n                        </div>\n                        <div className=\"w-100\"></div>\n                    </div>\n                ) : \"\"\n                }\n\n                <div className=\"styled-full-width\">\n                    {self.state.addPropertyFormSaving ? (\n                            <button type=\"button\" className=\"btns transparent-btn\">Saving</button>\n                        ) : (\n                        <button type=\"submit\" className=\"btns blue-btn addPropertyFormSaveBtn\">Save</button>\n                        )\n                    }\n                    <button type=\"button\" className=\"btns transparent-btn addPropertyFormCancelBtn mar-left-10\">Cancel</button>\n                </div>\n\n\n                <div className=\"w-100\" />\n            </div>\n        </form>\n    )}\n}\nAdvertiseWithUsFormT = withTracker(() => {\n    var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n    var allareas = [];\n    var allcounties = [];\n    var countySelected = 'Dublin';\n\n    if( Meteor.isClient )if(Session.get('countySelected'))countySelected = Session.get('countySelected')\n\n    for(var i=0;i< staticCounties.length;i++){\n        if(!staticCounties[i])continue;\n        allcounties.push({label: staticCounties[i], value: staticCounties[i] })\n    }\n    var distinctEntries = _.uniq(Collections.Areas.find({}, {//County:countySelected ; Dynamically load areas based on the subscription.\n        sort: {Area: 1}, fields: {Area: true}\n    }).fetch().map(function(x) {\n        return x.Area;\n    }), true);\n    allareas = []\n    for(var i=0;i< distinctEntries.length;i++){\n        if(!distinctEntries[i])continue;\n        allareas.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n    }\n\n    var Config = Collections.Config.find().fetch();Config = Config[0];\n    var propertyTypes = []\n    if(Config)\n        for(var i=0;i< Config.propertyType.length;i++){\n            propertyTypes.push({label: titleCase(Config.propertyType[i].name), value: Config.propertyType[i].value})\n        }\n\n    const AreasSub = Meteor.subscribe('Areas','','',countySelected,'','',function(){\n        if( ConfigSub.ready()  )Session.set('subscriptionsReady',true);\n    });\n    const ConfigSub = Meteor.subscribe('Config',function(){\n        if(AreasSub.ready() )Session.set('subscriptionsReady',true);\n    });\n    if(Meteor.isClient)Session.get('subscriptionsReady');\n    // Meteor.subscribe('Areas');\n    // Meteor.subscribe('Config');\n    Meteor.subscribe('userData')\n    return {\n        user: Meteor.user(),\n        counties: allcounties,\n        countySelected: countySelected,\n        areas: allareas,\n        propertyTypes: propertyTypes,\n    }\n})(AdvertiseWithUsForm);\n"]},"sourceType":"module","hash":"f45afe615d7b7d6a573ef7244ff02a7c6d9b8945"}
