{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/momen/projects/spotmycrib-master/imports/ui/layout/header.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/ui/layout/header.js","filename":"/home/momen/projects/spotmycrib-master/imports/ui/layout/header.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/home/momen/projects/spotmycrib-master","root":"/home/momen/projects/spotmycrib-master","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.13.10","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/momen/projects/spotmycrib-master/imports/ui/layout/header.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/layout/header.js"}},"code":"var Template;\nmodule.link(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 0);\nmodule.link(\"./header.html\");\nTemplate.headerExtended.onRendered(function () {\n  $.getScript(cdnPath('/js/bootstrap.js'), function () {// console.log(\"Bootstrap loaded\")\n  }); // $.getScript(cdnPath('//static.filestackapi.com/filestack-js/1.x.x/filestack.min.js'), function(){\n  //     console.log(\"Filestack loaded\")\n  // });\n\n  $.getScript('plugins/fancybox/js/jquery.fancybox.js', function () {\n    // script should be loaded and do something with it.\n    $('.fancybox').fancybox({\n      scrolling: 'no',\n      helpers: {\n        overlay: {\n          locked: true\n        }\n      }\n    });\n  });\n  setTimeout(delayedFunctions, 1500);\n});\nisMobileMenuEventAttached = false;\n\nfunction delayedFunctions() {\n  // $('.xs-menu-icon').click(function(){\n  //     $('.xs-menu').addClass('slide-right');\n  // });\n  // $('.xs-menu-close-icon, .xs-menu a').click(function(){\n  //     $('.xs-menu').removeClass('slide-right');\n  // });\n  // if(!isMobileMenuEventAttached) {\n  $(document).unbind('click').bind('click', function (e) {\n    if (!$('.xs-menu').hasClass('slide-right')) {\n      //Its not open\n      if ($(e.target).closest(\".xs-menu-icon-master\").length > 0) {\n        if (FlowRouter.current().route.name == 'home') $('.carousel-indicators').addClass('carousel-indicatorsLowZindex');\n        $('.xs-menu').addClass('slide-right');\n        return true;\n      } else return true;\n    } else {\n      //Its open\n      if ($(e.target).closest(\".xs-menu-close-icon .xs-close, .xs-menu a\").length > 0 || $(e.target).closest(\".slide-right\").length < 1) {\n        $('.xs-menu').removeClass('slide-right');\n        if (FlowRouter.current().route.name == 'home') setTimeout(function () {\n          if (FlowRouter.current().route.name == 'home') $('.carousel-indicators').removeClass('carousel-indicatorsLowZindex');\n        }, 250);\n        return true;\n      }\n    }\n  }); // isMobileMenuEventAttached = true;\n  // }\n}\n\nTemplate.headerExtended.onCreated(function () {\n  Session.set('showLoginDialog', false);\n  Session.set('showForgotForm', false);\n  Session.set('showLoginDialog', false);\n  Session.set('showLoginSignupFancyBoxDialog', false);\n  Session.set('showAddPropertyHeaderTemplate', false);\n  Session.set('showAddPropertyHeaderFancyBoxDialog', false);\n  if (!Session.get(\"showErrorDlg\")) Session.set(\"showErrorDlg\", []);\n});\nTemplate.headerExtended.helpers({\n  loginFlowCompleteManager: function () {\n    if (Session.get('loginFlowComplete')) {\n      setTimeout(function () {\n        Session.set('loginFlowComplete', undefined);\n      }, 1000);\n    }\n  },\n  errorModel: function () {\n    var tmp = Session.get(\"showErrorDlg\");\n    if (!tmp) tmp = [];\n    if (tmp) if (tmp.length) {\n      var timeoutVal = 0;\n      if (!$.fancybox) timeoutVal = 3000;\n      setTimeout(function () {\n        $.fancybox({\n          'padding': 0,\n          'href': '#errorModel',\n          // afterShow:function(template){\n          //     setTimeout(function () {\n          //         $.fancybox.close();\n          //     },3000)\n          // },\n          afterClose: function () {\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            tmp.shift();\n            Session.set(\"showErrorDlg\", tmp);\n          }\n        });\n      }, timeoutVal);\n    }\n    return Session.get(\"showErrorDlg\");\n  },\n  showAddPropertyHeaderTemplate: function () {\n    if (Session.get('showAddPropertyHeaderFancyBoxDialog')) {\n      showAddPropertyHeaderPopup();\n    } else {\n      if ($) if ($.fancybox) $.fancybox.close();\n    }\n\n    return Session.get('showAddPropertyHeaderTemplate');\n  },\n  showLoginDialog: function () {\n    //Reason to create this method is for the lazyloading of signIn and signUp templates\n    if (Session.get('showLoginSignupFancyBoxDialog')) {\n      showLoginPopup();\n    } else {\n      if ($) if ($.fancybox) $.fancybox.close();\n    }\n\n    return Session.get('showLoginDialog');\n  },\n  isAgentRole: function () {\n    var user = Meteor.user();\n    if (!user) return false;\n\n    if (user.profile.role == 'agent') {\n      return true;\n    }\n\n    return false;\n  },\n  showCookieConsent: function () {\n    return !parseInt(readCookie('cookieConsent')); // var userConfig = Session.get('userConfig');\n    // if(!userConfig) return false;\n    // return userConfig.cookieConsent;\n  }\n});\nTemplate.headerExtended.events({\n  \"click .showLoginDialog\": function (event, template) {\n    showLoginDialog();\n  },\n  \"click .showSignupDialog\": function (event, template) {\n    showSignupDialog();\n  },\n  \"click .logoutBtn\": function () {\n    Meteor.logout(function (err) {\n      if (err) {\n        throw new Meteor.Error(\"Logout failed\");\n      }\n    });\n  },\n  \"click .addPropertyHeaderBtn\": function () {\n    FlowRouter.go('advertisewithus');\n    console.log(\"added add property form\"); // Session.set('showAddPropertyHeaderTemplate',true)\n    //        Session.set('showAddPropertyHeaderFancyBoxDialog',true)\n  },\n  \"click .profileBtn\": function () {\n    FlowRouter.go('account/profile');\n  },\n  \"click .cookieConsentBtn\": function () {\n    createCookie('cookieConsent', 1, 365);\n    $('.cookieConsentArea').remove(); // var userConfig = Session.get('userConfig');\n    //\n    // if(!userConfig){\n    //     Session.set('userConfig',{cookieConsent:1})\n    // }else if(!userConfig.cookieConsent){\n    //     Session.set('userConfig',{cookieConsent:1})\n    // }\n  }\n});\n\nfunction showLoginDialog() {\n  Session.set('showForgotForm', false);\n  Session.set('showSignupForm', false);\n  Session.set('showLoginSignupFancyBoxDialog', true);\n  Session.set('showLoginDialog', true);\n}\n\nfunction showSignupDialog() {\n  Session.set('showForgotForm', false);\n  Session.set('showSignupForm', true);\n  Session.set('showLoginSignupFancyBoxDialog', true);\n  Session.set('showLoginDialog', true);\n}\n\nfunction showLoginPopup() {\n  $.fancybox({\n    'padding': 0,\n    'href': '#signin-div',\n    afterClose: function (template) {\n      console.log(template); //template.showLoginDialog.set(false);\n\n      Session.set('isLandLordMode', false);\n      Session.set('showLoginDialog', false);\n      Session.set('showLoginSignupFancyBoxDialog', false);\n    }\n  });\n}\n\nfunction showAddPropertyHeaderPopup() {\n  $.fancybox({\n    'padding': 0,\n    'href': '#addPropertyHeader-div',\n    afterClose: function (template) {\n      //console.log(template);\n      Session.set('showAddPropertyHeaderTemplate', false);\n      Session.set('showAddPropertyHeaderFancyBoxDialog', false);\n    }\n  });\n}\n\nfunction createCookie(name, value, days) {\n  var expires = \"\";\n\n  if (days) {\n    var date = new Date();\n    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n    expires = \"; expires=\" + date.toUTCString();\n  }\n\n  document.cookie = name + \"=\" + value + expires + \"; path=/\";\n}\n\nfunction readCookie(name) {\n  var nameEQ = name + \"=\";\n  var ca = document.cookie.split(';');\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) == ' ') {\n      c = c.substring(1, c.length);\n    }\n\n    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n  }\n\n  return null;\n}\n\nfunction eraseCookie(name) {\n  createCookie(name, \"\", -1);\n}","map":{"version":3,"sources":["imports/ui/layout/header.js"],"names":["Template","module","link","v","headerExtended","onRendered","$","getScript","cdnPath","fancybox","scrolling","helpers","overlay","locked","setTimeout","delayedFunctions","isMobileMenuEventAttached","document","unbind","bind","e","hasClass","target","closest","length","FlowRouter","current","route","name","addClass","removeClass","onCreated","Session","set","get","loginFlowCompleteManager","undefined","errorModel","tmp","timeoutVal","afterClose","shift","showAddPropertyHeaderTemplate","showAddPropertyHeaderPopup","close","showLoginDialog","showLoginPopup","isAgentRole","user","Meteor","profile","role","showCookieConsent","parseInt","readCookie","events","event","template","showSignupDialog","logout","err","Error","go","console","log","createCookie","remove","value","days","expires","date","Date","setTime","getTime","toUTCString","cookie","nameEQ","ca","split","i","c","charAt","substring","indexOf","eraseCookie"],"mappings":"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","sourcesContent":["/**\n * Created by srikanth681 on 18/02/16.\n */\nimport {Template} from \"meteor/templating\";\nimport \"./header.html\";\n\n\nTemplate.headerExtended.onRendered(function(){\n\n    $.getScript(cdnPath('/js/bootstrap.js'), function(){\n        // console.log(\"Bootstrap loaded\")\n    });\n    // $.getScript(cdnPath('//static.filestackapi.com/filestack-js/1.x.x/filestack.min.js'), function(){\n    //     console.log(\"Filestack loaded\")\n    // });\n\n    $.getScript('plugins/fancybox/js/jquery.fancybox.js', function(){\n        // script should be loaded and do something with it.\n        $('.fancybox').fancybox({\n            scrolling:'no',\n            helpers: {\n                overlay: {\n                    locked: true\n                }\n            }\n        })\n    });\n    setTimeout(delayedFunctions,1500)\n})\nisMobileMenuEventAttached = false;\nfunction delayedFunctions() {\n    // $('.xs-menu-icon').click(function(){\n    //     $('.xs-menu').addClass('slide-right');\n    // });\n    // $('.xs-menu-close-icon, .xs-menu a').click(function(){\n    //     $('.xs-menu').removeClass('slide-right');\n    // });\n\n    // if(!isMobileMenuEventAttached) {\n        $(document).unbind('click').bind('click',function (e) {\n            if (!$('.xs-menu').hasClass('slide-right')) {//Its not open\n                if ($(e.target).closest(\".xs-menu-icon-master\").length > 0) {\n                    if(FlowRouter.current().route.name=='home')\n                        $('.carousel-indicators').addClass('carousel-indicatorsLowZindex');\n                    $('.xs-menu').addClass('slide-right');\n                    return true;\n                } else return true\n            } else {//Its open\n                if ($(e.target).closest(\".xs-menu-close-icon .xs-close, .xs-menu a\").length > 0 || $(e.target).closest(\".slide-right\").length < 1) {\n                    $('.xs-menu').removeClass('slide-right')\n                    if(FlowRouter.current().route.name=='home')\n                        setTimeout(function(){\n                            if(FlowRouter.current().route.name=='home') $('.carousel-indicators').removeClass('carousel-indicatorsLowZindex');\n                        },250);\n                    return true;\n                }\n            }\n        });\n        // isMobileMenuEventAttached = true;\n    // }\n\n}\nTemplate.headerExtended.onCreated(function(){\n    Session.set('showLoginDialog',false)\n    Session.set('showForgotForm',false)\n    Session.set('showLoginDialog',false)\n    Session.set('showLoginSignupFancyBoxDialog',false)\n    Session.set('showAddPropertyHeaderTemplate',false)\n    Session.set('showAddPropertyHeaderFancyBoxDialog',false)\n    if( !Session.get(\"showErrorDlg\") ) Session.set(\"showErrorDlg\",[]);\n})\nTemplate.headerExtended.helpers({\n    loginFlowCompleteManager:function(){\n        if(Session.get('loginFlowComplete')){\n            setTimeout(function(){\n                Session.set('loginFlowComplete',undefined);\n            },1000)\n        }\n    },\n    errorModel: function(){\n        var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n        if(tmp)\n            if(tmp.length){\n                var timeoutVal = 0;\n                if(!$.fancybox) timeoutVal = 3000;\n                setTimeout(function () {\n                    $.fancybox({\n                        'padding': 0,\n                        'href': '#errorModel',\n                        // afterShow:function(template){\n                        //     setTimeout(function () {\n                        //         $.fancybox.close();\n                        //     },3000)\n                        // },\n                        afterClose:function(){\n                            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                            tmp.shift();\n                            Session.set(\"showErrorDlg\",tmp)\n                        }\n                    })\n                },timeoutVal)\n\n            }\n        return Session.get(\"showErrorDlg\");\n    },\n    showAddPropertyHeaderTemplate: function(){\n\n        if(Session.get('showAddPropertyHeaderFancyBoxDialog') ){\n            showAddPropertyHeaderPopup()\n        }else{\n            if($)\n                if($.fancybox)\n                    $.fancybox.close();\n        }\n\n        return Session.get('showAddPropertyHeaderTemplate');\n    },\n    showLoginDialog: function(){//Reason to create this method is for the lazyloading of signIn and signUp templates\n\n        if(Session.get('showLoginSignupFancyBoxDialog') ){\n            showLoginPopup()\n        }else{\n            if($)\n                if($.fancybox)\n                    $.fancybox.close();\n        }\n\n        return Session.get('showLoginDialog');\n    },\n    isAgentRole:function () {\n        var user = Meteor.user();\n        if(!user)return false;\n        if( user.profile.role == 'agent'){return true;}\n        return false;\n    },\n    showCookieConsent: function(){\n        return !parseInt(readCookie('cookieConsent'));\n        // var userConfig = Session.get('userConfig');\n        // if(!userConfig) return false;\n        // return userConfig.cookieConsent;\n    }\n})\nTemplate.headerExtended.events({\n    \"click .showLoginDialog\": function (event, template) {\n        showLoginDialog();\n    },\n    \"click .showSignupDialog\": function (event, template) {\n        showSignupDialog();\n    },\n    \"click .logoutBtn\":function () {\n        Meteor.logout(function(err){\n            if (err) {\n                throw new Meteor.Error(\"Logout failed\");\n            }\n        })\n    },\n    \"click .addPropertyHeaderBtn\":function(){\n        FlowRouter.go('advertisewithus')\n        console.log(\"added add property form\");\n        // Session.set('showAddPropertyHeaderTemplate',true)\n        //        Session.set('showAddPropertyHeaderFancyBoxDialog',true)\n    },\n    \"click .profileBtn\":function () {\n        FlowRouter.go('account/profile');\n    },\n    \"click .cookieConsentBtn\":function () {\n        createCookie('cookieConsent',1,365);\n        $('.cookieConsentArea').remove();\n        // var userConfig = Session.get('userConfig');\n        //\n        // if(!userConfig){\n        //     Session.set('userConfig',{cookieConsent:1})\n        // }else if(!userConfig.cookieConsent){\n        //     Session.set('userConfig',{cookieConsent:1})\n        // }\n    }\n})\n\nfunction showLoginDialog(){\n    Session.set('showForgotForm',false)\n    Session.set('showSignupForm',false)\n    Session.set('showLoginSignupFancyBoxDialog',true)\n    Session.set('showLoginDialog',true)\n}\nfunction showSignupDialog(){\n    Session.set('showForgotForm',false)\n    Session.set('showSignupForm',true)\n    Session.set('showLoginSignupFancyBoxDialog',true)\n    Session.set('showLoginDialog',true)\n}\nfunction showLoginPopup(){\n    $.fancybox({\n        'padding': 0,\n        'href': '#signin-div',\n\n        afterClose:function(template){\n            console.log(template);\n            //template.showLoginDialog.set(false);\n            Session.set('isLandLordMode',false)\n            Session.set('showLoginDialog',false)\n            Session.set('showLoginSignupFancyBoxDialog',false)\n\n        }\n    })\n}\nfunction showAddPropertyHeaderPopup(){\n    $.fancybox({\n        'padding': 0,\n        'href': '#addPropertyHeader-div',\n\n        afterClose:function(template){\n            //console.log(template);\n            Session.set('showAddPropertyHeaderTemplate',false)\n            Session.set('showAddPropertyHeaderFancyBoxDialog',false)\n\n        }\n    })\n}\nfunction createCookie(name,value,days) {\n    var expires = \"\";\n    if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + (days*24*60*60*1000));\n        expires = \"; expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + value + expires + \"; path=/\";\n}\nfunction readCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(';');\n    for(var i=0;i < ca.length;i++) {\n        var c = ca[i];\n        while (c.charAt(0)==' ') c = c.substring(1,c.length);\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\n    }\n    return null;\n}\nfunction eraseCookie(name) {\n    createCookie(name,\"\",-1);\n}\n"]},"sourceType":"module","hash":"2737b3929186a49109f9dfc6fe4148744c8b2c57"}
