[{"type":"js","data":"/* Imports for global scope */\n\nMongoInternals = Package.mongo.MongoInternals;\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nECMAScript = Package.ecmascript.ECMAScript;\nmoment = Package['momentjs:moment'].moment;\nServiceConfiguration = Package['service-configuration'].ServiceConfiguration;\nSecurity = Package['ongoworks:security'].Security;\nHammer = Package['hammer:hammer'].Hammer;\nKnox = Package['lepozepo:s3'].Knox;\nAWS = Package['lepozepo:s3'].AWS;\nEmail = Package.email.Email;\nEmailInternals = Package.email.EmailInternals;\nTemplate = Package['meteorhacks:ssr'].Template;\nSSR = Package['meteorhacks:ssr'].SSR;\nDocHead = Package['kadira:dochead'].DocHead;\nCollectionHooks = Package['matb33:collection-hooks'].CollectionHooks;\nsitemaps = Package['gadicohen:sitemaps'].sitemaps;\nCounts = Package['tmeasday:publish-counts'].Counts;\npublishCount = Package['tmeasday:publish-counts'].publishCount;\nMeteorCamera = Package['perak:camera'].MeteorCamera;\nBlazeLayout = Package['kadira:blaze-layout'].BlazeLayout;\nCDN = Package['nitrolabs:cdn'].CDN;\nFlowRouter = Package['jns:flow-router-ssr'].FlowRouter;\nSyncedCron = Package['littledata:synced-cron'].SyncedCron;\nanalytics = Package['okgrow:analytics'].analytics;\nKadira = Package['mdg:meteor-apm-agent'].Kadira;\n_ = Package.underscore._;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\nWebAppInternals = Package.webapp.WebAppInternals;\nmain = Package.webapp.main;\nDDP = Package['ddp-client'].DDP;\nDDPServer = Package['ddp-server'].DDPServer;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nmeteorInstall = Package.modules.meteorInstall;\nPromise = Package.promise.Promise;\nAccounts = Package['accounts-base'].Accounts;\nFacebook = Package['facebook-oauth'].Facebook;\nTwitter = Package['twitter-oauth'].Twitter;\nGoogle = Package['google-oauth'].Google;\nAutoupdate = Package.autoupdate.Autoupdate;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"lib\":{\"routing.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// lib/routing.js                                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 1);\nlet render;\nmodule.link(\"react-dom\", {\n  render(v) {\n    render = v;\n  }\n\n}, 2);\nlet mount;\nmodule.link(\"react-mounter\", {\n  mount(v) {\n    mount = v;\n  }\n\n}, 3);\nif (Meteor.isClient) Session.set('subscriptionsReady', false); // Search 1000s of houses, apartments & properties for sale and to rent from all leading estate agents\n//SpotMyCrib helps you find your dream house in the easiest way possible. You get to set your rent when you apply for the house, apartment or property online with leading estate agents/landlords in Ireland. Experience the safest, transparent and innovative rental process in Ireland.\n\ngeneralDesc = \"Find your dream house in the easiest way possible. Set your rent when you apply for the house, apartment or property online with leading estate agents/landlords in Ireland. Experience the safest, transparent and innovative rental process in Ireland. SpotMyCrib.\";\nFlowRouter.route('/', {\n  name: \"home\",\n\n  action() {\n    let Home;\n    module.link(\"../imports/reactui/pages/Home.jsx\", {\n      default(v) {\n        Home = v;\n      }\n\n    }, 4);\n    if (Meteor.isClient) BlazeLayout.reset();\n    clearMeta();\n    DocHead.setTitle('SpotMyCrib - Safe and easy rentals');\n    DocHead.addMeta({\n      name: \"description\",\n      content: generalDesc\n    });\n    mount(Home, {\n      content: 'test'\n    });\n  }\n\n});\nFlowRouter.route('/rent/:slug/:key', {\n  name: 'rent',\n\n  action(params, queryParams) {\n    let LettingDetail;\n    module.link(\"../imports/reactui/pages/LettingDetail.jsx\", {\n      default(v) {\n        LettingDetail = v;\n      }\n\n    }, 5);\n    if (Meteor.isClient) BlazeLayout.reset();\n    mount(LettingDetail);\n  }\n\n});\nFlowRouter.route('/blog/:pageno?', {\n  name: 'bloghome',\n\n  action(params, queryParams) {\n    let BlogHome;\n    module.link(\"../imports/reactui/pages/BlogHome.jsx\", {\n      default(v) {\n        BlogHome = v;\n      }\n\n    }, 6);\n    if (Meteor.isClient) BlazeLayout.reset();\n    clearMeta();\n    DocHead.setTitle('Blog - SpotMyCrib - Property renting tips, management and much more');\n    DocHead.addMeta({\n      name: \"description\",\n      content: \"Browse through the latest property news, renting tips, management and much more.\"\n    });\n    mount(BlogHome);\n  }\n\n});\nFlowRouter.route('/article/:slug', {\n  name: 'blogdetail',\n\n  action(params, queryParams) {\n    let BlogDetail;\n    module.link(\"../imports/reactui/pages/BlogDetail.jsx\", {\n      default(v) {\n        BlogDetail = v;\n      }\n\n    }, 7);\n    if (Meteor.isClient) BlazeLayout.reset();\n    mount(BlogDetail);\n  }\n\n});\nFlowRouter.route('/letting/:key', {\n  name: 'letting',\n\n  action(params, queryParams) {\n    let LettingDetail;\n    module.link(\"../imports/reactui/pages/LettingDetail.jsx\", {\n      default(v) {\n        LettingDetail = v;\n      }\n\n    }, 8);\n    if (Meteor.isClient) BlazeLayout.reset();\n    mount(LettingDetail);\n  }\n\n});\nFlowRouter.route('/advertisewithus/:pageno?', {\n  name: \"advertisewithus\",\n\n  action(params, queryParams) {\n    let AdvertiseWithUs;\n    module.link(\"../imports/reactui/pages/AdvertiseWithUs.jsx\", {\n      default(v) {\n        AdvertiseWithUs = v;\n      }\n\n    }, 9);\n    var curStep = parseInt(params.pageno);\n    if (!curStep) curStep = 1;\n    clearMeta();\n    var title = \"Advertise with us\";\n    if (curStep == 2) title += ' (step 2 of 3)';\n    if (curStep == 3) title += ' (step 3 of 3)';\n    DocHead.setTitle(title + ' | SpotMyCrib');\n    var description = 'List your property to rent in SpotMyCrib. Let thousands of verified tenants apply for your letting. Choose if you are a landlord, agent or the current tenant looking for a replacement so you can move.';\n    DocHead.addMeta({\n      name: \"description\",\n      content: description\n    });\n    let curStepComponent = 'AwsStep1';\n\n    switch (curStep) {\n      case 1:\n        //advertiseWithUsFormDelayedRan1st = false;\n        curStepComponent = 'AwsStep1';\n        break;\n\n      case 2:\n        curStepComponent = 'AwsStep2';\n        break;\n\n      case 3:\n        curStepComponent = 'AwsStep3';\n        break;\n    }\n\n    if (Meteor.isClient) BlazeLayout.reset();\n    mount(AdvertiseWithUs, {\n      curStepComponent: curStepComponent\n    });\n  }\n\n});\nFlowRouter.route('/b/:slug/:pageno?', {\n  name: \"b\",\n\n  action(params, queryParams) {\n    let HousesForrent;\n    module.link(\"../imports/reactui/pages/HousesForrent.jsx\", {\n      default(v) {\n        HousesForrent = v;\n      }\n\n    }, 10);\n    if (Meteor.isClient) BlazeLayout.reset();\n\n    if (!params.slug || params.slug.indexOf('-in-') == -1) {\n      var prevRoute = {\n        name: 'home',\n        args: {\n          scrollTo: 0\n        }\n      };\n      if (Meteor.isClient) Session.set('prevRoute', prevRoute);\n      FlowRouter.go('pagenotfound');\n      return;\n    }\n\n    mount(HousesForrent);\n  }\n\n});\nFlowRouter.route('/joinnow', {\n  name: 'joinnow',\n\n  action() {\n    if (Meteor.isServer) return;\n\n    if (Meteor.isClient) {\n      module.link(\"../imports/ui/layout/layout.js\");\n      clearMeta();\n      DocHead.setTitle('Join Now | SpotMyCrib');\n      var description = 'Login to your account or create an account in SpotMyCrib to apply for a letting, update your references and social profiles.';\n      DocHead.addMeta({\n        name: \"description\",\n        content: description\n      });\n      mount(() => /*#__PURE__*/React.createElement(\"span\", null));\n      BlazeLayout.render('reactLayout', {\n        templateName: 'loginPageHorizontal'\n      });\n    } // BlazeLayout.render('loading');\n\n  }\n\n});\nFlowRouter.route('/joinnow-landlord', {\n  name: 'joinnowlandlord',\n\n  action() {\n    if (Meteor.isServer) return;\n\n    if (Meteor.isClient) {\n      module.link(\"../imports/ui/layout/layout.js\");\n      clearMeta();\n      DocHead.setTitle('Landlord Join Now | SpotMyCrib');\n      var description = 'Login to your account or create an account in SpotMyCrib to manage your lettings and advertise your property.';\n      DocHead.addMeta({\n        name: \"description\",\n        content: description\n      });\n      mount(() => /*#__PURE__*/React.createElement(\"span\", null));\n      BlazeLayout.render('reactLayout', {\n        templateName: 'loginPageHorizontal',\n        dataContext: {\n          isLandlordMode: true\n        }\n      });\n    } // BlazeLayout.render('loading');\n\n  }\n\n});\nvar accountRoutes = FlowRouter.group({\n  prefix: '/account',\n  name: 'account',\n  triggersEnter: [function (context, redirect) {// console.log('running account group triggers');\n  }]\n});\naccountRoutes.route('/myproperies/:pageno?', {\n  name: 'account/myProperties',\n\n  action() {\n    if (Meteor.isServer) return;\n\n    if (Meteor.isClient) {\n      module.link(\"../imports/ui/layout/layout.js\");\n      module.link(\"../imports/ui/templates/myProperties.js\");\n      clearMeta();\n      DocHead.setTitle('My properties | SpotMyCrib Admin');\n      DocHead.addMeta({\n        name: \"description\",\n        content: \"View list of your properties, activate them, print their keys, view their applications, etc.\"\n      });\n      mount(() => /*#__PURE__*/React.createElement(\"span\", null));\n      BlazeLayout.render('reactLayout', {\n        templateName: 'myProperties'\n      });\n    }\n  }\n\n});\naccountRoutes.route('/editproperty/:id', {\n  name: 'account/editproperty',\n\n  action() {\n    if (Meteor.isServer) return;\n\n    if (Meteor.isClient) {\n      module.link(\"../imports/ui/layout/layout.js\");\n      module.link(\"../imports/ui/templates/editProperty.js\");\n      mount(() => /*#__PURE__*/React.createElement(\"span\", null));\n      BlazeLayout.render('reactLayout', {\n        templateName: 'editProperty'\n      });\n    }\n  }\n\n});\naccountRoutes.route('/propertyapplications/:id/:pageno?', {\n  name: 'account/propertyApplications',\n\n  action() {\n    if (Meteor.isServer) return;\n\n    if (Meteor.isClient) {\n      module.link(\"../imports/ui/layout/layout.js\");\n      module.link(\"../imports/ui/templates/propertyApplications.js\");\n      mount(() => /*#__PURE__*/React.createElement(\"span\", null));\n      BlazeLayout.render('reactLayout', {\n        templateName: 'propertyApplications'\n      });\n    }\n  }\n\n});\naccountRoutes.route('/manageproperty/:id/:pageno?', {\n  name: 'account/propertyManage',\n\n  action() {\n    if (Meteor.isServer) return;\n\n    if (Meteor.isClient) {\n      module.link(\"../imports/ui/layout/layout.js\");\n      module.link(\"../imports/ui/templates/propertyManage.js\");\n      mount(() => /*#__PURE__*/React.createElement(\"span\", null));\n      BlazeLayout.render('reactLayout', {\n        templateName: 'propertyManage'\n      });\n    }\n  }\n\n});\naccountRoutes.route('/profile', {\n  name: 'account/profile',\n\n  action() {\n    if (Meteor.isServer) return;\n\n    if (Meteor.isClient) {\n      module.link(\"../imports/ui/layout/layout.js\");\n      module.link(\"../imports/ui/templates/profile.js\");\n      mount(() => /*#__PURE__*/React.createElement(\"span\", null));\n      BlazeLayout.render('reactLayout', {\n        templateName: 'profile'\n      });\n    }\n  }\n\n});\nFlowRouter.route('/lettingprintview/:key', {\n  name: 'lettingprintview',\n\n  action() {\n    if (Meteor.isServer) return;\n\n    if (Meteor.isClient) {\n      module.link(\"../imports/ui/layout/layout.js\");\n      module.link(\"../imports/ui/templates/lettingprintview.js\");\n      mount(() => /*#__PURE__*/React.createElement(\"span\", null));\n      BlazeLayout.render('reactPlainLayout', {\n        templateName: 'lettingprintview'\n      });\n    }\n  }\n\n});\nFlowRouter.route('/tenant/:username', {\n  name: 'tenant',\n\n  action() {\n    if (Meteor.isServer) return;\n\n    if (Meteor.isClient) {\n      module.link(\"../imports/ui/layout/layout.js\");\n      module.link(\"../imports/ui/templates/tenant.js\");\n      mount(() => /*#__PURE__*/React.createElement(\"span\", null));\n      BlazeLayout.render('reactLayout', {\n        templateName: 'tenant'\n      });\n    }\n  }\n\n});\nFlowRouter.route('/tenants/:pageno?', {\n  name: 'tenants',\n\n  action() {\n    if (Meteor.isServer) return;\n\n    if (Meteor.isClient) {\n      module.link(\"../imports/ui/layout/layout.js\");\n      module.link(\"../imports/ui/templates/tenants.js\");\n      DocHead.setTitle('Tenant database | SpotMyCrib');\n      var description = 'View list of interested tenant profiles, their references and social profiles. Invite them to apply for your letting advertisement.';\n      DocHead.addMeta({\n        name: \"description\",\n        content: description\n      });\n      mount(() => /*#__PURE__*/React.createElement(\"span\", null));\n      BlazeLayout.render('reactLayout', {\n        templateName: 'tenants'\n      });\n    }\n  }\n\n});\nFlowRouter.notFound = {\n  triggersEnter: [function (context, redirect) {\n    redirect('/notFound');\n  }],\n  action: function () {\n    console.log('Route not found');\n  }\n};\nFlowRouter.route('/notFound', {\n  name: 'notFound',\n\n  action() {\n    let NotFound;\n    module.link(\"../imports/reactui/layout/NotFound.jsx\", {\n      default(v) {\n        NotFound = v;\n      }\n\n    }, 11);\n    if (Meteor.isClient) BlazeLayout.reset();\n    clearMeta();\n    DocHead.setTitle('Page Not Found | SpotMyCrib');\n    DocHead.addMeta({\n      name: \"description\",\n      content: 'Could not find the page your are looking for, it might be removed. Please try again.'\n    });\n    mount(NotFound);\n  }\n\n});\nFlowRouter.route('/about', {\n  name: 'about',\n\n  action() {\n    let About;\n    module.link(\"../imports/reactui/static/About.jsx\", {\n      default(v) {\n        About = v;\n      }\n\n    }, 12);\n    if (Meteor.isClient) BlazeLayout.reset();\n    setStaticPageMetaTags('about');\n    mount(About);\n  }\n\n});\nFlowRouter.route('/careers', {\n  name: 'careers',\n\n  action() {\n    let Careers;\n    module.link(\"../imports/reactui/static/Careers.jsx\", {\n      default(v) {\n        Careers = v;\n      }\n\n    }, 13);\n    if (Meteor.isClient) BlazeLayout.reset();\n    setStaticPageMetaTags('careers');\n    mount(Careers);\n  }\n\n});\nFlowRouter.route('/contactus', {\n  name: 'contactus',\n\n  action() {\n    let ContactUs;\n    module.link(\"../imports/reactui/static/ContactUs.jsx\", {\n      default(v) {\n        ContactUs = v;\n      }\n\n    }, 14);\n    if (Meteor.isClient) BlazeLayout.reset();\n    setStaticPageMetaTags('contactus');\n    mount(ContactUs);\n  }\n\n});\nFlowRouter.route('/cookiepolicy', {\n  name: 'cookiepolicy',\n\n  action() {\n    let CookiePolicy;\n    module.link(\"../imports/reactui/static/CookiePolicy.jsx\", {\n      default(v) {\n        CookiePolicy = v;\n      }\n\n    }, 15);\n    if (Meteor.isClient) BlazeLayout.reset();\n    setStaticPageMetaTags('cookiepolicy');\n    mount(CookiePolicy);\n  }\n\n});\nFlowRouter.route('/faqs', {\n  name: 'faqs',\n\n  action() {\n    let Faqs;\n    module.link(\"../imports/reactui/static/Faqs.jsx\", {\n      default(v) {\n        Faqs = v;\n      }\n\n    }, 16);\n    if (Meteor.isClient) BlazeLayout.reset();\n    setStaticPageMetaTags('faqs');\n    mount(Faqs);\n  }\n\n});\nFlowRouter.route('/gdpr', {\n  name: 'gdpr',\n\n  action() {\n    let Gdpr;\n    module.link(\"../imports/reactui/static/Gdpr.jsx\", {\n      default(v) {\n        Gdpr = v;\n      }\n\n    }, 17);\n    if (Meteor.isClient) BlazeLayout.reset();\n    setStaticPageMetaTags('gdpr');\n    mount(Gdpr);\n  }\n\n});\nFlowRouter.route('/howitworks', {\n  name: 'howitworks',\n\n  action() {\n    let HowItWorks;\n    module.link(\"../imports/reactui/static/HowItWorks.jsx\", {\n      default(v) {\n        HowItWorks = v;\n      }\n\n    }, 18);\n    if (Meteor.isClient) BlazeLayout.reset();\n    setStaticPageMetaTags('howitworks');\n    mount(HowItWorks);\n  }\n\n});\nFlowRouter.route('/privacy', {\n  name: 'privacy',\n\n  action() {\n    let Privacy;\n    module.link(\"../imports/reactui/static/Privacy.jsx\", {\n      default(v) {\n        Privacy = v;\n      }\n\n    }, 19);\n    if (Meteor.isClient) BlazeLayout.reset();\n    setStaticPageMetaTags('privacy');\n    mount(Privacy);\n  }\n\n});\nFlowRouter.route('/terms', {\n  name: 'terms',\n\n  action() {\n    let Terms;\n    module.link(\"../imports/reactui/static/Terms.jsx\", {\n      default(v) {\n        Terms = v;\n      }\n\n    }, 20);\n    if (Meteor.isClient) BlazeLayout.reset();\n    setStaticPageMetaTags('terms');\n    mount(Terms);\n  }\n\n});\nFlowRouter.route('/estateagent', {\n  name: 'estateagent',\n\n  action() {\n    let EstateAgent;\n    module.link(\"../imports/reactui/static/EstateAgent.jsx\", {\n      default(v) {\n        EstateAgent = v;\n      }\n\n    }, 21);\n    if (Meteor.isClient) BlazeLayout.reset();\n    setStaticPageMetaTags('estateagent');\n    mount(EstateAgent);\n  }\n\n});\ngeneralDesc = \"Find your dream house in the easiest way possible. Set your rent when you apply for the house, apartment or property online with leading estate agents/landlords in Ireland. Experience the safest, transparent and innovative rental process in Ireland. SpotMyCrib.\";\n\nfunction setStaticPageMetaTags(pageName) {\n  var title = '',\n      desc = '';\n\n  switch (pageName) {\n    case 'about':\n      title = 'About SpotMyCrib';\n      desc = \"Know more about SpotMyCrib and what inspires us to build the safest, transparent and innovative rental portal in Ireland. Learn more on how we operate and our values. Experience SpotMyCrib.\";\n      break;\n\n    case 'terms':\n      title = 'Terms of Service | SpotMyCrib';\n      desc = 'Read our terms and conditions and learn more on how we operate and our values.';\n      break;\n\n    case 'faqs':\n      title = 'FAQs | SpotMyCrib';\n      desc = 'Frequently asked questions by tenants(users) and landlords/estate agents.';\n      break;\n\n    case 'privacy':\n      title = 'Privacy policy | SpotMyCrib';\n      desc = 'Find how we keep your data safe and secure. Read our cookie policy and much more on our privacy policy.';\n      break;\n\n    case 'contactus':\n      title = 'Contact Us | SpotMyCrib';\n      desc = 'Find our contact details and work timings here.';\n      break;\n\n    case 'howitworks':\n      title = 'How it works | SpotMyCrib';\n      desc = 'Find your next dream home fast, easy and simple way.';\n      break;\n\n    case 'careers':\n      title = 'Careers | SpotMyCrib';\n      desc = 'We are hiring! Work in the most innovative online real estate company. '; // import '../static/careers.js';\n\n      break;\n\n    case 'estateagent':\n      title = 'Agents/Landlords | SpotMyCrib';\n      desc = 'Learn on why you need next generation high tech automated property managment solution. Learn how SpotMyCrib can ease your life with tenant screening, digital leasing, online rent collection and much more. '; // import '../static/careers.js';\n\n      break;\n\n    case 'gdpr':\n      title = 'Data Protection / EU GDPR | SpotMyCrib';\n      desc = 'An overview of Data Protection and EU GDPR and how we are preparing for it at SpotMyCrib.';\n      break;\n\n    case 'cookiepolicy':\n      title = 'Cookie Policy | SpotMyCrib';\n      desc = 'An overview of our cookie policy and how we use them to provide you with best user experence.';\n      break;\n\n    default:\n  }\n\n  clearMeta();\n  DocHead.setTitle(title);\n  DocHead.addMeta({\n    name: \"description\",\n    content: desc\n  }); ////////////Adding below code only for static\n\n  if (Meteor.isClient) {\n    setTimeout(function () {\n      try {\n        jQuery(\"html,body\").animate({\n          scrollTop: 0\n        }, 250);\n      } catch (e) {\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n      }\n    }, 2000);\n  }\n} // FlowRouter.triggers.enter([function(){\n//\n// }]);\n// FlowRouter.go('account/propertyApplications')\n// tesing my properties from anonomoues tab to see if login works and if pubs work fine,\n//     also if post login , will it automatically update pubs?\n//     use ctrl+m to see the records returned by pubs\n//FlowRouter.current().route.getName()  to FlowRouter.current().route.name\n//Router to FlowRouter\n// 1. all routes conversion\n// 2. new react header and footer used in home page needs to work\n// 3. react ssr work\n// 4. performance tuning for pages that are using ssr\n// 5. category pages\n//\n// FlowRouter.route(\"/\", {\n//   subscriptions: function() {\n//     var selector = {category: {$ne: \"private\"}};\n//     this.register('posts', Meteor.subscribe('posts', selector));\n//   },\n//   action: function() {\n//     ReactLayout.render(BlogLayout, {\n//       content: <PostList />\n//     });\n//   }\n// });\n// if(Meteor.isServer) {\n//     WebApp.connectHandlers.use('/', function(req, res, next) {\n//         if(isValidRoute(req.url))\n//             return next();\n//\n//         res.writeHead(404);\n//         res.end(SSR.render('404'));\n//     });\n//\n//     var pathToRegexp = Meteor.npmRequire('path-to-regexp')\n//\n//     function isValidRoute(requestUrl) {\n//         for(var i = 0; i < FlowRouter._routes.length; i++)\n//             if(pathToRegexp(FlowRouter._routes[i].path).test(requestUrl))\n//                 return true;\n//\n//         return false;\n//     }\n// }\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"imports\":{\"reactui\":{\"layout\":{\"LoginFormViews.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/layout/LoginFormViews.jsx                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  LoginFormSignInView: () => LoginFormSignInView,\n  LoginFormSignUpView: () => LoginFormSignUpView,\n  LoginFormSignUpViewLandlord: () => LoginFormSignUpViewLandlord,\n  LoginFormResetPasswordView: () => LoginFormResetPasswordView\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet withTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  withTracker(v) {\n    withTracker = v;\n  }\n\n}, 2);\nlet LoginFormMessages, SocialLoginButtonsT;\nmodule.link(\"./MainLayoutHeader\", {\n  LoginFormMessages(v) {\n    LoginFormMessages = v;\n  },\n\n  SocialLoginButtonsT(v) {\n    SocialLoginButtonsT = v;\n  }\n\n}, 3);\n\nclass LoginFormSignInView extends Component {\n  constructor(props) {\n    super(props);\n    if (!props.onPage) props.onPage = false;\n    this.state = {\n      isLoading: true,\n      formMessages: {\n        errors: []\n      }\n    }; // this.forgotPwdHandler = this.forgotPwdHandler.bind(this)\n\n    this.signInHandler = this.signInHandler.bind(this); // this.signUpHandler = this.signUpHandler.bind(this)\n  }\n\n  componentDidMount() {\n    $('#signin-div').find('#email').focus();\n    $('.new-focus').click(function () {\n      $('#signin-div').find('#email').focus();\n    });\n    this.setState({\n      isLoading: false\n    });\n  }\n\n  signInHandler(event) {\n    event.preventDefault();\n    let usernameInput = $(\".login-input-email-LoginFormSignInView\");\n    let passwordInput = $(\".login-input-password-LoginFormSignInView\");\n    let username = usernameInput.val().trim();\n    let password = passwordInput.val().trim();\n    let validatedEmail = LoginFormValidation.email(username);\n    let validatedPassword = LoginFormValidation.password(password, {\n      validationLevel: \"exists\"\n    });\n    var errors = [];\n    this.setState({\n      formMessages: {}\n    });\n    this.setState({\n      isLoading: true\n    });\n\n    if (validatedEmail !== true) {\n      errors.push(validatedEmail);\n    }\n\n    if (validatedPassword !== true) {\n      errors.push(validatedPassword);\n    }\n\n    if (errors.length) {\n      this.setState({\n        formMessages: {\n          errors: errors\n        }\n      });\n      this.setState({\n        isLoading: false\n      });\n      return;\n    }\n\n    this.loginCallBack = error => {\n      fbq('track', 'EmailUserLogin' + (error ? \"Failed\" : \"Successful\"));\n      ga('send', 'event', 'General', 'userLoginSignup', 'Email Login ' + (error ? \"Failed\" : \"Successful\"));\n      this.setState({\n        isLoading: false\n      });\n\n      if (error) {\n        console.log(error);\n\n        if (error.reason == 'User has no password set' || error.reason == 'User not found') {\n          this.isSocialAccountCallback = function (err1, result) {\n            if (err1) this.setState({\n              formMessages: {\n                errors: [err1]\n              }\n            });else this.setState({\n              formMessages: {\n                info: [result]\n              }\n            });\n          };\n\n          this.isSocialAccountCallback = this.isSocialAccountCallback.bind(this);\n          Meteor.call('isSocialAccount', username, this.isSocialAccountCallback);\n        } // Show some error messages above the form fields\n\n\n        this.setState({\n          formMessages: {\n            errors: [error]\n          }\n        });\n      } else {\n        var isOnPage = false;\n        if (this.props.onPage) isOnPage = true;\n\n        if (!isOnPage) {\n          $('#signin-div , .fancybox-overlay').hide();\n          Session.set('showLoginDialog', false);\n          Session.set('showSignupDialog', false);\n          Session.set('showLoginSignupFancyBoxDialog', false);\n        }\n\n        Session.set('loginFlowComplete', true);\n        Session.set('loginFlowStart', undefined);\n        delete Session.keys.loginFlowStart;\n        Meteor.call(\"userLoggedIn\");\n      }\n    };\n\n    this.loginCallBack = this.loginCallBack.bind(this);\n    Meteor.loginWithPassword(username, password, this.loginCallBack);\n  } // signUpHandler(){\n  //     Session.set('showForgotForm',false)\n  //     Session.set('showSignupForm',true)\n  //     Session.set('showLoginSignupFancyBoxDialog',true)\n  //     Session.set('showLoginDialog',true)\n  // }\n  // forgotPwdHandler(){\n  //     var isOnPage = false;\n  //     if(this.props.onPage)isOnPage = true;\n  //     if( !isOnPage ){\n  //         Session.set('showForgotForm',true)\n  //         Session.set('showSignupForm',false)\n  //         Session.set('showLoginSignupFancyBoxDialog',true)\n  //         Session.set('showLoginDialog',true)\n  //     }else{\n  //         Session.set('showForgotForm',true)\n  //     }\n  // }\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"refund-div\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Sign In \", this.props.loginFromApplyNowBtn ? \"Required\" : \"\")), this.props.loginFromApplyNowBtn ? /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-text info-msg-text\"\n    }, \"Login is required to apply for this property. Quickly use the options below to Login or Create yourself an account.\") : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-text\",\n      style: {\n        paddingTop: '20px'\n      }\n    }, this.props.onPage ? \"\" : /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SocialLoginButtonsT, {\n      buttonFor: \"login\",\n      usedInDlg: true\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"seperator\",\n      style: {\n        margin: '0 0 30px 0px'\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", null))), /*#__PURE__*/React.createElement(\"h5\", null, \"Enter your email and password below\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signin-form\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-border\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input  \" + (this.state.formMessages.errors ? this.state.formMessages.errors.email ? \"has-error has-feedback\" : \"\" : \"\")\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"email\",\n      type: \"email\",\n      name: \"email\",\n      required: true,\n      htmlFor: \"email-loginFormSignInView\",\n      className: \"login-input-email-LoginFormSignInView\"\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email-loginFormSignInView\"\n    }, \"EMAIL ID\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input underline \" + (this.state.formMessages.errors ? this.state.formMessages.errors.password ? \"has-error has-feedback\" : \"\" : \"\")\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"current-password\",\n      type: \"password\",\n      name: \"password\",\n      className: \"login-input-password-LoginFormSignInView\",\n      required: true,\n      htmlFor: \"password-loginFormSignInView\"\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"password-loginFormSignInView\"\n    }, \"PASSWORD\"), /*#__PURE__*/React.createElement(\"span\", null))), /*#__PURE__*/React.createElement(LoginFormMessages, {\n      messages: this.state.formMessages\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signup-btn\"\n    }, this.state.isLoading ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"transparent-btn btns\"\n    }, \"Loading...\") : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"blue-btn btns\",\n      type: \"submit\",\n      \"data-event-action\": \"submitSignInForm\",\n      onClick: this.signInHandler\n    }, \"SIGN IN\"), /*#__PURE__*/React.createElement(\"h5\", {\n      \"data-event-action\": \"forgotPassword\",\n      onClick: this.props.showForgotFormHandler\n    }, \"Forgot password?\"), this.props.onPage ? \"\" : /*#__PURE__*/React.createElement(\"h6\", null, \"Not registered? \", /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: '#0c68a7'\n      },\n      \"data-event-action\": \"signUp\",\n      onClick: this.props.showSignupFormHandler\n    }, \"Sign Up now\"))))));\n  }\n\n}\n\n;\n\nclass LoginFormSignUpView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      formMessages: {\n        errors: []\n      }\n    };\n    this.forgotPwdHandler = this.forgotPwdHandler.bind(this); // this.signInHandler = this.signInHandler.bind(this)\n\n    this.signUpHandler = this.signUpHandler.bind(this);\n  }\n\n  componentDidMount() {\n    $(\".SignupFormMobileField\").intlTelInput({\n      preferredCountries: [\"ie\", \"gb\", 'in']\n    });\n    $('#signin-div').find('#name').focus();\n    $('.new-focus').click(function () {\n      $('#signin-div').find('#name').focus();\n    });\n    this.setState({\n      isLoading: false\n    });\n  } // signInHandler(){\n  //     Session.set('showForgotForm',false)\n  //     Session.set('showSignupForm',false)\n  //     Session.set('showLoginSignupFancyBoxDialog',true)\n  //     Session.set('showLoginDialog',true)\n  // }\n\n\n  signUpHandler(event) {\n    event.preventDefault(); // var usernameInput = $(\".login-input--username\");\n\n    let emailInput = $(\".login-input-email-LoginFormSignUpView\");\n    let passwordInput = $(\".login-input-password-LoginFormSignUpView\");\n    let fullNameInput = $(\".login-input-fullName-LoginFormSignUpView\");\n    let mobileInput = $(\".login-input-mobile-LoginFormSignUpView\");\n    let email = emailInput.val().trim();\n    let password = passwordInput.val().trim();\n    let fullName = fullNameInput.val().trim();\n    let mobile = mobileInput.val().trim();\n    let validatedEmail = LoginFormValidation.email(email);\n    let validatedFullName = LoginFormValidation.username(fullName);\n    let validatedPassword = LoginFormValidation.password(password, {\n      validationLevel: \"length\"\n    });\n    let validatedMobile = LoginFormValidation.mobile(mobile);\n    var errors = [];\n    this.setState({\n      formMessages: {}\n    });\n    this.setState({\n      isLoading: true\n    });\n\n    if (validatedEmail !== true) {\n      errors.push(validatedEmail);\n    }\n\n    if (validatedFullName !== true) {\n      errors.push(validatedFullName);\n    }\n\n    if (validatedMobile !== true) {\n      errors.push(validatedMobile);\n    }\n\n    if (validatedPassword !== true) {\n      errors.push(validatedPassword);\n    }\n\n    if (errors.length) {\n      this.setState({\n        formMessages: {\n          errors: errors\n        }\n      });\n      this.setState({\n        isLoading: false\n      });\n      return;\n    }\n\n    let newUserData = {\n      // username: username,\n      email: email,\n      password: password,\n      profile: {\n        name: fullName,\n        email: email,\n        mobile: mobile\n      }\n    };\n\n    this.createUserCallback = function (error, result) {\n      fbq('track', 'EmailUserSignup' + (error ? \"Failed\" : \"Successful\"));\n      ga('send', 'event', 'General', 'userLoginSignup', 'Email Signup ' + (error ? \"Failed\" : \"Successful\"));\n      this.setState({\n        isLoading: false\n      });\n\n      if (error) {\n        // Show some error message\n        this.setState({\n          formMessages: {\n            errors: [error]\n          }\n        });\n      } else {\n        var isOnPage = false;\n        if (this.props.onPage) isOnPage = true;\n\n        if (!isOnPage) {\n          $('#signin-div , .fancybox-overlay').hide();\n          Session.set('showLoginDialog', false);\n          Session.set('showSignupDialog', false);\n          Session.set('showLoginSignupFancyBoxDialog', false);\n        }\n\n        Session.set('loginFlowComplete', true);\n        Session.set('loginFlowStart', undefined);\n        delete Session.keys.loginFlowStart;\n      }\n    };\n\n    this.createUserCallback = this.createUserCallback.bind(this);\n    Accounts.createUser(newUserData, this.createUserCallback);\n  }\n\n  forgotPwdHandler() {\n    var isOnPage = false;\n    if (this.props.onPage) isOnPage = true;\n\n    if (!isOnPage) {\n      Session.set('showForgotForm', true);\n      Session.set('showSignupForm', false);\n      Session.set('showLoginSignupFancyBoxDialog', true);\n      Session.set('showLoginDialog', true);\n    } else {\n      Session.set('showForgotForm', true);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"refund-div\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Sign Up \", this.props.loginFromApplyNowBtn ? \"Required\" : \"\")), this.props.loginFromApplyNowBtn ? /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-text info-msg-text\"\n    }, \"Login is required to apply for this property. Quickly use the options below to Login or Create yourself an account.\") : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-text\",\n      style: {\n        paddingTop: '20px'\n      }\n    }, this.props.onPage ? \"\" : /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SocialLoginButtonsT, {\n      buttonFor: \"signup\",\n      usedInDlg: true\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"seperator\",\n      style: {\n        margin: '0 0 30px 0px'\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", null))), /*#__PURE__*/React.createElement(\"h5\", null, \"Enter your details below\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signin-form\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-border\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"name\",\n      className: \"login-input-fullName-LoginFormSignUpView\",\n      type: \"text\",\n      name: \"name\",\n      required: true,\n      htmlFor: \"email-loginFormSignUpView\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email-loginFormSignUpView\"\n    }, \"FULL NAME\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"email\",\n      className: \"login-input-email-LoginFormSignUpView\",\n      type: \"email\",\n      name: \"email\",\n      required: true,\n      htmlFor: \"email-loginFormSignUpView\"\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email-loginFormSignUpView\"\n    }, \"EMAIL ID\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"new-password\",\n      className: \"login-input-password-LoginFormSignUpView\",\n      type: \"password\",\n      name: \"password\",\n      required: true,\n      htmlFor: \"password-loginFormSignUpView\"\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"password-loginFormSignUpView\"\n    }, \"PASSWORD\"), /*#__PURE__*/React.createElement(\"span\", null), this.state.formMessages.errors ? this.state.formMessages.errors.password ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"help-block\"\n    }, this.state.formMessages.errors.password.map(function (p, i) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        key: i\n      }, p.reason);\n    })) : \"\" : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"tel\",\n      className: \"login-input-mobile-LoginFormSignUpView SignupFormMobileField\",\n      type: \"text\",\n      name: \"mobile\",\n      htmlFor: \"mobile-loginFormSignUpView\"\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"mobile-loginFormSignUpView\"\n    }, \"MOBILE\"), /*#__PURE__*/React.createElement(\"span\", null))), /*#__PURE__*/React.createElement(LoginFormMessages, {\n      messages: this.state.formMessages\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signup-btn\"\n    }, this.state.isLoading ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"transparent-btn btns\"\n    }, \"Loading...\") : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"blue-btn btns\",\n      type: \"Submit\",\n      \"data-event-category\": \"accounts\",\n      \"data-event-action\": \"register\",\n      onClick: this.signUpHandler\n    }, \"SIGN UP\"), this.props.onPage ? \"\" : /*#__PURE__*/React.createElement(\"p\", null, \"Already have an account? \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:;\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: '#0c67a6'\n      },\n      \"data-event-category\": \"accounts\",\n      \"data-event-action\": \"signIn\",\n      onClick: this.props.showSignInFormHandler\n    }, \"Sign In\")))))));\n  }\n\n}\n\n;\n\nclass LoginFormSignUpViewLandlord extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      formMessages: {\n        errors: []\n      }\n    };\n    this.forgotPwdHandler = this.forgotPwdHandler.bind(this);\n    this.signInHandler = this.signInHandler.bind(this);\n    this.signUpHandler = this.signUpHandler.bind(this);\n  }\n\n  componentDidMount() {\n    $(\".SignupFormMobileField\").intlTelInput({\n      preferredCountries: [\"ie\", \"gb\", 'in']\n    });\n    $('#signin-div').find('#name').focus();\n    $('.new-focus').click(function () {\n      $('#signin-div').find('#name').focus();\n    });\n    this.setState({\n      isLoading: false\n    });\n  }\n\n  signInHandler() {\n    Session.set('showForgotForm', false);\n    Session.set('showSignupForm', false);\n    Session.set('showLoginSignupFancyBoxDialog', true);\n    Session.set('showLoginDialog', true);\n  }\n\n  signUpHandler(event) {\n    event.preventDefault(); // var usernameInput = $(\".login-input--username\");\n\n    let emailInput = $(\".login-input-email-LoginFormSignUpViewLandlord\");\n    let passwordInput = $(\".login-input-password-LoginFormSignUpViewLandlord\");\n    let fullNameInput = $(\".login-input-fullName-LoginFormSignUpViewLandlord\");\n    let mobileInput = $(\".login-input-mobile-LoginFormSignUpViewLandlord\");\n    let email = emailInput.val().trim();\n    let password = passwordInput.val().trim();\n    let fullName = fullNameInput.val().trim();\n    let mobile = mobileInput.val().trim();\n    let validatedEmail = LoginFormValidation.email(email);\n    let validatedFullName = LoginFormValidation.username(fullName);\n    let validatedPassword = LoginFormValidation.password(password, {\n      validationLevel: \"length\"\n    });\n    let validatedMobile = LoginFormValidation.mobile(mobile);\n    var errors = [];\n    this.setState({\n      formMessages: {}\n    });\n    this.setState({\n      isLoading: true\n    });\n\n    if (validatedEmail !== true) {\n      errors.push(validatedEmail);\n    }\n\n    if (validatedFullName !== true) {\n      errors.push(validatedFullName);\n    }\n\n    if (validatedMobile !== true) {\n      errors.push(validatedMobile);\n    }\n\n    if (validatedPassword !== true) {\n      errors.push(validatedPassword);\n    }\n\n    if (errors.length) {\n      this.setState({\n        formMessages: {\n          errors: errors\n        }\n      });\n      this.setState({\n        isLoading: false\n      });\n      return;\n    }\n\n    let newUserData = {\n      // username: username,\n      email: email,\n      password: password,\n      profile: {\n        name: fullName,\n        email: email,\n        mobile: mobile\n      }\n    };\n\n    this.createUserCallback = function (error, result) {\n      fbq('track', 'EmailLandlordSignup' + (error ? \"Failed\" : \"Successful\"));\n      ga('send', 'event', 'General', 'userLoginSignup', 'Email Landlord Signup ' + (error ? \"Failed\" : \"Successful\"));\n      this.setState({\n        isLoading: false\n      });\n\n      if (error) {\n        // Show some error message\n        this.setState({\n          formMessages: {\n            errors: [error]\n          }\n        });\n      } else {\n        var isOnPage = false;\n        if (this.props.onPage) isOnPage = true;\n\n        if (!isOnPage) {\n          $('#signin-div , .fancybox-overlay').hide();\n          Session.set('showLoginDialog', false);\n          Session.set('showSignupDialog', false);\n          Session.set('showLoginSignupFancyBoxDialog', false);\n        }\n\n        Session.set('loginFlowComplete', true);\n        Session.set('loginFlowStart', undefined);\n        delete Session.keys.loginFlowStart;\n      }\n    };\n\n    this.createUserCallback = this.createUserCallback.bind(this);\n    Accounts.createUser(newUserData, this.createUserCallback);\n  }\n\n  forgotPwdHandler() {\n    var isOnPage = false;\n    if (this.props.onPage) isOnPage = true;\n\n    if (!isOnPage) {\n      Session.set('showForgotForm', true);\n      Session.set('showSignupForm', false);\n      Session.set('showLoginSignupFancyBoxDialog', true);\n      Session.set('showLoginDialog', true);\n    } else {\n      Session.set('showForgotForm', true);\n    }\n  }\n\n  radioHandler() {}\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"landlordSignup-div signup-div\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"refund-div\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Landlord Join Now\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-text\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 rd-details\"\n    }, /*#__PURE__*/React.createElement(\"span\", null, \"I am a\"), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"account-type-label\",\n      htmlFor: \"rd1\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"account-type-radio\",\n      name: \"accountType\",\n      value: \"LANDLORD\",\n      type: \"radio\",\n      defaultChecked: true,\n      onChange: this.radioHandler\n    }), \"Landlord\"), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"account-type-label\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"account-type-radio\",\n      name: \"accountType\",\n      value: \"LANDLORD\",\n      type: \"radio\"\n    }), \"Agent\"), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"account-type-label\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"account-type-radio\",\n      name: \"accountType\",\n      value: \"LANDLORD\",\n      type: \"radio\"\n    }), \"Building Manager\"), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"account-type-label\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"account-type-radio\",\n      name: \"accountType\",\n      value: \"LANDLORD\",\n      type: \"radio\"\n    }), \"Tenant\"))), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signin-form\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-border\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row frm-group\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"name\",\n      type: \"text\",\n      name: \"name\",\n      className: \"login-input-fullName-LoginFormSignUpViewLandlord\",\n      required: true\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"label\", null, \"FULL NAME\"), /*#__PURE__*/React.createElement(\"span\", null))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"email\",\n      type: \"email\",\n      name: \"email\",\n      className: \"login-input-email-LoginFormSignUpViewLandlord\",\n      required: true\n    }), /*#__PURE__*/React.createElement(\"label\", null, \"EMAIL ID\"), /*#__PURE__*/React.createElement(\"span\", null))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"new-password\",\n      type: \"password\",\n      name: \"password\",\n      className: \"login-input-password-LoginFormSignUpViewLandlord\",\n      required: true\n    }), /*#__PURE__*/React.createElement(\"label\", null, \"PASSWORD\"), /*#__PURE__*/React.createElement(\"span\", null))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"tel\",\n      type: \"number\",\n      name: \"mobile\",\n      className: \"login-input-mobile-LoginFormSignUpViewLandlord SignupFormMobileField\",\n      required: true\n    }), /*#__PURE__*/React.createElement(\"label\", null, \"MOBILE\"), /*#__PURE__*/React.createElement(\"span\", null)))), /*#__PURE__*/React.createElement(LoginFormMessages, {\n      messages: this.state.formMessages\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signup-btn\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, this.state.isLoading ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"transparent-btn btns\"\n    }, \"Loading...\") : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"blue-btn btns\",\n      type: \"submit\",\n      onClick: this.signUpHandler\n    }, \"SIGN UP\")), this.props.onPage ? \"\" : /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        paddingTop: 0\n      }\n    }, \"Already have an account? \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:;\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: '#0c67a6'\n      },\n      \"data-event-category\": \"accounts\",\n      \"data-event-action\": \"signIn\",\n      onClick: this.props.showSignInFormHandler\n    }, \"Sign In\")))))));\n  }\n\n}\n\n;\n\nclass LoginFormResetPasswordView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      showForm: true,\n      formMessages: {\n        errors: []\n      }\n    };\n    this.forgotPwdHandler = this.forgotPwdHandler.bind(this); // this.signInHandler = this.signInHandler.bind(this)\n    // this.signUpHandler = this.signUpHandler.bind(this)\n\n    this.tryAgainBtnHandler = this.tryAgainBtnHandler.bind(this);\n  }\n\n  componentDidMount() {\n    $('#signin-div').find('#email').focus();\n    $('.new-focus').click(function () {\n      $('#signin-div').find('#email').focus();\n    });\n    this.setState({\n      isLoading: false\n    });\n  } // signInHandler(){\n  //     var isOnPage = false;\n  //     if(this.props.onPage)isOnPage = true;\n  //     if( !isOnPage ){\n  //         Session.set('showForgotForm',false)\n  //         Session.set('showSignupForm',false)\n  //         Session.set('showLoginSignupFancyBoxDialog',true)\n  //         Session.set('showLoginDialog',true)\n  //     }else{\n  //         this.props.showSignInFormHandler();\n  //         // Session.set('showForgotForm',false)\n  //     }\n  // }\n\n\n  forgotPwdHandler(event) {\n    event.preventDefault();\n    let emailAddress = $(\".login-input-email-LoginFormResetPasswordView\").val().trim();\n    let validatedEmail = LoginFormValidation.email(emailAddress);\n    var errors = [];\n    this.setState({\n      formMessages: {}\n    });\n    this.setState({\n      isLoading: true\n    });\n\n    if (validatedEmail !== true) {\n      errors.push(validatedEmail);\n    }\n\n    if (errors.length) {\n      this.setState({\n        formMessages: {\n          errors: errors\n        }\n      });\n      this.setState({\n        isLoading: false\n      });\n      return;\n    }\n\n    this.forgotPwdCallback = error => {\n      fbq('track', 'ForgotPwd' + (error ? \"Failed\" : \"Successful\"));\n      ga('send', 'event', 'General', 'userLoginSignup', 'Forgot Password ' + (error ? \"Failed\" : \"Successful\"));\n      this.setState({\n        isLoading: false\n      }); // Show some message confirming result\n\n      if (error) {\n        console.log(error);\n        this.setState({\n          formMessages: {\n            errors: [error]\n          }\n        });\n      } else {\n        this.setState({\n          showForm: false\n        });\n        this.setState({\n          formMessages: {\n            info: [{\n              reason: \"Password reset mail sent.\"\n            }]\n          }\n        });\n      }\n    };\n\n    this.forgotPwdCallback = this.forgotPwdCallback.bind(this);\n    Accounts.forgotPassword({\n      email: emailAddress\n    }, this.forgotPwdCallback);\n  }\n\n  tryAgainBtnHandler() {\n    this.state.setState({\n      showForm: true\n    });\n  }\n\n  contactUsClickHandler() {\n    if ($) if ($.fancybox) $.fancybox.close();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, this.state.showForm ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"refund-div\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Forgot password?\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-text\"\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"no-capitalize\"\n    }, \"Enter your registered Email ID\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signin-form\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-border\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input  \" + (this.state.formMessages.errors ? this.state.formMessages.errors.email ? \"has-error has-feedback\" : \"\" : \"\")\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"email\",\n      type: \"email\",\n      name: \"email\",\n      required: true,\n      htmlFor: \"email-LoginFormResetPasswordView\",\n      className: \"login-input-email-LoginFormResetPasswordView\"\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email-LoginFormResetPasswordView\"\n    }, \"EMAIL ID\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(LoginFormMessages, {\n      messages: this.state.formMessages\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signup-btn\"\n    }, this.state.isLoading ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"transparent-btn btns\"\n    }, \"Loading...\") : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"blue-btn btns\",\n      type: \"submit\",\n      \"data-event-action\": \"accounts\",\n      onClick: this.forgotPwdHandler\n    }, \"Reset My Password\"), /*#__PURE__*/React.createElement(\"h6\", null, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: '#0c68a7'\n      },\n      \"data-event-category\": \"accounts\",\n      \"data-event-action\": \"signIn\",\n      onClick: this.props.showSignInFormHandler\n    }, \"Sign In\"))))))) : /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"refund-div\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"We just emailed you a link\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-text\"\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"no-capitalize\"\n    }, \"Please check your email and click the secure link.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signup-btn\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"transparent-btn btns tryAgainBtn\",\n      onClick: this.tryAgainBtnHandler\n    }, \"Try again\")), /*#__PURE__*/React.createElement(\"p\", null), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-text contactusBtn\"\n    }, \"If you don\\u2019t see our email, check your spam folder or \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('contactus'),\n      onClick: this.contactUsClickHandler\n    }, \"Contact us\")))));\n  }\n\n}\n\n;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MainLayoutFooter.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/layout/MainLayoutFooter.jsx                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => MainLayoutFooter\n});\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\n\nclass MainLayoutFooter extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"footer-div\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-9 col-sm-12 col-xs-12 foot-menu\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-sm-3 col-xs-12 foot-logo\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('home')\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/spot-my-crib-logo.png\"),\n      height: \"32px\",\n      alt: \"\"\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-9 col-sm-9 col-xs-12 pad0\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"pad-bot-2\"\n    }, \"TENANTS\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('b', {\n        slug: 'rent-in-dublin-ireland'\n      })\n    }, \"Rent in Dublin\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('b', {\n        slug: 'rent-in-cork-ireland'\n      })\n    }, \"Rent in Cork\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('b', {\n        slug: 'rent-in-kildare-ireland'\n      })\n    }, \"Rent in Kildare\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('b', {\n        slug: 'rent-in-galway-ireland'\n      })\n    }, \"Rent in Galway\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('b', {\n        slug: 'rent-in-meath-ireland'\n      })\n    }, \"Rent in Meath\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"pad-bot-2\"\n    }, \"LANDLORDS\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('advertisewithus')\n    }, \"List My Property\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('estateagent')\n    }, \"Estate Agents/Landlords\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('howitworks')\n    }, \"How it Works?\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('faqs')\n    }, \"FAQs\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('contactus')\n    }, \"Contact Us\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"pad-bot-2\"\n    }, \"SPOTMYCRIB\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('about')\n    }, \"About Us\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('bloghome')\n    }, \"Blog\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('careers')\n    }, \"Careers\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('gdpr')\n    }, \"Data Protection / EU GDPR\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('terms')\n    }, \"Legal\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('privacy')\n    }, \"Privacy Policy\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('cookiepolicy')\n    }, \"Cookie Policy\")))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-sm-12 col-xs-12 social-icon\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 col-sm-12 col-xs-12\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.facebook.com/SpotMyCrib/\",\n      target: \"_blank\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/facebook-icon.png\"),\n      alt: \"\"\n    }))), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://twitter.com/SpotMyCrib\",\n      target: \"_blank\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/twitter-icon.png\"),\n      alt: \"\"\n    }))), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.linkedin.com/company/11223356/\",\n      target: \"_blank\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/linkedin-icon.png\"),\n      alt: \"\"\n    }))))))))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"copyright\",\n      style: {\n        display: 'none'\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"footer-left visible-md\"\n    }, /*#__PURE__*/React.createElement(\"li\", null, \"SpotMyCrib. \")), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"footer-left hidden-md\"\n    }, /*#__PURE__*/React.createElement(\"li\", null, \"SpotMyCrib. \")))));\n  }\n\n}\n\n;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MainLayoutHeader.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/layout/MainLayoutHeader.jsx                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  LoginFormHorizontalT: () => LoginFormHorizontalT,\n  SocialLoginButtonsT: () => SocialLoginButtonsT,\n  LoginPage: () => LoginPage,\n  LoginPageHorizontal: () => LoginPageHorizontal,\n  LoginFormT: () => LoginFormT,\n  LoginFormMessages: () => LoginFormMessages\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet withTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  withTracker(v) {\n    withTracker = v;\n  }\n\n}, 2);\nlet LoginFormSignInView, LoginFormSignUpView, LoginFormSignUpViewLandlord, LoginFormResetPasswordView;\nmodule.link(\"./LoginFormViews.jsx\", {\n  LoginFormSignInView(v) {\n    LoginFormSignInView = v;\n  },\n\n  LoginFormSignUpView(v) {\n    LoginFormSignUpView = v;\n  },\n\n  LoginFormSignUpViewLandlord(v) {\n    LoginFormSignUpViewLandlord = v;\n  },\n\n  LoginFormResetPasswordView(v) {\n    LoginFormResetPasswordView = v;\n  }\n\n}, 3);\nemailAlerts = [// {\n//     heading: 'OH, HEY!',\n//     para: 'Get your dream place sooner without even searching for it! Sign up for our emails and we will send you the latest properties of your choice',\n//     yesButtonText: \"Awesome 🤘👍\"\n// },\n{\n  heading: 'Always First.',\n  para: 'Be the first to hear about the latest lettings in your area. Signup for our email alerts.',\n  yesButtonText: \"HELL YES!\"\n} // ,\n// {\n//     heading: 'Get Notified.',\n//     para: 'Get your rental soon by signing up for our email alerts. Be the first one to know when a letting is posted.',\n//     yesButtonText: \"Okays! Sign me up. :)\"\n// }\n];\nEMAIL_ALERT_VARIATION_count = 2; // EMAIL_ALERT_VARIATION = Math.floor(Math.random() * EMAIL_ALERT_VARIATION_count) // expected output: 0, 1, 2\n\nEMAIL_ALERT_VARIATION = 0; //Keeping only 1 variation.\n\nEMAILALERT = emailAlerts[EMAIL_ALERT_VARIATION];\nisMobileMenuEventAttached = false;\n\nfunction delayedFunctions() {\n  // if(!isMobileMenuEventAttached) {\n  $(document).unbind('click').bind('click', function (e) {\n    if (!$('.xs-menu').hasClass('slide-right')) {\n      //Its not open\n      if ($(e.target).closest(\".xs-menu-icon-master\").length > 0) {\n        if (FlowRouter.current().route.name == 'home') $('.carousel-indicators').addClass('carousel-indicatorsLowZindex');\n        $('.xs-menu').addClass('slide-right');\n        return true;\n      } else return true;\n    } else {\n      //Its open\n      if ($(e.target).closest(\".xs-menu-close-icon .xs-close, .xs-menu a\").length > 0 || $(e.target).closest(\".slide-right\").length < 1) {\n        $('.xs-menu').removeClass('slide-right');\n        if (FlowRouter.current().route.name == 'home') setTimeout(function () {\n          if (FlowRouter.current().route.name == 'home') $('.carousel-indicators').removeClass('carousel-indicatorsLowZindex');\n        }, 250);\n        return true;\n      }\n    }\n  }); // isMobileMenuEventAttached = true;\n  // }\n}\n\nfunction showLoginDialog() {\n  Session.set('showForgotForm', false);\n  Session.set('showSignupForm', false);\n  Session.set('showLoginSignupFancyBoxDialog', true);\n  Session.set('showLoginDialog', true);\n}\n\nfunction showSignupDialog() {\n  Session.set('showForgotForm', false);\n  Session.set('showSignupForm', true);\n  Session.set('showLoginSignupFancyBoxDialog', true);\n  Session.set('showLoginDialog', true);\n}\n\nfunction showLoginPopup() {\n  // let doesDivStillExists = $('#signin-div').html()\n  // if( doesDivStillExists != \"\" ){//To prevent home page dialogs\n  $.fancybox({\n    'padding': 0,\n    'href': '#signin-div',\n    afterClose: function (template) {\n      console.log(template); //template.showLoginDialog.set(false);\n\n      Session.set('isLandLordMode', false);\n      Session.set('showLoginDialog', false);\n      Session.set('showLoginSignupFancyBoxDialog', false);\n      Session.set('loginFromApplyNowBtn', false);\n    }\n  });\n}\n\nfunction emailValidation(email) {\n  email = email.trim();\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/; // Valid\n\n  if (re.test(email)) {\n    return true;\n  } // Invalid\n\n\n  return {\n    error: \"INVALID_EMAIL\",\n    reason: \"Please enter a valid email address in format pat@gmail.com\"\n  };\n}\n\nfunction decideAndShowCreateAlertPopup() {\n  // console.log(\"Apply decideAndShowCreateAlertPopup\")\n  let showAlertCreate = true;\n  let saidNo = parseInt(readCookie('emailAlertNoThanks'));\n\n  if (!saidNo) {\n    let c = parseInt(readCookie('emailAlertShowedCount'));\n    let on = parseInt(readCookie('emailAlertShowedOnTime'));\n    let tmp = (Date.now() - on) / 60000; // time in mins\n    // console.log('Time is: '+tmp);\n\n    if (c > 1) {\n      if (tmp < 2) showAlertCreate = false; //its not even 2mns since last popup show, so wait\n    }\n\n    if (c > 2) {\n      if (tmp < 2) showAlertCreate = false; //its not even 2mns since last popup show, so wait\n    }\n\n    if (c > 3) {\n      if (tmp < 3) showAlertCreate = false; //its not even 3mns since last popup show, so wait\n    }\n\n    if (c > 4) {\n      if (tmp < 6) showAlertCreate = false; //its not even 6mns since last popup show, so wait\n    }\n\n    if (c > 5) {\n      if (tmp < 12) showAlertCreate = false; //its not even 12mns since last popup show, so wait\n    }\n  }\n\n  let user = Meteor.user();\n\n  if (user) {\n    if (user.profile.emailAlertsActive || user.profile.emailAlertsNoThanks) showAlertCreate = false; // he already has alerts or he said no to them.\n  }\n\n  if (parseInt(readCookie('emailAlertAlreadyHasIt')) || parseInt(readCookie('emailAlertNoThanks'))) showAlertCreate = false; // He already has alerts or He already said no\n  //you don't need above fallback because this function is called only after 3-5 sec , by then user subscription must be loaded.\n  // console.log(\"decision: \"+showAlertCreate)\n\n  if (showAlertCreate) {\n    showCreateAlertPopup();\n  }\n}\n\nfunction showCreateAlertPopup() {\n  if (['rent', \"b\", 'letting'].includes(FlowRouter.current().route.name)) {\n    let c = parseInt(readCookie('emailAlertShowedCount'));\n    c = parseInt(c);\n    if (isNaN(c)) c = 1;else {\n      c++;\n    }\n    createCookie('emailAlertShowedCount', c, 5);\n    createCookie('emailAlertShowedOnTime', Date.now(), 5);\n    $.fancybox({\n      'padding': 0,\n      'href': '#create-alert-popup',\n      afterShow: function () {\n        $('#emailAlertUserEmailAddress').focus();\n        ga('send', 'event', 'emailAlert', 'Show Email Alert', 'Route name: ' + FlowRouter.current().route.name + ' Variation: ' + EMAIL_ALERT_VARIATION);\n      },\n      afterClose: function () {\n        Session.set('showCreateAlertPopup', false);\n      }\n    });\n  }\n}\n\nfunction showAddPropertyHeaderPopup() {\n  $.fancybox({\n    'padding': 0,\n    'href': '#addPropertyHeader-div',\n    afterClose: function (template) {\n      //console.log(template);\n      Session.set('showAddPropertyHeaderTemplate', false);\n      Session.set('showAddPropertyHeaderFancyBoxDialog', false);\n    }\n  });\n}\n\nfunction createCookie(name, value, days) {\n  var expires = \"\";\n\n  if (days) {\n    var date = new Date();\n    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n    expires = \"; expires=\" + date.toUTCString();\n  }\n\n  document.cookie = name + \"=\" + value + expires + \"; path=/\";\n}\n\nfunction readCookie(name) {\n  var nameEQ = name + \"=\";\n  var ca = document.cookie.split(';');\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n\n    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n  }\n\n  return null;\n}\n\nfunction eraseCookie(name) {\n  createCookie(name, \"\", -1);\n}\n\nfunction loadFonts() {\n  (function () {\n    var wf = document.createElement('link');\n    wf.href = cdnPath('/fonts/Montserrat/stylesheet.css');\n    wf.rel = 'stylesheet';\n    wf.async = 'true'; //link doesnt support async\n\n    var s = document.getElementsByTagName('link')[0];\n    s.parentNode.insertBefore(wf, s);\n    Session.set('fontsLoaded', true); // var wf = document.createElement('script');\n    // wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';\n    // wf.type = 'text/javascript';\n    // wf.async = 'true';\n    // var s = document.getElementsByTagName('script')[0];\n    // s.parentNode.insertBefore(wf, s);\n  })();\n}\n\nclass MainLayoutHeader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      emailAlertEmailAddress: this.props.currentUser ? this.props.currentUser.profile.email : \"\"\n    };\n    this.emailAlertEmailAddressHandler = this.emailAlertEmailAddressHandler.bind(this);\n    this.NeedsCreateAlertPopup = false;\n\n    if (['rent', \"b\", 'letting'].includes(FlowRouter.current().route.name)) {\n      this.NeedsCreateAlertPopup = true; // EMAIL_ALERT_VARIATION = Math.floor(Math.random() * EMAIL_ALERT_VARIATION_count) // expected output: 0, 1\n\n      EMAIL_ALERT_VARIATION = 0;\n      EMAILALERT = emailAlerts[EMAIL_ALERT_VARIATION];\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentUser && !this.state.emailAlertEmailAddress) //update only if it has vals and emailAlertEmailAddress is empty.\n      this.setState({\n        emailAlertEmailAddress: nextProps.currentUser.profile.email\n      });\n  }\n\n  componentWillMount() {\n    if (Meteor.isClient) {\n      Session.set('showLoginDialog', false);\n      Session.set('showForgotForm', false);\n      Session.set('showLoginDialog', false);\n      Session.set('showLoginSignupFancyBoxDialog', false);\n      Session.set('showAddPropertyHeaderTemplate', false);\n      Session.set('showAddPropertyHeaderFancyBoxDialog', false);\n      if (!Session.get(\"showErrorDlg\")) Session.set(\"showErrorDlg\", []);\n    }\n\n    this.state = {\n      newAlertCreateForm: true,\n      newAlertCreatedSuccessfully: false\n    };\n    this.emailAlertCreateBtnHandler = this.emailAlertCreateBtnHandler.bind(this);\n    this.emailAlertNoThanksBtnHandler = this.emailAlertNoThanksBtnHandler.bind(this);\n  }\n\n  emailAlertCreateBtnHandler() {\n    console.log('emailAlertCreateBtnHandler');\n    let val = $('#emailAlertUserEmailAddress').val();\n    let validatedEmail = emailValidation(val);\n\n    if (validatedEmail !== true) {\n      alert('Invalid email, please enter a valid email address.');\n      $('#emailAlertUserEmailAddress').focus();\n      return;\n    }\n\n    this.subscribeToEmailAlert = function (error, result) {\n      if (error) {\n        console.log(error);\n        alert('Error: ' + error.reason);\n        $('#emailAlertUserEmailAddress').focus();\n        return;\n      } else {\n        createCookie('emailAlertAlreadyHasIt', 1, 365);\n        this.setState({\n          newAlertCreateForm: false,\n          newAlertCreatedSuccessfully: true\n        });\n        setTimeout(function () {\n          if ($) if ($.fancybox) $.fancybox.close();\n        }, 10000);\n      }\n    };\n\n    this.subscribeToEmailAlert = this.subscribeToEmailAlert.bind(this);\n    Meteor.call('subscribeToEmailAlert', val, this.subscribeToEmailAlert);\n    ga('send', 'event', 'emailAlert', 'Created Email Alert', 'Route name: ' + FlowRouter.current().route.name + ' Variation: ' + EMAIL_ALERT_VARIATION);\n  }\n\n  emailAlertNoThanksBtnHandler() {\n    console.log('emailAlertNoThanksBtnHandler');\n    createCookie('emailAlertNoThanks', 1, 365);\n\n    if (this.props.currentUser) {\n      Meteor.call('emailAlertsNoThanks');\n    }\n\n    if ($) if ($.fancybox) $.fancybox.close();\n  }\n\n  componentDidMount() {\n    $.getScript(cdnPath('/js/bootstrap.min.js'), function () {// console.log(\"Bootstrap loaded\")\n    }); // $.getScript(cdnPath('//static.filestackapi.com/filestack-js/1.x.x/filestack.min.js'), function(){\n    //     console.log(\"Filestack loaded\")\n    // });\n\n    $.getScript(cdnPath('/plugins/fancybox/js/jquery.fancybox.min.js'), function () {\n      // script should be loaded and do something with it.\n      $('.fancybox').fancybox({\n        scrolling: 'no',\n        helpers: {\n          overlay: {\n            locked: true\n          }\n        }\n      });\n    });\n\n    if (Meteor.isClient) {\n      var fontsLoaded = Session.get('fontsLoaded');\n\n      if (!fontsLoaded) {\n        //Below code is taken from https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery\n        var raf = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n        if (raf) raf(function () {\n          window.setTimeout(loadFonts, 0);\n        });else window.addEventListener('load', loadFonts);\n      }\n    }\n\n    setTimeout(delayedFunctions, 1500);\n\n    if (['rent', \"b\", 'letting'].includes(FlowRouter.current().route.name)) {\n      setTimeout(function () {\n        decideAndShowCreateAlertPopup();\n      }, 10000);\n      var runOnlyOnce = false;\n      $(document).off('scroll').on('scroll', function () {\n        try {\n          let addon = 50;\n          if (FlowRouter.current().route.name == 'b') addon = 300;\n\n          if ($(this).scrollTop() >= $('.subscribeTillPopop').position().top - addon && !runOnlyOnce) {\n            runOnlyOnce = true;\n            decideAndShowCreateAlertPopup();\n          }\n        } catch (e) {}\n      });\n    }\n  }\n\n  showLoginDialogClick(event) {\n    showLoginDialog();\n  }\n\n  showSignupDialogClick(event) {\n    showSignupDialog();\n  }\n\n  logoutBtnClick(event) {\n    Meteor.logout(function (err) {\n      if (err) {\n        throw new Meteor.Error(\"Logout failed\");\n      }\n    });\n  }\n\n  profileBtnClick(event) {\n    FlowRouter.go('account/profile');\n  }\n\n  cookieConsentBtnClick(event) {\n    createCookie('cookieConsent', 1, 365);\n    $('.cookieConsentArea').remove();\n  }\n\n  emailAlertEmailAddressHandler(event) {\n    this.setState({\n      emailAlertEmailAddress: event.target.value\n    });\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", null, this.props.showCookieConsent ? /*#__PURE__*/React.createElement(\"section\", {\n      className: \"cookieConsentArea\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cookieConsentArea-inner\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left-menu text-center\",\n      style: {\n        color: 'white'\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", null, \"  SpotMyCrib uses cookies. By continuing to use this site you consent to the use of cookies in accordance to our  \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('cookiepolicy')\n    }, \" cookie policy \"), \".\", /*#__PURE__*/React.createElement(\"button\", {\n      className: \"green-btn btns cookieConsentBtn\",\n      onClick: self.cookieConsentBtnClick.bind(this),\n      type: \"button\",\n      style: {\n        marginLeft: 20\n      }\n    }, \"I understand\")))))) : \"\", /*#__PURE__*/React.createElement(\"section\", {\n      className: \"header\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo-holder-div\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"xs-menu-icon-master\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"xs-menu-icon\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"menu-xs sprite\"\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo-holder\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('home')\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/spot-my-crib-logo.png\"),\n      alt: \"SpotMyCrib\",\n      title: \"SpotMyCrib - Safe and easy rentals\",\n      className: \"logo-big\"\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/spotmycrib-logo-130.jpg\"),\n      alt: \"SpotMyCrib\",\n      title: \"SpotMyCrib - Safe and easy rentals\",\n      className: \"logo-xs\"\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"hidden-xs\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('advertisewithus'),\n      className: \"btns green-btn addPropertyHeaderBtn\",\n      type: \"button\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"glyphicon glyphicon-object-align-bottom\",\n      \"aria-hidden\": \"true\"\n    }), \" Advertise property\")), this.props.currentUserId ? /*#__PURE__*/React.createElement(\"li\", {\n      className: \"login-menu hidden-xs\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('account/myProperties')\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"glyphicon glyphicon-check\",\n      \"aria-hidden\": \"true\"\n    }), \" MY PROPERTIES\")) : \"\", this.props.currentUserId ? /*#__PURE__*/React.createElement(\"li\", {\n      className: \"login-menu hidden-xs\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('account/profile')\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"glyphicon glyphicon-check\",\n      \"aria-hidden\": \"true\"\n    }), \" MY REFERENCES\")) : \"\", this.props.currentUserId ? /*#__PURE__*/React.createElement(\"li\", {\n      className: \"login-menu hidden-xs\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:void(0);\",\n      onClick: self.logoutBtnClick.bind(this),\n      className: \"logoutBtn\"\n    }, \"SIGN OUT\")) : \"\", this.props.currentUserId ? /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"navbar-accounts\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.path('account/profile')\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"circular-icon profileBtn\",\n      src: this.props.getProfilePic,\n      width: \"40px\",\n      height: \"40px\"\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"logged-in-display-name profileBtn\"\n    }, this.props.displayName)))) : /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"oval logedout-menu\"\n    }, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"right-border showLoginDialog\",\n      onClick: self.showLoginDialogClick.bind(this),\n      href: \"javascript:;\"\n    }, \"SIGN IN\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:;\",\n      onClick: self.showSignupDialogClick.bind(this),\n      className: \"showSignupDialog\"\n    }, \"SIGN UP\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"xs-menu visible-xs transition\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"xs-menu-close-icon text-right\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"sprite xs-close\"\n    })), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"transition\"\n    }, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('home')\n    }, \"HOME / SEARCH\")), this.props.currentUserId ? /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.path('account/profile')\n    }, \"MY REFERENCES\")) : \"\", /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('advertisewithus')\n    }, \"LIST PROPERTY\")), this.props.currentUserId ? /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.path('account/myProperties')\n    }, \"MY PROPERTIES\")) : \"\", /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('estateagent')\n    }, \"AGENTS/LANDLORDS\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('howitworks')\n    }, \"HOW IT WORKS?\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('faqs')\n    }, \"FAQ\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('contactus')\n    }, \"CONTACT US\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('careers')\n    }, \"CAREERS\")), this.props.currentUserId ? /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:void(0);\",\n      onClick: self.logoutBtnClick.bind(this)\n    }, \"SIGN OUT\")) : \"\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"errorModel\",\n      className: \"alert alert-danger \",\n      style: {\n        display: 'none'\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"signin-div\",\n      className: \"signin1\",\n      style: {\n        display: 'none'\n      }\n    }, this.props.showLoginDialog ? /*#__PURE__*/React.createElement(LoginFormT, null) : \"\"), this.NeedsCreateAlertPopup ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"create-alert-popup\",\n      style: {\n        display: 'none'\n      },\n      className: \"verification-div1\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"refund-div\"\n    }, this.state.newAlertCreateForm && !this.state.newAlertCreatedSuccessfully ? /*#__PURE__*/React.createElement(\"h2\", null, EMAILALERT.heading) : \"\", this.state.newAlertCreatedSuccessfully && !this.state.newAlertCreateForm ? /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"green-text\"\n    }, \"Well Done! Alert Created.\") : \"\"), this.state.newAlertCreateForm && !this.state.newAlertCreatedSuccessfully ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-text\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-text\",\n      style: {\n        textAlign: 'center',\n        margin: '10px 0px',\n        fontSize: '14px'\n      }\n    }, EMAILALERT.para), /*#__PURE__*/React.createElement(\"hr\", null), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signin-form\",\n      action: \"javascript:void(0);\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-border\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter your email address\",\n      id: \"emailAlertUserEmailAddress\",\n      required: \"required\",\n      style: {\n        fontSize: '14px',\n        marginBottom: '10px !important',\n        borderBottom: 'none !important'\n      },\n      value: this.state.emailAlertEmailAddress,\n      onChange: this.emailAlertEmailAddressHandler\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signup-btn\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.emailAlertCreateBtnHandler,\n      className: \"green-btn btns\",\n      type: \"submit\",\n      style: {\n        width: '100%',\n        marginTop: '10px'\n      }\n    }, EMAILALERT.yesButtonText))), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:void(0)\",\n      onClick: this.emailAlertNoThanksBtnHandler,\n      className: 'noThanks'\n    }, \"No thanks, I'm happy to search myself\")) : \"\", this.state.newAlertCreatedSuccessfully && !this.state.newAlertCreateForm ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-text\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-text\",\n      style: {\n        textAlign: 'center',\n        margin: '10px 0px',\n        fontSize: '13px'\n      }\n    }, \"We will send you an email a day with new lettings. Be the first to apply for them. \"), /*#__PURE__*/React.createElement(\"iframe\", {\n      src: \"https://giphy.com/embed/fxsqOYnIMEefC\",\n      frameBorder: 0,\n      className: \"giphy-embed\",\n      allowFullScreen: true,\n      style: {\n        width: '80%'\n      }\n    })) : \"\", false ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-text\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"green-text\",\n      style: {\n        textAlign: 'center',\n        margin: '10px 0px',\n        color: 'black'\n      }\n    }, \"You will now be notified of the new lettings in Dundrum of County Dubin.\"), /*#__PURE__*/React.createElement(\"hr\", null), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-text mar-top-20\",\n      style: {\n        textAlign: 'center',\n        margin: '20px 0px 10px',\n\n        /* display: 'none', */\n        fontSize: '14px'\n      }\n    }, \"Your active alerts are\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered\"\n    }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", {\n      style: {\n        textAlign: 'center'\n      }\n    }, \"County\"), /*#__PURE__*/React.createElement(\"th\", {\n      style: {\n        textAlign: 'center'\n      }\n    }, \"Area\"), /*#__PURE__*/React.createElement(\"th\", null))), /*#__PURE__*/React.createElement(\"tbody\", {\n      style: {\n        color: '#8b8b8b',\n        fontSize: '14px'\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"td\", null, \"Dublin\"), /*#__PURE__*/React.createElement(\"td\", null, \"All Areas\"), /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(\"a\", null, \"Delete\"))), /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"td\", null, \"Limrick\"), /*#__PURE__*/React.createElement(\"td\", null, \"City Center North\"), /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(\"a\", null, \"Delete\"))), /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"td\", null, \"Limrick\"), /*#__PURE__*/React.createElement(\"td\", null, \"Madison square\"), /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(\"a\", null, \"Delete\")))))) : \"\") : \"\");\n  }\n\n}\n\n;\nmodule.exportDefault(withTracker(() => {\n  var showCookieConsent = false;\n  var errorModel = false;\n  var showLoginDialog = false;\n\n  if (Meteor.isClient) {\n    if (Session.get('loginFlowComplete')) {\n      setTimeout(function () {\n        Session.set('loginFlowComplete', undefined);\n      }, 1000);\n    } ///////////////////// errorModel start\n\n\n    var tmp = Session.get(\"showErrorDlg\");\n    if (!tmp) tmp = [];\n    if (tmp) if (tmp.length) {\n      var timeoutVal = 0;\n      if (!$.fancybox) timeoutVal = 3000;\n      let tmpHTML = '';\n\n      for (let j = 0; j < tmp.length; j++) {\n        tmpHTML += '<p>' + tmp[j] + '</p>';\n      }\n\n      $('#errorModel').html(tmpHTML);\n      setTimeout(function () {\n        $.fancybox({\n          'padding': 0,\n          'href': '#errorModel',\n          // afterShow:function(template){\n          //     setTimeout(function () {\n          //         $.fancybox.close();\n          //     },3000)\n          // },\n          afterClose: function () {\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            tmp.shift();\n            Session.set(\"showErrorDlg\", tmp);\n          }\n        });\n      }, timeoutVal);\n    } ///////////////////// showLoginDialog start\n\n    if (Session.get('showLoginSignupFancyBoxDialog')) {\n      showLoginPopup();\n    } else {\n      if ($) if ($.fancybox) $.fancybox.close();\n    } ///////////////////// showCreateAlertPopup start\n\n\n    if (Session.get('showCreateAlertPopup')) {\n      showCreateAlertPopup();\n    } // else {//No need for any control over its closing.\n    //     if ($)\n    //         if ($.fancybox)\n    //             $.fancybox.close();\n    // }\n\n\n    showCookieConsent = !parseInt(readCookie('cookieConsent'));\n    errorModel = Session.get(\"showErrorDlg\");\n    showLoginDialog = Session.get(\"showLoginDialog\");\n  }\n\n  var user = Meteor.user(); ///////////////////// displayName start\n\n  var displayName = \"Guest\";\n\n  try {\n    if (user) {\n      if (user.profile && user.profile.name) {\n        displayName = user.profile.name;\n      }\n    }\n  } catch (e) {} ///////////////////// getProfilePic start\n\n\n  var getProfilePic = cdnPath(\"/images/user-img.png\");\n\n  try {\n    if (user.profile.picture) {\n      if (user.services.facebook) if (user.services.facebook.indexOf('?width=40') == -1) getProfilePic = user.profile.picture + \"?width=40\"; //@BCompatibility : adding ?width=40 to it\n\n      getProfilePic = user.profile.picture;\n    }\n  } catch (e) {}\n\n  return {\n    showCookieConsent: showCookieConsent,\n    currentUserId: Meteor.userId(),\n    errorModel: errorModel,\n    showLoginDialog: showLoginDialog,\n    displayName: displayName,\n    currentUser: Meteor.user()\n  };\n})(MainLayoutHeader));\n\nclass LoginFormMessages extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, this.props.messages ? /*#__PURE__*/React.createElement(\"div\", null, this.props.messages.info ? this.props.messages.info.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"changePwdAlertMsgs alert alert-info\",\n        role: \"alert\",\n        key: i\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"glyphicon glyphicon-info-sign\",\n        \"aria-hidden\": \"true\"\n      }), \"\\xA0 \", item.reason);\n    }) : \"\", this.props.messages.warning ? this.props.messages.warning.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"changePwdAlertMsgs alert alert-warning\",\n        role: \"alert\",\n        key: i\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"glyphicon glyphicon-warning-sign\",\n        \"aria-hidden\": \"true\"\n      }), \"\\xA0 \", item.reason);\n    }) : \"\", this.props.messages.success ? this.props.messages.success.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"changePwdAlertMsgs alert success\",\n        role: \"alert\",\n        key: i\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"glyphicon glyphicon-ok\",\n        \"aria-hidden\": \"true\"\n      }), \"\\xA0 \", item.reason);\n    }) : \"\", this.props.messages.errors ? this.props.messages.errors.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"changePwdAlertMsgs alert alert-danger\",\n        role: \"alert\",\n        key: i\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"glyphicon glyphicon-exclamation-sign\",\n        \"aria-hidden\": \"true\"\n      }), \"\\xA0 \", item.reason);\n    }) : \"\") : \"\");\n  }\n\n}\n\n;\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showForgotForm: props.showForgotForm ? true : false,\n      showSignupForm: props.showSignupForm ? true : false,\n      isLandLordMode: props.isLandLordMode ? true : false,\n      loginFromApplyNowBtn: props.loginFromApplyNowBtn ? true : false\n    };\n  }\n\n  showForgotFormHandler() {\n    this.setState({\n      showForgotForm: true\n    });\n    this.setState({\n      showSignupForm: false\n    });\n    this.setState({\n      isLandLordMode: false\n    });\n  }\n\n  showSignupFormHandler() {\n    this.setState({\n      showForgotForm: false\n    });\n    this.setState({\n      showSignupForm: true\n    });\n    this.setState({\n      isLandLordMode: false\n    });\n  }\n\n  showSignInFormHandler() {\n    this.setState({\n      showForgotForm: false\n    });\n    this.setState({\n      showSignupForm: false\n    });\n    this.setState({\n      isLandLordMode: false\n    });\n  }\n\n  showLandlordViewHandler() {\n    this.setState({\n      showForgotForm: false\n    });\n    this.setState({\n      showSignupForm: true\n    });\n    this.setState({\n      isLandLordMode: true\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loginForm\"\n    }, this.state.showForgotForm ? /*#__PURE__*/React.createElement(LoginFormResetPasswordView, {\n      onPage: false,\n      showSignInFormHandler: this.showSignInFormHandler.bind(this)\n    }) : this.state.showSignupForm ? this.state.isLandLordMode ? /*#__PURE__*/React.createElement(LoginFormSignUpViewLandlord, {\n      onPage: false,\n      showSignInFormHandler: this.showSignInFormHandler.bind(this)\n    }) : /*#__PURE__*/React.createElement(LoginFormSignUpView, {\n      loginFromApplyNowBtn: this.state.loginFromApplyNowBtn,\n      onPage: false,\n      showSignInFormHandler: this.showSignInFormHandler.bind(this)\n    }) : /*#__PURE__*/React.createElement(LoginFormSignInView, {\n      loginFromApplyNowBtn: this.state.loginFromApplyNowBtn,\n      onPage: false,\n      showSignupFormHandler: this.showSignupFormHandler.bind(this),\n      showForgotFormHandler: this.showForgotFormHandler.bind(this)\n    }));\n  }\n\n}\n\n;\nmodule.runSetters(LoginFormT = withTracker(() => {\n  var ret = {};\n\n  if (Meteor.isClient) {\n    ret.showSignupForm = Session.get('showSignupForm');\n    ret.showForgotForm = Session.get('showForgotForm');\n    ret.isLandLordMode = Session.get('isLandLordMode');\n    ret.loginFromApplyNowBtn = Session.get('loginFromApplyNowBtn');\n  }\n\n  return ret;\n})(LoginForm));\n\nclass LoginPage extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"mar-top-20 no-print\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-holder\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"head-border-bottom\"\n    }, /*#__PURE__*/React.createElement(LoginFormT, null)))));\n  }\n\n}\n\n;\n\nclass SocialLoginButtons extends Component {\n  componentWillMount() {\n    if (Meteor.isClient) {\n      Session.set('loginFlowStart', true);\n      Session.set('loginFlowComplete', undefined);\n      delete Session.keys.loginFlowComplete;\n    }\n\n    this.state = {\n      errorMessages: {}\n    };\n    this.dontShow = true;\n    this.buttonForText = '';\n\n    switch (this.props.buttonFor) {\n      case 'login':\n        this.buttonForText = 'Login';\n        break;\n\n      case 'signup':\n        this.buttonForText = 'Signup';\n        break;\n\n      default:\n        this.buttonForText = 'Login / Signup';\n    }\n\n    this.handleFBLogin = this.handleFBLogin.bind(this);\n    this.handleTwitterLogin = this.handleTwitterLogin.bind(this);\n    this.handleGoogleLogin = this.handleGoogleLogin.bind(this);\n    this.handleLinkedInLogin = this.handleLinkedInLogin.bind(this);\n  }\n\n  handleFBLogin(event) {\n    this.setState({\n      errorMessages: {}\n    });\n\n    this.FBCallback = function (err) {\n      switch (this.props.buttonFor) {\n        case 'login':\n          fbq('track', 'FBUserLogin' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'FB Login ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n\n        case 'signup':\n          fbq('track', 'FBUserSignup' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'FB Signup ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n\n        default:\n          fbq('track', 'FBUserLoginSignup' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'FB LoginSignup ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n      }\n\n      if (err) {\n        console.log(err);\n        var msg = 'Connect with Facebook failed. ';\n        if (err.errorType == 'Accounts.LoginCancelledError') msg += 'Seems like attempt was cancelled. ';else if (err.error == 'account-exists') {\n          msg += err.reason + ' ';\n        } else if (err.message) msg += err.message + '. ';\n        msg += \"Please try again. Contact us if needed.\";\n        var errors = [];\n        errors.push({\n          \"error\": \"SOCIALLOGIN_FAIL\",\n          \"reason\": msg\n        });\n        this.setState({\n          errorMessages: {\n            errors: errors\n          }\n        });\n      } else {\n        if (this.props.usedInDlg) {\n          Session.set('showLoginSignupFancyBoxDialog', false);\n          Session.set('showForgotForm', false);\n          Session.set('showSignupForm', true);\n          Session.set('showLoginDialog', true);\n        }\n\n        Session.set('loginFlowComplete', true);\n        Session.set('loginFlowStart', undefined);\n        delete Session.keys.loginFlowStart;\n      }\n    };\n\n    this.FBCallback = this.FBCallback.bind(this);\n    Meteor.loginWithFacebook({}, this.FBCallback);\n  }\n\n  handleTwitterLogin(event) {\n    this.setState({\n      errorMessages: {}\n    });\n\n    this.TwitterCallback = function (err) {\n      switch (this.props.buttonFor) {\n        case 'login':\n          fbq('track', 'TwitterUserLogin' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'Twitter Login ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n\n        case 'signup':\n          fbq('track', 'TwitterUserSignup' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'Twitter Signup ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n\n        default:\n          fbq('track', 'TwitterUserLoginSignup' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'Twitter LoginSignup ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n      }\n\n      if (err) {\n        console.log(err);\n        var msg = 'Connect with Twitter failed. ';\n        if (err.errorType == 'Accounts.LoginCancelledError') msg += 'Seems like attempt was cancelled. ';else if (err.error == 'account-exists') {\n          msg += err.reason + ' ';\n        } else if (err.message) msg += err.message + '. ';\n        msg += \"Please try again. Contact us if needed.\";\n        var errors = [];\n        errors.push({\n          \"error\": \"SOCIALLOGIN_FAIL\",\n          \"reason\": msg\n        });\n        this.setState({\n          errorMessages: {\n            errors: errors\n          }\n        });\n      } else {\n        if (this.props.usedInDlg) {\n          Session.set('showLoginSignupFancyBoxDialog', false);\n          Session.set('showForgotForm', false);\n          Session.set('showSignupForm', true);\n          Session.set('showLoginDialog', true);\n        }\n\n        Session.set('loginFlowComplete', true);\n        Session.set('loginFlowStart', undefined);\n        delete Session.keys.loginFlowStart;\n      }\n    };\n\n    this.TwitterCallback = this.TwitterCallback.bind(this);\n    Meteor.loginWithTwitter({}, this.TwitterCallback);\n  }\n\n  handleGoogleLogin(event) {\n    this.setState({\n      errorMessages: {}\n    });\n\n    this.GoogleCallback = function (err) {\n      switch (this.props.buttonFor) {\n        case 'login':\n          fbq('track', 'GoogleUserLogin' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'Google Login ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n\n        case 'signup':\n          fbq('track', 'GoogleUserSignup' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'Google Signup ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n\n        default:\n          fbq('track', 'GoogleUserLoginSignup' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'Google LoginSignup ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n      }\n\n      if (err) {\n        console.log(err);\n        var msg = 'Connect with Google failed. ';\n        if (err.errorType == 'Accounts.LoginCancelledError') msg += 'Seems like attempt was cancelled. ';else if (err.error == 'account-exists') {\n          msg += err.reason + ' ';\n        } else if (err.message) msg += err.message + '. ';\n        msg += \"Please try again. Contact us if needed.\";\n        var errors = [];\n        errors.push({\n          \"error\": \"SOCIALLOGIN_FAIL\",\n          \"reason\": msg\n        });\n        this.setState({\n          errorMessages: {\n            errors: errors\n          }\n        });\n      } else {\n        if (this.props.usedInDlg) {\n          Session.set('showLoginSignupFancyBoxDialog', false);\n          Session.set('showForgotForm', false);\n          Session.set('showSignupForm', true);\n          Session.set('showLoginDialog', true);\n        }\n\n        Session.set('loginFlowComplete', true);\n        Session.set('loginFlowStart', undefined);\n        delete Session.keys.loginFlowStart;\n      }\n    };\n\n    this.GoogleCallback = this.GoogleCallback.bind(this);\n    Meteor.loginWithGoogle({}, this.GoogleCallback);\n  }\n\n  handleLinkedInLogin(event) {\n    this.setState({\n      errorMessages: {}\n    });\n\n    this.LinkedInCallback = function (err) {\n      switch (this.props.buttonFor) {\n        case 'login':\n          fbq('track', 'LinkedInUserLogin' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'LinkedIn Login ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n\n        case 'signup':\n          fbq('track', 'LinkedInUserSignup' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'LinkedIn Signup ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n\n        default:\n          fbq('track', 'LinkedInUserLoginSignup' + (err ? \"Failed\" : \"Successful\"));\n          ga('send', 'event', 'General', 'userLoginSignup', 'LinkedIn LoginSignup ' + (err ? \"Failed\" : \"Successful\"));\n          break;\n      }\n\n      if (err) {\n        console.log(err);\n        var msg = 'Connect with LinkedIn failed. ';\n        if (err.errorType == 'Accounts.LoginCancelledError') msg += 'Seems like attempt was cancelled. ';else if (err.error == 'account-exists') {\n          msg += err.reason + ' ';\n        } else if (err.message) msg += err.message + '. ';\n        msg += \"Please try again. Contact us if needed.\";\n        var errors = [];\n        errors.push({\n          \"error\": \"SOCIALLOGIN_FAIL\",\n          \"reason\": msg\n        });\n        this.setState({\n          errorMessages: {\n            errors: errors\n          }\n        });\n      } else {\n        if (this.props.usedInDlg) {\n          Session.set('showLoginSignupFancyBoxDialog', false);\n          Session.set('showForgotForm', false);\n          Session.set('showSignupForm', true);\n          Session.set('showLoginDialog', true);\n        }\n\n        Session.set('loginFlowComplete', true);\n        Session.set('loginFlowStart', undefined);\n        delete Session.keys.loginFlowStart;\n      }\n    };\n\n    this.LinkedInCallback = this.LinkedInCallback.bind(this);\n    Meteor.loginWithLinkedIn({}, this.LinkedInCallback);\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: self.handleFBLogin,\n      id: \"facebook-login\",\n      className: \"blue-btn btns social-button\",\n      \"data-max-rows\": \"1\",\n      \"data-size\": \"medium\",\n      \"data-show-faces\": \"false\",\n      \"data-auto-logout-link\": \"false\"\n    }, this.buttonForText, \" with Facebook\"), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: self.handleTwitterLogin,\n      id: \"twitter-login\",\n      style: {\n        marginTop: '10px'\n      },\n      className: \"blue-btn btns social-button\",\n      \"data-max-rows\": \"1\",\n      \"data-size\": \"medium\",\n      \"data-show-faces\": \"false\",\n      \"data-auto-logout-link\": \"false\"\n    }, this.buttonForText, \" with Twitter\"), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: self.handleGoogleLogin,\n      id: \"google-login\",\n      style: {\n        marginTop: '10px'\n      },\n      className: \"blue-btn btns social-button\",\n      \"data-max-rows\": \"1\",\n      \"data-size\": \"medium\",\n      \"data-show-faces\": \"false\",\n      \"data-auto-logout-link\": \"false\"\n    }, this.buttonForText, \" with Google\"), this.dontShow ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      onClick: self.handleLinkedInLogin,\n      id: \"linkedin-login\",\n      style: {\n        marginTop: '10px'\n      },\n      className: \"blue-btn btns social-button\",\n      \"data-max-rows\": \"1\",\n      \"data-size\": \"medium\",\n      \"data-show-faces\": \"false\",\n      \"data-auto-logout-link\": \"false\"\n    }, \"Login with LinkedIn\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(LoginFormMessages, {\n      messages: this.state.errorMessages\n    }), /*#__PURE__*/React.createElement(\"br\", null));\n  }\n\n}\n\n;\nmodule.runSetters(SocialLoginButtonsT = withTracker(() => {\n  var ret = {};\n\n  if (Meteor.isClient) {\n    ret.showSignupForm = Session.get('showSignupForm');\n    ret.showForgotForm = Session.get('showForgotForm');\n  }\n\n  ret.user = Meteor.user();\n  return ret;\n})(SocialLoginButtons));\n\nclass LoginFormHorizontal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showForgotForm: props.showForgotForm ? true : false,\n      isLandLordMode: props.isLandLordMode ? true : false\n    };\n  }\n\n  showForgotFormHandler() {\n    this.setState({\n      showForgotForm: true\n    });\n  }\n\n  showSignInFormHandler() {\n    this.setState({\n      showForgotForm: false\n    });\n  }\n\n  componentDidMount() {\n    if (this.props.user) Session.set('loginFlowComplete', true); //todo: check this\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loginForm onpageSignin-form\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(SocialLoginButtonsT, null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row text-center\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 col-sm-12\"\n    }, this.state.showForgotForm ? /*#__PURE__*/React.createElement(LoginFormResetPasswordView, {\n      onPage: true,\n      showSignInFormHandler: this.showSignInFormHandler.bind(this)\n    }) : /*#__PURE__*/React.createElement(LoginFormSignInView, {\n      onPage: true,\n      showForgotFormHandler: this.showForgotFormHandler.bind(this)\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 col-sm-12\"\n    }, this.state.isLandLordMode ? /*#__PURE__*/React.createElement(LoginFormSignUpViewLandlord, {\n      onPage: true\n    }) : /*#__PURE__*/React.createElement(LoginFormSignUpView, {\n      onPage: true\n    }))));\n  }\n\n}\n\n;\nmodule.runSetters(LoginFormHorizontalT = withTracker(() => {\n  var ret = {};\n  ret.user = Meteor.user();\n  return ret;\n})(LoginFormHorizontal));\n\nclass LoginPageHorizontal extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"mar-top-20 mar-btm-20 no-print loginPageHorizontal\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-holder\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"head-border-bottom\"\n    }, /*#__PURE__*/React.createElement(LoginFormHorizontalT, null)))));\n  }\n\n}\n\n;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"NotFound.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/layout/NotFound.jsx                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => NotFound\n});\nlet Component;\nmodule.link(\"react\", {\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet MainLayoutHeader;\nmodule.link(\"./MainLayoutHeader\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 1);\nlet MainLayoutFooter;\nmodule.link(\"./MainLayoutFooter\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 2);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 3);\n\nclass NotFound extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      id: \"main\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container text-center mar-top-20 pad-btm-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-holder\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mar-top-30\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Page Not Found\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"blue-btn btns backBtn\",\n      type: \"button\"\n    }, \"Try again\"))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n\n;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"pages\":{\"AdvertiseWithUs.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/pages/AdvertiseWithUs.jsx                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet ReactDOM;\nmodule.link(\"react-dom\", {\n  default(v) {\n    ReactDOM = v;\n  }\n\n}, 2);\nlet withTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  withTracker(v) {\n    withTracker = v;\n  }\n\n}, 3);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 4);\nlet MainLayoutHeader, LoginFormHorizontalT;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  },\n\n  LoginFormHorizontalT(v) {\n    LoginFormHorizontalT = v;\n  }\n\n}, 5);\nlet Collections;\nmodule.link(\"../../api/collections\", {\n  Collections(v) {\n    Collections = v;\n  }\n\n}, 6);\nif (Meteor.isClient) Session.set('subscriptionsReady', false);\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n} // function getAreas(countySelected) {\n//     var distinctEntries = _.uniq(Collections.Areas.find({County:countySelected}, {\n//         sort: {Area: 1}, fields: {Area: true}\n//     }).fetch().map(function(x) {\n//         return x.Area;\n//     }), true);\n//     allareas = []\n//     for(var i=0;i< distinctEntries.length;i++){\n//         if(!distinctEntries[i])continue;\n//         allareas.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n//     }\n//     return allareas;\n// }\n\n\nsearialisedAdvertiseForm = '';\n\nfunction saveToLocalStorage() {\n  searialisedAdvertiseForm = $('#advertiseWithUsFormCF').serializeArray();\n\n  if (localStorage) {\n    // localStorage.searialisedAdvertiseForm=searialisedAdvertiseForm// doesn' work as it saves as string, but we need to store as object\n    localStorage.advertisewithusFormData = {};\n    localStorage.advertisewithusFormData_address = $(\"input[name='address.address']\").val();\n    localStorage.advertisewithusFormData_price = $(\"input[name='price']\").val();\n    localStorage.advertisewithusFormData_county = $(\"select[name='address.county']\").val();\n    localStorage.advertisewithusFormData_area = $(\"select[name='address.area']\").val();\n    localStorage.advertisewithusFormData_type = $(\"select[name='type']\").val();\n    localStorage.advertisewithusFormData_furnished = $(\"select[name='furnished']\").val();\n    localStorage.advertisewithusFormData_baths = $(\"input[name='baths']\").val();\n    localStorage.advertisewithusFormData_numBedRoomCount = $(\"input[name='numBedRoomCount']\").val();\n  }\n}\n\nclass AdvertiseWithUs extends Component {\n  constructor(props) {\n    super(props);\n    this.components = {\n      c1: AwsStep1,\n      c2: AwsStep2,\n      AwsStep1: AwsStep1,\n      AwsStep2: AwsStep2,\n      AwsStep3: AwsStep3\n    };\n  }\n\n  render() {\n    const self = this;\n    const TagName = this.components[this.props.curStepComponent];\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"video-div\",\n      style: {\n        display: \"none\"\n      }\n    }, /*#__PURE__*/React.createElement(\"iframe\", {\n      width: \"560\",\n      height: \"315\",\n      src: \"https://www.youtube.com/embed/L689NIDwFdc?autoplay=1&rel=0\",\n      frameBorder: \"0\",\n      allowFullScreen: true\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"mar-top-20 mar-btm-20\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container background-white \"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-holder mar-top-20 pad-btm-20\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"autoFrm\"\n    }, /*#__PURE__*/React.createElement(TagName, null))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n\nmodule.exportDefault(withTracker(() => {\n  if (Meteor.isClient) {\n    var pageno = FlowRouter.getParam('pageno');\n    if (!pageno) pageno = 1;\n    var loginFlowComplete = Session.get('loginFlowComplete');\n\n    if (pageno == 2 && loginFlowComplete) {\n      FlowRouter.go('advertisewithus', {\n        pageno: 3\n      });\n      Session.set('loginFlowComplete', undefined);\n      if (typeof fbq !== 'undefined') fbq('track', 'Lead');\n      if (typeof ga !== 'undefined') ga('send', 'event', 'AdvertiseWithUsPage', 'UserLoginCompleted', 'User login / signup');\n    }\n  }\n\n  return {};\n})(AdvertiseWithUs));\n\nclass AwsStep1 extends Component {\n  componentDidMount() {\n    setTimeout(function () {\n      try {\n        $.fancybox({\n          'padding': 0,\n          'href': '#video-div'\n        });\n      } catch (e) {}\n    }, 3000);\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \"Advertise your property to rent for FREE!\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, \"List your property to rent in SpotMyCrib. Let thousands of verified tenants apply for your letting. Choose if you are a landlord, agent or the current tenant looking for a replacement so you can move. \"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, \"Enter the details of the property below and click submit.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(AdvertiseWithUsFormT, null));\n  }\n\n}\n\nclass AwsStep2 extends Component {\n  constructor(props) {\n    super(props);\n    this.backBtnHandler = this.backBtnHandler.bind(this);\n  }\n\n  backBtnHandler() {\n    FlowRouter.go('advertisewithus');\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \"Advertise your property to rent (step 2 of 3)\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:void(0)\",\n      className: \"backBtn\",\n      onClick: this.backBtnHandler\n    }, \"<< Back to step 1\"), /*#__PURE__*/React.createElement(\"p\", null, \"Connect your advert to your account. Login now or sign up with your social account. \", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(LoginFormHorizontalT, {\n      isLandLordMode: true\n    }));\n  }\n\n}\n\nclass AwsStep3 extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      propertyId: '',\n      auctionId: '',\n      myPropertyLink: ''\n    };\n    this.backBtnHandler = this.backBtnHandler.bind(this);\n    this.addPropImagesHandler = this.addPropImagesHandler.bind(this);\n  }\n\n  backBtnHandler() {\n    FlowRouter.go('advertisewithus');\n  }\n\n  addPropImagesHandler() {\n    if (typeof ga !== 'undefined') ga('send', 'event', 'AdvertiseWithUsPage', 'addPropertyImagesBtnClick', 'AddPropertyImages button clicked.');\n    Session.set('OpenImageUploader', true);\n    Session.set('fromAdvertiseWithUsPage', true);\n    FlowRouter.go('account/editproperty', {\n      id: this.state.propertyId\n    });\n  }\n\n  myPropertyLink() {\n    var propertyId = this.state.propertyId;\n    if (!propertyId) return '';\n    var auctionId = this.state.auctionId;\n    if (!auctionId) return '';\n    var prop = Collections.Properties.findOne(propertyId);\n    if (!prop) return '';\n    var auction = Collections.Auctions.findOne({\n      _id: auctionId\n    });\n    if (!auction) return '';\n    return FlowRouter.path('rent', {\n      slug: prop.slug,\n      key: auction.lettingAuctionCode\n    });\n  }\n\n  componentDidMount() {\n    if (Meteor.isClient) {\n      var user = Meteor.user();\n\n      if (!user) {\n        //\n        FlowRouter.go('advertisewithus', {\n          pageno: 2\n        });\n        return;\n      }\n\n      if (!searialisedAdvertiseForm) {\n        FlowRouter.go('advertisewithus');\n        return;\n      }\n\n      this.addPropertyCallback = function (error, propertyId) {\n        if (error) {\n          console.log(error);\n          var tmp = Session.get(\"showErrorDlg\");\n          if (!tmp) tmp = [];\n          var msg = 'An error occurred.';\n          if (error.reason) msg += ' ' + error.reason + '.';else if (error.message) msg += ' ' + error.message + '.';\n          tmp.push(msg);\n          Session.set(\"showErrorDlg\", tmp);\n          return;\n        }\n\n        this.setState({\n          propertyId: propertyId\n        });\n        Meteor.subscribe('editProperty', propertyId); //Can also be used for advertisewithus\n\n        this.addAdvertisementFormCallback = function (error, auctionId) {\n          if (error) {\n            console.log(error); //    validator.showErrors({\n            //         email: error.reason\n            //     });\n\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            var msg = 'An error occurred.';\n            if (error.reason) msg += ' ' + error.reason + '.';else if (error.message) msg += ' ' + error.message + '.';\n            tmp.push(msg);\n            Session.set(\"showErrorDlg\", tmp);\n            return;\n          }\n\n          console.log('addAdvertisement created successfully');\n          console.log(auctionId);\n          var templateInstance = this;\n          this.setState({\n            auctionId: auctionId\n          }, function () {\n            var propertyId = templateInstance.state.propertyId;\n            if (!propertyId) return '';\n            var auctionId = templateInstance.state.auctionId;\n            if (!auctionId) return '';\n            var prop = Collections.Properties.findOne({\n              _id: propertyId\n            });\n            if (!prop) return '';\n            var auction = Collections.Auctions.findOne({\n              _id: auctionId\n            });\n            if (!auction) return '';\n            var myPropertyLink = FlowRouter.url('rent', {\n              slug: prop.slug,\n              key: auction.lettingAuctionCode\n            });\n            this.setState({\n              myPropertyLink: myPropertyLink\n            });\n          });\n        };\n\n        this.addAdvertisementFormCallback = this.addAdvertisementFormCallback.bind(this);\n        Meteor.call('addAdvertisement', searialisedAdvertiseForm, propertyId, this.addAdvertisementFormCallback);\n      };\n\n      this.addPropertyCallback = this.addPropertyCallback.bind(this);\n      Meteor.call('addProperty', searialisedAdvertiseForm, this.addPropertyCallback);\n    }\n  } //todo: this is page is not developed. So finish it.\n\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \"Congratulations! Your property is now live.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:void(0)\",\n      className: \"backBtn\",\n      onClick: this.backBtnHandler\n    }, \"<< Back to step 1\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        margin: '10px 0 10px 0px'\n      }\n    }, \"Choose add property images button below to add images to your advert to make it clear and attractive. Add description and choose amenities available by choosing edit option below. Choose preview below to view it, use the link from the preview window to share it with others. \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signin-form cf-1\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clearfix\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-full-width\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btns blue-btn addPropImages\",\n      onClick: self.addPropImagesHandler\n    }, \"Add property images\"), self.state.propertyId ? /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('account/editproperty', {\n        id: self.state.propertyId\n      }),\n      className: \"btns transparent-btn mar-left-10\"\n    }, \"Edit property\") : \"\", /*#__PURE__*/React.createElement(\"a\", {\n      href: self.state.myPropertyLink,\n      target: \"_blank\",\n      className: \"btns blue-btn mar-left-10\"\n    }, \"Preview property\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\"\n    }))), /*#__PURE__*/React.createElement(\"h2\", null, \"Whats next?\"), /*#__PURE__*/React.createElement(\"p\", null, \"Visit \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('account/myProperties')\n    }, \"my properties\"), \" from \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('account/myProperties')\n    }, \"here\"), \" or from top menu to see the list of all your properties. Visit \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-text\"\n    }, \"view applications\"), \" from my properties to see list of all applications your property receive. .\"));\n  }\n\n}\n\nclass AdvertiseWithUsForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      addPropertyFormSaving: false,\n      numBedRoomCount: 0,\n      numBedRoomCountArr: 0,\n      counties: props.counties,\n      areas: props.areas,\n      countySelected: props.countySelected,\n      propertyTypes: props.propertyTypes\n    };\n    this.countySelectedHandler = this.countySelectedHandler.bind(this);\n    this.areaSelectedHandler = this.areaSelectedHandler.bind(this);\n    this.propertyTypeHandler = this.propertyTypeHandler.bind(this);\n  }\n\n  countySelectedHandler(event) {\n    var countySelected = event.target.value;\n    this.setState({\n      countySelected: countySelected\n    });\n    if (Meteor.isClient) Session.set('countySelected', countySelected); // if(countySelected) this.setState({areas:getAreas(countySelected)})\n\n    setTimeout(function () {\n      $('.areaSelected').val(\"\");\n      saveToLocalStorage();\n    }, 250);\n  }\n\n  areaSelectedHandler(event) {\n    this.setState({\n      areaSelected: event.target.value\n    });\n    setTimeout(saveToLocalStorage, 250);\n  }\n\n  propertyTypeHandler(event) {\n    this.setState({\n      propertyTypeSelected: event.target.value\n    });\n    setTimeout(saveToLocalStorage, 250);\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    this.setState({\n      addPropertyFormSaving: true\n    });\n    var instance = this;\n    setTimeout(function () {\n      instance.setState({\n        addPropertyFormSaving: false\n      });\n    }, 2000);\n    const address = ReactDOM.findDOMNode(this.refs.address).value.trim();\n    const price = ReactDOM.findDOMNode(this.refs.price).value.trim();\n    const county = ReactDOM.findDOMNode(this.refs.county).value.trim();\n  }\n\n  updateNumBedRoomCount(event) {\n    this.setState({\n      numBedRoomCount: event.target.value\n    });\n    var countArr = [];\n\n    for (var i = 0; i < event.target.value; i++) {\n      countArr.push({\n        'index': i + 1\n      });\n    }\n\n    this.setState({\n      numBedRoomCountArr: countArr\n    });\n  }\n\n  componentDidMount() {\n    // console.log(this.props)\n    var instance = this;\n\n    if (Meteor.isClient) {\n      var validator = $('#advertiseWithUsFormCF').validate({\n        submitHandler: function (event) {\n          // addPropertyFormSaving.set(true);//Not needed on this form.\n          console.log(\"You just submitted the 'addPropertyForm' form.\");\n          saveToLocalStorage();\n\n          if (instance.props.user) {\n            FlowRouter.go('advertisewithus', {\n              pageno: 3\n            });\n          } else {\n            FlowRouter.go('advertisewithus', {\n              pageno: 2\n            });\n          }\n        }\n      });\n    }\n\n    setTimeout(function () {\n      try {\n        jQuery(\"html,body\").animate({\n          scrollTop: 0\n        }, 250);\n      } catch (e) {\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n      }\n\n      instance.restoreLocalStorageSettings();\n    }, 500);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.propertyTypes.length) //update only if it has vals.\n      this.setState({\n        propertyTypes: nextProps.propertyTypes\n      });\n    if (nextProps.areas.length) //update only if it has vals.\n      this.setState({\n        areas: nextProps.areas\n      });\n  }\n\n  restoreLocalStorageSettings() {\n    var county = '';\n\n    if (localStorage) {\n      if (localStorage.advertisewithusFormData_county) {\n        county = localStorage.advertisewithusFormData_county;\n      } else if (localStorage.advertisewithusFormData_county === undefined) {\n        //Only for first time users\n        county = 'Dublin';\n      }\n\n      if (localStorage.advertisewithusFormData_type) {\n        this.setState({\n          propertyTypeSelected: localStorage.advertisewithusFormData_type\n        });\n      }\n    }\n\n    this.setState({\n      countySelected: county\n    });\n    if (Meteor.isClient) Session.set('countySelected', county); // if(county)this.setState({areas:getAreas(county)})\n\n    if (localStorage) if (localStorage.advertisewithusFormData_area) {\n      this.setState({\n        areaSelected: localStorage.advertisewithusFormData_area\n      });\n    }\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signin-form cf-1\",\n      id: \"advertiseWithUsFormCF\",\n      onSubmit: this.handleSubmit.bind(this)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clearfix\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input \"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"address.address\",\n      id: \"address.address\",\n      required: true,\n      ref: \"address\"\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      id: \"address.address-error\",\n      className: \"error\",\n      htmlFor: \"address.address\"\n    }, \"This field is required.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"label\", null, \"Name and Street *\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input \"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"price\",\n      required: true,\n      ref: \"price\"\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      id: \"address.address-error\",\n      className: \"error\",\n      htmlFor: \"address.address\"\n    }, \"This field is required.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"label\", null, \"Rent *\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"label\", null, \"County\"), /*#__PURE__*/React.createElement(\"select\", {\n      autoComplete: \"on\",\n      name: \"address.county\",\n      ref: \"county\",\n      required: true,\n      className: \"countySelected\",\n      onChange: this.countySelectedHandler,\n      value: this.state.countySelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"(Select One)\"), this.state.counties.map(function (c, i) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: c.value\n      }, c.label);\n    })), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"label\", null, \"Area *\"), /*#__PURE__*/React.createElement(\"select\", {\n      autoComplete: \"on\",\n      name: \"address.area\",\n      required: true,\n      className: \"areaSelected\",\n      onChange: this.areaSelectedHandler,\n      value: this.state.areaSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"(Select One)\"), this.state.areas.map(function (c, i) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: c.value\n      }, c.label);\n    })), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"label\", null, \"Property type *\"), /*#__PURE__*/React.createElement(\"select\", {\n      autoComplete: \"on\",\n      name: \"type\",\n      ref: \"type\",\n      required: true,\n      className: \"\",\n      onChange: this.propertyTypeHandler,\n      value: this.state.propertyTypeSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"(Select One)\"), this.state.propertyTypes.map(function (c, i) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: c.value\n      }, c.label);\n    })), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"label\", null, \"Furnished? *\"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      required: true,\n      autoComplete: \"on\",\n      ref: \"furnished\"\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"true\"\n    }, \"Yes\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"false\"\n    }, \"No\")), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input underline\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"baths\",\n      id: \"baths\",\n      required: true,\n      ref: \"baths\"\n    }), /*#__PURE__*/React.createElement(\"label\", null, \"Number of bathrooms\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input underline\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      name: \"numBedRoomCount\",\n      id: \"numBedRoomCount\",\n      required: true,\n      ref: \"numBedRoomCount\",\n      onChange: this.updateNumBedRoomCount.bind(this),\n      value: self.state.numBedRoomCount\n    }), /*#__PURE__*/React.createElement(\"label\", null, \"Number of bedrooms\"), /*#__PURE__*/React.createElement(\"span\", null)), self.state.numBedRoomCountArr ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-full-width\"\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"sep-label\"\n    }, \"Ensuite? \"), this.state.numBedRoomCountArr.map(function (arr, k) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: k,\n        className: \"styled-input-select styled-input-checkbox max-20\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"checkbox disabled\"\n      }, /*#__PURE__*/React.createElement(\"label\", null, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        name: \"bedrooms.\" + arr.index + \".ensuite\"\n      }), \"Bedroom \", arr.index, \" Ensuite?\")), /*#__PURE__*/React.createElement(\"label\", null, \"Bed Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        required: \"\",\n        autoComplete: \"\",\n        name: \"bedrooms.\" + arr.index + \".bedType\"\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"single\"\n      }, \"Single\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"double\"\n      }, \"Double\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"twin\"\n      }, \"Twin\")), /*#__PURE__*/React.createElement(\"span\", null));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\"\n    })) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-full-width\"\n    }, self.state.addPropertyFormSaving ? /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btns transparent-btn\"\n    }, \"Saving\") : /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btns blue-btn addPropertyFormSaveBtn\"\n    }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btns transparent-btn addPropertyFormCancelBtn mar-left-10\"\n    }, \"Cancel\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\"\n    })));\n  }\n\n}\n\nAdvertiseWithUsFormT = withTracker(() => {\n  var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n  var allareas = [];\n  var allcounties = [];\n  var countySelected = 'Dublin';\n  if (Meteor.isClient) if (Session.get('countySelected')) countySelected = Session.get('countySelected');\n\n  for (var i = 0; i < staticCounties.length; i++) {\n    if (!staticCounties[i]) continue;\n    allcounties.push({\n      label: staticCounties[i],\n      value: staticCounties[i]\n    });\n  }\n\n  var distinctEntries = _.uniq(Collections.Areas.find({}, {\n    //County:countySelected ; Dynamically load areas based on the subscription.\n    sort: {\n      Area: 1\n    },\n    fields: {\n      Area: true\n    }\n  }).fetch().map(function (x) {\n    return x.Area;\n  }), true);\n\n  allareas = [];\n\n  for (var i = 0; i < distinctEntries.length; i++) {\n    if (!distinctEntries[i]) continue;\n    allareas.push({\n      label: titleCase(distinctEntries[i]),\n      value: distinctEntries[i]\n    });\n  }\n\n  var Config = Collections.Config.find().fetch();\n  Config = Config[0];\n  var propertyTypes = [];\n  if (Config) for (var i = 0; i < Config.propertyType.length; i++) {\n    propertyTypes.push({\n      label: titleCase(Config.propertyType[i].name),\n      value: Config.propertyType[i].value\n    });\n  }\n  const AreasSub = Meteor.subscribe('Areas', '', '', countySelected, '', '', function () {\n    if (ConfigSub.ready()) Session.set('subscriptionsReady', true);\n  });\n  const ConfigSub = Meteor.subscribe('Config', function () {\n    if (AreasSub.ready()) Session.set('subscriptionsReady', true);\n  });\n  if (Meteor.isClient) Session.get('subscriptionsReady'); // Meteor.subscribe('Areas');\n  // Meteor.subscribe('Config');\n\n  Meteor.subscribe('userData');\n  return {\n    user: Meteor.user(),\n    counties: allcounties,\n    countySelected: countySelected,\n    areas: allareas,\n    propertyTypes: propertyTypes\n  };\n})(AdvertiseWithUsForm);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"BlogDetail.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/pages/BlogDetail.jsx                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet ReactDOM;\nmodule.link(\"react-dom\", {\n  default(v) {\n    ReactDOM = v;\n  }\n\n}, 2);\nlet withTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  withTracker(v) {\n    withTracker = v;\n  }\n\n}, 3);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 4);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 5);\nlet Collections;\nmodule.link(\"../../api/collections\", {\n  Collections(v) {\n    Collections = v;\n  }\n\n}, 6);\nif (Meteor.isClient) Session.set('subscriptionsReady', false);\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction dateFormat(text) {\n  var date = new Date(text);\n  if (date.toString() == \"Invalid Date\") return 'N/A';\n  return date.toDateString();\n}\n\nfunction chunkify(a, n, balanced) {\n  if (n < 2) return [a];\n  var len = a.length,\n      out = [],\n      i = 0,\n      size;\n\n  if (len % n === 0) {\n    size = Math.floor(len / n);\n\n    while (i < len) {\n      out.push(a.slice(i, i += size));\n    }\n  } else if (balanced) {\n    while (i < len) {\n      size = Math.ceil((len - i) / n--);\n      out.push(a.slice(i, i += size));\n    }\n  } else {\n    n--;\n    size = Math.floor(len / n);\n    if (len % size === 0) size--;\n\n    while (i < size * n) {\n      out.push(a.slice(i, i += size));\n    }\n\n    out.push(a.slice(size * n));\n  }\n\n  return out;\n}\n\nclass blogDetail extends Component {\n  constructor(props) {\n    super(props);\n    var current = FlowRouter.current();\n    this.currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params);\n    this.backBtnHandler = this.backBtnHandler.bind(this);\n    this.propsListHTML = '';\n    this.isServerSSRReq = '';\n  }\n\n  backBtnHandler() {\n    var prevRoute = Session.get('prevRoute');\n\n    if (prevRoute) {\n      FlowRouter.go(prevRoute.name, prevRoute.args);\n      Session.set('prevRoute', false);\n    } else {\n      FlowRouter.go(\"/account/myproperies/\", {\n        pageno: 1\n      });\n    }\n  }\n\n  componentDidMount() {\n    try {\n      jQuery(\"html,body\").animate({\n        scrollTop: 0\n      }, 250);\n    } catch (e) {\n      document.body.scrollTop = document.documentElement.scrollTop = 0;\n    }\n\n    setTimeout(function () {\n      try {\n        jQuery(\"html,body\").animate({\n          scrollTop: 0\n        }, 250);\n      } catch (e) {\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n      }\n    }, 500);\n  }\n\n  componentDidUpdate() {}\n\n  renderMain() {\n    let blog = this.props.data;\n    let blogImage = '';\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"main-sec\",\n      style: {\n        marginTop: 0\n      }\n    }, false ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"banner\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"imagessection\",\n      className: \"col-md-7 padding0\"\n    }, /*#__PURE__*/React.createElement(\"figure\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"banner-holder\"\n    }, blog.image ? /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(blog.image),\n      alt: 'Photo of ' + blog.title,\n      title: blog.title\n    }) : /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/no-photo.png\"),\n      alt: 'Image not available',\n      title: 'Image not available'\n    })), false ? /*#__PURE__*/React.createElement(\"figcaption\", null, /*#__PURE__*/React.createElement(\"h2\", null, this.props.isAgent.name), /*#__PURE__*/React.createElement(\"h5\", {\n      style: {\n        padding: 0\n      }\n    }, this.props.isAgent.address1)) : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5 purva-bg\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"purva\"\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      dangerouslySetInnerHTML: {\n        __html: blog.title\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blogContentArea\",\n      style: {\n        marginBottom: '10px'\n      },\n      dangerouslySetInnerHTML: {\n        __html: blog.excerpt\n      }\n    }))))))) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"detailssection\",\n      className: \"border mar-btm-20 background-white col-md-9 col-sm-12 col-xs-12\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"head-border-bottom head-border-bottomTitleArea\"\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      dangerouslySetInnerHTML: {\n        __html: blog.title\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"developer proj-dtls \"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clearfix\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 blogContentArea\",\n      style: {\n        marginBottom: '10px'\n      },\n      dangerouslySetInnerHTML: {\n        __html: blog.content\n      }\n    })))), this.props.data.related ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"\",\n      className: \"rightRelatedSection mar-btm-30 amenities col-md-3 col-sm-12 col-xs-12\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"head-border-bottom head-border-bottomTitleArea\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Similar Articles\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"background-white\",\n      style: {\n        float: 'left',\n        display: 'block'\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        margin: '0px 0px 5px 5px'\n      }\n    }, \"Below are few more articles similar to \", /*#__PURE__*/React.createElement(\"span\", {\n      dangerouslySetInnerHTML: {\n        __html: blog.title\n      }\n    })), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"thumbnails thumbRelated\"\n    }, this.props.data.related.map(function (relatedBlog, i) {\n      // style={{width: 250, height: 188}}\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: \"span4\",\n        key: i,\n        style: {\n          float: 'left'\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: FlowRouter.url('blogdetail', {\n          slug: relatedBlog.slug\n        })\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"thumbnail\"\n      }, relatedBlog.image.src ? /*#__PURE__*/React.createElement(\"img\", {\n        src: relatedBlog.image.src,\n        width: relatedBlog.image.width,\n        height: relatedBlog.image.height,\n        alt: relatedBlog.title,\n        className: \"img-responsive\"\n      }) : /*#__PURE__*/React.createElement(\"img\", {\n        src: cdnPath(\"/images/no-photo.png\"),\n        alt: 'Image not available',\n        className: \"img-responsive\",\n        style: {\n          width: 250,\n          height: 188\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        dangerouslySetInnerHTML: {\n          __html: relatedBlog.title\n        }\n      }))));\n    })))) : \"\", this.props.recentBlogs ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"realtedsection\",\n      className: \"background-white mar-btm-30 amenities col-md-12 col-sm-12 col-xs-12\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"head-border-bottom head-border-bottomTitleArea\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Recent Articles\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"amenitiy-block\",\n      style: {\n        float: 'left',\n        display: 'block'\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        margin: '0 20px'\n      }\n    }, \"Below are few more recenty updated articles similar to \", /*#__PURE__*/React.createElement(\"span\", {\n      dangerouslySetInnerHTML: {\n        __html: blog.title\n      }\n    })), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"thumbnails thumbRelated\"\n    }, this.props.recentBlogs.map(function (relatedBlog, i) {\n      // style={{width: 250, height: 188}}\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: \"span4\",\n        key: i,\n        style: {\n          float: 'left'\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: FlowRouter.url('blogdetail', {\n          slug: relatedBlog.slug\n        })\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"thumbnail\"\n      }, relatedBlog.image ? /*#__PURE__*/React.createElement(\"img\", {\n        src: relatedBlog.image,\n        style: {\n          width: 250,\n          height: 188\n        },\n        alt: relatedBlog.title,\n        className: \"img-responsive\"\n      }) : /*#__PURE__*/React.createElement(\"img\", {\n        src: cdnPath(\"/images/no-photo.png\"),\n        alt: 'Image not available',\n        className: \"img-responsive\",\n        style: {\n          width: 250,\n          height: 188\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        dangerouslySetInnerHTML: {\n          __html: relatedBlog.title\n        }\n      }))));\n    })))) : \"\")));\n  }\n\n  renderFullMain() {\n    if (Meteor.isClient) {\n      setTimeout(function () {\n        $('#lettingDetailCarousel').carousel();\n        $('#lettingDetailCarousel .carousel-control.right').unbind('click').bind('click', function () {\n          $('#lettingDetailCarousel').carousel('next');\n        });\n        $('#lettingDetailCarousel .carousel-control.left').unbind('click').bind('click', function () {\n          $('#lettingDetailCarousel').carousel('prev');\n        });\n      }, 1000);\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"property-details-page\",\n      id: 'props_list'\n    }, Meteor.isServer ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"isservercheckdiv\"\n    }) : \"\", /*#__PURE__*/React.createElement(\"section\", {\n      className: \"banner\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      \"aria-label\": \"breadcrumb\"\n    }, /*#__PURE__*/React.createElement(\"ol\", {\n      className: \"breadcrumb\",\n      style: {\n        margin: \"10px 0\"\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"breadcrumb-item\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('home')\n    }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"breadcrumb-item\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('bloghome')\n    }, \"Blogs\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"breadcrumb-item active\",\n      \"aria-current\": \"page\"\n    }, \"This Article\")))))), this.props.isSubsLoaded ? this.props.data ? this.renderMain() : /*#__PURE__*/React.createElement(\"section\", {\n      className: \"\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container text-center mar-top-20 pad-btm-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-holder\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mar-top-30\"\n    }, /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"strong\", null, \"This article is not found. Please check the url and try again.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('bloghome'),\n      className: \"blue-btn btns noPropBackBtn\"\n    }, \"Find recent articles\")))))) : /*#__PURE__*/React.createElement(\"section\", {\n      className: \"mar-top-20 mar-btm-20 no-print\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container text-center mar-top-20 pad-btm-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-holder\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mar-top-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: 'h2-div'\n    }, \"Loading...\"))))));\n  }\n\n  render() {\n    const self = this;\n\n    if (Meteor.isClient && this.propsListHTML == \"\") {\n      this.propsListHTML = $('#props_list').html();\n    }\n\n    if (Meteor.isClient) {\n      this.isServerSSRReq = $('#isservercheckdiv').html();\n      if (this.isServerSSRReq == \"\") this.isServerSSRReq = true;else this.isServerSSRReq = false;\n    } // if(this.propsListHTML) console.log(\"propsListHTML: \"+this.propsListHTML.length)\n\n\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), this.props.isSubsLoaded ? this.renderFullMain() : this.isServerSSRReq && this.propsListHTML ? /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: this.propsListHTML\n      }\n    }) : /*#__PURE__*/React.createElement(\"section\", {\n      className: \"mar-top-20 mar-btm-20 no-print\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container text-center mar-top-20 pad-btm-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-holder\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mar-top-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: 'h2-div'\n    }, \"Loading...\"))))), /*#__PURE__*/React.createElement(MainLayoutFooter, null));\n  }\n\n}\n\nmodule.exportDefault(withTracker(() => {\n  var slug = FlowRouter.getParam('slug');\n  if (!slug) return {\n    data: false,\n    isSubsLoaded: true\n  };\n  const viewBlogSub = Meteor.subscribe(\"viewBlog\", slug, function () {\n    Session.set('subscriptionsReady', true);\n  });\n  if (Meteor.isClient) Session.get('subscriptionsReady');\n\n  if (!viewBlogSub.ready()) {\n    return {\n      data: false,\n      isSubsLoaded: false\n    };\n  }\n\n  var blog = Collections.Blogs.find({\n    \"slug\": slug\n  }, {\n    limit: 1\n  }).fetch();\n\n  if (blog.length) {\n    blog = blog[0];\n  }\n\n  var recentBlogs = Collections.Blogs.find({\n    \"slug\": {\n      $not: slug\n    }\n  }, {\n    sort: {\n      updatedAt: -1\n    }\n  }).fetch();\n\n  if (!blog || blog.length == 0) {\n    //Blog not found\n    clearMeta();\n    DocHead.setTitle('Article not found | SpotMyCrib');\n    DocHead.addMeta({\n      name: \"description\",\n      content: \"\"\n    });\n    return {\n      data: false,\n      recentBlogs: recentBlogs,\n      isSubsLoaded: true\n    };\n  } else {\n    var title = blog.metaTitle; //Is Rental Cap Able to Control the Housing Market Crisis? - Blog - SpotMyCrib\n\n    var desc = blog.metaDesc;\n    clearMeta();\n    let titleTmp = title + ' | SpotMyCrib Blog';\n    if (titleTmp.length <= 75) title = titleTmp;\n    DocHead.setTitle(title);\n    DocHead.addMeta({\n      name: \"description\",\n      content: desc\n    });\n    var socialDesc = blog.metaDesc;\n    var socialTitle = blog.metaTitle;\n    var currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params);\n    DocHead.addMeta({\n      property: \"og:title\",\n      content: socialTitle\n    });\n    DocHead.addMeta({\n      property: \"og:description\",\n      content: socialDesc\n    });\n    DocHead.addMeta({\n      rel: \"canonical\",\n      href: currentURL\n    });\n    DocHead.addMeta({\n      property: \"og:type\",\n      content: \"article\"\n    });\n    DocHead.addMeta({\n      property: \"og:url\",\n      content: currentURL\n    });\n    DocHead.addMeta({\n      property: \"fb:app_id\",\n      content: '309356899476430'\n    });\n\n    try {\n      DocHead.addMeta({\n        property: \"og:image\",\n        content: blog.image\n      });\n    } catch (c) {//Putting this here is making FB take the first response from here. & its showing no image if if this meta is later updated. So better put it later after all rendering at a template level. For now lets not keep anywhere.\n      // DocHead.addMeta({name: \"og:image\", content: 'https://www.spotmycrib.ie/images/spot-my-crib-logo.png'  });\n    }\n  }\n\n  return {\n    data: blog,\n    recentBlogs: recentBlogs,\n    isSubsLoaded: true\n  };\n})(blogDetail));\n\nclass ImagesSlider extends Component {\n  constructor(props) {\n    super(props);\n    var current = FlowRouter.current();\n    this.currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params);\n  }\n\n  componentDidMount() {\n    $(document).ready(function () {\n      // $('#lettingDetailCarousel').first().addClass('active');//not needed as bug of isActive helper not working is fixed.\n      $('#imagessection .item img').width('100%');\n      var w = $('#imagessection .item img').first().width();\n      var h = w / 1.33;\n      if (h > 250) $('#imagessection .item img').height(w / 1.33);\n      setTimeout(function () {\n        $('#imagessection .item img').width('100%');\n        var w = $('#imagessection .item img').first().width();\n        var h = w / 1.33;\n        if (h > 250) $('#imagessection .item img').height();\n      }, 3000); // $('#lettingDetailCarousel').carousel();\n      // $(\"#lettingDetailCarousel\").swiperight(function() {\n      //     $(this).carousel('prev');\n      // });\n      // $(\"#lettingDetailCarousel\").swipeleft(function() {\n      //     $(this).carousel('next');\n      // });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"lettingDetailCarousel\",\n      className: \"carousel slide\",\n      \"data-ride\": \"carousel\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"carousel-inner\"\n    }, this.props.images ? this.props.images.map(function (image, i) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: 'item ' + (i == 0 ? 'active' : \"\")\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: image.url,\n        alt: image.altText,\n        title: image.altText,\n        className: \"img-responsive\"\n      }));\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item active\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/no-photo.png\"),\n      alt: 'Image not available',\n      title: 'Image not available',\n      className: \"img-responsive\"\n    }))), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"left carousel-control\",\n      href: \"javascript:void(0)\",\n      \"data-slide\": \"prev\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"glyphicon glyphicon-chevron-left\"\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"sr-only\"\n    }, \"Previous\")), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"right carousel-control\",\n      href: \"javascript:void(0)\",\n      \"data-slide\": \"next\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"glyphicon glyphicon-chevron-right\"\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"sr-only\"\n    }, \"Next\")));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"BlogHome.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/pages/BlogHome.jsx                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet withTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  withTracker(v) {\n    withTracker = v;\n  }\n\n}, 2);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 3);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 4);\nlet Collections;\nmodule.link(\"../../api/collections.js\", {\n  Collections(v) {\n    Collections = v;\n  }\n\n}, 5);\nif (Meteor.isClient) Session.set('subscriptionsReady', false);\nlet countsCollection = null;\n\nfunction dateFormat(text) {\n  var date = new Date(text);\n  if (date.toString() == \"Invalid Date\") return 'N/A';\n  return date.toDateString();\n}\n\nclass Pagination extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {// console.log(this.props)\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"nav\", null, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"pagination\"\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"page-item \" + self.props.pagination.prevPage.disabled\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"page-link\",\n      href: self.props.pagination.prevPage.href,\n      tabIndex: \"-1\",\n      onClick: self.props.handleChoosePage.bind(self, self.props.pagination.prevPage.prevPageNo, self.props.parent)\n    }, self.props.pagination.prevPage.text)), self.props.pagination.pages.map((page, i) => {\n      if (typeof page.current !== 'undefined' && page.current) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          className: \"page-item active\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          className: \"page-link\",\n          href: page.href\n        }, page.text, \" \", /*#__PURE__*/React.createElement(\"span\", {\n          className: \"sr-only\"\n        }, \"(current)\")));\n      } else {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          className: \"page-item\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          className: \"page-link\",\n          onClick: self.props.handleChoosePage.bind(self, page.text, self.props.parent),\n          href: page.href\n        }, page.text));\n      }\n    }), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"page-item \" + self.props.pagination.nextPage.disabled\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"page-link\",\n      href: self.props.pagination.nextPage.href,\n      onClick: self.props.handleChoosePage.bind(self, self.props.pagination.nextPage.nextPageNo, self.props.parent)\n    }, self.props.pagination.nextPage.text))));\n  }\n\n}\n\nclass BlogHome extends Component {\n  constructor(props) {\n    super(props);\n    let pBlogs = props.blogs;\n    if (!pBlogs) pBlogs = [];\n    let pTotalCount = props.totalCount;\n    if (!pTotalCount) pTotalCount = 0;\n    let pPagination = props.pagination;\n    if (!pPagination) pPagination = 0;\n    this.state = {\n      blogs: pBlogs,\n      totalCount: pTotalCount,\n      pagination: pPagination\n    };\n    this.propsListHTML = '';\n    this.isServerSSRReq = '';\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      blogs: nextProps.blogs,\n      totalCount: nextProps.totalCount,\n      pagination: nextProps.pagination\n    });\n  }\n\n  componentWillMount() {}\n\n  componentDidMount() {\n    const self = this;\n    setTimeout(function () {\n      try {\n        jQuery(\"html,body\").animate({\n          scrollTop: 0\n        }, 250);\n      } catch (e) {\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n      }\n    }, 500);\n  }\n\n  componentDidUpdate() {}\n\n  handleChoosePage(page, component) {\n    if (typeof page == \"undefined\") return; // var data = getSlugData();\n    // var slug = generateSlug(data);\n    //\n    // FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0], pageno: page}, slug[1]);\n    //\n    // component.setState({pagination: pagination()});\n  }\n\n  propGrid() {\n    const self = this;\n    let blogImage = '';\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, self.state.blogs.map((blog, i) => {\n      if (blog.image) {\n        let tmp = blog.image.split('?');\n        blogImage = tmp[0] + \"?resize=200%2C140\";\n      } else {\n        blogImage = '';\n      }\n\n      return /*#__PURE__*/React.createElement(\"section\", {\n        key: i,\n        className: \"main-holder border-top mar-btm-10\",\n        id: true\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"act-box\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"background-white\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"logo-holder-div\",\n        style: {\n          padding: '10px 20px'\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"logo-holder\"\n      }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n        href: FlowRouter.url('blogdetail', {\n          slug: blog.slug\n        })\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"pad-btm-0\",\n        dangerouslySetInnerHTML: {\n          __html: blog.title\n        }\n      }))))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"apt-info1 background-white clearfix\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"media\"\n      }, blogImage ? /*#__PURE__*/React.createElement(\"a\", {\n        className: \"pull-left\",\n        href: FlowRouter.url('blogdetail', {\n          slug: blog.slug\n        })\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"media-object\",\n        src: blogImage,\n        alt: blog.title\n      })) : /*#__PURE__*/React.createElement(\"img\", {\n        src: cdnPath(\"/images/no-photo.png\"),\n        alt: 'Image not available',\n        className: \"img-responsive\"\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"media-body\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-left mar-btm-10\",\n        dangerouslySetInnerHTML: {\n          __html: blog.excerpt\n        }\n      }), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"list-inline list-unstyled\"\n      }, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"glyphicon glyphicon-calendar\"\n      }), \" \", dateFormat(blog.created), \" \")))))))));\n    }));\n  }\n\n  mainAllPage() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"props_list\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"logo-below-div value-div\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo-holder-div\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo-holder\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        marginBottom: 10\n      }\n    }, \"Blog \\u2013 SpotMyCrib\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"h4-div\",\n      style: {\n        paddingBottom: 5\n      }\n    }, \"Property renting tips, management and much more\"))))))), self.state.totalCount == 0 && this.props.isSubsLoaded ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container text-center mar-top-20 pad-btm-30\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"No blogs found.\")) : \"\", self.state.totalCount > 0 ? /*#__PURE__*/React.createElement(\"section\", {\n      className: \"paginationArea mar-top-20 \"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: 'mar-btm-20'\n    }, \"Found total \", self.state.totalCount ? self.state.totalCount : 'no', \" articles. Browse the latest property news, renting tips, management and much more. Use the navigation below to find more.\"), /*#__PURE__*/React.createElement(Pagination, {\n      pagination: self.state.pagination,\n      handleChoosePage: self.handleChoosePage,\n      parent: self\n    }))))) : \"\", Meteor.isServer ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"isservercheckdiv\"\n    }) : \"\", self.state.totalCount > 0 ? /*#__PURE__*/React.createElement(\"section\", {\n      className: \"proplist-sec property-list\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, this.propGrid())) : \"\", self.state.totalCount > 0 ? /*#__PURE__*/React.createElement(\"section\", {\n      className: \"paginationArea\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, /*#__PURE__*/React.createElement(Pagination, {\n      pagination: self.state.pagination,\n      handleChoosePage: self.handleChoosePage,\n      parent: self\n    }))))) : \"\");\n  }\n\n  render() {\n    const self = this;\n    let totalCount = 0;\n\n    if (Meteor.isClient && this.propsListHTML == \"\") {\n      this.propsListHTML = $('#props_list').html();\n    }\n\n    if (Meteor.isClient) {\n      this.isServerSSRReq = $('#isservercheckdiv').html();\n      if (this.isServerSSRReq == \"\") this.isServerSSRReq = true;else this.isServerSSRReq = false;\n    } // if(this.propsListHTML) console.log(\"propsListHTML: \"+this.propsListHTML.length)\n\n\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), this.props.isSubsLoaded && self.state.blogs ? this.mainAllPage() : this.isServerSSRReq && this.propsListHTML ? /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: this.propsListHTML\n      }\n    }) : /*#__PURE__*/React.createElement(\"section\", {\n      className: \"mar-top-20 mar-btm-20 no-print\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container text-center mar-top-20 pad-btm-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-holder\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mar-top-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: 'h2-div'\n    }, \"Loading...\"))))), /*#__PURE__*/React.createElement(MainLayoutFooter, null));\n  }\n\n}\n\n;\nmodule.exportDefault(withTracker(() => {\n  function getPaginationData(totalResultsCount, currentPageNo, resultsPerPage) {\n    currentPageNo = parseInt(currentPageNo);\n    var pages = [],\n        prevPage = {},\n        nextPage = {};\n    var pgMin = currentPageNo - 4,\n        pgMax = currentPageNo + 5,\n        maxPages = Math.ceil(totalResultsCount / resultsPerPage);\n\n    if (!Number.isInteger(currentPageNo)) {\n      return {\n        \"prevPage\": prevPage,\n        \"pages\": pages,\n        \"nextPage\": nextPage\n      };\n    }\n\n    if (pgMin < 1) pgMin = 1;\n    if (pgMax < 1) pgMax = 1;\n    if (maxPages < 1) maxPages = 1;\n    if (pgMin > maxPages) currentPageNo = maxPages;\n    let tmp = {};\n    let href = '';\n    let cRoute = FlowRouter.current().route.name,\n        cParams = FlowRouter.current().params,\n        cQueryParams = FlowRouter.current().queryParams;\n\n    for (var i = pgMin; i <= maxPages; i++) {\n      cParams.pageno = i;\n      tmp = {\n        \"href\": FlowRouter.url(cRoute, cParams, cQueryParams),\n        \"text\": i\n      };\n\n      if (i == currentPageNo) {\n        tmp['href'] = 'javascript:void(0);';\n        tmp['current'] = true;\n      }\n\n      pages.push(tmp);\n    }\n\n    var prevPageNo = currentPageNo - 1,\n        nextPageNo = currentPageNo + 1;\n\n    if (prevPageNo < 1) {\n      prevPage['href'] = 'javascript:void(0)';\n      prevPage['text'] = 'Previous';\n      prevPage['disabled'] = 'disabled';\n    } else {\n      cParams.pageno = prevPageNo;\n      prevPage['href'] = FlowRouter.url(cRoute, cParams, cQueryParams), prevPage['prevPageNo'] = prevPageNo;\n      prevPage['text'] = 'Previous';\n      prevPage['disabled'] = '';\n    }\n\n    if (nextPageNo > maxPages) nextPageNo = maxPages;\n\n    if (nextPageNo == currentPageNo) {\n      nextPage['href'] = 'javascript:void(0)';\n      nextPage['text'] = 'Next';\n      nextPage['disabled'] = 'disabled';\n    } else {\n      cParams.pageno = nextPageNo;\n      nextPage['href'] = FlowRouter.url(cRoute, cParams, cQueryParams), nextPage['text'] = 'Next';\n      nextPage['nextPageNo'] = nextPageNo;\n      nextPage['disabled'] = '';\n    }\n\n    return {\n      \"prevPage\": prevPage,\n      \"pages\": pages,\n      \"nextPage\": nextPage\n    };\n  }\n\n  var pageno = FlowRouter.getParam('pageno');\n  if (!pageno) pageno = 1;\n  var resperpage = 6; // var query = FlowRouter.current().queryParams;\n\n  var current = FlowRouter.current();\n  var currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params, FlowRouter.current().queryParams);\n  var sortOptions = {\n    updatedAt: -1\n  };\n  const bBlogsSub = Meteor.subscribe(\"browseBlogs\", {\n    viewName: 'browseBlogs.view',\n    pageno: pageno,\n    resperpage: resperpage\n  }, function () {\n    if (bBlogsSub.ready() && Meteor.isClient) Session.set('subscriptionsReady', true);\n  });\n  Meteor.subscribe(\"total-blogs-count\", {\n    viewName: 'browseBlogs.view',\n    pageno: pageno,\n    resperpage: resperpage\n  });\n\n  if (Meteor.isServer) {\n    if (countsCollection == null) countsCollection = new Mongo.Collection('counts');\n\n    Counts.get = function countsGet(name) {\n      const count = countsCollection.findOne(name);\n      return count && count.count || 0;\n    };\n\n    Counts.has = function countsHas(name) {\n      return !!countsCollection.findOne(name);\n    };\n\n    totalCount = Counts.get(\"total-blogs-count\");\n  } else {\n    totalCount = Counts.get(\"total-blogs-count\");\n  } // Meteor.subscribe('userData');\n  // Meteor.subscribe('Config');\n\n\n  if (Meteor.isClient) Session.get('subscriptionsReady');\n\n  if (!bBlogsSub.ready()) {\n    return {\n      isSubsLoaded: false\n    };\n  }\n\n  return {\n    totalCount: totalCount,\n    pagination: getPaginationData(totalCount, pageno, 6),\n    blogs: Collections.Blogs.find().fetch(),\n    isSubsLoaded: true\n  };\n})(BlogHome));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Home.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/pages/Home.jsx                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet withTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  withTracker(v) {\n    withTracker = v;\n  }\n\n}, 2);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 3);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 4);\nlet Collections;\nmodule.link(\"../../api/collections\", {\n  Collections(v) {\n    Collections = v;\n  }\n\n}, 5);\nif (Meteor.isClient) Session.set('subscriptionsReady', false);\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction saveToLocalStorage() {\n  if (Meteor.isServer) return;\n\n  if (localStorage) {\n    // if($( \".countySelected\" ).val().toString().trim()) //It needs to work even all options are reset, i.e its empty.\n    localStorage.homePageMainFormData_county = $(\".countySelected\").val(); // if($( \".areaSelected\" ).val().toString().trim())//it needs to reset to empty\n\n    localStorage.homePageMainFormData_area = $(\".areaSelected\").val();\n    var tmp = $(\"input:radio[name=propertyType]:checked\").val();\n    if (tmp) localStorage.homePageMainFormData_propertyType = tmp;\n    localStorage.homePageMainFormData_maxRent = $('.maxRent').val();\n  }\n}\n\nfunction slugify(text) {\n  if (!text) return '';\n  const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/,:;';\n  const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return text.toString().toLowerCase().replace(/\\s+/g, '') // Replace spaces with \"\"\n  .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n  .replace(/&/g, '-and-') // Replace & with ''\n  .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single ''\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n}\n\nfunction generateSlug(curURL) {\n  var propertyType = curURL.propertyType;\n  var county = curURL.county;\n  var area = curURL.area;\n  var maxRent = curURL.maxRent;\n  var country = curURL.country; // const territory = target.territory.value;\n\n  var slug = '';\n  var query = [];\n  if (propertyType) propertyType = propertyType.replace(/\\s+/g, '_');\n  if (county) county = county.replace(/\\s+/g, '_');\n  if (area) area = area.replace(/\\s+/g, '_');\n  if (country) country = country.replace(/\\s+/g, '_');\n  if (propertyType) slug = propertyType + \"-for-\";\n  slug += \"rent\"; // if(areaSelected||countySelected||country)\n\n  slug += \"-in-\";\n  if (!county) area = '';\n  if (area) slug += area;\n  if (area && county) slug += \"-\";\n  if (county) slug += county;\n  if (country) slug += \"-\" + country;\n  var range = [{\n    cur: \"eur\",\n    min: 400,\n    max: 10000\n  }];\n  var selectedCur = range[0];\n  if (maxRent && maxRent != selectedCur.max) query[\"maxRent\"] = maxRent; // apartment-for-rent-in-dundrum-dublin-ireland\n  // apartment-for-rent-in-donnybroke-london-uk\n  // rent/apartment/dundrum/dublin\n  // rent/apartment/donnybroke/london/england/uk/\n\n  return [slugify(slug), query];\n}\n\nfunction chunkify(a, n, balanced) {\n  if (n < 2) return [a];\n  var len = a.length,\n      out = [],\n      i = 0,\n      size;\n\n  if (len % n === 0) {\n    size = Math.floor(len / n);\n\n    while (i < len) {\n      out.push(a.slice(i, i += size));\n    }\n  } else if (balanced) {\n    while (i < len) {\n      size = Math.ceil((len - i) / n--);\n      out.push(a.slice(i, i += size));\n    }\n  } else {\n    n--;\n    size = Math.floor(len / n);\n    if (len % size === 0) size--;\n\n    while (i < size * n) {\n      out.push(a.slice(i, i += size));\n    }\n\n    out.push(a.slice(size * n));\n  }\n\n  return out;\n}\n\nfunction generateSlug(curURL) {\n  var propertyType = curURL.propertyType;\n  var county = curURL.county;\n  var area = curURL.area;\n  var maxRent = curURL.maxRent;\n  var country = curURL.country;\n  var bedCount = curURL.bedCount;\n  var luxurySort = curURL.luxurySort;\n  var cheapSort = curURL.cheapSort; // const territory = target.territory.value;\n\n  var slug = '';\n  var query = {};\n  if (propertyType) propertyType = propertyType.replace(/\\s+/g, '_');\n  if (county) county = county.replace(/\\s+/g, '_');\n  if (area) area = area.replace(/\\s+/g, '_');\n  if (country) country = country.replace(/\\s+/g, '_');\n  if (propertyType) slug = propertyType + \"-for-\";\n  slug += \"rent\"; // if(areaSelected||countySelected||country)\n\n  slug += \"-in-\";\n  if (!county) area = '';\n  if (area) slug += area;\n  if (area && county) slug += \"-\";\n  if (county) slug += county;\n  if (bedCount) query.bedCount = bedCount;\n  if (luxurySort) query.luxurySort = 1;\n  if (cheapSort) query.cheapSort = 1;\n  if (country) slug += \"-\" + country;else slug += \"-ireland\";\n  var range = [{\n    cur: \"eur\",\n    min: 400,\n    max: 10000\n  }];\n  var selectedCur = range[0];\n  if (maxRent && maxRent != selectedCur.max) query.maxRent = maxRent; // apartment-for-rent-in-dundrum-dublin-ireland\n  // apartment-for-rent-in-donnybroke-london-uk\n  // rent/apartment/dundrum/dublin\n  // rent/apartment/donnybroke/london/england/uk/\n\n  return [slugify(slug), query];\n}\n\nfunction generateSlugURL(curURL) {\n  var ret = generateSlug(curURL);\n  return FlowRouter.url('b', {\n    slug: ret[0]\n  }, ret[1]);\n}\n\nfunction fixImageSize() {\n  var avgW = 0;\n  $('.image-holder img').each(function () {\n    if (!avgW) avgW = $(this).width();else {\n      avgW += $(this).width();\n      avgW = avgW / 2;\n    }\n  });\n  if (!avgW) avgW = 250;\n  $('.image-holder img').width('100%');\n  $('.image-holder img').height(avgW * 0.7);\n}\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    var searchCrumbs = {\n      c1: [],\n      c2: [],\n      c3: []\n    };\n    var fCrumbs = {\n      c1: [],\n      c2: [],\n      c3: []\n    };\n    var areaCrumbs = {\n      c1: [],\n      c2: [],\n      c3: []\n    };\n    var countyCrumbs = {\n      c1: [],\n      c2: [],\n      c3: []\n    };\n\n    if (props.searchCrumbs) {\n      var chunks = chunkify(props.searchCrumbs, 3, true);\n      searchCrumbs = {\n        c1: chunks[0],\n        c2: chunks[1],\n        c3: chunks[2]\n      };\n    }\n\n    if (props.fCrumbs) {\n      var chunks = chunkify(props.fCrumbs, 3, true);\n      fCrumbs = {\n        c1: chunks[0],\n        c2: chunks[1],\n        c3: chunks[2]\n      };\n    }\n\n    if (props.areaCrumbs) {\n      var chunks = chunkify(props.areaCrumbs, 3, true);\n      areaCrumbs = {\n        c1: chunks[0],\n        c2: chunks[1],\n        c3: chunks[2]\n      };\n    }\n\n    if (props.countyCrumbs) {\n      var chunks = chunkify(props.countyCrumbs, 3, true);\n      countyCrumbs = {\n        c1: chunks[0],\n        c2: chunks[1],\n        c3: chunks[2]\n      };\n    }\n\n    this.state = {\n      'searchCrumbs': searchCrumbs,\n      fCrumbs: fCrumbs,\n      areaCrumbs: areaCrumbs,\n      countyCrumbs: countyCrumbs\n    };\n    this.searchCrumbsLoaded = false;\n  }\n\n  componentWillMount() {\n    if (Meteor.isClient) Session.set('showLoginInPlace', false); // console.log('In componentWillMount');\n  }\n\n  componentDidMount() {\n    // console.log('In componentDidMount');\n    if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {\n      $('select').addClass('safariSelect'); //css('-moz-appearance','none');\n    }\n\n    $('.iamarenterbtn').click(function (e) {\n      e.preventDefault();\n      $('html,body').animate({\n        scrollTop: $(this.hash).offset().top\n      }, 500, function () {\n        $(\".bigsearchbox\").css({\n          border: '0 solid red',\n          'background-color': \"rgba(0, 0, 0, 0.8)\"\n        }).animate({\n          borderWidth: 2,\n          'background-color': \"rgba(0, 0, 0, 1)\"\n        }, 500, function () {\n          $(\".bigsearchbox\").animate({\n            borderWidth: 0,\n            'background-color': \"rgba(0, 0, 0, 0.8)\"\n          }, 500);\n        });\n      });\n    });\n\n    if (Meteor.isClient) {\n      setTimeout(function () {\n        if (window.location.hash) {\n          jQuery(\"html,body\").animate({\n            scrollTop: $(window.location.hash).offset().top\n          }, 250);\n        }\n      }, 2000);\n    }\n  }\n\n  componentDidUpdate() {}\n\n  crumbsUpdate() {\n    if (!this.searchCrumbsLoaded) {\n      var searchCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var fCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var areaCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var countyCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n\n      if (this.props.searchCrumbs) {\n        var chunks = chunkify(this.props.searchCrumbs, 3, true);\n        searchCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        };\n        this.searchCrumbsLoaded = true;\n      }\n\n      if (this.props.fCrumbs) {\n        var chunks = chunkify(this.props.fCrumbs, 3, true);\n        fCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        };\n        this.searchCrumbsLoaded = true;\n      }\n\n      if (this.props.areaCrumbs) {\n        var chunks = chunkify(this.props.areaCrumbs, 3, true);\n        areaCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        };\n        this.searchCrumbsLoaded = true;\n      }\n\n      if (this.props.countyCrumbs) {\n        var chunks = chunkify(this.props.countyCrumbs, 3, true);\n        countyCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        };\n        this.searchCrumbsLoaded = true;\n      }\n\n      if (this.searchCrumbsLoaded) //Update the state only once; when its true\n        this.setState({\n          'searchCrumbs': searchCrumbs,\n          fCrumbs: fCrumbs,\n          areaCrumbs: areaCrumbs,\n          countyCrumbs: countyCrumbs\n        });\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // console.log(nextProps)\n    // console.log(this)\n    // console.log('In componentWillReceiveProps');\n    this.crumbsUpdate();\n  }\n\n  handleJoinNow() {\n    Session.set('showForgotForm', false);\n    Session.set('isLandLordMode', true);\n    Session.set('showSignupForm', true);\n    Session.set('showLoginSignupFancyBoxDialog', true);\n    Session.set('showLoginDialog', true);\n  }\n\n  handlePostYourProperty(event) {\n    event.preventDefault();\n    var prevRoute = {\n      name: FlowRouter.current().route.name,\n      args: {\n        scrollTo: 0\n      },\n      instructions: {\n        openPostNewProp: true\n      }\n    };\n    Session.set('prevRoute', prevRoute);\n    FlowRouter.go('account/myProperties');\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index home\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"\",\n      id: \"searchform\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index-main-banner\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index-bnr-cont\"\n    }, true ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"homeSliderParent\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"homeSlider\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"carousel-inner\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item active\"\n    }, /*#__PURE__*/React.createElement(\"p\", null, \"Best properties to rent in Ireland. Find them, right here!\"))))) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home-banner\",\n      style: {\n        marginBottom: \"50px\"\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btns green-btn \",\n      href: FlowRouter.url('estateagent'),\n      style: {\n        fontSize: '15px'\n      }\n    }, \"I'm a Landlord\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btns transparent-btn iamarenterbtn\",\n      href: \"#searchform\"\n    }, \"I'm a Renter\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-places home-page-box-places bigsearchbox\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(HomePageMainFormT, null)))))))), /*#__PURE__*/React.createElement(HomePageLatestPropsT, null), true ? /*#__PURE__*/React.createElement(\"section\", {\n      id: \"homeLinks\",\n      className: \"sec-holder how-it-works\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"\",\n      className: \"mar-btm-30 amenities\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      style: {\n        paddingTop: 0\n      }\n    }, this.props.fCrumbs === undefined || this.props.fCrumbs.length == 0 ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      className: 'bottomcrumbs row'\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Browse properties to rent in top cities\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bottom-line\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 col-sm-12 col-xs-12 pad0\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.fCrumbs.c1 ? this.state.fCrumbs.c1.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.fCrumbs.c2 ? this.state.fCrumbs.c2.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.fCrumbs.c3 ? this.state.fCrumbs.c3.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\", /*#__PURE__*/React.createElement(\"a\", {\n      style: {\n        display: \"block\"\n      },\n      className: \"iamarenterbtn\",\n      href: \"#searchform\"\n    }, \"More\")))), this.props.countyCrumbs === undefined || this.props.countyCrumbs.length == 0 ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      className: 'bottomcrumbs row mar-top-30'\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bottom-line\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 col-sm-12 col-xs-12 pad0\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.countyCrumbs.c1 ? this.state.countyCrumbs.c1.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.countyCrumbs.c2 ? this.state.countyCrumbs.c2.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.countyCrumbs.c3 ? this.state.countyCrumbs.c3.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\", /*#__PURE__*/React.createElement(\"a\", {\n      style: {\n        display: \"block\"\n      },\n      className: \"iamarenterbtn\",\n      href: \"#searchform\"\n    }, \"More\")))))))))) : \"\", /*#__PURE__*/React.createElement(\"section\", {\n      id: \"whatis\",\n      className: \"sec-holder how-it-works whatissmc\",\n      style: {\n        background: 'white'\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"What is SpotMyCrib?\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bottom-line\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"p\", null, \"SpotMyCrib is the safest platform to find your next rental home. It brings 100% verified landlords with genuine rentals to you. Just search for your ideal home, apply, get screened, e-sign your lease and pay rent online.\"), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#how-works\",\n      className: \"scroll1 transparent-btn btns \"\n    }, \"Know More\")))), /*#__PURE__*/React.createElement(\"section\", {\n      id: \"how-works\",\n      className: \"sec-holder how-it-works\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"How it works\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bottom-line\"\n    }), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"mar-top-30\"\n    }, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"pad-btm-30\"\n    }, \"Search Property\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/how-it-works/search-and-find-property-apartment-flat.png\"),\n      alt: \"Search and find your rental property\",\n      className: \"pad-btm-30\"\n    }), /*#__PURE__*/React.createElement(\"p\", null, \"Search and find an apartment/house you like from our \", /*#__PURE__*/React.createElement(\"a\", {\n      className: \"iamarenterbtn\",\n      href: FlowRouter.url('home') + '#searchform'\n    }, \"browse form\"), \". Or choose your county from our \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('home') + '#homeLinks'\n    }, \"county list\"), \".\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"pad-btm-30\"\n    }, \"Set Your Rent\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/how-it-works/set-your-rent-apartment.png\"),\n      alt: \"Apply and set your rent for Apartment\",\n      className: \"pad-btm-30\"\n    }), /*#__PURE__*/React.createElement(\"p\", null, \"Make your offer for the house and click apply. Remember to upload all your references in your profile.\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"pad-btm-30\"\n    }, \"Confirm your Home\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/how-it-works/confirm-your-rent-in-dublin.png\"),\n      alt: \"Confirm your rental\",\n      className: \"pad-btm-30\"\n    }), /*#__PURE__*/React.createElement(\"p\", null, \"Landlord chooses a tenant based on your references and your offer. If you are chosen, you would receive a confirmation email. \")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mar-top-30\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('faqs'),\n      className: \"transparent-btn btns \",\n      type: \"button\"\n    }, \"Learn more\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"pad-btm-30 visible-xs visible-sm\"\n    }, \"\\xA0\"))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"sec-holder about-us\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"Manage all your lettings at one place\"), /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        marginTop: \"10px\",\n        color: \"white\"\n      }\n    }, \"From finding tenants to verifying their social profiles\"), /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        marginTop: \"10px\",\n        color: \"white\"\n      }\n    }, \"From collecting rents to logging maintenance costs\"), /*#__PURE__*/React.createElement(\"div\", null, self.props.currentUserId ? /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#TODO\",\n      style: {\n        marginTop: \"10px\"\n      },\n      onClick: self.handlePostYourProperty,\n      className: \"pink-btn oval-btn postYourProperty\"\n    }, \"Post your property\") : /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:;\",\n      style: {\n        marginTop: \"10px\"\n      },\n      onClick: self.handleJoinNow,\n      className: \"pink-btn oval-btn joinNowBtn\"\n    }, \"Start Your Free 30-Day Trial\"))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n\n;\nmodule.exportDefault(withTracker(() => {\n  ////////// ADV BREADCRUMBS MORE LINKS\n  advancedCrumbs = function (propertyType) {\n    let fCrumbs = [],\n        tmpCrumbs = [],\n        areaCrumbs = [],\n        countyCrumbs = [];\n    if (propertyType) propertyType = propertyType.toLowerCase(); // Home / Search Residential Rentals / Dublin City Apartments for Rent / Dublin 2 Apartments for Rent\n    //Property Size\n    //Property Size - Property Type\n    //Property Size - Property Type - County\n    //Property Type - county\n    //Counties\n    //Areas\n    //Property Size - Property Type - area - County\n    //Property Size - area - County\n    //Property Type - area - county\n\n    fCrumbs.push({\n      url: generateSlugURL({\n        propertyType: 'studio'\n      }),\n      name: 'Studios'\n    }); //Property Size\n\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 1\n      }),\n      name: '1-Beds'\n    }); //Property Size\n\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 2\n      }),\n      name: '2-Beds'\n    });\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 3\n      }),\n      name: '3-Beds'\n    });\n    tmpCrumbs.push({\n      url: generateSlugURL({\n        cheapSort: true,\n        propertyType: 'house'\n      }),\n      name: 'Cheap Houses'\n    });\n    tmpCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 1,\n        propertyType: 'house'\n      }),\n      name: '1-Bed Houses'\n    }); //Property Size - Property Type\n\n    tmpCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 2,\n        propertyType: 'house'\n      }),\n      name: '2-Bed Houses'\n    });\n    tmpCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 3,\n        propertyType: 'house'\n      }),\n      name: '3-Bed Houses'\n    });\n    tmpCrumbs.push({\n      url: generateSlugURL({\n        luxurySort: true,\n        propertyType: 'house'\n      }),\n      name: 'Luxury Houses'\n    });\n\n    if (propertyType == 'house') {\n      fCrumbs = fCrumbs.concat(tmpCrumbs);\n    }\n\n    fCrumbs.push({\n      url: generateSlugURL({\n        cheapSort: true,\n        propertyType: 'apartment'\n      }),\n      name: 'Cheap Apartments'\n    });\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 1,\n        propertyType: 'apartment'\n      }),\n      name: '1-Bed Apartments'\n    }); //Property Size - Property Type\n\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 2,\n        propertyType: 'apartment'\n      }),\n      name: '2-Bed Apartments'\n    });\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 3,\n        propertyType: 'apartment'\n      }),\n      name: '3-Bed Apartments'\n    });\n    fCrumbs.push({\n      url: generateSlugURL({\n        luxurySort: true,\n        propertyType: 'apartment'\n      }),\n      name: 'Luxury Apartments'\n    });\n\n    if (propertyType != 'house') {\n      fCrumbs = fCrumbs.concat(tmpCrumbs);\n    } //dublin-apartments\n    //Not doing dublin-houses due to less searches for Dublin apartments\n\n\n    var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n\n    for (var i = 0; i < staticCounties.length; i++) {\n      if (!staticCounties[i]) continue;\n      countyCrumbs.push({\n        url: generateSlugURL({\n          county: staticCounties[i]\n        }),\n        name: staticCounties[i] + ' Apartments'\n      });\n    }\n\n    return {\n      fCrumbs: fCrumbs,\n      areaCrumbs: areaCrumbs,\n      countyCrumbs: countyCrumbs\n    };\n  };\n\n  let advC = {\n    fCrumbs: [],\n    areaCrumbs: [],\n    countyCrumbs: []\n  };\n\n  if (true) {\n    let propertyType = '';\n    if (Meteor.isClient) propertyType = Session.get('HPFpropertyTypeSelected');\n    if (!propertyType) propertyType = 'Apartment';\n    advC = advancedCrumbs(propertyType);\n  } ////////// END ADV BREADCRUMBS\n  // Meteor.subscribe('Areas')\n  // Meteor.subscribe('Config');\n\n\n  return {\n    currentUserId: Meteor.userId(),\n    fCrumbs: advC.fCrumbs,\n    areaCrumbs: advC.areaCrumbs,\n    countyCrumbs: advC.countyCrumbs\n  };\n})(Home));\n\nclass HomePageMainForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      counties: props.counties,\n      areas: props.areas,\n      countySelected: props.countySelected\n    };\n    this.isLocalAlreadySet = false;\n    this.isLocalAreaAlreadySet = false;\n    this.countySelectedHandler = this.countySelectedHandler.bind(this);\n    this.areaSelectedHandler = this.areaSelectedHandler.bind(this);\n    this.propertyTypeHandler = this.propertyTypeHandler.bind(this);\n    this.maxRentHandler = this.maxRentHandler.bind(this);\n    this.localHistorySet = this.localHistorySet.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // console.log(nextProps)\n    this.setState({\n      areas: nextProps.areas\n    });\n  }\n\n  localHistorySet() {\n    if (this.props.isSubsLoaded && this.isLocalAlreadySet && !this.isLocalAreaAlreadySet) {\n      if (localStorage.homePageMainFormData_area) {\n        this.setState({\n          areaSelected: localStorage.homePageMainFormData_area\n        });\n      }\n\n      this.isLocalAreaAlreadySet = true;\n    }\n\n    if (this.props.isSubsLoaded && !this.isLocalAlreadySet) {\n      var county = '';\n\n      if (localStorage) {\n        if (localStorage.homePageMainFormData_maxRent) {\n          $('.maxRent').val(localStorage.homePageMainFormData_maxRent);\n        }\n\n        if (localStorage.homePageMainFormData_county) {\n          county = localStorage.homePageMainFormData_county;\n        } else if (localStorage.homePageMainFormData_county === undefined) {\n          //Only for first time users\n          county = 'Dublin';\n        }\n\n        if (localStorage.homePageMainFormData_propertyType) {\n          var tmp = localStorage.homePageMainFormData_propertyType;\n          $('input:radio[name=propertyType]').removeAttr('checked');\n          $('input:radio[name=propertyType][value=\"' + tmp + '\"]').prop('checked', true);\n        }\n      }\n\n      this.setState({\n        countySelected: county\n      });\n      if (Meteor.isClient) Session.set('countySelected', county); // if(county)this.setState({areas:getAreas(county)})\n\n      this.isLocalAreaAlreadySet = false;\n      this.isLocalAlreadySet = true;\n    }\n  }\n\n  componentDidMount() {\n    this.localHistorySet(); // setTimeout(function () {\n    //     $('.countySelected').val(county)\n    // },100)\n    // setTimeout(function () {\n    //     if (localStorage.homePageMainFormData_area) {\n    //         Session.set('areaRestored',localStorage.homePageMainFormData_area)\n    //         // setTimeout(function () {\n    //         //     $('.areaSelected').val(localStorage.homePageMainFormData_area)\n    //         // },100)\n    //     }\n    // },1000)\n  }\n\n  componentDidUpdate() {\n    this.localHistorySet();\n  }\n\n  countySelectedHandler(event) {\n    var countySelected = event.target.value;\n    this.setState({\n      countySelected: countySelected\n    });\n    if (Meteor.isClient) Session.set('countySelected', countySelected); //if(countySelected) this.setState({areas:getAreas(countySelected)})\n\n    this.isLocalAreaAlreadySet = false;\n    if (localStorage) localStorage.homePageMainFormData_county = countySelected;\n  }\n\n  areaSelectedHandler(event) {\n    this.setState({\n      areaSelected: event.target.value\n    });\n    if (localStorage) localStorage.homePageMainFormData_area = event.target.value;\n  }\n\n  propertyTypeHandler(event) {\n    if (localStorage) localStorage.homePageMainFormData_propertyType = event.target.value;\n  }\n\n  maxRentHandler(event) {\n    if (localStorage) localStorage.homePageMainFormData_maxRent = event.target.value;\n  }\n\n  submitFormHandler(event) {\n    event.preventDefault();\n    const target = event.target;\n    const key = target.propertykey.value;\n\n    if (key) {\n      if (key.length != 5) {\n        alert('Invalid property key! It should of 5 characters in length.');\n        return;\n      }\n\n      FlowRouter.go('letting', {\n        key: key.toUpperCase()\n      });\n      return;\n    } // const territory = target.territory.value;\n\n\n    var data = {\n      country: target.country.value,\n      county: target.countySelected.value == 'all' ? '' : target.countySelected.value,\n      area: target.areaSelected.value == 'all' ? '' : target.areaSelected.value,\n      maxRent: target.maxRent.value,\n      propertyType: target.propertyType.value\n    };\n    var slug = generateSlug(data);\n    FlowRouter.go('b', {\n      slug: slug[0]\n    }, slug[1]);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"propertykey-form\",\n      onSubmit: this.submitFormHandler\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchformSec\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"hidden\",\n      name: \"country\",\n      defaultValue: \"ireland\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-text\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"rd-details\"\n    }, false ? /*#__PURE__*/React.createElement(\"span\", null, \"I am looking for an\") : \"\", /*#__PURE__*/React.createElement(\"label\", {\n      className: \"account-type-label\",\n      htmlFor: \"rd1\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"on\",\n      className: \"account-type-radio propertyType\",\n      id: \"rd1\",\n      name: \"propertyType\",\n      defaultValue: \"apartment\",\n      type: \"radio\",\n      defaultChecked: true,\n      onChange: this.propertyTypeHandler\n    }), \"Apartment for rent\"), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"account-type-label\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"on\",\n      className: \"account-type-radio propertyType\",\n      name: \"propertyType\",\n      defaultValue: \"house\",\n      type: \"radio\",\n      onChange: this.propertyTypeHandler\n    }), \"House for rent\"), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"account-type-label\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"on\",\n      className: \"account-type-radio propertyType\",\n      name: \"propertyType\",\n      defaultValue: \"student\",\n      type: \"radio\",\n      onChange: this.propertyTypeHandler\n    }), \"Student Accommodation\"), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"account-type-label\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"on\",\n      className: \"account-type-radio propertyType\",\n      name: \"propertyType\",\n      defaultValue: \"share\",\n      type: \"radio\",\n      onChange: this.propertyTypeHandler\n    }), \"Share\"), false ? /*#__PURE__*/React.createElement(\"label\", {\n      className: \"account-type-label\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"on\",\n      className: \"account-type-radio propertyType\",\n      name: \"propertyType\",\n      defaultValue: \"holidayhomes\",\n      type: \"radio\",\n      onChange: this.propertyTypeHandler\n    }), \"Holiday Homes\") : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signin-form\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"frm-group clearfix\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      autoComplete: \"on\",\n      name: \"countySelected\",\n      className: \"countySelected\",\n      onChange: this.countySelectedHandler,\n      value: this.state.countySelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"Choose City/County\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"all\"\n    }, \"All\"), this.state.counties.map(function (c, i) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: c.value\n      }, c.label);\n    })), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      autoComplete: \"on\",\n      name: \"areaSelected\",\n      className: \"areaSelected\",\n      onChange: this.areaSelectedHandler,\n      value: this.state.areaSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"Choose Area\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"all\"\n    }, \"All\"), this.state.areas.map(function (c, i) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: c.value\n      }, c.label);\n    })), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      autoComplete: \"on\",\n      name: \"maxRent\",\n      className: \"maxRent\",\n      onChange: this.maxRentHandler\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"Max Rent\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"Any\"), this.props.maxRent.map(function (c, i) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: c.value\n      }, c.label);\n    })), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"on\",\n      type: \"text\",\n      className: \"form-control propertykey\",\n      name: \"propertykey\",\n      placeholder: \"Property KEY\"\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-btn\",\n      style: {\n        zIndex: 0\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn white-btn\",\n      type: \"submit\",\n      style: {\n        width: '100%'\n      }\n    }, \"Find\")))))))));\n  }\n\n}\n\nHomePageMainFormT = withTracker(() => {\n  var countries = [{\n    label: \"Ireland\",\n    value: \"Ireland\"\n  }]; //Both capital\n\n  var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n  var allareas = [];\n  var allcounties = [];\n  var countySelected = 'Dublin';\n  if (Meteor.isClient) if (Session.get('countySelected')) countySelected = Session.get('countySelected');\n  let isSubsLoaded = false;\n  const areasSub = Meteor.subscribe('Areas', '', '', countySelected, '', '', function () {\n    if (areasSub.ready() && Meteor.isClient) Session.set('subscriptionsReady', true);\n  }); // Meteor.subscribe('Config');\n\n  if (Meteor.isClient) if (Session.get('subscriptionsReady')) {\n    isSubsLoaded = true;\n  }\n  if (Meteor.isClient) Session.get('subscriptionsReady');\n\n  for (var i = 0; i < staticCounties.length; i++) {\n    if (!staticCounties[i]) continue;\n    allcounties.push({\n      label: staticCounties[i],\n      value: staticCounties[i]\n    });\n  } ////////////////////////START AREAS PROCESSING\n\n\n  var distinctEntries = _.uniq(Collections.Areas.find({}, {\n    //Dynamically load areas based on the subscription.\n    sort: {\n      Area: 1\n    },\n    fields: {\n      Area: true\n    }\n  }).fetch().map(function (x) {\n    return x.Area;\n  }), true);\n\n  allareas = [];\n\n  for (var i = 0; i < distinctEntries.length; i++) {\n    if (!distinctEntries[i]) continue;\n    allareas.push({\n      label: titleCase(distinctEntries[i]),\n      value: distinctEntries[i]\n    });\n  } ////////////////////////END AREAS PROCESSING\n\n\n  var range = [{\n    cur: \"eur\",\n    min: 400,\n    max: 10000\n  }];\n  var selectedCur = range[0];\n  var maxRent = [];\n\n  for (var i = selectedCur.min; i < selectedCur.max + 1; i = i + 50) {\n    maxRent.push({\n      label: i,\n      value: i\n    });\n  } // var Config = Collections.Config.find().fetch();Config = Config[0];\n\n\n  var propertyTypes = []; // if(Config)\n  // for(var i=0;i< Config.propertyType.length;i++){\n  //     propertyTypes.push({label: titleCase(Config.propertyType[i].name), value: Config.propertyType[i].value})\n  // }\n\n  return {\n    // countries: countries,\n    counties: allcounties,\n    countySelected: countySelected,\n    areas: allareas,\n    maxRent: maxRent,\n    isSubsLoaded: isSubsLoaded // propertyTypes: propertyTypes,\n\n  };\n})(HomePageMainForm);\n\nclass HomePageLatestProps extends Component {\n  constructor(props) {\n    super(props);\n    let pAuctions = props.auctions;\n    if (!pAuctions) pAuctions = [];\n    let pProperties = props.properties;\n    if (!pProperties) pProperties = [];\n    this.state = {\n      auctions: pAuctions,\n      properties: pProperties\n    };\n    this.propsListHTML = '';\n    this.isServerSSRReq = '';\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // console.log(nextProps)\n    this.setState({\n      auctions: nextProps.auctions,\n      properties: nextProps.properties\n    });\n  }\n\n  componentWillMount() {}\n\n  componentDidMount() {\n    const self = this; // console.log('In componentDidMount');\n    // console.log(this)\n\n    setTimeout(fixImageSize, 1000);\n    setTimeout(fixImageSize, 3000);\n    setTimeout(fixImageSize, 5000);\n    $(window).resize(fixImageSize);\n  }\n\n  componentDidUpdate() {\n    // console.log('In did update');\n    // console.log(this)\n    setTimeout(fixImageSize, 1000);\n    setTimeout(fixImageSize, 3000);\n    setTimeout(fixImageSize, 5000);\n  }\n\n  propGrid() {\n    const self = this;\n    let propType = '';\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      id: \"props_list\"\n    }, Meteor.isServer ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"isservercheckdiv\"\n    }) : \"\", self.state.auctions.map((auction, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: \"col-md-4 col-sm-6 img-hold-div\"\n      }, this.state.properties.map(function (property, a) {\n        if (auction.propertyId !== property._id) return false;\n        if (typeof property.gallery === 'undefined' || property.gallery.length == 0 || typeof property.gallery[0] !== 'object') return false;\n        propType = '';\n\n        switch (property.type) {\n          case 'apartment':\n            propType = 'Apartment to rent';\n            break;\n\n          case 'house':\n            propType = 'House for rent';\n            break;\n\n          case 'student':\n            propType = 'Student Accommodation';\n            break;\n\n          case 'share':\n            propType = 'Flat Share';\n            break;\n\n          case 'holidayhomes':\n            propType = 'Holiday Home';\n            break;\n\n          case 'studio':\n            propType = 'Studio for rent';\n            break;\n        }\n\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: a,\n          className: \"proj-card\"\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"prop-img-hold\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          href: property.slug && auction.lettingAuctionCode ? FlowRouter.url('rent', {\n            slug: property.slug,\n            key: auction.lettingAuctionCode\n          }) : FlowRouter.url('letting', {\n            key: auction.lettingAuctionCode\n          })\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"image-holder\"\n        }, typeof property.gallery !== 'undefined' && property.gallery.length > 0 && typeof property.gallery[0] === 'object' ? /*#__PURE__*/React.createElement(\"img\", {\n          className: \"img-responsive\",\n          src: property.gallery[0].url,\n          alt: 'Photo 1 of ' + titleCase(property.address.address) + (property.address.area ? \", \" + titleCase(property.address.area) : '') + (property.address.county ? \", \" + titleCase(property.address.county) : '')\n        }) : /*#__PURE__*/React.createElement(\"div\", {\n          className: \"item active\"\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: cdnPath(\"/images/no-photo.png\"),\n          alt: 'Image not available',\n          className: \"img-responsive\"\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"image-position\"\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          className: \"color-white\",\n          style: {\n            paddingBottom: \"2px\"\n          }\n        }, property.address.area ? titleCase(property.address.area) : '', property.address.county ? (property.address.area ? \", \" : \"\") + titleCase(property.address.county) : ''), propType ? /*#__PURE__*/React.createElement(\"h4\", {\n          style: {\n            paddingBottom: '4px'\n          }\n        }, propType) : '', /*#__PURE__*/React.createElement(\"h4\", null, property.bedCount ? property.bedCount : '1', \" Beds, \", property.baths ? property.baths : '1', \" Baths \"))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"bg-opacity\"\n        }))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"textbox-holder\",\n          style: {\n            margin: 0,\n            padding: 20,\n            height: 130\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", null, /*#__PURE__*/React.createElement(\"a\", {\n          href: property.slug && auction.lettingAuctionCode ? FlowRouter.url('rent', {\n            slug: property.slug,\n            key: auction.lettingAuctionCode\n          }) : FlowRouter.url('letting', {\n            key: auction.lettingAuctionCode\n          })\n        }, titleCase(property.address.address), property.address.area ? \" \" + titleCase(property.address.area) : '')), /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", {\n          className: \"left-border\"\n        }, /*#__PURE__*/React.createElement(\"h4\", null, \"Rent\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: 'h2-div'\n        }, \"\\u20AC\", /*#__PURE__*/React.createElement(\"span\", null, auction.price))), /*#__PURE__*/React.createElement(\"li\", {\n          className: \"pad-right-0\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          className: \"transparent-btn btns view-details\",\n          href: property.slug && auction.lettingAuctionCode ? FlowRouter.url('rent', {\n            slug: property.slug,\n            key: auction.lettingAuctionCode\n          }) : FlowRouter.url('letting', {\n            key: auction.lettingAuctionCode\n          }),\n          type: \"button\",\n          id: \"enter-auction\"\n        }, \"view details\")))));\n      }));\n    }));\n  }\n\n  render() {\n    if (Meteor.isClient && this.propsListHTML == \"\") {\n      this.propsListHTML = $('#props_list').html();\n    }\n\n    if (Meteor.isClient) {\n      this.isServerSSRReq = $('#isservercheckdiv').html();\n      if (this.isServerSSRReq == \"\") this.isServerSSRReq = true;else this.isServerSSRReq = false;\n    } // if(this.propsListHTML) console.log(\"propsListHTML: \"+this.propsListHTML.length)\n\n\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"property-list\",\n      id: \"latestRentals\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, true ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"prop-wrap\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Latest Rentals\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bottom-line\"\n    })) : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: \"auction\"\n    }, false ? /*#__PURE__*/React.createElement(\"h5\", null, \"Ends on endsDate\") : \"\", /*#__PURE__*/React.createElement(\"section\", null, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"proplist-sec\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row blogs\"\n    }, this.props.isSubsLoaded && this.state.auctions && this.state.properties ? this.propGrid() : this.isServerSSRReq && this.propsListHTML ? /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: this.propsListHTML\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: 'h2-div',\n      style: {\n        textAlign: 'center'\n      }\n    }, \"Loading...\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pink-div col-xs-12 col-sm-12 col-md-12 col-lg-12\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('b', {\n        'slug': \"rent-in-ireland\"\n      }, {\n        'mostRecentSort': 1\n      }),\n      className: \"pink-btn oval-btn \"\n    }, \"View All\"))))))));\n  }\n\n}\n\nHomePageLatestPropsT = withTracker(() => {\n  const bLettingsSub = Meteor.subscribe(\"browseLettings\", {\n    viewName: 'browseLettings.view',\n    slug: 'rent-in-ireland',\n    pageno: 1,\n    resperpage: 6,\n    query: {\n      mostRecentSort: 1\n    },\n    propertykey: ''\n  }, function () {\n    if (bLettingsSub.ready() && Meteor.isClient) Session.set('subscriptionsReady', true);\n  });\n  if (Meteor.isClient) Session.get('subscriptionsReady');\n\n  if (!bLettingsSub.ready()) {\n    return {\n      isSubsLoaded: false\n    };\n  }\n\n  return {\n    auctions: Collections.Auctions.find({}, {\n      sort: {\n        updatedAt: -1\n      }\n    }).fetch(),\n    properties: Collections.Properties.find().fetch(),\n    isSubsLoaded: true\n  };\n})(HomePageLatestProps);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"HousesForrent.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/pages/HousesForrent.jsx                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet withTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  withTracker(v) {\n    withTracker = v;\n  }\n\n}, 2);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 3);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 4);\nlet Collections;\nmodule.link(\"../../api/collections.js\", {\n  Collections(v) {\n    Collections = v;\n  }\n\n}, 5);\nlet countsCollection = null;\nif (Meteor.isClient) Session.set('subscriptionsReady', false);\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction titleCaseAllWords(str) {\n  if (!str) return;\n  return str.split(' ').map(function (str) {\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n  }).join(' ');\n}\n\nfunction chunkify(a, n, balanced) {\n  if (n < 2) return [a];\n  var len = a.length,\n      out = [],\n      i = 0,\n      size;\n\n  if (len % n === 0) {\n    size = Math.floor(len / n);\n\n    while (i < len) {\n      out.push(a.slice(i, i += size));\n    }\n  } else if (balanced) {\n    while (i < len) {\n      size = Math.ceil((len - i) / n--);\n      out.push(a.slice(i, i += size));\n    }\n  } else {\n    n--;\n    size = Math.floor(len / n);\n    if (len % size === 0) size--;\n\n    while (i < size * n) {\n      out.push(a.slice(i, i += size));\n    }\n\n    out.push(a.slice(size * n));\n  }\n\n  return out;\n}\n\nfunction slugify(text) {\n  if (!text) return '';\n  const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/,:;';\n  const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return text.toString().toLowerCase().replace(/\\s+/g, '') // Replace spaces with \"\"\n  .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n  .replace(/&/g, '-and-') // Replace & with ''\n  .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single ''\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n}\n\nfunction getSlugData() {\n  var query = FlowRouter.current().queryParams;\n  var slug = FlowRouter.current().params.slug;\n  var propertyType = \"\";\n  var county = \"\";\n  var area = \"\";\n  var maxRent = \"\";\n  var minRent = \"\";\n  var minBeds = \"\";\n  var maxBeds = \"\";\n  var country = \"\";\n  var bedCount = \"\";\n  var luxurySort = \"\";\n  var cheapSort = \"\";\n  var mostRecentSort = \"\";\n  var leastRecentSort = \"\";\n  var range = [{\n    cur: \"eur\",\n    min: 0,\n    max: 10000\n  }];\n  var selectedCur = range[0];\n\n  if (query) {\n    if (query.minRent) minRent = query.minRent;\n    if (query.maxRent) maxRent = query.maxRent;\n    if (query.minBeds) minBeds = query.minBeds;\n    if (query.maxBeds) maxBeds = query.maxBeds;\n    if (query.bedCount) bedCount = query.bedCount;\n    if (query.luxurySort) luxurySort = query.luxurySort;\n    if (query.cheapSort) cheapSort = query.cheapSort;\n    if (query.mostRecentSort) mostRecentSort = query.mostRecentSort;\n    if (query.leastRecentSort) leastRecentSort = query.leastRecentSort;\n  }\n\n  if (!slug) {\n    return {\n      country: country,\n      county: county,\n      area: area,\n      minRent: minRent,\n      maxRent: maxRent,\n      minBeds: minBeds,\n      maxBeds: maxBeds,\n      bedCount: bedCount,\n      luxurySort: luxurySort,\n      cheapSort: cheapSort,\n      mostRecentSort: mostRecentSort,\n      leastRecentSort: leastRecentSort,\n      propertyType: propertyType\n    };\n  }\n\n  if (slug.indexOf('-for-') != -1) {\n    propertyType = slug.split('-for-')[0];\n    propertyType = propertyType.split('-').join(' ');\n  }\n\n  if (slug.indexOf('-in-') != -1) {\n    var tmp = slug.split('-in-')[1].split('-');\n\n    switch (tmp.length) {\n      case 3:\n        country = tmp[2];\n        county = tmp[1];\n        area = tmp[0];\n        break;\n\n      case 2:\n        country = tmp[1];\n        county = tmp[0];\n        break;\n\n      case 1:\n        country = tmp[0];\n        break;\n    }\n\n    if (propertyType) propertyType = propertyType.replace(/_/g, ' ');\n    if (county) county = titleCaseAllWords(county.replace(/_/g, ' '));\n    if (country) country = titleCaseAllWords(country.replace(/_/g, ' '));\n    if (area) area = titleCaseAllWords(area.replace(/_/g, ' '));\n  }\n\n  return {\n    country: country,\n    county: county,\n    area: area,\n    minRent: minRent,\n    maxRent: maxRent,\n    minBeds: minBeds,\n    maxBeds: maxBeds,\n    bedCount: bedCount,\n    luxurySort: luxurySort,\n    cheapSort: cheapSort,\n    mostRecentSort: mostRecentSort,\n    leastRecentSort: leastRecentSort,\n    propertyType: propertyType\n  };\n}\n\nfunction generateSlug(curURL) {\n  var propertyType = curURL.propertyType;\n  var county = curURL.county;\n  var area = curURL.area;\n  var minRent = curURL.minRent;\n  var maxRent = curURL.maxRent;\n  var minBeds = curURL.minBeds;\n  var maxBeds = curURL.maxBeds;\n  var sortBy = curURL.sortBy;\n  var country = curURL.country;\n  var bedCount = curURL.bedCount;\n  var luxurySort = curURL.luxurySort;\n  var cheapSort = curURL.cheapSort;\n  var mostRecentSort = curURL.mostRecentSort;\n  var leastRecentSort = curURL.leastRecentSort; // const territory = target.territory.value;\n\n  var slug = '';\n  var query = {};\n  if (propertyType) propertyType = propertyType.replace(/\\s+/g, '_');\n  if (county) county = county.replace(/\\s+/g, '_');\n  if (area) area = area.replace(/\\s+/g, '_');\n  if (country) country = country.replace(/\\s+/g, '_');\n  if (propertyType) slug = propertyType + \"-for-\";\n  slug += \"rent\"; // if(areaSelected||countySelected||country)\n\n  slug += \"-in-\";\n  if (!county) area = '';\n  if (area) slug += area;\n  if (area && county) slug += \"-\";\n  if (county) slug += county;\n  if (bedCount) query.bedCount = bedCount;\n  if (country) slug += \"-\" + country;else slug += \"-ireland\";\n  var range = [{\n    cur: \"eur\",\n    min: 200,\n    max: 10000\n  }];\n  var selectedCur = range[0];\n  if (minRent && minRent != selectedCur.min) query.minRent = minRent;\n  if (maxRent && maxRent != selectedCur.max) query.maxRent = maxRent;\n  if (minBeds) query.minBeds = minBeds;\n  if (maxBeds) query.maxBeds = maxBeds;\n\n  if (sortBy) {\n    switch (sortBy) {\n      case 'ascRent':\n        query.cheapSort = 1;\n        break;\n\n      case 'descRent':\n        query.luxurySort = 1;\n        break;\n\n      case 'mRecent':\n        query.mostRecentSort = 1;\n        break;\n\n      case 'lRecent':\n        query.leastRecentSort = 1;\n        break;\n    }\n  } else {\n    if (luxurySort) query.luxurySort = 1;\n    if (cheapSort) query.cheapSort = 1;\n    if (mostRecentSort) query.mostRecentSort = 1;\n    if (leastRecentSort) query.leastRecentSort = 1;\n  } // apartment-for-rent-in-dundrum-dublin-ireland\n  // apartment-for-rent-in-donnybroke-london-uk\n  // rent/apartment/dundrum/dublin\n  // rent/apartment/donnybroke/london/england/uk/\n\n\n  return [slugify(slug), query];\n}\n\nfunction generateSlugURL(curURL) {\n  var ret = generateSlug(curURL);\n  return FlowRouter.url('b', {\n    slug: ret[0]\n  }, ret[1]);\n}\n\nfunction updateRoute() {\n  // Function is not in use\n  //console.log(\"In updateRoute\")\n  // TODO Router.query.clear();\n  var baseURL = window.location.href.split('?')[0];\n  var route = baseURL; //debugger;\n\n  var curCity = Session.get('curCity');\n  if (curCity && curCity != 'All') route = updateQueryStringParameter(route, 'city', curCity);\n  var curBuilder = Session.get('curBuilder');\n  if (curBuilder && curBuilder != 'All') route = updateQueryStringParameter(route, 'builder', curBuilder); //console.log(\"New Route\"+route);\n\n  FlowRouter.go(route);\n}\n\nfunction fixImageSize() {\n  var avgW = 0;\n  $('.image-holder img').each(function () {\n    if (!avgW) avgW = $(this).width();else {\n      avgW += $(this).width();\n      avgW = avgW / 2;\n    }\n  });\n  if (!avgW) avgW = 250;\n  $('.image-holder img').width('100%');\n  $('.image-holder img').height(avgW * 0.7);\n}\n\nfunction saveToLocalStorage() {\n  //There is no restore local on this page; its not needed as people come to this page from other pages and they might have diff preferences every time.\n  if (localStorage) {\n    localStorage.homePageMainFormData_county = $(\".countySelected\").val();\n    localStorage.homePageMainFormData_area = $(\".areaSelected\").val();\n    var tmp = $(\"input:radio[name=propertyType]:checked\").val();\n    if (tmp) localStorage.homePageMainFormData_propertyType = tmp;\n    tmp = $('.maxRent').val();\n    if (tmp) localStorage.homePageMainFormData_maxRent = $('.maxRent').val();\n  }\n}\n\nclass Pagination extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {// console.log(this.props)\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"nav\", null, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"pagination\"\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"page-item \" + self.props.pagination.prevPage.disabled\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"page-link\",\n      href: self.props.pagination.prevPage.href,\n      tabIndex: \"-1\",\n      onClick: self.props.handleChoosePage.bind(self, self.props.pagination.prevPage.prevPageNo, self.props.parent)\n    }, self.props.pagination.prevPage.text)), self.props.pagination.pages.map((page, i) => {\n      if (typeof page.current !== 'undefined' && page.current) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          className: \"page-item active\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          className: \"page-link\",\n          href: page.href\n        }, page.text, \" \", /*#__PURE__*/React.createElement(\"span\", {\n          className: \"sr-only\"\n        }, \"(current)\")));\n      } else {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          className: \"page-item\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          className: \"page-link\",\n          onClick: self.props.handleChoosePage.bind(self, page.text, self.props.parent),\n          href: page.href\n        }, page.text));\n      }\n    }), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"page-item \" + self.props.pagination.nextPage.disabled\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"page-link\",\n      href: self.props.pagination.nextPage.href,\n      onClick: self.props.handleChoosePage.bind(self, self.props.pagination.nextPage.nextPageNo, self.props.parent)\n    }, self.props.pagination.nextPage.text))));\n  }\n\n}\n\nclass HousesForrent extends Component {\n  constructor(props) {\n    super(props);\n    var searchCrumbs = {\n      c1: [],\n      c2: [],\n      c3: []\n    };\n    var fCrumbs = {\n      c1: [],\n      c2: [],\n      c3: []\n    };\n    var areaCrumbs = {\n      c1: [],\n      c2: [],\n      c3: []\n    };\n    var countyCrumbs = {\n      c1: [],\n      c2: [],\n      c3: []\n    };\n\n    if (props.searchCrumbs) {\n      var chunks = chunkify(props.searchCrumbs, 3, true);\n      searchCrumbs = {\n        c1: chunks[0],\n        c2: chunks[1],\n        c3: chunks[2]\n      };\n    }\n\n    if (props.fCrumbs) {\n      var chunks = chunkify(props.fCrumbs, 3, true);\n      fCrumbs = {\n        c1: chunks[0],\n        c2: chunks[1],\n        c3: chunks[2]\n      };\n    }\n\n    if (props.areaCrumbs) {\n      var chunks = chunkify(props.areaCrumbs, 3, true);\n      areaCrumbs = {\n        c1: chunks[0],\n        c2: chunks[1],\n        c3: chunks[2]\n      };\n    }\n\n    if (props.countyCrumbs) {\n      var chunks = chunkify(props.countyCrumbs, 3, true);\n      countyCrumbs = {\n        c1: chunks[0],\n        c2: chunks[1],\n        c3: chunks[2]\n      };\n    }\n\n    let pCS = props.countySelected;\n    if (!pCS) pCS = '';\n    let pAS = props.areaSelected;\n    if (!pAS) pAS = '';\n    let pTS = props.propertyTypeSelected;\n    if (!pTS) pTS = '';\n    let pCounties = props.counties;\n    if (!pCounties) pCounties = [];\n    let pPropertyTypes = props.propertyTypes;\n    if (!pPropertyTypes) pPropertyTypes = [];\n    let pAreas = props.areas;\n    if (!pAreas) pAreas = [];\n    let pAuctions = props.auctions;\n    if (!pAuctions) pAuctions = [];\n    let pProperties = props.properties;\n    if (!pProperties) pProperties = [];\n    let pTotalCount = props.totalCount;\n    if (!pTotalCount) pTotalCount = 0;\n    let pPagination = props.pagination;\n    if (!pPagination) pPagination = 0;\n    this.state = {\n      showXSMenu: false,\n      countySelected: pCS,\n      areaSelected: pAS,\n      propertyTypeSelected: pTS,\n      counties: pCounties,\n      propertyTypes: pPropertyTypes,\n      areas: pAreas,\n      auctions: pAuctions,\n      properties: pProperties,\n      totalCount: pTotalCount,\n      pagination: pPagination,\n      'searchCrumbs': searchCrumbs,\n      fCrumbs: fCrumbs,\n      areaCrumbs: areaCrumbs,\n      countyCrumbs: countyCrumbs\n    };\n    this.searchCrumbsLoaded = false;\n    this.propsListHTML = '';\n    this.isServerSSRReq = '';\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // console.log(nextProps)\n    this.setState({\n      counties: nextProps.counties,\n      areas: nextProps.areas,\n      propertyTypes: nextProps.propertyTypes,\n      auctions: nextProps.auctions,\n      properties: nextProps.properties,\n      totalCount: nextProps.totalCount,\n      pagination: nextProps.pagination\n    }); // if(!this.state.countySelected)\n\n    this.setState({\n      countySelected: nextProps.countySelected\n    }); // if(!this.state.areaSelected)\n\n    this.setState({\n      areaSelected: nextProps.areaSelected\n    }); // if(!this.state.propertyTypeSelected)\n\n    this.setState({\n      propertyTypeSelected: nextProps.propertyTypeSelected\n    });\n    this.setState({\n      minRentSelected: nextProps.minRentSelected\n    });\n    this.setState({\n      maxRentSelected: nextProps.maxRentSelected\n    });\n    this.setState({\n      minBedCountSelected: nextProps.minBedCountSelected\n    });\n    this.setState({\n      maxBedCountSelected: nextProps.maxBedCountSelected\n    });\n    this.setState({\n      sortBySelected: nextProps.sortBySelected\n    });\n  }\n\n  componentWillMount() {}\n\n  componentDidMount() {\n    const self = this; // console.log('In componentDidMount');\n    // console.log(this)\n\n    try {\n      jQuery(\"html,body\").animate({\n        scrollTop: 0\n      }, 250);\n    } catch (e) {\n      document.body.scrollTop = document.documentElement.scrollTop = 0;\n    }\n\n    setTimeout(fixImageSize, 1000);\n    setTimeout(fixImageSize, 3000);\n    setTimeout(fixImageSize, 5000);\n    $(window).resize(fixImageSize);\n    setTimeout(function () {\n      try {\n        jQuery(\"html,body\").animate({\n          scrollTop: 0\n        }, 250);\n      } catch (e) {\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n      }\n    }, 500);\n  }\n\n  componentDidUpdate() {\n    // console.log('In did update');\n    // console.log(this)\n    setTimeout(fixImageSize, 1000);\n    setTimeout(fixImageSize, 3000);\n    setTimeout(fixImageSize, 5000);\n    this.crumbsUpdate();\n    setTimeout(function () {\n      try {\n        jQuery(\"html,body\").animate({\n          scrollTop: 0\n        }, 250);\n      } catch (e) {\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n      }\n    }, 500);\n  }\n\n  minRentOptions() {\n    var range = [{\n      cur: \"eur\",\n      min: 200,\n      max: 9900\n    }];\n    var selectedCur = range[0];\n    var maxRent = [];\n\n    for (var i = selectedCur.min; i < selectedCur.max + 1;) {\n      maxRent.push({\n        label: i,\n        value: i\n      });\n      if (i < 1000) i = i + 50;else if (i <= 4000) i = i + 100;else if (i <= 8000) i = i + 500;else i = i + 1000;\n    }\n\n    return maxRent;\n  }\n\n  maxRentOptions() {\n    var range = [{\n      cur: \"eur\",\n      min: 400,\n      max: 10000\n    }];\n    var selectedCur = range[0];\n    var maxRent = [];\n\n    for (var i = selectedCur.min; i < selectedCur.max + 1;) {\n      maxRent.push({\n        label: i,\n        value: i\n      });\n      if (i < 1000) i = i + 50;else if (i <= 4000) i = i + 100;else if (i <= 8000) i = i + 500;else i = i + 1000;\n    }\n\n    return maxRent;\n  }\n\n  minBedOptions() {\n    var range = [{\n      min: 1,\n      max: 9\n    }];\n    var selectedCur = range[0];\n    var maxRent = [];\n\n    for (var i = selectedCur.min; i < selectedCur.max + 1; i = i + 1) {\n      maxRent.push({\n        label: i,\n        value: i\n      });\n    }\n\n    return maxRent;\n  }\n\n  maxBedOptions() {\n    var range = [{\n      min: 2,\n      max: 10\n    }];\n    var selectedCur = range[0];\n    var maxRent = [];\n\n    for (var i = selectedCur.min; i < selectedCur.max + 1; i = i + 1) {\n      maxRent.push({\n        label: i,\n        value: i\n      });\n    }\n\n    return maxRent;\n  }\n\n  sortByOptions() {\n    var sortBy = [{\n      label: \"Most recent\",\n      value: \"mRecent\"\n    }, {\n      label: \"Least recent\",\n      value: \"lRecent\"\n    }, {\n      label: \"Rent: Cheaper first\",\n      value: \"ascRent\"\n    }, {\n      label: \"Rent: Luxury first\",\n      value: \"descRent\"\n    }];\n    return sortBy;\n  }\n\n  crumbsUpdate() {\n    if (!this.searchCrumbsLoaded) {\n      var searchCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var fCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var areaCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var countyCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n\n      if (this.props.searchCrumbs) {\n        var chunks = chunkify(this.props.searchCrumbs, 3, true);\n        searchCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        };\n        this.searchCrumbsLoaded = true;\n      }\n\n      if (this.props.fCrumbs) {\n        var chunks = chunkify(this.props.fCrumbs, 3, true);\n        fCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        };\n        this.searchCrumbsLoaded = true;\n      }\n\n      if (this.props.areaCrumbs) {\n        var chunks = chunkify(this.props.areaCrumbs, 3, true);\n        areaCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        };\n        this.searchCrumbsLoaded = true;\n      }\n\n      if (this.props.countyCrumbs) {\n        var chunks = chunkify(this.props.countyCrumbs, 3, true);\n        countyCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        };\n        this.searchCrumbsLoaded = true;\n      }\n\n      if (this.searchCrumbsLoaded) //Update the state only once; when its true\n        this.setState({\n          'searchCrumbs': searchCrumbs,\n          fCrumbs: fCrumbs,\n          areaCrumbs: areaCrumbs,\n          countyCrumbs: countyCrumbs\n        });\n    }\n  }\n\n  isEqualSelect(a, b) {\n    if (a == b) return ' selected ';\n    return '';\n  }\n\n  updateQueryStringParameter(uri, key, value) {\n    var re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n    var separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\n\n    if (uri.match(re)) {\n      return uri.replace(re, '$1' + key + \"=\" + value + '$2');\n    } else {\n      return uri + separator + key + \"=\" + value;\n    }\n  }\n\n  handleChoosePage(page, component) {\n    if (typeof page == \"undefined\") return; // var data = getSlugData();\n    // var slug = generateSlug(data);\n    //\n    // FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0], pageno: page}, slug[1]);\n    //\n    // component.setState({pagination: pagination()});\n  }\n\n  handleCountyDropdown(event) {\n    var val = event.target.value;\n    var countyChanged = false;\n    var data = getSlugData();\n    var countySelected = data.county;\n    this.setState({\n      countySelected: val\n    });\n    if (localStorage) localStorage.homePageMainFormData_county = val;\n    this.setState({\n      areaSelected: \"\"\n    }); // if(val!=countySelected)\n    //     countyChanged=true;\n    // if(countyChanged)\n    //     this.setState({areaSelected: \"\"});\n\n    data.county = val;\n    data.area = ''; // if(countyChanged)data.area='';\n\n    var slug = generateSlug(data);\n    FlowRouter.go('/b/:slug/:pageno?', {\n      slug: slug[0]\n    }, slug[1]);\n  }\n\n  handleAreaDropdown(event) {\n    var val = event.target.value;\n    this.setState({\n      areaSelected: val\n    });\n    if (localStorage) localStorage.homePageMainFormData_area = val;\n    var data = getSlugData();\n    data.area = val;\n    var slug = generateSlug(data);\n    FlowRouter.go('/b/:slug/:pageno?', {\n      slug: slug[0]\n    }, slug[1]);\n  }\n\n  handlePropertyTypeDropdown(event) {\n    var val = event.target.value;\n    this.setState({\n      propertyTypeSelected: val\n    });\n    if (localStorage) localStorage.homePageMainFormData_propertyType = val;\n    var data = getSlugData();\n    data.propertyType = val;\n    var slug = generateSlug(data);\n    FlowRouter.go('/b/:slug/:pageno?', {\n      slug: slug[0]\n    }, slug[1]);\n  }\n\n  handleMinRentDropdown(event) {\n    var val = event.target.value;\n    this.setState({\n      minRentSelected: val\n    });\n    if (localStorage) localStorage.homePageMainFormData_minRent = val;\n    var data = getSlugData();\n    data.minRent = val;\n    var slug = generateSlug(data);\n    FlowRouter.go('/b/:slug/:pageno?', {\n      slug: slug[0]\n    }, slug[1]);\n  }\n\n  handleMaxRentDropdown(event) {\n    var val = event.target.value;\n    this.setState({\n      maxRentSelected: val\n    });\n    if (localStorage) localStorage.homePageMainFormData_maxRent = val;\n    var data = getSlugData();\n    data.maxRent = val;\n    var slug = generateSlug(data);\n    FlowRouter.go('/b/:slug/:pageno?', {\n      slug: slug[0]\n    }, slug[1]);\n  }\n\n  handleMinBedDropdown(event) {\n    var val = event.target.value;\n    this.setState({\n      minBedCountSelected: val\n    });\n    if (localStorage) localStorage.homePageMainFormData_minBed = val;\n    var data = getSlugData();\n    data.minBeds = val;\n    var slug = generateSlug(data);\n    FlowRouter.go('/b/:slug/:pageno?', {\n      slug: slug[0]\n    }, slug[1]);\n  }\n\n  handleMaxBedDropdown(event) {\n    var val = event.target.value;\n    this.setState({\n      maxBedCountSelected: val\n    });\n    if (localStorage) localStorage.homePageMainFormData_maxBed = val;\n    var data = getSlugData();\n    data.maxBeds = val;\n    var slug = generateSlug(data);\n    FlowRouter.go('/b/:slug/:pageno?', {\n      slug: slug[0]\n    }, slug[1]);\n  }\n\n  handleSortByDropdown(event) {\n    var val = event.target.value;\n    this.setState({\n      sortBySelected: val\n    });\n    var data = getSlugData();\n    data.sortBy = val;\n    var slug = generateSlug(data);\n    FlowRouter.go('/b/:slug/:pageno?', {\n      slug: slug[0]\n    }, slug[1]);\n  }\n\n  searchXSMenu(event) {\n    console.log('searchXSMenu');\n    this.setState({\n      showXSMenu: false\n    });\n    ga('send', 'event', 'BrowsePage', 'searchXSMenuBtn', 'Mobile: searchXSMenu Btn Clicked');\n  }\n\n  cancelSearchXSMenu(event) {\n    console.log('cancelSearchXSMenu');\n    this.setState({\n      showXSMenu: false\n    });\n    ga('send', 'event', 'BrowsePage', 'cancelFilterBtn', 'Mobile: cancelFilter Btn Clicked');\n  }\n\n  handleShowFilters(event) {\n    this.setState({\n      showXSMenu: true\n    });\n    ga('send', 'event', 'BrowsePage', 'showFilterBtn', 'Mobile: showFilter Btn Clicked');\n  }\n\n  showFilterText(state) {\n    var text = [];\n\n    if (state.countySelected) {\n      text.push(\"County: \" + state.countySelected);\n    } //else text.push(\"all counties\")\n\n\n    if (state.areaSelected) {\n      text.push(\"Area: \" + state.areaSelected);\n    } //else text.push(\"Area: all areas\")\n\n\n    if (state.propertyTypeSelected) {\n      text.push(\"Type: \" + this.formatedPT(state.propertyTypeSelected));\n    } //else text.push(\"Type: all property types\")\n\n\n    if (state.minRentSelected && state.maxRentSelected) {\n      text.push(\"Rent: between &euro;\" + state.minRentSelected + \" and &euro;\" + state.maxRentSelected + \"\");\n    } else if (state.minRentSelected) {\n      text.push(\"Rent: greater than &euro;\" + state.minRentSelected + \"\");\n    } else if (state.maxRentSelected) {\n      text.push(\"Rent: less than &euro;\" + state.maxRentSelected + \"\");\n    } else {// text.push(\"Rent: Any\")\n    }\n\n    if (state.minBedCountSelected && state.maxBedCountSelected) {\n      text.push(\"Beds: between \" + state.minBedCountSelected + \" and \" + state.maxBedCountSelected);\n    } else if (state.minBedCountSelected) {\n      text.push(\"Beds: has at least \" + state.minBedCountSelected + \"\");\n    } else if (state.maxBedCountSelected) {\n      text.push(\"Beds: at most \" + state.maxBedCountSelected + \"\");\n    } else {// text.push(\"Rent: Any\")\n    }\n\n    switch (this.state.sortBySelected) {\n      case 'mRecent':\n        text.push('Showing: Most recent first');\n        break;\n\n      case 'lRecent':\n        text.push('Showing: Oldest first');\n        break;\n    }\n\n    if (state.propertyTypeSelected) {\n      switch (this.state.sortBySelected) {\n        case 'ascRent':\n          text.push('Showing: Cheap ' + this.formatedPT(state.propertyTypeSelected) + ' first');\n          break;\n\n        case 'descRent':\n          text.push('Showing: Luxury ' + this.formatedPT(state.propertyTypeSelected) + ' first');\n          break;\n      }\n    } else {\n      switch (this.state.sortBySelected) {\n        case 'ascRent':\n          text.push('Showing: Least expensive first');\n          break;\n\n        case 'descRent':\n          text.push('Showing: Most expensive first');\n          break;\n      }\n    }\n\n    return 'Chosen filters are <br/>' + text.join('<br/>'); // Searching in county Dublin<br>\n    // Area: Amiens Street<br>\n    // Rent: between 200 to 1200 Euros<br>\n    // Bedrooms: between 2 to 4<br>\n    // Showing: Most recent first\n  }\n\n  handleClearFilters() {\n    FlowRouter.go('/b/:slug/:pageno?', {\n      slug: 'rent-in-ireland'\n    });\n  }\n\n  formatedPT(propertyTypeSelected) {\n    propertyTypeSelected = propertyTypeSelected.toLowerCase();\n    if (propertyTypeSelected == 'student') return 'Student Accommodation';\n    if (propertyTypeSelected == 'holidayhomes') return 'Holiday Homes';\n    if (propertyTypeSelected == 'parkingspace') return 'Parking Space';\n    return titleCaseAllWords(propertyTypeSelected);\n  }\n\n  propGrid() {\n    const self = this;\n    let propType = '';\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, self.state.auctions.map((auction, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: \"col-md-4 col-sm-6 img-hold-div\"\n      }, this.state.properties.map(function (property, a) {\n        if (auction.propertyId !== property._id) return false;\n        propType = '';\n\n        switch (property.type) {\n          case 'apartment':\n            propType = 'Apartment to rent';\n            break;\n\n          case 'house':\n            propType = 'House for rent';\n            break;\n\n          case 'student':\n            propType = 'Student Accommodation';\n            break;\n\n          case 'share':\n            propType = 'Flat Share';\n            break;\n\n          case 'holidayhomes':\n            propType = 'Holiday Home';\n            break;\n\n          case 'studio':\n            propType = 'Studio for rent';\n            break;\n        }\n\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: a,\n          className: \"proj-card\"\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"prop-img-hold\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          href: property.slug && auction.lettingAuctionCode ? FlowRouter.url('rent', {\n            slug: property.slug,\n            key: auction.lettingAuctionCode\n          }) : FlowRouter.url('letting', {\n            key: auction.lettingAuctionCode\n          })\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"image-holder\"\n        }, typeof property.gallery !== 'undefined' && property.gallery.length > 0 && typeof property.gallery[0] === 'object' ? /*#__PURE__*/React.createElement(\"img\", {\n          className: \"img-responsive\",\n          src: property.gallery[0].url,\n          alt: 'Photo 1 of ' + titleCase(property.address.address) + (property.address.area ? \", \" + titleCase(property.address.area) : '') + (property.address.county ? \", \" + titleCase(property.address.county) : '')\n        }) : /*#__PURE__*/React.createElement(\"div\", {\n          className: \"item active\"\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: cdnPath(\"/images/no-photo.png\"),\n          alt: 'Image not available',\n          className: \"img-responsive\"\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"image-position\"\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          className: \"color-white\",\n          style: {\n            paddingBottom: \"2px\"\n          }\n        }, property.address.area ? titleCase(property.address.area) : '', property.address.county ? (property.address.area ? \", \" : \"\") + titleCase(property.address.county) : ''), propType ? /*#__PURE__*/React.createElement(\"h4\", {\n          style: {\n            paddingBottom: '4px'\n          }\n        }, propType) : '', /*#__PURE__*/React.createElement(\"h4\", null, property.bedCount ? property.bedCount : '1', \" Beds, \", property.baths ? property.baths : '1', \" Baths \"))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"bg-opacity\"\n        }))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"textbox-holder\",\n          style: {\n            margin: 0,\n            padding: 20,\n            height: 130\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", null, /*#__PURE__*/React.createElement(\"a\", {\n          href: property.slug && auction.lettingAuctionCode ? FlowRouter.url('rent', {\n            slug: property.slug,\n            key: auction.lettingAuctionCode\n          }) : FlowRouter.url('letting', {\n            key: auction.lettingAuctionCode\n          })\n        }, titleCase(property.address.address), property.address.area ? \" \" + titleCase(property.address.area) : '')), /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", {\n          className: \"left-border\"\n        }, /*#__PURE__*/React.createElement(\"h4\", null, \"Rent\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: 'h2-div'\n        }, \"\\u20AC\", /*#__PURE__*/React.createElement(\"span\", null, auction.price))), /*#__PURE__*/React.createElement(\"li\", {\n          className: \"pad-right-0\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          className: \"transparent-btn btns view-details\",\n          href: property.slug && auction.lettingAuctionCode ? FlowRouter.url('rent', {\n            slug: property.slug,\n            key: auction.lettingAuctionCode\n          }) : FlowRouter.url('letting', {\n            key: auction.lettingAuctionCode\n          }),\n          type: \"button\",\n          id: \"enter-auction\"\n        }, \"view details\")))));\n      }));\n    }));\n  }\n\n  mainAllPage() {\n    const self = this;\n    var slugData = getSlugData();\n    this.sluggedTitle = '';\n    this.sluggedTitleWithoutType = '';\n    this.sluggedType = '';\n\n    try {\n      this.sluggedType = slugData.propertyType ? slugData.propertyType : 'Property';\n      this.sluggedTitle += slugData.propertyType ? slugData.propertyType + \" for\" : '';\n      this.sluggedTitle += this.sluggedTitle ? ' rent in' : 'rent in';\n      this.sluggedTitle += slugData.area ? ' ' + slugData.area + \"\" : '';\n      this.sluggedTitle += slugData.county ? ' ' + slugData.county + \"\" : '';\n      this.sluggedTitle += ' Ireland';\n      this.sluggedTitleWithoutType = 'rent in';\n      this.sluggedTitleWithoutType += slugData.area ? ' ' + slugData.area + \"\" : '';\n      this.sluggedTitleWithoutType += slugData.county ? ' ' + slugData.county + \"\" : '';\n      this.sluggedTitleWithoutType += ' Ireland';\n    } catch (e) {}\n\n    try {\n      this.sluggedTitle = this.props.slug.replace(/[-_]/g, ' ');\n    } catch (e) {}\n\n    this.propertyTypePlural = this.state.propertyTypeSelected;\n\n    switch (this.propertyTypePlural) {\n      case 'apartment':\n        this.propertyTypePlural = 'Apartments ';\n        break;\n\n      case 'house':\n        this.propertyTypePlural = 'Houses ';\n        break;\n\n      case 'student':\n        this.propertyTypePlural = 'Student Accommodations ';\n        break;\n\n      case 'share':\n        this.propertyTypePlural = 'Flat Shares ';\n        break;\n\n      case 'holidayhomes':\n        this.propertyTypePlural = 'Holiday Homes ';\n        break;\n\n      case 'studio':\n        this.propertyTypePlural = 'Studios ';\n        break;\n\n      case '':\n        this.propertyTypePlural = 'advertisements ';\n        break;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"props_list\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"logo-below-div value-div\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo-holder-div\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo-holder\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        marginBottom: 10\n      }\n    }, self.state.propertyTypeSelected ? this.formatedPT(self.state.propertyTypeSelected) : 'Houses', \"\\xA0for rent\", self.state.countySelected ? /*#__PURE__*/React.createElement(\"span\", null, \"\\xA0in \", self.state.areaSelected ? self.state.areaSelected + \" \" : '', self.state.countySelected) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"h4-div\",\n      style: {\n        paddingBottom: 5\n      }\n    }, \"Found \", self.state.totalCount, this.props.pageno > 1 ? ' (Showing page 3)' : \"\")))), this.state.showXSMenu ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"xs-filter-menu xs-menu visible-xs transition\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"xs-menu-close-icon text-right\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"h2-h2\",\n      style: {\n        float: \"left\",\n        marginLeft: '12px'\n      }\n    }, \"FILTERS\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"sprite xs-close\",\n      onClick: self.cancelSearchXSMenu.bind(this)\n    })), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"transition\",\n      style: {\n        paddingTop: 0\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"Change County\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      autoComplete: \"true\",\n      style: {\n        margin: 0\n      },\n      className: \"countyDropdown countySelected\",\n      onChange: self.handleCountyDropdown.bind(this),\n      value: self.state.countySelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"All\"), self.state.counties ? self.state.counties.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: item.value\n      }, item.label);\n    }) : \"\"))), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"Area\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      autoComplete: \"true\",\n      style: {\n        margin: 0\n      },\n      className: \"countyDropdown areaSelected\",\n      onChange: self.handleAreaDropdown.bind(this),\n      value: self.state.areaSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"All\"), self.state.areas ? self.state.areas.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: item.value\n      }, item.label);\n    }) : \"\"))), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xs-6 col-md-6\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"Min Rent\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      autoComplete: \"true\",\n      style: {\n        margin: 0\n      },\n      className: \"countyDropdown countySelected\",\n      onChange: self.handleMinRentDropdown.bind(this),\n      value: self.state.minRentSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"All\"), self.minRentOptions().map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: item.value\n      }, item.label);\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xs-6 col-md-6\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"Max Rent\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      autoComplete: \"true\",\n      style: {\n        margin: 0\n      },\n      className: \"countyDropdown countySelected\",\n      onChange: self.handleMaxRentDropdown.bind(this),\n      value: self.state.maxRentSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"All\"), self.maxRentOptions().map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: item.value\n      }, item.label);\n    })))))), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"How many bedrooms?\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xs-6 col-md-6\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"Min Beds\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      autoComplete: \"true\",\n      style: {\n        margin: 0\n      },\n      className: \"countyDropdown countySelected\",\n      onChange: self.handleMinBedDropdown.bind(this),\n      value: self.state.minBedCountSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"All\"), self.minBedOptions().map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: item.value\n      }, item.label);\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xs-6 col-md-6\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"Max Beds\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      autoComplete: \"true\",\n      style: {\n        margin: 0\n      },\n      className: \"countyDropdown countySelected\",\n      onChange: self.handleMaxBedDropdown.bind(this),\n      value: self.state.maxBedCountSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"All\"), self.maxBedOptions().map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: item.value\n      }, item.label);\n    })))))), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"Property Type? \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      autoComplete: \"true\",\n      style: {\n        margin: 0\n      },\n      className: \"countyDropdown countySelected\",\n      onChange: self.handlePropertyTypeDropdown.bind(this),\n      value: self.state.propertyTypeSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"All\"), self.state.propertyTypes ? self.state.propertyTypes.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: item.value\n      }, item.label);\n    }) : \"\"))), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"Sort by\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      autoComplete: \"true\",\n      style: {\n        margin: 0\n      },\n      className: \"countyDropdown countySelected\",\n      onChange: self.handleSortByDropdown.bind(this),\n      value: self.state.sortBySelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"All\"), self.sortByOptions().map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: item.value\n      }, item.label);\n    })))), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btns green-btn\",\n      onClick: self.searchXSMenu.bind(this)\n    }, \"Search\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btns transparent-btn\",\n      style: {\n        marginLeft: 5\n      },\n      onClick: self.cancelSearchXSMenu.bind(this)\n    }, \"Cancel\")))) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu houseForRentFilters\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"left-border pad-right-0 cf-1\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"visible-xs\",\n      dangerouslySetInnerHTML: {\n        __html: this.showFilterText(this.state)\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"visible-xs\",\n      href: \"javascript:void(0)\",\n      onClick: self.handleShowFilters.bind(this)\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"hfr-h4\"\n    }, \"Edit Filters \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"glyphicon glyphicon-filter\"\n    }))), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"Change County\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      autoComplete: \"true\",\n      style: {\n        margin: 0\n      },\n      className: \"countyDropdown countySelected\",\n      onChange: self.handleCountyDropdown.bind(this),\n      value: self.state.countySelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"All\"), self.state.counties ? self.state.counties.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: item.value\n      }, item.label);\n    }) : \"\"))), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"cf-1 pad-right-0\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"color-grey\"\n    }, \"Area\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input styled-input-select\"\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"furnished\",\n      autoComplete: \"true\",\n      style: {\n        margin: 0\n      },\n      className: \"countyDropdown countySelected\",\n      onChange: self.handleAreaDropdown.bind(this),\n      value: self.state.areaSelected\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\"\n    }, \"All\"), self.state.areas ? self.state.areas.map((item, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: item.value\n      }, item.label);\n    }) : \"\")))))))), self.state.totalCount == 0 && this.props.isSubsLoaded ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container text-center mar-top-20 pad-btm-30\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"No \", this.propertyTypePlural, \"found\", self.state.countySelected ? /*#__PURE__*/React.createElement(\"span\", null, \"\\xA0in \", self.state.areaSelected ? self.state.areaSelected + \" of \" : '', \"county \", self.state.countySelected) : \"\", \".\\xA0 Click show all below to search other areas.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"blue-btn btns clearFilters\",\n      onClick: self.handleClearFilters,\n      type: \"button\"\n    }, \"Show all\")) : \"\", self.state.totalCount > 0 ? /*#__PURE__*/React.createElement(\"section\", {\n      className: \"paginationArea mar-top-20 \"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: 'mar-btm-20'\n    }, this.props.pageno > 1 ? 'Showing page 3 of ' : 'Found ', \"total \", self.state.totalCount ? self.state.totalCount : 'no', \" \", this.sluggedTitle, \". Browse through the apartments, houses, studios, 1 bed, 2 bed, 3 bed rooms available to \", this.sluggedTitleWithoutType, \". Choose county and area from the top right drop-down options. Click view details button by the \", this.sluggedType.toLowerCase(), \" to know more about it. Use the navigation below to find more \", this.sluggedTitle, \".\"), /*#__PURE__*/React.createElement(Pagination, {\n      pagination: self.state.pagination,\n      handleChoosePage: self.handleChoosePage,\n      parent: self\n    }))))) : \"\", Meteor.isServer ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"isservercheckdiv\"\n    }) : \"\", /*#__PURE__*/React.createElement(\"section\", {\n      className: \"proplist-sec property-list\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, this.propGrid())), self.state.totalCount > 0 ? /*#__PURE__*/React.createElement(\"section\", {\n      className: \"paginationArea subscribeTillPopop\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, /*#__PURE__*/React.createElement(Pagination, {\n      pagination: self.state.pagination,\n      handleChoosePage: self.handleChoosePage,\n      parent: self\n    }))))) : \"\", true ? /*#__PURE__*/React.createElement(\"section\", {\n      className: \"\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"homeLinks\",\n      className: \"mar-btm-30 amenities\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"amenitiy-block-removed\",\n      style: {\n        paddingTop: 0,\n        textAlign: \"center\"\n      }\n    }, this.props.searchCrumbs === undefined || this.props.searchCrumbs.length == 0 ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"searchsection\",\n      className: 'row'\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Search more properties to rent\"), /*#__PURE__*/React.createElement(\"p\", null, \"Chooes a link below to browse through more relavent properties to rent.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pad0\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5 col-sm-5 col-xs-12\"\n    }, this.state.searchCrumbs.c1 ? this.state.searchCrumbs.c1.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.searchCrumbs.c2 ? this.state.searchCrumbs.c2.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-sm-3 col-xs-12\"\n    }, this.state.searchCrumbs.c3 ? this.state.searchCrumbs.c3.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"))), this.props.fCrumbs === undefined || this.props.fCrumbs.length == 0 ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      className: 'row mar-top-30'\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Property types to rent\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pad0\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-sm-3 col-xs-12\"\n    }, this.state.fCrumbs.c1 ? this.state.fCrumbs.c1.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.fCrumbs.c2 ? this.state.fCrumbs.c2.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5 col-sm-5 col-xs-12\"\n    }, this.state.fCrumbs.c3 ? this.state.fCrumbs.c3.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"))), this.props.areaCrumbs === undefined || this.props.areaCrumbs.length == 0 ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      className: 'row mar-top-30'\n    }, /*#__PURE__*/React.createElement(\"h2\", null, self.state.countySelected, \" neighbourhoods\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pad0\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.areaCrumbs.c1 ? this.state.areaCrumbs.c1.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.areaCrumbs.c2 ? this.state.areaCrumbs.c2.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.areaCrumbs.c3 ? this.state.areaCrumbs.c3.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"))), this.props.countyCrumbs === undefined || this.props.countyCrumbs.length == 0 ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      className: 'row mar-top-30'\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Other counties\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pad0\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.countyCrumbs.c1 ? this.state.countyCrumbs.c1.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.countyCrumbs.c2 ? this.state.countyCrumbs.c2.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-sm-4 col-xs-12\"\n    }, this.state.countyCrumbs.c3 ? this.state.countyCrumbs.c3.map(function (crumb, i) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: i,\n        style: {\n          display: \"block\"\n        },\n        href: crumb.url\n      }, crumb.name);\n    }) : \"\"))))))) : \"\");\n  }\n\n  render() {\n    const self = this;\n    let totalCount = 0;\n\n    if (Meteor.isClient && this.propsListHTML == \"\") {\n      this.propsListHTML = $('#props_list').html();\n    }\n\n    if (Meteor.isClient) {\n      this.isServerSSRReq = $('#isservercheckdiv').html();\n      if (this.isServerSSRReq == \"\") this.isServerSSRReq = true;else this.isServerSSRReq = false;\n    } // if(this.propsListHTML) console.log(\"propsListHTML: \"+this.propsListHTML.length)\n\n\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), this.props.isSubsLoaded && self.state.auctions && self.state.properties ? this.mainAllPage() : this.isServerSSRReq && this.propsListHTML ? /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: this.propsListHTML\n      }\n    }) : /*#__PURE__*/React.createElement(\"section\", {\n      className: \"mar-top-20 mar-btm-20 no-print\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container text-center mar-top-20 pad-btm-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-holder\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mar-top-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: 'h2-div'\n    }, \"Loading...\"))))), /*#__PURE__*/React.createElement(MainLayoutFooter, null));\n  }\n\n}\n\n;\nvar startTime = Date.now();\nmodule.exportDefault(withTracker(() => {\n  var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n\n  function counties() {\n    var ret = [];\n\n    for (var i = 0; i < staticCounties.length; i++) {\n      if (!staticCounties[i]) continue;\n      ret.push({\n        label: titleCase(staticCounties[i]),\n        value: staticCounties[i]\n      });\n    }\n\n    return ret;\n  }\n\n  function areas() {\n    var distinctEntries = _.uniq(Collections.Areas.find({}, {\n      //Dynamically load areas based on the subscription.\n      sort: {\n        Area: 1\n      },\n      fields: {\n        Area: true\n      }\n    }).fetch().map(function (x) {\n      return x.Area;\n    }), true);\n\n    var ret = [];\n\n    for (var i = 0; i < distinctEntries.length; i++) {\n      if (!distinctEntries[i]) continue;\n      ret.push({\n        label: titleCase(distinctEntries[i]),\n        value: distinctEntries[i]\n      });\n    }\n\n    return ret;\n  }\n\n  function propertyTypes() {\n    var Config = Collections.Config.find().fetch();\n    Config = Config[0];\n    var propertyTypes = [];\n    if (Config) for (var i = 0; i < Config.propertyType.length; i++) {\n      propertyTypes.push({\n        label: titleCase(Config.propertyType[i].name),\n        value: Config.propertyType[i].value\n      });\n    }\n    return propertyTypes;\n  }\n\n  function areaSelected() {\n    var data = getSlugData();\n    var areaSelected = data.area;\n    if (areaSelected != false) return areaSelected;else {\n      var data = getSlugData();\n      return data.area;\n    }\n  }\n\n  function propertyTypeSelected() {\n    var data = getSlugData();\n    var propertyTypeSelected = data.propertyType;\n\n    if (propertyTypeSelected != false) {\n      propertyTypeSelected = propertyTypeSelected.toLowerCase();\n      return propertyTypeSelected;\n    } else {\n      var data = getSlugData();\n      propertyTypeSelected = data.propertyType;\n      propertyTypeSelected = propertyTypeSelected.toLowerCase();\n      return propertyTypeSelected;\n    }\n  }\n\n  function getPaginationData(totalResultsCount, currentPageNo, resultsPerPage) {\n    currentPageNo = parseInt(currentPageNo);\n    var pages = [],\n        prevPage = {},\n        nextPage = {};\n    var pgMin = currentPageNo - 4,\n        pgMax = currentPageNo + 5,\n        maxPages = Math.ceil(totalResultsCount / resultsPerPage);\n\n    if (!Number.isInteger(currentPageNo)) {\n      return {\n        \"prevPage\": prevPage,\n        \"pages\": pages,\n        \"nextPage\": nextPage\n      };\n    }\n\n    if (pgMin < 1) pgMin = 1;\n    if (pgMax < 1) pgMax = 1;\n    if (maxPages < 1) maxPages = 1;\n    if (pgMin > maxPages) currentPageNo = maxPages;\n    let tmp = {};\n    let href = '';\n    let cRoute = FlowRouter.current().route.name,\n        cParams = FlowRouter.current().params,\n        cQueryParams = FlowRouter.current().queryParams;\n\n    for (var i = pgMin; i <= maxPages; i++) {\n      cParams.pageno = i;\n      tmp = {\n        \"href\": FlowRouter.url(cRoute, cParams, cQueryParams),\n        \"text\": i\n      };\n\n      if (i == currentPageNo) {\n        tmp['href'] = 'javascript:void(0);';\n        tmp['current'] = true;\n      }\n\n      pages.push(tmp);\n    }\n\n    var prevPageNo = currentPageNo - 1,\n        nextPageNo = currentPageNo + 1;\n\n    if (prevPageNo < 1) {\n      prevPage['href'] = 'javascript:void(0)';\n      prevPage['text'] = 'Previous';\n      prevPage['disabled'] = 'disabled';\n    } else {\n      cParams.pageno = prevPageNo;\n      prevPage['href'] = FlowRouter.url(cRoute, cParams, cQueryParams), prevPage['prevPageNo'] = prevPageNo;\n      prevPage['text'] = 'Previous';\n      prevPage['disabled'] = '';\n    }\n\n    if (nextPageNo > maxPages) nextPageNo = maxPages;\n\n    if (nextPageNo == currentPageNo) {\n      nextPage['href'] = 'javascript:void(0)';\n      nextPage['text'] = 'Next';\n      nextPage['disabled'] = 'disabled';\n    } else {\n      cParams.pageno = nextPageNo;\n      nextPage['href'] = FlowRouter.url(cRoute, cParams, cQueryParams), nextPage['text'] = 'Next';\n      nextPage['nextPageNo'] = nextPageNo;\n      nextPage['disabled'] = '';\n    }\n\n    return {\n      \"prevPage\": prevPage,\n      \"pages\": pages,\n      \"nextPage\": nextPage\n    };\n  }\n\n  advancedCrumbs = function (countyParam, areaParam, propertyType) {\n    let fCrumbs = [],\n        tmpCrumbs = [],\n        areaCrumbs = [],\n        countyCrumbs = [];\n    if (propertyType) propertyType = propertyType.toLowerCase(); // Home / Search Residential Rentals / Dublin City Apartments for Rent / Dublin 2 Apartments for Rent\n    //Property Size\n    //Property Size - Property Type\n    //Property Size - Property Type - County\n    //Property Type - county\n    //Counties\n    //Areas\n    //Property Size - Property Type - area - County\n    //Property Size - area - County\n    //Property Type - area - county\n\n    fCrumbs.push({\n      url: generateSlugURL({\n        propertyType: 'studio'\n      }),\n      name: 'Studios'\n    }); //Property Size\n\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 1\n      }),\n      name: '1-Bed'\n    }); //Property Size\n\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 2\n      }),\n      name: '2-Beds'\n    });\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 3\n      }),\n      name: '3-Beds'\n    });\n    tmpCrumbs.push({\n      url: generateSlugURL({\n        cheapSort: true,\n        propertyType: 'house'\n      }),\n      name: 'Cheap Houses'\n    });\n    tmpCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 1,\n        propertyType: 'house'\n      }),\n      name: '1-Bed Houses'\n    }); //Property Size - Property Type\n\n    tmpCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 2,\n        propertyType: 'house'\n      }),\n      name: '2-Bed Houses'\n    });\n    tmpCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 3,\n        propertyType: 'house'\n      }),\n      name: '3-Bed Houses'\n    });\n    tmpCrumbs.push({\n      url: generateSlugURL({\n        luxurySort: true,\n        propertyType: 'house'\n      }),\n      name: 'Luxury Houses'\n    });\n\n    if (propertyType == 'house') {\n      fCrumbs = fCrumbs.concat(tmpCrumbs);\n    }\n\n    fCrumbs.push({\n      url: generateSlugURL({\n        cheapSort: true,\n        propertyType: 'apartment'\n      }),\n      name: 'Cheap Apartments'\n    });\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 1,\n        propertyType: 'apartment'\n      }),\n      name: '1-Bed Apartments'\n    }); //Property Size - Property Type\n\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 2,\n        propertyType: 'apartment'\n      }),\n      name: '2-Bed Apartments'\n    });\n    fCrumbs.push({\n      url: generateSlugURL({\n        bedCount: 3,\n        propertyType: 'apartment'\n      }),\n      name: '3-Bed Apartments'\n    });\n    fCrumbs.push({\n      url: generateSlugURL({\n        luxurySort: true,\n        propertyType: 'apartment'\n      }),\n      name: 'Luxury Apartments'\n    });\n\n    if (propertyType != 'house') {\n      fCrumbs = fCrumbs.concat(tmpCrumbs);\n    } //dublin-apartments\n    //Not doing dublin-houses due to less searches for Dublin apartments\n\n\n    for (var i = 0; i < staticCounties.length; i++) {\n      if (!staticCounties[i]) continue;\n      countyCrumbs.push({\n        url: generateSlugURL({\n          county: staticCounties[i]\n        }),\n        name: staticCounties[i] + ' Apartments'\n      });\n    }\n\n    if (countyParam) {\n      // var propertyType = curURL.propertyType;\n      // var county = curURL.county\n      // var area = curURL.area\n      // var maxRent = curURL.maxRent\n      // var country = curURL.country;\n      // var bedCount = curURL.bedCount;\n      // var luxurySort = curURL.luxurySort;\n      // var cheapSort = curURL.cheapSort;\n      //////////////////////////// WITH COUNTY\n      tmpCrumbs = [];\n      tmpCrumbs.push({\n        url: generateSlugURL({\n          cheapSort: true,\n          propertyType: 'house',\n          county: countyParam\n        }),\n        name: 'Cheap Houses to rent in ' + titleCase(countyParam)\n      });\n\n      if (propertyType == 'house') {\n        fCrumbs = fCrumbs.concat(tmpCrumbs);\n      }\n\n      fCrumbs.push({\n        url: generateSlugURL({\n          cheapSort: true,\n          propertyType: 'apartment',\n          county: countyParam\n        }),\n        name: 'Cheap Apartments to rent in ' + titleCase(countyParam)\n      });\n\n      if (propertyType != 'house') {\n        fCrumbs = fCrumbs.concat(tmpCrumbs);\n      }\n\n      fCrumbs.push({\n        url: generateSlugURL({\n          propertyType: 'studio',\n          county: countyParam\n        }),\n        name: 'Studio to rent in ' + titleCase(countyParam)\n      });\n      tmpCrumbs = [];\n      tmpCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 1,\n          propertyType: 'house',\n          county: countyParam\n        }),\n        name: '1-Bed Houses to rent in ' + titleCase(countyParam)\n      }); //Property Size - Property Type\n\n      tmpCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 2,\n          propertyType: 'house',\n          county: countyParam\n        }),\n        name: '2-Bed Houses to rent in ' + titleCase(countyParam)\n      });\n      tmpCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 3,\n          propertyType: 'house',\n          county: countyParam\n        }),\n        name: '3-Bed Houses to rent in ' + titleCase(countyParam)\n      });\n      tmpCrumbs.push({\n        url: generateSlugURL({\n          luxurySort: true,\n          propertyType: 'house',\n          county: countyParam\n        }),\n        name: 'Luxury Houses to rent in ' + titleCase(countyParam)\n      });\n\n      if (propertyType == 'house') {\n        fCrumbs = fCrumbs.concat(tmpCrumbs);\n      }\n\n      fCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 1,\n          propertyType: 'apartment',\n          county: countyParam\n        }),\n        name: '1-Bed Apartments to rent in ' + titleCase(countyParam)\n      }); //Property Size - Property Type\n\n      fCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 2,\n          propertyType: 'apartment',\n          county: countyParam\n        }),\n        name: '2-Bed Apartments to rent in ' + titleCase(countyParam)\n      });\n      fCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 3,\n          propertyType: 'apartment',\n          county: countyParam\n        }),\n        name: '3-Bed Apartments to rent in ' + titleCase(countyParam)\n      });\n      fCrumbs.push({\n        url: generateSlugURL({\n          luxurySort: true,\n          propertyType: 'apartment',\n          county: countyParam\n        }),\n        name: 'Luxury Apartments to rent in ' + titleCase(countyParam)\n      });\n\n      if (propertyType != 'house') {\n        fCrumbs = fCrumbs.concat(tmpCrumbs);\n      }\n\n      if (areaParam) {\n        //////////////////////////// WITH AREA COUNTY\n        tmpCrumbs = [];\n        tmpCrumbs.push({\n          url: generateSlugURL({\n            cheapSort: true,\n            propertyType: 'house',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: 'Cheap Houses to rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        });\n\n        if (propertyType == 'house') {\n          fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        fCrumbs.push({\n          url: generateSlugURL({\n            cheapSort: true,\n            propertyType: 'apartment',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: 'Cheap Apartments to rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        });\n\n        if (propertyType != 'house') {\n          fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        fCrumbs.push({\n          url: generateSlugURL({\n            propertyType: 'studio',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: 'Studio to rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        });\n        tmpCrumbs = [];\n        tmpCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 1,\n            propertyType: 'house',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: '1-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        }); //Property Size - Property Type\n\n        tmpCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 2,\n            propertyType: 'house',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: '2-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        });\n        tmpCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 3,\n            propertyType: 'house',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: '3-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        });\n        tmpCrumbs.push({\n          url: generateSlugURL({\n            luxurySort: true,\n            propertyType: 'house',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: 'Luxury Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        });\n\n        if (propertyType == 'house') {\n          fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        fCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 1,\n            propertyType: 'apartment',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: '1-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        }); //Property Size - Property Type\n\n        fCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 2,\n            propertyType: 'apartment',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: '2-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        });\n        fCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 3,\n            propertyType: 'apartment',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: '3-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        });\n        fCrumbs.push({\n          url: generateSlugURL({\n            luxurySort: true,\n            propertyType: 'apartment',\n            county: countyParam,\n            area: areaParam\n          }),\n          name: 'Luxury Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n        });\n\n        if (propertyType != 'house') {\n          fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n      }\n\n      var distinctEntries = _.uniq(Collections.Areas.find({}, {\n        //County: countyParam ; Dynamically load areas based on the subscription.\n        sort: {\n          Area: 1\n        },\n        fields: {\n          Area: true\n        }\n      }).fetch().map(function (x) {\n        return x.Area;\n      }), true);\n\n      areaCrumbs = [];\n\n      for (var i = 0; i < distinctEntries.length; i++) {\n        if (!distinctEntries[i]) continue; // if (distinctEntries[i] == areaParam) continue;//Don't show the same area in this list\n\n        areaCrumbs.push({\n          url: generateSlugURL({\n            county: countyParam,\n            area: distinctEntries[i]\n          }),\n          name: distinctEntries[i] + ' Apartments'\n        });\n      } // let ptypeString='';\n      // switch(propertyType){\n      //     case 'apartment': ptypeString = 'Apartments '; break;\n      //     case 'house': ptypeString = 'Houses '; break;\n      // }\n      // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'Studio for rent in county '+titleCase(PD.address.county)})\n      // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'1-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n      // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'2-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n      // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'3-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n\n    }\n\n    return {\n      fCrumbs: fCrumbs,\n      areaCrumbs: areaCrumbs,\n      countyCrumbs: countyCrumbs\n    };\n  };\n\n  var pageno = FlowRouter.getParam('pageno');\n  if (!pageno) pageno = 1;\n  var resperpage = 20;\n  var minBeds = FlowRouter.getQueryParam('minBeds');\n  if (!minBeds) minBeds = \"\";\n  var maxBeds = FlowRouter.getQueryParam('maxBeds');\n  if (!maxBeds) maxBeds = \"\";\n  var minRent = FlowRouter.getQueryParam('minRent');\n  if (!minRent) minRent = \"\";\n  var maxRent = FlowRouter.getQueryParam('maxRent');\n  if (!maxRent) maxRent = \"\";\n  var bedCount = FlowRouter.getQueryParam('bedCount');\n  if (!bedCount) bedCount = null;\n  var luxurySort = FlowRouter.getQueryParam('luxurySort');\n  if (!luxurySort) luxurySort = null;\n  var cheapSort = FlowRouter.getQueryParam('cheapSort');\n  if (!cheapSort) cheapSort = null;\n  var mostRecentSort = FlowRouter.getQueryParam('mostRecentSort');\n  if (!mostRecentSort) mostRecentSort = null;\n  var leastRecentSort = FlowRouter.getQueryParam('leastRecentSort');\n  if (!leastRecentSort) leastRecentSort = null;\n  var propertykey = FlowRouter.getQueryParam('propertykey');\n  if (!propertykey) propertykey = null;\n  var slug = FlowRouter.getParam('slug');\n  var query = FlowRouter.current().queryParams;\n  var current = FlowRouter.current();\n  var currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params, FlowRouter.current().queryParams); // try{if(!slug)slug = FlowRouter.current().params.slug;}catch(e){}\n\n  if (!slug || slug.indexOf('-in-') == -1) {\n    return {\n      isSubsLoaded: false\n    }; // if( (Date.now() - startTime) < 1000 )\n    //     return {\n    //         isSubsLoaded : false\n    //     }\n    // // this.render('notFound');\n    // var prevRoute = {name: 'home',args:{scrollTo:0} }\n    // Session.set('prevRoute',prevRoute);\n    // FlowRouter.go('pagenotfound');\n    // return;\n  }\n\n  let sortBySelected = \"mRecent\";\n  var sortOptions = {\n    updatedAt: -1\n  };\n\n  if (luxurySort) {\n    sortBySelected = \"descRent\";\n    sortOptions = {\n      rentMonthly: -1\n    };\n  } else if (cheapSort) {\n    sortBySelected = \"ascRent\";\n    sortOptions = {\n      rentMonthly: 1\n    };\n  } else if (mostRecentSort) {\n    sortBySelected = \"mRecent\";\n    sortOptions = {\n      updatedAt: -1\n    };\n  } else if (leastRecentSort) {\n    sortBySelected = \"lRecent\";\n    sortOptions = {\n      updatedAt: 1\n    };\n  }\n\n  const bLettingsSub = Meteor.subscribe(\"browseLettings\", {\n    viewName: 'browseLettings.view',\n    slug: slug,\n    pageno: pageno,\n    resperpage: resperpage,\n    query: query,\n    propertykey: propertykey\n  }, function () {\n    if (bLettingsSub.ready() && areasSub.ready() && Meteor.isClient) Session.set('subscriptionsReady', true);\n  });\n  Meteor.subscribe(\"total-houses-for-rent-count\", {\n    viewName: 'browseLettings.view',\n    slug: slug,\n    pageno: pageno,\n    resperpage: resperpage,\n    query: query,\n    propertykey: propertykey\n  });\n\n  if (Meteor.isServer) {\n    if (countsCollection == null) countsCollection = new Mongo.Collection('counts');\n\n    Counts.get = function countsGet(name) {\n      const count = countsCollection.findOne(name);\n      return count && count.count || 0;\n    };\n\n    Counts.has = function countsHas(name) {\n      return !!countsCollection.findOne(name);\n    };\n\n    totalCount = Counts.get(\"total-houses-for-rent-count\");\n  } else {\n    totalCount = Counts.get(\"total-houses-for-rent-count\");\n  }\n\n  var slugData = getSlugData();\n  var countySelected = slugData.county;\n  Meteor.subscribe('userData');\n  const areasSub = Meteor.subscribe('Areas', '', '', countySelected, '', '', function () {\n    if (bLettingsSub.ready() && areasSub.ready() && Meteor.isClient) Session.set('subscriptionsReady', true);\n  });\n  Meteor.subscribe('Config');\n  if (Meteor.isClient) Session.get('subscriptionsReady');\n\n  if (!bLettingsSub.ready() || !areasSub.ready()) {\n    return {\n      isSubsLoaded: false\n    };\n  } ////////// ADV BREADCRUMBS MORE LINKS\n\n\n  let advC = {\n    fCrumbs: [],\n    areaCrumbs: [],\n    countyCrumbs: []\n  };\n\n  if (true) {\n    advC = advancedCrumbs(slugData.county, slugData.area, slugData.propertyType);\n  } ////////// END ADV BREADCRUMBS\n\n\n  var title = ''; //slug.replace(/[-_]/g,' ')\n\n  title += slugData.propertyType ? slugData.propertyType + \" for\" : '';\n  title += title ? ' rent in' : 'Rent in';\n  title += slugData.area ? ' ' + slugData.area + \"\" : '';\n  title += slugData.county ? ' ' + slugData.county + \"\" : '';\n  title += ' Ireland';\n  var description = \"\";\n  description = 'Find';\n  description += slugData.propertyType ? ' an ' + slugData.propertyType + \" for\" : '';\n  description += ' rent in';\n  description += slugData.area ? ' ' + slugData.area + \"\" : '';\n  description += slugData.county ? ' ' + slugData.county + \"\" : '';\n  description += ' Ireland.';\n  description += \" Browse through the apartments, houses, studios, 1 bed, 2 bed, 3 bed rooms available to rent in Ireland.\"; // Find an apartment for rent in Ireland. Browse through the studio, apartments, houses, 1 bed, 2 bed, 3 bed rooms available to rent in Ireland.\n  // Found total 32 apartment for rent in Ireland. Browse through the studio, apartments, houses, 1 bed, 2 bed, 3 bed rooms available to rent in Ireland. Choose county and area from the top right drop-down options. Click view details button by the apartment to know more about it. Use the navigation below to find more apartment for rent in Ireland.\n\n  clearMeta();\n  let titleTmp = title + ' | SpotMyCrib';\n  if (titleTmp.length <= 75) title = titleTmp;\n  DocHead.setTitle(title);\n  DocHead.addMeta({\n    name: \"description\",\n    content: description\n  });\n  return {\n    // currentUserId: Meteor.userId(),\n    counties: counties(),\n    totalCount: totalCount,\n    pagination: getPaginationData(totalCount, pageno, 20),\n    pageno: pageno,\n    areas: areas(),\n    propertyTypes: propertyTypes(),\n    auctions: Collections.Auctions.find({}, {\n      sort: sortOptions\n    }).fetch(),\n    properties: Collections.Properties.find().fetch(),\n    areaSelected: areaSelected(),\n    countySelected: countySelected,\n    propertyTypeSelected: propertyTypeSelected(),\n    isSubsLoaded: true,\n    slug: slug,\n    fCrumbs: advC.fCrumbs,\n    areaCrumbs: advC.areaCrumbs,\n    countyCrumbs: advC.countyCrumbs,\n    minRentSelected: slugData.minRent,\n    maxRentSelected: slugData.maxRent,\n    minBedCountSelected: slugData.minBeds,\n    maxBedCountSelected: slugData.maxBeds,\n    sortBySelected: sortBySelected\n  };\n})(HousesForrent));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"LettingDetail.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/pages/LettingDetail.jsx                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n!function (module1) {\n  let Meteor;\n  module1.link(\"meteor/meteor\", {\n    Meteor(v) {\n      Meteor = v;\n    }\n\n  }, 0);\n  let React, Component;\n  module1.link(\"react\", {\n    default(v) {\n      React = v;\n    },\n\n    Component(v) {\n      Component = v;\n    }\n\n  }, 1);\n  let ReactDOM;\n  module1.link(\"react-dom\", {\n    default(v) {\n      ReactDOM = v;\n    }\n\n  }, 2);\n  let withTracker;\n  module1.link(\"meteor/react-meteor-data\", {\n    withTracker(v) {\n      withTracker = v;\n    }\n\n  }, 3);\n  let MainLayoutFooter;\n  module1.link(\"../layout/MainLayoutFooter.jsx\", {\n    default(v) {\n      MainLayoutFooter = v;\n    }\n\n  }, 4);\n  let MainLayoutHeader;\n  module1.link(\"../layout/MainLayoutHeader.jsx\", {\n    default(v) {\n      MainLayoutHeader = v;\n    }\n\n  }, 5);\n  let Collections;\n  module1.link(\"../../api/collections\", {\n    Collections(v) {\n      Collections = v;\n    }\n\n  }, 6);\n  let isArray;\n  module1.link(\"util\", {\n    isArray(v) {\n      isArray = v;\n    }\n\n  }, 7);\n  updateViewsCalled = false;\n  propertyKeyOfThisPage = '';\n  if (Meteor.isClient) Session.set('subscriptionsReady', false);\n  if (Meteor.isClient) Session.set('subscriptionsReady2', false);\n\n  function titleCase(str) {\n    if (!str) return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n  }\n\n  function dateFormat(text) {\n    var date = new Date(text);\n    if (date.toString() == \"Invalid Date\") return 'N/A';\n    return date.toDateString();\n  }\n\n  function addCommaToEach(arr) {\n    if (!arr) return '';\n    return arr.join(', ');\n  }\n\n  function nlToBr(str) {\n    if (!str) return '';\n    return str.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n  }\n\n  function validateMobileNumber(mobile) {\n    let tmp = mobile.split('+');\n    if (tmp.length > 1) mobile = tmp[1];\n    if (mobile.length < 6) return false;\n    return /^\\d+$/.test(mobile);\n  }\n\n  function attachEvents() {\n    $(\".confirmApplyBtn\").unbind().bind(\"click\", function () {\n      ga('send', 'event', 'PDPage', 'confirmApplyBtn', 'CAP: Confirm Apply Btn Clicked');\n    });\n    $(\".redirectToProfilePage\").unbind().bind(\"click\", function () {\n      redirectToProfilePageEvent();\n    });\n    $(\".pd_cap_btn\").unbind().bind(\"click\", function () {\n      console.log('pd_cap_btn');\n      ga('send', 'event', 'PDPage', 'CAPUploadRefBtnClicked', 'CAP: Upload Reference Btn Clicked');\n      redirectToProfilePageEvent();\n    });\n    $(\".pd_cap_a\").unbind().bind(\"click\", function () {\n      console.log('pd_cap_a');\n      ga('send', 'event', 'PDPage', 'CAPUploadRefAClicked', 'CAP: Upload Reference Anchor Link Clicked');\n      redirectToProfilePageEvent();\n    });\n    $(\".cap_closePopupBtn\").unbind().bind(\"click\", function () {\n      console.log('cap_closePopupBtn');\n      ga('send', 'event', 'PDPage', 'CAPClosePopupBtn', 'CAP: Cancle Apply Btn Clicked');\n      closePopupEvent();\n    });\n  }\n\n  function showConfDialog() {\n    $.fancybox({\n      'padding': 0,\n      'href': '#fully-confirm',\n      afterShow: function () {\n        attachEvents();\n      },\n      afterClose: function (template) {}\n    });\n  }\n\n  function redirectToProfilePageEvent() {\n    var prevRoute = {\n      name: FlowRouter.current().route.name,\n      args: {\n        key: FlowRouter.current().params.key\n      }\n    };\n    Session.set('prevRoute', prevRoute);\n    FlowRouter.go(\"account/profile\");\n    closePopupEvent();\n  }\n\n  function closePopupEvent() {\n    if ($) if ($.fancybox) $.fancybox.close();\n  }\n\n  function generateSlug(curURL) {\n    var propertyType = curURL.propertyType;\n    var county = curURL.county;\n    var area = curURL.area;\n    var maxRent = curURL.maxRent;\n    var country = curURL.country;\n    var bedCount = curURL.bedCount;\n    var luxurySort = curURL.luxurySort;\n    var cheapSort = curURL.cheapSort; // const territory = target.territory.value;\n\n    var slug = '';\n    var query = {};\n    if (propertyType) propertyType = propertyType.replace(/\\s+/g, '_');\n    if (county) county = county.replace(/\\s+/g, '_');\n    if (area) area = area.replace(/\\s+/g, '_');\n    if (country) country = country.replace(/\\s+/g, '_');\n    if (propertyType) slug = propertyType + \"-for-\";\n    slug += \"rent\"; // if(areaSelected||countySelected||country)\n\n    slug += \"-in-\";\n    if (!county) area = '';\n    if (area) slug += area;\n    if (area && county) slug += \"-\";\n    if (county) slug += county;\n    if (bedCount) query.bedCount = bedCount;\n    if (luxurySort) query.luxurySort = 1;\n    if (cheapSort) query.cheapSort = 1;\n    if (country) slug += \"-\" + country;else slug += \"-ireland\";\n    var range = [{\n      cur: \"eur\",\n      min: 400,\n      max: 10000\n    }];\n    var selectedCur = range[0];\n    if (maxRent && maxRent != selectedCur.max) query.maxRent = maxRent; // apartment-for-rent-in-dundrum-dublin-ireland\n    // apartment-for-rent-in-donnybroke-london-uk\n    // rent/apartment/dundrum/dublin\n    // rent/apartment/donnybroke/london/england/uk/\n\n    return [slugify(slug), query];\n  }\n\n  function generateSlugURL(curURL) {\n    var ret = generateSlug(curURL);\n    return FlowRouter.url('b', {\n      slug: ret[0]\n    }, ret[1]);\n  }\n\n  function slugify(text) {\n    if (!text) return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/,:;';\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n    const p = new RegExp(a.split('').join('|'), 'g');\n    return text.toString().toLowerCase().replace(/\\s+/g, '') // Replace spaces with \"\"\n    .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n    .replace(/&/g, '-and-') // Replace & with ''\n    .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n    .replace(/\\-\\-+/g, '-') // Replace multiple - with single ''\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, ''); // Trim - from end of text\n  }\n\n  function showLoginDialog() {\n    Session.set('showForgotForm', false);\n    Session.set('showSignupForm', false);\n    Session.set('showLoginSignupFancyBoxDialog', true);\n    Session.set('showLoginDialog', true);\n  }\n\n  function fixImageSize() {\n    var avgW = 0;\n    $('#relatedsection .thumbnail img').each(function () {\n      if (!avgW) avgW = $(this).width();else {\n        avgW += $(this).width();\n        avgW = avgW / 2;\n      }\n    });\n    if (!avgW) avgW = 250;\n    $('#relatedsection .thumbnail img').width('100%');\n    $('#relatedsection .thumbnail img').height(avgW * 0.7);\n  }\n\n  function chunkify(a, n, balanced) {\n    if (n < 2) return [a];\n    if (!Array.isArray(a)) return [];\n    var len = a.length,\n        out = [],\n        i = 0,\n        size;\n\n    if (len % n === 0) {\n      size = Math.floor(len / n);\n\n      while (i < len) {\n        out.push(a.slice(i, i += size));\n      }\n    } else if (balanced) {\n      while (i < len) {\n        size = Math.ceil((len - i) / n--);\n        out.push(a.slice(i, i += size));\n      }\n    } else {\n      n--;\n      size = Math.floor(len / n);\n      if (len % size === 0) size--;\n\n      while (i < size * n) {\n        out.push(a.slice(i, i += size));\n      }\n\n      out.push(a.slice(size * n));\n    }\n\n    return out;\n  }\n\n  function autoExpandDelayed() {\n    setTimeout(autoExpand, 500);\n  }\n\n  function autoExpand() {\n    let field = $('#bidMessage')[0];\n    if (!field) return; // Reset field height\n\n    field.style.height = 'inherit'; // Get the computed styles for the element\n\n    var computed = window.getComputedStyle(field); // Calculate the height\n\n    var height = parseInt(computed.getPropertyValue('border-top-width'), 10) + parseInt(computed.getPropertyValue('padding-top'), 10) + field.scrollHeight + parseInt(computed.getPropertyValue('padding-bottom'), 10) + parseInt(computed.getPropertyValue('border-bottom-width'), 10);\n    field.style.height = height - 20 + 'px'; //adding -40 due to the result of test case that its causing too much space extra in a normal way, may be due to font size, line height etc.\n  }\n\n  ;\n  isApplySuccessfulOpen = false;\n\n  function showApplySuccessfulDialog() {\n    // console.log(\"Apply showApplySuccessfulDialog\")\n    $.fancybox({\n      'padding': 0,\n      'href': '#apply-successful-popup',\n      afterShow: function () {\n        isApplySuccessfulOpen = true;\n      },\n      afterClose: function () {\n        isApplySuccessfulOpen = false;\n      }\n    });\n  }\n\n  class LettingDetail extends Component {\n    constructor(props) {\n      super(props);\n      var current = FlowRouter.current();\n      this.currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params);\n      var searchCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var fCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var areaCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var countyCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n\n      if (props.data) {\n        if (props.data.searchCrumbs) {\n          var chunks = chunkify(props.data.searchCrumbs, 3, true);\n          searchCrumbs = {\n            c1: chunks[0],\n            c2: chunks[1],\n            c3: chunks[2]\n          };\n        }\n\n        if (props.data.fCrumbs) {\n          var chunks = chunkify(props.data.fCrumbs, 3, true);\n          fCrumbs = {\n            c1: chunks[0],\n            c2: chunks[1],\n            c3: chunks[2]\n          };\n        }\n\n        if (props.data.areaCrumbs) {\n          var chunks = chunkify(props.data.areaCrumbs, 3, true);\n          areaCrumbs = {\n            c1: chunks[0],\n            c2: chunks[1],\n            c3: chunks[2]\n          };\n        }\n\n        if (props.data.countyCrumbs) {\n          var chunks = chunkify(props.data.countyCrumbs, 3, true);\n          countyCrumbs = {\n            c1: chunks[0],\n            c2: chunks[1],\n            c3: chunks[2]\n          };\n        }\n      }\n\n      this.state = {\n        isApplicationInProgress: false,\n        'searchCrumbs': searchCrumbs,\n        fCrumbs: fCrumbs,\n        areaCrumbs: areaCrumbs,\n        countyCrumbs: countyCrumbs,\n        personalMessage: \"\"\n      };\n      this.searchCrumbsLoaded = false;\n      this.applyNowBtnHandler = this.applyNowBtnHandler.bind(this);\n      this.redirectToProfilePageHandler = this.redirectToProfilePageHandler.bind(this);\n      this.confirmApplyBtnHandler = this.confirmApplyBtnHandler.bind(this);\n      this.cap_closePopupBtnHandler = this.cap_closePopupBtnHandler.bind(this);\n      this.cap_viewSimilarLettingsBtnHandler = this.cap_viewSimilarLettingsBtnHandler.bind(this);\n      this.backBtnHandler = this.backBtnHandler.bind(this);\n      this.noPropBackBtnHandler = this.noPropBackBtnHandler.bind(this);\n      this.pd_cap_btnHandler = this.pd_cap_btnHandler.bind(this);\n      this.pd_cap_aHandler = this.pd_cap_aHandler.bind(this);\n      this.headerApplyNowBtnHandler = this.headerApplyNowBtnHandler.bind(this);\n      this.mainUploadRefBtnHandler = this.mainUploadRefBtnHandler.bind(this);\n      this.mainUpdateRefBtnHandler = this.mainUpdateRefBtnHandler.bind(this);\n      this.mainApplyNowBtnHandler = this.mainApplyNowBtnHandler.bind(this);\n      this.createAlertBtnHandler = this.createAlertBtnHandler.bind(this);\n      updateViewsCalled = false;\n      this.propsListHTML = '';\n      this.isServerSSRReq = '';\n      this.handlePersonalMessageChange = this.handlePersonalMessageChange.bind(this);\n    }\n\n    backBtnHandler() {\n      var prevRoute = Session.get('prevRoute');\n\n      if (prevRoute) {\n        FlowRouter.go(prevRoute.name, prevRoute.args);\n        Session.set('prevRoute', false);\n      } else {\n        FlowRouter.go(\"/account/myproperies/\", {\n          pageno: 1\n        });\n      }\n    }\n\n    noPropBackBtnHandler() {\n      var prevRoute = Session.get('prevRoute');\n\n      if (prevRoute) {\n        FlowRouter.go(prevRoute.name, prevRoute.args);\n        Session.set('prevRoute', false);\n      } else {\n        FlowRouter.go(\"home\");\n      }\n    }\n\n    cap_closePopupBtnHandler() {\n      console.log('cap_closePopupBtn');\n      ga('send', 'event', 'PDPage', 'CAPClosePopupBtn', 'CAP: Cancle Apply Btn Clicked');\n      closePopupEvent();\n    }\n\n    cap_viewSimilarLettingsBtnHandler() {\n      console.log('cap_viewSimilarLettingsBtnHandler');\n      ga('send', 'event', 'PDPage', 'CAPViewSimilarLettingsBtn', 'CAP: View Simiar Lettings Btn Clicked'); //CAP: Confirm Apply Popup\n\n      closePopupEvent();\n      var element = document.getElementById(\"relatedsection\");\n      element.scrollIntoView();\n    }\n\n    redirectToProfilePageHandler() {\n      redirectToProfilePageEvent();\n    }\n\n    handlePersonalMessageChange(event) {\n      this.setState({\n        personalMessage: event.target.value\n      });\n      autoExpandDelayed();\n    }\n\n    confirmApplyBtnHandler() {\n      console.log('confirmApplyBtn');\n      ga('send', 'event', 'PDPage', 'confirmApplyBtn', 'CAP: Confirm Apply Btn Clicked');\n      var auctionId = this.props.data._id;\n      var price = $('#bidPrice').val();\n      price = parseInt(price);\n\n      if (isNaN(price)) {\n        alert(\"Please enter a valid offer price.\");\n        return;\n      } // var bidMessage = $('#bidMessage').val();\n\n\n      var bidMessage = this.state.personalMessage;\n      bidMessage = bidMessage.substring(0, 500);\n      var min = this.props.data.price * 0.7,\n          max = this.props.data.price * 1.5;\n\n      if (!auctionId) {\n        console.log(\"invalid data\");\n        return;\n      }\n\n      if (price < min || price > max) {\n        alert(\"Offer price should be between \" + min + \" and \" + max + \". Please adjust your offer price again.\");\n        return;\n      } // debugger;\n\n\n      this.setState({\n        isApplicationInProgress: true\n      });\n\n      this.placeBidCallback = function (error, result) {\n        this.setState({\n          isApplicationInProgress: false\n        });\n\n        if (error) {\n          console.log(error);\n          var tmp = Session.get(\"showErrorDlg\");\n          if (!tmp) tmp = [];\n          tmp.push(\"Failed applying. Please try again, try checking your internet connectivity. Contact us if needed.\");\n          Session.set(\"showErrorDlg\", tmp);\n          return;\n        }\n\n        if (result.status == 'Success') {\n          console.log(\"Success\");\n          closePopupEvent(); //Dont close it, instead show the successful part of that dialog\n\n          setTimeout(showApplySuccessfulDialog, 500);\n          setTimeout(function () {\n            if (!isApplySuccessfulOpen) showApplySuccessfulDialog();\n          }, 1500);\n          setTimeout(function () {\n            if (!isApplySuccessfulOpen) showApplySuccessfulDialog();\n          }, 3000);\n        }\n      };\n\n      this.placeBidCallback = this.placeBidCallback.bind(this);\n      Meteor.call('placeBid', [auctionId, price, bidMessage], this.placeBidCallback);\n      var user = Accounts.user();\n      if (user) if (user.profile) if (!user.profile.mobile) {\n        let mobile = false,\n            isValid = false;\n        mobile = prompt(\"You don't have a mobile number attached to your profile. Please enter mobile to proceed. \");\n        let tmp = mobile.split('+');\n        if (tmp.length > 1) mobile = tmp[1];\n        if (validateMobileNumber(mobile)) isValid = true;\n\n        while (!isValid) {\n          //This is an un limited loop of mobile number.\n          mobile = prompt(\"Error! invalid format. Please enter mobile number in format +353 893456789.\");\n          if (validateMobileNumber(mobile)) isValid = true;\n        } // if(/^\\d{10}$/.test(mobile)) {\n\n\n        if (isValid) {\n          Meteor.call('updateMobile', mobile, function (error, result) {\n            if (error) {\n              console.log(error.error);\n              var tmp = Session.get(\"showErrorDlg\");\n              var msg = 'Mobile number update failed. Please try again. Contact us if needed.';\n              tmp.push(msg);\n              Session.set(\"showErrorDlg\", tmp);\n              return;\n            }\n          });\n        }\n      }\n    }\n\n    applyNowBtnHandler(event) {\n      // Prevent default browser form submit\n      if (event) event.preventDefault();\n      console.log(\"Apply now btn clicked\");\n\n      if (!this.props.user) {\n        Session.set('loginFromApplyNowBtn', true);\n        showLoginDialog();\n        return;\n      } // if(user._id == this._createdByAgent ){\n      //     console.log(\"Owner cannot apply for the house.\");\n      //     return;\n      // }\n      //Do mobile verification\n\n\n      if (this.props.user.profile) if (this.props.user.profile.personalMessage && !this.state.personalMessage) {\n        //Do this only if the current sessions personal message is empty\n        this.setState({\n          personalMessage: this.props.user.profile.personalMessage\n        });\n      }\n\n      if (this.props.myBid) {\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Error: You have an existing application, please refresh the page.\");\n        Session.set(\"showErrorDlg\", tmp);\n        console.log(\"Already has a bid\");\n        return;\n      }\n\n      this.afterCFun = function () {\n        attachEvents();\n        setTimeout(function () {\n          $('#bidPrice').focus().select();\n          autoExpandDelayed();\n        }, 500);\n      };\n\n      this.afterCFun = this.afterCFun.bind(this);\n      $.fancybox({\n        'padding': 0,\n        'href': '#confirm-apply-pop',\n        afterShow: this.afterCFun,\n        afterClose: function () {}\n      });\n    }\n\n    headerApplyNowBtnHandler() {\n      console.log('headerApplyNowBtn');\n      ga('send', 'event', 'PDPage', 'HeaderApplyNowBtnClicked', 'Header: Apply now Btn Clicked');\n      this.applyNowBtnHandler();\n    }\n\n    mainApplyNowBtnHandler(event) {\n      console.log('mainApplyNowBtn');\n      ga('send', 'event', 'PDPage', 'ApplyNowBtnClicked', 'Main: Apply now Btn Clicked');\n      this.applyNowBtnHandler(event);\n    }\n\n    pd_cap_btnHandler(event) {\n      if (event) event.preventDefault();\n      console.log('pd_cap_btn');\n      ga('send', 'event', 'PDPage', 'CAPUploadRefBtnClicked', 'CAP: Upload Reference Btn Clicked');\n      redirectToProfilePageEvent();\n    }\n\n    pd_cap_aHandler(event) {\n      if (event) event.preventDefault();\n      console.log('pd_cap_a');\n      ga('send', 'event', 'PDPage', 'CAPUploadRefAClicked', 'CAP: Upload Reference Anchor Link Clicked');\n      redirectToProfilePageEvent();\n    }\n\n    mainUploadRefBtnHandler() {\n      console.log('mainUploadRefBtn');\n      ga('send', 'event', 'PDPage', 'UploadRefBtnClicked', 'Main: Upload Reference Btn Clicked');\n      redirectToProfilePageEvent();\n    }\n\n    mainUpdateRefBtnHandler() {\n      console.log('mainUpdateRefBtn');\n      ga('send', 'event', 'PDPage', 'UpdateRefBtnClicked', 'Main: Update Reference Btn Clicked');\n      redirectToProfilePageEvent();\n    }\n\n    createAlertBtnHandler() {\n      console.log('createAlertBtnHandler');\n      ga('send', 'event', 'PDPage', 'createAlertBtnClicked', 'Main: Create Alert Btn Clicked');\n      Session.set('showCreateAlertPopup', true);\n    }\n\n    componentDidMount() {\n      $(document).ready(function () {\n        $('.scroll-menu-div').hide();\n        $(window).on(\"scroll\", function () {\n          var scrollPercent = 100 * $(window).scrollTop() / ($(document).height() - $(window).height());\n\n          if (scrollPercent > 10) {\n            $('.scroll-menu-div').fadeIn();\n            $(\".scroll-menu-div\").addClass('fixed-header');\n          } else {\n            $('.scroll-menu-div').hide();\n            $(\".scroll-menu-div\").removeClass(\"fixed-header\");\n          }\n        });\n        setTimeout(function () {\n          try {\n            jQuery(\"html,body\").animate({\n              scrollTop: 0\n            }, 250);\n          } catch (e) {\n            document.body.scrollTop = document.documentElement.scrollTop = 0;\n          }\n\n          $('.scroll-menu-div').hide();\n          $(\".scroll-menu-div\").removeClass(\"fixed-header\");\n        }, 500);\n      });\n      setTimeout(fixImageSize, 1000);\n      setTimeout(fixImageSize, 3000);\n      setTimeout(fixImageSize, 5000); // setTimeout(function(){addthis.init();addthis.layers.refresh();},5000)\n\n      $(window).resize(fixImageSize);\n      $(window).resize(autoExpandDelayed);\n    }\n\n    componentDidUpdate() {\n      setTimeout(fixImageSize, 1000);\n      setTimeout(fixImageSize, 3000);\n      setTimeout(fixImageSize, 5000);\n\n      if (this.props.data && !updateViewsCalled) {\n        updateViewsCalled = true;\n        Meteor.call('updateViews', this.props.data._id);\n      }\n\n      if (propertyKeyOfThisPage && this.props.data.lettingAuctionCode) {\n        if (this.props.data.lettingAuctionCode != propertyKeyOfThisPage) {\n          //lettingAuctionCode changed, means page is changed\n          //Constructor elements needs to be called again\n          updateViewsCalled = true;\n          Meteor.call('updateViews', this.props.data._id);\n          this.setState({\n            isApplicationInProgress: false,\n            personalMessage: \"\"\n          });\n          this.searchCrumbsLoaded = false;\n          Session.set('subscriptionsReady2', false);\n          propertyKeyOfThisPage = this.props.data.lettingAuctionCode;\n          setTimeout(function () {\n            try {\n              jQuery(\"html,body\").animate({\n                scrollTop: 0\n              }, 250);\n            } catch (e) {\n              document.body.scrollTop = document.documentElement.scrollTop = 0;\n            }\n          }, 500);\n        }\n      }\n    }\n\n    componentWillReceiveProps(props) {\n      var searchCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var fCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var areaCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n      var countyCrumbs = {\n        c1: [],\n        c2: [],\n        c3: []\n      };\n\n      if (props.data.searchCrumbs != this.state.searchCrumbs) {\n        var chunks = chunkify(props.data.searchCrumbs, 3, true);\n        searchCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        }; // console.log('in the setState for searchCrumbs')\n\n        this.setState({\n          'searchCrumbs': searchCrumbs\n        });\n      }\n\n      if (props.data.fCrumbs != this.state.fCrumbs) {\n        var chunks = chunkify(props.data.fCrumbs, 3, true);\n        fCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        }; // console.log('in the setState for fCrumbs')\n\n        this.setState({\n          fCrumbs: fCrumbs\n        });\n      }\n\n      if (props.data.areaCrumbs != this.state.areaCrumbs) {\n        var chunks = chunkify(props.data.areaCrumbs, 3, true);\n        areaCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        }; // console.log('in the setState for areaCrumbs')\n\n        this.setState({\n          areaCrumbs: areaCrumbs\n        });\n      }\n\n      if (props.data.countyCrumbs != this.state.countyCrumbs) {\n        var chunks = chunkify(props.data.countyCrumbs, 3, true);\n        countyCrumbs = {\n          c1: chunks[0],\n          c2: chunks[1],\n          c3: chunks[2]\n        }; // console.log('in the setState for countyCrumbs')\n\n        this.setState({\n          countyCrumbs: countyCrumbs\n        });\n      }\n    } // currentURL:function () {\n    //     return Router.current().originalUrl;\n    // },\n\n\n    isCurUserBid() {\n      //todo: test this\n      debugger;\n      if (!this.props.user) return false;\n      if (this.userId == user._id) return true;\n      return false;\n    }\n\n    renderMain() {\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"section\", {\n        className: \"scroll-menu-div\",\n        style: {\n          zIndex: '1000'\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"scroll-menu\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"left-menu\"\n      }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n        href: this.currentURL + \"#imagessection\",\n        className: \"active scroll1\"\n      }, \"PHOTOS\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n        href: this.currentURL + \"#detailssection\",\n        className: \"scroll1\"\n      }, \"DETAILS\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n        href: this.currentURL + \"#amenitiessection\",\n        className: \"scroll1\"\n      }, \"AMENITIES\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"right-menu\"\n      }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"left-line\"\n      }, /*#__PURE__*/React.createElement(\"p\", null, \"Applications received\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"pad-btm-0 text-center\"\n      }, this.props.data.applicationsReceivedCount)), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"left-line\"\n      }, /*#__PURE__*/React.createElement(\"p\", null, \"Owner's Current Rent\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"pad-btm-0 text-center\"\n      }, \"\\u20AC \", this.props.data.price + \" (\" + this.props.data.rentType + \")\")), /*#__PURE__*/React.createElement(\"li\", null, this.props.alreadyLeased ? /*#__PURE__*/React.createElement(\"a\", {\n        href: this.currentURL + '#relatedsection',\n        className: \"green-btn  btns\",\n        type: \"button\"\n      }, \"View similar lettings\") : this.props.myBid ? /*#__PURE__*/React.createElement(\"button\", {\n        className: \"green-btn  btns viewMyApplication\",\n        type: \"button\"\n      }, \"Already applied\") : /*#__PURE__*/React.createElement(\"buttons\", {\n        onClick: this.headerApplyNowBtnHandler,\n        className: \"blue-btn btns headerApplyNowBtn applyNowBtn\"\n      }, \"Apply for this \", this.props.PD.type))))))), /*#__PURE__*/React.createElement(\"section\", {\n        className: \"banner\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"imagessection\",\n        className: \"col-md-7 padding0\"\n      }, /*#__PURE__*/React.createElement(\"figure\", null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"banner-holder\"\n      }, /*#__PURE__*/React.createElement(ImagesSlider, {\n        images: this.props.sliderImages\n      })), this.props.isAgent ? /*#__PURE__*/React.createElement(\"figcaption\", null, /*#__PURE__*/React.createElement(\"h2\", null, this.props.isAgent.name), /*#__PURE__*/React.createElement(\"h5\", {\n        style: {\n          padding: 0\n        }\n      }, this.props.isAgent.address1)) : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-5 purva-bg\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"purva\"\n      }, this.props.isAgent ? /*#__PURE__*/React.createElement(\"img\", {\n        src: this.props.isAgent.logourl,\n        alt: this.props.isAgent.name,\n        style: this.props.isAgent.style\n      }) : \"\", /*#__PURE__*/React.createElement(\"h1\", null, titleCase(this.props.PD.address.address), this.props.PD.address.area ? /*#__PURE__*/React.createElement(\"span\", null, \", \", titleCase(this.props.PD.address.area)) : '', this.props.PD.address.county ? /*#__PURE__*/React.createElement(\"span\", null, \", \", titleCase(this.props.PD.address.county)) : ''), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          marginBottom: '10px'\n        }\n      }, titleCase(this.props.PD.type), \" to rent in \", titleCase(this.props.PD.address.area), this.props.PD.address.county ? /*#__PURE__*/React.createElement(\"span\", null, \", \", titleCase(this.props.PD.address.county)) : '', \". Its \", this.props.PD.furnished ? \"a furnished\" : \"an Unfurnished\", \" \", titleCase(this.props.PD.type), \" with \", this.props.PD.bedroomsCount, \" beds, \", this.props.PD.baths, \" baths, \", this.props.PD.ensuiteCount ? this.props.PD.ensuiteCount : \"no\", \" Ensuite and \", this.props.PD.doubleBedCount ? this.props.PD.doubleBedCount : \"has no\", \" Double bed property/accommodation, your next my home. \", this.props.isAgent ? /*#__PURE__*/React.createElement(\"span\", null, \"Its posted by \", this.props.isAgent.name, \".\") : \"\", \" Click apply below to send your interest to the landlord and he would contact you soon. \"), /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: '#b3b3b3'\n        }\n      }, \"Views\"), \" :  \", this.props.data.views)), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n        href: FlowRouter.url('howitworks')\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: '#39b54a',\n          fontFamily: '\"montserratregular\"',\n          padding: 0\n        }\n      }, \"How it works?\"))), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n        href: FlowRouter.url('contactus')\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: '#39b54a',\n          fontFamily: '\"montserratregular\"',\n          padding: 0\n        }\n      }, \"Need help?\")))), /*#__PURE__*/React.createElement(\"p\", null, \"\\xA0\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"purva-developer\"\n      }, /*#__PURE__*/React.createElement(\"h5\", null, /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: '#b3b3b3'\n        }\n      }, \"Owner's Current Rent :\"), \"\\u20AC \", this.props.data.price + \" (\" + this.props.data.rentType + \")\")), this.props.alreadyLeased ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontFamily: '\"montserratregular\"'\n        }\n      }, \"This property is already leased. Please use one of the options below.\") : \"\", /*#__PURE__*/React.createElement(\"div\", {\n        className: \"purva-btns\"\n      }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, this.props.alreadyLeased ? /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"a\", {\n        href: this.currentURL + '#relatedsection',\n        className: \"green-btn  btns\",\n        type: \"button\"\n      }, \"View similar lettings\"), /*#__PURE__*/React.createElement(\"a\", {\n        href: this.currentURL + '#searchsection',\n        className: \"transparent-btn btns mar-left-10\",\n        type: \"button\"\n      }, \"Search More\")) : this.props.myBid ? /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"green-btn  btns viewMyApplication\",\n        type: \"button\"\n      }, \"Already applied\"), this.hasAllReqReferences ? /*#__PURE__*/React.createElement(\"button\", {\n        className: \"transparent-btn btns mainUpdateRefBtn mar-left-10\",\n        onClick: this.mainUpdateRefBtnHandler,\n        type: \"button\",\n        title: \"View your references\"\n      }, \"Update references\") : /*#__PURE__*/React.createElement(\"button\", {\n        className: \"transparent-btn btns mainUploadRefBtn mar-left-10\",\n        onClick: this.mainUploadRefBtnHandler,\n        type: \"button\",\n        title: \"You dont have all your references updated in your profile. Missing files are  {addCommaToEach(this.props.refListArr)}\"\n      }, \"Upload references\")) : /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"buttons\", {\n        onClick: this.mainApplyNowBtnHandler,\n        className: \"blue-btn btns mainApplyNowBtn applyNowBtn\"\n      }, \"Apply for this \", this.props.PD.type), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"hidden-xs\"\n      }, \"\\xA0\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"visible-xs\",\n        style: {\n          height: 1\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", null)), this.hasAllReqReferences ? /*#__PURE__*/React.createElement(\"button\", {\n        className: \"transparent-btn btns mainUpdateRefBtn\",\n        onClick: this.mainUpdateRefBtnHandler,\n        type: \"button\",\n        title: \"View your references\"\n      }, \"Update references\") : /*#__PURE__*/React.createElement(\"button\", {\n        className: \"transparent-btn btns mainUploadRefBtn\",\n        onClick: this.mainUploadRefBtnHandler,\n        type: \"button\",\n        title: \"You dont have all your references updated in your profile. Missing files are  \" + addCommaToEach(this.props.refListArr)\n      }, \"Upload references\")), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"hidden-xs\"\n      }, \"\\xA0\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"visible-xs\",\n        style: {\n          height: 1\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"green-btn btns\",\n        onClick: this.createAlertBtnHandler,\n        type: \"button\",\n        title: \"Be the first to hear about the latest lettings in your area. Signup for our email alerts.\"\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"glyphicon glyphicon-bell\"\n      }), \" Create Alert\"))))))))), /*#__PURE__*/React.createElement(\"section\", {\n        className: \"main-sec\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"detailssection\",\n        className: \"border mar-btm-20 background-white\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"head-border-bottom head-border-bottomTitleArea\"\n      }, /*#__PURE__*/React.createElement(\"h2\", null, \"Details\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"developer proj-dtls \"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"clearfix\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-9\"\n      }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"list-inline\"\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: true\n      }, /*#__PURE__*/React.createElement(\"h3\", null, \"Rent type\"), /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"pad-btm-0\"\n      }, titleCase(this.props.data.rentType))), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"left-line\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, \"Available from\"), /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"pad-btm-0\"\n      }, dateFormat(this.props.data.readyFrom))), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"left-line\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, \"Available until\"), /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"pad-btm-0\"\n      }, this.props.data.lease))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"project-detail\"\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"bdr-btm\"\n      }, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"color-grey\"\n      }, \"Location\"), /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"heading-reg\"\n      }, \" \", titleCase(this.props.PD.address.address), \", \", titleCase(this.props.PD.address.area), \", \", titleCase(this.props.PD.address.county))), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"pad-left-35\"\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"color-grey\"\n      }, \"BER\"), /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"heading-reg\"\n      }, \" \", addCommaToEach(this.props.PD.BER)))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mar-top-20 \"\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"heading-reg\"\n      }, \"Description\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"color-grey pad-btm-10\",\n        dangerouslySetInnerHTML: {\n          __html: nlToBr(this.props.PD.about)\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-3\"\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"heading-reg\"\n      }, \"Bedrooms : \", this.props.PD.bedroomsCount), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"handed-proj-bg clearfix\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-6\"\n      }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, this.props.PD.doubleBedCount), /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"pad-btm-0\"\n      }, \"Double\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-6\",\n        style: {\n          padding: 0\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"left-line\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, this.props.PD.ensuiteCount), /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"pad-btm-0\"\n      }, \"Ensuite\")))), /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"heading-reg mar-top-30\"\n      }, \"Contact\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"handed-proj-bg clearfix\"\n      }, this.props.alreadyLeased ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontFamily: '\"montserratregular\"'\n        },\n        className: \"text-center\"\n      }, \"This property is already leased.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"a\", {\n        href: this.currentURL + '#relatedsection',\n        title: \"Browse through more available lettings for rent in \" + titleCase(this.props.PD.address.area) + \", \" + titleCase(this.props.PD.address.county)\n      }, \"View similar lettings\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"a\", {\n        href: this.currentURL + '#searchsection',\n        title: \"Search more available properties for rent in \" + titleCase(this.props.PD.address.area) + \", \" + titleCase(this.props.PD.address.county)\n      }, \"Search More\")) : this.props.data.primaryContact.phone ? this.props.PD.contacts.map(function (contact, i) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: i,\n          className: \"col-md-12\"\n        }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", null, titleCase(contact.name), \" : \", /*#__PURE__*/React.createElement(\"a\", {\n          href: \"tel:\" + contact.phone\n        }, contact.phone))));\n      }) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, \"Apply for this property to email owner\")))))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"amenitiessection\",\n        className: \"mar-btm-30 amenities\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"head-border-bottom head-border-bottomTitleArea\"\n      }, /*#__PURE__*/React.createElement(\"h2\", null, \"Amenities\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"amenitiy-block\"\n      }, /*#__PURE__*/React.createElement(\"ul\", null, this.props.PD.amenitiesWithImgs.map(function (aminity, i) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: i\n        }, /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"img\", {\n          src: aminity.src\n        })), titleCase(aminity.name)));\n      })))), this.props.data.relatedProps ? /*#__PURE__*/React.createElement(\"div\", {\n        id: \"relatedsection\",\n        className: \"mar-btm-30 amenities subscribeTillPopop\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"head-border-bottom head-border-bottomTitleArea\"\n      }, /*#__PURE__*/React.createElement(\"h2\", null, \"Similar \", titleCase(this.props.PD.type), \" to rent in \", titleCase(this.props.PD.address.area), this.props.PD.address.county ? /*#__PURE__*/React.createElement(\"span\", null, \", \", titleCase(this.props.PD.address.county)) : '')), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"amenitiy-block\",\n        style: {\n          float: 'left',\n          display: 'block'\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          margin: '0 20px'\n        }\n      }, \"Below are few more \", titleCase(this.props.PD.type), \" to rent in \", this.props.PD.address.area ? /*#__PURE__*/React.createElement(\"span\", null, titleCase(this.props.PD.address.area)) : '', this.props.PD.address.county ? /*#__PURE__*/React.createElement(\"span\", null, \", \", titleCase(this.props.PD.address.county)) : '', \". They are also located near \", titleCase(this.props.PD.address.address), this.props.PD.address.area ? /*#__PURE__*/React.createElement(\"span\", null, \", \", titleCase(this.props.PD.address.area)) : '', this.props.PD.address.county ? /*#__PURE__*/React.createElement(\"span\", null, \", \", titleCase(this.props.PD.address.county)) : ''), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"thumbnails thumbRelated\"\n      }, this.props.data.relatedProps.map(function (property, i) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          className: \"span4\",\n          key: i,\n          style: {\n            float: 'left'\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          href: FlowRouter.url('rent', {\n            slug: property.slug,\n            key: property.auction.lettingAuctionCode\n          })\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"thumbnail\"\n        }, property.firstImg ? property.firstImg.url ? property.firstImg.url.indexOf('amazonaws') ? /*#__PURE__*/React.createElement(\"img\", {\n          src: \"https://process.filestackapi.com/AIPACLEs7ShGwwPh6fMTxz/resize=width:250/\" + property.firstImg.url,\n          alt: titleCase(property.address.address) + property.address.area ? \", \" + titleCase(property.address.area) : '' + property.address.county ? \", \" + titleCase(property.address.county) : ''\n        }) : /*#__PURE__*/React.createElement(\"img\", {\n          src: \"https://process.filestackapi.com/resize=width:250/\" + property.firstImg.url,\n          alt: titleCase(property.address.address) + property.address.area ? \", \" + titleCase(property.address.area) : '' + property.address.county ? \", \" + titleCase(property.address.county) : ''\n        }) : /*#__PURE__*/React.createElement(\"img\", {\n          src: cdnPath(\"/images/no-photo.png\"),\n          style: {\n            width: 250,\n            height: 188\n          }\n        }) : \"\", /*#__PURE__*/React.createElement(\"h3\", null, titleCase(property.address.address), property.address.area ? /*#__PURE__*/React.createElement(\"as\", null, \", \", titleCase(property.address.area)) : '', property.address.county ? /*#__PURE__*/React.createElement(\"as\", null, \", \", titleCase(property.address.county)) : '', \" for rent\"))));\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"amenitiy-block\",\n        style: {\n          paddingTop: 0\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"searchsection\",\n        className: 'bottomcrumbs row'\n      }, /*#__PURE__*/React.createElement(\"h2\", null, \"Search more properties to rent\"), /*#__PURE__*/React.createElement(\"p\", null, \"Chooes a link below to browse through more relavent properties to rent.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12 col-sm-12 col-xs-12 pad0\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-5 col-sm-5 col-xs-12\"\n      }, this.state.searchCrumbs.c1 ? this.state.searchCrumbs.c1.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 col-sm-4 col-xs-12\"\n      }, this.state.searchCrumbs.c2 ? this.state.searchCrumbs.c2.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-3 col-sm-3 col-xs-12\"\n      }, this.state.searchCrumbs.c3 ? this.state.searchCrumbs.c3.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: 'bottomcrumbs row'\n      }, /*#__PURE__*/React.createElement(\"h2\", null, \"Property types to rent\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12 col-sm-12 col-xs-12 pad0\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-3 col-sm-3 col-xs-12\"\n      }, this.state.fCrumbs.c1 ? this.state.fCrumbs.c1.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 col-sm-4 col-xs-12\"\n      }, this.state.fCrumbs.c2 ? this.state.fCrumbs.c2.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-5 col-sm-5 col-xs-12\"\n      }, this.state.fCrumbs.c3 ? this.state.fCrumbs.c3.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: 'bottomcrumbs row'\n      }, /*#__PURE__*/React.createElement(\"h2\", null, this.props.PD.address.county, \" neighbourhoods\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12 col-sm-12 col-xs-12 pad0\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 col-sm-4 col-xs-12\"\n      }, this.state.areaCrumbs.c1 ? this.state.areaCrumbs.c1.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 col-sm-4 col-xs-12\"\n      }, this.state.areaCrumbs.c2 ? this.state.areaCrumbs.c2.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 col-sm-4 col-xs-12\"\n      }, this.state.areaCrumbs.c3 ? this.state.areaCrumbs.c3.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: 'bottomcrumbs row'\n      }, /*#__PURE__*/React.createElement(\"h2\", null, \"Other counties to rent\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12 col-sm-12 col-xs-12 pad0\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 col-sm-4 col-xs-12\"\n      }, this.state.countyCrumbs.c1 ? this.state.countyCrumbs.c1.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 col-sm-4 col-xs-12\"\n      }, this.state.countyCrumbs.c2 ? this.state.countyCrumbs.c2.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 col-sm-4 col-xs-12\"\n      }, this.state.countyCrumbs.c3 ? this.state.countyCrumbs.c3.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: i,\n          style: {\n            display: \"block\"\n          },\n          href: crumb.url\n        }, crumb.name);\n      }) : \"\"))))) : \"\"))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"apply-successful-popup\",\n        style: {\n          display: 'none'\n        },\n        className: \"verification-div1 isApplicationSuccessful\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"refund-div\"\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"green-text\"\n      }, \"Application Successful\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"profile-text\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, \"Good Job!\"), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          padding: 0\n        }\n      }, \"Landlord is notified of your application and would contact you via email if successful.\"), false ? \"\" : this.hasAllReqReferences ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\"\n      }, /*#__PURE__*/React.createElement(\"hr\", null), /*#__PURE__*/React.createElement(\"h3\", null, \"Improve your chances of securing this letting\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"color-text\",\n        style: {\n          textAlign: \"center\",\n          margin: \"10px 0\"\n        }\n      }, \"Upload your references in your profile to have an higher chance over other applicants. Missing files are\\xA0\", addCommaToEach(this.props.refListArr), \"\\xA0\", /*#__PURE__*/React.createElement(\"a\", {\n        href: FlowRouter.url(\"account/profile\"),\n        onClick: this.pd_cap_aHandler,\n        className: \"pd_cap_a \"\n      }, \"Upload them now?\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"a\", {\n        href: FlowRouter.url(\"account/profile\"),\n        style: {\n          margin: '0 auto',\n          width: \"200px\"\n        },\n        className: \"blue-btn btns\",\n        onClick: this.pd_cap_btnHandler,\n        type: \"button\"\n      }, \"Upload references \"))), /*#__PURE__*/React.createElement(\"hr\", null), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          padding: 0\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: this.currentURL + \"#relatedsection\",\n        onClick: this.cap_viewSimilarLettingsBtnHandler,\n        className: \"transparent-btn btns\",\n        style: {\n          margin: '0 auto',\n          width: \"200px\"\n        }\n      }, \"View Similar lettings\")))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"confirm-apply-pop\",\n        style: {\n          display: 'none'\n        },\n        className: \"verification-div1 \"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"refund-div\"\n      }, /*#__PURE__*/React.createElement(\"h2\", null, \"Confirm Apply\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"profile-text\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, \"Landlords asking rent is \", this.props.data.price + \" (\" + this.props.data.rentType + \")\"), /*#__PURE__*/React.createElement(\"form\", {\n        className: \"signin-form\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-border\",\n        style: {\n          padding: '20px 0'\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"styled-input underline\",\n        style: {\n          borderBottom: '1px solid #2169a8'\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"bidPrice\",\n        type: \"number\",\n        placeholder: this.props.data.price,\n        defaultValue: this.props.data.price,\n        name: \"number\",\n        id: \"bidPrice\",\n        required: true,\n        min: this.props.priceRange.min,\n        max: this.props.priceRange.max\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"styled-input underline\"\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control bidMessage\",\n        id: \"bidMessage\",\n        rows: 1,\n        placeholder: \"You may enter a personal message to landlord if you wish.\",\n        maxLength: 500,\n        value: this.state.personalMessage,\n        onChange: this.handlePersonalMessageChange,\n        style: {\n          textAlign: \"center\"\n        }\n      })))), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"color-text\",\n        style: {\n          marginTop: '20px',\n          textAlign: \"center\"\n        }\n      }, \"We will submit all the references available in your profile. \"), false ? \"\" : this.hasAllReqReferences ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"radio-bg register\"\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        style: {\n          lineHeight: '22px',\n          marginBottom: '10px'\n        }\n      }, \"Oops! You dont have all your references updated in your profile. \"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"color-text\",\n        style: {\n          textAlign: \"center\"\n        }\n      }, \"Missing files are\\xA0\", addCommaToEach(this.props.refListArr), \"\\xA0\", /*#__PURE__*/React.createElement(\"a\", {\n        href: FlowRouter.url(\"account/profile\"),\n        onClick: this.pd_cap_aHandler,\n        className: \"pd_cap_a \"\n      }, \"Upload them now?\")), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"a\", {\n        href: FlowRouter.url(\"account/profile\"),\n        style: {\n          margin: '0 auto',\n          width: \"200px\"\n        },\n        className: \"transparent-btn btns pd_cap_btn\",\n        onClick: this.pd_cap_btnHandler,\n        type: \"button\"\n      }, \"Upload references \")), /*#__PURE__*/React.createElement(\"p\", null, \"Your chances of getting the house will be more if you apply with all the references. To proceed anyways click Submit below.\")), /*#__PURE__*/React.createElement(\"ul\", null, this.state.isApplicationInProgress ? /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"transparent-btn  btns\",\n        type: \"button\"\n      }, \"Applying... \")) : /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.confirmApplyBtnHandler,\n        className: \"blue-btn  btns confirmApplyBtn\",\n        type: \"button\"\n      }, \"Submit \")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.cap_closePopupBtnHandler,\n        style: {\n          marginLeft: '10px'\n        },\n        className: \"transparent-btn btns cap_closePopupBtn\",\n        disabled: this.state.isApplicationInProgress,\n        type: \"button\"\n      }, \"Cancel\"))))));\n    }\n\n    renderFullMain() {\n      if (Meteor.isClient) {\n        setTimeout(function () {\n          $('#lettingDetailCarousel').carousel();\n          $('#lettingDetailCarousel .carousel-control.right').unbind('click').bind('click', function () {\n            $('#lettingDetailCarousel').carousel('next');\n          });\n          $('#lettingDetailCarousel .carousel-control.left').unbind('click').bind('click', function () {\n            $('#lettingDetailCarousel').carousel('prev');\n          });\n        }, 1000);\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"property-details-page\",\n        id: 'props_list'\n      }, Meteor.isServer ? /*#__PURE__*/React.createElement(\"div\", {\n        id: \"isservercheckdiv\"\n      }) : \"\", /*#__PURE__*/React.createElement(\"section\", {\n        className: \"banner\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"nav\", {\n        \"aria-label\": \"breadcrumb\"\n      }, /*#__PURE__*/React.createElement(\"ol\", {\n        className: \"breadcrumb\"\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"breadcrumb-item\"\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: FlowRouter.url('home')\n      }, \"Home\")), this.props.data ? this.props.data.bcrumbs.map(function (crumb, i) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          className: \"breadcrumb-item\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          href: crumb.url\n        }, crumb.name));\n      }) : \"\", /*#__PURE__*/React.createElement(\"li\", {\n        className: \"breadcrumb-item active\",\n        \"aria-current\": \"page\"\n      }, \"This property\")))))), this.props.isSubsLoaded ? this.props.data ? this.renderMain() : /*#__PURE__*/React.createElement(\"section\", {\n        className: \"mar-top-20\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container text-center mar-top-20 pad-btm-30\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filter-holder\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mar-top-30\"\n      }, this.props.alreadyLeased ? /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"strong\", null, \"Property already leased. Your landlord would contact you if you are chosen as a tenant.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.backBtnHandler,\n        className: \"blue-btn btns backBtn\",\n        type: \"button\"\n      }, \"Try again\")) : /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"strong\", null, \"This property is not found. Please check your key and try again.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.noPropBackBtnHandler,\n        className: \"blue-btn btns noPropBackBtn\",\n        type: \"button\"\n      }, \"Try again\")))))) : /*#__PURE__*/React.createElement(\"section\", {\n        className: \"mar-top-20 mar-btm-20 no-print\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container text-center mar-top-20 pad-btm-30\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filter-holder\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mar-top-30\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: 'h2-div'\n      }, \"Loading...\"))))));\n    }\n\n    render() {\n      const self = this;\n\n      if (Meteor.isClient && this.propsListHTML == \"\") {\n        this.propsListHTML = $('#props_list').html();\n      }\n\n      if (Meteor.isClient) {\n        this.isServerSSRReq = $('#isservercheckdiv').html();\n        if (this.isServerSSRReq == \"\") this.isServerSSRReq = true;else this.isServerSSRReq = false;\n      } // if(this.propsListHTML) console.log(\"propsListHTML: \"+this.propsListHTML.length)\n\n\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), this.props.isSubsLoaded ? this.renderFullMain() : this.isServerSSRReq && this.propsListHTML ? /*#__PURE__*/React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: this.propsListHTML\n        }\n      }) : /*#__PURE__*/React.createElement(\"section\", {\n        className: \"mar-top-20 mar-btm-20 no-print\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container text-center mar-top-20 pad-btm-30\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filter-holder\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mar-top-30\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: 'h2-div'\n      }, \"Loading...\"))))), /*#__PURE__*/React.createElement(MainLayoutFooter, null));\n    }\n\n  }\n\n  module1.exportDefault(withTracker(() => {\n    var key = FlowRouter.getParam('key');\n    if (!key) return {\n      data: false,\n      alreadyLeased: false,\n      isSubsLoaded: true\n    };\n    if (key && !propertyKeyOfThisPage) propertyKeyOfThisPage = key; //This will init the var\n\n    const viewLettingSub = Meteor.subscribe(\"viewLetting\", key, function () {\n      if (ConfigSub.ready()) Session.set('subscriptionsReady', true); //AreasSub.ready() &&  make areas sub not req\n    }); // const AreasSub = Meteor.subscribe('Areas',function(){\n    //     if(viewLettingSub.ready() && ConfigSub.ready()  )Session.set('subscriptionsReady',true);\n    // });\n\n    const ConfigSub = Meteor.subscribe('Config', function () {\n      if (viewLettingSub.ready()) Session.set('subscriptionsReady', true);\n    });\n    if (Meteor.isClient) Session.get('subscriptionsReady');\n\n    if (!viewLettingSub.ready() || !ConfigSub.ready()) {\n      return {\n        data: false,\n        alreadyLeased: false,\n        isSubsLoaded: false\n      };\n    }\n\n    var globalConfig = Collections.Config.findOne();\n    var deletedList = [];\n\n    if (globalConfig) {\n      deletedList = globalConfig.deletedList;\n    }\n\n    if (deletedList.includes(key)) {\n      return {\n        data: false,\n        alreadyLeased: false,\n        isSubsLoaded: true\n      };\n    }\n\n    var user = Meteor.user();\n    var priceRange = {\n      min: 0,\n      max: 10000\n    };\n    var myBid = false;\n    var otherBids = false;\n    var PD = {};\n    var sliderImages = [];\n\n    advancedCrumbs = function (countyParam, areaParam, propertyType) {\n      let fCrumbs = [],\n          tmpCrumbs = [],\n          areaCrumbs = [],\n          countyCrumbs = [];\n      if (propertyType) propertyType = propertyType.toLowerCase(); // Home / Search Residential Rentals / Dublin City Apartments for Rent / Dublin 2 Apartments for Rent\n      //Property Size\n      //Property Size - Property Type\n      //Property Size - Property Type - County\n      //Property Type - county\n      //Counties\n      //Areas\n      //Property Size - Property Type - area - County\n      //Property Size - area - County\n      //Property Type - area - county\n\n      fCrumbs.push({\n        url: generateSlugURL({\n          propertyType: 'studio'\n        }),\n        name: 'Studios'\n      }); //Property Size\n\n      fCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 1\n        }),\n        name: '1-Beds'\n      }); //Property Size\n\n      fCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 2\n        }),\n        name: '2-Beds'\n      });\n      fCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 3\n        }),\n        name: '3-Beds'\n      });\n      tmpCrumbs.push({\n        url: generateSlugURL({\n          cheapSort: true,\n          propertyType: 'house'\n        }),\n        name: 'Cheap Houses'\n      });\n      tmpCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 1,\n          propertyType: 'house'\n        }),\n        name: '1-Bed Houses'\n      }); //Property Size - Property Type\n\n      tmpCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 2,\n          propertyType: 'house'\n        }),\n        name: '2-Bed Houses'\n      });\n      tmpCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 3,\n          propertyType: 'house'\n        }),\n        name: '3-Bed Houses'\n      });\n      tmpCrumbs.push({\n        url: generateSlugURL({\n          luxurySort: true,\n          propertyType: 'house'\n        }),\n        name: 'Luxury Houses'\n      });\n\n      if (propertyType == 'house') {\n        fCrumbs = fCrumbs.concat(tmpCrumbs);\n      }\n\n      fCrumbs.push({\n        url: generateSlugURL({\n          cheapSort: true,\n          propertyType: 'apartment'\n        }),\n        name: 'Cheap Apartments'\n      });\n      fCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 1,\n          propertyType: 'apartment'\n        }),\n        name: '1-Bed Apartments'\n      }); //Property Size - Property Type\n\n      fCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 2,\n          propertyType: 'apartment'\n        }),\n        name: '2-Bed Apartments'\n      });\n      fCrumbs.push({\n        url: generateSlugURL({\n          bedCount: 3,\n          propertyType: 'apartment'\n        }),\n        name: '3-Bed Apartments'\n      });\n      fCrumbs.push({\n        url: generateSlugURL({\n          luxurySort: true,\n          propertyType: 'apartment'\n        }),\n        name: 'Luxury Apartments'\n      });\n\n      if (propertyType != 'house') {\n        fCrumbs = fCrumbs.concat(tmpCrumbs);\n      } //dublin-apartments\n      //Not doing dublin-houses due to less searches for Dublin apartments\n\n\n      var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n\n      for (var i = 0; i < staticCounties.length; i++) {\n        if (!staticCounties[i]) continue;\n        countyCrumbs.push({\n          url: generateSlugURL({\n            county: staticCounties[i]\n          }),\n          name: staticCounties[i] + ' Apartments'\n        });\n      }\n\n      if (countyParam) {\n        // var propertyType = curURL.propertyType;\n        // var county = curURL.county\n        // var area = curURL.area\n        // var maxRent = curURL.maxRent\n        // var country = curURL.country;\n        // var bedCount = curURL.bedCount;\n        // var luxurySort = curURL.luxurySort;\n        // var cheapSort = curURL.cheapSort;\n        //////////////////////////// WITH COUNTY\n        tmpCrumbs = [];\n        tmpCrumbs.push({\n          url: generateSlugURL({\n            cheapSort: true,\n            propertyType: 'house',\n            county: countyParam\n          }),\n          name: 'Cheap Houses for rent in county ' + titleCase(countyParam)\n        });\n\n        if (propertyType == 'house') {\n          fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        fCrumbs.push({\n          url: generateSlugURL({\n            cheapSort: true,\n            propertyType: 'apartment',\n            county: countyParam\n          }),\n          name: 'Cheap Apartments for rent in county ' + titleCase(countyParam)\n        });\n\n        if (propertyType != 'house') {\n          fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        fCrumbs.push({\n          url: generateSlugURL({\n            propertyType: 'studio',\n            county: countyParam\n          }),\n          name: 'Studio for rent in county ' + titleCase(countyParam)\n        });\n        tmpCrumbs = [];\n        tmpCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 1,\n            propertyType: 'house',\n            county: countyParam\n          }),\n          name: '1-Bed Houses for rent in county ' + titleCase(countyParam)\n        }); //Property Size - Property Type\n\n        tmpCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 2,\n            propertyType: 'house',\n            county: countyParam\n          }),\n          name: '2-Bed Houses for rent in county ' + titleCase(countyParam)\n        });\n        tmpCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 3,\n            propertyType: 'house',\n            county: countyParam\n          }),\n          name: '3-Bed Houses for rent in county ' + titleCase(countyParam)\n        });\n        tmpCrumbs.push({\n          url: generateSlugURL({\n            luxurySort: true,\n            propertyType: 'house',\n            county: countyParam\n          }),\n          name: 'Luxury Houses for rent in county ' + titleCase(countyParam)\n        });\n\n        if (propertyType == 'house') {\n          fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        fCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 1,\n            propertyType: 'apartment',\n            county: countyParam\n          }),\n          name: '1-Bed Apartments for rent in county ' + titleCase(countyParam)\n        }); //Property Size - Property Type\n\n        fCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 2,\n            propertyType: 'apartment',\n            county: countyParam\n          }),\n          name: '2-Bed Apartments for rent in county ' + titleCase(countyParam)\n        });\n        fCrumbs.push({\n          url: generateSlugURL({\n            bedCount: 3,\n            propertyType: 'apartment',\n            county: countyParam\n          }),\n          name: '3-Bed Apartments for rent in county ' + titleCase(countyParam)\n        });\n        fCrumbs.push({\n          url: generateSlugURL({\n            luxurySort: true,\n            propertyType: 'apartment',\n            county: countyParam\n          }),\n          name: 'Luxury Apartments for rent in county ' + titleCase(countyParam)\n        });\n\n        if (propertyType != 'house') {\n          fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        if (areaParam) {\n          //////////////////////////// WITH AREA COUNTY\n          tmpCrumbs = [];\n          tmpCrumbs.push({\n            url: generateSlugURL({\n              cheapSort: true,\n              propertyType: 'house',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: 'Cheap Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          });\n\n          if (propertyType == 'house') {\n            fCrumbs = fCrumbs.concat(tmpCrumbs);\n          }\n\n          fCrumbs.push({\n            url: generateSlugURL({\n              cheapSort: true,\n              propertyType: 'apartment',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: 'Cheap Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          });\n\n          if (propertyType != 'house') {\n            fCrumbs = fCrumbs.concat(tmpCrumbs);\n          }\n\n          fCrumbs.push({\n            url: generateSlugURL({\n              propertyType: 'studio',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: 'Studio for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          });\n          tmpCrumbs = [];\n          tmpCrumbs.push({\n            url: generateSlugURL({\n              bedCount: 1,\n              propertyType: 'house',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: '1-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          }); //Property Size - Property Type\n\n          tmpCrumbs.push({\n            url: generateSlugURL({\n              bedCount: 2,\n              propertyType: 'house',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: '2-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          });\n          tmpCrumbs.push({\n            url: generateSlugURL({\n              bedCount: 3,\n              propertyType: 'house',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: '3-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          });\n          tmpCrumbs.push({\n            url: generateSlugURL({\n              luxurySort: true,\n              propertyType: 'house',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: 'Luxury Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          });\n\n          if (propertyType == 'house') {\n            fCrumbs = fCrumbs.concat(tmpCrumbs);\n          }\n\n          fCrumbs.push({\n            url: generateSlugURL({\n              bedCount: 1,\n              propertyType: 'apartment',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: '1-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          }); //Property Size - Property Type\n\n          fCrumbs.push({\n            url: generateSlugURL({\n              bedCount: 2,\n              propertyType: 'apartment',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: '2-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          });\n          fCrumbs.push({\n            url: generateSlugURL({\n              bedCount: 3,\n              propertyType: 'apartment',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: '3-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          });\n          fCrumbs.push({\n            url: generateSlugURL({\n              luxurySort: true,\n              propertyType: 'apartment',\n              county: countyParam,\n              area: areaParam\n            }),\n            name: 'Luxury Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n          });\n\n          if (propertyType != 'house') {\n            fCrumbs = fCrumbs.concat(tmpCrumbs);\n          }\n        }\n\n        var distinctEntries = _.uniq(Collections.Areas.find({}, {\n          //County: countyParam ; Dynamically load areas based on the subscription.\n          sort: {\n            Area: 1\n          },\n          fields: {\n            Area: true\n          }\n        }).fetch().map(function (x) {\n          return x.Area;\n        }), true);\n\n        areaCrumbs = [];\n\n        for (var i = 0; i < distinctEntries.length; i++) {\n          if (!distinctEntries[i]) continue; // if (distinctEntries[i] == areaParam) continue;//Don't show the same area in this list\n\n          areaCrumbs.push({\n            url: generateSlugURL({\n              county: countyParam,\n              area: distinctEntries[i]\n            }),\n            name: distinctEntries[i] + ' Apartments'\n          });\n        } // let ptypeString='';\n        // switch(propertyType){\n        //     case 'apartment': ptypeString = 'Apartments '; break;\n        //     case 'house': ptypeString = 'Houses '; break;\n        // }\n        // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'Studio for rent in county '+titleCase(PD.address.county)})\n        // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'1-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n        // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'2-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n        // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'3-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n\n      }\n\n      return {\n        fCrumbs: fCrumbs,\n        areaCrumbs: areaCrumbs,\n        countyCrumbs: countyCrumbs\n      };\n    };\n\n    var data = Collections.Auctions.findOne({\n      \"lettingAuctionCode\": key\n    }, {\n      limit: 1\n    });\n\n    if (data) {\n      data.applicationsReceivedCount = Collections.Bids.find({\n        auctionId: data._id\n      }).count();\n      PDret = Collections.Properties.find(data.propertyId).fetch();\n      PD = PDret[0];\n      PD.bedroomsCount = 0;\n      PD.ensuiteCount = 0;\n      PD.doubleBedCount = 0;\n\n      if (PD.bedrooms) {\n        PD.bedroomsCount = PD.bedrooms.length;\n\n        for (var i = 0; i < PD.bedrooms.length; i++) {\n          if (PD.bedrooms[i][\"ensuite\"]) {\n            PD.ensuiteCount++;\n          }\n\n          if (PD.bedrooms[i][\"bedType\"] == 'double') {\n            PD.doubleBedCount++;\n          }\n        }\n      }\n\n      if (PD.contacts) {\n        //Take the contact of activation not property\n        data.primaryContact = PD.contacts[0];\n      } else data.primaryContact = {};\n\n      tmp = [];\n\n      if (PD.amenities) {\n        for (var i = 0; i < PD.amenities.length; i++) {\n          var src = globalConfig.amenitiesLogos[PD.amenities[i]];\n          if (!src) src = globalConfig.amenitiesLogos[\"default\"];\n          tmp.push({\n            name: PD.amenities[i],\n            src: cdnPath(src)\n          });\n        }\n      }\n\n      PD.amenitiesWithImgs = tmp;\n\n      if (PD.gallery) {\n        for (var i = 0; i < PD.gallery.length; i++) {\n          let altText = 'Photo ' + (i + 1) + ' of ' + titleCase(PD.address.address);\n          if (PD.address.area) altText += ', ' + titleCase(PD.address.area);\n          if (PD.address.county) altText += ', ' + titleCase(PD.address.county); // sliderImages.push(PD.gallery[i].url)\n\n          sliderImages.push({\n            url: PD.gallery[i].url,\n            altText: altText\n          });\n        }\n      } ////////// BREADCRUMBS\n\n\n      let bcrumbs = [];\n      let slugTemp,\n          searchCrumbs = []; // Home / Search Residential Rentals / Dublin City Apartments for Rent / Dublin 2 Apartments for Rent\n\n      if (PD.address.county) {\n        slugTemp = generateSlug({\n          county: PD.address.county\n        });\n        bcrumbs.push({\n          url: FlowRouter.url('b', {\n            slug: slugTemp[0]\n          }),\n          name: titleCase(PD.address.county)\n        });\n        searchCrumbs.push({\n          url: FlowRouter.url('b', {\n            slug: slugTemp[0]\n          }),\n          name: 'rent in ' + titleCase(PD.address.county)\n        });\n      }\n\n      if (PD.address.area && PD.address.county) {\n        slugTemp = generateSlug({\n          county: PD.address.county,\n          area: PD.address.area\n        });\n        bcrumbs.push({\n          url: FlowRouter.url('b', {\n            slug: slugTemp[0]\n          }),\n          name: titleCase(PD.address.area)\n        });\n        searchCrumbs.push({\n          url: FlowRouter.url('b', {\n            slug: slugTemp[0]\n          }),\n          name: 'rent in ' + titleCase(PD.address.area) + \" of county \" + titleCase(PD.address.county)\n        });\n      }\n\n      if (PD.address.area && PD.address.county && PD.type) {\n        slugTemp = generateSlug({\n          county: PD.address.county,\n          area: PD.address.area,\n          propertyType: PD.type\n        });\n        bcrumbs.push({\n          url: FlowRouter.url('b', {\n            slug: slugTemp[0]\n          }),\n          name: titleCase(PD.type)\n        });\n        searchCrumbs.push({\n          url: FlowRouter.url('b', {\n            slug: slugTemp[0]\n          }),\n          name: '' + titleCase(PD.type) + \" for rent in \" + titleCase(PD.address.area) + \" of county \" + titleCase(PD.address.county)\n        });\n      }\n\n      data.bcrumbs = bcrumbs;\n      data.searchCrumbs = searchCrumbs.reverse(); ////////// END BREADCRUMBS\n      ////////// ADV BREADCRUMBS MORE LINKS\n\n      if (true) {\n        if (PD.address.county) {\n          AreasSub = Meteor.subscribe('Areas', '', '', PD.address.county, '', '', function () {\n            Session.set('subscriptionsReady2', true);\n          });\n        }\n\n        if (Meteor.isClient) Session.get('subscriptionsReady2');\n        var advC = advancedCrumbs(PD.address.county, PD.address.area, PD.type);\n        data.fCrumbs = advC.fCrumbs;\n        data.areaCrumbs = advC.areaCrumbs;\n        data.countyCrumbs = advC.countyCrumbs;\n      } ////////// END ADV BREADCRUMBS\n      //////// RELATED PROPS\n\n\n      var notArr = [PD._id];\n      var filters = {\n        \"type\": PD.type,\n        \"address.county\": PD.address.county,\n        \"address.area\": PD.address.area,\n        \"auctionId\": {\n          $exists: true,\n          $gt: \"\"\n        },\n        \"isArchived\": false,\n        \"_id\": {\n          $not: {\n            $in: notArr\n          }\n        }\n      };\n      data.relatedProps = [];\n      var tmpRelated = Collections.Properties.find(filters, {\n        transform: function (doc) {\n          doc.auction = Collections.Auctions.findOne({\n            _id: doc.auctionId\n          });\n\n          if (doc.gallery) {\n            if (doc.gallery[0]) doc.firstImg = doc.gallery[0];\n          }\n\n          return doc;\n        },\n        limit: 4\n      }).fetch();\n      data.relatedProps = data.relatedProps.concat(tmpRelated);\n      notArr = [PD._id];\n\n      for (var i = 0; i < data.relatedProps.length; i++) {\n        notArr.push(data.relatedProps[i]._id);\n      }\n\n      filters[\"_id\"] = {\n        $not: {\n          $in: notArr\n        }\n      };\n\n      if (data.relatedProps.length < 4) {\n        delete filters[\"address.area\"];\n        var tmpRelated = Collections.Properties.find(filters, {\n          transform: function (doc) {\n            doc.auction = Collections.Auctions.findOne({\n              _id: doc.auctionId\n            });\n\n            if (doc.gallery) {\n              if (doc.gallery[0]) doc.firstImg = doc.gallery[0];\n            }\n\n            return doc;\n          },\n          limit: 4\n        }).fetch();\n        data.relatedProps = data.relatedProps.concat(tmpRelated);\n      }\n\n      notArr = [PD._id];\n\n      for (var i = 0; i < data.relatedProps.length; i++) {\n        notArr.push(data.relatedProps[i]._id);\n      }\n\n      filters[\"_id\"] = {\n        $not: {\n          $in: notArr\n        }\n      };\n\n      if (data.relatedProps.length < 4) {\n        delete filters[\"address.county\"];\n        var tmpRelated = Collections.Properties.find(filters, {\n          transform: function (doc) {\n            doc.auction = Collections.Auctions.findOne({\n              _id: doc.auctionId\n            });\n\n            if (doc.gallery) {\n              if (doc.gallery[0]) doc.firstImg = doc.gallery[0];\n            }\n\n            return doc;\n          },\n          limit: 4\n        }).fetch();\n        data.relatedProps = data.relatedProps.concat(tmpRelated);\n        tmpRelated;\n      }\n\n      notArr = [PD._id];\n\n      for (var i = 0; i < data.relatedProps.length; i++) {\n        notArr.push(data.relatedProps[i]._id);\n      }\n\n      filters[\"_id\"] = {\n        $not: {\n          $in: notArr\n        }\n      };\n\n      if (data.relatedProps.length < 4) {\n        delete filters[\"type\"];\n        var tmpRelated = Collections.Properties.find(filters, {\n          transform: function (doc) {\n            doc.auction = Collections.Auctions.findOne({\n              _id: doc.auctionId\n            });\n\n            if (doc.gallery) {\n              if (doc.gallery[0]) doc.firstImg = doc.gallery[0];\n            }\n\n            return doc;\n          },\n          limit: 4\n        }).fetch();\n        data.relatedProps = data.relatedProps.concat(tmpRelated);\n        tmpRelated;\n      }\n\n      if (data.relatedProps.length > 4) {\n        data.relatedProps = data.relatedProps.slice(0, 4);\n      } ///////// END FILTERS\n\n\n      var min = data.price * 0.7,\n          max = data.price * 1.5; // also used in propertyApplications.onRendered\n\n      priceRange = {\n        min: min,\n        max: max\n      }; ///////// START MY BIG AND OTHER BIDS\n\n      if (user) {\n        var ret = Collections.Bids.find({\n          auctionId: data._id,\n          userId: user._id,\n          isArchived: false\n        }, {\n          limit: 1\n        }).fetch();\n        myBid = ret[0];\n        var maxLen = 5;\n        var forTotCount = Collections.Bids.find({\n          auctionId: data._id,\n          isArchived: false\n        }, {\n          limit: maxLen,\n          sort: {\n            yourBid: -1\n          }\n        }); // debugger;\n\n        if (!forTotCount.count()) {\n          //No results, return\n          otherBids = {\n            needed: false,\n            arr: []\n          };\n        } else {\n          if (!myBid || !user) otherBids = {\n            needed: true,\n            arr: forTotCount.fetch()\n          };else {\n            var weNeedOnSides = Math.floor(maxLen / 2);\n            var needAbove = weNeedOnSides;\n            var back = Collections.Bids.find({\n              auctionId: data._id,\n              userId: {\n                $ne: user._id\n              },\n              yourBid: {\n                $lt: myBid.yourBid\n              },\n              isArchived: false\n            }, {\n              limit: maxLen - 1,\n              sort: {\n                yourBid: -1\n              }\n            });\n            var backCount = back.count();\n\n            if (backCount < weNeedOnSides) {\n              // if count isn't enough, then change back itself.\n              back = Collections.Bids.find({\n                auctionId: data._id,\n                userId: {\n                  $ne: user._id\n                },\n                yourBid: {\n                  $lte: myBid.yourBid\n                },\n                isArchived: false\n              }, {\n                limit: maxLen - 1,\n                sort: {\n                  yourBid: -1\n                }\n              });\n            }\n\n            backCount = back.count();\n\n            if (backCount < weNeedOnSides) {\n              //if its still less, then update we needAbove value\n              needAbove += weNeedOnSides - backCount;\n            }\n\n            var above = Collections.Bids.find({\n              auctionId: data._id,\n              userId: {\n                $ne: user._id\n              },\n              yourBid: {\n                $gt: myBid.yourBid\n              },\n              isArchived: false\n            }, {\n              limit: maxLen - 1,\n              sort: {\n                yourBid: -1\n              }\n            });\n            var aboveCount = above.count();\n\n            if (aboveCount < needAbove) {\n              // if count isn't enough, then change back itself.\n              above = Collections.Bids.find({\n                auctionId: data._id,\n                userId: {\n                  $ne: user._id\n                },\n                yourBid: {\n                  $gte: myBid.yourBid\n                },\n                isArchived: false\n              }, {\n                limit: maxLen - 1,\n                sort: {\n                  yourBid: -1\n                }\n              });\n            }\n\n            aboveCount = above.count();\n            var retAbove = above.fetch();\n            var retBack = back.fetch();\n            retAbove.push(myBid);\n            otherBids = {\n              needed: true,\n              arr: retAbove.concat(retBack)\n            };\n          }\n        }\n      } ///////// START MY BIG AND OTHER BIDS\n\n    }\n\n    var isAgent = false; // switch(data.createdByAgent){\n    //     case '':\n    //         isAgent = {\n    //             \"logourl\":Meteor.absoluteUrl()+'images/property-rental-agents/Bell-Property-Consultants.jpeg',\n    //             \"name\": 'Bell Property Consultants Ltd',\n    //             \"address1\":\"Harolds Cross, Dublin\",\n    //             \"style\":{height:\"100px\"}\n    //         }\n    // }\n\n    var alreadyLeased = false;\n\n    if (data) {\n      if (data.isArchived) alreadyLeased = true;\n    }\n\n    var refListArr = [];\n    var hasAllReqReferences = false;\n    if (user) if (user.profile) if (user.profile.references) {\n      // if (!user.profile.references.hasResume) refListArr.push(\"Resume\");//Why do you need it?\n      if (!user.profile.references.hasLandlordRef) refListArr.push(\"Landlord reference\");\n      if (!user.profile.references.employerName) refListArr.push(\"Employer name\");\n      if (!user.profile.references.hasWorkRef) refListArr.push(\"Work reference\");\n      if (!user.profile.references.hasFinancialRef) refListArr.push(\"Financial reference\");\n      if (!user.profile.references.hasGovtID) refListArr.push(\"Government ID\");\n      if (!user.profile.references.hasPassport) refListArr.push(\"Passport\");\n      if (!user.profile.references.hasPPS) refListArr.push(\"PPS\");\n\n      try {\n        if (user.profile.references.hasResume && user.profile.references.hasLandlordRef && user.profile.references.hasGovtID && user.profile.references.hasWorkRef) hasAllReqReferences = true;\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    try {\n      var title = '';\n      title = PD.address.address + ', ' + PD.address.area;\n      if (PD.address.county) title += ', ' + PD.address.county;\n      var desc = '';\n      if (PD.type) desc += titleCase(PD.type) + ' for rent at ';\n      desc += PD.address.address + ', ' + PD.address.area;\n      if (PD.address.county) desc += ', ' + PD.address.county + '. ';\n      desc += 'Its ' + (PD.furnished ? \"a furnished \" : \"an Unfurnished \") + titleCase(PD.type) + \" with \" + (PD.bedroomsCount ? PD.bedroomsCount : 'no') + \" beds, \" + (PD.baths ? PD.baths : 'no') + \" baths, \" + (PD.ensuiteCount ? PD.ensuiteCount : \"no\") + \" Ensuite and \" + (PD.doubleBedCount ? PD.doubleBedCount : \"has no\") + \" Double bed property. \";\n      desc += \"Apply for this \" + PD.type + \", view its images, details and much more.\"; // Apartment for rent in\n      //     Newbrook road, mullingar, co. westmeath, murrisk, mayo | SpotMyCrib\n\n      clearMeta();\n      let titleTmp = title + ' | SpotMyCrib';\n      if (titleTmp.length <= 75) title = titleTmp;\n      DocHead.setTitle(title);\n      DocHead.addMeta({\n        name: \"description\",\n        content: desc\n      });\n      var socialDesc = \"Apply for this \" + PD.type + \", view its images, details and much more.\";\n      var socialTitle = '';\n      if (PD.bedroomsCount) socialTitle += PD.bedroomsCount + ' Bed ';\n      if (PD.type) socialTitle += PD.type + ' available at ';\n      socialTitle += title;\n      socialTitle = '' + titleCase(socialTitle) + ' | SpotMyCrib';\n      DocHead.addMeta({\n        property: \"og:title\",\n        content: socialTitle\n      });\n      DocHead.addMeta({\n        property: \"og:description\",\n        content: socialDesc\n      });\n      {\n        /*<link rel=\"canonical\" href=\"http://example.com/wordpress/seo-plugin/\" />*/\n      }\n      if (FlowRouter.current().route.name == 'letting') DocHead.addMeta({\n        rel: \"canonical\",\n        href: FlowRouter.url('rent', {\n          slug: PD.slug,\n          key: key\n        })\n      });\n      DocHead.addMeta({\n        property: \"og:type\",\n        content: \"place\"\n      });\n      DocHead.addMeta({\n        property: \"og:url\",\n        content: FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params)\n      });\n      DocHead.addMeta({\n        property: \"fb:app_id\",\n        content: '309356899476430'\n      });\n\n      try {\n        DocHead.addMeta({\n          property: \"og:image\",\n          content: PD.gallery[0].url\n        });\n      } catch (c) {//Putting this here is making FB take the first response from here. & its showing no image if if this meta is later updated. So better put it later after all rendering at a template level. For now lets not keep anywhere.\n        // DocHead.addMeta({name: \"og:image\", content: 'https://www.spotmycrib.ie/images/spot-my-crib-logo.png'  });\n      }\n    } catch (err) {\n      clearMeta();\n      DocHead.setTitle(' Property not found | SpotMyCrib');\n      DocHead.addMeta({\n        name: \"description\",\n        content: \"\"\n      });\n    }\n\n    return {\n      data: data,\n      alreadyLeased: alreadyLeased,\n      isAgent: isAgent,\n      user: user,\n      refListArr: refListArr,\n      priceRange: priceRange,\n      hasAllReqReferences: hasAllReqReferences,\n      myBid: myBid,\n      otherBids: otherBids,\n      PD: PD,\n      sliderImages: sliderImages,\n      isSubsLoaded: true\n    };\n  })(LettingDetail));\n\n  class ImagesSlider extends Component {\n    constructor(props) {\n      super(props);\n      var current = FlowRouter.current();\n      this.currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params);\n    }\n\n    componentDidMount() {\n      $(document).ready(function () {\n        // $('#lettingDetailCarousel').first().addClass('active');//not needed as bug of isActive helper not working is fixed.\n        $('#imagessection .item img').width('100%');\n        var w = $('#imagessection .item img').first().width();\n        var h = w / 1.33;\n        if (h > 250) $('#imagessection .item img').height(w / 1.33);\n        setTimeout(function () {\n          $('#imagessection .item img').width('100%');\n          var w = $('#imagessection .item img').first().width();\n          var h = w / 1.33;\n          if (h > 250) $('#imagessection .item img').height();\n        }, 3000); // $('#lettingDetailCarousel').carousel();\n        // $(\"#lettingDetailCarousel\").swiperight(function() {\n        //     $(this).carousel('prev');\n        // });\n        // $(\"#lettingDetailCarousel\").swipeleft(function() {\n        //     $(this).carousel('next');\n        // });\n      });\n    }\n\n    render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: \"lettingDetailCarousel\",\n        className: \"carousel slide\",\n        \"data-ride\": \"carousel\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"carousel-inner\"\n      }, this.props.images ? this.props.images.map(function (image, i) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: i,\n          className: 'item ' + (i == 0 ? 'active' : \"\")\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: image.url,\n          alt: image.altText,\n          title: image.altText,\n          className: \"img-responsive\"\n        }));\n      }) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item active\"\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: cdnPath(\"/images/no-photo.png\"),\n        alt: 'Image not available',\n        title: 'Image not available',\n        className: \"img-responsive\"\n      }))), /*#__PURE__*/React.createElement(\"a\", {\n        className: \"left carousel-control\",\n        href: \"javascript:void(0)\",\n        \"data-slide\": \"prev\"\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"glyphicon glyphicon-chevron-left\"\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"sr-only\"\n      }, \"Previous\")), /*#__PURE__*/React.createElement(\"a\", {\n        className: \"right carousel-control\",\n        href: \"javascript:void(0)\",\n        \"data-slide\": \"next\"\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"glyphicon glyphicon-chevron-right\"\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"sr-only\"\n      }, \"Next\")));\n    }\n\n  }\n\n  class AddThisReact extends Component {\n    constructor(props) {\n      super(props);\n      console.log('Add this started');\n    }\n\n    componentDidMount() {\n      console.log('Add this rendered');\n    }\n\n    render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"addThis\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"addthis_inline_share_toolbox\"\n      }));\n    }\n\n  } // Error: Can't find npm module 'aws-sdk'. Did you forget to call 'Npm.depends' in package.js within the 'jns_flow-router-ssr' package?\n\n}.call(this, module);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"static\":{\"About.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/static/About.jsx                                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => About\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 2);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 3);\n\nclass About extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"about-bnr\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"About Us\")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"abt-content1\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container text-center\",\n      style: {\n        maxWidth: 750\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"no-capitalize\"\n    }, \"Renting in Ireland is a pain, let us make it easy.\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bottom-line\"\n    }), /*#__PURE__*/React.createElement(\"q\", {\n      className: \"color-grey\",\n      style: {\n        display: 'block',\n        marginBottom: 20\n      }\n    }, \"An average tenant spends around 1 month of their time, viewing 10+ houses and submitting manual printed references to find their rental home. In the same way, a landlord shows their letting to 50+ potential tenants, manually verifying all of their paper refrences before finalising one of them. \"), /*#__PURE__*/React.createElement(\"h6\", null, \"We are spotmycrib. A couple of months ago, we had an intuition : A painless renting system. One where people can find their dream home for rent without any pain, unnecessary viewings and disappointment. That gave us our inspiration \\\"Renting made digital\\\". That means both landlords and tenants can use spotmycrib to save their time and money - For the better. We are just getting started. So, join us. \", /*#__PURE__*/React.createElement(\"br\", null), \" Write to us at \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('contactus')\n    }, \"Contact\"))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Careers.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/static/Careers.jsx                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => Careers\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 2);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 3);\n\nvar TxtType = function (el, toRotate, period) {\n  this.toRotate = toRotate;\n  this.el = el;\n  this.loopNum = 0;\n  this.period = parseInt(period, 10) || 2000;\n  this.txt = '';\n  this.tick();\n  this.isDeleting = false;\n};\n\nTxtType.prototype.tick = function () {\n  var i = this.loopNum % this.toRotate.length;\n  var fullTxt = this.toRotate[i];\n\n  if (this.isDeleting) {\n    this.txt = fullTxt.substring(0, this.txt.length - 1);\n  } else {\n    this.txt = fullTxt.substring(0, this.txt.length + 1);\n  }\n\n  this.el.innerHTML = '<span class=\"wrap\">' + this.txt + '</span>';\n  var that = this;\n  var delta = 200 - Math.random() * 100;\n\n  if (this.isDeleting) {\n    delta /= 2;\n  }\n\n  if (!this.isDeleting && this.txt === fullTxt) {\n    delta = this.period;\n    this.isDeleting = true;\n  } else if (this.isDeleting && this.txt === '') {\n    this.isDeleting = false;\n    this.loopNum++;\n    delta = 500;\n  }\n\n  setTimeout(function () {\n    that.tick();\n  }, delta);\n};\n\nclass Careers extends Component {\n  componentDidMount() {\n    var elements = document.getElementsByClassName('typewrite');\n\n    for (var i = 0; i < elements.length; i++) {\n      var toRotate = elements[i].getAttribute('data-type');\n      var period = elements[i].getAttribute('data-period');\n\n      if (toRotate) {\n        new TxtType(elements[i], JSON.parse(toRotate), period);\n      }\n    } // INJECT CSS\n\n\n    var css = document.createElement(\"style\");\n    css.type = \"text/css\";\n    css.innerHTML = \".typewrite > .wrap { border-right: 0.08em solid #fff}\";\n    document.body.appendChild(css);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"contact-bnr\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"We are looking for talented \", /*#__PURE__*/React.createElement(\"a\", {\n      className: \"typewrite\",\n      \"data-period\": 2000,\n      \"data-type\": \"[ \\\"marketers\\\", \\\"sales\\\", \\\"engineers\\\" ]\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"wrap\"\n    })))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"contact-content career-content\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"bnr-txt\"\n    }, \"Join our team in Dublin to transform the online real estate industry. Build tools that help hundreds of people find their dream home everyday. \"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontSize: 14\n      }\n    }, \"Why wait? tell us about you and why you want to join us. \"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://goo.gl/forms/nYxSp8YmuyMYTMEc2\",\n      className: \"btns blue-btn\"\n    }, \"Apply\")))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ContactUs.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/static/ContactUs.jsx                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => ContactUs\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 2);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 3);\n\nfunction updateFormFromLocalStorage() {\n  if (localStorage) {\n    if (localStorage.contactFormData_name) {\n      $(\"input[name='name']\").val(localStorage.contactFormData_name);\n    }\n\n    if (localStorage.contactFormData_email) {\n      $(\"input[name='email']\").val(localStorage.contactFormData_email);\n    }\n\n    if (localStorage.contactFormData_mobile) {\n      $(\"input[name='mobile']\").val(localStorage.contactFormData_mobile);\n    }\n\n    if (localStorage.contactFormData_message) {\n      $(\"textarea[name='message']\").val(localStorage.contactFormData_message);\n\n      try {\n        var element = $(\"textarea[name='message']\")[0];\n        element.style.height = \"5px\";\n        if (element.scrollHeight < 310) element.style.height = element.scrollHeight + \"px\";else element.style.height = \"310px\";\n      } catch (e) {}\n    }\n  }\n}\n\nfunction saveToLocalStorage() {\n  searialisedContactUsForm = $('#contactUsForm').serializeArray();\n\n  if (localStorage) {\n    localStorage.contactFormData_name = $(\"input[name='name']\").val();\n    localStorage.contactFormData_email = $(\"input[name='email']\").val();\n    localStorage.contactFormData_mobile = $(\"input[name='mobile']\").val();\n    localStorage.contactFormData_message = $(\"textarea[name='message']\").val();\n  }\n}\n\nfunction clearLocalStorage() {\n  searialisedContactUsForm = $('#contactUsForm').serializeArray();\n\n  if (localStorage) {\n    localStorage.removeItem('contactFormData_name');\n    localStorage.removeItem('contactFormData_email');\n    localStorage.removeItem('contactFormData_mobile');\n    localStorage.removeItem('contactFormData_message');\n  }\n}\n\nclass ContactUs extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      contactFormSaving: false,\n      contactFormSavedSuccess: false\n    };\n    this.takeBackupHandler = this.takeBackupHandler.bind(this);\n    this.formSubmitHandler = this.formSubmitHandler.bind(this);\n    this.autoGrowTAHandler = this.autoGrowTAHandler.bind(this);\n  }\n\n  takeBackupHandler() {\n    saveToLocalStorage();\n  }\n\n  formSubmitHandler(event) {\n    event.preventDefault();\n  }\n\n  autoGrowTAHandler(event) {\n    var element = event.target;\n    element.style.height = \"5px\";\n    if (element.scrollHeight < 310) element.style.height = element.scrollHeight + \"px\";else element.style.height = \"310px\";\n  }\n\n  componentDidMount() {\n    updateFormFromLocalStorage();\n    const self = this;\n    var validator = $('#contactUsForm').validate({\n      submitHandler: function (event) {\n        self.setState({\n          contactFormSaving: true\n        });\n        self.setState({\n          contactFormSavedSuccess: true\n        });\n        console.log(\"You just submitted the 'contact us' form.\");\n        var userId = Meteor.userId();\n        if (!userId) userId = '';\n        var sub = 'Contact form request ';\n        var desc = \"\\n\\nName: \" + $(\"input[name='name']\").val() + \"<br/>\\nEmail: \" + $(\"input[name='email']\").val() + \"<br/>\\nMobile: \" + $(\"input[name='mobile']\").val() + \"<br/>\\nMessage: \" + $(\"textarea[name='message']\").val() + \"<br/>\\nUser ID: \" + userId + \"<br/>\\n\";\n        Meteor.call('notifyAdmin', sub, desc, function () {\n          $('#contactUsForm')[0].reset();\n          clearLocalStorage();\n          self.setState({\n            contactFormSaving: false\n          });\n          self.setState({\n            contactFormSavedSuccess: false\n          });\n        }); //             var sub = 'Thank you for getting in touch!'\n        //             var desc = `\n        // We will look over your message and get back to you by soon. In the meantime, you can check the <a href=\"https://www.spotmycrib.ie/faqs\">FAQ section</a>, our <a href=\"https://www.spotmycrib.ie/estateagent\">EstateAgent / Landlord page</a>, our <a href=\"https://www.spotmycrib.com/b/rent-in-ireland/?\">latest letting listings</a> or browse through our <a href=\"http://blog.spotmycrib.com/\">latest blog posts</a>.\n        //\n        // Your friends at SpotMyCrib.ie\n        // `\n        //             Meteor.call('notifyAdmin', sub, desc,function(){\n        //\n        //             });\n        // fbq('track', 'ViewContent');No FB Q here, let keep fb thing only for pre planned areas, just to make sure it doesn' give wrong success notices .\n\n        ga('send', 'event', 'ContactUsPage', 'formSubmitted', 'Contact us form is submitted');\n      }\n    });\n    setTimeout(function () {\n      fbq('track', 'ViewContent');\n      ga('send', 'event', 'ContactUsPage', 'formRendered', 'Contact us form is viewed');\n    }, 2000);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"contact-bnr\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"Contact Us\")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"contact-content mar-btm-20\",\n      style: {\n        background: 'white'\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-center\",\n      style: {\n        marginBottom: 10\n      }\n    }, \"Please contact the owner directly for queries regarding the properties advertised on our site as we do not own or deal diretly with them. For other queries please email at below email or fill the form below.\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-center\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      style: {\n        color: '#428bca'\n      },\n      href: \"mailto:support@spotmycrib.com\"\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-envelopee\"\n    }), \" support@spotmycrib.com\")), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-center\"\n    }, \" Or \"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.formSubmitHandler,\n      className: \"signin-form cf-1\",\n      id: \"contactUsForm\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sep-section\"\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"sep-label\"\n    }, \"Write to us\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input underline\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.takeBackupHandler,\n      type: \"text\",\n      name: \"name\",\n      required: true\n    }), /*#__PURE__*/React.createElement(\"label\", null, \"Name *\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input underline\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.takeBackupHandler,\n      type: \"email\",\n      name: \"email\",\n      required: true\n    }), /*#__PURE__*/React.createElement(\"label\", null, \"Email *\"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-input underline\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.takeBackupHandler,\n      type: \"text\",\n      name: \"mobile\"\n    }), /*#__PURE__*/React.createElement(\"label\", null, \"Mobile \"), /*#__PURE__*/React.createElement(\"span\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-full-width\"\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      onChange: this.takeBackupHandler,\n      onKeyUp: this.autoGrowTAHandler,\n      name: \"message\",\n      className: \"styled-input-textarea autoGrowTA\",\n      id: \"contactAG\",\n      placeholder: \"Enter your message\",\n      required: true,\n      defaultValue: \"\"\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-full-width mar-top-10\"\n    }, this.state.contactFormSaving ? /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btns transparent-btn\"\n    }, \"Saving\") : /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btns blue-btn\"\n    }, \"Submit\")), this.state.contactFormSavedSuccess ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"styled-full-width\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-success\",\n      role: \"alert\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"glyphicon glyphicon-ok\",\n      \"aria-hidden\": \"true\"\n    }), \"\\xA0Thank you for contacting us, we will reach out to you as soon as possible.\")) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\"\n    }))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CookiePolicy.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/static/CookiePolicy.jsx                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => CookiePolicy\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 2);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 3);\n\nclass CookiePolicy extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"about-bnr\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"Cookie Policy\")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"faq-content cookieconsent-content pad-btm-30\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"faq-section-hold\"\n    }, /*#__PURE__*/React.createElement(\"p\", null, \"By using this website, you consent to the use of cookies in accordance with the SpotMyCrib.ie Cookie Policy below.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"SpotMyCrib.ie uses small pieces of data called cookies to help customise your user experience. Learn more about cookies and how you can control them by reading our Cookies Policy.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"We may update our Cookies Policy to reflect any changes in technology or data protection legislation. Any updates or changes that may affect how we use cookies or how you as a user can manage cookies will appear on this page.\"), /*#__PURE__*/React.createElement(\"h3\", null, \"What is a Cookie?\"), /*#__PURE__*/React.createElement(\"p\", null, \"A cookie is a small piece of data sent by a website\\u2019s server to your computer or mobile device and stored in your browser (e.g. Google Chrome, Firefox, Internet Explorer etc). It consists of anonymous information, including a unique user identifier. When you revisit a site or navigate between pages, this data is passed from your browser to the site\\u2019s server. With this data, the website is able to \\u2018remember\\u2019 your browser, enabling it to retrieve your user preferences, to personalise your visits and to simplify any sign-in procedures.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"Cookies are intended to improve your user experience by making it easier and faster to navigate through a website. For example, some websites require that you log in to gain access. If such sites did not use cookies, then you would be required to enter your login details every time you navigated to a new page because the website would not be able to remember that you had already logged in.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"Many websites also use cookies for advertising purposes. For example, certain cookies allow a website to determine if you\\u2019ve already seen a particular ad and therefore it may not display that ad on subsequent pages that you visit.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"All of the information a cookie collects can only be retrieved by the website server that sent the cookie to your browser.\"), /*#__PURE__*/React.createElement(\"h3\", null, \"Cookies on SpotMyCrib.ie\"), /*#__PURE__*/React.createElement(\"p\", null, \"We use the following Cookies on sections of SpotMyCrib.ie site and the mobile application:\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"Strictly necessary cookies: These are cookies that are required for the operation of our website. They include, for example, cookies that enable you to log into secure areas of our website.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"Analytical / Performance Cookies: They are set by SpotMyCrib.ie and third parties, including Comscore and Google Analytics. Performance cookies allow us to collect statistical information about our visitors, such as whether they have visited the site before and the pages they view. This information is gathered anonymously - it does NOT enable us to identify who you are. We use these cookies to determine the kind of content and services our visitors value most, which in turn helps us improve our website and its content.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"Third Party Cookies: We and third-party vendors, including Google, use first-party cookies and third-party cookies together to inform, optimise and serve ads based on users\\u2019 past visits to this website. We use data from Google's Interest-based advertising or 3rd-party audience data (such as age, gender and interests) with Google Analytics to understand who our users are in order to create a better experience for them while visiting our website. We may use Remarketing with Google Analytics to advertise online. Third-party vendors, including Google, show our ads on sites across the Internet.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"Google Analytics: Users can opt out of Google Analytics for Display Advertising and customise Google Display Network ads using the Ads Settings found here: www.google.com/settings/ads.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"Functionality cookies: These are used to recognise you when you return to our website. This enables us to personalise our content for you, greet you by name and remember your preferences.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"Targeting cookies: These cookies record your visit to our website, the pages you have visited and the links you have followed. We will use this information to make our website and the advertising displayed on it more relevant to your interests. We may also share this information with third parties for this purpose.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"We do not control which cookies are set by third parties or how the cookie information is used \\u2013 a cookie can only be accessed by the party who set it. For more information on these cookies, please visit the third-party website.\"), /*#__PURE__*/React.createElement(\"h3\", null, \"Controlling cookies\"), /*#__PURE__*/React.createElement(\"p\", null, \"Cookies are meant to improve the user experience, but some users prefer to set restrictions on the types of cookies that can be stored on their computer or mobile phone.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"By modifying your browser preferences, you have the choice to accept all cookies, to be notified when a cookie is set or to reject all cookies.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"It is important to note that you will lose some functions of a website if you choose to restrict or disable its cookies.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, \"Have more questions? \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('contactus')\n    }, \"Submit a request\")))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"EstateAgent.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/static/EstateAgent.jsx                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => EstateAgent\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\n\nclass EstateAgent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      f2Success: false,\n      knowMore: false\n    };\n    this.sinterestformHandler = this.sinterestformHandler.bind(this);\n    this.sinterestformtryagainHandler = this.sinterestformtryagainHandler.bind(this);\n    this.knowMoreBtnHandler = this.knowMoreBtnHandler.bind(this);\n  }\n\n  componentDidMount() {\n    // var $zoho=$zoho || {};$zoho.salesiq = $zoho.salesiq ||\n    //     {widgetcode:\"5e6f4b070bdd6e53b8a76febfd867047f48220a3f0e688fad51400b27169fabc7e3e6a8594601225fa1324917f66ed28\", values:{},ready:function(){}};\n    // var d=document;s=d.createElement(\"script\");s.type=\"text/javascript\";s.id=\"zsiqscript\";s.defer=true;\n    // s.src=\"https://salesiq.zoho.eu/widget\";t=d.getElementsByTagName(\"script\")[0];t.parentNode.insertBefore(s,t);d.write(\"<div id='zsiqwidget'></div>\");\n    try {\n      jQuery(\"html,body\").animate({\n        scrollTop: 0\n      }, 250);\n    } catch (e) {\n      document.body.scrollTop = document.documentElement.scrollTop = 0;\n    }\n\n    var data = [[30, 1, 2, 20], ['300', 10, 20, '200'], //333 //10\n    ['3,000', 100, 200, '2,000'], //333 //100\n    ['6,000', 200, 400, '4,000'], //333 //200\n    ['12,000', 400, 800, '8,000'], //333 //400\n    ['30,000', '1,000', '2,000', '20,000'], //333 //1000\n    ['60,000', '2,000', '4,000', '40,000'] //333 //2000\n    ]; // $(\"#slider\").slider({\n    //\n    //     value: \"1\",\n    //     min: 0,\n    //     max: 6,\n    //     step: 1,\n    //     slide: function(event, ui) {\n    //         console.log('Sliding in progress');\n    //         // debugger;\n    //         $(\".viewingsSaved\").html(data[ui.value][0]);\n    //         $(\".tripsSaved\").html(data[ui.value][1]);\n    //         $(\".hoursSaved\").html(data[ui.value][2]);\n    //         $(\".moneySaved\").html(data[ui.value][3]);\n    //\n    //     }\n    // });\n\n    $(\"#many_properties_area_slider\").noUiSlider({\n      start: [10],\n      range: {\n        'min': [1],\n        '30%': [10],\n        '50%': [100],\n        '60%': [500],\n        '70%': [1000],\n        'max': [2000]\n      }\n    }).on('slide', function (ev, val) {\n      // set real values on 'slide' event\n      var i = Math.round(val); // $('#lcountInline').html(i);\n\n      $('#lcount').html(i);\n      $(\".viewingsSaved\").html(30 * i);\n      $(\".tripsSaved\").html(1 * i);\n      $(\".hoursSaved\").html(2 * i);\n      $(\".moneySaved\").html(80 * i);\n    }).on('change', function (ev, val) {// round off values on 'change' event\n    }); // setTimeout(function() {\n    //     var slider = document.getElementById('many_properties_area_slider');\n    //     templateInstance.noUiSlider.create(slider, {\n    //         start: [ 10 ],\n    //         range: {\n    //             'min': [  1 ],\n    //             '30%': [  200 ],\n    //             '50%': [  500 ],\n    //             '70%': [  1000 ],\n    //             'max': [ 2000 ]\n    //         },\n    //         // tooltips: [wNumb({ decimals: 1 })]\n    //         tooltips: true\n    //\n    //\n    //     });\n    //\n    //     slider.noUiSlider.on('update', function( values, handle ) {\n    //         var i = Math.round(values[handle]);\n    //         $('#lcount').html(i);\n    //         $(\".viewingsSaved\").html(30*i);\n    //         $(\".tripsSaved\").html(1*i);\n    //         $(\".hoursSaved\").html(2*i);\n    //         $(\".moneySaved\").html(80*i);\n    //     });\n    // },500);\n    // setTimeout(function() {\n    //     // $.scrollify({\n    //     //     section: \"section\",\n    //     // });\n    // },500);\n  }\n\n  joinNowBtnHandler() {\n    FlowRouter.go('joinnowlandlord');\n  }\n\n  sinterestformHandler(event) {\n    event.preventDefault();\n    const target = event.target;\n    const email = target.emailaddress.value;\n    const fullname = target.fullname.value;\n    const company = target.company.value;\n    const phone = target.phone.value; // import \"../accounts/validation.js\";\n\n    let validatedEmail = LoginFormValidation.email(email);\n\n    if (validatedEmail !== true) {\n      console.log(validatedEmail.error);\n      alert(validatedEmail.reason); // var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n      // if(!validatedEmail.reason)error.reason = 'Invalid email. Please correct the email address entered.';\n      // tmp.push(validatedEmail.reason);\n      // Session.set(\"showErrorDlg\",tmp)\n    } else {\n      ga('send', 'event', 'estateAgentPage', 'sinterestForm', 'Special intro offer form submitted');\n      Meteor.call('introOfferRequestReceived', email, fullname, company, phone);\n      this.setState({\n        f2Success: true\n      });\n    }\n  }\n\n  sinterestformtryagainHandler() {\n    this.setState({\n      f2Success: false\n    });\n  }\n\n  knowMoreBtnHandler() {\n    if (this.state.knowMore) this.setState({\n      knowMore: false\n    });else {\n      this.setState({\n        knowMore: true\n      });\n      setTimeout(function () {\n        try {\n          $('html, body').animate({\n            scrollTop: $(\"#knowmorebegin\").offset().top\n          }, 500);\n        } catch (e) {}\n      }, 500);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"link\", {\n      rel: \"stylesheet\",\n      href: \"css/estateagent.css\"\n    }), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"topheader\",\n      id: \"topheader\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container container-fixed rdc\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 logo\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('home')\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/logo.png\")\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-10 col-md-offset-1 property_listings\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"Post Your Property listings and Select your tenant now\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-places home-page-box-places\",\n      style: {\n        background: 'none',\n        padding: 0\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(KnowMoreForm, null)))))))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"spotyourtenant\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container container-fixed rdc\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 rdc\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 \"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Spot Your Tenant\"), /*#__PURE__*/React.createElement(\"p\", null, \"SpotMyCrib makes your work easy. You can \", /*#__PURE__*/React.createElement(\"br\", null), \"post your property and screen tenants online. The screening process includes a rental application \", /*#__PURE__*/React.createElement(\"br\", null), \"with their references and their complete social profiles.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 \"\n    }, false ? /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/video.png\"),\n      className: \"img-responsive\"\n    }) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      id: \"video-div\"\n    }, /*#__PURE__*/React.createElement(\"iframe\", {\n      width: \"462.2\",\n      height: \"260\",\n      src: \"https://www.youtube.com/embed/L689NIDwFdc?rel=0\",\n      frameBorder: \"0\",\n      allowFullScreen: true\n    }))))))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"many_properties_area\",\n      style: {\n        minHeight: 700\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container rdc container-fixed\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 rdc text-center\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"How Many Properties are you listing?\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrappernew\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"colThree\",\n      style: {\n        margin: '0px 0 20px 0px',\n        textAlign: 'left'\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"contenta\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"lcount\"\n    }, \"10\"), /*#__PURE__*/React.createElement(\"span\", null, \"1\"), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        float: 'right'\n      }\n    }, \"2000\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"many_properties_area_slider\"\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container container-fixed\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 rdc\"\n    }, /*#__PURE__*/React.createElement(\"article\", {\n      className: \"col oneline\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"circle-in\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"viewingsSaved\"\n    }, \"300\"), /*#__PURE__*/React.createElement(\"p\", null, \"Viewings Saved\"))), /*#__PURE__*/React.createElement(\"article\", {\n      className: \"col oneline\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"circle-in\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tripsSaved\"\n    }, \"10\"), /*#__PURE__*/React.createElement(\"p\", null, \"Travel trips Saved\"))), /*#__PURE__*/React.createElement(\"article\", {\n      className: \"col oneline\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"circle-in\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"hoursSaved\"\n    }, \"20\"), /*#__PURE__*/React.createElement(\"strong\", null, \"Hours\")), /*#__PURE__*/React.createElement(\"p\", null, \"Time Saved\"))), /*#__PURE__*/React.createElement(\"article\", {\n      className: \"col oneline\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"circle-in\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, \"\\u20AC\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"moneySaved\"\n    }, \"800\")), /*#__PURE__*/React.createElement(\"p\", null, \"Money Saved\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 btn-account_area\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn green-btn joinNowBtn\",\n      onClick: this.joinNowBtnHandler\n    }, \"Claim your Free Account\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container rdc\"\n    })))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"business_area\",\n      style: {\n        minHeight: 970\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container  rdc\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 rdc business_area_onesecton\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Expand / Develop Your Business with these BENEFITS\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 competitive\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/img_01.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"h3\", null, \"Competitive Advantage\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Get the competitive edge you need to excel in this extremely competitive market. \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 competitive\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/img_02.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"h3\", null, \"Reduced Admin\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Save time and money by automating \", /*#__PURE__*/React.createElement(\"br\", null), \"renting, managing and maintaining \", /*#__PURE__*/React.createElement(\"br\", null), \"your property.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 competitive\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/img_03.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"h3\", null, \"Safe secure system\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"SpotMyCrib uses state of the art\", /*#__PURE__*/React.createElement(\"br\", null), \"technology to keep your data\", /*#__PURE__*/React.createElement(\"br\", null), \" safe and secure.\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 rdc business_area_onesecton\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 competitive\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/img_04.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"h3\", null, \"Digital accounting and maintenance\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Post your property instantly on the\", /*#__PURE__*/React.createElement(\"br\", null), \"go, from your mobile phone. Save valuable time.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 competitive\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/img_05.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"h3\", null, \"Screen tenants\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Receive and access all your tenant \", /*#__PURE__*/React.createElement(\"br\", null), \"references and applications from one centralised account. Access them anytime, anywhere across the globe. \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 competitive\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/img_06.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"h3\", null, \"Verify social profiles\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \" LinkedIn, twitter and facebook profile verification.\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 rdc business_area_onesecton\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 competitive\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/img_10.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"h3\", null, \"Report\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Get intelligent reports on rental and maintenance costs identifying patterns to add revenue streams.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 competitive\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/img_08.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"h3\", null, \"Get Paid\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Auto-rent collection, friendly rental reminders 24 hours prior to rental date, failure to pay on time leads to warning notices being issued and much more.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 competitive\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/img_09.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"h3\", null, \"e-Sign Lease\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Generate and sign lease/contracts\", /*#__PURE__*/React.createElement(\"br\", null), \"online.\")))))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"howitwork_section\",\n      style: {\n        minHeight: 650\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container rdc\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"How it works\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 rdc\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 posting_section\",\n      style: {\n        paddingBottom: 81\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"POSTING LETTING\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/workimg_01.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Market your property through spotmycrib.ie and find your ideal tenant effortlessly. Post your property photographs n details.\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Market your property through spotmycrib.ie and find your ideal tenant effortlessly. Post your property photographs and particulars.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 posting_section\",\n      style: {\n        paddingBottom: 56\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"SCREEN TENANTS\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/workimg_02.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Our applicants apply for your property online via SpotMyCrib. View all their details, references, social profiles online and screen them. Click \\\"choose\\\" and select your tenant. It is as simple as that.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 posting_section\",\n      style: {\n        paddingBottom: 81\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"SIGN DIGITAL LEASE\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/workimg_03.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Generate and sign legally binding lease/contracts online. Automatic reminder and reporting on lease expiry dates. \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 posting_section\",\n      style: {\n        paddingBottom: 81\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"COLLECT RENTS\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/workimg_04.png\"),\n      className: \"img-responsive\"\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        lineHeight: '30px',\n        fontSize: '17px'\n      }\n    }, \"Let your tenants pay rent online. Automated rent collection and owner disbursements. Reminders and reporting on all payments.\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 btn-account_area\"\n    }, this.state.knowMore ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn green-btn knowMoreBtn\",\n      onClick: this.knowMoreBtnHandler\n    }, \"Know Less!\") : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn green-btn knowMoreBtn\",\n      onClick: this.knowMoreBtnHandler\n    }, \"Know More!\"))))), this.state.knowMore ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"section\", {\n      id: \"knowmorebegin\",\n      className: \"property_area\",\n      style: {\n        minHeight: 700\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container container-fixed rdc\"\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        marginBottom: 60\n      }\n    }, \"Make your life faster and easier!!\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\"\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"Post your property\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {}\n    }, \"Here is your chance to post your property in the best light possible. Describe it, is it furnished? What amenities are available? Pets allowed? Add all the desirable features of it. Post the best photographs of it. Have tenants fall in love with your property time and time again.\"), /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('advertisewithus'),\n      className: \"btn green-btn\"\n    }, \"Post your letting\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/post.png\"),\n      className: \"img-responsive\",\n      style: {\n        boxShadow: 'none'\n      }\n    })))))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"screentenants_area\",\n      style: {\n        minHeight: 700\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container container-fixed rdc\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/estateagentpage/screen-tenants.jpg\"),\n      className: \"img-responsive\"\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-1\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5\"\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"Screen Tenants\"), /*#__PURE__*/React.createElement(\"p\", null, \"Find your best tenant by screening them online. You get all their details, references, social profiles as they apply for your property. Their application package will also include credentials like their experian credit check, criminal check, previous rental history and all other necessary details. Screen them faster and close your deal.\")))))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"property_area\",\n      style: {\n        minHeight: 700\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container container-fixed rdc\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\"\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"Manage Rent Online\"), /*#__PURE__*/React.createElement(\"p\", null, \"No more paperwork. Manage your rental income online. SpotMyCrib is safe and reliable. You can also check the deposits, rent amount and deadlines here. No more hassle with cash payments or standing orders.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/payment.png\"),\n      className: \"img-responsive\"\n    })))))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"property_area\",\n      style: {\n        minHeight: 700\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container container-fixed rdc\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/e-sign.png\"),\n      className: \"img-responsive\"\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-1\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5\"\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"Online Lease Signing\"), /*#__PURE__*/React.createElement(\"p\", null, \"Simply upload your necessary details. Get your legally binding document back with minimal effort. SpotMyCrib makes your job much easier and simpler. Store your contract online and view it any time you wish.\"))))))) : \"\", /*#__PURE__*/React.createElement(\"section\", {\n      className: \"receive_area\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container container-fixed rdc\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 rdc text-center\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Receive a Special Introductory Offer\"), this.state.f2Success ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        marginBottom: 20,\n        color: 'black'\n      },\n      className: \"text-center\"\n    }, \"Thank you for your interest.\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn green-btn sinterestformtryagain\",\n      type: \"submit\",\n      onClick: this.sinterestformtryagainHandler\n    }, \"Add another\")) : /*#__PURE__*/React.createElement(\"form\", {\n      role: \"form\",\n      className: \"sinterest-form\",\n      onSubmit: this.sinterestformHandler\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col-xs-12 col-sm-6 col-md-6 col-lg-6\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"email\",\n      type: \"email\",\n      className: \"form-control\",\n      id: \"emailaddress\",\n      name: \"emailaddress\",\n      placeholder: \"Enter your email\"\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col-xs-12 col-sm-6 col-md-6 col-lg-6\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"name\",\n      type: \"text\",\n      className: \"form-control\",\n      id: \"fullname\",\n      name: \"fullname\",\n      placeholder: \"Your full name\"\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clearfix\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col-xs-12 col-sm-6 col-md-6 col-lg-6\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"organization\",\n      type: \"text\",\n      className: \"form-control\",\n      id: \"company\",\n      name: \"company\",\n      placeholder: \"Company\"\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col-xs-12 col-sm-6 col-md-6 col-lg-6\"\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"tel\",\n      type: \"text\",\n      className: \"form-control\",\n      id: \"phone\",\n      name: \"phone\",\n      placeholder: \"Phone\"\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clearfix\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"clearfix\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xs-12 col-sm-12 col-md-12 col-lg-12 submit\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btns green-btn\"\n    }, \"Learn More!\"))))))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"frequently_area\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"faq-content mar-btm-20\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container container-fixed rdc\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"faq-section-hold\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Frequently asked questions\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-group agent-panel-group\",\n      id: \"accordion\",\n      role: \"tablist\",\n      \"aria-multiselectable\": \"true\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapseOne\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseOne\",\n      className: \"collapsed\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingOne\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title \"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"1\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"It is my understanding that current legislation will not allow for bidding that exceeds the permitted rent amount. \"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseOne\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingOne\",\n      \"aria-expanded\": \"false\",\n      style: {\n        height: 0\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"We have an option to disable the bidding and have done so.\"), /*#__PURE__*/React.createElement(\"li\", null, \"We have contacted the RTB: Residential Tenancies Board in Ireland (in writing) and asked them if a tenant offers more rent and a landlord agrees to it - is that legal. They confirmed it is legal if both sides agree to it.\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapseTwo\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseOne\",\n      className: \"collapsed\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingOne\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title \"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"2\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"What would the knock effect be should there be arrears, can warning letters be sent? etc\"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseTwo\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingOne\",\n      \"aria-expanded\": \"false\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"We can send warning emails/reminder emails and report on who are due rents, arrears.\"), \"                                              \", /*#__PURE__*/React.createElement(\"li\", null, \"SpotMyCrib also remembers the history of a tenants arrears, etc\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"collapsed\",\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapseThree\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseTwo\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingTwo\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"3\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"What responsibility is there on the agent, from a Data Protection perspective, If references are sent to a website?\"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseThree\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingTwo\",\n      \"aria-expanded\": \"false\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"All Data is being held and maintained by SpotMyCrib within Europe and the key system ensures the data is being shared within in the terms of the consumer's signup.\"), /*#__PURE__*/React.createElement(\"li\", null, \"There is no responsibility on the agent, Users agree to terms of service, privacy when they upload their references. This actively operates within the GDPR (\", /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      href: \"https://en.wikipedia.org/wiki/General_Data_Protection_Regulation\"\n    }, \" Data protection Regulation\"), \") framework. \"), /*#__PURE__*/React.createElement(\"li\", null, \"Customers retain at all times the option to have all of their data removed, inspected or deletion if we're contacted in writing directly or indirectly by the agent on the consumer's behalf.\"), /*#__PURE__*/React.createElement(\"li\", null, \"The key system ensures the agent can deal with all Data Protection issues for a renter, speedily and thoroughly within the regulations.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Plus we are 100% compliant with data being stored within Europe, all of our data is stored on Amazon Ireland.\"), /*#__PURE__*/React.createElement(\"li\", null, \"We also use https encryption, which encrypts all the communication between user and spotmycrib.ie\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"collapsed\",\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapseFour\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseThree\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingThree\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"4\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"Is there a benefit to the references being collect by Spot my crib rather than say our personal emails? \"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseFour\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingThree\",\n      \"aria-expanded\": \"false\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"p\", null, \"There are many other advantages as given below. \"), /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"Centralised records, no more going through emails back and forth to gain references.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Time tracking applications and sequencing\"), /*#__PURE__*/React.createElement(\"li\", null, \"Elimination of duplication.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Time-saving - as discussed on our previous meeting, let's say Neptune gets 30 viewings per house and for 100 units, its 3000 viewings - that is 3k digital applications\"), /*#__PURE__*/React.createElement(\"li\", null, \"Instant social profile checks - verify users to check if they would they be a good fit for the property.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Digital fingerprint background Checks - of all the references\"), /*#__PURE__*/React.createElement(\"li\", null, \"Instant salary affordability checks - Check if the tenants can afford the house\"), /*#__PURE__*/React.createElement(\"li\", null, \"No more paper to get lose.\"), /*#__PURE__*/React.createElement(\"li\", null, \"No longer tied to office - checks can be made from anywhere, any device, laptop/mobile.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Customised filters - to choose only the best tenants using an Agent's experience.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Set up invites for viewing - only invite selected applicants for the viewing.\"), /*#__PURE__*/React.createElement(\"li\", null, \"The key ensures it is a particular property and eliminates confusion for the renter.\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"collapsed\",\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapseFive\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseThree\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingThree\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"5\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"How does someone who Is looking for an Apartment know to go to Spot my Crib?. They will think My Home and Daft. \"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseFive\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingThree\",\n      \"aria-expanded\": \"false\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"Tenants can search for the property directly from our home page.\"), /*#__PURE__*/React.createElement(\"li\", null, \"A property's link/key is shared either in the ad or with the ad in daft, myhome etc.\"), /*#__PURE__*/React.createElement(\"li\", null, \"A property's link/key can also be posted on the Agent's website.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Agents can print the key and give a hardcopy of the key to viewers when they visit the property. \")))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 btn-account_area\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('faqs'),\n      className: \"btn green-btn\"\n    }, \"More FAQs!\"))))))));\n  }\n\n}\n\nclass KnowMoreForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      f1Success: false\n    };\n    this.knowmoreformtryagainHandler = this.knowmoreformtryagainHandler.bind(this);\n    this.knowmoreformHandler = this.knowmoreformHandler.bind(this);\n  }\n\n  knowmoreformtryagainHandler() {\n    this.setState({\n      f1Success: false\n    });\n  }\n\n  knowmoreformHandler(event) {\n    event.preventDefault();\n    const target = event.target;\n    const email = target.emailaddress.value;\n    let validatedEmail = LoginFormValidation.email(email);\n\n    if (validatedEmail !== true) {\n      console.log(validatedEmail.error);\n      alert(validatedEmail.reason); // var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n      // if(!validatedEmail.reason)error.reason = 'Invalid email. Please correct the email address entered.';\n      // tmp.push(validatedEmail.reason);\n      // Session.set(\"showErrorDlg\",tmp)\n    } else {\n      ga('send', 'event', 'estateAgentPage', 'knowmoreForm', 'Know more form submitted');\n      Meteor.call('knowMoreRequestReceived', email);\n      this.setState({\n        f1Success: true\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"knowmore-form\",\n      onSubmit: this.knowmoreformHandler\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-btn\",\n      style: {\n        zIndex: 0,\n        margin: 0\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('advertisewithus'),\n      className: \"btn green-btn\"\n    }, \"Advertise your property\")), this.state.f1Success ? /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        marginBottom: 20,\n        display: 'inline',\n        paddingRight: '15px'\n      }\n    }, \"Thank you for your interest.\") : /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"email\",\n      type: \"text\",\n      className: \"form-control emailaddress\",\n      name: \"emailaddress\",\n      placeholder: \"Enter your email.\",\n      style: {\n        paddingLeft: 10,\n        zIndex: 0\n      }\n    }), this.state.f1Success ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn transparent-btn knowmoreformtryagain\",\n      type: \"submit\",\n      onClick: this.knowmoreformtryagainHandler\n    }, \"Add another\") : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-btn\",\n      style: {\n        zIndex: 0\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn transparent-btn\",\n      type: \"submit\"\n    }, \"Know More!\"))));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Faqs.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/static/Faqs.jsx                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => Faqs\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 2);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 3);\n\nclass Faqs extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"contact-bnr\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"Frequently Asked Questions\")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"faq-content\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"faq-section-hold\"\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"About SpotMyCrib\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-group\",\n      id: \"accordion1\",\n      role: \"tablist\",\n      \"aria-multiselectable\": \"true\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion1\",\n      href: \"#collapseOne1\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseOne\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingOne\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title \"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"1\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"What is SpotMyCrib?\"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseOne1\",\n      className: \"panel-collapse collapse in\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingOne\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"p\", null, \"Spotmycrib is an honest and open platform to provide you an ultimately safe and secure way make your renting experience an incredibly convenient experience for you. We understand your pain of standing in cold long queues and not getting called for. Say goodbye to your worries as spotmycrib is just a click away to bring together the landlord and the renter.\"), /*#__PURE__*/React.createElement(\"p\", null, \"SpotMyCrib brings renters and property owners together in one\\xA0transparent platform.\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"collapsed\",\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion1\",\n      href: \"#collapseTwo1\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseTwo\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingTwo\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"2\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"Why do you need it?\"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseTwo1\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingTwo\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"p\", null, \"Your pain in waiting for the call after a long reference is about to end. This is the platform to view and apply to your future home conveniently using your mobile and get screened sooner. This platform provides you the ideal experience like no other.\"), /*#__PURE__*/React.createElement(\"p\", null, \"Save your precious time and valuable money! You don\\u2019t need to wait for long. Submit your online application along with your personal credentials and make this process much easier and faster. Get your dream house with just a few clicks. Our online rental payment system is reliable and safe to pay your rent once you are in your home. Monthly payment is digital now.\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"collapsed\",\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion1\",\n      href: \"#collapseThree1\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseThree\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingThree\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"3\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"How it works?\"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseThree1\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingThree\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hidden-xs\"\n    }, \"I am a\", /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btns transparent-btn mar-left-10\",\n      href: FlowRouter.url('estateagent')\n    }, \"Landlord\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btns green-btn scroll1 mar-left-10\",\n      href: FlowRouter.url('howitworks')\n    }, \"Renter\")), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"visible-xs\"\n    }, \"Choose from below options\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btns transparent-btn mar-left-10\",\n      href: FlowRouter.url('estateagent')\n    }, \"Landlord\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btns green-btn scroll1 mar-left-10\",\n      href: FlowRouter.url('howitworks')\n    }, \"Renter\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"faq-section-hold pad-btm-60\"\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"Estate Agents/Landlords/Property Owners\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-group agent-panel-group\",\n      id: \"accordion\",\n      role: \"tablist\",\n      \"aria-multiselectable\": \"true\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapseOne\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseOne\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingOne\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title \"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"1\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"It is my understanding that current legislation will not allow for bidding that exceeds the permitted rent amount. \"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseOne\",\n      className: \"panel-collapse collapse in\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingOne\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"We have an option to disable the bidding and have done so.\"), /*#__PURE__*/React.createElement(\"li\", null, \"We have contacted the RTB: Residential Tenancies Board in Ireland (in writing) and asked them if a tenant offers more rent and a landlord agrees to it - is that legal. They confirmed it is legal if both sides agree to it.\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapseTwo\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseOne\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingOne\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title \"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"2\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"What would the knock effect be should there be arrears, can warning letters be sent? etc\"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseTwo\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingOne\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"We can send warning emails/ reminder emails and report on who are due rents, arrears.\"), \"                                              \", /*#__PURE__*/React.createElement(\"li\", null, \"SpotMyCrib also remembers the history of a tenants arrears, etc\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"collapsed\",\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapseThree\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseTwo\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingTwo\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"3\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"What responsibility is there on the agent, from a Data Protection perspective, If references are sent to a website?\"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseThree\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingTwo\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"All Data is being held and maintained by Spot My Crib within Europe and the key system ensures the data is being shared within in the terms of the consumer's signup.\"), /*#__PURE__*/React.createElement(\"li\", null, \"There is no responsibility on the agent, Users agree to terms of service, privacy when they upload their references. This actively operates within the GDPR (\", /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      href: \"https://en.wikipedia.org/wiki/General_Data_Protection_Regulation\"\n    }, \" Data protection Regulation\"), \") framework. \"), /*#__PURE__*/React.createElement(\"li\", null, \"Customers retain at all times the option to have all of their data removed, inspected or deletion if we're contacted in writing directly or indirectly by the agent on the consumer's behalf.\"), /*#__PURE__*/React.createElement(\"li\", null, \"The key system ensures the agent can deal with all Data Protection issues for a renter, speedily and thoroughly within the regulations.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Plus we are 100% compliant with data being stored within Europe, all of our data is stored on Amazon Ireland.\"), /*#__PURE__*/React.createElement(\"li\", null, \"We also use https encryption, which encrypts all the communication between user and spotmycrib.ie\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"collapsed\",\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapseFour\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseThree\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingThree\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"4\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"Is there a benefit to the references being collect by Spot my crib rather than say our personal emails? \"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseFour\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingThree\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"p\", null, \"There are many other advantages as given below. \"), /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"Centralised records, no more going through emails back and forth to gain references.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Time tracking applications and sequencing\"), /*#__PURE__*/React.createElement(\"li\", null, \"Elimination of duplication.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Time-saving - as discussed on our previous meeting, let's say Neptune gets 30 viewings per house and for 100 units, its 3000 viewings - that is 3k digital applications\"), /*#__PURE__*/React.createElement(\"li\", null, \"Instant social profile checks - verify users to check if they would they be a good fit for the property.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Digital fingerprint background Checks - of all the references\"), /*#__PURE__*/React.createElement(\"li\", null, \"Instant salary affordability checks - Check if the tenants can afford the house\"), /*#__PURE__*/React.createElement(\"li\", null, \"No more paper to get lose.\"), /*#__PURE__*/React.createElement(\"li\", null, \"No longer tied to office - checks can be made from anywhere, any device, laptop/mobile.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Customised filters - to choose only the best tenants using an Agent's experience.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Set up invites for viewing - only invite selected applicants for the viewing.\"), /*#__PURE__*/React.createElement(\"li\", null, \"The key ensures it is a particular property and eliminates confusion for the renter.\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel panel-default\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"collapsed\",\n      role: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapseFive\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseThree\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      role: \"tab\",\n      id: \"headingThree\"\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"panel-title\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-circle\"\n    }, \"5\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"position\"\n    }, \"How does someone who Is looking for an Apartment know to go to Spot my Crib?. They will think My Home and Daft. \"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-menu-down active-arrow\"\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"collapseFive\",\n      className: \"panel-collapse collapse\",\n      role: \"tabpanel\",\n      \"aria-labelledby\": \"headingThree\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\"\n    }, /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"Tenants can search for the property directly from our home page.\"), /*#__PURE__*/React.createElement(\"li\", null, \"A property's link/key is shared either in the ad or with the ad in daft, myhome etc.\"), /*#__PURE__*/React.createElement(\"li\", null, \"A property's link/key can also be posted on the Agent's website.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Agents can print the key and give a hardcopy of the key to viewers when they visit the property. \")))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mar-top-30\",\n      style: {\n        textAlign: 'center'\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", null, \"Learn more\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btns transparent-btn mar-left-10\",\n      href: FlowRouter.url('estateagent')\n    }, \"I'm a Landlord\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btns green-btn scroll1 mar-left-10\",\n      href: FlowRouter.url('howitworks')\n    }, \"I'm a Renter\")))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Gdpr.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/static/Gdpr.jsx                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => Gdpr\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 2);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 3);\n\nclass Gdpr extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"contact-bnr\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"Data Protection / GDPR\")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"faq-content conditions\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pad-top-btm-30 for-font\"\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"EU General Data Protection Regulation (GDPR)\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: true\n    }, /*#__PURE__*/React.createElement(\"p\", null, \"The EU General Data Protection Regulation (GDPR) will set a new standard for how companies use and protect EU citizens' data. It will take effect from May 2018.\"), /*#__PURE__*/React.createElement(\"p\", null, \"At SpotMyCrib, we've been working hard to prepare for GDPR, to ensure that we fulfil its obligations and maintain our transparency about user and customer data and how we use data.\"), /*#__PURE__*/React.createElement(\"p\", null, \"Here's an overview of GDPR, and how we are preparing for it at SpotMyCrib.\"), /*#__PURE__*/React.createElement(\"h3\", null, \"Overview\"), /*#__PURE__*/React.createElement(\"h4\", null, \"What is GDPR?\"), /*#__PURE__*/React.createElement(\"p\", null, \"The GDPR is a comprehensive European data protection law that provides significant data rights for protecting the privacy of natural persons residing in the EU. SpotMyCrib is committed to ensuring that our platform is GDPR-compliant when the regulation becomes enforceable on May 25, 2018.\"), /*#__PURE__*/React.createElement(\"h4\", null, \"How is GDPR applicable to SpotMyCrib?\"), /*#__PURE__*/React.createElement(\"p\", null, \"We collect data from our users and customers to better serve them. We also take ID proofs, references from our users as a supporting document for their letting application. We respect everyone's personal information, and it makes perfect sense for us to have one privacy policy and set of procedures to protect everyone's interests, including compliance with applicable local laws.\"), /*#__PURE__*/React.createElement(\"h4\", null, \"What personal information does SpotMyCrib process on behalf of its customers?\"), /*#__PURE__*/React.createElement(\"ol\", null, /*#__PURE__*/React.createElement(\"li\", null, \"We collect and maintain personal contact details which includes contact name, job title, email address, telephone number, and company name. If the customer is an individual sole proprietor or unaffiliated with any commercial or non-profit entity, it's possible that additional information such as street address and credit cardholder data is included.\"), /*#__PURE__*/React.createElement(\"li\", null, \"All customer data, that is, data controlled by our customers which we process according to their instructions, is appropriately classified as Confidential. This confidential data could contain personally-identifiable information about our Customers' End Users, which we cannot identify because it is encrypted and not accessible by SpotMyCrib staff.\"), /*#__PURE__*/React.createElement(\"li\", null, \"We also collect personal identity information as references to users application to a property. For example passport ID, PPS, resume or other details are collected to help you with your application process.\"), /*#__PURE__*/React.createElement(\"li\", null, \"More covered on \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('privacy')\n    }, \"privacy page\"), \".\")), /*#__PURE__*/React.createElement(\"h4\", null, \"What are Data Controllers and Data Processors?\"), /*#__PURE__*/React.createElement(\"p\", null, \"GDPR is designed to ensure protection of the privacy rights of data subjects. Data subjects are people from whom or about whom you collect information in connection with your business and its operations. Your obligations with regard to data subjects and their personal data depend on whether you're considered a controller or a processor under GDPR.\"), /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"Data Controllers\")), /*#__PURE__*/React.createElement(\"p\", null, \"GDPR defines a data controller as \\\"the natural or legal person, public authority, agency or another body which, alone or jointly with others, determines the purposes and means of the processing of personal data.\\\" In other words, if your organization processes personal data for your own organization's purposes and needs-not merely as a service provider acting on behalf of another organization-then you are likely to be a data controller.\"), /*#__PURE__*/React.createElement(\"p\", null, \"SpotMyCrib is a Data Controller for our direct customers.\"), /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"Data Processor\")), /*#__PURE__*/React.createElement(\"p\", null, \"Businesses or organizations that process personal data solely on behalf of, and as directed by, data controllers are data processors. In other words, when a data controller outsources a data processing function to another entity, that other entity is generally a data processor.\"), /*#__PURE__*/React.createElement(\"p\", null, \"For purposes of the GDPR, SpotMyCrib is also considered a Data Processor for our customers' end-users.\"), /*#__PURE__*/React.createElement(\"h4\", null, \"What steps is SpotMyCrib taking to ensure GDPR compliance?\"), /*#__PURE__*/React.createElement(\"ol\", null, /*#__PURE__*/React.createElement(\"li\", null, \"We conducted an internal review of all data our data points, how its collected, stored and how it's being used.\"), /*#__PURE__*/React.createElement(\"li\", null, \"We conducted an internal Data Protection Impact Assessment (DPIA) to discover what information we collect, and how it's being used.\"), /*#__PURE__*/React.createElement(\"li\", null, \"We will provide users and customers with resources and helpful information about privacy and GDPR, including whitepapers and blog posts.\"), /*#__PURE__*/React.createElement(\"li\", null, \"We will announce an update of our Privacy Policy for GDPR.\")), /*#__PURE__*/React.createElement(\"h3\", null, \"Our Customers and the GDPR\"), /*#__PURE__*/React.createElement(\"h4\", null, \"As a SpotMyCrib customer, what are my main responsibilities under the GDPR?\"), /*#__PURE__*/React.createElement(\"p\", null, \"SpotMyCrib customers are responsible for protecting the personal information of their end users, as Data Controllers and/or Data Exporters.\"), /*#__PURE__*/React.createElement(\"p\", null, \"Your responsibilities under GDPR will depend on the nature of your business and your personal data processing activities.  Nonetheless, broadly speaking, GDPR requires that personal data be:\"), /*#__PURE__*/React.createElement(\"ol\", null, /*#__PURE__*/React.createElement(\"li\", null, \"Processed lawfully, fairly and in a transparent manner,\"), /*#__PURE__*/React.createElement(\"li\", null, \"Collected for specified, explicit and legitimate purposes and not further processed in a manner incompatible with those purposes,\"), /*#__PURE__*/React.createElement(\"li\", null, \"Adequate, relevant, and limited to what is necessary for achieving those purposes,\"), /*#__PURE__*/React.createElement(\"li\", null, \"Accurate and kept up to date\"), /*#__PURE__*/React.createElement(\"li\", null, \"Stored no longer than necessary to achieve the purposes for which it was collected, and\"), /*#__PURE__*/React.createElement(\"li\", null, \"Properly secured against accidental loss, destruction or damage.\")), /*#__PURE__*/React.createElement(\"p\", null, \"It is our customer's responsibility to obtain the EXPRESS CONSENT of individual Data Subjects (for example, tenants, applications) to transfer their Personal Data to SpotMyCrib as a Data Processor and/or Data Importer. SpotMyCrib processes all such information as Confidential Data in accordance with the terms of our Data Processing Agreement and/or this Privacy Policy.\"), /*#__PURE__*/React.createElement(\"h4\", null, \"What actions does our customers need to take?\"), /*#__PURE__*/React.createElement(\"ol\", null, /*#__PURE__*/React.createElement(\"li\", null, \"In addition to seeking independent legal advice regarding your obligations under the GDPR, here are some tips to get you started:\"), /*#__PURE__*/React.createElement(\"li\", null, \"Educate yourself on the provisions of the \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://gdpr-info.eu/\",\n      target: \"_blank\"\n    }, \"GDPR\"), \" to understand how they may differ from your existing data protection obligations and practices.\"), /*#__PURE__*/React.createElement(\"li\", null, \"If you don't have dedicated data privacy or security personnel in-house, consider appointing a directly responsible individual (DRI) or small team to manage your company's GDPR compliance efforts.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Create an up-to-date inventory of personal data that you collect and manage.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Create a list of vendors who you send data to (analytics tools, CRMs, email tools, etc.), and understand whether they are a controller or a processor. Then, determine what their obligations are, and make sure they have a plan to be ready for the GDPR.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Develop a plan for obtaining and managing \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://gdpr-info.eu/art-7-gdpr/\",\n      target: \"_blank\"\n    }, \"consent\"), \" in accordance with the GDPR or establish other lawful grounds for using personal data.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Determine if your company needs to appoint a \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://gdpr-info.eu/art-37-gdpr/\",\n      target: \"_blank\"\n    }, \"Data Protection Officer\"), \" (DPO). For public authorities, and companies processing large amounts of special categories of personal data, the appointment of a \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://secure.edps.europa.eu/EDPSWEB/edps/EDPS/DPO\",\n      target: \"_blank\"\n    }, \"data protection officer\"), \" (DPO) is mandatory. Organizations will be expected to hire someone who has real expertise and knowledge of the latest laws and practices.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Becoming GDPR compliant takes time, and will require you to rethink how you collect and manage customer data. If you have any questions about the GDPR or want to learn how SpotMyCrib can help you prepare, please let us know.\")), /*#__PURE__*/React.createElement(\"h4\", null, \"What are the penalties for non-compliance with GDPR?\"), /*#__PURE__*/React.createElement(\"p\", null, \"Depending on the nature of the violation, data protection authorities may issue fines or penalties for non-compliance up to \\u20AC 20 million or 4% of global revenue.\"), /*#__PURE__*/React.createElement(\"h4\", null, \"Where can I get more information about GDPR?\"), /*#__PURE__*/React.createElement(\"ol\", null, /*#__PURE__*/React.createElement(\"li\", null, \"From the original source: The Council of the European Union where the legislation was approved. \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://publications.europa.eu/en/publication-detail/-/publication/c7d157e6-fccd-11e7-b8f5-01aa75ed71a1/language-en/format-PDF/source-62885347\",\n      target: \"_blank\"\n    }, \"https://publications.europa.eu/en/publication-detail/-/publication/c7d157e6-fccd-11e7-b8f5-01aa75ed71a1/language-en/format-PDF/source-62885347\")), /*#__PURE__*/React.createElement(\"li\", null, \"For more general GDPR readiness portals, we suggest:\\xA0\", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.eugdpr.org/\",\n      target: \"_blank\"\n    }, \"https://www.eugdpr.org/\"), /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, \"GDPR FAQs: \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.eugdpr.org/gdpr-faqs.html\",\n      target: \"_blank\"\n    }, \"https://www.eugdpr.org/gdpr-faqs.html\")))), /*#__PURE__*/React.createElement(\"li\", null, \"From leading Privacy advocacy organizations:\", /*#__PURE__*/React.createElement(\"ol\", null, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://iapp.org/resources/topics/eu-gdpr/\",\n      target: \"_blank\"\n    }, \"https://iapp.org/resources/topics/eu-gdpr/\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.epic.org/international/eu_general_data_protection_reg.html\",\n      target: \"_blank\"\n    }, \"https://www.epic.org/international/eu_general_data_protection_reg.html\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"http://www.truste.com\",\n      target: \"_blank\"\n    }, \"www.truste.com\"))))), /*#__PURE__*/React.createElement(\"p\", null, \"Have more questions? \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('contactus'),\n      target: \"_blank\"\n    }, \"Submit a request\"))))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"HowItWorks.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/static/HowItWorks.jsx                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => HowItWorks\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 2);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 3);\n\nclass HowItWorks extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"about-bnr\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"How it Works\")), /*#__PURE__*/React.createElement(\"section\", {\n      id: \"how-works\",\n      className: \"sec-holder how-it-works\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"mar-top-30\"\n    }, /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"pad-btm-30\"\n    }, \"Search Property\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/how-it-works/search-and-find-property-apartment-flat.png\"),\n      alt: \"Search and find your rental property\",\n      className: \"pad-btm-30\"\n    }), /*#__PURE__*/React.createElement(\"p\", null, \"Search and find an apartment/house you like from our \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('home') + '#searchform'\n    }, \"browse form\"), \". Or choose your county from our \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('home') + '#homeLinks'\n    }, \"county list\"), \" in our home page.\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"pad-btm-30\"\n    }, \"Set Your Rent\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/how-it-works/set-your-rent-apartment.png\"),\n      alt: \"Apply and set your rent for Apartment\",\n      className: \"pad-btm-30\"\n    }), /*#__PURE__*/React.createElement(\"p\", null, \"Make your offer for the house and click apply. Remember to upload all your references in your profile.\")), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"pad-btm-30\"\n    }, \"Confirm your Home\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: cdnPath(\"/images/how-it-works/confirm-your-rent-in-dublin.png\"),\n      alt: \"Confirm your rental\",\n      className: \"pad-btm-30\"\n    }), /*#__PURE__*/React.createElement(\"p\", null, \"Landlord chooses a tenant based on your references and your offer. If you are chosen, you would receive a confirmation email. \")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mar-top-30\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('faqs'),\n      className: \"green-btn btns \",\n      type: \"button\"\n    }, \"Learn more\")))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Privacy.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/static/Privacy.jsx                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => Privacy\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 2);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 3);\n\nclass Privacy extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"contact-bnr\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"Privacy Policy\")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"faq-content conditions\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pad-top-btm-30 for-font\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-grey\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Your privacy is important to us. This privacy policy explains what personal data SpotMyCrib collects from you, through our interactions with you and through our products, and how we use that data.\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"infoCo\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"It is compiled to better serve those who are concerned with how their 'Personally Identifiable Information' (PII) is being used online. PII, as described in privacy law and information security, is information that can be used on its own or with other information to identify, contact, or locate a single person, or to identify an individual in context. Please read our privacy policy carefully to get a clear understanding of how we collect, use, protect or otherwise handle your Personally Identifiable Information in accordance with our website.\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"infoCo\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-black\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"What personal information do we collect from the people that visit website?\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"ol\", null, /*#__PURE__*/React.createElement(\"li\", null, \"We collect and maintain personal contact details which includes contact name, job title, email address, telephone number, and company name. If the customer is an individual sole proprietor or unaffiliated with any commercial or non-profit entity, it's possible that additional information such as street address and credit cardholder data is included.\"), /*#__PURE__*/React.createElement(\"li\", null, \"All customer data, that is, data controlled by our customers which we process according to their instructions, is appropriately classified as Confidential. This confidential data could contain personally-identifiable information about our Customers' End Users, which we cannot identify because it is encrypted and not accessible by SpotMyCrib staff.\"), /*#__PURE__*/React.createElement(\"li\", null, \"We also collect personal identity information as references to users application to a property. For example passport ID, PPS, resume or other details are collected to help you with your application process.\"), /*#__PURE__*/React.createElement(\"li\", null, \"More covered on \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('gdpr')\n    }, \"Data Protection\"), \" page.\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-black\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"When do we collect information?\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We collect information from you when you register on our site, applying for a letting, upload references to your profile, browse through the site, search for properties, fill out a form or enter information on our site.\"), /*#__PURE__*/React.createElement(\"br\", null), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      id: \"infoUs\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-black\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"How do we use your information? \")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \" We may use the information we collect from you when you register, apply for a letting, sign up for our newsletter, respond to a survey or marketing communication, surf the website, or use certain other site features in the following ways:\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-black\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" As a reference to your letting application process, your references and personal info will only be shared with the landlord or the agents who posted the property. Your information will not be shared with anyone else and will be kept confidential. \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" To personalize your experience and to allow us to deliver the type of content and product offerings in which you are most interested.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" To improve our website in order to better serve you.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" To quickly process your transactions.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" To send periodic emails regarding your rental application, profile, property alerts or other similar services.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" To follow up with them after correspondence (live chat, email or phone inquiries)\"), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"infoPro\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-black\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"How do we protect your information?\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We do not use vulnerability scanning and/or scanning to PCI standards.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We only provide articles and information. We never ask for credit card numbers.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We do not use Malware Scanning.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Your personal information is contained behind secured networks and is only accessible by a limited number of persons who have special access rights to such systems, and are required to keep the information confidential. In addition, all sensitive/credit information you supply is encrypted via Secure Socket Layer (SSL) technology. \"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We implement a variety of security measures when a user enters, submits, or accesses their information to maintain the safety of your personal information.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"coUs\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-black\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"How to Access & Control Your Personal Data?\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"You can view, edit, or delete your personal data online for your profile. You can always choose whether you wish to receive promotional email, SMS messages, telephone calls and postal mail from SpotMyCrib. You can also opt out from receiving interest-based advertising from SpotMyCrib by clicking on unsubscribe from our emails or by writing to us at \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"mailto:support@spotmycrib.com\"\n    }, \"support@spotmycrib.com\"), \" .\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"coUs\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-black\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"Do we use 'cookies'?\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Yes. Cookies are small files that a site or its service provider transfers to your computer's hard drive through your Web browser (if you allow) that enables the site's or service provider's systems to recognize your browser and capture and remember certain information. For instance, we use cookies to help us remember and process the items in your shopping cart. They are also used to help us understand your preferences based on previous or current site activity, which enables us to provide you with improved services. We also use cookies to help us compile aggregate data about site traffic and site interaction so that we can offer better site experiences and tools in the future.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"strong\", null, \"We use cookies to:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" Understand and save user's preferences for future visits.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), \"You can choose to have your computer warn you each time a cookie is being sent, or you can choose to turn off all cookies. You do this through your browser settings. Since browser is a little different, look at your browser's Help Menu to learn the correct way to modify your cookies.\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"If you turn cookies off, Some of the features that make your site experience more efficient may not function properly.It won't affect the user's experience that make your site experience more efficient and may not function properly.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"More information about out cookies are in our \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('cookiepolicy')\n    }, \"Cookie Policy\"), \" page.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"trDi\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-black\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"Third-party disclosure\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"Do we disclose the information we collect to Third-Parties?\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We sell,trade, or otherwise transfer to outside parties your name, address,city,town, any form or online contact identifier email, name of chat account etc., screen name or user names, phone number\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"strong\", null, \"We engage in this practice because,:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Users references and personal details uploaded in profile will only be shared with landlord or agents, as a proof of your application. \"), \"Personally Identifiable Information.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"trLi\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-black\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"Third-party links\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Occasionally, at our discretion, we may include or offer third-party products or services on our website. These third-party sites have separate and independent privacy policies. We therefore have no responsibility or liability for the content and activities of these linked sites. Nonetheless, we seek to protect the integrity of our site and welcome any feedback about these sites.\"), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"gooAd\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blueText\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"Google\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Google's advertising requirements can be summed up by Google's Advertising Principles. They are put in place to provide a positive experience for users. https://support.google.com/adwordspolicy/answer/1316548?hl=en \", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We use Google AdSense Advertising on our website.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), \"Google, as a third-party vendor, uses cookies to serve ads on our site. Google's use of the DART cookie enables it to serve ads to our users based on previous visits to our site and other sites on the Internet. Users may opt-out of the use of the DART cookie by visiting the Google Ad and Content Network privacy policy.\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"strong\", null, \"We have implemented the following:\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We, along with third-party vendors such as Google use first-party cookies (such as the Google Analytics cookies) and third-party cookies (such as the DoubleClick cookie) or other third-party identifiers together to compile data regarding user interactions with ad impressions and other ad service functions as they relate to our website. \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"strong\", null, \"Opting out:\"), /*#__PURE__*/React.createElement(\"br\", null), \"Users can set preferences for how Google advertises to you using the Google Ad Settings page. Alternatively, you can opt out by visiting the Network Advertising Initiative Opt Out page or by using the Google Analytics Opt Out Browser add on.\"), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"calOppa\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blueText\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"California Online Privacy Protection Act\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"CalOPPA is the first state law in the nation to require commercial websites and online services to post a privacy policy.  The law's reach stretches well beyond California to require any person or company in the United States (and conceivably the world) that operates websites collecting Personally Identifiable Information from California consumers to post a conspicuous privacy policy on its website stating exactly the information being collected and those individuals or companies with whom it is being shared. -  See more at: http://consumercal.org/california-online-privacy-protection-act-caloppa/#sthash.0FdRbT51.dpuf\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"strong\", null, \"According to CalOPPA, we agree to the following:\"), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Users can visit our site anonymously.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Once this privacy policy is created, we will add a link to it on our home page or as a minimum, on the first significant page after entering our website.\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Our Privacy Policy link includes the word 'Privacy' and can easily be found on the page specified above.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), \"You will be notified of any Privacy Policy changes:\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" On our Privacy Policy Page\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Can change your personal information:\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" By logging in to your account\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"strong\", null, \"How does our site handle Do Not Track signals?\"), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We honor Do Not Track signals and Do Not Track, plant cookies, or use advertising when a Do Not Track (DNT) browser mechanism is in place. \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"strong\", null, \"Does our site allow third-party behavioral tracking?\"), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"It's also important to note that we do not allow third-party behavioral tracking\"), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"coppAct\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blueText\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"COPPA (Children Online Privacy Protection Act)\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"When it comes to the collection of personal information from children under the age of 13 years old, the Children's Online Privacy Protection Act (COPPA) puts parents in control.  The Federal Trade Commission, United States' consumer protection agency, enforces the COPPA Rule, which spells out what operators of websites and online services must do to protect children's privacy and safety online.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We do not specifically market to children under the age of 13 years old.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"Do we let third-parties, including ad networks or plug-ins collect PII from children under 13?\"), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"ftcFip\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blueText\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"Fair Information Practices\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"The Fair Information Practices Principles form the backbone of privacy law in the United States and the concepts they include have played a significant role in the development of data protection laws around the globe. Understanding the Fair Information Practice Principles and how they should be implemented is critical to comply with the various privacy laws that protect personal information.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"strong\", null, \"In order to be in line with Fair Information Practices we will take the following responsive action, should a data breach occur:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" Within 7 business days\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"We will notify the users via in-site notification\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"strong\", null, \"\\u2022\"), \" Within 7 business days\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innerText\"\n    }, /*#__PURE__*/React.createElement(\"br\", null), \"We also agree to the Individual Redress Principle which requires that individuals have the right to legally pursue enforceable rights against data collectors and processors who fail to adhere to the law. This principle requires not only that individuals have enforceable rights against data users, but also that individuals have recourse to courts or government agencies to investigate and/or prosecute non-compliance by data processors.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, \"Have more questions? \", /*#__PURE__*/React.createElement(\"a\", {\n      href: FlowRouter.url('contactus')\n    }, \"Submit a request\"))))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Terms.jsx\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/reactui/static/Terms.jsx                                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => Terms\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet MainLayoutFooter;\nmodule.link(\"../layout/MainLayoutFooter.jsx\", {\n  default(v) {\n    MainLayoutFooter = v;\n  }\n\n}, 2);\nlet MainLayoutHeader;\nmodule.link(\"../layout/MainLayoutHeader.jsx\", {\n  default(v) {\n    MainLayoutHeader = v;\n  }\n\n}, 3);\n\nclass Terms extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MainLayoutHeader, null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"index\"\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"contact-bnr\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"Terms of Service\")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"faq-content conditions\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pad-top-btm-30 for-font\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-grey\"\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"1. Terms\"), /*#__PURE__*/React.createElement(\"p\", null, \"By accessing the website at \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.spotmycrib.ie/\"\n    }, \"https://www.spotmycrib.ie/\"), \", you are agreeing to be bound by these terms of service, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws. If you do not agree with any of these terms, you are prohibited from using or accessing this site. The materials contained in this website are protected by applicable copyright and trademark law.\"), /*#__PURE__*/React.createElement(\"h3\", null, \"2. Use License\"), /*#__PURE__*/React.createElement(\"ol\", {\n      type: \"a\"\n    }, /*#__PURE__*/React.createElement(\"li\", null, \"Permission is granted to temporarily download one copy of the materials (information or software) on SpotMyCrib.ie's website for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:\", /*#__PURE__*/React.createElement(\"ol\", {\n      type: \"i\"\n    }, /*#__PURE__*/React.createElement(\"li\", null, \"modify or copy the materials;\"), /*#__PURE__*/React.createElement(\"li\", null, \"use the materials for any commercial purpose, or for any public display (commercial or non-commercial);\"), /*#__PURE__*/React.createElement(\"li\", null, \"attempt to decompile or reverse engineer any software contained on SpotMyCrib.ie's website;\"), /*#__PURE__*/React.createElement(\"li\", null, \"remove any copyright or other proprietary notations from the materials; or\"), /*#__PURE__*/React.createElement(\"li\", null, \"transfer the materials to another person or \\\"mirror\\\" the materials on any other server.\"))), /*#__PURE__*/React.createElement(\"li\", null, \"This license shall automatically terminate if you violate any of these restrictions and may be terminated by SpotMyCrib.ie at any time. Upon terminating your viewing of these materials or upon the termination of this license, you must destroy any downloaded materials in your possession whether in electronic or printed format.\")), /*#__PURE__*/React.createElement(\"h3\", null, \"3. Disclaimer\"), /*#__PURE__*/React.createElement(\"ol\", {\n      type: \"a\"\n    }, /*#__PURE__*/React.createElement(\"li\", null, \"The materials on SpotMyCrib.ie's website are provided on an 'as is' basis. SpotMyCrib.ie makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.\"), /*#__PURE__*/React.createElement(\"li\", null, \"Further, SpotMyCrib.ie does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its website or otherwise relating to such materials or on any sites linked to this site.\")), /*#__PURE__*/React.createElement(\"h3\", null, \"4. Limitations\"), /*#__PURE__*/React.createElement(\"p\", null, \"In no event shall SpotMyCrib.ie or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on SpotMyCrib.ie's website, even if SpotMyCrib.ie or a SpotMyCrib.ie authorized representative has been notified orally or in writing of the possibility of such damage. Because some jurisdictions do not allow limitations on implied warranties, or limitations of liability for consequential or incidental damages, these limitations may not apply to you.\"), /*#__PURE__*/React.createElement(\"h3\", null, \"5. Accuracy of materials\"), /*#__PURE__*/React.createElement(\"p\", null, \"The materials appearing on SpotMyCrib.ie website could include technical, typographical, or photographic errors. SpotMyCrib.ie does not warrant that any of the materials on its website are accurate, complete or current. SpotMyCrib.ie may make changes to the materials contained on its website at any time without notice. However SpotMyCrib.ie does not make any commitment to update the materials.\"), /*#__PURE__*/React.createElement(\"h3\", null, \"6. Links\"), /*#__PURE__*/React.createElement(\"p\", null, \"SpotMyCrib.ie has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by SpotMyCrib.ie of the site. Use of any such linked website is at the user's own risk.\"), /*#__PURE__*/React.createElement(\"h3\", null, \"7. Modifications\"), /*#__PURE__*/React.createElement(\"p\", null, \"SpotMyCrib.ie may revise these terms of service for its website at any time without notice. By using this website you are agreeing to be bound by the then current version of these terms of service.\"), /*#__PURE__*/React.createElement(\"h3\", null, \"8. Governing Law\"), /*#__PURE__*/React.createElement(\"p\", null, \"These terms and conditions are governed by and construed in accordance with the laws of Dublin and you irrevocably submit to the exclusive jurisdiction of the courts in that State or location.\")))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"footer-default\"\n    }, /*#__PURE__*/React.createElement(MainLayoutFooter, null)));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"ui\":{\"layout\":{\"footer.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/layout/footer.js                                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Template;\nmodule.link(\"meteor/templating\", {\n  Template(v) {\n    Template = v;\n  }\n\n}, 0);\nmodule.link(\"./footer.html\");\nTemplate.footerExtended.helpers({\n  RouteB: function (slug) {\n    return FlowRouter.url('b', {\n      slug: slug\n    });\n  } // customSocialSettings: function() {\n  //   return {\n  //     placement: 'footer',\n  //     faClass: 'square',\n  //     faSize: 'fa-3x',\n  //     appsOrder: ['facebook', 'twitter', 'pinterest', 'googleplus']\n  //   };\n  // }\n\n}); // Template.footerExtended.replaces(\"layoutFooter\");\n// Template.footerExtended.onRendered(function(){\n//  $(\"#video1\").click(function () {\n//     $.fancybox({\n//       'padding': 0,\n//       'href': '#video-div1',\n//     });\n//   });\n//  });\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"header.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/layout/header.js                                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Template;\nmodule.link(\"meteor/templating\", {\n  Template(v) {\n    Template = v;\n  }\n\n}, 0);\nmodule.link(\"./header.html\");\nTemplate.headerExtended.onRendered(function () {\n  $.getScript(cdnPath('/js/bootstrap.js'), function () {// console.log(\"Bootstrap loaded\")\n  }); // $.getScript(cdnPath('//static.filestackapi.com/filestack-js/1.x.x/filestack.min.js'), function(){\n  //     console.log(\"Filestack loaded\")\n  // });\n\n  $.getScript('plugins/fancybox/js/jquery.fancybox.js', function () {\n    // script should be loaded and do something with it.\n    $('.fancybox').fancybox({\n      scrolling: 'no',\n      helpers: {\n        overlay: {\n          locked: true\n        }\n      }\n    });\n  });\n  setTimeout(delayedFunctions, 1500);\n});\nisMobileMenuEventAttached = false;\n\nfunction delayedFunctions() {\n  // $('.xs-menu-icon').click(function(){\n  //     $('.xs-menu').addClass('slide-right');\n  // });\n  // $('.xs-menu-close-icon, .xs-menu a').click(function(){\n  //     $('.xs-menu').removeClass('slide-right');\n  // });\n  // if(!isMobileMenuEventAttached) {\n  $(document).unbind('click').bind('click', function (e) {\n    if (!$('.xs-menu').hasClass('slide-right')) {\n      //Its not open\n      if ($(e.target).closest(\".xs-menu-icon-master\").length > 0) {\n        if (FlowRouter.current().route.name == 'home') $('.carousel-indicators').addClass('carousel-indicatorsLowZindex');\n        $('.xs-menu').addClass('slide-right');\n        return true;\n      } else return true;\n    } else {\n      //Its open\n      if ($(e.target).closest(\".xs-menu-close-icon .xs-close, .xs-menu a\").length > 0 || $(e.target).closest(\".slide-right\").length < 1) {\n        $('.xs-menu').removeClass('slide-right');\n        if (FlowRouter.current().route.name == 'home') setTimeout(function () {\n          if (FlowRouter.current().route.name == 'home') $('.carousel-indicators').removeClass('carousel-indicatorsLowZindex');\n        }, 250);\n        return true;\n      }\n    }\n  }); // isMobileMenuEventAttached = true;\n  // }\n}\n\nTemplate.headerExtended.onCreated(function () {\n  Session.set('showLoginDialog', false);\n  Session.set('showForgotForm', false);\n  Session.set('showLoginDialog', false);\n  Session.set('showLoginSignupFancyBoxDialog', false);\n  Session.set('showAddPropertyHeaderTemplate', false);\n  Session.set('showAddPropertyHeaderFancyBoxDialog', false);\n  if (!Session.get(\"showErrorDlg\")) Session.set(\"showErrorDlg\", []);\n});\nTemplate.headerExtended.helpers({\n  loginFlowCompleteManager: function () {\n    if (Session.get('loginFlowComplete')) {\n      setTimeout(function () {\n        Session.set('loginFlowComplete', undefined);\n      }, 1000);\n    }\n  },\n  errorModel: function () {\n    var tmp = Session.get(\"showErrorDlg\");\n    if (!tmp) tmp = [];\n    if (tmp) if (tmp.length) {\n      var timeoutVal = 0;\n      if (!$.fancybox) timeoutVal = 3000;\n      setTimeout(function () {\n        $.fancybox({\n          'padding': 0,\n          'href': '#errorModel',\n          // afterShow:function(template){\n          //     setTimeout(function () {\n          //         $.fancybox.close();\n          //     },3000)\n          // },\n          afterClose: function () {\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            tmp.shift();\n            Session.set(\"showErrorDlg\", tmp);\n          }\n        });\n      }, timeoutVal);\n    }\n    return Session.get(\"showErrorDlg\");\n  },\n  showAddPropertyHeaderTemplate: function () {\n    if (Session.get('showAddPropertyHeaderFancyBoxDialog')) {\n      showAddPropertyHeaderPopup();\n    } else {\n      if ($) if ($.fancybox) $.fancybox.close();\n    }\n\n    return Session.get('showAddPropertyHeaderTemplate');\n  },\n  showLoginDialog: function () {\n    //Reason to create this method is for the lazyloading of signIn and signUp templates\n    if (Session.get('showLoginSignupFancyBoxDialog')) {\n      showLoginPopup();\n    } else {\n      if ($) if ($.fancybox) $.fancybox.close();\n    }\n\n    return Session.get('showLoginDialog');\n  },\n  isAgentRole: function () {\n    var user = Meteor.user();\n    if (!user) return false;\n\n    if (user.profile.role == 'agent') {\n      return true;\n    }\n\n    return false;\n  },\n  showCookieConsent: function () {\n    return !parseInt(readCookie('cookieConsent')); // var userConfig = Session.get('userConfig');\n    // if(!userConfig) return false;\n    // return userConfig.cookieConsent;\n  }\n});\nTemplate.headerExtended.events({\n  \"click .showLoginDialog\": function (event, template) {\n    showLoginDialog();\n  },\n  \"click .showSignupDialog\": function (event, template) {\n    showSignupDialog();\n  },\n  \"click .logoutBtn\": function () {\n    Meteor.logout(function (err) {\n      if (err) {\n        throw new Meteor.Error(\"Logout failed\");\n      }\n    });\n  },\n  \"click .addPropertyHeaderBtn\": function () {\n    FlowRouter.go('advertisewithus');\n    console.log(\"added add property form\"); // Session.set('showAddPropertyHeaderTemplate',true)\n    //        Session.set('showAddPropertyHeaderFancyBoxDialog',true)\n  },\n  \"click .profileBtn\": function () {\n    FlowRouter.go('account/profile');\n  },\n  \"click .cookieConsentBtn\": function () {\n    createCookie('cookieConsent', 1, 365);\n    $('.cookieConsentArea').remove(); // var userConfig = Session.get('userConfig');\n    //\n    // if(!userConfig){\n    //     Session.set('userConfig',{cookieConsent:1})\n    // }else if(!userConfig.cookieConsent){\n    //     Session.set('userConfig',{cookieConsent:1})\n    // }\n  }\n});\n\nfunction showLoginDialog() {\n  Session.set('showForgotForm', false);\n  Session.set('showSignupForm', false);\n  Session.set('showLoginSignupFancyBoxDialog', true);\n  Session.set('showLoginDialog', true);\n}\n\nfunction showSignupDialog() {\n  Session.set('showForgotForm', false);\n  Session.set('showSignupForm', true);\n  Session.set('showLoginSignupFancyBoxDialog', true);\n  Session.set('showLoginDialog', true);\n}\n\nfunction showLoginPopup() {\n  $.fancybox({\n    'padding': 0,\n    'href': '#signin-div',\n    afterClose: function (template) {\n      console.log(template); //template.showLoginDialog.set(false);\n\n      Session.set('isLandLordMode', false);\n      Session.set('showLoginDialog', false);\n      Session.set('showLoginSignupFancyBoxDialog', false);\n    }\n  });\n}\n\nfunction showAddPropertyHeaderPopup() {\n  $.fancybox({\n    'padding': 0,\n    'href': '#addPropertyHeader-div',\n    afterClose: function (template) {\n      //console.log(template);\n      Session.set('showAddPropertyHeaderTemplate', false);\n      Session.set('showAddPropertyHeaderFancyBoxDialog', false);\n    }\n  });\n}\n\nfunction createCookie(name, value, days) {\n  var expires = \"\";\n\n  if (days) {\n    var date = new Date();\n    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n    expires = \"; expires=\" + date.toUTCString();\n  }\n\n  document.cookie = name + \"=\" + value + expires + \"; path=/\";\n}\n\nfunction readCookie(name) {\n  var nameEQ = name + \"=\";\n  var ca = document.cookie.split(';');\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n\n    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n  }\n\n  return null;\n}\n\nfunction eraseCookie(name) {\n  createCookie(name, \"\", -1);\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"layout.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/layout/layout.js                                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./layout.html\");\nmodule.link(\"./header.js\");\nmodule.link(\"./footer.js\");\n\nif (Meteor.isClient) {\n  Meteor.startup(function () {\n    Blaze._allowJavascriptUrls();\n  });\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"templates\":{\"editProperty.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/templates/editProperty.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./imageView.html\");\nmodule.link(\"./editProperty.html\");\nmodule.link(\"./shared.js\");\nlet filestack;\nmodule.link(\"filestack-js\", {\n  default(v) {\n    filestack = v;\n  }\n\n}, 0);\nconst apikey = 'AIPACLEs7ShGwwPh6fMTxz';\nconst fsClient = filestack.init(apikey, {\n  policy: 'eyJleHBpcnkiOjE4NjE5MjAwMDAsImNhbGwiOlsicGljayIsInJlYWQiLCJzdGF0Iiwid3JpdGUiLCJ3cml0ZVVybCIsInN0b3JlIiwiY29udmVydCIsInJlbW92ZSIsImV4aWYiXX0=',\n  signature: '465e8652c5cef95f44e5858e09d430abea855d98deaeb7425558f2c80d0f4f57'\n}); // import SimpleSchema from \"simpl-schema\";\n// SimpleSchema.extendOptions(['autoform']);\n\nTemplate.editProperty.onCreated(function () {\n  // this.showEditProperty = new ReactiveVar( false );\n  // console.log(this.data.propertyData)\n  // debugger;\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.autorun(function () {\n    instance.subscribe('Config');\n    var id = FlowRouter.getParam('id');\n    instance.subscribe('editProperty', id);\n    instance.subscribe('Areas'); //Let it wait in edit prop page\n\n    instance.subscribe('userData');\n\n    if (instance.subscriptionsReady()) {\n      instance.isSubsLoaded.set(true);\n    }\n  });\n  this.deactivateInProgress = new ReactiveVar(false);\n  this.archiveInProgress = new ReactiveVar(false); // Session.set('editPropertyImagesNewOnes',[]);\n  // var gallery = this.data.propertyData.gallery;\n  // if(!gallery)gallery=[]\n  // Session.set('editPropertyImages',gallery);\n});\nTemplate.editProperty.helpers({\n  // showEditProperty: function () {\n  //     return Template.instance().showEditProperty.get();\n  // },\n  // propertyData : function () {\n  //     var ret = getpropertyData();\n  //     // console.log(\"propertyData\");\n  //     // console.log(ret);\n  //     Session.set('propertyData',ret);\n  //     return ret;\n  // },\n  isSubsLoaded: function () {\n    return Template.instance().subscriptionsReady();\n  },\n  userLoggedIn: function () {\n    if (Meteor.user()) return true;\n    return false;\n  },\n  propertyData: function () {\n    // debugger;\n    var id = FlowRouter.current().params.id;\n    var ret = Collections.Properties.find(id, {\n      transform: function (data) {\n        var globalConfig = Collections.Config.findOne();\n        if (data.auctionId) data.auction = Collections.Auctions.findOne(data.auctionId);\n        return data;\n      },\n      limit: 1\n    }).fetch();\n    ret = ret[0];\n    clearMeta();\n\n    try {\n      var title = 'Editing ' + ret.address.address + ', ' + ret.address.area;\n      if (ret.address.county) title += ', ' + ret.address.county;\n      DocHead.setTitle('' + titleCase(title) + ' | SpotMyCrib Admin');\n      DocHead.addMeta({\n        name: \"description\",\n        content: \"Edit property \" + ret.type + \", upload its images, details and much more.\"\n      });\n    } catch (err) {\n      DocHead.setTitle(' Property not found | SpotMyCrib Admin');\n      DocHead.addMeta({\n        name: \"description\",\n        content: \"\"\n      });\n    }\n\n    Session.set(\"propertyData\", ret);\n    return ret; // return {propertyData: ret};\n  },\n  propertyFound: function () {\n    var c = Collections.Properties.find().count();\n    if (c) return true;\n    return false;\n  },\n  inIgnoreList: function (str) {\n    ignoreList = ['gallery', 'isArchived'];\n    if (ignoreList.indexOf(str) !== -1) return true;\n    return false;\n  },\n  deactivateInProgress: function () {\n    deactivateInProgress = Template.instance().deactivateInProgress;\n    return Template.instance().deactivateInProgress.get();\n  },\n  archiveInProgress: function () {\n    archiveInProgress = Template.instance().archiveInProgress;\n    return Template.instance().archiveInProgress.get();\n  } // getGallery:function () {\n  //     // debugger;\n  //     var propertyData = Session.get('propertyData');\n  //     return propertyData.gallery;\n  // }\n\n});\nTemplate.editProperty.onRendered(function () {\n  try {\n    jQuery(\"html,body\").animate({\n      scrollTop: 0\n    }, 250);\n  } catch (e) {\n    document.body.scrollTop = document.documentElement.scrollTop = 0;\n  }\n});\nTemplate.editProperty.events({\n  \"click .deactivatePropertyBtn\": function (event, template) {\n    event.preventDefault();\n    var propertyData = Session.get('propertyData');\n\n    if (!propertyData) {\n      console.log(\"Empty project data\");\n      return false;\n    }\n\n    var user = Meteor.user();\n\n    if (!user) {\n      console.log(\"Invalid user\");\n      return;\n    }\n\n    if (propertyData.createdByAgent != user._id) {\n      console.log(\"Invalid user\");\n      return;\n    }\n\n    $.fancybox({\n      'padding': 0,\n      'href': '#conf-dactivate-pop',\n      afterShow: function (template) {\n        attachEvents();\n      },\n      afterClose: function (template) {\n        console.log(template);\n      }\n    });\n  },\n  \"click .archivePropertyBtn\": function (event, template) {\n    event.preventDefault();\n    var propertyData = Session.get('propertyData');\n\n    if (!propertyData) {\n      console.log(\"Empty project data\");\n      return false;\n    }\n\n    var user = Meteor.user();\n\n    if (!user) {\n      console.log(\"Invalid user\");\n      return;\n    }\n\n    if (propertyData.createdByAgent != user._id) {\n      console.log(\"Invalid user\");\n      return;\n    }\n\n    $.fancybox({\n      'padding': 0,\n      'href': '#conf-archive-pop',\n      afterShow: function (template) {\n        attachEvents();\n      },\n      afterClose: function (template) {\n        console.log(template);\n      }\n    });\n  },\n  // 'change .selectPropertyImages': function(event, template) {\n  //     var files = event.target.files;\n  //     S3.upload({\n  //         files:files,\n  //         path:\"propertyImagesLarge\"\n  //     },function(e,r){\n  //         if(e){\n  //             throw new Meteor.Error('Upload failed ', e);\n  //             var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n  //             tmp.push(\"Upload failed: please check your internet connection, contact us if needed.\");\n  //             Session.set(\"showErrorDlg\",tmp)\n  //             return;\n  //         }\n  //         var editPropertyImages = Session.get('editPropertyImages');\n  //         var editPropertyImagesNewOnes = Session.get('editPropertyImagesNewOnes');\n  //         var tmp = {\n  //             name: r.file.original_name,\n  //             relative_url: r.relative_url,\n  //             url: r.secure_url\n  //         };\n  //         editPropertyImages.push(tmp);\n  //         editPropertyImagesNewOnes.push(tmp);\n  //         Session.set('editPropertyImages',editPropertyImages);\n  //         Session.set('editPropertyImagesNewOnes',editPropertyImagesNewOnes);\n  //         var propertyData = Session.get(\"propertyData\");\n  //         updateGalleriesInServer(editPropertyImages,propertyData._id, function (err, res) {\n  //             if (err) {\n  //                 console.log(err);\n  //                 var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n  //                 tmp.push(\"Upload failed: please check your internet connection, contact us if needed.\");\n  //                 Session.set(\"showErrorDlg\",tmp)\n  //                 return;\n  //             } else {\n  //                 var editPropertyImages = Session.get('editPropertyImages');\n  //                 console.log(\"Current Count: \"+editPropertyImages.length )\n  //             }\n  //         });\n  //         console.log(r);\n  //     });\n  // },\n  \"click .backBtn\": function (event, template) {\n    goBack();\n  },\n  'change input[name=price]': function (event, template) {\n    if (event.target.value) {\n      var tmp = event.target.value.split('.');\n      tmp = tmp[0]; //No decimals\n\n      tmp = tmp.trim().match(/\\d+/g);\n      if (!Array.isArray(tmp)) event.target.value = '';\n      event.target.value = tmp.join('');\n    }\n  },\n  \"click .showCopyDlg\": function (event, template) {\n    var propertyData = Session.get('propertyData');\n    let user = Meteor.user();\n    let sluggedName = slugifyEmailAddress(user.profile.name);\n    if (!sluggedName) sluggedName = 'rent';\n    let email = sluggedName + '-let-' + propertyData.auction.lettingAuctionCode.toLowerCase() + \"@spotmycrib.ie\";\n    $('#agentPropertyEmailField').val(email);\n    var url = FlowRouter.url('letting', {\n      key: propertyData.auction.lettingAuctionCode\n    });\n    $('#propertyLinkField').val(url);\n    $.fancybox({\n      'padding': 0,\n      'href': '#propertyLinkDlg',\n      afterShow: function (template) {\n        $('#agentPropertyEmailField').select();\n        $('#propertyLinkDlg .copyEmailBtn').unbind().bind('click', function () {\n          $('#agentPropertyEmailField').select();\n\n          try {\n            var successful = document.execCommand('copy');\n            var msg = successful ? 'successful' : 'unsuccessful'; // console.log('Copying text command was ' + msg);\n\n            $.fancybox.close();\n          } catch (err) {\n            console.log('Oops, unable to copy');\n          }\n\n          ga('send', 'event', 'editPropertyPage', 'copyShareEmail', 'copyShareEmail Btn Clicked');\n        });\n        $('#propertyLinkDlg .copyLinkBtn').unbind().bind('click', function () {\n          $('#propertyLinkField').select();\n\n          try {\n            var successful = document.execCommand('copy');\n            var msg = successful ? 'successful' : 'unsuccessful'; // console.log('Copying text command was ' + msg);\n\n            $.fancybox.close();\n          } catch (err) {\n            console.log('Oops, unable to copy');\n          }\n\n          ga('send', 'event', 'editPropertyPage', 'copyShareLink', 'copyShareLink Btn Clicked');\n        });\n        $('#propertyLinkDlg .cancelBtn').unbind().bind('click', function () {\n          $.fancybox.close();\n        });\n      }\n    });\n  }\n});\nTemplate.editPropertyForm.onCreated(function () {\n  if (!Session.get('editPropertyImages')) {\n    // Lets do this. Anyways we have delete button.\n    Session.set('editPropertyImages', []);\n    S3.collection.remove({});\n  }\n\n  this.numBedRoomCount = new ReactiveVar(0);\n  this.editPropertyFormSaving = new ReactiveVar(false);\n  this.countySelected = new ReactiveVar(false);\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.autorun(function () {\n    if (instance.countySelected.get()) {\n      instance.isSubsLoaded.set(false);\n      instance.subscribe('Areas', '', '', instance.countySelected.get(), '', '');\n    }\n\n    if (instance.subscriptionsReady()) {\n      instance.isSubsLoaded.set(true);\n    }\n  });\n  Session.set('editPropertyImagesNewOnes', []);\n  var gallery = [];\n\n  try {\n    gallery = this.data.propertyData.gallery;\n  } catch (e) {\n    gallery = [];\n  }\n\n  Session.set('editPropertyImages', gallery);\n});\nTemplate.editPropertyForm.helpers({\n  'data': function () {\n    var user = Meteor.user();\n    if (!user) return {\n      results: []\n    };\n    var id = FlowRouter.current().params.id;\n    var doc = Collections.Properties.findOne(id, {\n      transform: function (data) {\n        if (data.auctionId) data.auction = Collections.Auctions.findOne(data.auctionId);\n        return data;\n      },\n      limit: 1\n    });\n    if (doc) if (doc.bedrooms) Template.instance().numBedRoomCount.set(doc.bedrooms.length);\n    if (doc) if (doc.gallery) Session.set('editPropertyImages', doc.gallery); //This will re-run everytime u update an images and data gets fetched again.\n\n    return doc;\n  },\n  trimVal: function (str) {\n    return str.trim();\n  },\n  isEqualSelect: function (a, b) {\n    if (a == b) return 'selected';\n    return '';\n  },\n  isEqualCheck: function (a, b) {\n    if (a == b) return 'checked';\n    return '';\n  },\n  furnishedOptions: function (isFurnished) {\n    return [{\n      label: \"yes\",\n      value: \"true\",\n      selected: isFurnished ? 'selected' : ''\n    }, {\n      label: \"No\",\n      value: \"false\",\n      selected: !isFurnished ? 'selected' : ''\n    }];\n  },\n  countries: function () {\n    return [{\n      label: \"Ireland\",\n      value: \"Ireland\",\n      selected: \"selected\"\n    }]; //Both capital\n  },\n  counties: function () {\n    let staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n    let ret = [];\n\n    for (let i = 0; i < staticCounties.length; i++) {\n      if (!staticCounties[i]) continue;\n      ret.push({\n        label: titleCase(staticCounties[i]),\n        value: staticCounties[i]\n      });\n    }\n\n    return ret; // return [{label: \"Dublin\", value: \"dublin\"}];//Both capital\n    // var distinctEntries = _.uniq(Collections.Areas.find({}, {\n    //     sort: {County: 1}, fields: {County: true}\n    // }).fetch().map(function(x) {\n    //     return x.County;\n    // }), true);\n    // var ret = []\n    // for(var i=0;i< distinctEntries.length;i++){\n    //     if(!distinctEntries[i])continue;\n    //     ret.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n    // }\n    // return ret;\n  },\n  areas: function () {\n    var countySelected = Template.instance().countySelected.get();\n\n    if (!countySelected) {\n      var c = Collections.Properties.find().count();\n      if (c > 1) return []; // This is the fix for - bug of not loading existing areas - page is designed to work with 1 prop, but when user comes to this page from myprop page, it has many results, leading to invalid countySelected\n\n      var doc = Collections.Properties.findOne();\n      if (!doc) return [];\n      Template.instance().countySelected.set(doc.address.county);\n      countySelected = doc.address.county;\n    }\n\n    var distinctEntries = _.uniq(Collections.Areas.find({\n      County: countySelected\n    }, {\n      sort: {\n        Area: 1\n      },\n      fields: {\n        Area: true\n      }\n    }).fetch().map(function (x) {\n      return x.Area;\n    }), true);\n\n    var ret = [];\n\n    for (var i = 0; i < distinctEntries.length; i++) {\n      if (!distinctEntries[i]) continue;\n      ret.push({\n        label: titleCase(distinctEntries[i]),\n        value: distinctEntries[i]\n      });\n    }\n\n    return ret; //Previous logic\n    // var Config = Collections.Config.find().fetch();Config = Config[0];\n    // var ret = []\n    // for(var i=0;i< Config.countyInfo.length;i++){\n    //     ret.push({label: titleCase(Config.countyInfo[i].area), value: Config.countyInfo[i].area})\n    // }\n  },\n  propertyTypes: function () {\n    var Config = Collections.Config.find().fetch();\n    Config = Config[0];\n    var ret = [];\n\n    for (var i = 0; i < Config.propertyType.length; i++) {\n      ret.push({\n        label: titleCase(Config.propertyType[i].name),\n        value: Config.propertyType[i].value\n      });\n    }\n\n    return ret;\n  },\n  numBedRoomCount: function () {\n    var c = Template.instance().numBedRoomCount.get();\n    if (c < 100) return Template.instance().numBedRoomCount.get();else return 0;\n  },\n  editPropertyFormSaving: function () {\n    return Template.instance().editPropertyFormSaving.get();\n  },\n  ensuiteLoop: function (count) {\n    var countArr = [];\n\n    for (var i = 0; i < count; i++) {\n      countArr.push({\n        i: i + 1\n      });\n    }\n\n    return countArr;\n  },\n  ensuiteLoopCheckbox: function (index) {\n    var doc = Collections.Properties.findOne();\n    if (doc) if (doc.bedrooms[index]) {\n      if (doc.bedrooms[index].ensuite) return 'checked';\n    }\n    return '';\n  },\n  ensuiteLoopBedType: function (index, b) {\n    var doc = Collections.Properties.findOne();\n    if (doc) if (doc.bedrooms[index]) {\n      if (doc.bedrooms[index].bedType == b) return 'selected';\n    }\n    return '';\n  },\n  leaseUntil: function () {\n    var allowedVals = ['1 month', '2 months', '3 months', '4 months', '5  months', '6 months', '7 months', '8 months', '9 months', '10 months', '11 months', '1 year', 'More than a year'];\n    return allowedVals;\n  },\n  ensuiteLoopBedTypeOptions: function (index) {\n    var doc = Collections.Properties.findOne();\n    var isSingle = false,\n        isDouble = false,\n        isTwin = false;\n    if (doc) if (doc.bedrooms) if (doc.bedrooms[index]) {\n      switch (doc.bedrooms[index].bedType) {\n        case 'single':\n          isSingle = true;\n          break;\n\n        case 'double':\n          isDouble = true;\n          break;\n\n        case 'twin':\n          isTwin = true;\n          break;\n      }\n    }\n    var arr = [{\n      label: \"Single\",\n      value: \"single\",\n      sel: isSingle ? 'selected' : ''\n    }, {\n      label: \"Double\",\n      value: \"double\",\n      sel: isDouble ? 'selected' : ''\n    }, {\n      label: \"Twin\",\n      value: \"twin\",\n      sel: isTwin ? 'selected' : ''\n    }];\n    return arr;\n  },\n  hasAmenityCheckbox: function (v) {\n    var doc = Collections.Properties.findOne();\n    if (doc) if (doc.amenities) if (doc.amenities.length) if (doc.amenities.indexOf(v) != -1) return 'checked';\n    return '';\n  },\n  propertyContact: function (i) {\n    var doc = Collections.Properties.findOne();\n    if (doc) if (doc.contacts) if (doc.contacts.length) return doc.contacts[0];\n    return {\n      name: '',\n      phone: '',\n      email: ''\n    };\n  },\n  advertisementContact: function (i) {\n    var id = FlowRouter.current().params.id;\n    var doc = Collections.Properties.findOne(id, {\n      transform: function (data) {\n        if (data.auctionId) data.auction = Collections.Auctions.findOne(data.auctionId);\n        return data;\n      },\n      limit: 1\n    });\n    if (doc) if (doc.auction) if (doc.auction.contacts) if (doc.auction.contacts.length) return doc.auction.contacts[0];\n    return {\n      name: '',\n      phone: '',\n      email: ''\n    };\n  }\n});\nTemplate.editPropertyForm.events({\n  \"click .backBtn\": function (event, template) {\n    goBack();\n  },\n  'submit form': function (event) {\n    event.preventDefault();\n  },\n  \"click .editPropertyFormSaveActivateBtn\": function (event, template) {\n    $('#editPropertyFormCF').submit();\n  },\n  \"click .editPropertyFormCancelBtn\": function (event, template) {\n    goBack();\n  },\n  'change .selectPropertyImages': function (event, template) {\n    return;\n    var files = event.target.files;\n    console.log('Upload called'); // console.log(files);\n\n    S3.upload({\n      files: files,\n      path: \"DEVpropertyImagesLarge\"\n    }, function (e, r) {\n      if (e) {\n        throw new Meteor.Error('Upload failed ', e);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Upload failed: please check your internet connection, contact us if needed.\");\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      var editPropertyImages = Session.get('editPropertyImages');\n      var editPropertyImagesNewOnes = Session.get('editPropertyImagesNewOnes');\n      var tmp = {\n        name: r.file.original_name,\n        relative_url: r.relative_url,\n        url: r.secure_url\n      };\n      editPropertyImages.push(tmp);\n      editPropertyImagesNewOnes.push(tmp);\n      Session.set('editPropertyImages', editPropertyImages);\n      Session.set('editPropertyImagesNewOnes', editPropertyImagesNewOnes);\n      var propertyData = Session.get(\"propertyData\");\n      updateGalleriesInServer(editPropertyImages, propertyData._id, function (err, res) {\n        if (err) {\n          console.log(err);\n          var tmp = Session.get(\"showErrorDlg\");\n          if (!tmp) tmp = [];\n          tmp.push(\"Upload failed: please check your internet connection, contact us if needed.\");\n          Session.set(\"showErrorDlg\", tmp);\n          return;\n        } else {\n          var editPropertyImages = Session.get('editPropertyImages');\n          console.log(\"Current Count: \" + editPropertyImages.length);\n        }\n      });\n      console.log(r);\n    });\n  },\n  'change .countySelected': function (event, template) {\n    template.countySelected.set(event.target.value);\n  },\n  \"click .openFileUploader\": function (event, template) {\n    event.preventDefault();\n    openPicker(); // filename\n    //     :\n    //     \"webcam-1/12/2018, 6:53:25 PM.png\"\n    // handle\n    //     :\n    //     \"G8lStVqHTiGnwxof6d5y\"\n    // mimetype\n    //     :\n    //     \"image/png\"\n    // originalFile\n    //     :\n    // {name: \"webcam-1/12/2018, 6:53:25 PM.png\", type: \"image/png\", size: 630585}\n    // originalPath\n    //     :\n    //     \"webcam-1/12/2018, 6:53:25 PM.png\"\n    // size\n    //     :\n    //     629612\n    // source\n    //     :\n    //     \"local_file_system\"\n    // status\n    //     :\n    //     \"Stored\"\n    // uploadId\n    //     :\n    //     \"ba2fe36e9fd182ec0cb88236d676cefad\"\n    // url\n    //     :\n    //     \"https://cdn.filestackcontent.com\n\n    return;\n  },\n  'keyup .autoGrowTA': function (event, template) {\n    var element = event.target;\n    element.style.height = \"5px\";\n    if (element.scrollHeight < 310) element.style.height = element.scrollHeight + \"px\";else element.style.height = \"310px\";\n  },\n  'change #numBedRoomCount': function (event, template) {\n    var numBedRoomCount = parseInt($(event.target).val());\n    if (isNaN(numBedRoomCount)) return;\n    Template.instance().numBedRoomCount.set(numBedRoomCount);\n    t1 = template;\n    setTimeout(function () {\n      t1.$('#editPropertyFormCF').validate();\n    }, 500);\n  }\n});\nTemplate.editPropertyForm.onRendered(function () {\n  this.$('#readyFrom').datetimepicker();\n  var element = this.$('.autoGrowTA')[0];\n  if (element.scrollHeight < 310) element.style.height = element.scrollHeight + \"px\";else element.style.height = \"310px\"; // this.$('#editPropertyFormCF').validate();\n\n  editPropertyFormSaving = this.editPropertyFormSaving;\n  var validator = this.$('#editPropertyFormCF').validate({\n    submitHandler: function (event) {\n      editPropertyFormSaving.set(true);\n      console.log(\"You just submitted the 'editPropertyForm' form.\");\n      var doc = Collections.Properties.findOne();\n\n      if (doc) {\n        Meteor.call('editProperty', doc._id, $('#editPropertyFormCF').serializeArray(), function (error, result) {\n          editPropertyFormSaving.set(false);\n\n          if (error) {\n            console.log(error); //    validator.showErrors({\n            //         email: error.reason\n            //     });\n\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            var msg = 'An error occurred.';\n            if (error.reason) msg += ' ' + error.reason + '.';else if (error.message) msg += ' ' + error.message + '.';\n            tmp.push(msg);\n            Session.set(\"showErrorDlg\", tmp);\n            return;\n          }\n\n          var propertyData = Session.get(\"propertyData\");\n          var editPropertyImages = Session.get('editPropertyImages');\n\n          if (!editPropertyImages) {\n            Session.set('editPropertyImages', []);\n            S3.collection.remove({});\n            goBack();\n          } else {\n            updateGalleriesInServer(editPropertyImages, propertyData._id, function (err, res) {\n              if (err) {\n                console.log(err);\n              } else {\n                Session.set('editPropertyImages', []);\n                S3.collection.remove({});\n              }\n\n              goBack();\n            });\n          }\n\n          Session.set('hideAddPropertyForm', true);\n        });\n      }\n    }\n  });\n\n  if (Session.get('OpenImageUploader')) {\n    scrollTo('.openFileUploader', 0, 500);\n    openPicker();\n    Session.set('OpenImageUploader', false);\n  }\n});\nTemplate.imageEditView.helpers({\n  images: function () {\n    // var propertyData = Session.get('propertyData');\n    // var existingGallery = propertyData.gallery;\n    // var editPropertyImages = Session.get('editPropertyImages');\n    // if(!editPropertyImages)editPropertyImages=[]\n    // if(!existingGallery )existingGallery =[]\n    // var newCombined = editPropertyImages.concat(existingGallery);\n    return Session.get('editPropertyImages');\n  }\n});\nTemplate.imgEditTag.events({\n  \"click .editImgBtn\": function (event, template) {\n    console.log(this);\n    debugger;\n    var editPropertyImages = Session.get('editPropertyImages');\n    var editPropertyImagesNewOnes = Session.get('editPropertyImagesNewOnes');\n    var isOriginalImageFromOwnS3 = false;\n    var newArr = [];\n    if (!editPropertyImages) return;\n    if (!editPropertyImages.length) return;\n\n    if (this.handle) {\n      index = getIndexByHandle(editPropertyImages, this.handle);\n    } else {\n      isOriginalImageFromOwnS3 = true;\n      index = getIndexByRelativeURL(editPropertyImages, this.relative_url);\n    }\n\n    newArr.push(editPropertyImages[index].url); //put it at first\n    // editPropertyImages.splice(index, 1);\n    //\n    // for(var i=0;i<editPropertyImages.length;i++){\n    //     newArr.push(editPropertyImages[i].url)\n    // }\n\n    const pickOptions = {\n      transformations: {\n        crop: {\n          force: true,\n          aspectRatio: 1.333\n        },\n        rotate: true\n      },\n      accept: 'image/*',\n      imageMax: [800, 600]\n    };\n    fsClient.cropFiles(newArr, pickOptions).then(response => {\n      debugger;\n      var editPropertyImages = Session.get('editPropertyImages');\n      var editPropertyImagesNewOnes = Session.get('editPropertyImagesNewOnes'); //if its conversion from old amazon to new filestack, then it will create a new file, so delete the old file seperatly and insert a new file seperatly.\n\n      if (!response.filesUploaded.length) {\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Edit failed: please try again, contact us if needed.\");\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      if (isOriginalImageFromOwnS3) {\n        S3.delete(editPropertyImages[index].relative_url, function (error, result) {\n          if (error) {\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            tmp.push(\"Edit failed: please check your internet connection, contact us if needed.\");\n            Session.set(\"showErrorDlg\", tmp);\n            return;\n          }\n\n          var editPropertyImages = Session.get('editPropertyImages');\n          editPropertyImages.splice(index, 1);\n          Session.set('editPropertyImages', editPropertyImages);\n          var propertyData = Session.get(\"propertyData\");\n          updateGalleriesInServer(editPropertyImages, propertyData._id, function (err, res) {\n            if (err) {\n              console.log(err);\n              var tmp = Session.get(\"showErrorDlg\");\n              if (!tmp) tmp = [];\n              tmp.push(\"Edit failed: please check your internet connection, contact us if needed.\");\n              Session.set(\"showErrorDlg\", tmp);\n              return;\n            } else {\n              var editPropertyImages = Session.get('editPropertyImages');\n              console.log(\"Current Count: \" + editPropertyImages.length);\n            }\n          });\n        });\n      } else {\n        fsClient.remove(editPropertyImages[index].handle).then(function (result) {\n          debugger;\n          console.log('In fs remove result');\n          var editPropertyImages = Session.get('editPropertyImages');\n          editPropertyImages.splice(index, 1);\n          Session.set('editPropertyImages', editPropertyImages);\n          var propertyData = Session.get(\"propertyData\");\n          updateGalleriesInServer(editPropertyImages, propertyData._id, function (err, res) {\n            if (err) {\n              console.log(err);\n              var tmp = Session.get(\"showErrorDlg\");\n              if (!tmp) tmp = [];\n              tmp.push(\"Edit failed: please check your internet connection, contact us if needed.\");\n              Session.set(\"showErrorDlg\", tmp);\n              return;\n            } else {\n              var editPropertyImages = Session.get('editPropertyImages');\n              console.log(\"Current Count: \" + editPropertyImages.length);\n            }\n          });\n        });\n      }\n\n      var tmp = {};\n\n      for (var i = 0; i < response.filesUploaded.length; i++) {\n        tmp = {\n          name: response.filesUploaded[i].filename,\n          url: response.filesUploaded[i].url,\n          handle: response.filesUploaded[i].handle,\n          mimetype: response.filesUploaded[i].mimetype,\n          originalFile: response.filesUploaded[i].originalFile,\n          originalPath: response.filesUploaded[i].originalPath,\n          size: response.filesUploaded[i].size,\n          source: response.filesUploaded[i].source,\n          status: response.filesUploaded[i].status,\n          uploadId: response.filesUploaded[i].uploadId\n        }; // editPropertyImages.push(tmp);\n\n        editPropertyImages.splice(index + 1, 0, tmp); //insert at the index place where its deleted.\n\n        editPropertyImagesNewOnes.push(tmp);\n      } //Logic to insert new file.\n\n\n      Session.set('editPropertyImages', editPropertyImages);\n      var propertyData = Session.get(\"propertyData\");\n      updateGalleriesInServer(editPropertyImages, propertyData._id, function (err, res) {\n        if (err) {\n          console.log(err);\n          var tmp = Session.get(\"showErrorDlg\");\n          if (!tmp) tmp = [];\n          tmp.push(\"Edit failed: please check your internet connection, contact us if needed.\");\n          Session.set(\"showErrorDlg\", tmp);\n          return;\n        } else {\n          var editPropertyImages = Session.get('editPropertyImages');\n          console.log(\"Current Count: \" + editPropertyImages.length);\n        }\n      });\n    });\n  },\n  \"click .deleteImgBtn\": function (event, template) {\n    console.log(this);\n    debugger;\n    var editPropertyImages = Session.get('editPropertyImages'); // editPropertyImages.splice(index, 1);\n    // Session.set('editPropertyImages',editPropertyImages);\n\n    if (this.handle) {\n      index = getIndexByHandle(editPropertyImages, this.handle);\n      fsClient.remove(this.handle).then(function (result) {\n        debugger;\n        console.log('In fs remove result');\n        var editPropertyImages = Session.get('editPropertyImages');\n        editPropertyImages.splice(index, 1);\n        Session.set('editPropertyImages', editPropertyImages);\n        var propertyData = Session.get(\"propertyData\");\n        updateGalleriesInServer(editPropertyImages, propertyData._id, function (err, res) {\n          if (err) {\n            console.log(err);\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            tmp.push(\"Deletion failed: please check your internet connection, contact us if needed.\");\n            Session.set(\"showErrorDlg\", tmp);\n            return;\n          } else {\n            var editPropertyImages = Session.get('editPropertyImages');\n            console.log(\"Current Count: \" + editPropertyImages.length);\n          }\n        });\n      });\n    } else {\n      index = getIndexByRelativeURL(editPropertyImages, this.relative_url);\n      S3.delete(this.relative_url, function (error, result) {\n        if (error) {\n          var tmp = Session.get(\"showErrorDlg\");\n          if (!tmp) tmp = [];\n          tmp.push(\"Deletion failed: please check your internet connection, contact us if needed.\");\n          Session.set(\"showErrorDlg\", tmp);\n          return;\n        }\n\n        var editPropertyImages = Session.get('editPropertyImages');\n        editPropertyImages.splice(index, 1);\n        Session.set('editPropertyImages', editPropertyImages);\n        var propertyData = Session.get(\"propertyData\");\n        updateGalleriesInServer(editPropertyImages, propertyData._id, function (err, res) {\n          if (err) {\n            console.log(err);\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            tmp.push(\"Deletion failed: please check your internet connection, contact us if needed.\");\n            Session.set(\"showErrorDlg\", tmp);\n            return;\n          } else {\n            var editPropertyImages = Session.get('editPropertyImages');\n            console.log(\"Current Count: \" + editPropertyImages.length);\n          }\n        });\n      });\n    }\n  }\n});\n\nfunction openPicker() {\n  fsClient.pick({\n    fromSources: [\"local_file_system\", \"webcam\", \"facebook\", \"url\", \"googledrive\", \"dropbox\", \"flickr\", \"instagram\", \"gmail\", \"picasa\", \"onedrive\", \"clouddrive\"],\n    maxFiles: 10,\n    transformations: {\n      crop: {\n        force: true,\n        aspectRatio: 1.333\n      },\n      rotate: true\n    },\n    imageMax: [800, 600],\n    accept: [\"image/*\"] //,\".pdf\",\".doc\",\".docx\",\".docm\"\n\n  }).then(function (response) {\n    // declare this function to handle response\n    debugger;\n    var editPropertyImages = Session.get('editPropertyImages');\n    var editPropertyImagesNewOnes = Session.get('editPropertyImagesNewOnes');\n    var tmp = {};\n    if (response.filesUploaded) for (var i = 0; i < response.filesUploaded.length; i++) {\n      tmp = {\n        name: response.filesUploaded[i].filename,\n        url: response.filesUploaded[i].url,\n        handle: response.filesUploaded[i].handle,\n        mimetype: response.filesUploaded[i].mimetype,\n        originalFile: response.filesUploaded[i].originalFile,\n        originalPath: response.filesUploaded[i].originalPath,\n        size: response.filesUploaded[i].size,\n        source: response.filesUploaded[i].source,\n        status: response.filesUploaded[i].status,\n        uploadId: response.filesUploaded[i].uploadId\n      };\n      editPropertyImages.push(tmp);\n      editPropertyImagesNewOnes.push(tmp);\n    }\n    Session.set('editPropertyImages', editPropertyImages);\n    Session.set('editPropertyImagesNewOnes', editPropertyImagesNewOnes);\n    var propertyData = Session.get(\"propertyData\");\n    updateGalleriesInServer(editPropertyImages, propertyData._id, function (err, res) {\n      if (err) {\n        console.log(err);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Upload failed: please check your internet connection, contact us if needed.\");\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      } else {\n        var editPropertyImages = Session.get('editPropertyImages');\n        console.log(\"Current Count: \" + editPropertyImages.length);\n\n        if (Session.get('fromAdvertiseWithUsPage')) {\n          fbq('track', 'CompleteRegistration');\n          ga('send', 'event', 'AdvertiseWithUsPage', 'ImageUploaded', 'Property Images Uploaded.');\n          Session.set('fromAdvertiseWithUsPage', false);\n        }\n      }\n    });\n    console.log(response);\n  });\n}\n\nfunction goBack() {\n  var prevRoute = Session.get('prevRoute');\n\n  if (prevRoute) {\n    FlowRouter.go(prevRoute.name, prevRoute.args);\n    Session.set('prevRoute', false);\n\n    if (prevRoute.scrollTo) {\n      scrollTo(prevRoute.scrollTo, 0, 500);\n    }\n  } else {\n    FlowRouter.go(\"/account/myproperies/\", {\n      pageno: 1\n    });\n  }\n}\n\nfunction getpropertyData() {\n  var id = FlowRouter.current().params.id;\n  var ret = Collections.Properties.find(id, {\n    transform: function (data) {\n      data.auction = Collections.Auctions.findOne(data.auctionId);\n      data.applicationsReceivedCount = Collections.Bids.find({\n        auctionId: data.auctionId\n      }).count();\n      data.applicationsActiveCount = Collections.Bids.find({\n        auctionId: data.auctionId,\n        isArchived: false\n      }).count();\n      return data;\n    },\n    limit: 1\n  }).fetch(); // console.log(\"getProjectData\");\n\n  return ret[0];\n}\n\nfunction getIndexByHandle(myArray, fileId) {\n  for (var i = 0; i < myArray.length; i++) {\n    if (myArray[i].handle === fileId) {\n      return i;\n    }\n  }\n}\n\nfunction getIndexByRelativeURL(myArray, fileId) {\n  for (var i = 0; i < myArray.length; i++) {\n    if (myArray[i].relative_url === fileId) {\n      return i;\n    }\n  }\n}\n\nfunction attachEvents() {\n  $(\".deactivateConfirmBtn\").unbind().bind(\"click\", function () {\n    deactivateConfEvent();\n  });\n  $(\".archiveConfirmBtn\").unbind().bind(\"click\", function () {\n    archiveConfEvent();\n  });\n  $(\".closePopupBtn\").unbind().bind(\"click\", function () {\n    closePopupEvent();\n  });\n}\n\nfunction deactivateConfEvent() {\n  var data = Session.get(\"propertyData\");\n  var auctionId = data.auctionId;\n  deactivateInProgress.set(true);\n  Meteor.call('deactivateAuction', auctionId, function (error, result) {\n    deactivateInProgress.set(false);\n\n    if (error) {\n      console.log(error);\n      var tmp = Session.get(\"showErrorDlg\");\n      if (!tmp) tmp = [];\n      tmp.push(\"Failed deactivating. Please try again, try checking your internet connectivity. Contact us if needed.\");\n      Session.set(\"showErrorDlg\", tmp);\n      return;\n    }\n\n    console.log(\"Success\");\n    var prevRoute = Session.get('prevRoute');\n    closePopupEvent();\n    goBack();\n  });\n}\n\nfunction archiveConfEvent() {\n  var data = Session.get(\"propertyData\");\n  var propertyId = data._id;\n  archiveInProgress.set(true);\n  Meteor.call('archiveProperty', propertyId, function (error, result) {\n    archiveInProgress.set(false);\n\n    if (error) {\n      console.log(error);\n      var tmp = Session.get(\"showErrorDlg\");\n      if (!tmp) tmp = [];\n      tmp.push(\"Failed archiving. Please try again, try checking your internet connectivity. Contact us if needed.\");\n      Session.set(\"showErrorDlg\", tmp);\n      return;\n    }\n\n    console.log(\"Success\");\n    var prevRoute = Session.get('prevRoute');\n    closePopupEvent();\n    goBack();\n  });\n}\n\nfunction closePopupEvent() {\n  console.log('closePopupEvent');\n  if ($) if ($.fancybox) $.fancybox.close();\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction slugifyEmailAddress(text) {\n  if (!text) return '';\n  const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ/_,:;';\n  const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return text.toString().toLowerCase().replace(/\\s+/g, '.') // Replace spaces with \".\"\n  .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n  .replace(/&/g, '-and-') // Replace & with ''\n  // .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single ''\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"lettingprintview.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/templates/lettingprintview.js                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./lettingprintview.html\");\nTemplate.lettingprintview.onCreated(function () {\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.autorun(function () {\n    var key = FlowRouter.getParam('key');\n    instance.subscribe(\"viewLetting\", key);\n    instance.subscribe('Config'); // instance.subscribe('Properties');\n    // instance.subscribe('Auctions');\n\n    if (instance.subscriptionsReady()) {\n      instance.isSubsLoaded.set(true);\n    }\n  });\n});\nTemplate.lettingprintview.helpers({\n  isSubsLoaded: function () {\n    return Template.instance().subscriptionsReady();\n  },\n  userLoggedIn: function () {\n    if (Meteor.user()) return true;\n    return false;\n  },\n  data: function () {\n    // debugger;\n    var id = FlowRouter.getParam('key');\n    let Projects = Collections.Auctions;\n    let selector = {\n      \"lettingAuctionCode\": id\n    };\n    var ret = Projects.find(selector, {\n      transform: function (data) {\n        var globalConfig = Collections.Config.findOne();\n        data.PD = Collections.Properties.findOne(data.propertyId);\n        data.PD.bedroomsCount = 0;\n        data.PD.ensuiteCount = 0;\n        data.PD.doubleBedCount = 0;\n\n        if (data.PD.bedrooms) {\n          data.PD.bedroomsCount = data.PD.bedrooms.length;\n\n          for (var i = 0; i < data.PD.bedrooms.length; i++) {\n            if (data.PD.bedrooms[i][\"ensuite\"]) {\n              data.PD.ensuiteCount++;\n            }\n\n            if (data.PD.bedrooms[i][\"bedType\"] == 'double') {\n              data.PD.doubleBedCount++;\n            }\n          }\n        }\n\n        if (data.PD.contacts) {\n          data.primaryContact = data.PD.contacts[0];\n        } else data.primaryContact = {};\n\n        tmp = [];\n\n        if (data.PD.amenities) {\n          for (var i = 0; i < data.PD.amenities.length; i++) {\n            var src = globalConfig.amenitiesLogos[data.PD.amenities[i]];\n            if (!src) src = globalConfig.amenitiesLogos[\"default\"];\n            tmp.push({\n              name: data.PD.amenities[i],\n              src: src\n            });\n          }\n        }\n\n        data.PD.amenitiesWithImgs = tmp;\n        return data;\n      },\n      limit: 1\n    }).fetch();\n    ret = ret[0];\n    clearMeta();\n\n    try {\n      var title = 'Print key for ' + ret.PD.address.address + ', ' + ret.PD.address.area;\n      if (ret.PD.address.county) title += ', ' + ret.PD.address.county;\n      DocHead.setTitle('' + titleCase(title) + ' | SpotMyCrib');\n      DocHead.addMeta({\n        name: \"description\",\n        content: \"Print key for \" + ret.PD.type + \".\"\n      });\n    } catch (err) {\n      DocHead.setTitle(' Property not found | SpotMyCrib Admin');\n      DocHead.addMeta({\n        name: \"description\",\n        content: \"\"\n      });\n    }\n\n    return ret;\n  }\n});\nTemplate.lettingprintview.onRendered(function () {\n  // console.log(this)\n  setTimeout(function () {\n    window.print();\n  }, 1000);\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"myProperties.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/templates/myProperties.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./pagination.html\");\nmodule.link(\"./imageView.html\");\nmodule.link(\"./myProperties.html\");\nmodule.link(\"./shared.js\");\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\n// SimpleSchema.extendOptions(['autoform']);\nadvertiseFormSaving = '';\nfsClient = '';\nsaveAndAdvertise = false;\nvar globalFILTERS = {};\n\nfunction getFiltersFromRoute() {\n  var FILTERS = {};\n\n  if (FlowRouter.current().queryParams.home_type) {\n    var val = FlowRouter.current().queryParams.home_type;\n    FILTERS['homeType'] = val;\n  }\n\n  if (FlowRouter.current().queryParams.facing) {\n    var val = FlowRouter.current().queryParams.facing;\n    FILTERS['facing'] = val;\n  }\n\n  if (FlowRouter.current().queryParams.floor_low || FlowRouter.current().queryParams.floor_high) {\n    var val_l = FlowRouter.current().queryParams.floor_low;\n    var val_h = FlowRouter.current().queryParams.floor_high;\n\n    if (isNaN(val_l) && isNaN(val_h)) {//Both are not valid numbers\n    } else if (!isNaN(val_l) && isNaN(val_h)) {\n      //Low is valid and no upper\n      FILTERS['floor'] = [val_l, 0];\n    } else if (isNaN(val_l) && !isNaN(val_h)) {\n      //Upper is valid and no lower\n      FILTERS['floor'] = [0, val_h];\n    } else {\n      //Both are valid\n      FILTERS['floor'] = [val_l, val_h];\n    }\n  }\n\n  if (FlowRouter.current().queryParams.price_low || FlowRouter.current().queryParams.price_high) {\n    var val_l = FlowRouter.current().queryParams.price_low;\n    var val_h = FlowRouter.current().queryParams.price_high;\n\n    if (isNaN(val_l) && isNaN(val_h)) {//Both are not valid numbers\n    } else if (!isNaN(val_l) && isNaN(val_h)) {\n      //Low is valid and no upper\n      FILTERS['priceRange'] = [val_l, 0];\n    } else if (isNaN(val_l) && !isNaN(val_h)) {\n      //Upper is valid and no lower\n      FILTERS['priceRange'] = [0, val_h];\n    } else {\n      //Both are valid\n      FILTERS['priceRange'] = [val_l, val_h];\n    }\n  } //if(FILTERS.length==0){return false;}\n\n\n  return FILTERS; //{\"Home Type\":[\"2 BHK\"],\"Floor\":[\"2 to 15\"],\"Price Range\":[\"67.45 to 97.45 \"]}\n}\n\nfunction setFilters(FILTERS) {\n  Session.set('globalFILTERS', FILTERS);\n  var defaultFilters = Session.get('projectData');\n  defaultFilters = defaultFilters.filter;\n  console.log(\"In setFilters\");\n  console.log(FILTERS);\n  console.log(defaultFilters);\n  FlowRouter.query.clear();\n  var baseURL = FlowRouter.current().originalUrl.split('?')[0];\n  var route = baseURL; // debugger;\n\n  if (FILTERS['homeType']) {\n    if (FILTERS['homeType'].length != defaultFilters.homeType.length) for (var i = 0; i < FILTERS['homeType'].length; i++) {\n      // if(defaultFilters.homeType.indexOf(  FILTERS['homeType'][i]  ) == -1)\n      route = updateQueryStringParameter(route, 'home_type[]', FILTERS['homeType'][i]);\n    }\n  }\n\n  if (FILTERS['facing']) {\n    if (FILTERS['facing'].length != defaultFilters.facing.length) for (var i = 0; i < FILTERS['facing'].length; i++) {\n      // if(defaultFilters.facing.indexOf(  FILTERS['facing'][i]  ) == -1)\n      route = updateQueryStringParameter(route, 'facing[]', FILTERS['facing'][i]);\n    }\n  }\n\n  if (FILTERS['floor']) {\n    var l1 = FILTERS['floor'][0]; //if(l1 !=0 && l1 != defaultFilters.floor[0])\n\n    route = updateQueryStringParameter(route, 'floor_low', l1);\n    var l2 = FILTERS['floor'][1]; //if(l2 != defaultFilters.floor[1])\n\n    route = updateQueryStringParameter(route, 'floor_high', l2); //route = updateQueryStringParameter(route, 'floor_low', FILTERS['floor'][0]);\n    //route = updateQueryStringParameter(route, 'floor_high', FILTERS['floor'][1]);\n  }\n\n  if (FILTERS['priceRange']) {\n    var l1 = FILTERS['priceRange'][0]; //Don't uncomment below lines as they would cause another bug. It would be a flow bug, on page refresh, it shud know upper limit to compute, and its called during template create.\n    //if(l1 !=0 && l1 != defaultFilters.priceRange[0])\n\n    route = updateQueryStringParameter(route, 'price_low', l1);\n    var l2 = FILTERS['priceRange'][1]; //if(l2 != defaultFilters.priceRange[1])\n\n    route = updateQueryStringParameter(route, 'price_high', l2); //route = updateQueryStringParameter(route, 'price_low', FILTERS['priceRange'][0]);\n    //route = updateQueryStringParameter(route, 'price_high', FILTERS['priceRange'][1]);\n  }\n\n  if (FILTERS['floor']) {\n    $('.filterS1l').html(FILTERS['floor'][0]);\n    $('.filterS1h').html(FILTERS['floor'][1]);\n  }\n\n  if (FILTERS['priceRange']) {\n    $('.filterS2l').html(numDifferentiation(FILTERS['priceRange'][0]));\n    $('.filterS2h').html(numDifferentiation(FILTERS['priceRange'][1]));\n  }\n\n  console.log(\"New Route\" + route);\n  FlowRouter.go(route);\n  updateUISlider(FILTERS);\n}\n\nfunction getDefaultFilters() {\n  return {};\n}\n\nfunction getCurUsersBid(auctionId) {\n  var bid = Collections.Bids.find({\n    auctionId: auctionId,\n    userId: Meteor.userId()\n  }, {\n    limit: 1\n  }).fetch();\n  return bid[0];\n}\n\nfunction updateUISlider(FILTERS) {\n  //console.log('Updating slider values')\n  var slider = document.getElementById('range-input');\n  var slider1 = document.getElementById('range-input1');\n  if (!slider) return;\n  if (!slider.noUiSlider) return;\n  slider.noUiSlider.set(FILTERS.floor);\n  slider1.noUiSlider.set(FILTERS.priceRange);\n  var defaultFilters = Session.get('projectData');\n  defaultFilters = defaultFilters.filter;\n  if (FILTERS.homeType) if (FILTERS.homeType.length && FILTERS.homeType.length != defaultFilters.homeType.length) $('.filterUnitType').val(FILTERS.homeType[0]);else $('.filterUnitType').val('any');\n  if (FILTERS.facing) if (FILTERS.facing.length && FILTERS.facing.length != defaultFilters.facing.length) $('.filterUnitFacing').val(FILTERS.facing[0]);else $('.filterUnitFacing').val('any');\n}\n\nfunction resetUISlider(FILTERS) {\n  // console.log('reset slider values')\n  var slider = document.getElementById('range-input');\n  var slider1 = document.getElementById('range-input1');\n  slider.noUiSlider.set(FILTERS.floor);\n  slider1.noUiSlider.set(FILTERS.priceRange);\n  $('.filterUnitType, .filterUnitFacing').val('any');\n}\n\nfunction startUISlider(data) {\n  var slider = document.getElementById('range-input');\n  var slider1 = document.getElementById('range-input1'); //data = {\n  //  \"s1\":{\n  //    \"start\": [0, 25],\n  //    \"range\": [0, 25]\n  //  }, \"s2\":{\n  //    \"start\": [64, 94],\n  //    \"range\": [64, 94]\n  //  }\n  //}\n\n  noUiSlider.create(slider, {\n    start: data.s1.start,\n    connect: true,\n    step: 1,\n    range: {\n      'min': data.s1.range[0],\n      'max': data.s1.range[1]\n    },\n    format: wNumb({\n      decimals: 0\n    })\n  });\n  noUiSlider.create(slider1, {\n    start: data.s2.start,\n    connect: true,\n    step: 1000000,\n    range: {\n      'min': data.s2.range[0],\n      'max': data.s2.range[1]\n    },\n    format: wNumb({\n      decimals: 0\n    })\n  });\n  slider.noUiSlider.on('update', function () {\n    applyFilterValues();\n  });\n  slider1.noUiSlider.on('update', function () {\n    applyFilterValues();\n  });\n  slider.noUiSlider.on('change', function () {\n    applyFilters();\n  });\n  slider1.noUiSlider.on('change', function () {\n    applyFilters();\n  });\n}\n\nfunction getPaginationData(totalResultsCount, currentPageNo, urlBase, resultsPerPage) {\n  var pages = [],\n      prevPage = {},\n      nextPage = {};\n  var pgMin = currentPageNo - 4,\n      pgMax = currentPageNo + 5,\n      maxPages = Math.ceil(totalResultsCount / resultsPerPage);\n  if (pgMin < 1) pgMin = 1;\n  if (pgMax < 1) pgMax = 1;\n  if (maxPages < 1) maxPages = 1;\n  if (pgMin > maxPages) currentPageNo = maxPages;\n  var tmp = {};\n  var href = '';\n  var cRoute = FlowRouter.current(); // params: {pageno: undefined}\n  // path: \"/account/myproperies\"\n  // pathname: \"/account/myproperies\"\n  // queryParams: {}\n  // queryString: null\n  // route: Route {options: {…}, name:\n\n  for (var i = pgMin; i <= maxPages; i++) {\n    cRoute.params['pageno'] = i;\n    href = FlowRouter.url(cRoute.route.name, cRoute.params, cRoute.queryParams);\n    tmp = {\n      \"href\": href,\n      \"text\": i\n    };\n\n    if (i == currentPageNo) {\n      tmp['href'] = 'javascript:void(0);';\n      tmp['current'] = true;\n    }\n\n    pages.push(tmp);\n  }\n\n  var prevPageNo = currentPageNo - 1,\n      nextPageNo = currentPageNo + 1;\n\n  if (prevPageNo < 1) {\n    prevPage['href'] = 'javascript:void(0)';\n    prevPage['text'] = 'Previous';\n    prevPage['disabled'] = 'disabled';\n  } else {\n    cRoute.params['pageno'] = prevPageNo;\n    prevPage['href'] = FlowRouter.url(cRoute.route.name, cRoute.params, cRoute.queryParams);\n    prevPage['text'] = 'Previous';\n  }\n\n  if (nextPageNo > maxPages) nextPageNo = maxPages;\n\n  if (nextPageNo == currentPageNo) {\n    nextPage['href'] = 'javascript:void(0)';\n    nextPage['text'] = 'Next';\n    nextPage['disabled'] = 'disabled';\n  } else {\n    cRoute.params['pageno'] = nextPageNo;\n    prevPage['href'] = FlowRouter.url(cRoute.route.name, cRoute.params, cRoute.queryParams);\n    nextPage['text'] = 'Next';\n  }\n\n  return {\n    \"prevPage\": prevPage,\n    \"pages\": pages,\n    \"nextPage\": nextPage\n  };\n}\n\nTemplate.registerHelper(\"objectToPairs\", function (object) {\n  return _.map(object, function (value, key) {\n    return {\n      key: key,\n      value: value\n    };\n  });\n});\nTemplate.registerHelper(\"hostname\", function () {\n  return Meteor.absoluteUrl();\n});\n\nfunction numDifferentiation(val) {\n  if (val >= 1000000000) val = (val / 1000000000).toFixed(2) + ' Billion';else if (val >= 1000000) val = (val / 1000000).toFixed(2) + ' Million';\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction numFormat(x) {\n  //var x=12345652457.557;\n  //console.log(x)\n  if (!x) return x;\n  x = x.toString();\n  var afterPoint = '';\n  if (x.indexOf('.') > 0) afterPoint = x.substring(x.indexOf('.'), x.length);\n  afterPoint = afterPoint.substr(0, 3);\n  x = Math.floor(x);\n  x = x.toString();\n  var lastThree = x.substring(x.length - 3);\n  var otherNumbers = x.substring(0, x.length - 3);\n  if (otherNumbers != '') lastThree = ',' + lastThree;\n  var res = otherNumbers.replace(/\\B(?=(\\d{2})+(?!\\d))/g, \",\") + lastThree + afterPoint;\n  return res;\n}\n\nTemplate.myProperties.events({\n  \"click .clearFilters\": function (event, template) {\n    //FlowRouter.query.clear();\n    console.log('in .clearFilters meteor event');\n    var defaultFilters = Session.get('projectData');\n    defaultFilters = defaultFilters.filter;\n    $('.filterUnitFacing, .filterUnitType').val('any');\n    resetUISlider(defaultFilters);\n    setFilters(defaultFilters);\n    $.fancybox.close();\n    applyClearFiltersEvent();\n  },\n  \"click .addPropertyBtn\": function (event, template) {\n    var user = Accounts.user();\n\n    if (!user.profile.mobile) {\n      var mobile = false,\n          failed = false;\n\n      while (1) {\n        //This is an un limited loop of mobile number.\n        if (failed) mobile = prompt(\"'\" + mobile + \"' is not a valid number. Please enter a valid mobile to proceed. \");else mobile = prompt(\"You don't have a mobile number attached to your profile. Please enter mobile to proceed. \");\n        if (mobile == null || /^\\d{10}$/.test(mobile)) break;else {\n          failed = true;\n        }\n      }\n\n      if (/^\\d{10}$/.test(mobile)) {\n        Meteor.call('updateMobile', mobile, function (error, result) {\n          if (error) {\n            console.log(error.error);\n            var tmp = Session.get(\"showErrorDlg\");\n            var msg = 'Mobile number update failed. Please try again. Contact us if needed.';\n            tmp.push(msg);\n            Session.set(\"showErrorDlg\", tmp);\n            return;\n          }\n        });\n      }\n    }\n\n    if (template.showAddProperty.get()) template.showAddProperty.set(false);else template.showAddProperty.set(true);\n  },\n  \"change .new-filter select\": function (event, template) {\n    console.log(\"Filters changed\");\n    applyFilters();\n  }\n});\nTemplate.myProperties.onCreated(function () {\n  this.showAddProperty = new ReactiveVar(false);\n  this.totalResultsCount = new ReactiveVar(0);\n  var globalFILTERS = getFiltersFromRoute();\n  Session.set('globalFILTERS', globalFILTERS); // Session.set('enableDelayedFunctions',false);\n\n  Blaze._allowJavascriptUrls();\n\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.autorun(function () {\n    // FlowRouter.watchPathChange()\n    var pageno = FlowRouter.getParam('pageno');\n    var resperpage = 20;\n    var onlyActive = false; //Show only active properties\n\n    try {\n      resperpage = FlowRouter.getQueryParam('resperpage');\n      onlyActive = FlowRouter.getQueryParam('onlyActive');\n    } catch (e) {}\n\n    instance.subscribe('Config');\n    instance.subscribe('total-MyProperties', {\n      onlyActive: onlyActive\n    });\n    instance.subscribe(\"MyProperties\", {\n      viewName: 'MyProperties.view',\n      pageno: pageno,\n      resperpage: resperpage,\n      onlyActive: onlyActive\n    }); // instance.subscribe('Areas');\n\n    instance.subscribe('userData');\n\n    if (instance.subscriptionsReady()) {\n      instance.isSubsLoaded.set(true);\n      totalResultsCount = Counts.get(\"total-MyProperties\");\n      if (!totalResultsCount) instance.showAddProperty.set(true); //if no properties, then show it\n    }\n  }); // Session.set('assistanceRequested',false)\n  // Meteor.call('getDateFromServer',[],function(error, success){\n  //     Session.set('getDateFromServer',success)\n  // })\n  // Session.set('globalConfig', Collections.Config.findOne());\n  // var ret = getProjectData();\n  // Session.set('projectData',ret);\n});\nTemplate.myProperties.helpers({\n  isSubsLoaded: function () {\n    return Template.instance().subscriptionsReady();\n  },\n  userLoggedIn: function () {\n    if (Meteor.user()) return true;\n    return false;\n  },\n  data: function () {\n    if (!Template.instance().subscriptionsReady()) return false;\n    var user = Meteor.user();\n    if (!user) return {\n      results: [],\n      totalResultsCount: 0,\n      pagination: getPaginationData(0, 1, '', 10)\n    };\n    var selector = {\n      createdByAgent: user._id,\n      isArchived: false\n    }; //let limit = 10;\n    // debugger;\n\n    var FILTERS = Session.get('globalFILTERS');\n    var defaultFilters = getDefaultFilters(); // var arr = [];\n    // if(  FILTERS['homeType'] ){\n    //     if(FILTERS['homeType'].length) {\n    //         if(FILTERS['homeType'].length != defaultFilters.homeType.length)\n    //             selector['homeType'] = FILTERS['homeType'][0]\n    //         /*\n    //          // var arr = [];\n    //          for (var i = 0; i < FILTERS['homeType'].length; i++) {\n    //          arr.push({\"homeType\": FILTERS['homeType'][i]})\n    //          console.log(\"homeType\"+ FILTERS['homeType'][i])\n    //          }*/\n    //         // selector['$or'] = arr;//BUG: this or will over write or of facing; or of homeType will collide with this and\n    //         // while logic won't work\n    //\n    //     }\n    // }\n    // if(  FILTERS['facing'] ){\n    //     if(FILTERS['facing'].length) {\n    //         if(FILTERS['facing'].length != defaultFilters.facing.length)\n    //             selector['facing'] = FILTERS['facing'][0]\n    //         /*\n    //          var arr = [];\n    //          for (var i = 0; i < FILTERS['facing'].length; i++) {\n    //          arr.push({\"facing\": FILTERS['facing'][i]})\n    //          }\n    //          // selector['$or'] = arr;//BUG: this or will over write or of homeType; or of homeType will collide with this and\n    //          // while logic won't work\n    //          */\n    //     }\n    // }\n    // if(arr.length){\n    //     selector['$or'] = arr;\n    // }\n    // if( FILTERS['floor'] ){\n    //     var val_l = FILTERS['floor'][0];\n    //     var val_h = FILTERS['floor'][1];\n    //\n    //     if(isNaN(val_l) && isNaN(val_h)){//Both are not valid numbers\n    //\n    //     }else if(!isNaN(val_l) && isNaN(val_h)){//Low is valid and no upper\n    //         selector['floorLevel'] =  { $gte: parseInt(val_l) }\n    //     }else if(isNaN(val_l) && !isNaN(val_h)){//Upper is valid and no lower\n    //         selector['floorLevel'] =  { $lte: parseInt(val_h) }\n    //     }else{//Both are valid\n    //         selector['floorLevel'] =  { $gte: parseInt(val_l), $lte: parseInt(val_h) }\n    //     }\n    // }\n    // if( FILTERS['priceRange'] ){\n    //     var val_l = FILTERS['priceRange'][0];\n    //     var val_h = FILTERS['priceRange'][1];\n    //\n    //     if(isNaN(val_l) && isNaN(val_h)){//Both are not valid numbers\n    //\n    //     }else if(!isNaN(val_l) && isNaN(val_h)){//Low is valid and no upper\n    //         selector['priceBreakUp.totalAllInclusive'] =  { $gte: parseInt(val_l) }\n    //     }else if(isNaN(val_l) && !isNaN(val_h)){//Upper is valid and no lower\n    //         selector['priceBreakUp.totalAllInclusive'] =  { $lt: parseInt(val_h) }\n    //     }else{//Both are valid\n    //         selector['priceBreakUp.totalAllInclusive'] =  { $gte: parseInt(val_l), $lte: parseInt(val_h) }\n    //     }\n    // }\n    /////PAGINATION\n\n    var resultsPerPage = 20;\n    var currentPageNo = FlowRouter.current().params.pageno;\n\n    if (!currentPageNo) {\n      currentPageNo = 1;\n    }\n\n    var skip = (currentPageNo - 1) * resultsPerPage;\n    var urlBase = 'account/myproperies/';\n    var totalResultsCount = Counts.get(\"total-MyProperties\");\n    Template.instance().totalResultsCount.set(totalResultsCount);\n    var ret = Collections.Properties.find(selector, {\n      transform: function (doc) {\n        doc.bedroomsCount = 0; // console.log('May be here');\n        // console.log(doc)\n\n        if (doc.bedrooms) {\n          doc.bedroomsCount = doc.bedrooms.length;\n        }\n\n        if (doc.auctionId) {\n          doc.auction = Collections.Auctions.findOne({\n            _id: doc.auctionId\n          });\n        }\n\n        return doc;\n      },\n      // limit: resultsPerPage,\n      sort: {\n        updatedAt: -1\n      } // skip: skip\n\n    });\n    return {\n      results: ret,\n      totalResultsCount: totalResultsCount,\n      pagination: getPaginationData(totalResultsCount, currentPageNo, urlBase, resultsPerPage)\n    };\n  },\n  showDemoProp: function () {\n    var currentPageNo = FlowRouter.current().params.pageno;\n\n    if (!currentPageNo || currentPageNo == 1) {\n      var count = Collections.Properties.find({\n        createdByAgent: 'demoproperty',\n        isArchived: false\n      }, {\n        limit: 1\n      }).count();\n      if (count > 0) return true;\n    }\n\n    return false;\n  },\n  demoProperty: function () {\n    return Collections.Properties.find({\n      createdByAgent: 'demoproperty',\n      isArchived: false\n    }, {\n      transform: function (doc) {\n        doc.bedroomsCount = 0;\n\n        if (doc.bedrooms) {\n          doc.bedroomsCount = doc.bedrooms.length;\n        }\n\n        if (doc.auctionId) {\n          doc.auction = Collections.Auctions.findOne({\n            _id: doc.auctionId\n          });\n        }\n\n        return doc;\n      },\n      limit: 1\n    });\n  },\n  showAddProperty: function () {\n    if (Session.get('hideAddPropertyForm')) {\n      Template.instance().showAddProperty.set(false);\n      Session.set('hideAddPropertyForm', false);\n      scrollTo('.addPropertyBtn', 50, 500);\n    } else {\n      if (!fsClient) {\n        let filestack;\n        module.link(\"filestack-js\", {\n          default(v) {\n            filestack = v;\n          }\n\n        }, 1);\n        const apikey = 'AIPACLEs7ShGwwPh6fMTxz';\n        fsClient = filestack.init(apikey, {\n          policy: 'eyJleHBpcnkiOjE4NjE5MjAwMDAsImNhbGwiOlsicGljayIsInJlYWQiLCJzdGF0Iiwid3JpdGUiLCJ3cml0ZVVybCIsInN0b3JlIiwiY29udmVydCIsInJlbW92ZSIsImV4aWYiXX0=',\n          signature: '465e8652c5cef95f44e5858e09d430abea855d98deaeb7425558f2c80d0f4f57'\n        });\n      }\n    }\n\n    return Template.instance().showAddProperty.get();\n  },\n  showFilters: function () {\n    return false;\n  },\n  projectData: function () {\n    // var ret = getProjectData();\n    var ret = {}; // Session.set('projectData',ret);\n\n    return ret;\n  },\n  filters: function () {\n    var data = {}; //{\"Home Type\":[\"2 BHK\"],\"Floor\":[\"2 to 15\"],\"Price Range\":[\"67.45 to 97.45 \"]}\n\n    var FILTERS = Session.get('globalFILTERS');\n    var defaultFilters = Session.get('projectData');\n    defaultFilters = defaultFilters.filter;\n\n    if (FILTERS['homeType']) {\n      if (FILTERS['homeType'].length) {\n        if (!isArraysEqual(defaultFilters.homeType, FILTERS['homeType'])) data['Home Type'] = FILTERS['homeType'];\n      }\n    }\n\n    if (FILTERS['facing']) {\n      if (FILTERS['facing'].length) {\n        if (!isArraysEqual(defaultFilters.facing, FILTERS['facing'])) data['Facing'] = FILTERS['facing'];\n      }\n    }\n\n    if (FILTERS['floor']) {\n      var hasLowerLimit = false,\n          hasUpperLimit = false;\n      var l1 = parseInt(FILTERS['floor'][0]);\n      if (l1 != 0 && l1 != defaultFilters.floor[0]) hasLowerLimit = true;\n      var l2 = parseInt(FILTERS['floor'][1]);\n      if (l2 != defaultFilters.floor[1]) hasUpperLimit = true;\n\n      if (hasLowerLimit && !hasUpperLimit) {\n        //Only LowerLimit\n        data['Floor'] = ['More than ' + l1];\n      } else if (!hasLowerLimit && hasUpperLimit) {\n        //Only UpperLimit\n        data['Floor'] = ['Below ' + l2];\n      } else if (hasLowerLimit && hasUpperLimit) {\n        //Both are there\n        data['Floor'] = ['Between ' + l1 + \" and \" + l2];\n      } else {} //Both are not there. So don't show filter.\n\n    }\n\n    if (FILTERS['priceRange']) {\n      var hasLowerLimit = false,\n          hasUpperLimit = false;\n      var l1 = parseInt(FILTERS['priceRange'][0]);\n      if (l1 != 0 && l1 != defaultFilters.priceRange[0]) hasLowerLimit = true;\n      var l2 = parseInt(FILTERS['priceRange'][1]);\n      if (l2 != defaultFilters.priceRange[1]) hasUpperLimit = true;\n\n      if (hasLowerLimit && !hasUpperLimit) {\n        //Only LowerLimit\n        data['Price Range'] = ['More than ' + numDifferentiation(l1)];\n      } else if (!hasLowerLimit && hasUpperLimit) {\n        //Only UpperLimit\n        data['Price Range'] = ['Below ' + numDifferentiation(l2)];\n      } else if (hasLowerLimit && hasUpperLimit) {\n        //Both are there\n        data['Price Range'] = ['Between ' + numDifferentiation(l1) + \" to \" + numDifferentiation(l2)];\n      } else {} //Both are not there. So don't show filter.\n\n    } //if( FILTERS['priceRange'] ){\n    //  data['Price Range'] =  [ numDifferentiation(FILTERS['priceRange'][0]) +\" to \"+ numDifferentiation(FILTERS['priceRange'][1]) ]\n    //}\n\n\n    applyClearFiltersEvent();\n    return {\n      data: data,\n      count: Object.keys(data).length\n    };\n  },\n  // time: function(){\n  //\n  //     var projectData = Session.get('projectData');\n  //     var timestamp = TimeSync.serverTime(null, 30000);\n  //     if(!projectData.auction.endDate || !timestamp)return;\n  //\n  //\n  //     var dend = Date.parse(projectData.auction.endDate);\n  //     var timeDiff = dend - timestamp ;\n  //     if(timeDiff<0)return false;\n  //\n  //     var day = Math.floor(timeDiff / (1000 * 3600 * 24))\n  //     var hour = Math.floor(timeDiff / (1000 * 3600 ))\n  //     var min = Math.floor(timeDiff / (1000 * 60 ) )\n  //     hour = hour - (day * 24);\n  //     min = min - (day * 24* 60) - (hour * 60);\n  //     return {\"day\":day,\"hour\":hour,\"min\":min}\n  // },\n  isAuctionClosed: function () {\n    // var timestamp = TimeSync.serverTime(null, 30000);\n    var timestamp = new Date();\n    var projectData = Session.get('projectData');\n    var dend = Date.parse(projectData.auction.endDate);\n    var timeDiff = dend - timestamp;\n\n    if (timeDiff < 0) {\n      return true;\n    }\n\n    return false;\n  },\n  numDifferentiation: function (data) {\n    return numDifferentiation(data);\n  },\n  agentStats: function () {\n    var user = Meteor.user();\n\n    if (user) {\n      if (!user.profile.activeAuctions) user.profile.activeAuctions = 0;\n      if (!user.profile.totalAuctions) user.profile.totalAuctions = 0;\n      if (!user.profile.totalBidsReceived) user.profile.totalBidsReceived = 0;\n      if (!user.profile.bidsReceivedActiveAuctions) user.profile.bidsReceivedActiveAuctions = 0;\n      if (!user.profile.bidProfitActive) user.profile.bidProfitActive = 0;\n      if (!user.profile.totalBidProfit) user.profile.totalBidProfit = 0;\n      return {\n        activeAuctions: user.profile.activeAuctions,\n        totalAuctions: user.profile.totalAuctions,\n        totalBidsReceived: user.profile.totalBidsReceived,\n        bidsReceivedActiveAuctions: user.profile.bidsReceivedActiveAuctions,\n        bidProfit: user.profile.bidProfitActive,\n        totalBidProfit: user.profile.totalBidProfit * 12\n      };\n    }\n\n    return {\n      activeAuctions: 0,\n      totalAuctions: 0,\n      totalBidsReceived: 0,\n      bidsReceivedActiveAuctions: 0,\n      bidProfit: 0,\n      totalBidProfit: 0\n    };\n  }\n});\nTemplate.propertyList.onCreated(function () {\n  this.expanded = new ReactiveVar(false);\n  this.showAddAuctionForm = new ReactiveVar(false);\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.isSubsLoadedAttempted = new ReactiveVar(false); //Meteor.default_connection._subscriptions //To get the list of scbscriptions\n\n  instance.autorun(function () {\n    try {\n      if (instance.data.auctionId && !instance.data.auction) {\n        instance.isSubsLoadedAttempted.set(true);\n        instance.subscribe('Advertisement', instance.data.auctionId);\n      } else if (instance.data.auction) {\n        instance.isSubsLoaded.set(true);\n        instance.isSubsLoadedAttempted.set(true);\n      }\n\n      if (instance.subscriptionsReady()) {\n        instance.isSubsLoaded.set(true);\n      }\n    } catch (e) {\n      instance.isSubsLoaded.set(true);\n    }\n  });\n});\nTemplate.propertyList.helpers({\n  isSubsLoaded: function () {\n    return Template.instance().subscriptionsReady();\n  },\n  expanded: function () {\n    return Template.instance().expanded.get();\n  },\n  showAddAuctionForm: function () {\n    return Template.instance().showAddAuctionForm.get();\n  },\n  numDifferentiation: function (data) {\n    return numDifferentiation(data);\n  },\n  auction: function () {\n    if (this.auction) return this.auction;\n\n    if (this.auctionId) {\n      let ret = Collections.Auctions.find({\n        _id: this.auctionId\n      }).fetch();\n      let attempt = Template.instance().isSubsLoadedAttempted.get();\n\n      if (this.auctionId && !ret.length && !attempt) {\n        Template.instance().subscribe('Advertisement', this.auctionId);\n        Template.instance().isSubsLoadedAttempted.set(true);\n      }\n\n      if (ret) return ret[0];\n    }\n\n    return false;\n  },\n  lettingprintviewData: function () {\n    if (!this.auction) return \"\";\n    return this.auction.lettingAuctionCode; // if(!this.auction)return {key:\"\"}\n    // return {key:this.auction.lettingAuctionCode}\n  },\n  showEditPropertyForm: function () {\n    return FlowRouter.url('account/editproperty', {\n      id: this._id\n    });\n  }\n});\nTemplate.propertyList.events({\n  \"click .see_more_btn\": function (event, template) {\n    if (template.expanded.get()) template.expanded.set(false);else template.expanded.set(true);\n  },\n  \"click .ActivateBtn\": function (event, template) {\n    if (!template.showAddAuctionForm.get()) template.showAddAuctionForm.set(true);\n  },\n  \"click .showEditPropertyForm\": function (event, template) {\n    var prevRoute = {\n      name: FlowRouter.current().route.name,\n      args: {\n        pageno: FlowRouter.current().params.pageno,\n        scrollTo: 0\n      }\n    };\n    Session.set('prevRoute', prevRoute); // FlowRouter.go('account/editproperty',{id:this._id})\n  },\n  \"click .managePropertyLink\": function (event, template) {\n    var prevRoute = {\n      name: FlowRouter.current().route.name,\n      args: {\n        pageno: FlowRouter.current().params.pageno,\n        scrollTo: 0\n      }\n    };\n    Session.set('prevRoute', prevRoute);\n    FlowRouter.go('account/propertyManage', {\n      id: this._id\n    });\n  },\n  \"click .hideAddAuctionForm\": function (event, template) {\n    if (template.showAddAuctionForm.get()) template.showAddAuctionForm.set(false);\n    propId = this._id;\n    scrollTo('#property_' + propId, 0, 700);\n  },\n  \"click .viewApplications\": function (event, template) {\n    var prevRoute = {\n      name: FlowRouter.current().route.name,\n      args: {\n        pageno: FlowRouter.current().params.pageno\n      }\n    };\n    Session.set('prevRoute', prevRoute);\n    FlowRouter.go(\"account/propertyApplications\", {\n      id: this._id\n    });\n  },\n  \"click .showCopyDlg\": function (event, template) {\n    let user = Meteor.user();\n    let sluggedName = slugifyEmailAddress(user.profile.name);\n    if (!sluggedName) sluggedName = 'rent';\n    let email = sluggedName + '-let-' + this.auction.lettingAuctionCode.toLowerCase() + \"@spotmycrib.ie\";\n    $('#agentPropertyEmailField').val(email);\n    var url = FlowRouter.url('letting', {\n      key: this.auction.lettingAuctionCode\n    });\n    $('#propertyLinkField').val(url);\n    $.fancybox({\n      'padding': 0,\n      'href': '#propertyLinkDlg',\n      afterShow: function (template) {\n        $('#agentPropertyEmailField').select();\n        $('#propertyLinkDlg .copyEmailBtn').unbind().bind('click', function () {\n          $('#agentPropertyEmailField').select();\n\n          try {\n            var successful = document.execCommand('copy');\n            var msg = successful ? 'successful' : 'unsuccessful'; // console.log('Copying text command was ' + msg);\n\n            $.fancybox.close();\n          } catch (err) {\n            console.log('Oops, unable to copy');\n          }\n\n          ga('send', 'event', 'myPropertiesPage', 'copyShareEmail', 'copyShareEmail Btn Clicked');\n        });\n        $('#propertyLinkDlg .copyLinkBtn').unbind().bind('click', function () {\n          $('#propertyLinkField').select();\n\n          try {\n            var successful = document.execCommand('copy');\n            var msg = successful ? 'successful' : 'unsuccessful'; // console.log('Copying text command was ' + msg);\n\n            $.fancybox.close();\n          } catch (err) {\n            console.log('Oops, unable to copy');\n          }\n\n          ga('send', 'event', 'myPropertiesPage', 'copyShareLink', 'copyShareLink Btn Clicked');\n        });\n        $('#propertyLinkDlg .cancelBtn').unbind().bind('click', function () {\n          $.fancybox.close();\n        });\n      }\n    });\n  }\n});\nTemplate.addPropertyForm.onCreated(function () {\n  if (!Session.get('addPropertyImages')) {\n    // Lets do this. Anyways we have delete button.\n    Session.set('addPropertyImages', []);\n    S3.collection.remove({});\n    var user = Meteor.user();\n\n    try {\n      if (user.profile.session.addproperty.gallery) {\n        Session.set('addPropertyImages', user.profile.session.addproperty.gallery);\n      }\n    } catch (e) {}\n  }\n\n  this.numBedRoomCount = new ReactiveVar(0);\n  this.addPropertyFormSaving = new ReactiveVar(false);\n  this.countySelected = new ReactiveVar(false);\n  saveAndAdvertise = false;\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.autorun(function () {\n    if (instance.countySelected.get()) {\n      instance.isSubsLoaded.set(false);\n      instance.subscribe('Areas', '', '', instance.countySelected.get(), '', '');\n    }\n\n    if (instance.subscriptionsReady()) {\n      instance.isSubsLoaded.set(true);\n    }\n  });\n});\nTemplate.addPropertyForm.helpers({\n  isSA: function () {\n    var user = Meteor.user();\n    if (user.isSA) return true;\n    return false;\n  },\n  countries: function () {\n    return [{\n      label: \"Ireland\",\n      value: \"Ireland\",\n      selected: \"selected\"\n    }]; //Both capital\n  },\n  counties: function () {\n    let staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n    let ret = [];\n\n    for (let i = 0; i < staticCounties.length; i++) {\n      if (!staticCounties[i]) continue;\n      ret.push({\n        label: titleCase(staticCounties[i]),\n        value: staticCounties[i]\n      });\n    }\n\n    return ret; // return [{label: \"Dublin\", value: \"dublin\"}];//Both capital\n    // var distinctEntries = _.uniq(Collections.Areas.find({}, {\n    //     sort: {County: 1}, fields: {County: true}\n    // }).fetch().map(function(x) {\n    //     return x.County;\n    // }), true);\n    // var ret = []\n    // for(var i=0;i< distinctEntries.length;i++){\n    //     if(!distinctEntries[i])continue;\n    //     ret.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n    // }\n    // return ret;\n  },\n  areas: function () {\n    var countySelected = Template.instance().countySelected.get();\n\n    if (!countySelected) {\n      var doc = Collections.Properties.findOne();\n      if (!doc) return [];\n      Template.instance().countySelected.set(doc.address.county);\n      countySelected = doc.address.county;\n    }\n\n    var distinctEntries = _.uniq(Collections.Areas.find({\n      County: countySelected\n    }, {\n      sort: {\n        Area: 1\n      },\n      fields: {\n        Area: true\n      }\n    }).fetch().map(function (x) {\n      return x.Area;\n    }), true);\n\n    var ret = [];\n\n    for (var i = 0; i < distinctEntries.length; i++) {\n      if (!distinctEntries[i]) continue;\n      ret.push({\n        label: titleCase(distinctEntries[i]),\n        value: distinctEntries[i]\n      });\n    }\n\n    return ret;\n  },\n  propertyTypes: function () {\n    var Config = Collections.Config.find().fetch();\n    Config = Config[0];\n    var ret = [];\n\n    for (var i = 0; i < Config.propertyType.length; i++) {\n      ret.push({\n        label: titleCase(Config.propertyType[i].name),\n        value: Config.propertyType[i].value\n      });\n    }\n\n    return ret;\n  },\n  numBedRoomCount: function () {\n    var c = Template.instance().numBedRoomCount.get();\n    if (c < 100) return Template.instance().numBedRoomCount.get();else return 0;\n  },\n  addPropertyFormSaving: function () {\n    return Template.instance().addPropertyFormSaving.get();\n  },\n  ensuiteLoop: function (count) {\n    var countArr = [];\n\n    for (var i = 0; i < count; i++) {\n      countArr.push({\n        i: i + 1\n      });\n    }\n\n    return countArr;\n  }\n});\nTemplate.addPropertyForm.events({\n  \"click .openFileUploader\": function (event, template) {\n    event.preventDefault();\n    openPicker(); // filename\n    //     :\n    //     \"webcam-1/12/2018, 6:53:25 PM.png\"\n    // handle\n    //     :\n    //     \"G8lStVqHTiGnwxof6d5y\"\n    // mimetype\n    //     :\n    //     \"image/png\"\n    // originalFile\n    //     :\n    // {name: \"webcam-1/12/2018, 6:53:25 PM.png\", type: \"image/png\", size: 630585}\n    // originalPath\n    //     :\n    //     \"webcam-1/12/2018, 6:53:25 PM.png\"\n    // size\n    //     :\n    //     629612\n    // source\n    //     :\n    //     \"local_file_system\"\n    // status\n    //     :\n    //     \"Stored\"\n    // uploadId\n    //     :\n    //     \"ba2fe36e9fd182ec0cb88236d676cefad\"\n    // url\n    //     :\n    //     \"https://cdn.filestackcontent.com\n\n    return;\n  },\n  'change .selectPropertyImages': function (event, template) {\n    var files = event.target.files;\n    S3.upload({\n      files: files,\n      path: \"propertyImagesLarge\"\n    }, function (e, r) {\n      if (e) throw new Meteor.Error('Upload failed ', e);\n      var addPropertyImages = Session.get('addPropertyImages');\n      addPropertyImages.push(r);\n      Session.set('addPropertyImages', addPropertyImages);\n      console.log(r);\n    }); // for (var i = 0, ln = files.length; i < ln; i++) {\n    //     propertyImagesCollection.insert(files[i], function (err, fileObj) {\n    //         // Inserted new doc with ID fileObj._id, and kicked off the data upload using HTTP\n    //         console.log(fileObj);\n    //         var cursor = propertyImagesCollection.find(fileObj._id);\n    //\n    //         var liveQuery = cursor.observe({\n    //             changed: function(newImage, oldImage) {\n    //\n    //                 console.log(\"Inside live query \");\n    //                 console.log(newImage);\n    //                 if (newImage.isUploaded()) {\n    //                     liveQuery.stop();\n    //\n    //                     // Call your onUploaded callback here...\n    //                 }\n    //             }\n    //         });\n    //     });\n    // }\n  },\n  'change .countySelected': function (event, template) {\n    template.countySelected.set(event.target.value);\n  },\n  'change .url': function (event, template) {\n    var url = event.target.value;\n    if (!url) return false; //Empty url\n\n    Meteor.call('importPost', url, function (error, doc) {\n      if (error) {\n        console.log(error);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        var msg = 'An error occurred.';\n        if (error.reason) msg += ' ' + error.reason + '.';else if (error.message) msg += ' ' + error.message + '.';\n        tmp.push(msg);\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      $(\"input[name='address.address']\").val(doc.address.address);\n      $(\"input[name='price']\").val(doc.rent);\n      $(\"select[name='address.county']\").val(doc.address.county).trigger('change');\n      setTimeout(function () {\n        $(\"select[name='address.area']\").val(doc.address.area);\n      }, 2000);\n      setTimeout(function () {\n        $(\"select[name='address.area']\").val(doc.address.area);\n      }, 4000);\n      $(\"select[name='type']\").val(doc.type.toLowerCase());\n      $(\"select[name='furnished']\").val(doc.furnished.toString());\n      $(\"input[name='baths']\").val(doc.baths);\n      $(\"input[name='numBedRoomCount']\").val(doc.numBedRoomCount).trigger('change');\n      $(\"textarea[name='about']\").val(doc.about).trigger('keyup');\n      $(\"input[name='contacts.0.name']\").val(doc.contacts[0].name);\n      var number = \"\";\n\n      try {\n        number = doc.contacts[0].phone;\n      } catch (e) {}\n\n      if (number) {\n        try {\n          number = atob(number);\n          number = number.replace(/\\s+/g, '');\n        } catch (e) {}\n\n        $(\"input[name='contacts.0.phone']\").val(number);\n      }\n\n      if (doc.amenities) {\n        for (var i = 0; i < doc.amenities.length; i++) {\n          $(\"input[value='\" + doc.amenities[i] + \"']\").prop('checked', true);\n        }\n      }\n\n      var tmp = {};\n\n      if (doc.gallery) {\n        var addPropertyImages = Session.get('addPropertyImages');\n        if (!addPropertyImages) addPropertyImages = [];\n        var galleryLen = doc.gallery.length,\n            galleryStoredLen = 0; // var galleryLen = 1,galleryStoredLen=0;\n\n        for (var i = 0; i < doc.gallery.length; i++) {\n          // if(i>0)break;\n          fsClient.storeURL(doc.gallery[i], {\n            filename: 'Image ' + i + 1\n          }).then(function (response) {\n            console.log(JSON.stringify(response)); // {\"url\":\"https://cdn.filestackcontent.com/QH10tMaGTrSgFweORrip\",\"size\":111949,\"type\":\"image/jpeg\",\"filename\":\"Image 01\",\"handle\":\"QH10tMaGTrSgFweORrip\"}\n\n            tmp = {\n              name: response.filename,\n              url: response.url,\n              handle: response.handle,\n              mimetype: response.mimetype,\n              // originalFile: doc.gallery[i],\n              // originalPath: doc.gallery[i],\n              size: response.size // source: response.source,\n              // status: response.status,\n              // uploadId: response.uploadId\n\n            };\n            console.log(tmp);\n            addPropertyImages.push(tmp);\n            galleryStoredLen++;\n\n            if (galleryStoredLen == galleryLen) {\n              //Now its fully imported\n              Session.set('addPropertyImages', addPropertyImages);\n              updateGalleriesInProfile(addPropertyImages, function (err, res) {\n                //No need to show error. Because its just a backup.\n                var addPropertyImages = Session.get('addPropertyImages');\n                console.log(\"Current Count: \" + addPropertyImages.length);\n              });\n            }\n          });\n        }\n      }\n    });\n  },\n  'keyup .autoGrowTA': function (event, template) {\n    var element = event.target;\n    element.style.height = \"5px\";\n    if (element.scrollHeight < 310) element.style.height = element.scrollHeight + \"px\";else element.style.height = \"310px\";\n  },\n  'change #numBedRoomCount': function (event, template) {\n    var numBedRoomCount = parseInt($(event.target).val());\n    if (isNaN(numBedRoomCount)) return;\n    Template.instance().numBedRoomCount.set(numBedRoomCount);\n    t1 = template;\n    setTimeout(function () {\n      t1.$('#addPropertyFormCF').validate();\n    }, 500);\n  },\n  'submit form': function (event) {\n    event.preventDefault();\n  },\n  \"click .addPropertyFormSaveAdvertiseBtn\": function (event, template) {\n    saveAndAdvertise = true;\n    $('#addPropertyFormCF').submit();\n  },\n  \"click .addPropertyFormCancelBtn\": function (event, template) {\n    Session.set('hideAddPropertyForm', true);\n  },\n  'change input[name=price]': function (event, template) {\n    if (event.target.value) {\n      var tmp = event.target.value.split('.');\n      tmp = tmp[0]; //No decimals\n\n      tmp = tmp.trim().match(/\\d+/g);\n      if (!Array.isArray(tmp)) event.target.value = '';\n      event.target.value = tmp.join('');\n    }\n  }\n});\nTemplate.addPropertyForm.onRendered(function () {\n  // this.$('#addPropertyFormCF').validate();\n  addPropertyFormSaving = this.addPropertyFormSaving;\n  var validator = this.$('#addPropertyFormCF').validate({\n    submitHandler: function (event) {\n      addPropertyFormSaving.set(true);\n      console.log(\"You just submitted the 'addPropertyForm' form.\");\n      Meteor.call('addProperty', $('#addPropertyFormCF').serializeArray(), function (error, propertyId) {\n        addPropertyFormSaving.set(false);\n\n        if (error) {\n          console.log(error); //    validator.showErrors({\n          //         email: error.reason\n          //     });\n\n          var tmp = Session.get(\"showErrorDlg\");\n          if (!tmp) tmp = [];\n          var msg = 'An error occurred.';\n          if (error.reason) msg += ' ' + error.reason + '.';else if (error.message) msg += ' ' + error.message + '.';\n          tmp.push(msg);\n          Session.set(\"showErrorDlg\", tmp);\n          return;\n        }\n\n        if (saveAndAdvertise) {\n          Meteor.call('addAdvertisement', $('#addPropertyFormCF').serializeArray(), propertyId, function (error, auctionId) {\n            if (error) {\n              console.log(error); //    validator.showErrors({\n              //         email: error.reason\n              //     });\n\n              var tmp = Session.get(\"showErrorDlg\");\n              if (!tmp) tmp = [];\n              var msg = 'An error occurred.';\n              if (error.reason) msg += ' ' + error.reason + '.';else if (error.message) msg += ' ' + error.message + '.';\n              tmp.push(msg);\n              Session.set(\"showErrorDlg\", tmp);\n              return;\n            }\n\n            console.log('addAdvertisement created successfully');\n            console.log(auctionId);\n            saveAndAdvertise = false;\n          });\n        }\n\n        var addPropertyImages = Session.get('addPropertyImages');\n        updateGalleriesInServer(addPropertyImages, propertyId, function (err, res) {\n          Meteor.call('updateGalleriesInUserProfile', [], function () {\n            console.log('Reset the profile backup');\n          }); //Reset the profile backup\n\n          if (err) {\n            console.log(err);\n          } else {\n            Session.set('addPropertyImages', []);\n            S3.collection.remove({});\n          }\n        });\n        Session.set('hideAddPropertyForm', true);\n      });\n    }\n  });\n});\nTemplate.advertiseForm.onCreated(function () {\n  this.advertiseFormSaving = new ReactiveVar(false);\n});\nTemplate.advertiseForm.helpers({\n  advertiseFormSaving: function () {\n    return Template.instance().advertiseFormSaving.get();\n  }\n});\nTemplate.advertiseForm.events({\n  'submit form': function (event) {\n    event.preventDefault();\n  },\n  'change input[name=price]': function (event, template) {\n    if (event.target.value) {\n      var tmp = event.target.value.split('.');\n      tmp = tmp[0]; //No decimals\n\n      tmp = tmp.trim().match(/\\d+/g);\n      if (!Array.isArray(tmp)) event.target.value = '';\n      event.target.value = tmp.join('');\n    }\n  },\n  \"click .advertiseFormCancelBtn\": function (event, template) {\n    parentIns = template.view.parentView.parentView.parentView.templateInstance();\n    parentIns.showAddAuctionForm.set(false);\n  }\n});\nTemplate.advertiseForm.onRendered(function () {\n  this.$('#readyFrom').datetimepicker();\n  advertiseFormSaving = this.advertiseFormSaving;\n  parentIns = this.view.parentView.parentView.parentView.templateInstance();\n  var validator = this.$('#advertiseFormCF').validate({\n    submitHandler: function (event) {\n      advertiseFormSaving.set(true); // console.log(\"You just submitted the 'advertise' form.\");\n\n      Meteor.call('addAdvertisement', $('#advertiseFormCF').serializeArray(), function (error, result) {\n        advertiseFormSaving.set(false);\n\n        if (error) {\n          console.log(error); //    validator.showErrors({\n          //         email: error.reason\n          //     });\n\n          var tmp = Session.get(\"showErrorDlg\");\n          if (!tmp) tmp = [];\n          var msg = 'An error occurred.';\n          if (error.reason) msg += ' ' + error.reason + '.';else if (error.message) msg += ' ' + error.message + '.';\n          tmp.push(msg);\n          Session.set(\"showErrorDlg\", tmp);\n          return;\n        } // console.log('addAdvertisement completed successfully')\n\n\n        console.log(result);\n        auctionId = result;\n        parentIns.showAddAuctionForm.set(false);\n        scrollTo('.property_auction_' + auctionId, -100, 700);\n      });\n    }\n  });\n});\nTemplate.imageView.helpers({\n  images: function () {\n    // return S3.collection.find();\n    return Session.get('addPropertyImages');\n  }\n});\nTemplate.imgTag.events({\n  \"click .editImgBtn\": function (event, template) {\n    var addPropertyImages = Session.get('addPropertyImages');\n    var newArr = [];\n    if (!addPropertyImages) return;\n    if (!addPropertyImages.length) return;\n    index = getIndexByHandle(addPropertyImages, this.handle);\n    newArr.push(addPropertyImages[index].url); //put it at first\n\n    const pickOptions = {\n      transformations: {\n        crop: {\n          force: true,\n          aspectRatio: 1.333\n        },\n        rotate: true\n      },\n      accept: 'image/*',\n      imageMax: [800, 600],\n      \"uploadInBackground\": false //Disabled because, bg upload causes 2 uploads towards filestack limits\n\n    };\n    fsClient.cropFiles(newArr, pickOptions).then(response => {\n      var addPropertyImages = Session.get('addPropertyImages'); //if its conversion from old amazon to new filestack, then it will create a new file, so delete the old file seperatly and insert a new file seperatly.\n\n      if (!response.filesUploaded.length) {\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Edit failed: please try again, contact us if needed.\");\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      fsClient.remove(addPropertyImages[index].handle).then(function (result) {\n        if (!result.ok) {\n          console.log(result); //Not required to show error to user as this is just edit. If the image appears, he will click delete again\n        }\n\n        console.log('In fs remove result');\n        var addPropertyImages = Session.get('addPropertyImages');\n        addPropertyImages.splice(index, 1);\n        Session.set('addPropertyImages', addPropertyImages);\n        updateGalleriesInProfile(addPropertyImages, function (err, res) {\n          //No need to show error. Because its just a backup.\n          var addPropertyImages = Session.get('addPropertyImages');\n          console.log(\"Current Count: \" + addPropertyImages.length);\n        });\n      });\n      var tmp = {};\n\n      for (var i = 0; i < response.filesUploaded.length; i++) {\n        tmp = {\n          name: response.filesUploaded[i].filename,\n          url: response.filesUploaded[i].url,\n          handle: response.filesUploaded[i].handle,\n          mimetype: response.filesUploaded[i].mimetype,\n          originalFile: response.filesUploaded[i].originalFile,\n          originalPath: response.filesUploaded[i].originalPath,\n          size: response.filesUploaded[i].size,\n          source: response.filesUploaded[i].source,\n          status: response.filesUploaded[i].status,\n          uploadId: response.filesUploaded[i].uploadId\n        }; // addPropertyImages.push(tmp);\n\n        addPropertyImages.splice(index + 1, 0, tmp); //insert at the index place where its deleted.\n      } //Logic to insert new file.\n\n\n      Session.set('addPropertyImages', addPropertyImages);\n      updateGalleriesInProfile(addPropertyImages, function (err, res) {\n        //No need to show error. Because its just a backup.\n        var addPropertyImages = Session.get('addPropertyImages');\n        console.log(\"Current Count: \" + addPropertyImages.length);\n      });\n    });\n  },\n  \"click .deleteImgBtn\": function (event, template) {\n    var addPropertyImages = Session.get('addPropertyImages');\n    index = getIndexByHandle(addPropertyImages, this.handle);\n    fsClient.remove(this.handle).then(function (result) {\n      debugger;\n\n      if (!result.ok) {\n        console.log(result);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Deletion failed: please check your internet connection, contact us if needed.\");\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      var addPropertyImages = Session.get('addPropertyImages');\n      addPropertyImages.splice(index, 1);\n      Session.set('addPropertyImages', addPropertyImages);\n      updateGalleriesInProfile(addPropertyImages, function (err, res) {\n        //No need to show error. Because its just a backup.\n        var addPropertyImages = Session.get('addPropertyImages');\n        console.log(\"Current Count: \" + addPropertyImages.length);\n      });\n    });\n  },\n  \"click .deleteImgBtnOld\": function (event, template) {\n    console.log(this);\n    var addPropertyImages = Session.get('addPropertyImages');\n    index = getIndex(addPropertyImages, this._id); // debugger;\n\n    S3.delete(this.relative_url, function (error, result) {\n      var addPropertyImages = Session.get('addPropertyImages');\n      S3.collection.remove(addPropertyImages[index]._id);\n      addPropertyImages.splice(index, 1);\n      Session.set('addPropertyImages', addPropertyImages);\n    });\n  }\n});\n\nfunction getIndex(myArray, fileId) {\n  for (var i = 0; i < myArray.length; i++) {\n    if (myArray[i]._id === fileId) {\n      return i;\n    }\n  }\n}\n\nTemplate.myProperties.onRendered(function () {\n  try {\n    jQuery(\"html,body\").animate({\n      scrollTop: 0\n    }, 250);\n  } catch (e) {\n    document.body.scrollTop = document.documentElement.scrollTop = 0;\n  }\n\n  var prevRoute = Session.get('prevRoute');\n\n  if (prevRoute) {\n    try {\n      if (prevRoute) if (prevRoute.instructions) if (prevRoute.instructions.openPostNewProp) {\n        Template.instance().showAddProperty.set(true);\n        setTimeout(function () {\n          jQuery(\"html,body\").animate({\n            scrollTop: 0\n          }, 250);\n        }, 500);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n});\n\nfunction updateQueryStringParameter(uri, key, value) {\n  var re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n  var separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\n\n  if (uri.match(re)) {\n    return uri.replace(re, '$1' + key + \"=\" + value + '$2');\n  } else {\n    return uri + separator + key + \"=\" + value;\n  }\n}\n\nclearFiltersEvent = function () {\n  $('.clearFilterBtn').unbind().click(function () {\n    var val = $(this).closest('span').attr('val');\n    var key = $(this).closest('h5').attr('key');\n    var FILTERS = Session.get('globalFILTERS');\n    var filterDefaults = Session.get('projectData');\n    filterDefaults = filterDefaults.filter; // console.log(FILTERS);\n\n    if (key == \"Home Type\") {\n      var array = FILTERS[\"homeType\"];\n      var index = array.indexOf(val);\n\n      if (index > -1) {\n        array.splice(index, 1);\n        FILTERS[\"homeType\"] = array;\n      }\n    } else if (key == \"Facing\") {\n      var array = FILTERS[\"facing\"];\n      var index = array.indexOf(val);\n\n      if (index > -1) {\n        array.splice(index, 1);\n        FILTERS[\"facing\"] = array;\n      }\n    } else if (key == \"Price Range\") {\n      //if(FILTERS[\"priceRange\"][0]==val ){\n      //  FILTERS[\"priceRange\"][0] = filterDefaults.priceRange[0]\n      //}else{\n      //  FILTERS[\"priceRange\"][1] = filterDefaults.priceRange[1]\n      //}\n      FILTERS[\"priceRange\"][0] = filterDefaults.priceRange[0];\n      FILTERS[\"priceRange\"][1] = filterDefaults.priceRange[1];\n    } else if (key == \"Floor\") {\n      if (FILTERS[\"floor\"][0] == val) {\n        FILTERS[\"floor\"][0] = filterDefaults.floor[0];\n      } else {\n        FILTERS[\"floor\"][1] = filterDefaults.floor[1];\n      }\n    } //Session.set('globalFILTERS', FILTERS);\n\n\n    setFilters(FILTERS);\n  });\n};\n\napplyClearFiltersEvent = function () {\n  setTimeout(clearFiltersEvent, 1000);\n  setTimeout(clearFiltersEvent, 3000);\n};\n\nfunction applyFilters() {\n  console.log('event applyFilters jquery');\n  var floorLevelDOM = document.getElementById('range-input');\n  var priceRangeDOM = document.getElementById('range-input1');\n  var tmp = $('.filterUnitType').val();\n  if (tmp == 'any') tmp = [];else tmp = [tmp];\n  globalFILTERS.homeType = tmp;\n  var tmp = $('.filterUnitFacing').val();\n  if (tmp == 'any') tmp = [];else tmp = [tmp];\n  globalFILTERS.facing = tmp;\n  globalFILTERS.floor = floorLevelDOM.noUiSlider.get();\n  globalFILTERS.priceRange = priceRangeDOM.noUiSlider.get(); // console.log(globalFILTERS);\n\n  setFilters(globalFILTERS);\n  $.fancybox.close();\n  applyClearFiltersEvent();\n}\n\nfunction applyFilterValues() {\n  // console.log('event applyFiltersValues jquery')\n  var floorLevelDOM = document.getElementById('range-input');\n  var priceRangeDOM = document.getElementById('range-input1');\n  var floor = floorLevelDOM.noUiSlider.get();\n  var priceRange = priceRangeDOM.noUiSlider.get();\n  $('.filterS1l').html(floor[0]);\n  $('.filterS1h').html(floor[1]);\n  $('.filterS2l').html(numDifferentiation(priceRange[0]));\n  $('.filterS2h').html(numDifferentiation(priceRange[1]));\n}\n\nfunction delayedCall(functionName) {\n  setTimeout(functionName, 3000);\n}\n\nfunction isArraysEqual(array1, array2) {\n  var is_same = array1.length == array2.length && array1.every(function (element, index) {\n    return element === array2[index];\n  });\n  return is_same;\n}\n\ncallDelayedFunctions = function () {\n  setTimeout(delayedFunctions, 2000);\n};\n\nfunction delayedFunctions() {\n  Session.set('enableDelayedFunctions', true);\n  $('.fullyConfirmBlgOKBtn').unbind().click(function () {\n    console.log('fullyConfirmBlgOKBtn called');\n    Session.set('showConfirmFancyBox', false);\n    FlowRouter.query.clear();\n    $.fancybox.close();\n    $('.fancybox-overlay').hide();\n    setTimeout(function () {\n      var unitid = Session.get('adjustAutoExpandToUnitID');\n\n      if (unitid) {\n        scrollTo('.has-error', 0, 500);\n        setTimeout(function () {\n          $('html,body').animate({\n            scrollTop: $('#unit_' + unitid).offset().top\n          }, 1000);\n        }, 1000);\n        Session.set('adjustAutoExpandToUnitID', '');\n      }\n    }, 2000);\n  });\n}\n\nfunction mybidsJqueryEvents() {\n  $('.payNowBtn').unbind().click(function () {\n    console.log(\"jquery event payNowBtn\");\n    var redirectURL = FlowRouter.current().originalUrl;\n\n    if (redirectURL.indexOf('http:') == -1) {\n      var redirectURL = Meteor.absoluteUrl() + FlowRouter.current().originalUrl.substring(1);\n    }\n\n    var bidId = $(this).attr('bidid');\n    Meteor.call(\"getUnitConfirmationPaymentURL\", [redirectURL, bidId], function (error, result) {\n      if (error) {\n        return;\n      }\n\n      window.location.href = result;\n    });\n  });\n  $('.withdrawConfirmBtn').unbind().click(function () {\n    console.log(\"jquery event withdrawBtn\");\n    var bidId = $(this).attr('bidid');\n    Meteor.call(\"withdrawBid\", [bidId], function (error, result) {\n      if (error) {\n        return;\n      }\n\n      $.fancybox.close();\n    });\n  });\n  $('.cancelBtn').unbind().click(function () {\n    console.log('event cancelBtn jquery');\n    $.fancybox.close();\n  });\n}\n\nfunction getPriceBreakUp(unit, ratePerSqFt) {\n  var pricing = unit.priceBreakUp;\n  var electricityMultiplier = pricing.statutoryGovtCharges.electricityMultiplier;\n  var constructionRateForVAT = pricing.statutoryGovtCharges.constructionRateForVAT;\n  if (!electricityMultiplier) electricityMultiplier = 140;\n  if (!constructionRateForVAT) constructionRateForVAT = 2100;\n  if (!pricing.landCost) pricing.landCost = 2091;\n  unit.superBuiltUpArea = parseFloat(unit.superBuiltUpArea);\n  ratePerSqFt = parseFloat(ratePerSqFt);\n  pricing.landCost = parseFloat(pricing.landCost);\n  electricityMultiplier = parseFloat(electricityMultiplier);\n  constructionRateForVAT = parseFloat(constructionRateForVAT);\n  pricing.basicUnitCost.floorRaiseCharge = parseFloat(pricing.basicUnitCost.floorRaiseCharge);\n  pricing.basicUnitCost.plcCharge = parseFloat(pricing.basicUnitCost.plcCharge);\n  pricing.basicUnitCost.floorRaiseCharge = parseFloat(pricing.basicUnitCost.floorRaiseCharge);\n  pricing.basicUnitCost.plcCharge = parseFloat(pricing.basicUnitCost.plcCharge);\n  pricing.basicUnitCost.totalBasicRatepsft = parseFloat(pricing.basicUnitCost.totalBasicRatepsft);\n  pricing.basicUnitCost.total = parseFloat(pricing.basicUnitCost.total);\n  pricing.agreementValue.infrastructureValue = parseFloat(pricing.agreementValue.infrastructureValue);\n  pricing.agreementValue.clubHouseCharges = parseFloat(pricing.agreementValue.clubHouseCharges);\n  pricing.agreementValue.total = parseFloat(pricing.agreementValue.total);\n  pricing.otherCharges.advanceMaintainence = parseFloat(pricing.otherCharges.advanceMaintainence);\n  pricing.otherCharges.generatorBackup = parseFloat(pricing.otherCharges.generatorBackup);\n  pricing.otherCharges.builderCharges = parseFloat(pricing.otherCharges.builderCharges);\n  pricing.otherCharges.total = parseFloat(pricing.otherCharges.total);\n  pricing.statutoryGovtCharges.serviceTax = parseFloat(pricing.statutoryGovtCharges.serviceTax);\n  pricing.statutoryGovtCharges.vat = parseFloat(pricing.statutoryGovtCharges.vat);\n  pricing.statutoryGovtCharges.labourCess = parseFloat(pricing.statutoryGovtCharges.labourCess);\n  pricing.statutoryGovtCharges.electricityCharges = parseFloat(pricing.statutoryGovtCharges.electricityCharges);\n  pricing.statutoryGovtCharges.stampDuty = parseFloat(pricing.statutoryGovtCharges.stampDuty);\n  pricing.statutoryGovtCharges.stampPaperCharges = parseFloat(pricing.statutoryGovtCharges.stampPaperCharges);\n  pricing.statutoryGovtCharges.legalCharges = parseFloat(pricing.statutoryGovtCharges.legalCharges);\n  pricing.statutoryGovtCharges.otherStatutoryCharges = parseFloat(pricing.statutoryGovtCharges.otherStatutoryCharges);\n  pricing.statutoryGovtCharges.total = parseFloat(pricing.statutoryGovtCharges.total);\n  pricing.totalAllInclusive = parseFloat(pricing.totalAllInclusive);\n  pricing.basicUnitCost.totalBasicRatepsft = ratePerSqFt + pricing.basicUnitCost.floorRaiseCharge + pricing.basicUnitCost.plcCharge;\n  pricing.basicUnitCost.total = unit.superBuiltUpArea * pricing.basicUnitCost.totalBasicRatepsft;\n  pricing.agreementValue.total = pricing.basicUnitCost.total + pricing.agreementValue.infrastructureValue + pricing.agreementValue.clubHouseCharges; //pricing.statutoryGovtCharges.electricityCharges = unit.superBuiltUpArea * electricityMultiplier;\n  //pricing.statutoryGovtCharges.vat = ( (constructionRateForVAT+pricing.basicUnitCost.floorRaiseCharge +\n  //  pricing.basicUnitCost.plcCharge)     +    (pricing.agreementValue.infrastructureValue + pricing.statutoryGovtCharges.electricityCharges + pricing.agreementValue.clubHouseCharges)/unit.superBuiltUpArea)*unit.superBuiltUpArea * 0.145 ;\n  //debugger;\n  // pricing.statutoryGovtCharges.labourCess = (pricing.basicUnitCost.total - (unit.superBuiltUpArea * pricing.landCost))*0.01\n  // var D30 = unit.floorLevel\n  // var E30 = D30<=5 ? 0 : D30>5 && D30<=15 ? (D30-5)*0.005 : 0.05\n  // //pricing.statutoryGovtCharges.stampDuty =  ((ratePerSqFt*2130)+(ratePerSqFt*2130*(E30+0.0525)+250000))*0.0665\n  // //pricing.statutoryGovtCharges.stampPaperCharges =  pricing.agreementValue.total*0.001+300\n  // pricing.statutoryGovtCharges.total = pricing.statutoryGovtCharges.vat +\n  //   pricing.statutoryGovtCharges.labourCess +\n  //   pricing.statutoryGovtCharges.electricityCharges +\n  //   pricing.statutoryGovtCharges.stampDuty +\n  //   pricing.statutoryGovtCharges.stampPaperCharges +\n  //   pricing.statutoryGovtCharges.legalCharges +\n  //   pricing.statutoryGovtCharges.otherStatutoryCharges\n\n  pricing.totalAllInclusive = pricing.agreementValue.total + pricing.otherCharges.total + pricing.statutoryGovtCharges.total;\n  return pricing;\n}\n\nfunction ordinal_suffix_of(i) {\n  var j = i % 10,\n      k = i % 100;\n\n  if (j == 1 && k != 11) {\n    return i + \"st\";\n  }\n\n  if (j == 2 && k != 12) {\n    return i + \"nd\";\n  }\n\n  if (j == 3 && k != 13) {\n    return i + \"rd\";\n  }\n\n  return i + \"th\";\n}\n\nfunction openPicker() {\n  fsClient.pick({\n    fromSources: [\"local_file_system\", \"webcam\", \"facebook\", \"url\", \"googledrive\", \"dropbox\", \"flickr\", \"instagram\", \"gmail\", \"picasa\", \"onedrive\", \"clouddrive\"],\n    maxFiles: 10,\n    transformations: {\n      crop: {\n        force: false,\n        aspectRatio: 1.333\n      },\n      rotate: true\n    },\n    imageMax: [800, 600],\n    accept: [\"image/*\"],\n    \"uploadInBackground\": false //Disabled because, bg upload causes 2 uploads towards filestack limits\n\n  }).then(function (response) {\n    // declare this function to handle response\n    var addPropertyImages = Session.get('addPropertyImages');\n    var tmp = {};\n    if (response.filesUploaded) for (var i = 0; i < response.filesUploaded.length; i++) {\n      tmp = {\n        name: response.filesUploaded[i].filename,\n        url: response.filesUploaded[i].url,\n        handle: response.filesUploaded[i].handle,\n        mimetype: response.filesUploaded[i].mimetype,\n        originalFile: response.filesUploaded[i].originalFile,\n        originalPath: response.filesUploaded[i].originalPath,\n        size: response.filesUploaded[i].size,\n        source: response.filesUploaded[i].source,\n        status: response.filesUploaded[i].status,\n        uploadId: response.filesUploaded[i].uploadId\n      };\n      addPropertyImages.push(tmp);\n    }\n    Session.set('addPropertyImages', addPropertyImages);\n    updateGalleriesInProfile(addPropertyImages, function (err, res) {\n      //No need to show error. Because its just a backup.\n      var addPropertyImages = Session.get('addPropertyImages');\n      console.log(\"Current Count: \" + addPropertyImages.length);\n    });\n    console.log(response);\n  });\n}\n\nfunction getIndexByHandle(myArray, fileId) {\n  for (var i = 0; i < myArray.length; i++) {\n    if (myArray[i].handle === fileId) {\n      return i;\n    }\n  }\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction slugifyEmailAddress(text) {\n  if (!text) return '';\n  const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ/_,:;';\n  const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return text.toString().toLowerCase().replace(/\\s+/g, '.') // Replace spaces with \".\"\n  .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n  .replace(/&/g, '-and-') // Replace & with ''\n  // .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single ''\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"profile.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/templates/profile.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./profile.html\");\n// import \"./accounts/helpers.js\";\n// import \"./accounts/validation.js\";\nvar _validFileExtensions = [\".jpg\", \".jpeg\", \".png\", \".pdf\", \".txt\", \".doc\", \".docx\", \".ODT\"];\n\nfunction filevalidation(arrInputs) {\n  for (var i = 0; i < arrInputs.length; i++) {\n    var oInput = arrInputs[i];\n    var sFileName = oInput.name;\n\n    if (sFileName.length > 0) {\n      var blnValid = false;\n\n      for (var j = 0; j < _validFileExtensions.length; j++) {\n        var sCurExtension = _validFileExtensions[j];\n\n        if (sFileName.substr(sFileName.length - sCurExtension.length, sCurExtension.length).toLowerCase() == sCurExtension.toLowerCase()) {\n          blnValid = true;\n          break;\n        }\n      }\n\n      if (!blnValid) {\n        // alert(\"Sorry, \" + sFileName + \" is invalid, allowed extensions are: \" + _validFileExtensions.join(\", \"));\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nTemplate.profile.onCreated(function () {\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.autorun(function () {\n    instance.subscribe('userData');\n\n    if (instance.subscriptionsReady()) {\n      var data = Accounts.user();\n\n      try {\n        if (data.profile.isPublic && data.profile.username) {\n          console.log(''); // FlowRouter.redirect('tenant',{username:data.profile.username})\n        }\n      } catch (e) {\n        console.log(e);\n      }\n\n      instance.isSubsLoaded.set(true);\n    }\n  });\n});\nTemplate.profile.helpers({\n  isSubsLoaded: function () {\n    return Template.instance().subscriptionsReady();\n  },\n  userLoggedIn: function () {\n    if (Meteor.user()) return true;\n    return false;\n  }\n});\nTemplate.userProfile.onCreated(function () {\n  this.privacyTermsMore = new ReactiveVar(false);\n  this.hasPasswordSet = new ReactiveVar(false);\n  this.hasPasswordSetReqCompleted = new ReactiveVar(false);\n});\nTemplate.userProfile.helpers({\n  \"data\": function () {\n    var data = Accounts.user(); // console.log(data);\n\n    var city = ''; // profile.files.has\n    // if(data)\n    // if(data.profile)\n    // if(data.profile.addressBook)\n    // if(data.profile.addressBook.length){\n    //   city = data.profile.addressBook[0].city\n    // }\n\n    clearMeta();\n\n    try {\n      DocHead.setTitle(titleCase(data.profile.name) + '\\'s profile | SpotMyCrib');\n      DocHead.addMeta({\n        name: \"description\",\n        content: \"Upload and manage your references.\"\n      });\n    } catch (err) {\n      DocHead.setTitle(' User not found | SpotMyCrib');\n      DocHead.addMeta({\n        name: \"description\",\n        content: \"\"\n      });\n    }\n\n    return {\n      \"userData\": data,\n      \"userCity\": city,\n      \"userEmail\": data.profile.email,\n      \"userEmailVerified\": data.profile.emailVerified\n    };\n  },\n  backBtnNeeded: function () {\n    var prevRoute = Session.get('prevRoute');\n\n    try {\n      if (FlowRouter.current().route.name != prevRoute.name) return true;\n    } catch (e) {}\n\n    return false;\n  },\n  prevRoute: function () {\n    return Session.get('prevRoute');\n  },\n  isPublicProfileSelectYes: function () {\n    var user = Meteor.user();\n\n    try {\n      if (user.profile.isPublic) {\n        return 'selected';\n      }\n    } catch (e) {}\n\n    return '';\n  },\n  isPublicProfileSelectNo: function () {\n    var user = Meteor.user();\n\n    try {\n      if (!user.profile.isPublic) {\n        return 'selected';\n      }\n    } catch (e) {}\n\n    return '';\n  },\n  progress: function () {\n    var user = Meteor.user();\n    var score = 0;\n    var css = 'progress-bar-danger';\n    var issues = [];\n\n    if (user.profile.mobile) {\n      score += 15;\n    } else {\n      issues.push('Mobile number is required. Landlord needs to contact you.');\n    }\n\n    if (!user.services) user.services = {};\n\n    if (user.services.facebook) {\n      score += 15;\n    } else {\n      issues.push('Connect with your Facebook profile. Its shows your social presence.');\n    } // if(user.services.google){score += 10;}else{issues.push('Connect with your google profile. Its shows your social presence.')}//No weightage\n\n\n    if (user.services.twitter) {\n      score += 10;\n    } else {\n      issues.push('Connect with your Twitter profile. Its shows your social presence.');\n    }\n\n    if (user.services.linkedin) {\n      score += 15;\n    } else {\n      issues.push('Connect with your LinkedIn profile. Its shows your professional presence.');\n    }\n\n    if (user.profile.references.hasPassport) {\n      score += 10;\n    } else {\n      issues.push('Passport is required. Its your legal identity card.');\n    }\n\n    if (user.profile.references.employerName) {\n      score += 3;\n    } else {\n      issues.push('Name of your employer is recommended. It can highlight your profile to landlord.');\n    }\n\n    if (user.profile.references.employerTakeHome) {\n      score += 2;\n    } else {\n      issues.push('Monthly take home salary is recommended. It can act as your finantial reference.');\n    }\n\n    if (user.profile.references.hasWorkRef) {\n      score += 10;\n    } else {\n      issues.push('Work reference is required. It shows your professional side.');\n    }\n\n    if (user.profile.references.hasLandlordRef) {\n      score += 10;\n    } else {\n      issues.push('Landlord reference is required. ');\n    }\n\n    if (user.profile.references.hasPPS) {\n      score += 3;\n    } else {\n      issues.push('PPS is recommended. Its your legal identity card.');\n    } // if(user.profile.references.hasFinancialRef){score += 0;}else{issues.push('Financial reference if work reference is not given.')}\n\n\n    if (user.profile.references.hasGovtID) {\n      score += 4;\n    } else {\n      issues.push('Govt ID is recommended. Driving license or GNIB as your identity card.');\n    }\n\n    if (user.profile.references.hasResume) {\n      score += 3;\n    } else {\n      issues.push('Resume is recommended. It shows your professional side.');\n    }\n\n    if (score > 100) score = 100;\n    if (score > 50) css = 'progress-bar-warning';\n    if (score > 70) css = 'progress-bar-info';\n    if (score > 90) css = 'progress-bar-success';\n    return {\n      css: css,\n      percent: score + \"%\",\n      issues: issues\n    };\n  },\n  privacyTermsMore: function () {\n    return Template.instance().privacyTermsMore.get();\n  },\n  showFileTemplate: function () {\n    return Session.get('showFileTemplate');\n  },\n  showHideFileDlg: function () {\n    console.log(\"Event showHideFileDlg\");\n    var ses = Session.get('showFileDlg');\n\n    if (ses) {\n      if (ses.show) {\n        $.fancybox({\n          'padding': 0,\n          'href': '#fileupload-dlg',\n          width: '80%',\n          afterShow: function () {\n            Session.set('showFileTemplate', true);\n          },\n          afterClose: function () {\n            var ses = {\n              show: false,\n              cate: \"\"\n            };\n            Session.set('showFileDlg', ses); // Has the overall info and basic required info.\n\n            Session.set('showFileTemplate', false);\n          }\n        });\n        return true;\n      } else if (ses.show == false) {\n        try {\n          $.fancybox.close();\n        } catch (e) {}\n      }\n    }\n\n    return false;\n  },\n  hasPasswordSet: function () {\n    var localHasPasswordSet = Session.get('localHasPasswordSet');\n    if (localHasPasswordSet) return localHasPasswordSet;\n    return Template.instance().hasPasswordSet.get();\n  },\n  hasPasswordSetReqCompleted: function () {\n    return Template.instance().hasPasswordSetReqCompleted.get();\n  }\n});\nTemplate.userProfile.events({\n  \"change .togglePublicProfileSetting\": function (event, template) {\n    Meteor.call('togglePublicProfileSetting', function (err, res) {\n      if (err) {\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        var msg = 'Public profile setting change failed. Check your internet connection. ';\n        if (err.error) msg += err.error + '. ';\n        msg += \"Please try again. Contact us if needed.\";\n        tmp.push(msg);\n        Session.set(\"showErrorDlg\", tmp);\n      } else {\n        setTimeout(function () {\n          var data = Accounts.user();\n\n          try {\n            if (data.profile.isPublic && data.profile.username) {\n              FlowRouter.go('tenant', {\n                username: data.profile.username\n              });\n            } else {\n              FlowRouter.go('account/profile');\n            }\n          } catch (e) {\n            console.log(e);\n          }\n        }, 1000);\n      }\n    });\n  },\n  \"click .profileLinkCopyBtn\": function (event, template) {\n    console.log(\"Event profileLinkCopyBtn\");\n    $('#profileLinkField').select();\n\n    try {\n      var successful = document.execCommand('copy');\n      var msg = successful ? 'successful' : 'unsuccessful'; // console.log('Copying text command was ' + msg);\n\n      var tmp = Session.get(\"showErrorDlg\");\n      if (!tmp) tmp = [];\n      var msg = 'Your profile is copied to your clipboard. ';\n      tmp.push(msg);\n      Session.set(\"showErrorDlg\", tmp);\n    } catch (err) {\n      console.log('Oops, unable to copy');\n    }\n  },\n  \"click .requestRedgRefund\": function (event, template) {\n    console.log(\"Event requestRedgRefund\");\n    $.fancybox({\n      'padding': 0,\n      'href': '#requestRedgRefund-popup'\n    });\n  },\n  \"click .requestConfRefund\": function (event, template) {\n    console.log(\"Event requestConfRefund\");\n    $.fancybox({\n      'padding': 0,\n      'href': '#requestConfRefund-popup'\n    });\n  },\n  \"click .changePwdBtn\": function (event, template) {\n    console.log(\"Event changePwdBtn\");\n    $('#changepass-dlg .changePwdAlertMsgs .color-text').html('');\n    $('#changepass-dlg .help-block p').html('');\n    $(\"#changepass-dlg button[type=submit]\").attr(\"disabled\", false);\n    $.fancybox({\n      'padding': 0,\n      'href': '#changepass-dlg',\n      'afterClose': () => {\n        console.log(\"Event: Fancybox closed\"); //reset fields\n\n        $('.oldpwd').val(\"\");\n        $('.newpwd').val(\"\");\n      }\n    });\n  },\n  \"click .setPwdBtn\": function (event, template) {\n    console.log(\"Event setPwdBtn\");\n    $('#setpass-dlg .changePwdAlertMsgs .color-text').html('');\n    $('#setpass-dlg .help-block p').html('');\n    $(\"#setpass-dlg button[type=submit]\").attr(\"disabled\", false);\n    $.fancybox({\n      'padding': 0,\n      'href': '#setpass-dlg',\n      'afterClose': () => {\n        console.log(\"Event: Fancybox closed\"); //reset fields\n\n        $('.newpwd').val(\"\");\n        $('.newpwdconfirm').val(\"\");\n      }\n    });\n  },\n  \"click .changeMobileBtn\": function (event, template) {\n    console.log(\"Event changeMobileBtn\");\n    $.fancybox({\n      'padding': 0,\n      'href': '#changeMobile-div'\n    });\n  },\n  \"click .changeCityBtn\": function (event, template) {\n    console.log(\"Event changeCityBtn\");\n    $.fancybox({\n      'padding': 0,\n      'href': '#changeCity-div'\n    });\n  },\n  \"click .changeEmployerNameConfirmation\": function (event, template) {\n    console.log(\"Event changeEmployerNameConfirmation\");\n    var ele = $(event.target);\n    hideSaveBtn(ele);\n    Meteor.call('updateEmployerName', $('.changeEmployerNameValue').val(), function (error, result) {\n      if (error) {\n        console.log(error.error);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        if (!error.error) error.error = 'An error occurred';\n        tmp.push(error.error);\n        Session.set(\"showErrorDlg\", tmp);\n        showSaveBtn(ele);\n        return;\n      }\n\n      if (result.status == 'Success') {}\n    });\n  },\n  \"click .changeEmployerTakeHomeConfirmation\": function (event, template) {\n    console.log(\"Event changeEmployerTakeHomeConfirmation\");\n    debugger;\n    var ele = $(event.target);\n    hideSaveBtn(ele);\n    var num = parseInt($('.changeEmployerTakeHomeValue').val());\n    Meteor.call('updateEmployerTakeHome', num, function (error, result) {\n      if (error) {\n        console.log(error.error);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        if (!error.error) error.error = 'An error occurred';\n        tmp.push(error.error);\n        Session.set(\"showErrorDlg\", tmp);\n        showSaveBtn(ele);\n        return;\n      }\n\n      if (result.status == 'Success') {}\n    });\n  },\n  \"click .privacyTermsMore_btn\": function (event, template) {\n    if (template.privacyTermsMore.get()) template.privacyTermsMore.set(false);else template.privacyTermsMore.set(true);\n  },\n  //////// TODO: Events below are not working.\n  \"click .requestRedgRefundConf\": function (event, template) {\n    console.log(\"Event requestRedgRefundConf\");\n    var ret = Meteor.call('registrationAmountRefund', [], function (ret) {\n      if (ret.status == 'AlreadyRequested') {}\n\n      $.fancybox.close();\n    });\n  },\n  \"click .requestConfRefundConf\": function (event, template) {\n    console.log(\"Event requestConfRefundConf\");\n    var ret = Meteor.call('confirmationAmountRefund', [], function (ret) {\n      if (ret.status == 'AlreadyRequested') {}\n\n      $.fancybox.close();\n    });\n  },\n  \"click .noBtn\": function (event, template) {\n    console.log(\"Event noBtn\");\n    $.fancybox.close();\n  },\n  \"click .backBtn\": function (event, template) {\n    var prevRoute = Session.get('prevRoute'); // Session.set('prevRoute',{\n    //   name:\"letting\",\n    //     args:{key:\"DUN1\"}\n    // });\n\n    if (prevRoute) {\n      FlowRouter.go(prevRoute.name, prevRoute.args);\n      var prevRoute = {\n        name: FlowRouter.current().route.name,\n        args: {}\n      };\n      Session.set('prevRoute', prevRoute);\n    } else {\n      FlowRouter.go(\"home\");\n    }\n  },\n  \"click .linkWithGoogleBtn\": function (event, template) {\n    Meteor.linkWithGoogle({}, function (err) {\n      if (err) {\n        console.log(err);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        var msg = 'Link with Google failed. ';\n        if (err.error) msg += err.error + '. ';\n        msg += \"Please try again. Contact us if needed.\";\n        tmp.push(msg);\n        Session.set(\"showErrorDlg\", tmp);\n        throw new Meteor.Error(\"Google login failed\");\n      } else {}\n    });\n  },\n  \"click .linkWithTwitterBtn\": function (event, template) {\n    Meteor.linkWithTwitter({}, function (err) {\n      if (err) {\n        console.log(err);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        var msg = 'Link with Twitter failed. ';\n        if (err.error) msg += err.error + '. ';\n        msg += \"Please try again. Contact us if needed.\";\n        tmp.push(msg);\n        Session.set(\"showErrorDlg\", tmp);\n        throw new Meteor.Error(\"Twitter login failed\");\n      } else {}\n    });\n  },\n  \"click .linkWithFacebookBtn\": function (event, template) {\n    Meteor.linkWithFacebook({}, function (err) {\n      if (err) {\n        console.log(err);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        var msg = 'Link with Facebook failed. ';\n        if (err.error) msg += err.error + '. ';\n        msg += \"Please try again. Contact us if needed.\";\n        tmp.push(msg);\n        Session.set(\"showErrorDlg\", tmp);\n        throw new Meteor.Error(\"Facebook login failed\");\n      } else {}\n    });\n  },\n  \"click .linkWithLinkedInBtn\": function (event, template) {\n    Meteor.connectWithLinkedIn({}, function (err) {\n      if (err) {\n        console.log(arguments);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        var msg = 'Link with LinkedIn failed. ';\n        if (err.error) msg += err.error + '. ';\n        msg += \"Please try again. Contact us if needed.\";\n        tmp.push(msg);\n        Session.set(\"showErrorDlg\", tmp);\n        throw new Meteor.Error(\"LinkedIn login failed\");\n      } else {}\n    });\n  }\n});\nTemplate.userProfile.onRendered(function () {\n  var templateInstance = Template.instance();\n  Meteor.call('hasPasswordSet', function (err, result) {\n    if (!err) {\n      templateInstance.hasPasswordSet.set(result);\n      templateInstance.hasPasswordSetReqCompleted.set(true);\n    }\n  }); //////// TODO: Remove below JQuery events after making meteor events working.\n\n  $('.noBtn, .cancel, .close').click(function () {\n    console.log(\"Event noBtn jquery\");\n    $.fancybox.close();\n  });\n  $('.requestRedgRefundConf').click(function () {\n    console.log(\"Event requestRedgRefundConf jquery\");\n    var ret = Meteor.call('registrationAmountRefund', [], function (error, result) {\n      if (error) {\n        console.log(error.error);\n        return;\n      }\n\n      if (result.status == 'AlreadyRequested') {}\n\n      $.fancybox.close();\n    });\n  });\n  $('.requestConfRefundConf').click(function () {\n    console.log(\"Event requestConfRefundConf jquery\");\n    var ele = this;\n    hideSaveBtn(ele);\n    var ret = Meteor.call('confirmationAmountRefund', [], function (error, result) {\n      if (error) {\n        console.log(error.error);\n        showSaveBtn(ele);\n        return;\n      }\n    });\n  });\n  $('.changeMobileConfirmation').click(function () {\n    console.log(\"Event changeMobileConfirmation jquery\");\n    var ele = this;\n    hideSaveBtn(ele);\n    var mobile = $('.changeMobileValue').val();\n    validatedMobile = LoginFormValidation.mobile(mobile);\n\n    if (validatedMobile !== true) {\n      $('.mobileValidationErrors').show().html(validatedMobile.reason);\n      showSaveBtn(ele);\n      return;\n    }\n\n    Meteor.call('updateMobile', mobile, function (error, result) {\n      if (error) {\n        console.log(error.error);\n        showSaveBtn(ele);\n        return;\n      }\n\n      $('.mobileValidationErrors').hide(); // Session.set('showMobileVerification',true)\n    });\n  });\n  $('.changeEmployerNameConfirmation').click(function () {// console.log(\"Event changeEmployerNameConfirmation jquery\");\n    // var ele = this;\n    // hideSaveBtn(ele)\n    // Meteor.call('updateEmployerName',[$('.changeEmployerNameValue').val()],function(error, result){\n    //\n    //   if(error){\n    //     console.log(error.error);\n    //     showSaveBtn(ele)\n    //     return;\n    //   }\n    //   if(result.status=='Success'){\n    //\n    //   }\n    // });\n  });\n  $('.mobileValidationErrors').hide();\n  $('.eyebtn').click(function () {\n    if ($(\".show-pwd\").hasClass(\"shown\")) {\n      $(\".show-pwd\").attr(\"type\", \"password\");\n      $(\".show-pwd\").removeClass(\"shown\");\n    } else {\n      $(\".show-pwd\").attr(\"type\", \"text\");\n      $(\".show-pwd\").addClass(\"shown\");\n    }\n  });\n  $(document).ready(function () {\n    //$('.change-click').click(function(){\n    //\n    //  });\n    $('.cancel-clk').click(function () {\n      hideSaveBtn(this);\n      $('.mobileValidationErrors').hide();\n    });\n    $('.change-click').click(function () {\n      showSaveBtn(this);\n    }); //$('.request-clk').click(function(){\n    //  $('.hideen-div').fadeOut();\n    //});\n\n    $('.sendEmailVerification').click(function () {\n      console.log('event sendEmailVerification');\n      $('.sendEmailVerification').text('Verification mail sent');\n      setTimeout(function () {\n        $('.sendEmailVerification').text('Send verification link');\n      }, 10000);\n    });\n  });\n});\nTemplate.fileUploadDlgTemplate.onCreated(function () {\n  this.sesCate = new ReactiveVar(false);\n  this.p1 = new ReactiveVar(false);\n  this.p2 = new ReactiveVar(false);\n  var ses = Session.get('showFileDlg');\n\n  if (ses) {\n    this.sesCate.set(ses.cate);\n\n    if (ses.cate) {\n      var p1 = '';\n      var p2 = '';\n\n      switch (ses.cate) {\n        case \"Resume\":\n          p1 = \"hasResume\";\n          p2 = \"resume\";\n          break;\n\n        case \"Work Reference\":\n          p1 = \"hasWorkRef\";\n          p2 = \"workRef\";\n          break;\n\n        case \"Landlord Reference\":\n          p1 = \"hasLandlordRef\";\n          p2 = \"landlordRef\";\n          break;\n\n        case \"Financial Reference\":\n          p1 = \"hasFinancialRef\";\n          p2 = \"financialRef\";\n          break;\n\n        case \"Government ID\":\n          p1 = \"hasGovtID\";\n          p2 = \"govtID\";\n          break;\n\n        case \"Passport\":\n          p1 = \"hasPassport\";\n          p2 = \"passport\";\n          break;\n\n        case \"PPS\":\n          p1 = \"hasPPS\";\n          p2 = \"PPS\";\n          break;\n      } // p1 = \"profile.references.\"+p1\n      // p2 = \"profile.references.\" + p2\n\n\n      this.p1.set(p1);\n      this.p2.set(p2);\n    }\n  }\n\n  this.step = new ReactiveVar(1);\n  this.sFileName = new ReactiveVar(false);\n  this.uploading = new ReactiveVar(false);\n  this.fileObj = new ReactiveVar({});\n  this.fileObjPrevious = new ReactiveVar(false);\n});\nTemplate.fileUploadDlgTemplate.helpers({\n  dlgTitle: function () {\n    var title = '';\n    var p1 = Template.instance().p1.get();\n    var p2 = Template.instance().p2.get();\n    var uploading = Template.instance().uploading.get();\n    var user = Meteor.user();\n    if (user.profile.references[p1]) var existingFile = true;\n\n    if (existingFile) {\n      title = 'Update ';\n      if (!Template.instance().fileObjPrevious.get()) // only if its not yet set . Else other function will set it.\n        Template.instance().fileObjPrevious.set(user.profile.references[p2]);\n      console.log('fileObjPrevious');\n      console.log(Template.instance().fileObjPrevious.get());\n    } else if (uploading) title = 'Uploading ';else title = 'Upload ';\n\n    var sesCate = Template.instance().sesCate.get();\n    if (sesCate) title += sesCate;else title += 'References';\n    return title;\n  },\n  existingFile: function () {\n    var p2 = Template.instance().p2.get();\n    var user = Meteor.user();\n    if (user.profile.references[p2]) return user.profile.references[p2];\n    return false;\n  },\n  isStep: function (step) {\n    if (step == Template.instance().step.get()) return true;else return false;\n  },\n  isNotStep: function (step) {\n    if (step != Template.instance().step.get()) return true;else return false;\n  },\n  uploading: function () {\n    return Template.instance().uploading.get();\n  },\n  validFileExtensions: function () {\n    return _validFileExtensions;\n  }\n});\nTemplate.fileUploadDlgTemplate.events({\n  'click .showCamera': function (event, template) {\n    event.preventDefault();\n    template.$('#cropImage').cropper(\"destroy\");\n    template.$('#cropImage').attr(\"src\", '').hide();\n    template.$('#finalImage').attr(\"src\", '').hide();\n    $('.step2, #uploadImagePreviewArea').show();\n    $('.step3').hide();\n    var cameraOptions = {\n      width: 800,\n      height: 600\n    };\n    MeteorCamera.getPicture(cameraOptions, function (error, data) {\n      if (!error) {\n        template.$('#cropImage').attr('src', data);\n        template.step.set(2);\n        $('.step2').show();\n        $('.step3').hide();\n        template.sFileName.set('cameraPhoto.jpg'); //Now start the crop\n\n        if (data) {\n          $('.step1').hide();\n          template.$(\"#cropImage\").cropper({\n            aspectRatio: 4 / 3\n          });\n        }\n      }\n    });\n  },\n  'click .getCroppedImage': function (event, template) {\n    template.step.set(3);\n    $('.step2').hide();\n    $('.step3').show(); //Ratio 4:3 => 700 * 525\n\n    var finalImgData = template.$('#cropImage').cropper(\"getCroppedCanvas\", {\n      width: 700,\n      height: 525\n    }).toDataURL();\n    template.$('#finalImage').attr('src', finalImgData).show();\n    var head = 'data:image/png;base64,';\n    var imgFileSize = Math.round((finalImgData.length - head.length) * 3 / 4);\n    var sizeKB = imgFileSize / 1000;\n    var sizeMB = imgFileSize / 1000000;\n    console.log(\"imgFileSize\", imgFileSize, \"size\", sizeMB, \"MB\", \"-----\", sizeKB, \"KB\");\n    var mimeType = 'image/jpeg';\n    var imgQuality = 1;\n    if (sizeKB > 200) var imgQuality = 0.9;\n    if (sizeKB > 300) var imgQuality = 0.8;\n    if (sizeKB > 400) var imgQuality = 0.7;\n    const cate = template.sesCate.get();\n    var sFileName = template.sFileName.get();\n    if (!sFileName) sFileName = 'cameraPhoto.jpg'; // const inst = Template.instance();\n\n    var finalImgData = template.$('#cropImage').cropper(\"getCroppedCanvas\", {\n      width: 700,\n      height: 525\n    }).toBlob(function (blob) {\n      template.uploading.set(true);\n      template.fileObj.set({}); //Reset old status as this might be 2nd upload.\n\n      var ret = S3.upload({\n        file: new File([blob], sFileName),\n        path: \"profileFiles\"\n      }, function (e, r) {\n        if (e) {\n          $('.step1').show();\n          var tmp = Session.get(\"showErrorDlg\");\n          if (!tmp) tmp = [];\n          tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n\n          try {\n            if (e.error) tmp.push(e.error);\n          } catch (cat) {}\n\n          Session.set(\"showErrorDlg\", tmp);\n          throw new Meteor.Error('Upload failed ', e);\n          template.uploading.set(false);\n          return;\n        }\n\n        console.log(r);\n        template.fileObj.set(r);\n        var tmp = {\n          name: r.file.original_name,\n          relative_url: r.relative_url,\n          url: r.secure_url\n        };\n        console.log(tmp);\n        var fileObjPrevious = template.fileObjPrevious.get(); //move here due to bug\n\n        Meteor.call('updateReferenceFile', [cate, tmp], (err, res) => {\n          template.uploading.set(false); //Make it false even if it failed. Users should know that its not uploading anymore.\n\n          $('.step2').hide();\n          $('.step1').show();\n          $('.step3').show(); //Because its an image from cropped area\n\n          if (err) {\n            console.log(err);\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n\n            try {\n              if (err.error) tmp.push(err.error);\n            } catch (cat) {}\n\n            Session.set(\"showErrorDlg\", tmp); //If updating in DB failed. Then delete in Amazon as well.\n\n            var fileObj = template.fileObj.get();\n            S3.delete(fileObj.relative_url, function (error, result) {});\n          } else {\n            //If upload is success, then delete the old file and re-set it.\n            // debugger;\n            // var fileObjPrevious = template.fileObjPrevious.get()//Don' get it here, as parallely another code is changing this val->lead to bug\n            if (fileObjPrevious) {\n              //only if it exists.\n              S3.delete(fileObjPrevious.relative_url, function (error, result) {});\n              template.fileObjPrevious.set(template.fileObj.get());\n            }\n          }\n        });\n      });\n    }, mimeType, imgQuality);\n  },\n  'click .zoomInBtn': function (event, template) {\n    template.$('#cropImage').cropper(\"zoom\", 0.1);\n  },\n  'click .zoomOutBtn': function (event, template) {\n    template.$('#cropImage').cropper(\"zoom\", -0.1);\n  },\n  'click .rotateLeftBtn': function (event, template) {\n    template.$('#cropImage').cropper(\"rotate\", -90);\n  },\n  'click .rotateRightBtn': function (event, template) {\n    template.$('#cropImage').cropper(\"rotate\", 90);\n  },\n  'click .resetBtn': function (event, template) {\n    template.$('#cropImage').cropper(\"reset\");\n  },\n  'click .goToStep1': function (event, template) {\n    $('.step1').show();\n    template.$('#cropImage').cropper(\"destroy\");\n    template.$('#cropImage').attr(\"src\", '').hide();\n    template.$('#finalImage').attr(\"src\", '').hide();\n    $('.step2').hide();\n    $('.step3').hide();\n  },\n  'click .closeDlg': function (event, template) {\n    var ses = {\n      show: false,\n      cate: \"\"\n    };\n    Session.set('showFileDlg', ses); // Has the overall info and basic required info.\n\n    Session.set('showFileTemplate', false);\n  },\n  'change .uploadBtn': function (event, template) {\n    var files = event.target.files;\n    if (!files) return;\n    if (files.length == 0) return;\n    Template.instance().step.set(2);\n    $('.step2, #uploadImagePreviewArea').show();\n    template.$('#cropImage').cropper(\"destroy\");\n    template.$('#cropImage').attr(\"src\", '').hide();\n    template.$('#finalImage').attr(\"src\", '').hide();\n    $('.step3').hide();\n\n    if (!filevalidation(files)) {\n      var tmp = Session.get(\"showErrorDlg\");\n      if (!tmp) tmp = [];\n      var msg = 'Upload rejected. Please upload only document or image files. Allowed extensions are ' + _validFileExtensions.join(', ') + '.';\n      tmp.push(msg);\n      Session.set(\"showErrorDlg\", tmp);\n      throw new Meteor.Error(\"Upload rejected. \");\n      return;\n    }\n\n    const cate = template.sesCate.get();\n    Template.instance().uploading.set(true); // const inst = Template.instance();\n\n    template.fileObj.set({}); //Reset old status as this might be 2nd upload.\n\n    if (files.length == 1) {\n      var target = event.target;\n      var sFileName = files[0].name;\n      template.sFileName.set(sFileName); // $(\"#uploadImagePreviewArea\").html(\"\");\n\n      var regex = /^([a-zA-Z0-9\\s_\\\\.\\-:])+(.jpg|.jpeg|.gif|.png|.bmp)$/;\n\n      if (regex.test($(target).val().toLowerCase())) {\n        if (isIE() && isIE() <= 9) {\n          $(\"#uploadImagePreviewArea\").show();\n          $(\"#uploadImagePreviewArea\")[0].filters.item(\"DXImageTransform.Microsoft.AlphaImageLoader\").src = $(target).val();\n        } else {\n          if (typeof FileReader != \"undefined\") {\n            template.uploading.set(false);\n            $(\"#uploadImagePreviewArea, #cropImage\").show(); // $(\"#uploadImagePreviewArea\").append('<img class=\"img-responsive\" id=\"cropImage\"/>');\n\n            var reader = new FileReader();\n\n            reader.onload = function (e) {\n              $(\"#cropImage\").attr(\"src\", e.target.result); //File name is set few lines above this\n              //Now start the crop\n\n              var imgData = $(\"#cropImage\").attr('src');\n\n              if (imgData) {\n                $('.step1').hide();\n                template.$(\"#cropImage\").cropper({\n                  aspectRatio: 4 / 3\n                });\n              }\n            };\n\n            reader.readAsDataURL($(target)[0].files[0]);\n            return; //If previewer is available then let the cropper handle the upload.\n          } else {\n            console.log(\"This browser does not support FileReader.\");\n          }\n        }\n      } else {\n        console.log(\"File upload: Not an image file to show preview.\");\n      }\n    } // console.log('Not an image, so proceeding with traditional upload')\n\n\n    var ret = S3.upload({\n      files: files,\n      path: \"profileFiles\"\n    }, function (e, r) {\n      if (e) {\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n\n        try {\n          if (e.error) tmp.push(e.error);\n        } catch (cat) {}\n\n        Session.set(\"showErrorDlg\", tmp);\n        throw new Meteor.Error('Upload failed ', e);\n        template.uploading.set(false);\n        return;\n      }\n\n      console.log(r);\n      template.fileObj.set(r);\n      var tmp = {\n        name: r.file.original_name,\n        relative_url: r.relative_url,\n        url: r.secure_url\n      };\n      console.log(tmp);\n      var fileObjPrevious = template.fileObjPrevious.get(); //move here due to bug\n\n      Meteor.call('updateReferenceFile', [cate, tmp], (err, res) => {\n        template.uploading.set(false); //Make it false even if it failed. Users should know that its not uploading anymore.\n\n        $('.step2').hide();\n        $('.step3').hide(); //Because its not an image.\n\n        if (err) {\n          console.log(err);\n          var tmp = Session.get(\"showErrorDlg\");\n          if (!tmp) tmp = [];\n          tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n\n          try {\n            if (err.error) tmp.push(err.error);\n          } catch (cat) {}\n\n          Session.set(\"showErrorDlg\", tmp); //If updating in DB failed. Then delete in Amazon as well.\n\n          var fileObj = template.fileObj.get();\n          S3.delete(fileObj.relative_url, function (error, result) {});\n        } else {\n          //If upload is success, then delete the old file and re-set it.\n          // debugger;\n          // var fileObjPrevious = template.fileObjPrevious.get()//Don' get it here, as parallely another code is changing this val->lead to bug\n          if (fileObjPrevious) {\n            //only if it exists.\n            S3.delete(fileObjPrevious.relative_url, function (error, result) {});\n            template.fileObjPrevious.set(template.fileObj.get());\n          }\n        }\n      });\n    }); // for (var i = 0, ln = files.length; i < ln; i++) {\n    //     propertyImagesCollection.insert(files[i], function (err, fileObj) {\n    //         // Inserted new doc with ID fileObj._id, and kicked off the data upload using HTTP\n    //         console.log(fileObj);\n    //         var cursor = propertyImagesCollection.find(fileObj._id);\n    //\n    //         var liveQuery = cursor.observe({\n    //             changed: function(newImage, oldImage) {\n    //\n    //                 console.log(\"Inside live query \");\n    //                 console.log(newImage);\n    //                 if (newImage.isUploaded()) {\n    //                     liveQuery.stop();\n    //\n    //                     // Call your onUploaded callback here...\n    //                 }\n    //             }\n    //         });\n    //     });\n    // }\n  }\n});\nTemplate.fileUploadDlgTemplate.onRendered(function () {\n  $(\"#uploadImagePreviewArea, #cropImage, #finalImage\").hide();\n  $('#cropImage, #finalImage').attr('src', '');\n});\nTemplate.fileUploadArea.onCreated(function () {\n  this.uploading = new ReactiveVar(false); // this.fileObj = new ReactiveVar( {} );\n});\nTemplate.fileUploadArea.helpers({\n  uploading: function (isMyBidsPage) {\n    return Template.instance().uploading.get();\n  },\n  validFileExtensions: function () {\n    return _validFileExtensions;\n  }\n});\nTemplate.fileUploadArea.events({\n  'click .showUploadDlg': function (event, template) {\n    var ses = {\n      show: true,\n      cate: this.title\n    };\n    Session.set('showFileDlg', ses);\n    return false;\n  } // 'change .uploadBtn': function(event, template) {\n  //     var files = event.target.files;\n  //\n  //     if(!filevalidation(files)){\n  //         var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n  //         var msg = 'Upload rejected. Please upload only document or image files. Allowed extensions are '+_validFileExtensions.join(', ')+'.';\n  //         tmp.push(msg);\n  //         Session.set(\"showErrorDlg\",tmp)\n  //\n  //         throw new Meteor.Error(\"Upload rejected. \");\n  //         return;\n  //     }\n  //\n  //     const cate = event.target.getAttribute('cate');\n  //     Template.instance().uploading.set(true);\n  //     const inst = Template.instance();\n  //     inst.fileObj.set({});//Reset old status as this might be 2nd upload.\n  //     var ret = S3.upload({\n  //         files:files,\n  //         path:\"profileFiles\"\n  //     },function(e,r){\n  //         if(e){\n  //             var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n  //             tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n  //             try{if(e.error)tmp.push(e.error);}catch (cat){}\n  //             Session.set(\"showErrorDlg\",tmp)\n  //             throw new Meteor.Error('Upload failed ', e);return;\n  //         }\n  //         console.log(r);\n  //\n  //         inst.fileObj.set(r);\n  //\n  //         var tmp = {\n  //             name: r.file.original_name,\n  //             relative_url: r.relative_url,\n  //             url: r.secure_url\n  //         }\n  //\n  //         console.log(tmp);\n  //         Meteor.call('updateReferenceFile', [cate, tmp], (err, res) => {\n  //             inst.uploading.set(false);//Make it false even if it failed. Users should know that its not uploading anymore.\n  //             if (err) {\n  //                 console.log(err);\n  //\n  //                 var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n  //                 tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n  //                 try{if(err.error)tmp.push(err.error);}catch (cat){}\n  //                 Session.set(\"showErrorDlg\",tmp)\n  //\n  //                 //If updating in DB failed. Then delete in Amazon as well.\n  //                 var fileObj = inst.fileObj.get();\n  //                 S3.delete(fileObj.relative_url,function(error, result){})\n  //             } else {\n  //\n  //             }\n  //\n  //         });\n  //\n  //\n  //     });\n  //     // for (var i = 0, ln = files.length; i < ln; i++) {\n  //     //     propertyImagesCollection.insert(files[i], function (err, fileObj) {\n  //     //         // Inserted new doc with ID fileObj._id, and kicked off the data upload using HTTP\n  //     //         console.log(fileObj);\n  //     //         var cursor = propertyImagesCollection.find(fileObj._id);\n  //     //\n  //     //         var liveQuery = cursor.observe({\n  //     //             changed: function(newImage, oldImage) {\n  //     //\n  //     //                 console.log(\"Inside live query \");\n  //     //                 console.log(newImage);\n  //     //                 if (newImage.isUploaded()) {\n  //     //                     liveQuery.stop();\n  //     //\n  //     //                     // Call your onUploaded callback here...\n  //     //                 }\n  //     //             }\n  //     //         });\n  //     //     });\n  //     // }\n  // },\n\n});\n\nfunction showSaveBtn(ele) {\n  $(ele).parents('div.inp-hold').find('.overlay-text').fadeOut();\n  $(ele).fadeOut();\n  $(ele).parent('div.inp-hold').find('.save-btn').addClass('show-save');\n  $(ele).parent('div.inp-hold').find('div.cancel-div').css('display', 'block');\n  $(ele).parent('div.inp-hold').find('input').focus();\n}\n\nfunction hideSaveBtn(ele) {\n  $(ele).parents('div.inp-hold').find('.save-btn').removeClass('show-save');\n  $(ele).parents('div.inp-hold').find('div.cancel-div').css('display', 'none');\n  $(ele).parents('div.inp-hold').find('.change-click').fadeIn();\n  $(ele).parents('div.inp-hold').find('.overlay-text').fadeIn();\n}\n\nTemplate.loginFormSetPassword.onCreated(() => {\n  let template = Template.instance();\n  template.formMessages = new ReactiveVar({});\n  template.isLoading = new ReactiveVar(false);\n});\nTemplate.loginFormSetPassword.helpers(LoginFormSharedHelpers);\nTemplate.loginFormSetPassword.events({\n  /**\n   * Submit form for password update\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"submit form\": function (event, template) {\n    event.preventDefault();\n    event.stopPropagation();\n    template.$(\"button[type=submit]\").attr(\"disabled\", true);\n    let password1Input = template.$(\".login-input--password1\");\n    let password2Input = template.$(\".login-input--password2\");\n    let password1 = password1Input.val().trim();\n    let password2 = password2Input.val().trim();\n    let templateInstance = Template.instance();\n    var errors = [];\n\n    if (password1 != password2) {\n      errors.push({\n        error: \"INVALID_PASSWORD\",\n        reason: \"Passwords doesn't match\"\n      }); // errors.password2 = [\n      //     {\n      //         error: \"INVALID_PASSWORD\",\n      //         reason: \"Passwords doesn't match\"\n      //     }\n      // ]\n      // templateInstance.$(\"button[type=submit]\").attr(\"disabled\",false);//We need it here because line 560 errors.password2 = validatedPassword2; will over write this message if we don't return here. Also array merge isn't an option as our UI is not ready to show multiple messages. It can only take 1 error at a time.\n      // templateInstance.formMessages.set({\n      //     errors: errors\n      // });\n      // return;\n    } // We only check if it exists, just in case we\"ve change the password strength and want the\n    // user to have an opportunity to update to a stronger password\n    // let validatedPassword1 = LoginFormValidation.password(password1);//Not needed as we are doing equal check\n\n\n    let validatedPassword2 = LoginFormValidation.password(password2, {\n      validationLevel: \"length\"\n    });\n    templateInstance.formMessages.set({});\n    templateInstance.isLoading.set(true); // if (validatedPassword1 !== true) {\n    //     errors.push(validatedPassword1);\n    // }\n\n    if (validatedPassword2 !== true) {\n      errors.push(validatedPassword2);\n    }\n\n    if (errors.length) {\n      templateInstance.$(\"button[type=submit]\").attr(\"disabled\", false);\n      templateInstance.formMessages.set({\n        errors: errors\n      }); // prevent signup\n\n      templateInstance.isLoading.set(false);\n      return;\n    }\n\n    Meteor.call('setUserPwd', [Meteor.userId(), password2], function (error, result) {\n      // templateInstance.isLoading.set(false);\n      if (error) {\n        templateInstance.$(\"button[type=submit]\").attr(\"disabled\", false); // Show some error message\n\n        templateInstance.formMessages.set({\n          errors: [error]\n        });\n      } else {\n        Session.set('localHasPasswordSet', true);\n        templateInstance.$(\".login-input--password1, .login-input--password2\").val('');\n        $('#setpass-dlg .changePwdAlertMsgs p, #setpass-dlg .help-block p').html(''); // // Close dropdown or navigate to page\n\n        templateInstance.formMessages.set({\n          info: [{\n            reason: 'Password successfully set'\n          }]\n        });\n        if ($) if ($.fancybox) {\n          $.fancybox.close();\n          templateInstance.formMessages.set({});\n        }\n      }\n    });\n  }\n});\nTemplate.loginFormChangePassword.onCreated(() => {\n  let template = Template.instance();\n  template.formMessages = new ReactiveVar({});\n  template.isLoading = new ReactiveVar(false);\n});\nTemplate.loginFormChangePassword.helpers(LoginFormSharedHelpers);\nTemplate.loginFormChangePassword.events({\n  /**\n   * Submit form for password update\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"submit form\": function (event, template) {\n    event.preventDefault();\n    event.stopPropagation();\n    template.$(\"button[type=submit]\").attr(\"disabled\", true);\n    let oldPasswordInput = template.$(\".login-input--oldPassword\");\n    let passwordInput = template.$(\".login-input--password\");\n    let oldPassword = oldPasswordInput.val().trim();\n    let password = passwordInput.val().trim(); // We only check if it exists, just incase we\"ve change the password strength and want the\n    // user to have an oppurtinity to update to a stronger password\n\n    let validatedOldPassword = LoginFormValidation.password(oldPassword, {\n      validationLevel: \"exists\"\n    });\n    let validatedPassword = LoginFormValidation.password(password, {\n      validationLevel: \"length\"\n    });\n    let templateInstance = Template.instance();\n    templateInstance.isLoading.set(true);\n    var errors = [];\n    templateInstance.formMessages.set({});\n    templateInstance.isLoading.set(true);\n\n    if (oldPassword == password) {\n      errors.push({\n        error: \"INVALID_PASSWORD\",\n        reason: \"New password cannot be same as old password.\"\n      }); // errors.password2 = [\n      //     {\n      //         error: \"INVALID_PASSWORD\",\n      //         reason: \"Passwords doesn't match\"\n      //     }\n      // ]\n      // templateInstance.$(\"button[type=submit]\").attr(\"disabled\",false);//We need it here because line 560 errors.password2 = validatedPassword2; will over write this message if we don't return here. Also array merge isn't an option as our UI is not ready to show multiple messages. It can only take 1 error at a time.\n      // templateInstance.formMessages.set({\n      //     errors: errors\n      // });\n      // return;\n    }\n\n    if (validatedOldPassword !== true) {\n      errors.push(validatedOldPassword);\n    }\n\n    if (validatedPassword !== true) {\n      errors.push(validatedPassword);\n    }\n\n    if (errors.length) {\n      templateInstance.$(\"button[type=submit]\").attr(\"disabled\", false);\n      templateInstance.formMessages.set({\n        errors: errors\n      }); // prevent signup\n\n      templateInstance.isLoading.set(false);\n      return;\n    }\n\n    Accounts.changePassword(oldPassword, password, error => {\n      //console.log('Here in callback');\n      //templateInstance.$(\"button[type=submit]\").attr(\"disabled\",false);\n      templateInstance.isLoading.set(false);\n\n      if (error) {\n        templateInstance.$(\"button[type=submit]\").attr(\"disabled\", false); // Show some error message\n\n        templateInstance.formMessages.set({\n          errors: [error]\n        });\n      } else {\n        templateInstance.$(\".login-input--oldPassword, .login-input--password\").val('');\n        $('#changepass-dlg .changePwdAlertMsgs p, #changepass-dlg .help-block p').html(''); //$('.login-input--password, .login-input--oldPassword').val('');\n        // // Close dropdown or navigate to page\n\n        templateInstance.formMessages.set({\n          info: [{\n            reason: 'Password successfully changed'\n          }]\n        });\n        if ($) if ($.fancybox) {\n          $.fancybox.close();\n          templateInstance.formMessages.set({});\n        }\n      }\n    });\n  }\n});\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction isIE() {\n  var myNav = navigator.userAgent.toLowerCase();\n  return myNav.indexOf('msie') != -1 ? parseInt(myNav.split('msie')[1]) : false;\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"propertyApplications.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/templates/propertyApplications.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./pagination.html\");\nmodule.link(\"./propertyApplications.html\");\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\n\n// SimpleSchema.extendOptions(['autoform']);\n// window.deactivateInProgress = '';\nfunction setFilters() {\n  var userFilters = Session.get('userFilters');\n\n  try {\n    if (userFilters.check) {\n      for (var k = 0; k < userFilters.check.length; k++) {\n        if (userFilters.check[k].val == 'all') continue;\n        if (userFilters.check[k].val == 'clearall') continue;\n\n        if (userFilters.check[k].enabled) {\n          $(\".dropdown-menu input[value='\" + userFilters.check[k].val + \"']\").prop('checked', true);\n        }\n\n        dropdownCheckbox();\n      }\n    }\n\n    if (userFilters.s1) {\n      var offerRangeVal = document.getElementById('offerRangeInput');\n      offerRangeVal.noUiSlider.set(userFilters.s1.range);\n    }\n  } catch (e) {}\n\n  dropdownCheckbox();\n}\n\nfunction applyFilters() {\n  // console.log('event applyFilters jquery')\n  var slider = document.getElementById('offerRangeInput');\n  var offerRangeVal = slider.noUiSlider.get();\n  var userFilters = Session.get('userFilters');\n  userFilters.s1.range = offerRangeVal;\n  Session.set('userFilters', userFilters);\n}\n\nfunction applyFilterValues() {\n  // console.log('event applyFiltersValues jquery')\n  var slider = document.getElementById('offerRangeInput');\n  var offerRangeVal = slider.noUiSlider.get();\n  $('.filterS1l').html(numDifferentiation(offerRangeVal[0]));\n  $('.filterS1h').html(numDifferentiation(offerRangeVal[1])); // var userFilters = Session.get('userFilters');\n  // userFilters.s1.range = offerRangeVal;\n  // Session.set('userFilters',userFilters);\n  // $('.filterS2l').html(numDifferentiation(priceRange[0] ))\n  // $('.filterS2h').html(numDifferentiation(priceRange[1] ))\n}\n\nfunction numDifferentiation(val) {\n  if (isNaN(val)) return 0;\n  val = parseInt(val);\n  if (val >= 1000000000) val = (val / 1000000000).toFixed(0) + ' Billion';else if (val >= 1000000) val = (val / 1000000).toFixed(0) + ' Million';else if (val >= 1000) val = val.toFixed(0);else val = val.toFixed(0);\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction startUISlider(data) {\n  var slider = document.getElementById('offerRangeInput');\n  noUiSlider.create(slider, {\n    start: data.s1.start,\n    connect: true,\n    step: 1,\n    range: {\n      'min': data.s1.range[0],\n      'max': data.s1.range[1]\n    },\n    format: wNumb({\n      decimals: 0\n    })\n  });\n  slider.noUiSlider.on('update', function () {\n    applyFilterValues();\n  });\n  slider.noUiSlider.on('change', function () {\n    applyFilters();\n  });\n  setTimeout(function () {\n    setFilters();\n  }, 400);\n}\n\nfunction startFilters() {\n  try {\n    var gDefaultFilters = Session.get('gDefaultFilters');\n    var propertyData = Session.get('propertyData');\n\n    if (propertyData.auctionId) {\n      var auction = Collections.Auctions.findOne(propertyData.auctionId);\n      var min = auction.price * 0.7;\n      var max = auction.price * 1.5;\n      gDefaultFilters.s1 = {\n        \"start\": [min, max],\n        \"range\": [min, max]\n      };\n      startUISlider({\n        \"s1\": gDefaultFilters.s1\n      });\n      $('.filterS1l').html(numDifferentiation(min));\n      $('.filterS1h').html(numDifferentiation(max));\n    }\n\n    var userFilters = Session.get('userFilters');\n    var fetchPrevFilters = true;\n    var userFiltersAuctionId = Session.get('userFiltersAuctionId');\n    if (!userFiltersAuctionId) fetchPrevFilters = false;\n    if (userFiltersAuctionId != propertyData.auctionId) fetchPrevFilters = false;\n    if (!userFilters) fetchPrevFilters = false;\n    if (fetchPrevFilters) Session.set('userFilters', userFilters);else Session.set('userFilters', gDefaultFilters);\n    Session.set('userFiltersAuctionId', propertyData.auctionId);\n    dropdownCheckbox();\n    setTimeout(function () {\n      dropdownCheckbox();\n    }, 100);\n    setTimeout(function () {\n      dropdownCheckbox();\n    }, 1000);\n  } catch (e) {\n    // console.log('Catch of startFilters')\n    console.log(e);\n  }\n}\n\nfunction getPaginationData2D(totalResultsCount, resultsPerPage, dimensionNumber) {\n  // Page numbers are 2 dimensional, making it store page numbers of 2 pagination elements on the page.\n  //dimensionNumber tells you on which dimension is this method working on ; should start with 0, 1, 2 like an array numbers.\n  var currentPageNo = FlowRouter.current().params.pageno;\n  let originalPgSplit = null,\n      validOriginalPgSplit = false;\n\n  if (currentPageNo) {\n    originalPgSplit = currentPageNo.toString().split('-');\n\n    if (originalPgSplit.length == 2) {\n      if (!isNaN(originalPgSplit[dimensionNumber])) {\n        currentPageNo = parseInt(originalPgSplit[dimensionNumber]);\n        validOriginalPgSplit = true;\n      }\n    }\n  }\n\n  if (!validOriginalPgSplit) {\n    //invalid originalPgSplit; reset it\n    originalPgSplit = [1, 1];\n  }\n\n  if (!currentPageNo) {\n    currentPageNo = 1;\n  }\n\n  var pages = [],\n      prevPage = {},\n      nextPage = {};\n  var pgMin = currentPageNo - 4,\n      pgMax = currentPageNo + 5,\n      maxPages = Math.ceil(totalResultsCount / resultsPerPage);\n  if (pgMin < 1) pgMin = 1;\n  if (pgMax < 1) pgMax = 1;\n  if (maxPages < 1) maxPages = 1;\n  if (pgMin > maxPages) currentPageNo = maxPages;\n  let tmp = {};\n  var href = '';\n  var cRoute = FlowRouter.current();\n\n  for (var i = pgMin; i <= maxPages; i++) {\n    cRoute.params['pageno'] = dimensionNumber == 0 ? i + '-' + originalPgSplit[1] : originalPgSplit[0] + '-' + i;\n    href = FlowRouter.url(cRoute.route.name, cRoute.params, cRoute.queryParams);\n    tmp = {\n      \"href\": href,\n      \"text\": i\n    };\n\n    if (i == currentPageNo) {\n      tmp['href'] = 'javascript:void(0);';\n      tmp['current'] = true;\n    }\n\n    pages.push(tmp);\n  }\n\n  var prevPageNo = currentPageNo - 1,\n      nextPageNo = currentPageNo + 1;\n\n  if (prevPageNo < 1) {\n    prevPage['href'] = 'javascript:void(0)';\n    prevPage['text'] = 'Previous';\n    prevPage['disabled'] = 'disabled';\n  } else {\n    cRoute.params['pageno'] = dimensionNumber == 0 ? prevPageNo + '-' + originalPgSplit[1] : originalPgSplit[0] + '-' + prevPageNo;\n    prevPage['href'] = FlowRouter.url(cRoute.route.name, cRoute.params, cRoute.queryParams);\n    prevPage['text'] = 'Previous';\n  }\n\n  if (nextPageNo > maxPages) nextPageNo = maxPages;\n\n  if (nextPageNo == currentPageNo) {\n    nextPage['href'] = 'javascript:void(0)';\n    nextPage['text'] = 'Next';\n    nextPage['disabled'] = 'disabled';\n  } else {\n    cRoute.params['pageno'] = dimensionNumber == 0 ? nextPageNo + '-' + originalPgSplit[1] : originalPgSplit[0] + '-' + nextPageNo;\n    nextPage['href'] = FlowRouter.url(cRoute.route.name, cRoute.params, cRoute.queryParams);\n    nextPage['text'] = 'Next';\n  }\n\n  return {\n    \"prevPage\": prevPage,\n    \"pages\": pages,\n    \"nextPage\": nextPage\n  };\n}\n\nfunction numFormat(x) {\n  //var x=12345652457.557;\n  //console.log(x)\n  if (!x) return x;\n  x = x.toString();\n  var afterPoint = '';\n  if (x.indexOf('.') > 0) afterPoint = x.substring(x.indexOf('.'), x.length);\n  afterPoint = afterPoint.substr(0, 3);\n  x = Math.floor(x);\n  x = x.toString();\n  var lastThree = x.substring(x.length - 3);\n  var otherNumbers = x.substring(0, x.length - 3);\n  if (otherNumbers != '') lastThree = ',' + lastThree;\n  var res = otherNumbers.replace(/\\B(?=(\\d{2})+(?!\\d))/g, \",\") + lastThree + afterPoint;\n  return res;\n}\n\nTemplate.propertyApplications.onCreated(function () {\n  this.deactivateInProgress = new ReactiveVar(false);\n  Session.set('propertyData', false);\n  var gDefaultFilters = {};\n  gDefaultFilters.check = [{\n    val: 'empName',\n    label: 'Employer name'\n  }, {\n    val: 'salary',\n    label: 'Salary'\n  }, {\n    val: 'workRef',\n    label: 'Work Reference'\n  }, {\n    val: 'passport',\n    label: 'Passport'\n  }, {\n    val: 'pps',\n    label: 'PPS'\n  }, {\n    val: 'landlordRef',\n    label: 'Landlord Reference'\n  }, {\n    val: 'financialRef',\n    label: 'Financial Reference'\n  }, {\n    val: 'govtID',\n    label: 'Govt. ID'\n  }, {\n    val: 'resume',\n    label: 'Resume'\n  }];\n  gDefaultFilters.s1 = {\n    \"start\": [0, 1000],\n    \"range\": [0, 1000]\n  };\n  Session.set('gDefaultFilters', gDefaultFilters);\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.autorun(function () {\n    var pageno = FlowRouter.getParam('pageno');\n    var PAresperpage = 20;\n    var EEresperpage = 100;\n    instance.subscribe('Config');\n    var id = FlowRouter.getParam('id');\n\n    if (id) {\n      instance.subscribe(\"PropertyApplications\", {\n        viewName: 'PropertyApplications.view',\n        pageno: pageno,\n        PAresperpage: PAresperpage,\n        EEresperpage: EEresperpage,\n        id: id\n      });\n      instance.subscribe(\"total-PropertyApplications\", {\n        viewName: 'PropertyApplications.view',\n        pageno: pageno,\n        PAresperpage: PAresperpage,\n        EEresperpage: EEresperpage,\n        id: id\n      });\n      instance.subscribe(\"total-EmailEnquiries\", {\n        viewName: 'PropertyApplications.view',\n        pageno: pageno,\n        PAresperpage: PAresperpage,\n        EEresperpage: EEresperpage,\n        id: id\n      });\n    }\n\n    instance.subscribe('userData');\n\n    if (instance.subscriptionsReady()) {\n      instance.isSubsLoaded.set(true);\n    }\n  }); // var userFilters = Session.get('userFilters');\n  // if(!userFilters)Session.set('gDefaultFilters',gDefaultFilters);\n});\nTemplate.propertyApplications.helpers({\n  isSubsLoaded: function () {\n    return Template.instance().subscriptionsReady();\n  },\n  userLoggedIn: function () {\n    if (Meteor.user()) return true;\n    return false;\n  },\n  avgOffer: function () {\n    var tmp = Collections.PA_AvgOffer.find().fetch();\n\n    if (tmp.length) {\n      var offer = tmp[0]['avgOffer'];\n      if (offer < 1) return 0;\n      return parseInt(offer);\n    } else return false;\n  },\n  dataFull: function () {\n    var propertyData = Session.get('propertyData');\n\n    try {\n      var selector = {\n        auctionId: propertyData.auctionId,\n        isArchived: false\n      }; // var totalResultsCount = Collections.Bids.find(selector).count();\n\n      var totalResultsCount = Counts.get(\"total-PropertyApplications\");\n      clearMeta();\n\n      try {\n        var title = '';\n        if (totalResultsCount > 1) title = totalResultsCount + ' applications';else if (totalResultsCount > 1) title = totalResultsCount + ' applications';else title = 'Applications';\n        title += ' for ' + propertyData.address.address + ', ' + propertyData.address.area;\n        if (propertyData.address.county) title += ', ' + propertyData.address.county;\n        DocHead.setTitle(titleCase(title) + ' | SpotMyCrib Admin');\n        DocHead.addMeta({\n          name: \"description\",\n          content: \"View applications for property \" + propertyData.type + \", choose a winning tenant, see their social profiles and much more.\"\n        });\n      } catch (err) {\n        DocHead.setTitle(' Property not found | SpotMyCrib Admin');\n        DocHead.addMeta({\n          name: \"description\",\n          content: \"\"\n        });\n      }\n\n      return {\n        totalResultsCount: totalResultsCount\n      };\n    } catch (err) {}\n  },\n  dataChosen: function () {\n    var propertyData = Session.get('propertyData');\n\n    if (!propertyData) {\n      console.log(\"Empty project data\");\n      return false;\n    }\n\n    try {\n      var selector = {\n        auctionId: propertyData.auctionId,\n        isArchived: false,\n        chosen: true\n      };\n      globlaAuctionId1 = propertyData.auctionId;\n      globalAuctionData1 = propertyData.auction;\n      var totalChosenCount = Collections.Bids.find(selector).count(); /// don't use the blow code, it doesn't have pagination.\n      // var totalChosenCount = Counts.get(\"total-PropertyApplications\");\n\n      var retChosen = Collections.Bids.find(selector, {\n        transform: function (doc) {\n          doc.auction = Collections.Auctions.findOne({\n            _id: doc.auctionId\n          }); // if (doc.auctionId != globlaAuctionId1 || !globalAuctionData1._id) {\n          //     doc.auction = Collections.Auctions.findOne({\n          //         _id: doc.auctionId\n          //     });\n          // } else {\n          //     doc.auction = globalAuctionData1;\n          // }\n          // doc.user = Meteor.users.findOne({\n          //     _id: doc.userId\n          // });\n\n          return doc;\n        },\n        limit: 100,\n        //Hardcoded logic for now, may be put a max limit of 100 chosen\n        sort: {\n          updatedAt: -1\n        }\n      });\n      return {\n        resultsChosen: retChosen,\n        totalChosenCount: totalChosenCount\n      };\n    } catch (err) {}\n  },\n  dataEmailEnquiries: function () {\n    var propertyData = Session.get('propertyData');\n\n    if (!propertyData) {\n      console.log(\"Empty project data\");\n      return false;\n    }\n\n    try {\n      var selector = {\n        propertyId: propertyData._id,\n        isArchived: false\n      }; /////PAGINATION\n\n      var resultsPerPage = 100;\n      var currentPageNo = FlowRouter.current().params.pageno;\n\n      if (currentPageNo) {\n        let tmp = currentPageNo.toString().split('-');\n\n        if (tmp.length == 2) {\n          if (!isNaN(tmp[1])) currentPageNo = parseInt(tmp[1]);\n        }\n      }\n\n      if (!currentPageNo) {\n        currentPageNo = 1;\n      }\n\n      var skip = (currentPageNo - 1) * resultsPerPage; // var totalEnquiryCount = Collections.EmailEnquiries.find(selector).count();\n\n      var totalEnquiryCount = Counts.get(\"total-EmailEnquiries\");\n      var retChosen = Collections.EmailEnquiries.find(selector, {\n        limit: resultsPerPage,\n        sort: {\n          updatedAt: -1\n        } // skip: skip//not needed as the server would do this.\n\n      });\n      let paginationNeeded = totalEnquiryCount / resultsPerPage > 1.0 ? true : false;\n      return {\n        resultsEnquiries: retChosen,\n        totalEnquiryCount: totalEnquiryCount,\n        pagination: paginationNeeded ? getPaginationData2D(totalEnquiryCount, resultsPerPage, 1) : false,\n        paginationNeede: paginationNeeded\n      };\n    } catch (err) {}\n  },\n  dataNonChosen: function () {\n    var propertyData = Session.get('propertyData');\n    var userFilters = Session.get('userFilters');\n\n    if (!propertyData) {\n      console.log(\"Empty project data\");\n      return false;\n    }\n\n    var selector = {\n      auctionId: propertyData.auctionId,\n      isArchived: false,\n      chosen: false\n    };\n\n    if (userFilters) {\n      if (userFilters.s1.range) selector.yourBid = {\n        $gt: parseInt(userFilters.s1.range[0]),\n        $lt: parseInt(userFilters.s1.range[1])\n      };\n    }\n\n    globlaAuctionId1 = propertyData.auctionId;\n    globalAuctionData1 = propertyData.auction; /////PAGINATION\n\n    var resultsPerPage = 20;\n    var currentPageNo = FlowRouter.current().params.pageno;\n\n    if (currentPageNo) {\n      let tmp = currentPageNo.toString().split('-');\n\n      if (tmp.length == 2) {\n        if (!isNaN(tmp[0])) currentPageNo = parseInt(tmp[0]);\n      }\n    }\n\n    if (!currentPageNo) {\n      currentPageNo = 1;\n    }\n\n    var skip = (currentPageNo - 1) * resultsPerPage;\n    var urlBase = 'account/propertyapplications/' + FlowRouter.current().params.id + '/'; // var totalNonChosenCount = Collections.Bids.find(selector).count();\n\n    var totalNonChosenCount = Counts.get(\"total-PropertyApplications\");\n    var resultsNonChosen = Collections.Bids.find(selector, {\n      transform: function (doc) {\n        doc.userStatic = Meteor.users.findOne({\n          _id: doc.userId\n        });\n        doc.auction = Collections.Auctions.findOne({\n          _id: doc.auctionId\n        }); // if (doc.auctionId != globlaAuctionId1 || !globalAuctionData1._id) {\n        //     doc.auction = Collections.Auctions.findOne({\n        //         _id: doc.auctionId\n        //     });\n        // } else {\n        //     doc.auction = globalAuctionData1;\n        // }\n\n        return doc;\n      },\n      limit: resultsPerPage,\n      sort: {\n        updatedAt: -1\n      } // skip: skip//not needed as the server would do this.\n\n    }).fetch();\n    if (userFilters) if (userFilters.check) {\n      var isItNeeded = true;\n      var countActiveFilters = 0;\n\n      for (var k = 0; k < userFilters.check.length; k++) {\n        if (userFilters.check[k].val == 'all') continue;\n        if (userFilters.check[k].val == 'clearall') continue;\n        if (userFilters.check[k].enabled) countActiveFilters++;\n      }\n\n      if (!countActiveFilters) isItNeeded = false; //if none sel do nothing.\n\n      if (isItNeeded) {\n        var newArr = [];\n        var selSatisfiedCount = 0;\n\n        for (var i = 0; i < resultsNonChosen.length; i++) {\n          selSatisfiedCount = 0;\n          var ele = resultsNonChosen[i];\n          var ref = ele.userStatic.profile.references;\n          if (!ref) break;\n\n          for (var j = 0; j < userFilters.check.length; j++) {\n            if (!userFilters.check[j].enabled) continue; //if not enabled , then don' consider it\n\n            if (userFilters.check[j].val == 'all') continue;\n            if (userFilters.check[j].val == 'clearall') continue;\n\n            if (userFilters.check[j].val == 'empName' && ref.employerName) {\n              selSatisfiedCount++;\n              continue;\n            }\n\n            if (userFilters.check[j].val == 'salary' && ref.employerTakeHome) {\n              selSatisfiedCount++;\n              continue;\n            }\n\n            if (userFilters.check[j].val == 'workRef' && ref.hasWorkRef) {\n              selSatisfiedCount++;\n              continue;\n            }\n\n            if (userFilters.check[j].val == 'passport' && ref.hasPassport) {\n              selSatisfiedCount++;\n              continue;\n            }\n\n            if (userFilters.check[j].val == 'pps' && ref.hasPPS) {\n              selSatisfiedCount++;\n              continue;\n            }\n\n            if (userFilters.check[j].val == 'landlordRef' && ref.hasLandlordRef) {\n              selSatisfiedCount++;\n              continue;\n            }\n\n            if (userFilters.check[j].val == 'financialRef' && ref.hasFinancialRef) {\n              selSatisfiedCount++;\n              continue;\n            }\n\n            if (userFilters.check[j].val == 'govtID' && ref.hasGovtID) {\n              selSatisfiedCount++;\n              continue;\n            }\n\n            if (userFilters.check[j].val == 'resume' && ref.hasResume) {\n              selSatisfiedCount++;\n              continue;\n            } // if(userFilters.check[j].val == 'empName' && !user.profile.references.employerName){skip=true;break;}\n            // if(userFilters.check[j].val == 'salary' && !user.profile.references.employerTakeHome){skip=true;break;}\n            // if(userFilters.check[j].val == 'workRef' && !user.profile.references.hasWorkRef){skip=true;break;}\n            // if(userFilters.check[j].val == 'passport' && !user.profile.references.hasPassport){skip=true;break;}\n            // if(userFilters.check[j].val == 'pps' && !user.profile.references.hasPPS){skip=true;break;}\n            // if(userFilters.check[j].val == 'landlordRef' && !user.profile.references.hasLandlordRef){skip=true;break;}\n            // if(userFilters.check[j].val == 'financialRef' && !user.profile.references.hasFinancialRef){skip=true;break;}\n            // if(userFilters.check[j].val == 'govtID' && !user.profile.references.hasGovtID){skip=true;break;}\n            // if(userFilters.check[j].val == 'resume' && !user.profile.references.hasResume){skip=true;break;}\n\n          }\n\n          if (selSatisfiedCount == countActiveFilters) newArr.push(ele); // if (!skip)\n        }\n\n        resultsNonChosen = newArr;\n      }\n    }\n    let paginationNeeded = totalNonChosenCount / resultsPerPage > 1.0 ? true : false;\n    return {\n      resultsNonChosen: resultsNonChosen,\n      totalNonChosenCount: totalNonChosenCount,\n      pagination: paginationNeeded ? getPaginationData2D(totalNonChosenCount, resultsPerPage, 0) : false,\n      paginationNeeded: paginationNeeded\n    };\n  },\n  showFilters: function () {\n    // return true;\n    var propertyData = Session.get('propertyData');\n\n    try {\n      var selector = {\n        auctionId: propertyData.auctionId,\n        isArchived: false\n      }; // var totalResultsCount = Collections.Bids.find(selector).count();\n\n      var totalResultsCount = Counts.get(\"total-PropertyApplications\");\n      if (totalResultsCount > 5) return true;\n    } catch (e) {}\n\n    return false;\n  },\n  initFilters: function () {\n    setTimeout(startFilters, 500);\n  },\n  propertyData: function () {\n    var ret = getpropertyData(); //Now check if he has auctionId passed in query & prop has no auction ID. if yes, update your session\n\n    try {\n      if (FlowRouter.current().params.query.auctionId && !ret.auctionId) ret.auctionId = FlowRouter.current().params.query.auctionId;\n    } catch (e) {}\n\n    if (!ret.auctionId) {\n      var prevRoute = Session.get('prevRoute');\n\n      if (prevRoute) {\n        FlowRouter.go(prevRoute.name, prevRoute.args);\n        Session.set('prevRoute', false);\n      } else {\n        FlowRouter.go(\"/account/myproperies/\", {\n          pageno: 1\n        });\n      }\n    }\n\n    Session.set('propertyData', ret);\n    return ret;\n  },\n  // time: function(){\n  //\n  //     var propertyData = Session.get('propertyData');\n  //     var timestamp = TimeSync.serverTime(null, 30000);\n  //     if(!propertyData.auction.endDate || !timestamp)return;\n  //\n  //\n  //     var dend = Date.parse(propertyData.auction.endDate);\n  //     var timeDiff = dend - timestamp ;\n  //     if(timeDiff<0)return false;\n  //\n  //     var day = Math.floor(timeDiff / (1000 * 3600 * 24))\n  //     var hour = Math.floor(timeDiff / (1000 * 3600 ))\n  //     var min = Math.floor(timeDiff / (1000 * 60 ) )\n  //     hour = hour - (day * 24);\n  //     min = min - (day * 24* 60) - (hour * 60);\n  //     return {\"day\":day,\"hour\":hour,\"min\":min}\n  // },\n  isAuctionClosed: function () {\n    // var timestamp = TimeSync.serverTime(null, 30000);\n    var timestamp = new Date();\n    var propertyData = Session.get('propertyData');\n    var dend = Date.parse(propertyData.auction.endDate);\n    var timeDiff = dend - timestamp;\n\n    if (timeDiff < 0) {\n      return true;\n    }\n\n    return false;\n  },\n  assistanceAlreadyRequested: function () {\n    //Just to make this reactive\n    var user = Meteor.user();\n    if (user) if (user.profile) if (user.profile.assistanceRequested) {\n      return user.profile.assistanceRequested || Session.get('assistanceRequested');\n    }\n    return Session.get('assistanceRequested');\n  },\n  deactivateInProgress: function () {\n    deactivateInProgress = Template.instance().deactivateInProgress;\n    return Template.instance().deactivateInProgress.get();\n  },\n  userFilters: function () {\n    return Session.get('userFilters');\n  }\n});\nTemplate.propertyApplications.onRendered(function () {\n  try {\n    jQuery(\"html,body\").animate({\n      scrollTop: 0\n    }, 250);\n  } catch (e) {\n    document.body.scrollTop = document.documentElement.scrollTop = 0;\n  }\n});\nTemplate.propertyApplications.events({\n  \"click .showEditPropertyForm\": function (event, template) {\n    var prevRoute = {\n      name: FlowRouter.current().route.name,\n      args: {\n        id: FlowRouter.current().params.id,\n        pageno: FlowRouter.current().params.pageno\n      },\n      scrollTo: 'body'\n    };\n    Session.set('prevRoute', prevRoute);\n    var propertyData = Session.get('propertyData');\n    FlowRouter.go('account/editproperty', {\n      id: propertyData._id\n    });\n  },\n  \"click .deactivatePropertyBtn\": function (event, template) {\n    event.preventDefault();\n    var propertyData = Session.get('propertyData');\n\n    if (!propertyData) {\n      console.log(\"Empty project data\");\n      return false;\n    }\n\n    var user = Meteor.user();\n\n    if (!user) {\n      console.log(\"Invalid user\");\n      return;\n    }\n\n    if (propertyData.createdByAgent != user._id) {\n      console.log(\"Invalid user\");\n      return;\n    }\n\n    $.fancybox({\n      'padding': 0,\n      'href': '#conf-dactivate-pop',\n      afterShow: function (template) {\n        attachEvents();\n      },\n      afterClose: function (template) {\n        console.log(template);\n      }\n    });\n  },\n  \"click .backBtn\": function (event, template) {\n    var prevRoute = Session.get('prevRoute');\n\n    if (prevRoute) {\n      FlowRouter.go(prevRoute.name, prevRoute.args);\n      Session.set('prevRoute', false);\n    } else {\n      FlowRouter.go(\"/account/myproperies/\", {\n        pageno: 1\n      });\n    }\n  },\n  \"click .showCopyDlg\": function (event, template) {\n    var propertyData = Session.get('propertyData');\n    let user = Meteor.user();\n    let sluggedName = slugifyEmailAddress(user.profile.name);\n    if (!sluggedName) sluggedName = 'rent';\n    let email = sluggedName + '-let-' + propertyData.auction.lettingAuctionCode.toLowerCase() + \"@spotmycrib.ie\";\n    $('#agentPropertyEmailField').val(email);\n    var url = FlowRouter.url('letting', {\n      key: propertyData.auction.lettingAuctionCode\n    });\n    $('#propertyLinkField').val(url);\n    $.fancybox({\n      'padding': 0,\n      'href': '#propertyLinkDlg',\n      afterShow: function (template) {\n        $('#agentPropertyEmailField').select();\n        $('#propertyLinkDlg .copyEmailBtn').unbind().bind('click', function () {\n          $('#agentPropertyEmailField').select();\n\n          try {\n            var successful = document.execCommand('copy');\n            var msg = successful ? 'successful' : 'unsuccessful'; // console.log('Copying text command was ' + msg);\n\n            $.fancybox.close();\n          } catch (err) {\n            console.log('Oops, unable to copy');\n          }\n\n          ga('send', 'event', 'propertyApplicationsPage', 'copyShareEmail', 'copyShareEmail Btn Clicked');\n        });\n        $('#propertyLinkDlg .copyLinkBtn').unbind().bind('click', function () {\n          $('#propertyLinkField').select();\n\n          try {\n            var successful = document.execCommand('copy');\n            var msg = successful ? 'successful' : 'unsuccessful'; // console.log('Copying text command was ' + msg);\n\n            $.fancybox.close();\n          } catch (err) {\n            console.log('Oops, unable to copy');\n          }\n\n          ga('send', 'event', 'propertyApplicationsPage', 'copyShareLink', 'copyShareLink Btn Clicked');\n        });\n        $('#propertyLinkDlg .cancelBtn').unbind().bind('click', function () {\n          $.fancybox.close();\n        });\n      }\n    });\n  },\n  \"click .jns-dropdown-btn\": function (event, template) {\n    $('.jns-dropdown-area').toggle();\n  }\n});\nTemplate.bidList.onCreated(function () {\n  this.choosingInProgress = new ReactiveVar(false);\n  this.unChoosingInProgress = new ReactiveVar(false);\n});\nTemplate.bidList.helpers({\n  user: function () {\n    // debugger;\n    var ret = Meteor.users.find({\n      _id: this.userId\n    }).fetch();\n    return ret[0];\n  },\n  canAfford: function (salary) {\n    //This works based on the bid (not rent)\n    if (!this.yourBid) {\n      return false;\n    }\n\n    if (salary * 0.4 >= this.yourBid) {\n      return true;\n    }\n\n    return false;\n  },\n  choosingInProgress: function () {\n    return Template.instance().choosingInProgress.get();\n  },\n  numDifferentiation: function (data) {\n    return numDifferentiation(data);\n  },\n  classBidList: function () {\n    if (this.chosen) return 'active';\n    var propertyData = Session.get('propertyData');\n\n    try {\n      var a = Collections.Auctions.find({\n        _id: propertyData.auction._id\n      }).fetch();\n      propertyData.auction = a[0];\n      if (propertyData.auction.chosenBids.length) return 'archive';\n    } catch (e) {}\n\n    return 'border-top';\n  }\n});\nTemplate.bidList.events({\n  \"click .chooseTenant\": function (event, template) {\n    template.choosingInProgress.set(true);\n    choosingInProgress = template.choosingInProgress;\n    var r = confirm(\"Are you sure? This will send a confirmation mail to the applicant.\");\n\n    if (!r) {\n      template.choosingInProgress.set(false);\n      return;\n    }\n\n    Meteor.call('chooseWinning', [this.auctionId, this._id], function (error, result) {\n      choosingInProgress.set(false);\n\n      if (error) {\n        console.log(error);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(error.error);\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      console.log(\"Success\");\n    });\n  },\n  \"click .unChooseTenant\": function (event, template) {\n    template.unChoosingInProgress.set(true);\n    unChoosingInProgress = template.unChoosingInProgress;\n    var r = confirm(\"Are you sure? This will send a pending mail to the applicant.\");\n\n    if (!r) {\n      template.unChoosingInProgress.set(false);\n      return;\n    }\n\n    Meteor.call('unChooseWinning', [this.auctionId, this._id], function (error, result) {\n      unChoosingInProgress.set(false);\n\n      if (error) {\n        console.log(error);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(error.error);\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      console.log(\"Success\");\n    });\n  },\n  \"click .inviteForViewingBtn\": function (event, template) {\n    var propertyData = Session.get('propertyData');\n    var ret = Meteor.users.find({\n      _id: this.userId\n    }).fetch();\n    var inviteForViewing = Session.get('inviteForViewingData');\n    var today = new Date();\n    var tomorrow = new Date();\n    tomorrow.setDate(today.getDate() + 1);\n    tomorrow.setMinutes(0);\n    tomorrow.setSeconds(0);\n    var h = tomorrow.getHours();\n    if (h < 9) h = 9;else if (h > 20) h = 20;\n    tomorrow.setHours(h);\n    var inviteDate = tomorrow;\n\n    try {\n      if (inviteForViewing.inviteDate) inviteDate = inviteForViewing.inviteDate;\n    } catch (e) {}\n\n    Session.set('inviteForViewingData', {\n      user: ret[0],\n      bid: this,\n      inviteDate: inviteDate\n    });\n    $.fancybox({\n      'padding': 0,\n      'href': '#inviteForViewingDlg',\n      afterShow: function () {\n        var inviteForViewing = Session.get('inviteForViewingData');\n        var d = inviteForViewing.inviteDate;\n        var am = ' AM';\n        var df = d.getMonth() + 1 + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + d.getHours() + ':' + d.getMinutes();\n        if (d.getHours() > 12) am = ' PM';\n        df = df + am;\n        $('#inviteDate').val(df);\n      }\n    });\n  }\n});\nTemplate.emailEnquiryList.onCreated(function () {\n  this.choosingInProgress = new ReactiveVar(false);\n  this.unChoosingInProgress = new ReactiveVar(false);\n});\nTemplate.emailEnquiryList.helpers({\n  user: function () {\n    // debugger;\n    var ret = Meteor.users.find({\n      _id: this.userId\n    }).fetch();\n    return ret[0];\n  },\n  canAfford: function (salary) {\n    //This works based on the bid (not rent)\n    if (!this.yourBid) {\n      return false;\n    }\n\n    if (salary * 0.4 >= this.yourBid) {\n      return true;\n    }\n\n    return false;\n  },\n  choosingInProgress: function () {\n    return Template.instance().choosingInProgress.get();\n  },\n  numDifferentiation: function (data) {\n    return numDifferentiation(data);\n  },\n  classBidList: function () {\n    if (this.chosen) return 'active';\n    var propertyData = Session.get('propertyData');\n\n    try {\n      var a = Collections.Auctions.find({\n        _id: propertyData.auction._id\n      }).fetch();\n      propertyData.auction = a[0];\n      if (propertyData.auction.chosenBids.length) return 'archive';\n    } catch (e) {}\n\n    return 'border-top';\n  }\n});\nTemplate.emailEnquiryList.events({\n  \"click .inviteForViewingBtn\": function (event, template) {\n    var propertyData = Session.get('propertyData');\n    var ret = Meteor.users.find({\n      _id: this.userId\n    }).fetch();\n    var inviteForViewing = Session.get('inviteForViewingData');\n    var today = new Date();\n    var tomorrow = new Date();\n    tomorrow.setDate(today.getDate() + 1);\n    tomorrow.setMinutes(0);\n    tomorrow.setSeconds(0);\n    var h = tomorrow.getHours();\n    if (h < 9) h = 9;else if (h > 20) h = 20;\n    tomorrow.setHours(h);\n    var inviteDate = tomorrow;\n\n    try {\n      if (inviteForViewing.inviteDate) inviteDate = inviteForViewing.inviteDate;\n    } catch (e) {}\n\n    Session.set('inviteForViewingData', {\n      user: ret[0],\n      bid: this,\n      inviteDate: inviteDate\n    });\n    $.fancybox({\n      'padding': 0,\n      'href': '#inviteForViewingDlg',\n      afterShow: function () {\n        var inviteForViewing = Session.get('inviteForViewingData');\n        var d = inviteForViewing.inviteDate;\n        var am = ' AM';\n        var df = d.getMonth() + 1 + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + d.getHours() + ':' + d.getMinutes();\n        if (d.getHours() > 12) am = ' PM';\n        df = df + am;\n        $('#inviteDate').val(df);\n      }\n    });\n  }\n});\ninviteInProgress = '';\nTemplate.inviteForViewing.onCreated(function () {\n  this.inviteInProgress = new ReactiveVar(false);\n  inviteInProgress = this.inviteInProgress;\n});\nTemplate.inviteForViewing.helpers({\n  data: function () {\n    return Session.get('inviteForViewingData');\n  },\n  inviteInProgress: function () {\n    inviteInProgress = Template.instance().inviteInProgress;\n    return Template.instance().inviteInProgress.get();\n  },\n  inviteDateFormated: function () {\n    var inviteForViewing = Session.get('inviteForViewingData');\n    var options = {\n      weekday: \"long\",\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\"\n    };\n\n    try {\n      var d = inviteForViewing.inviteDate;\n      return d.toLocaleTimeString(\"en-us\", options);\n    } catch (e) {}\n\n    return;\n  },\n  propertyData: function () {\n    return Session.get('propertyData');\n  }\n});\nTemplate.inviteForViewing.events({\n  'change .inviteDate': function (event, template) {\n    var d = new Date($('.inviteDate').val());\n    var inviteForViewing = Session.get('inviteForViewingData');\n\n    try {\n      inviteForViewing.inviteDate = d;\n      Session.set('inviteForViewingData', inviteForViewing);\n    } catch (e) {}\n  },\n  'click .confirmInviteBtn': function () {\n    var inviteDate = $('.inviteDate').val();\n    var inviteMessage = $('.inviteMessage').val();\n    console.log(inviteDate);\n    var inviteForViewing = Session.get('inviteForViewingData');\n    inviteInProgress.set(true);\n    Meteor.call('sendInviteForViewingEmail', [inviteForViewing.bid._id, inviteDate], function (error, result) {\n      inviteInProgress.set(false);\n\n      if (error) {\n        console.log(error);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Failed applying. Please try again, try checking your internet connectivity. Contact us if needed.\");\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      if (result.status == 'Success') {\n        console.log(\"Success\");\n        closePopupEvent();\n      }\n    });\n  },\n  'click .closePopupBtn': function () {\n    closePopupEvent();\n  }\n});\nTemplate.inviteForViewing.onRendered(function () {\n  //Needs to be optimised, this is not the right place to put this code, might cause JS errors if Jquery isn' loaded yet.\n  try {\n    this.$('#inviteDate').datetimepicker();\n    this.$('#moveindate').datetimepicker();\n  } catch (err) {\n    console.log('dp failed');\n  }\n});\n\nfunction attachEvents() {\n  $(\".deactivateConfirmBtn\").unbind().bind(\"click\", function () {\n    deactivateConfEvent();\n  });\n  $(\".closePopupBtn\").unbind().bind(\"click\", function () {\n    closePopupEvent();\n  });\n}\n\nfunction deactivateConfEvent() {\n  var data = Session.get(\"propertyData\");\n  var auctionId = data.auctionId;\n  deactivateInProgress.set(true);\n  Meteor.call('deactivateAuction', auctionId, function (error, result) {\n    deactivateInProgress.set(false);\n\n    if (error) {\n      console.log(error);\n      var tmp = Session.get(\"showErrorDlg\");\n      if (!tmp) tmp = [];\n      tmp.push(\"Failed deactivating. Please try again, try checking your internet connectivity. Contact us if needed.\");\n      Session.set(\"showErrorDlg\", tmp);\n      return;\n    }\n\n    console.log(\"Success\");\n    closePopupEvent();\n    var prevRoute = Session.get('prevRoute');\n\n    if (prevRoute) {\n      FlowRouter.go(prevRoute.name, prevRoute.args);\n      Session.set('prevRoute', false);\n    } else {\n      FlowRouter.go(\"/account/myproperies/\", {\n        pageno: 1\n      });\n    }\n  });\n}\n\nfunction closePopupEvent() {\n  console.log('closePopupEvent');\n  if ($) if ($.fancybox) $.fancybox.close();\n}\n\nfunction getpropertyData() {\n  var id = FlowRouter.current().params.id;\n  var ret = Collections.Properties.find(id, {\n    transform: function (data) {\n      data.auction = Collections.Auctions.findOne(data.auctionId); // data.applicationsReceivedCount = Collections.Bids.find({auctionId:data.auctionId}).count();\n\n      data.applicationsReceivedCount = Counts.get(\"total-PropertyApplications\");\n      data.applicationsActiveCount = Counts.get(\"total-PropertyApplications\"); //Removing the diff between active and total received for now. date jan 9, 2019\n      // data.applicationsActiveCount = Collections.Bids.find({auctionId:data.auctionId,isArchived:false}).count();\n\n      data.chosenApplicationCount = Collections.Bids.find({\n        auctionId: data.auctionId,\n        isArchived: false,\n        chosen: true\n      }).count();\n      return data;\n    },\n    limit: 1\n  }).fetch();\n  Meteor.subscribe('avgOffer', ret[0].auctionId);\n  return ret[0];\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction dropdownCheckbox() {\n  $('.dropdown-menu .checkbox').unbind().on('click', function (event) {\n    var $target = $(event.currentTarget),\n        val = $target.find('input').attr('value'),\n        $inp = $target.find('input'),\n        idx;\n    var userFilters = Session.get('userFilters');\n\n    if (val == 'all') {\n      setTimeout(function () {\n        $('.dropdown-menu input').not(\"[value='clearall']\").prop('checked', true);\n        dropdownCheckbox();\n      }, 10);\n\n      if (userFilters) {\n        for (var i = 0; i < userFilters.check.length; i++) {\n          userFilters.check[i].enabled = \"enabled\";\n        }\n\n        Session.set('userFilters', userFilters);\n      }\n\n      $(event.target).blur();\n      return false;\n    }\n\n    if (val == 'clearall') {\n      setTimeout(function () {\n        $('.dropdown-menu input').prop('checked', false);\n        dropdownCheckbox();\n      }, 10);\n\n      if (userFilters) {\n        for (var i = 0; i < userFilters.check.length; i++) {\n          userFilters.check[i].enabled = \"\";\n        }\n\n        Session.set('userFilters', userFilters);\n      }\n\n      $(event.target).blur();\n      return false;\n    }\n\n    if ($($inp).prop('checked')) {\n      $($inp).prop('checked', false);\n\n      if (userFilters.check) {\n        for (var i = 0; i < userFilters.check.length; i++) {\n          if (userFilters.check[i].val == val) userFilters.check[i].enabled = \"\";\n        }\n      }\n    } else {\n      $($inp).prop('checked', true);\n\n      if (userFilters.check) {\n        for (var i = 0; i < userFilters.check.length; i++) {\n          if (userFilters.check[i].val == val) userFilters.check[i].enabled = \"enabled\";\n        }\n      }\n    } // if ( ( idx = options.indexOf( val ) ) > -1 ) {\n    //     options.splice( idx, 1 );\n    //     setTimeout( function() { $inp.prop( 'checked', false ) }, 0);\n    //     if(userFilters.check){\n    //         for(var i=0;i<userFilters.check.length;i++){\n    //             if(userFilters.check[i].val == val)userFilters.check[i].enabled=\"\";\n    //         }\n    //     }\n    // } else {\n    //     options.push( val );\n    //     setTimeout( function() { $inp.prop( 'checked', true ) }, 0);\n    //     if(userFilters.check){\n    //         for(var i=0;i<userFilters.check.length;i++){\n    //             if(userFilters.check[i].val == val)userFilters.check[i].enabled=\"enabled\";\n    //         }\n    //     }\n    // }\n\n\n    if (userFilters) {\n      Session.set('userFilters', userFilters);\n    }\n\n    $(event.target).blur();\n    dropdownCheckbox(); // console.log( options );\n\n    return false;\n  });\n}\n\nfunction slugifyEmailAddress(text) {\n  if (!text) return '';\n  const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ/_,:;';\n  const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return text.toString().toLowerCase().replace(/\\s+/g, '.') // Replace spaces with \".\"\n  .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n  .replace(/&/g, '-and-') // Replace & with ''\n  // .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single ''\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"propertyManage.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/templates/propertyManage.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./pagination.html\");\nmodule.link(\"./propertyManage.html\");\nvar globalFILTERS = {};\n\nfunction getPaginationData(totalResultsCount, currentPageNo, urlBase, resultsPerPage) {\n  var pages = [],\n      prevPage = {},\n      nextPage = {};\n  var pgMin = currentPageNo - 4,\n      pgMax = currentPageNo + 5,\n      maxPages = Math.ceil(totalResultsCount / resultsPerPage);\n  if (pgMin < 1) pgMin = 1;\n  if (pgMax < 1) pgMax = 1;\n  if (maxPages < 1) maxPages = 1;\n  if (pgMin > maxPages) currentPageNo = maxPages;\n  var tmp = {};\n\n  for (var i = pgMin; i <= maxPages; i++) {\n    var href = urlBase + i + \"/\";\n    tmp = {\n      \"href\": href,\n      \"text\": i\n    };\n\n    if (i == currentPageNo) {\n      tmp['href'] = 'javascript:void(0);';\n      tmp['current'] = true;\n    }\n\n    pages.push(tmp);\n  } // if(pgMin==maxPages){//Above loop won't work if only 1 page result\n  //     pages.push({\n  //         \"href\": 'javascript:void(0);',\n  //         \"text\": 1\n  //     })\n  // }\n\n\n  var prevPageNo = currentPageNo - 1,\n      nextPageNo = currentPageNo + 1;\n\n  if (prevPageNo < 1) {\n    prevPage['href'] = 'javascript:void(0)';\n    prevPage['text'] = 'Previous';\n    prevPage['disabled'] = 'disabled';\n  } else {\n    prevPage['href'] = urlBase + prevPageNo + \"/\";\n    prevPage['text'] = 'Previous';\n  }\n\n  if (nextPageNo > maxPages) nextPageNo = maxPages;\n\n  if (nextPageNo == currentPageNo) {\n    nextPage['href'] = 'javascript:void(0)';\n    nextPage['text'] = 'Next';\n    nextPage['disabled'] = 'disabled';\n  } else {\n    nextPage['href'] = urlBase + nextPageNo + \"/\";\n    nextPage['text'] = 'Next';\n  }\n\n  return {\n    \"prevPage\": prevPage,\n    \"pages\": pages,\n    \"nextPage\": nextPage\n  };\n}\n\nTemplate.registerHelper(\"objectToPairs\", function (object) {\n  return _.map(object, function (value, key) {\n    return {\n      key: key,\n      value: value\n    };\n  });\n});\nTemplate.registerHelper(\"hostname\", function () {\n  return Meteor.absoluteUrl();\n});\n\nfunction numDifferentiation(val) {\n  if (val >= 1000000000) val = (val / 1000000000).toFixed(2) + ' Billion';else if (val >= 1000000) val = (val / 1000000).toFixed(2) + ' Million';\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction numFormat(x) {\n  //var x=12345652457.557;\n  //console.log(x)\n  if (!x) return x;\n  x = x.toString();\n  var afterPoint = '';\n  if (x.indexOf('.') > 0) afterPoint = x.substring(x.indexOf('.'), x.length);\n  afterPoint = afterPoint.substr(0, 3);\n  x = Math.floor(x);\n  x = x.toString();\n  var lastThree = x.substring(x.length - 3);\n  var otherNumbers = x.substring(0, x.length - 3);\n  if (otherNumbers != '') lastThree = ',' + lastThree;\n  var res = otherNumbers.replace(/\\B(?=(\\d{2})+(?!\\d))/g, \",\") + lastThree + afterPoint;\n  return res;\n}\n\nTemplate.propertyManage.onCreated(function () {\n  Session.set('propertyData', false);\n  Session.set('PropertyManage', false);\n  this.pdExpanded = new ReactiveVar(true);\n  this.enablingPMS = new ReactiveVar(false);\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.autorun(function () {\n    instance.subscribe('Auctions');\n    instance.subscribe('Bids');\n    instance.subscribe('allUserData');\n    instance.subscribe('userData');\n    var id = FlowRouter.getParam('id');\n    instance.subscribe(\"Property\", {\n      viewName: 'property.view',\n      id: id\n    });\n    instance.subscribe(\"PropertyManage\", {\n      viewName: 'propertyManage.view',\n      id: id\n    });\n    instance.subscribe(\"ActivityHistory\", {\n      limit: 50,\n      id: id\n    });\n\n    if (instance.subscriptionsReady()) {\n      instance.isSubsLoaded.set(true);\n    }\n  });\n});\nTemplate.propertyManage.helpers({\n  isSubsLoaded: function () {\n    return Template.instance().subscriptionsReady();\n  },\n  userLoggedIn: function () {\n    if (Meteor.user()) return true;\n    return false;\n  },\n  data: function () {\n    var id = FlowRouter.current().params.id;\n    if (!id) return []; // debugger;\n\n    var ret = Collections.PropertyManage.find({\n      propertyId: id\n    });\n    var docs = ret.fetch();\n    if (docs.length) Session.set('PropertyManage', docs[0]); // if(ret.count()==0){\n    //     clearMeta();\n    //     DocHead.setTitle(' Property not found | SpotMyCrib Admin');\n    //     DocHead.addMeta({name: \"description\", content: \"\"});\n    // }\n    // Session.set(\"propertyManageData\",ret);\n\n    return docs[0];\n  },\n  propertyData: function () {\n    var PropertyManage = Session.get('PropertyManage');\n\n    if (PropertyManage.propertyId) {\n      var ret = Collections.Properties.find({\n        _id: PropertyManage.propertyId\n      }, {\n        limit: 1\n      });\n      var docs = ret.fetch();\n      var propertyData = docs[0];\n      if (docs.length) Session.set('propertyData', propertyData);\n      clearMeta();\n\n      try {\n        var title = propertyData.address.address + ', ' + propertyData.address.area;\n        if (propertyData.address.county) title += ', ' + propertyData.address.county;\n        title += ' Manage Property';\n        DocHead.setTitle(titleCase(title) + ' | SpotMyCrib Admin');\n        DocHead.addMeta({\n          name: \"description\",\n          content: \"Manage property \" + propertyData.type + \", view and manage lease, see activity history and much more.\"\n        });\n      } catch (err) {\n        DocHead.setTitle('Manage Property | SpotMyCrib Admin');\n        DocHead.addMeta({\n          name: \"description\",\n          content: \"\"\n        });\n      }\n\n      return docs[0];\n    } else {\n      clearMeta();\n      DocHead.setTitle('Manage Property | SpotMyCrib Admin');\n      DocHead.addMeta({\n        name: \"description\",\n        content: \"\"\n      });\n      return [];\n    }\n  },\n  hasPropFound: function () {\n    var id = FlowRouter.current().params.id;\n    var ret = Collections.Properties.find(id, {\n      limit: 1\n    }).fetch();\n    return ret.length;\n  },\n  pdExpanded: function () {\n    return Template.instance().pdExpanded.get();\n  },\n  enablingPMS: function () {\n    return Template.instance().enablingPMS.get();\n  },\n  // dataFull : function () {\n  //\n  //     var propertyData = Session.get('propertyData');\n  //\n  //     try {\n  //         var selector = {\n  //             auctionId: propertyData.auctionId,\n  //             isArchived: false\n  //         }\n  //\n  //         var totalResultsCount = Collections.Bids.find(selector).count();\n  //\n  //         clearMeta();\n  //         try{\n  //             var title = propertyData.address.address + ', ' + propertyData.address.area;\n  //             if (propertyData.address.county) title += ', ' + propertyData.address.county;\n  //             title += ' Manage Property';\n  //\n  //             DocHead.setTitle(titleCase(title) + ' | SpotMyCrib Admin');\n  //             DocHead.addMeta({\n  //                 name: \"description\",\n  //                 content: \"View applications for property \" + propertyData.type + \", choose a winning tenant, see their social profiles and much more.\"\n  //             });\n  //         }catch(err){\n  //             DocHead.setTitle('Manage Property | SpotMyCrib Admin');\n  //             DocHead.addMeta({name: \"description\", content: \"\"});\n  //         }\n  //         return {\n  //             totalResultsCount: totalResultsCount\n  //         };\n  //     }catch (err){}\n  // },\n  dataChosen: function () {\n    var PropertyManage = Session.get('PropertyManage');\n\n    if (PropertyManage.tenants.length) {\n      var tenIds = [];\n\n      for (var i = 0; i < PropertyManage.tenants.length; i++) {\n        if (PropertyManage.tenants[i].id) tenIds.push(PropertyManage.tenants[i].id);\n      }\n\n      var selector = {\n        _id: {\n          $in: tenIds\n        },\n        // isArchived: false,//this field isn't needed\n        chosen: true\n      };\n      var totalChosenCount = Collections.Bids.find(selector).count();\n      var retChosen = Collections.Bids.find(selector, {\n        sort: {\n          updatedAt: -1\n        }\n      });\n      return {\n        resultsChosen: retChosen,\n        totalChosenCount: totalChosenCount\n      };\n    } else return [];\n  },\n  // dataNonChosen : function () {\n  //\n  //     var propertyData = Session.get('propertyData');\n  //     if(!propertyData){\n  //         console.log(\"Empty project data\");\n  //         return false;}\n  //\n  //     var selector = {\n  //         auctionId: propertyData.auctionId,\n  //         isArchived: false,\n  //         chosen:false\n  //     }\n  //\n  //     globlaAuctionId1 = propertyData.auctionId;\n  //     globalAuctionData1 = propertyData.auction;\n  //     /////PAGINATION\n  //     var resultsPerPage = 100;\n  //     var currentPageNo = FlowRouter.current().params.pageno;\n  //     if(!currentPageNo){currentPageNo = 1}\n  //     var skip = (currentPageNo -1) * resultsPerPage;\n  //     var urlBase = 'account/propertyapplications/'+FlowRouter.current().params.id+'/';\n  //\n  //\n  //\n  //     var totalNonChosenCount = Collections.Bids.find(selector).count();\n  //     var resultsNonChosen = Collections.Bids.find(selector, {\n  //         transform: function (doc) {\n  //\n  //             if (doc.auctionId != globlaAuctionId1 || !globalAuctionData1._id) {\n  //                 doc.auction = Collections.Auctions.findOne({\n  //                     _id: doc.auctionId\n  //                 });\n  //             } else {\n  //                 doc.auction = globalAuctionData1;\n  //             }\n  //\n  //             return doc;\n  //         },\n  //         limit: resultsPerPage,\n  //         sort: { updatedAt : -1 },\n  //         skip: skip\n  //     });\n  //\n  //     return {\n  //         resultsNonChosen: resultsNonChosen,\n  //         totalNonChosenCount: totalNonChosenCount,\n  //         pagination: getPaginationData(totalNonChosenCount,currentPageNo,urlBase,resultsPerPage)\n  //     };\n  //\n  // },\n  showFilters: function () {\n    return false;\n  },\n  // propertyData : function () {\n  //     var ret = getpropertyData();\n  //     if(!ret.auctionId){\n  //         var prevRoute = Session.get('prevRoute');\n  //         if(prevRoute){\n  //             FlowRouter.go(prevRoute.name,prevRoute.args)\n  //             Session.set('prevRoute',false);\n  //         }else{\n  //             FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n  //         }\n  //     }\n  //\n  //     Session.set('propertyData',ret);\n  //\n  //     return ret;\n  // },\n  filters: function () {\n    var data = {}; //{\"Home Type\":[\"2 BHK\"],\"Floor\":[\"2 to 15\"],\"Price Range\":[\"67.45 to 97.45 \"]}\n\n    var FILTERS = Session.get('globalFILTERS');\n    var defaultFilters = Session.get('propertyData');\n    defaultFilters = defaultFilters.filter;\n\n    if (FILTERS['homeType']) {\n      if (FILTERS['homeType'].length) {\n        if (!isArraysEqual(defaultFilters.homeType, FILTERS['homeType'])) data['Home Type'] = FILTERS['homeType'];\n      }\n    }\n\n    if (FILTERS['facing']) {\n      if (FILTERS['facing'].length) {\n        if (!isArraysEqual(defaultFilters.facing, FILTERS['facing'])) data['Facing'] = FILTERS['facing'];\n      }\n    }\n\n    if (FILTERS['floor']) {\n      var hasLowerLimit = false,\n          hasUpperLimit = false;\n      var l1 = parseInt(FILTERS['floor'][0]);\n      if (l1 != 0 && l1 != defaultFilters.floor[0]) hasLowerLimit = true;\n      var l2 = parseInt(FILTERS['floor'][1]);\n      if (l2 != defaultFilters.floor[1]) hasUpperLimit = true;\n\n      if (hasLowerLimit && !hasUpperLimit) {\n        //Only LowerLimit\n        data['Floor'] = ['More than ' + l1];\n      } else if (!hasLowerLimit && hasUpperLimit) {\n        //Only UpperLimit\n        data['Floor'] = ['Below ' + l2];\n      } else if (hasLowerLimit && hasUpperLimit) {\n        //Both are there\n        data['Floor'] = ['Between ' + l1 + \" and \" + l2];\n      } else {} //Both are not there. So don't show filter.\n\n    }\n\n    if (FILTERS['priceRange']) {\n      var hasLowerLimit = false,\n          hasUpperLimit = false;\n      var l1 = parseInt(FILTERS['priceRange'][0]);\n      if (l1 != 0 && l1 != defaultFilters.priceRange[0]) hasLowerLimit = true;\n      var l2 = parseInt(FILTERS['priceRange'][1]);\n      if (l2 != defaultFilters.priceRange[1]) hasUpperLimit = true;\n\n      if (hasLowerLimit && !hasUpperLimit) {\n        //Only LowerLimit\n        data['Price Range'] = ['More than ' + numDifferentiation(l1)];\n      } else if (!hasLowerLimit && hasUpperLimit) {\n        //Only UpperLimit\n        data['Price Range'] = ['Below ' + numDifferentiation(l2)];\n      } else if (hasLowerLimit && hasUpperLimit) {\n        //Both are there\n        data['Price Range'] = ['Between ' + numDifferentiation(l1) + \" to \" + numDifferentiation(l2)];\n      } else {} //Both are not there. So don't show filter.\n\n    } //if( FILTERS['priceRange'] ){\n    //  data['Price Range'] =  [ numDifferentiation(FILTERS['priceRange'][0]) +\" to \"+ numDifferentiation(FILTERS['priceRange'][1]) ]\n    //}\n\n\n    applyClearFiltersEvent();\n    return {\n      data: data,\n      count: Object.keys(data).length\n    };\n  },\n  // time: function(){\n  //\n  //     var propertyData = Session.get('propertyData');\n  //     var timestamp = TimeSync.serverTime(null, 30000);\n  //     if(!propertyData.auction.endDate || !timestamp)return;\n  //\n  //\n  //     var dend = Date.parse(propertyData.auction.endDate);\n  //     var timeDiff = dend - timestamp ;\n  //     if(timeDiff<0)return false;\n  //\n  //     var day = Math.floor(timeDiff / (1000 * 3600 * 24))\n  //     var hour = Math.floor(timeDiff / (1000 * 3600 ))\n  //     var min = Math.floor(timeDiff / (1000 * 60 ) )\n  //     hour = hour - (day * 24);\n  //     min = min - (day * 24* 60) - (hour * 60);\n  //     return {\"day\":day,\"hour\":hour,\"min\":min}\n  // },\n  isAuctionClosed: function () {\n    // var timestamp = TimeSync.serverTime(null, 30000);\n    var timestamp = new Date();\n    var propertyData = Session.get('propertyData');\n    var dend = Date.parse(propertyData.auction.endDate);\n    var timeDiff = dend - timestamp;\n\n    if (timeDiff < 0) {\n      return true;\n    }\n\n    return false;\n  },\n  numDifferentiation: function (data) {\n    return numDifferentiation(data);\n  },\n  assistanceAlreadyRequested: function () {\n    //Just to make this reactive\n    var user = Meteor.user();\n    if (user) if (user.profile) if (user.profile.assistanceRequested) {\n      return user.profile.assistanceRequested || Session.get('assistanceRequested');\n    }\n    return Session.get('assistanceRequested');\n  }\n});\nTemplate.propertyManage.onRendered(function () {});\nTemplate.propertyManage.events({\n  \"click .clearFilters\": function (event, template) {\n    //FlowRouter.query.clear();\n    console.log('in .clearFilters meteor event');\n    var defaultFilters = Session.get('propertyData');\n    defaultFilters = defaultFilters.filter;\n    $('.filterUnitFacing, .filterUnitType').val('any');\n    resetUISlider(defaultFilters);\n    setFilters(defaultFilters);\n    $.fancybox.close();\n    applyClearFiltersEvent();\n  },\n  \"click .showEditPropertyForm\": function (event, template) {\n    var prevRoute = {\n      name: FlowRouter.current().route.name,\n      args: {\n        id: FlowRouter.current().params.id,\n        pageno: FlowRouter.current().params.pageno\n      },\n      scrollTo: 'body'\n    };\n    Session.set('prevRoute', prevRoute);\n    var propertyData = Session.get('propertyData');\n    FlowRouter.go('account/editproperty', {\n      id: propertyData._id\n    });\n  },\n  \"click .backBtn\": function (event, template) {\n    var prevRoute = Session.get('prevRoute');\n\n    if (prevRoute) {\n      FlowRouter.go(prevRoute.name, prevRoute.args);\n      Session.set('prevRoute', false);\n    } else {\n      // FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n      history.back(); //PPl can come to this page from many other pages.\n    }\n  },\n  \"click .pdExpandedBtn\": function (event, template) {\n    if (template.pdExpanded.get()) template.pdExpanded.set(false);else template.pdExpanded.set(true);\n  },\n  \"click .enablePMS\": function (event, template) {\n    // console.log('enablePMS clicked');\n    enablingPMS = template.enablingPMS;\n    enablingPMS.set(true);\n    Meteor.call('addManageProperty', FlowRouter.current().params.id, function (error, result) {\n      enablingPMS.set(false);\n\n      if (error) {\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Failed enabling this property. Please try again, try checking your internet connectivity. Contact us if needed.\");\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      if (result.status == 'Success') {\n        console.log(\"Success\");\n      }\n    });\n  }\n});\nTemplate.PM_bidList.onCreated(function () {\n  this.choosingInProgress = new ReactiveVar(false);\n  this.unChoosingInProgress = new ReactiveVar(false);\n});\nTemplate.PM_bidList.helpers({\n  user: function () {\n    // debugger;\n    var ret = Meteor.users.find({\n      _id: this.userId\n    }).fetch();\n    return ret[0];\n  },\n  canAfford: function (salary) {\n    //This works based on the bid (not rent)\n    if (!this.yourBid) {\n      return false;\n    }\n\n    if (salary * 0.4 >= this.yourBid) {\n      return true;\n    }\n\n    return false;\n  },\n  choosingInProgress: function () {\n    return Template.instance().choosingInProgress.get();\n  },\n  numDifferentiation: function (data) {\n    return numDifferentiation(data);\n  },\n  classBidList: function () {\n    if (this.chosen) return 'active';\n    var propertyData = Session.get('propertyData');\n\n    try {\n      var a = Collections.Auctions.find({\n        _id: propertyData.auction._id\n      }).fetch();\n      propertyData.auction = a[0];\n      if (propertyData.auction.chosenBids.length) return 'archive';\n    } catch (e) {}\n\n    return 'border-top';\n  }\n});\nTemplate.PM_bidList.events({\n  \"click .chooseTenant\": function (event, template) {\n    template.choosingInProgress.set(true);\n    choosingInProgress = template.choosingInProgress;\n    var r = confirm(\"Are you sure? This will send a confirmation mail to the applicant.\");\n\n    if (!r) {\n      template.choosingInProgress.set(false);\n      return;\n    }\n\n    Meteor.call('chooseWinning', [this.auctionId, this._id], function (error, result) {\n      choosingInProgress.set(false);\n\n      if (error) {\n        console.log(error);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(error.error);\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      console.log(\"Success\");\n    });\n  },\n  \"click .unChooseTenant\": function (event, template) {\n    template.unChoosingInProgress.set(true);\n    unChoosingInProgress = template.unChoosingInProgress;\n    var r = confirm(\"Are you sure? This will send a pending mail to the applicant.\");\n\n    if (!r) {\n      template.unChoosingInProgress.set(false);\n      return;\n    }\n\n    Meteor.call('unChooseWinning', [this.auctionId, this._id], function (error, result) {\n      unChoosingInProgress.set(false);\n\n      if (error) {\n        console.log(error);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(error.error);\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      console.log(\"Success\");\n    });\n  },\n  \"click .inviteForViewingBtn\": function (event, template) {\n    var propertyData = Session.get('propertyData');\n    var ret = Meteor.users.find({\n      _id: this.userId\n    }).fetch();\n    var inviteForViewing = Session.get('inviteForViewingData');\n    var today = new Date();\n    var tomorrow = new Date();\n    tomorrow.setDate(today.getDate() + 1);\n    tomorrow.setMinutes(0);\n    tomorrow.setSeconds(0);\n    var h = tomorrow.getHours();\n    if (h < 9) h = 9;else if (h > 20) h = 20;\n    tomorrow.setHours(h);\n    var inviteDate = tomorrow;\n\n    try {\n      if (inviteForViewing.inviteDate) inviteDate = inviteForViewing.inviteDate;\n    } catch (e) {}\n\n    Session.set('inviteForViewingData', {\n      user: ret[0],\n      bid: this,\n      inviteDate: inviteDate\n    });\n    $.fancybox({\n      'padding': 0,\n      'href': '#inviteForViewingDlg',\n      afterShow: function () {\n        var inviteForViewing = Session.get('inviteForViewingData');\n        var d = inviteForViewing.inviteDate;\n        var am = ' AM';\n        var df = d.getMonth() + 1 + '/' + d.getDate() + '/' + d.getFullYear() + ' ' + d.getHours() + ':' + d.getMinutes();\n        if (d.getHours() > 12) am = ' PM';\n        df = df + am;\n        $('#inviteDate').val(df);\n      }\n    });\n  }\n});\nTemplate.PM_propertyList.onCreated(function () {\n  this.expanded = new ReactiveVar(true);\n  this.showAddAuctionForm = new ReactiveVar(false);\n});\nTemplate.PM_propertyList.helpers({\n  expanded: function () {\n    return Template.instance().expanded.get();\n  },\n  auction: function () {\n    if (this._id) {\n      var ret = Collections.Auctions.find({\n        propertyId: this._id\n      }, {\n        limit: 1\n      });\n      var docs = ret.fetch();\n      return docs[0];\n    } else return [];\n  },\n  showAddAuctionForm: function () {\n    // debugger;\n    if (Session.get('hideAddAuctionForm') && Session.get('auctionId') == this.auctionId) {\n      Template.instance().showAddAuctionForm.set(false);\n      Session.set('auctionId', \"\");\n      Session.set('hideAddAuctionForm', false);\n    }\n\n    return Template.instance().showAddAuctionForm.get();\n  },\n  numDifferentiation: function (data) {\n    return numDifferentiation(data);\n  },\n  lettingprintviewData: function () {\n    if (!this.auction) return {\n      key: \"\"\n    };\n    return {\n      key: this.auction.lettingAuctionCode\n    };\n  },\n  chosenTenantCount: function () {\n    var PropertyManage = Session.get('PropertyManage');\n\n    if (PropertyManage.tenants) {\n      return PropertyManage.tenants.length;\n    } else {\n      return 0;\n    }\n  },\n  PropertyManage: function () {\n    return Session.get('PropertyManage');\n  }\n});\nTemplate.PM_propertyList.events({\n  \"click .prev_activations\": function (event, template) {\n    scrollTo('#activity_history_area', 0, 300);\n  },\n  \"click .viewTenants\": function (event, template) {\n    scrollTo('#viewTenantsArea', 0, 300);\n  },\n  \"click .showEditPropertyForm\": function (event, template) {\n    var prevRoute = {\n      name: FlowRouter.current().route.name,\n      args: {\n        pageno: FlowRouter.current().params.pageno\n      }\n    };\n    Session.set('prevRoute', prevRoute);\n    FlowRouter.go('account/editproperty', {\n      id: this._id\n    });\n  },\n  \"click .hideAddAuctionForm\": function (event, template) {\n    if (template.showAddAuctionForm.get()) template.showAddAuctionForm.set(false);\n    propId = this._id;\n    scrollTo('#property_' + propId, 0, 700);\n  },\n  \"click .viewApplications\": function (event, template) {\n    var prevRoute = {\n      name: FlowRouter.current().route.name,\n      args: {\n        pageno: FlowRouter.current().params.pageno\n      }\n    };\n    Session.set('prevRoute', prevRoute);\n    FlowRouter.go(\"account/propertyApplications\", {\n      id: this._id\n    });\n  },\n  \"click .showCopyDlg\": function (event, template) {\n    let user = Meteor.user();\n    let sluggedName = slugifyEmailAddress(user.profile.name);\n    if (!sluggedName) sluggedName = 'rent';\n    let email = sluggedName + '-let-' + this.auction.lettingAuctionCode.toLowerCase() + \"@spotmycrib.ie\";\n    $('#agentPropertyEmailField').val(email);\n    var url = FlowRouter.url('letting', {\n      key: this.auction.lettingAuctionCode\n    });\n    $('#propertyLinkField').val(url);\n    $.fancybox({\n      'padding': 0,\n      'href': '#propertyLinkDlg',\n      afterShow: function (template) {\n        $('#agentPropertyEmailField').select();\n        $('#propertyLinkDlg .copyEmailBtn').unbind().bind('click', function () {\n          $('#agentPropertyEmailField').select();\n\n          try {\n            var successful = document.execCommand('copy');\n            var msg = successful ? 'successful' : 'unsuccessful'; // console.log('Copying text command was ' + msg);\n\n            $.fancybox.close();\n          } catch (err) {\n            console.log('Oops, unable to copy');\n          }\n\n          ga('send', 'event', 'managePropertyPage', 'copyShareEmail', 'copyShareEmail Btn Clicked');\n        });\n        $('#propertyLinkDlg .copyLinkBtn').unbind().bind('click', function () {\n          $('#propertyLinkField').select();\n\n          try {\n            var successful = document.execCommand('copy');\n            var msg = successful ? 'successful' : 'unsuccessful'; // console.log('Copying text command was ' + msg);\n\n            $.fancybox.close();\n          } catch (err) {\n            console.log('Oops, unable to copy');\n          }\n\n          ga('send', 'event', 'managePropertyPage', 'copyShareLink', 'copyShareLink Btn Clicked');\n        });\n        $('#propertyLinkDlg .cancelBtn').unbind().bind('click', function () {\n          $.fancybox.close();\n        });\n      }\n    });\n  }\n});\ninviteInProgress = '';\nTemplate.addTenantDlg.onCreated(function () {\n  console.log('invite for viewing created');\n  this.inviteInProgress = new ReactiveVar(false);\n  inviteInProgress = this.inviteInProgress;\n});\nTemplate.addTenantDlg.helpers({\n  data: function () {\n    return Session.get('inviteForViewingData');\n  },\n  inviteInProgress: function () {\n    inviteInProgress = Template.instance().inviteInProgress;\n    return Template.instance().inviteInProgress.get();\n  },\n  inviteDateFormated: function () {\n    var inviteForViewing = Session.get('inviteForViewingData');\n    var options = {\n      weekday: \"long\",\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\"\n    };\n\n    try {\n      var d = inviteForViewing.inviteDate;\n      return d.toLocaleTimeString(\"en-us\", options);\n    } catch (e) {}\n\n    return;\n  },\n  propertyData: function () {\n    return Session.get('propertyData');\n  }\n});\nTemplate.addTenantDlg.events({\n  'change .inviteDate': function (event, template) {\n    var d = new Date($('.inviteDate').val());\n    var inviteForViewing = Session.get('inviteForViewingData');\n\n    try {\n      inviteForViewing.inviteDate = d;\n      Session.set('inviteForViewingData', inviteForViewing);\n    } catch (e) {}\n  },\n  'click .confirmInviteBtn': function () {\n    var inviteDate = $('.inviteDate').val();\n    var inviteMessage = $('.inviteMessage').val();\n    console.log(inviteDate);\n    var inviteForViewing = Session.get('inviteForViewingData');\n    inviteInProgress.set(true);\n    Meteor.call('sendInviteForViewingEmail', [inviteForViewing.bid._id, inviteDate], function (error, result) {\n      inviteInProgress.set(false);\n\n      if (error) {\n        console.log(error);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Failed applying. Please try again, try checking your internet connectivity. Contact us if needed.\");\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      if (result.status == 'Success') {\n        console.log(\"Success\");\n        closePopupEvent();\n      }\n    });\n  },\n  'click .closePopupBtn': function () {\n    closePopupEvent();\n  }\n});\nTemplate.addTenantDlg.onRendered(function () {\n  console.log('inviteForViewing rendered'); //Needs to be optimised, this is not the right place to put this code, might cause JS errors if Jquery isn' loaded yet.\n\n  try {\n    this.$('#inviteDate').datetimepicker();\n    this.$('#moveindate').datetimepicker();\n  } catch (err) {\n    console.log('dp failed');\n  }\n});\nTemplate.activity_history.onCreated(function () {\n  this.loadingMoreText = new ReactiveVar(true);\n  var resultsPerPage = Session.get('resultsPerPage');\n  if (!resultsPerPage) Session.set('resultsPerPage', 50);\n});\nTemplate.activity_history.helpers({\n  data: function () {\n    var user = Meteor.user();\n\n    if (!user) {\n      Template.instance().loadingMoreText.set(false);\n      return {\n        results: [],\n        totalResultsCount: 0\n      };\n    }\n\n    var id = FlowRouter.current().params.id;\n\n    if (!id) {\n      Template.instance().loadingMoreText.set(false);\n      return {\n        results: [],\n        totalResultsCount: 0\n      };\n    }\n\n    var selector = {\n      propertyId: id\n    }; //let limit = 10;\n    // debugger;\n    // var FILTERS = Session.get('prop_activation_filters')\n    // var defaultFilters = getDefaultFilters();\n    // var arr = [];\n    // if(  FILTERS['homeType'] ){\n    //     if(FILTERS['homeType'].length) {\n    //         if(FILTERS['homeType'].length != defaultFilters.homeType.length)\n    //             selector['homeType'] = FILTERS['homeType'][0]\n    //         /*\n    //          // var arr = [];\n    //          for (var i = 0; i < FILTERS['homeType'].length; i++) {\n    //          arr.push({\"homeType\": FILTERS['homeType'][i]})\n    //          console.log(\"homeType\"+ FILTERS['homeType'][i])\n    //          }*/\n    //         // selector['$or'] = arr;//BUG: this or will over write or of facing; or of homeType will collide with this and\n    //         // while logic won't work\n    //\n    //     }\n    // }\n    // if(  FILTERS['facing'] ){\n    //     if(FILTERS['facing'].length) {\n    //         if(FILTERS['facing'].length != defaultFilters.facing.length)\n    //             selector['facing'] = FILTERS['facing'][0]\n    //         /*\n    //          var arr = [];\n    //          for (var i = 0; i < FILTERS['facing'].length; i++) {\n    //          arr.push({\"facing\": FILTERS['facing'][i]})\n    //          }\n    //          // selector['$or'] = arr;//BUG: this or will over write or of homeType; or of homeType will collide with this and\n    //          // while logic won't work\n    //          */\n    //     }\n    // }\n    // if(arr.length){\n    //     selector['$or'] = arr;\n    // }\n    // if( FILTERS['floor'] ){\n    //     var val_l = FILTERS['floor'][0];\n    //     var val_h = FILTERS['floor'][1];\n    //\n    //     if(isNaN(val_l) && isNaN(val_h)){//Both are not valid numbers\n    //\n    //     }else if(!isNaN(val_l) && isNaN(val_h)){//Low is valid and no upper\n    //         selector['floorLevel'] =  { $gte: parseInt(val_l) }\n    //     }else if(isNaN(val_l) && !isNaN(val_h)){//Upper is valid and no lower\n    //         selector['floorLevel'] =  { $lte: parseInt(val_h) }\n    //     }else{//Both are valid\n    //         selector['floorLevel'] =  { $gte: parseInt(val_l), $lte: parseInt(val_h) }\n    //     }\n    // }\n    // if( FILTERS['priceRange'] ){\n    //     var val_l = FILTERS['priceRange'][0];\n    //     var val_h = FILTERS['priceRange'][1];\n    //\n    //     if(isNaN(val_l) && isNaN(val_h)){//Both are not valid numbers\n    //\n    //     }else if(!isNaN(val_l) && isNaN(val_h)){//Low is valid and no upper\n    //         selector['priceBreakUp.totalAllInclusive'] =  { $gte: parseInt(val_l) }\n    //     }else if(isNaN(val_l) && !isNaN(val_h)){//Upper is valid and no lower\n    //         selector['priceBreakUp.totalAllInclusive'] =  { $lt: parseInt(val_h) }\n    //     }else{//Both are valid\n    //         selector['priceBreakUp.totalAllInclusive'] =  { $gte: parseInt(val_l), $lte: parseInt(val_h) }\n    //     }\n    // }\n    /////PAGINATION\n    // var resultsPerPage = 20;\n    // var currentPageNo = FlowRouter.current().params.pageno;\n    // if(!currentPageNo){currentPageNo = 1}\n    // var skip = (currentPageNo -1) * resultsPerPage;\n    // var urlBase = 'account/myproperies/';\n\n    var totalResultsCount = Collections.ActivityHistory.find(selector).count();\n    var ret = Collections.ActivityHistory.find(selector, {\n      limit: Session.get('resultsPerPage'),\n      sort: {\n        createdAt: -1\n      } // skip: skip\n\n    });\n    Template.instance().loadingMoreText.set(false);\n    return {\n      results: ret,\n      totalResultsCount: totalResultsCount\n    };\n  },\n  loadingMoreText: function () {\n    return Template.instance().loadingMoreText.get();\n  },\n  decideTemplate: function (type) {}\n});\nTemplate.activity_history.events({\n  'click .load_more': function (event, template) {\n    Template.instance().loadingMoreText.set(true);\n    var resultsPerPage = Session.get('resultsPerPage');\n    resultsPerPage *= 2;\n    Session.set('resultsPerPage', resultsPerPage);\n    var id = FlowRouter.current().params.id;\n    Meteor.subscribe(\"ActivityHistory\", {\n      limit: resultsPerPage,\n      id: id\n    });\n  }\n});\nTemplate.activity_history.onRendered(function () {\n  Template.instance().loadingMoreText.set(false);\n});\n\nfunction attachEvents() {\n  $(\".deactivateConfirmBtn\").unbind().bind(\"click\", function () {\n    deactivateConfEvent();\n  });\n  $(\".closePopupBtn\").unbind().bind(\"click\", function () {\n    closePopupEvent();\n  });\n}\n\nfunction deactivateConfEvent() {\n  var data = Session.get(\"propertyData\");\n  var auctionId = data.auctionId;\n  deactivateInProgress.set(true);\n  Meteor.call('deactivateAuction', auctionId, function (error, result) {\n    deactivateInProgress.set(false);\n\n    if (error) {\n      console.log(error);\n      var tmp = Session.get(\"showErrorDlg\");\n      if (!tmp) tmp = [];\n      tmp.push(\"Failed deactivating. Please try again, try checking your internet connectivity. Contact us if needed.\");\n      Session.set(\"showErrorDlg\", tmp);\n      return;\n    }\n\n    console.log(\"Success\");\n    closePopupEvent();\n    var prevRoute = Session.get('prevRoute');\n\n    if (prevRoute) {\n      FlowRouter.go(prevRoute.name, prevRoute.args);\n      Session.set('prevRoute', false);\n    } else {\n      FlowRouter.go(\"/account/myproperies/\", {\n        pageno: 1\n      });\n    }\n  });\n}\n\nfunction closePopupEvent() {\n  console.log('closePopupEvent');\n  if ($) if ($.fancybox) $.fancybox.close();\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction slugifyEmailAddress(text) {\n  if (!text) return '';\n  const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ/_,:;';\n  const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return text.toString().toLowerCase().replace(/\\s+/g, '.') // Replace spaces with \".\"\n  .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n  .replace(/&/g, '-and-') // Replace & with ''\n  // .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single ''\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"shared.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/templates/shared.js                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * Created by njanjanam on 20/05/2017.\n */\nupdateGalleriesInServer = function (editPropertyImages, propertyId, callback) {\n  if (!editPropertyImages || !propertyId) return;\n  var tmp = [],\n      arr = [];\n\n  if (editPropertyImages.length) {\n    for (var i = 0; i < editPropertyImages.length; i++) {\n      if (editPropertyImages[i].name) {\n        //Means file is not coming from our traditional file uploader\n        tmp.push(editPropertyImages[i]);\n      } else {\n        //Else its insert properties form\n        tmp.push({\n          name: editPropertyImages[i].file.original_name,\n          relative_url: editPropertyImages[i].relative_url,\n          url: editPropertyImages[i].secure_url\n        });\n      }\n    }\n  }\n\n  console.log(tmp);\n  Meteor.call('updateGalleries', [propertyId, tmp], callback);\n};\n\nupdateGalleriesInProfile = function (editPropertyImages, callback) {\n  if (!editPropertyImages) return;\n  var tmp = [],\n      arr = [];\n\n  if (editPropertyImages.length) {\n    for (var i = 0; i < editPropertyImages.length; i++) {\n      if (editPropertyImages[i].name) {\n        //Means file is not coming from our traditional file uploader\n        tmp.push(editPropertyImages[i]);\n      } else {\n        //Else its insert properties form\n        tmp.push({\n          name: editPropertyImages[i].file.original_name,\n          relative_url: editPropertyImages[i].relative_url,\n          url: editPropertyImages[i].secure_url\n        });\n      }\n    }\n  }\n\n  console.log(tmp);\n  Meteor.call('updateGalleriesInUserProfile', tmp, callback);\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"tenant.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/templates/tenant.js                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./profile.js\");\nmodule.link(\"./tenant.html\");\nTemplate.tenant.onCreated(function () {\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.autorun(function () {\n    instance.subscribe('userData'); //works only if viewing your profile\n\n    instance.subscribe('userDataUsername', FlowRouter.getParam('username')); //works if viewing your profile and others\n\n    if (instance.subscriptionsReady()) {\n      instance.isSubsLoaded.set(true);\n    }\n  });\n});\nTemplate.tenant.helpers({\n  isSubsLoaded: function () {\n    return Template.instance().subscriptionsReady();\n  },\n  userLoggedIn: function () {\n    if (Meteor.user()) return true;\n    return false;\n  },\n  isViewingHisProfile: function () {\n    var currentUser = Accounts.user();\n    var username = FlowRouter.getParam('username');\n\n    try {\n      if (currentUser.profile.username == username) return true;\n    } catch (e) {}\n\n    return false;\n  },\n  isPublicProfile: function () {\n    var username = FlowRouter.getParam('username');\n    var u1 = Meteor.users.findOne({\n      \"profile.username\": username\n    }, {\n      limit: 1\n    });\n\n    try {\n      if (u1.profile.isPublic) {\n        clearMeta();\n        DocHead.setTitle(titleCase(u1.profile.name) + '\\'s profile | Teanat Profile SpotMyCrib');\n        DocHead.addMeta({\n          name: \"description\",\n          content: \"View and download \" + titleCase(u1.profile.name) + \"'s references.\"\n        });\n        return true;\n      }\n    } catch (e) {}\n\n    return false;\n  },\n  userFound: function () {\n    var username = FlowRouter.getParam('username');\n    var u1 = Meteor.users.findOne({\n      \"profile.username\": username\n    }, {\n      limit: 1\n    });\n    if (u1) return true;\n    clearMeta();\n    DocHead.setTitle(' User not found | SpotMyCrib');\n    DocHead.addMeta({\n      name: \"description\",\n      content: \"\"\n    });\n    return false;\n  },\n  userFirstName: function () {\n    var username = FlowRouter.getParam('username');\n    var u1 = Meteor.users.find({\n      \"profile.username\": username\n    }, {\n      limit: 1\n    }).fetch();\n\n    try {\n      clearMeta();\n      DocHead.setTitle(titleCase(u1.profile.name) + '\\'s profile | Teanat Profile SpotMyCrib');\n      DocHead.addMeta({\n        name: \"description\",\n        content: \"\"\n      });\n      var tmp = u1.profile.name.split(' ');\n      return tmp[0];\n    } catch (e) {}\n\n    return 'Tenant';\n  },\n  user: function () {\n    var username = FlowRouter.getParam('username');\n    return Meteor.users.find({\n      \"profile.username\": username\n    }, {\n      limit: 1\n    });\n  }\n});\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"tenants.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/ui/templates/tenants.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./pagination.html\");\nmodule.link(\"./tenants.html\");\nTemplate.tenants.onCreated(function () {\n  var instance = this;\n  instance.isSubsLoaded = new ReactiveVar(false);\n  instance.autorun(function () {\n    instance.subscribe('userData');\n    var pageno = FlowRouter.getParam('pageno');\n    if (!pageno) pageno = 1;\n    instance.subscribe(\"tenants\", pageno);\n\n    if (instance.subscriptionsReady()) {\n      instance.isSubsLoaded.set(true);\n    }\n  });\n});\nTemplate.tenants.helpers({\n  isSubsLoaded: function () {\n    return Template.instance().subscriptionsReady();\n  },\n  userLoggedIn: function () {\n    if (Meteor.user()) return true;\n    return false;\n  },\n  dataFull: function () {\n    var pageno = FlowRouter.getParam('pageno');\n    if (!pageno) pageno = 1;\n    var totalResultsCount = Meteor.users.find().count(); /////PAGINATION\n\n    var resultsPerPage = 10;\n    var currentPageNo = FlowRouter.getParam('pageno');\n\n    if (!currentPageNo) {\n      currentPageNo = 1;\n    }\n\n    var urlBase = 'tenants/';\n    return {\n      totalResultsCount: totalResultsCount,\n      results: Meteor.users.find(),\n      pagination: getPaginationData(totalResultsCount, currentPageNo, urlBase, resultsPerPage)\n    };\n  }\n});\nTemplate.tenantList.helpers({\n  userFirstName: function () {\n    try {\n      var tmp = this.user.profile.name.split(' ');\n      return tmp[0];\n    } catch (e) {}\n  }\n});\nTemplate.tenantList.events({\n  'click .inviteToApply': function (event, template) {\n    ga('send', 'event', 'tenantsPage', 'inviteToApplyBtnClicked', 'Invite To Apply Btn Clicked');\n    var user = Meteor.user();\n\n    if (!user) {\n      //Login is needed.\n      Session.set('showForgotForm', false);\n      Session.set('showSignupForm', false);\n      Session.set('showLoginSignupFancyBoxDialog', true);\n      Session.set('showLoginDialog', true);\n      return;\n    }\n\n    Session.set('inviteToApplyData', {\n      user: this.user\n    });\n    $.fancybox({\n      'padding': 0,\n      'href': '#inviteToApplyDlg' // afterShow:function () {}\n\n    });\n  }\n});\ninviteInProgress = '';\nTemplate.inviteToApply.onCreated(function () {\n  this.inviteInProgress = new ReactiveVar(false);\n  inviteInProgress = this.inviteInProgress;\n  Meteor.subscribe('inviteToApply.MyActiveAdvertisements');\n});\nTemplate.inviteToApply.helpers({\n  data: function () {\n    return Session.get('inviteToApplyData');\n  },\n  myAdvertisements: function () {\n    var select = {\n      \"isArchived\": false,\n      \"createdByAgent\": Meteor.userId()\n    };\n    var totalResultsCount = Collections.Auctions.find(select).count();\n    return {\n      totalResultsCount: totalResultsCount,\n      results: Collections.Auctions.find(select)\n    };\n  },\n  userFirstName: function () {\n    var data = Session.get('inviteToApplyData');\n\n    try {\n      var tmp = data.user.profile.name.split(' ');\n      return tmp[0];\n    } catch (e) {}\n  },\n  inviteInProgress: function () {\n    // console.log('h 1 ')\n    // console.log(Template.instance().inviteInProgress.get())\n    inviteInProgress = Template.instance().inviteInProgress;\n    return Template.instance().inviteInProgress.get();\n  }\n});\nTemplate.inviteToApply.events({\n  'click .advertiseMyProperty': function () {\n    closePopupEvent();\n    FlowRouter.go('account/myProperties');\n  },\n  'click .confirmInviteBtn': function () {\n    var selectedAdvertisements = [];\n    $.each($(\".selectedAdvertisements option:selected\"), function () {\n      selectedAdvertisements.push($(this).val());\n    });\n\n    if (!selectedAdvertisements.length) {\n      alert('Please choose at least 1 advertisement to proceed');\n      return;\n    }\n\n    var data = Session.get('inviteToApplyData');\n    inviteInProgress.set(true);\n    Meteor.call('sendInviteToApplyEmail', [selectedAdvertisements, data.user._id], function (error, result) {\n      inviteInProgress.set(false);\n\n      if (error) {\n        console.log(error);\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        tmp.push(\"Failed applying. Please try again, try checking your internet connectivity. Contact us if needed.\");\n        Session.set(\"showErrorDlg\", tmp);\n        return;\n      }\n\n      if (result.status == 'Success') {\n        console.log(\"Success\");\n        closePopupEvent();\n      }\n    });\n  },\n  'click .closePopupBtn': function () {\n    closePopupEvent();\n  }\n});\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction getPaginationData(totalResultsCount, currentPageNo, urlBase, resultsPerPage) {\n  var pages = [],\n      prevPage = {},\n      nextPage = {};\n  var pgMin = currentPageNo - 4,\n      pgMax = currentPageNo + 5,\n      maxPages = Math.ceil(totalResultsCount / resultsPerPage);\n  if (pgMin < 1) pgMin = 1;\n  if (pgMax < 1) pgMax = 1;\n  if (maxPages < 1) maxPages = 1;\n  if (pgMin > maxPages) currentPageNo = maxPages;\n  var tmp = {};\n\n  for (var i = pgMin; i <= maxPages; i++) {\n    var href = urlBase + i + \"/\";\n    tmp = {\n      \"href\": href,\n      \"text\": i\n    };\n\n    if (i == currentPageNo) {\n      tmp['href'] = 'javascript:void(0);';\n      tmp['current'] = true;\n    }\n\n    pages.push(tmp);\n  } // if(pgMin==maxPages){//Above loop won't work if only 1 page result\n  //     pages.push({\n  //         \"href\": 'javascript:void(0);',\n  //         \"text\": 1\n  //     })\n  // }\n\n\n  var prevPageNo = currentPageNo - 1,\n      nextPageNo = currentPageNo + 1;\n\n  if (prevPageNo < 1) {\n    prevPage['href'] = 'javascript:void(0)';\n    prevPage['text'] = 'Previous';\n    prevPage['disabled'] = 'disabled';\n  } else {\n    prevPage['href'] = urlBase + prevPageNo + \"/\";\n    prevPage['text'] = 'Previous';\n  }\n\n  if (nextPageNo > maxPages) nextPageNo = maxPages;\n\n  if (nextPageNo == currentPageNo) {\n    nextPage['href'] = 'javascript:void(0)';\n    nextPage['text'] = 'Next';\n    nextPage['disabled'] = 'disabled';\n  } else {\n    nextPage['href'] = urlBase + nextPageNo + \"/\";\n    nextPage['text'] = 'Next';\n  }\n\n  return {\n    \"prevPage\": prevPage,\n    \"pages\": pages,\n    \"nextPage\": nextPage\n  };\n}\n\nfunction closePopupEvent() {\n  console.log('closePopupEvent');\n  if ($) if ($.fancybox) $.fancybox.close();\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"api\":{\"collections.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/api/collections.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  Collections: () => Collections\n});\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\n// import \"./schemas.js\";\n// export const Tasks = new Mongo.Collection('Property');\n// import SimpleSchema from \"simpl-schema\";\n// SimpleSchema.extendOptions(['autoform']);\nmodule.runSetters(Collections = {});\nCollections.Properties = new Mongo.Collection(\"Properties\");\nCollections.Bids = new Mongo.Collection(\"Bids\");\nCollections.Auctions = new Mongo.Collection(\"Auctions\");\nCollections.Agents = new Mongo.Collection(\"Agents\");\nCollections.Config = new Mongo.Collection(\"Config\");\nCollections.PropertyManage = new Mongo.Collection(\"PropertyManage\");\nCollections.ActivityHistory = new Mongo.Collection(\"ActivityHistory\");\nCollections.Areas = new Mongo.Collection(\"Areas\");\nCollections.Blogs = new Mongo.Collection(\"Blogs\");\nCollections.EmailEnquiries = new Mongo.Collection(\"EmailEnquiries\");\nCollections.EmailRequests = new Mongo.Collection(\"EmailRequests\");\nCollections.Properties.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.Properties.before.update(function (userId, doc, fieldNames, modifier, options) {\n  var skip = false;\n  if (Array.isArray(fieldNames)) if (fieldNames.indexOf('auctionHistory') != -1) {\n    if (modifier['$set']['auctionId'] == \"\" && modifier['$set']['rent'] == \"\") skip = true; //This is for deactivate\n  }\n\n  if (!skip) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date();\n  }\n});\nCollections.Bids.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.Bids.before.update(function (userId, doc, fieldNames, modifier, options) {\n  modifier.$set = modifier.$set || {};\n  modifier.$set.updatedAt = new Date();\n});\nCollections.Auctions.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.Auctions.before.update(function (userId, doc, fieldNames, modifier, options) {\n  var skip = false;\n  if (Array.isArray(fieldNames)) if (fieldNames.length == 1 && fieldNames.indexOf('views') != -1) {\n    // console.log('Its just view, so skipping')\n    skip = true;\n  }\n  if (fieldNames['isArchived'] == true) skip = true; //This is for deactivate\n\n  if (!skip) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date();\n  }\n});\nCollections.Agents.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.Agents.before.update(function (userId, doc, fieldNames, modifier, options) {\n  modifier.$set = modifier.$set || {};\n  modifier.$set.updatedAt = new Date();\n});\nCollections.Config.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.Config.before.update(function (userId, doc, fieldNames, modifier, options) {\n  modifier.$set = modifier.$set || {};\n  modifier.$set.updatedAt = new Date();\n});\nCollections.PropertyManage.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.PropertyManage.before.update(function (userId, doc, fieldNames, modifier, options) {\n  modifier.$set = modifier.$set || {};\n  modifier.$set.updatedAt = new Date();\n});\nCollections.ActivityHistory.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.ActivityHistory.before.update(function (userId, doc, fieldNames, modifier, options) {\n  modifier.$set = modifier.$set || {};\n  modifier.$set.updatedAt = new Date();\n});\nCollections.Areas.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.Areas.before.update(function (userId, doc, fieldNames, modifier, options) {\n  modifier.$set = modifier.$set || {};\n  modifier.$set.updatedAt = new Date();\n});\nCollections.Blogs.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.Blogs.before.update(function (userId, doc, fieldNames, modifier, options) {\n  modifier.$set = modifier.$set || {};\n  modifier.$set.updatedAt = new Date();\n});\nCollections.EmailEnquiries.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.EmailEnquiries.before.update(function (userId, doc, fieldNames, modifier, options) {\n  modifier.$set = modifier.$set || {};\n  modifier.$set.updatedAt = new Date();\n});\nCollections.EmailRequests.before.insert(function (userId, doc) {\n  doc.createdAt = new Date();\n  doc.updatedAt = new Date();\n});\nCollections.EmailRequests.before.update(function (userId, doc, fieldNames, modifier, options) {\n  modifier.$set = modifier.$set || {};\n  modifier.$set.updatedAt = new Date();\n});\n\nif (Meteor.isClient) {\n  Collections.PA_AvgOffer = new Mongo.Collection(\"avgOffer\");\n}\n\nif (Meteor.isServer) {\n  Collections.propertyAlerts = new Mongo.Collection(\"propertyAlerts\");\n  Collections.propertyAlerts.before.insert(function (userId, doc) {\n    if (userId) doc.userId = userId;\n    doc.createdAt = new Date();\n    doc.updatedAt = new Date();\n  });\n  Collections.propertyAlerts.before.update(function (userId, doc, fieldNames, modifier, options) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date();\n  });\n} // Collections.Auctions.attachSchema(Schema.Auctions);\n// Collections.Properties.attachSchema(Schema.Properties);\n// Collections.Bids.attachSchema(Schema.Bids);\n\n\nUI.registerHelper(\"retCollectionProperties\", function () {\n  return Collections.Properties;\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"profile.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/api/profile.js                                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./collections.js\");\nlet check;\nmodule.link(\"meteor/check\", {\n  check(v) {\n    check = v;\n  }\n\n}, 0);\nMeteor.methods({\n  updateReferenceFile: function (args) {\n    // check([], []);\n    console.log(\"server method updateReferenceFile called\");\n    const userId = Meteor.userId();\n    var p1 = '';\n    var p2 = '';\n\n    switch (args[0]) {\n      case \"Resume\":\n        p1 = \"hasResume\";\n        p2 = \"resume\";\n        break;\n\n      case \"Work Reference\":\n        p1 = \"hasWorkRef\";\n        p2 = \"workRef\";\n        break;\n\n      case \"Landlord Reference\":\n        p1 = \"hasLandlordRef\";\n        p2 = \"landlordRef\";\n        break;\n\n      case \"Financial Reference\":\n        p1 = \"hasFinancialRef\";\n        p2 = \"financialRef\";\n        break;\n\n      case \"Government ID\":\n        p1 = \"hasGovtID\";\n        p2 = \"govtID\";\n        break;\n\n      case \"Passport\":\n        p1 = \"hasPassport\";\n        p2 = \"passport\";\n        break;\n\n      case \"PPS\":\n        p1 = \"hasPPS\";\n        p2 = \"PPS\";\n        break;\n    }\n\n    if (p1 && p2) {\n      p1 = \"profile.references.\" + p1;\n      p2 = \"profile.references.\" + p2;\n      var setObj = {};\n      setObj[p1] = true;\n      setObj[p2] = args[1];\n      console.log(p1);\n      console.log(p2);\n      console.log(setObj);\n      Meteor.users.update(userId, {\n        $set: setObj\n      });\n    }\n\n    return {\n      status: 'Success'\n    };\n  },\n  updateMobile: function (newMobile) {\n    // check(newMobile, []);\n    console.log(\"server method updateMobile called\");\n    const userId = Meteor.userId();\n    Meteor.users.update({\n      \"_id\": userId\n    }, {\n      $set: {\n        \"profile.mobile\": newMobile,\n        \"profile.isMobileVerified\": false\n      }\n    });\n    return {\n      status: 'Success'\n    };\n  },\n  updateEmployerName: function (newEmp) {\n    check(newEmp, String);\n\n    if (!newEmp.length || newEmp.length < 2) {\n      throw new Meteor.Error(500, 'Invalid employee name', 'Employee name cannot be less then 2 characters.');\n    }\n\n    console.log(\"server method updateEmployerName called: \" + newEmp);\n    const userId = Meteor.userId();\n    Meteor.users.update({\n      \"_id\": userId\n    }, {\n      $set: {\n        \"profile.references.employerName\": newEmp\n      }\n    });\n    return {\n      status: 'Success'\n    };\n  },\n  updateEmployerTakeHome: function (salary) {\n    check(salary, Number);\n\n    if (salary < 0 || salary > Number.MAX_VALUE) {\n      throw new Meteor.Error(500, 'Invalid employee take home', 'Employee take home salary cannot be less then 0 or too large.');\n    }\n\n    console.log(\"server method updateEmployerTakeHome called: \" + salary);\n    const userId = Meteor.userId();\n    Meteor.users.update({\n      \"_id\": userId\n    }, {\n      $set: {\n        \"profile.references.employerTakeHome\": salary\n      }\n    });\n    return {\n      status: 'Success'\n    };\n  },\n  sendOTP: function (args) {\n    check(args, Match.Any);\n    console.log(\"server method sendOTP called\");\n\n    if (!isLoggedOn()) {\n      throw new Meteor.Error(500, 'Error 500: Login needed', 'Please login before you request.');\n    }\n\n    const user = Meteor.user();\n\n    if (user.profile.isMobileVerified) {\n      throw new Meteor.Error(500, 'Error 500: Mobile already verified. ', 'Your mobile is already verified.');\n    } //DON'T need below code as we will be using this method for both send and RESEND.\n    //if(user.profile.OTPValue){\n    //  var today = new Date();\n    //  var OTPSentOn = new Date(user.profile.OTPSentOn);\n    //  var diffMs = (OTPSentOn - today); // milliseconds between now & Christmas\n    //  var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000); // minutes\n    //  if(diffMins > 15){//OTP has expired\n    //\n    //  }else{//OTP previous OTP is still valid.\n    //\n    //  }\n    //}\n\n\n    const newOTP = Math.floor(100000 + Math.random() * 900000);\n    const userEmail = user.profile.email;\n    const username = user.profile.name; //TODO separate SMS sending in an this.unblock method\n\n    /* Send OTP via email */\n\n    Meteor.call(\"sendNotificationEmail\", {\n      template: \"otpEmail\",\n      user: {\n        profile: {\n          username: username\n        }\n      },\n      otp: newOTP,\n      subject: \"IBidMyHome OTP: Verify your mobile number\",\n      mailTo: user.profile.email\n    });\n    /* Send OTP via mobile*/\n\n    var OPTsmsText = 'Your OTP is: ' + newOTP;\n    var APIURL = 'http://atrans.smscuppa.com/sendsms.jsp?user=mybids&password=mybids&mobiles=' + user.profile.mobile + '&general=' + OPTsmsText + '&senderid=MYBIDS&version=3';\n    var APIURL = 'http://atrans.smscuppa.com/sendsms.jsp';\n    var options = {\n      \"params\": {\n        \"user\": \"mybids\",\n        \"password\": \"mybids\",\n        \"mobiles\": user.profile.mobile,\n        \"sms\": OPTsmsText,\n        \"senderid\": \"MYBIDS\",\n        \"version\": \"3\"\n      },\n      \"headers\": {//\"X-API-KEY\" : APIKey,\n        //\"X-Auth-Token\" : AUTHToken\n      }\n    };\n    var response = HTTP.get(APIURL, options);\n    Meteor.users.update({\n      \"_id\": user._id\n    }, {\n      $currentDate: {\n        \"profile.OTPSentOn\": {\n          $type: \"timestamp\"\n        }\n      },\n      $set: {\n        \"profile.OTPValue\": newOTP\n      }\n    });\n    return {\n      status: 'Success'\n    };\n  },\n  verifyOTP: function (args) {\n    check(args, Match.Any);\n    var otp = args[0];\n    console.log(\"server method verifyOTP called\");\n\n    if (!isLoggedOn()) {\n      throw new Meteor.Error(500, 'Error 500: Login needed', 'Please login before you request.');\n    }\n\n    const user = Meteor.user();\n\n    if (user.profile.OTPValue) {\n      var today = new Date();\n      var OTPSentOn = new Date(user.profile.OTPSentOn);\n      var diffMs = OTPSentOn - today; // milliseconds between now & Christmas\n\n      var diffMins = Math.round(diffMs % 86400000 % 3600000 / 60000); // minutes\n\n      if (diffMins > 15) {\n        //OTP has expired\n        throw new Meteor.Error(500, 'Error 500: OTP has expired', 'Your OTP has expired.');\n      } else {//OTP previous OTP is still valid.\n      }\n    } else {\n      throw new Meteor.Error(500, 'Error 500: OTP is not valid', 'You need an OTP to verify.');\n    }\n\n    if (user.profile.OTPValue == otp) {\n      Meteor.users.update({\n        \"_id\": user._id\n      }, {\n        $set: {\n          \"profile.isMobileVerified\": true\n        }\n      });\n    } else {\n      throw new Meteor.Error(500, 'Error 500: OTP is not valid', 'OTP entered is wrong.');\n    }\n\n    return {\n      status: 'Success'\n    };\n  }\n});\n\nfunction randomString(length, chars) {\n  var mask = '';\n  if (chars.indexOf('a') > -1) mask += 'abcdefghijklmnopqrstuvwxyz';\n  if (chars.indexOf('A') > -1) mask += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  if (chars.indexOf('#') > -1) mask += '0123456789';\n  if (chars.indexOf('!') > -1) mask += '~`!@#$%^&*()_+-={}[]:\";\\'<>?,./|\\\\';\n  var result = '';\n\n  for (var i = length; i > 0; --i) result += mask[Math.floor(Math.random() * mask.length)];\n\n  return result;\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"properties.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/api/properties.js                                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./collections.js\");\nlet check;\nmodule.link(\"meteor/check\", {\n  check(v) {\n    check = v;\n  }\n\n}, 0);\n// import TokenGen from 'token-gen';\nMeteor.methods({\n  addProperty: function (data) {\n    console.log(\"common method addProperty called\");\n    const userId = Meteor.userId();\n    console.log(userId);\n\n    if (!userId) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    var doc = {\n      \"address\": {\n        \"address\": getA(data, 'address.address'),\n        \"county\": getA(data, 'address.county'),\n        \"area\": getA(data, 'address.area'),\n        \"country\": \"Ireland\"\n      },\n      \"type\": getA(data, 'type'),\n      \"baths\": parseInt(getA(data, 'baths')),\n      \"furnished\": getA(data, 'furnished') == \"true\" ? true : false,\n      \"contacts\": [{\n        \"name\": getA(data, 'contacts.0.name'),\n        \"phone\": getA(data, 'contacts.0.phone'),\n        \"email\": getA(data, 'contacts.0.email')\n      }],\n      \"about\": getA(data, 'about'),\n      \"amenities\": getA(data, 'amenities'),\n      \"createdByAgent\": userId,\n      \"isArchived\": false,\n      \"createdAt\": new Date(),\n      \"updatedAt\": new Date()\n    };\n    var slug = '';\n    if (doc.type) slug = doc.type;\n    if (doc.address.address) slug += '-' + doc.address.address;\n    if (doc.address.area) slug += '-' + doc.address.area;\n    if (doc.address.county) slug += '-' + doc.address.county;\n    doc.slug = slugify(slug); // {name: \"bedrooms.0.ensuite\", value: \"on\"}\n    // 8\n    // :\n    // {name: \"bedrooms.0.bedType\", value: \"single\"}\n    // \"bedrooms\" : [\n    //     {\n    //         \"bedType\" : \"double\",\n    //         \"ensuite\" : true\n    //     },\n    //     {\n    //         \"bedType\" : \"single\",\n    //         \"ensuite\" : false\n    //     }\n    // ],\n\n    var isImported = getA(data, 'isImported');\n\n    if (isImported == 'true') {\n      doc['isImported'] = true;\n      let url = getA(data, 'url');\n\n      if (url) {\n        doc.importData = {\n          'url': url,\n          'lastCheckedDate': new Date()\n        };\n      }\n    }\n\n    var numBedRoomCount = getA(data, 'numBedRoomCount');\n\n    if (numBedRoomCount) {\n      var bedrooms = [];\n\n      for (var i = 0; i < numBedRoomCount; i++) {\n        var bne = \"bedrooms.\" + i + \".ensuite\";\n        var bnt = \"bedrooms.\" + i + \".bedType\";\n        var tmp = {};\n        if (getA(data, bne)) tmp.ensuite = true;else tmp.ensuite = false;\n        tmp.bedType = getA(data, bnt);\n        bedrooms.push(tmp);\n      }\n\n      doc['bedrooms'] = bedrooms;\n      doc['bedCount'] = bedrooms.length;\n    } else {\n      doc['bedrooms'] = [];\n      doc['bedCount'] = '1'; //default 1\n    }\n\n    var docId = Collections.Properties.insert(doc); //, {validationContext: 'create'}, function(err, res) {\n    //     if (err) {\n    //         throw new Meteor.Error(400, Collections.Properties.simpleSchema().namedContext('create').invalidKeys());\n    //     }\n    //     return res;\n    // });\n\n    Meteor.call('addManageProperty', docId); //Don't show meteor error as users can also enable this later.\n\n    return docId;\n  }\n});\n\nArray.prototype.pushUnique = function (item) {\n  if (this.indexOf(item) == -1) {\n    //if(jQuery.inArray(item, this) == -1) {\n    this.push(item);\n    return true;\n  }\n\n  return false;\n};\n\nfunction getA(arr, find) {\n  if (!Array.isArray(arr)) return;\n  var eles = [];\n\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i]['name'] == find) eles.push(arr[i]['value']);\n  }\n\n  if (find == 'amenities') return eles;\n  if (eles.lenght > 1) return eles;\n  if (eles.lenght == 0) return false;\n  return eles[0];\n}\n\nfunction slugify(text) {\n  if (!text) return '';\n  const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/_,:;';\n  const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return text.toString().toLowerCase().replace(/\\s+/g, '-') // Replace spaces with -\n  .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n  .replace(/&/g, '-and-') // Replace & with 'and'\n  .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"publications.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/api/publications.js                                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./collections.js\");\n\nif (Meteor.isClient) {} //PUBLICATIONS\n\n\nif (Meteor.isServer) {\n  Meteor.publish(\"PropertyManage\", function (terms) {\n    var parameters = queryConstructor(terms);\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    return Collections.PropertyManage.find(parameters.find, parameters.options);\n  });\n  Meteor.publish(\"ActivityHistory\", function (terms) {\n    // console.log('ActivityHistory');\n    return Collections.ActivityHistory.find({\n      propertyId: terms.id\n    }, {\n      limit: terms.limit,\n      sort: {\n        createdAt: -1\n      }\n    });\n  });\n  Meteor.publish(\"avgOffer\", function (auctionId) {\n    // console.log(\"Subscribed: auctionId: \"+auctionId)\n    // var self = this;\n    // var handle = Collections.Bids.aggregate([\n    //     { $match : { \"auctionId\" : auctionId } },\n    //     { $group : {\n    //             '_id': this.userId,\n    //             'avgOffer': {\n    //                 // In this case, we're running summation.\n    //                 $avg: '$yourBid'\n    //             }\n    //         }\n    //     }\n    // ]).forEach(function(data) {\n    //     self.added('avgOffer', 'first', data);\n    // });\n    ReactiveAggregate(this, Collections.Bids, [{\n      $match: {\n        \"auctionId\": auctionId\n      }\n    }, {\n      $group: {\n        '_id': this.userId,\n        'avgOffer': {\n          // In this case, we're running summation.\n          $avg: '$yourBid'\n        }\n      }\n    }], {\n      clientCollection: \"avgOffer\"\n    });\n  });\n  Meteor.publish(\"Property\", function (terms) {\n    // console.log('Property');\n    var parameters = queryConstructor(terms); // console.log(parameters.find)\n    // console.log(parameters.options)\n    // console.log(Collections.Properties.find(parameters.find, parameters.options).count())\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    return Collections.Properties.find(parameters.find, parameters.options);\n  });\n  Meteor.publish(\"userData\", function () {\n    if (!this.userId) return []; //Need to login\n    // 'services.password':1,Don use this , we have a method for this\n\n    return Meteor.users.find({\n      _id: this.userId\n    }, {\n      limit: 1,\n      fields: {\n        'services.facebook.id': 1,\n        'services.twitter.screenName': 1,\n        'services.linkedin.publicProfileUrl': 1,\n        'services.google.id': 1,\n        'createdAt': 1,\n        'lastLoginDate': 1,\n        'profile': 1,\n        'isSA': 1\n      }\n    });\n  });\n  Meteor.publish(\"userDataUsername\", function (username) {\n    if (!username) return [];\n    var ret = Meteor.users.find({\n      \"profile.username\": username\n    }, {\n      limit: 1,\n      fields: {\n        'createdAt': 1,\n        'lastLoginDate': 1,\n        'profile.name': 1,\n        'profile.email': 1,\n        'profile.role': 1,\n        'profile.picture': 1,\n        'profile.mobile': 1,\n        'profile.isPublic': 1,\n        'profile.username': 1\n      }\n    });\n    var user = ret.fetch(); // console.log(username)\n    // console.log(user)\n\n    if (!user.length) {\n      return [];\n    }\n\n    try {\n      if (user[0].profile.isPublic) {\n        //If public then include social info as well.\n        return Meteor.users.find({\n          \"profile.username\": username\n        }, {\n          limit: 1,\n          fields: {\n            'createdAt': 1,\n            'lastLoginDate': 1,\n            'profile': 1,\n            'services.facebook.id': 1,\n            'services.twitter.screenName': 1,\n            'services.linkedin.publicProfileUrl': 1,\n            'services.google.id': 1\n          }\n        });\n      }\n    } catch (e) {\n      console.log(e);\n    }\n\n    return ret;\n  });\n  Meteor.publish(\"allUserData\", function () {\n    return Meteor.users.find({}, {\n      fields: {\n        'createdAt': 1,\n        'lastLoginDate': 1,\n        'profile': 1,\n        'services.facebook.id': 1,\n        'services.twitter.screenName': 1,\n        'services.linkedin.publicProfileUrl': 1,\n        'services.google.id': 1\n      }\n    }); //fields: {'nested.things': 1}\n  });\n  Meteor.publish(\"tenants\", function (pageno) {\n    var pg = 1;\n\n    try {\n      pg = parseInt(pageno);\n    } catch (e) {}\n\n    if (isNaN(pg)) pg = 1;\n    var resperpage = 10;\n    var skip = (pg - 1) * resperpage;\n    return Meteor.users.find({\n      \"profile.isPublic\": true\n    }, {\n      skip: skip,\n      limit: resperpage,\n      fields: {\n        'createdAt': 1,\n        'lastLoginDate': 1,\n        'profile.name': 1,\n        'profile.email': 1,\n        'profile.role': 1,\n        'profile.picture': 1,\n        'profile.mobile': 1,\n        'profile.isPublic': 1,\n        'services.facebook.id': 1,\n        'services.twitter.screenName': 1,\n        'services.linkedin.publicProfileUrl': 1,\n        'services.google.id': 1 // 'profile.username':1,\n\n      }\n    });\n  });\n  Meteor.publish(\"browseLettings\", function (terms) {\n    var parameters = queryConstructor(terms);\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    var auctions = [],\n        properties = [];\n    parameters.options.fields = {\n      address: 1,\n      createdByAgent: 1,\n      type: 1,\n      createdAt: 1,\n      updatedAt: 1,\n      isArchived: 1,\n      auctionId: 1,\n      slug: 1,\n      bedCount: 1,\n      baths: 1,\n      rent: 1,\n      rentType: 1,\n      gallery: 1\n    }; // console.log('property key is')\n    // console.log(parameters.propertykey)\n\n    if (parameters.propertykey) if (parameters.propertykey.length > 0) {\n      console.log('inside propertykey');\n      auctions = Collections.Auctions.find({\n        lettingAuctionCode: {\n          $in: parameters.propertykey\n        },\n        isArchived: false\n      }, parameters.options);\n      var tmp = auctions.fetch();\n      var propertyIds = [];\n\n      for (var i = 0; i < tmp.length; i++) {\n        propertyIds.push(tmp[i].propertyId);\n        if (i > parameters.options.limit) break;\n      }\n\n      properties = [];\n\n      if (propertyIds.length) {\n        properties = Collections.Properties.find({\n          _id: {\n            $in: propertyIds\n          }\n        }, {\n          limit: parameters.options.limit,\n          sort: parameters.options.sort\n        });\n      }\n\n      if (!propertyIds.length) return [];\n      return [properties, auctions];\n    }\n    parameters.find.isArchived = false;\n    parameters.find.auctionId = {\n      $exists: true,\n      $gt: \"\"\n    }; //if we don' put $gt, then its also giving results of records with empty vals - but we don' need deactivated properties\n\n    if (parameters.minRent && parameters.maxRent) {\n      parameters.find.rent = {\n        $gte: parseInt(parameters.minRent),\n        $lte: parseInt(parameters.maxRent)\n      };\n    } else if (parameters.minRent) {\n      parameters.find.rent = {\n        $gte: parseInt(parameters.minRent)\n      };\n    } else if (parameters.maxRent) {\n      parameters.find.rent = {\n        $lte: parseInt(parameters.maxRent)\n      };\n    }\n\n    if (parameters.minBeds && parameters.maxBeds) {\n      parameters.find.bedCount = {\n        $gte: parseInt(parameters.minBeds),\n        $lte: parseInt(parameters.maxBeds)\n      };\n    } else if (parameters.minBeds) {\n      parameters.find.bedCount = {\n        $gte: parseInt(parameters.minBeds)\n      };\n    } else if (parameters.maxBeds) {\n      parameters.find.bedCount = {\n        $lte: parseInt(parameters.maxBeds)\n      };\n    } else if (parameters.bedCount && !isNaN(parameters.bedCount)) {\n      parameters.find.bedCount = parseInt(parameters.bedCount);\n    } // console.log('In browseLettings start')\n    // console.log(parameters.find)\n    // console.log(parameters.options)\n    // console.log(Collections.Properties.find(parameters.find, parameters.options).count())\n    // console.log('In browseLettings end')\n\n\n    properties = Collections.Properties.find(parameters.find, parameters.options);\n    var tmp = properties.fetch();\n    var propertyIds = [];\n\n    for (var i = 0; i < tmp.length; i++) {\n      propertyIds.push(tmp[i].auctionId);\n      if (i > parameters.options.limit) break;\n    }\n\n    auctions = [];\n\n    if (propertyIds.length) {\n      auctions = Collections.Auctions.find({\n        _id: {\n          $in: propertyIds\n        }\n      }, {\n        limit: parameters.options.limit,\n        sort: parameters.options.sort\n      });\n    }\n\n    if (!propertyIds.length) return properties;\n    return [properties, auctions];\n  });\n  Meteor.publish(\"total-houses-for-rent-count\", function (terms) {\n    var parameters = queryConstructor(terms);\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    parameters.options.fields = {\n      _id: 1\n    };\n\n    if (parameters.propertykey) {\n      if (parameters.propertykey.length > 0) {\n        Counts.publish(this, \"total-houses-for-rent-count\", Collections.Auctions.find({\n          lettingAuctionCode: {\n            $in: parameters.propertykey\n          },\n          isArchived: false\n        }), parameters.options);\n      }\n    } else {\n      parameters.find.isArchived = false;\n      parameters.find.auctionId = {\n        $exists: true,\n        $gt: \"\"\n      }; //if we don' put $gt, then its also giving results of records with empty vals - but we don' need deactivated properties\n\n      if (parameters.minRent && parameters.maxRent) {\n        parameters.find.rent = {\n          $gte: parseInt(parameters.minRent),\n          $lte: parseInt(parameters.maxRent)\n        };\n      } else if (parameters.minRent) {\n        parameters.find.rent = {\n          $gte: parseInt(parameters.minRent)\n        };\n      } else if (parameters.maxRent) {\n        parameters.find.rent = {\n          $lte: parseInt(parameters.maxRent)\n        };\n      }\n\n      if (parameters.minBeds && parameters.maxBeds) {\n        parameters.find.bedCount = {\n          $gte: parseInt(parameters.minBeds),\n          $lte: parseInt(parameters.maxBeds)\n        };\n      } else if (parameters.minBeds) {\n        parameters.find.bedCount = {\n          $gte: parseInt(parameters.minBeds)\n        };\n      } else if (parameters.maxBeds) {\n        parameters.find.bedCount = {\n          $lte: parseInt(parameters.maxBeds)\n        };\n      } else if (parameters.bedCount && !isNaN(parameters.bedCount)) {\n        parameters.find.bedCount = parseInt(parameters.bedCount);\n      } // console.log('In count start')\n      // console.log(parameters.find)\n      // console.log(parameters.options)\n      // console.log(Collections.Properties.find(parameters.find, parameters.options).count())\n      // console.log('In count end')\n\n\n      Counts.publish(this, \"total-houses-for-rent-count\", Collections.Properties.find(parameters.find), parameters.options);\n    }\n  });\n  Meteor.publish(\"viewLetting\", function (key) {\n    // var auctions = Collections.Auctions.find({lettingAuctionCode:key,isArchived:false},{\n    var auctions = Collections.Auctions.find({\n      lettingAuctionCode: key\n    }, {\n      limit: 1\n    });\n    var tmp = auctions.fetch();\n    var properties = [],\n        bids = [],\n        mainProperty = {},\n        relatedPropsTmp = [],\n        maxRel = 5,\n        //Max rel always needs to be 1 number higher than the req, due to the logic below.\n    relPropIds = [],\n        relAuctionIds = [],\n        i = 0;\n\n    try {\n      relPropIds.push(tmp[0].propertyId);\n      relAuctionIds.push(tmp[0]._id);\n      bids = Collections.Bids.find({\n        auctionId: tmp[0]._id\n      }, {\n        limit: 100,\n        sort: {\n          updatedAt: -1\n        }\n      }); //////// RELATED PROPS\n\n      mainProperty = Collections.Properties.findOne({\n        _id: tmp[0].propertyId\n      });\n      var notArr = [mainProperty._id];\n      var filters = {\n        \"type\": mainProperty.type,\n        \"address.county\": mainProperty.address.county,\n        \"address.area\": mainProperty.address.area,\n        \"auctionId\": {\n          $exists: true,\n          $gt: \"\"\n        },\n        \"isArchived\": false,\n        \"_id\": {\n          $not: {\n            $in: relPropIds\n          }\n        }\n      };\n      relatedPropsTmp = Collections.Properties.find(filters, {\n        fields: {\n          _id: 1,\n          auctionId: 1\n        },\n        limit: maxRel\n      }).fetch();\n\n      for (i = 0; i < relatedPropsTmp.length; i++) {\n        relPropIds.push(relatedPropsTmp[i]._id);\n        relAuctionIds.push(relatedPropsTmp[i].auctionId);\n      }\n\n      if (relPropIds.length < maxRel) {\n        delete filters[\"address.area\"];\n        filters[\"_id\"] = {\n          $not: {\n            $in: relPropIds\n          }\n        };\n        relatedPropsTmp = Collections.Properties.find(filters, {\n          fields: {\n            _id: 1,\n            auctionId: 1\n          },\n          limit: maxRel - relPropIds.length\n        }).fetch();\n\n        for (i = 0; i < relatedPropsTmp.length; i++) {\n          relPropIds.push(relatedPropsTmp[i]._id);\n          relAuctionIds.push(relatedPropsTmp[i].auctionId);\n        }\n      }\n\n      if (relPropIds.length < maxRel) {\n        delete filters[\"address.county\"];\n        filters[\"_id\"] = {\n          $not: {\n            $in: relPropIds\n          }\n        };\n        relatedPropsTmp = Collections.Properties.find(filters, {\n          fields: {\n            _id: 1,\n            auctionId: 1\n          },\n          limit: maxRel - relPropIds.length\n        }).fetch();\n\n        for (i = 0; i < relatedPropsTmp.length; i++) {\n          relPropIds.push(relatedPropsTmp[i]._id);\n          relAuctionIds.push(relatedPropsTmp[i].auctionId);\n        }\n      }\n\n      if (relPropIds.length < maxRel) {\n        delete filters[\"type\"];\n        filters[\"_id\"] = {\n          $not: {\n            $in: relPropIds\n          }\n        };\n        relatedPropsTmp = Collections.Properties.find(filters, {\n          fields: {\n            _id: 1,\n            auctionId: 1\n          },\n          limit: maxRel - relPropIds.length\n        }).fetch();\n\n        for (i = 0; i < relatedPropsTmp.length; i++) {\n          relPropIds.push(relatedPropsTmp[i]._id);\n          relAuctionIds.push(relatedPropsTmp[i].auctionId);\n        }\n      }\n\n      properties = Collections.Properties.find({\n        _id: {\n          $in: relPropIds\n        }\n      }, {\n        limit: maxRel + 1\n      });\n      auctions = Collections.Auctions.find({\n        _id: {\n          $in: relAuctionIds\n        }\n      }, {\n        limit: maxRel + 1\n      });\n    } catch (e) {\n      console.log(e);\n    }\n\n    if (!tmp.length) return [];\n    return [properties, auctions, bids];\n  });\n\n  let transformMyActiveAdvertisements = data => {\n    // console.log('in transformMyActiveAdvertisements');\n    // console.log(data.propertyId)\n    data.property = Collections.Properties.findOne(data.propertyId, {\n      fields: {\n        address: 1,\n        createdByAgent: 1,\n        createdAt: 1,\n        updatedAt: 1,\n        isArchived: 1,\n        auctionId: 1\n      }\n    });\n    return data;\n  };\n\n  Meteor.publish(\"inviteToApply.MyActiveAdvertisements\", function () {\n    if (!this.userId) return []; //Need to login\n\n    var self = this;\n    let subHandle = Collections.Auctions.find().observeChanges({\n      added: (id, fields) => {\n        fields = transformMyActiveAdvertisements(fields);\n        this.added('Auctions', id, fields);\n      },\n      changed: (id, fields) => {\n        this.changed('Auctions', id, fields);\n      },\n      removed: id => {\n        this.removed('Auctions', id);\n      }\n    });\n    this.ready();\n    this.onStop(() => {\n      subHandle.stop();\n    });\n    self.ready();\n  });\n  Meteor.publish(\"MyProperties\", function (terms) {\n    console.log('In MyProperties Publish ');\n    var parameters = queryConstructor(terms);\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    if (!this.userId) return [];\n    find = {};\n    find['createdByAgent'] = {\n      $in: [this.userId, 'demoproperty']\n    };\n    find['isArchived'] = false;\n    if (terms.onlyActive) find.auctionId = {\n      $exists: true,\n      $gt: \"\"\n    };\n    var properties = Collections.Properties.find(find, parameters.options);\n    var relAuctionIds = [];\n    var props = properties.fetch();\n\n    for (var i = 0; i < props.length; i++) if (props[i].auctionId) relAuctionIds.push(props[i].auctionId);\n\n    var auctions = Collections.Auctions.find({\n      _id: {\n        $in: relAuctionIds\n      }\n    }, {\n      limit: parameters.options.limit ? parameters.options.limit + 2 : 22\n    });\n    var bids = Collections.Bids.find({\n      auctionId: {\n        $in: relAuctionIds\n      }\n    }, {\n      limit: parameters.options.limit ? parameters.options.limit + 2 : 22\n    });\n    return [properties, auctions, bids];\n    this.ready();\n  });\n  Meteor.publish(\"total-MyProperties\", function (terms) {\n    if (!this.userId) return [];\n    find = {};\n    find['createdByAgent'] = {\n      $in: [this.userId, 'demoproperty']\n    };\n    find['isArchived'] = false;\n    if (terms.onlyActive) find.auctionId = {\n      $exists: true,\n      $gt: \"\"\n    };\n    Counts.publish(this, \"total-MyProperties\", Collections.Properties.find(find));\n  });\n  Meteor.publish(\"PropertyApplications\", function (terms) {\n    var parameters = queryConstructor(terms);\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    if (!this.userId) return [];\n    find = {\n      _id: parameters.id\n    };\n    find['isArchived'] = false;\n    let properties = Collections.Properties.find(find, {\n      limit: 1\n    });\n    let tmp = properties.fetch();\n    if (tmp.length == 0) return [];\n    let auctionId = tmp[0].auctionId;\n    let propertyId = tmp[0]._id; // console.log('In PropertyApplications start')\n    // console.log(parameters)\n    // console.log('Auctions')\n    // console.log(Collections.Auctions.find({_id:auctionId,isArchived:false},{limit:1 } ).count())\n    // console.log(Collections.Bids.find({auctionId:auctionId,isArchived:false},parameters.propertyApplications.options ).count())\n    // console.log(Collections.EmailEnquiries.find({propertyId:propertyId,isArchived:false},parameters.emailEnquiries.options ).count())\n    // console.log('In PropertyApplications end')\n\n    let auctions = Collections.Auctions.find({\n      _id: auctionId,\n      isArchived: false\n    }, {\n      limit: 1\n    });\n    tmp = auctions.fetch();\n    if (tmp.length == 0) return [];\n    let bids = Collections.Bids.find({\n      auctionId: auctionId,\n      isArchived: false\n    }, parameters.propertyApplications.options);\n    let EmailEnquiries = Collections.EmailEnquiries.find({\n      propertyId: propertyId,\n      isArchived: false\n    }, parameters.emailEnquiries.options);\n    tmp = bids.fetch();\n    let userIds = [];\n\n    for (let j = 0; j < tmp.length; j++) {\n      userIds.push(tmp[j].userId);\n    }\n\n    let users = Meteor.users.find({\n      _id: this.userId\n    });\n    if (parameters.emailEnquiries) users = Meteor.users.find({\n      _id: {\n        $in: userIds\n      }\n    }, {\n      limit: parameters.emailEnquiries.options.limit,\n      fields: {\n        'services.facebook.id': 1,\n        'services.twitter.screenName': 1,\n        'services.linkedin.publicProfileUrl': 1,\n        'services.google.id': 1,\n        'createdAt': 1,\n        'lastLoginDate': 1,\n        'profile': 1,\n        'isSA': 1\n      }\n    }); // just need the limit from there.\n\n    return [properties, auctions, bids, EmailEnquiries, users];\n    this.ready();\n  });\n  Meteor.publish(\"total-PropertyApplications\", function (terms) {\n    var parameters = queryConstructor(terms);\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    if (!this.userId) return [];\n    find = {\n      _id: parameters.id\n    };\n    find['isArchived'] = false;\n    let properties = Collections.Properties.find(find, {\n      limit: 1\n    });\n    let tmp = properties.fetch();\n    if (tmp.length == 0) return [];\n    let auctionId = tmp[0].auctionId;\n    let propertyId = tmp[0]._id;\n    Counts.publish(this, \"total-PropertyApplications\", Collections.Bids.find({\n      auctionId: auctionId,\n      isArchived: false\n    }), parameters.propertyApplications.options);\n  });\n  Meteor.publish(\"total-EmailEnquiries\", function (terms) {\n    var parameters = queryConstructor(terms);\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    if (!this.userId) return [];\n    find = {\n      _id: parameters.id\n    };\n    find['isArchived'] = false;\n    let properties = Collections.Properties.find(find, {\n      limit: 1\n    });\n    let tmp = properties.fetch();\n    if (tmp.length == 0) return [];\n    let auctionId = tmp[0].auctionId;\n    let propertyId = tmp[0]._id;\n    Counts.publish(this, \"total-EmailEnquiries\", Collections.EmailEnquiries.find({\n      propertyId: propertyId,\n      isArchived: false\n    }), parameters.emailEnquiries.options);\n  });\n  Meteor.publish(\"Advertisement\", function (advertisementId) {\n    let validationSuccess = false;\n    if (advertisementId.length > 12 && advertisementId.length < 20) validationSuccess = true;\n    if (!validationSuccess) return [];else return Collections.Auctions.find({\n      _id: advertisementId,\n      isArchived: false\n    }, {\n      limit: 1\n    });\n    this.ready();\n  });\n  Meteor.publish(\"MyAdvertisements\", function (terms) {\n    var parameters = queryConstructor(terms);\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    if (!this.userId) return [];\n    return Collections.Auctions.find({\n      createdByAgent: {\n        $in: [this.userId, 'demoproperty']\n      },\n      isArchived: false\n    }, parameters.options);\n    this.ready();\n  });\n  Meteor.publish(\"editProperty\", function (propertyId) {\n    if (!this.userId) return [];\n    var auctions = Collections.Auctions.find({\n      isArchived: false,\n      propertyId: propertyId\n    }, {\n      transform: function (doc) {\n        if (doc.createdByAgent != this.userId) {\n          return {\n            _id: doc._id,\n            propertyId: doc.propertyId,\n            createdByAgent: doc.createdByAgent\n          };\n        }\n      },\n      limit: 1\n    });\n    var properties = Collections.Properties.find({\n      isArchived: false,\n      _id: propertyId\n    }, {\n      transform: function (doc) {\n        if (doc.createdByAgent != this.userId) {\n          return {\n            _id: doc._id,\n            propertyId: doc.propertyId\n          };\n        }\n      },\n      limit: 1\n    });\n    return [auctions, properties];\n  });\n  Meteor.publish(\"propertyApplication\", function (propertyId, auctionId) {\n    if (!this.userId) return [];\n    var properties = Collections.Properties.find({\n      isArchived: false,\n      _id: propertyId\n    }, {\n      transform: function (doc) {\n        if (doc.createdByAgent != this.userId) {\n          return {\n            _id: doc._id,\n            propertyId: doc.propertyId,\n            invalidAgent: true\n          };\n        }\n      },\n      limit: 1\n    });\n    var auctionIDTmp = '';\n    var invalidAgentProp = false;\n    var tmp = properties.fetch();\n\n    try {\n      auctionIDTmp = tmp[0].auctionId;\n      if (tmp[0].invalidAgent) invalidAgentProp = true;\n    } catch (e) {}\n\n    if (!tmp.length || invalidAgentProp) {\n      //Property not found, no need to find auction\n      console.log(\"invalidAgentProp: \" + invalidAgentProp);\n      console.log(\"tmp.length: \" + tmp.length);\n      return [];\n    }\n\n    if (auctionId) auctionIDTmp = auctionId;\n    var auctions = Collections.Auctions.find({\n      isArchived: false,\n      _id: auctionIDTmp\n    }, {\n      transform: function (doc) {\n        if (doc.createdByAgent != this.userId) {\n          return {\n            _id: doc._id,\n            propertyId: doc.propertyId,\n            createdByAgent: doc.createdByAgent\n          };\n        }\n      },\n      limit: 1\n    });\n    var tmp = properties.fetch();\n\n    if (!tmp.length) {\n      return [];\n    }\n\n    var bids = Collections.Bids.find({\n      isArchived: false,\n      _id: auctionIDTmp\n    }, {\n      transform: function (doc) {\n        if (doc.createdByAgent != this.userId) {\n          return {\n            _id: doc._id,\n            propertyId: doc.propertyId,\n            createdByAgent: doc.createdByAgent\n          };\n        }\n      },\n      limit: 1\n    });\n    return [auctions, properties];\n  });\n  Meteor.publish(\"Areas\", function (c1, c2, c3, c4, c5) {\n    // For ireland\n    // c1: Territory: like UK for ireland, its empty\n    // c2: Country => Ireland\n    // c3: County => Dublin / City\n    // c4: Sub County => Dublin 1\n    // c5: Area => Baltinglass\n    // console.log('Vals are c3: '+c3)\n    // return [];\n    var selector = {},\n        paramReceived = false;\n\n    if (c1) {\n      paramReceived = true;\n      selector['Territory'] = c1;\n    }\n\n    if (c2) {\n      paramReceived = true;\n      selector['Country'] = c2;\n    }\n\n    if (c3) {\n      paramReceived = true;\n      selector['County'] = c3;\n    }\n\n    if (c4) {\n      paramReceived = true;\n      selector['Sub County'] = c4;\n    }\n\n    if (c5) {\n      paramReceived = true;\n      selector['Area'] = c5;\n    }\n\n    if (!paramReceived) {\n      //Don't send all area info, for performance reasons. \n      // console.log('in if c3: '+c3)\n      return [];\n    } else {\n      // console.log('in else c3: '+c3)\n      // console.log(selector)\n      return Collections.Areas.find(selector, {});\n    }\n\n    this.ready();\n  });\n  Meteor.publish(\"browseBlogs\", function (terms) {\n    var parameters = queryConstructor(terms);\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    parameters.find.isArchived = false;\n    var Blogs = Collections.Blogs.find(parameters.find, parameters.options);\n    return Blogs;\n    this.ready();\n  });\n  Meteor.publish(\"total-blogs-count\", function (terms) {\n    var parameters = queryConstructor(terms);\n\n    if (parameters.fail) {\n      return [];\n      this.ready();\n    }\n\n    parameters.find.isArchived = false;\n    Counts.publish(this, \"total-blogs-count\", Collections.Blogs.find(parameters.find), {\n      fields: {\n        _id: 1\n      }\n    });\n  });\n  Meteor.publish(\"viewBlog\", function (key) {\n    if (!key) return [];\n    var tmp = Collections.Blogs.findOne({\n      slug: key\n    }, {\n      limit: 1\n    });\n\n    if (!tmp || !tmp._id) {\n      return []; //Blog not found.\n    }\n\n    let notArr = [],\n        Blogs = [],\n        recentBlogsTmp = [],\n        relBlogIds = [],\n        i = 0,\n        maxRecent = 4;\n\n    try {\n      notArr.push(tmp.wpId);\n      relBlogIds.push(tmp._id);\n\n      for (i = 0; i < tmp.related.length; i++) {\n        notArr.push(tmp.related[i].wpId);\n      }\n\n      var filters = {\n        \"isArchived\": false,\n        \"wpId\": {\n          $not: {\n            $in: notArr\n          }\n        }\n      };\n      recentBlogsTmp = Collections.Blogs.find(filters, {\n        fields: {\n          _id: 1,\n          wpId: 1\n        },\n        limit: maxRecent\n      }).fetch();\n\n      for (i = 0; i < recentBlogsTmp.length; i++) {\n        relBlogIds.push(recentBlogsTmp[i]._id);\n      }\n\n      Blogs = Collections.Blogs.find({\n        _id: {\n          $in: relBlogIds\n        }\n      }, {\n        limit: maxRecent + 1 // sort:{updatedAt : -1} // Not needed, anyway, it will send records to UI without order. and IDs are definitly specified.\n\n      });\n    } catch (e) {\n      console.log(e);\n    }\n\n    return Blogs;\n    this.ready();\n  });\n  Meteor.publish(\"Properties\", function () {\n    let Properties = Collections.Properties;\n    let selector = {};\n    return Properties.find(selector, {});\n    this.ready();\n  });\n  Meteor.publish(\"Bids\", function () {\n    //if (this.userId) {\n    //  let Projects = Collections.Bids;\n    //  //let selector = {\"userId\":this.userId};\n    //  let selector = {};//We need to query even when he isn't logged in.\n    //  return Projects.find(selector, {});\n    //}else {\n    //    // Declare that no data is being published. If you leave this line\n    //    // out, Meteor will never consider the subscription ready because\n    //    // it thinks you're using the added/changed/removed interface where\n    //    // you have to explicitly call this.ready().\n    //    return [];\n    //  }\n    let Projects = Collections.Bids;\n    let selector = {};\n    return Projects.find(selector, {});\n    this.ready();\n  });\n  Meteor.publish(\"MyBids\", function () {\n    if (this.userId) {\n      let Projects = Collections.Bids;\n      let selector = {\n        \"userId\": this.userId\n      }; //let selector = {};//We need to query even when he isn't logged in.\n\n      return Projects.find(selector, {});\n    } else {\n      // Declare that no data is being published. If you leave this line\n      // out, Meteor will never consider the subscription ready because\n      // it thinks you're using the added/changed/removed interface where\n      // you have to explicitly call this.ready().\n      return [];\n    }\n  });\n  Meteor.publish(\"Auctions\", function () {\n    let Projects = Collections.Auctions;\n    let selector = {};\n    return Projects.find(selector, {});\n    this.ready();\n  });\n  Meteor.publish(\"Config\", function () {\n    let Projects = Collections.Config;\n    let selector = {};\n    return Projects.find(selector, {});\n    this.ready();\n  }); // Meteor.publish(\"Payments\", function () {\n  //\n  //     if (this.userId) {\n  //         let Payments = Collections.Payments;\n  //         let selector = {\"userId\":this.userId};\n  //         //let selector = {};//We need to query even when he isn't logged in.\n  //         return Payments.find(selector, {});\n  //\n  //         this.ready();\n  //     }else {\n  //         let Payments = Collections.Payments;\n  //         let selector = {};\n  //         return Payments.find(selector, {});\n  //\n  //         this.ready();\n  //     }\n  // });\n  //Meteor.publish(\"MyBids\", function () {//NOT WORKING IN PUBLISH, HAS TO DO IN CLIENT\n  //\n  //  if (this.userId) {//userId is null if no user is logged in.\n  //    let Bids = Collections.Bids;\n  //    //const userId = Meteor.userId();\n  //    let selector = {\"userId\":this.userId};\n  //    return Bids.find(selector, {\n  //      transform: function(doc) {\n  //        doc.unit = Collections.Units.findOne({\n  //          _id: doc.unitId\n  //        });\n  //        doc.auction = Collections.Auctions.findOne({\n  //          _id: doc.auctionId\n  //        });\n  //        doc.project = Collections.Properties.findOne({\n  //          _id: doc.unit.projectId\n  //        });\n  //        return doc;\n  //      },\n  //      sort: {\n  //        createdAt: -1\n  //      }\n  //\n  //    });\n  //  } else {\n  //    // Declare that no data is being published. If you leave this line\n  //    // out, Meteor will never consider the subscription ready because\n  //    // it thinks you're using the added/changed/removed interface where\n  //    // you have to explicitly call this.ready().\n  //    return [];\n  //  }\n  //  this.ready();\n  //});\n  // Meteor.publish('Meteor.users.initials', function ({ userIds }) {\n  //     // Validate the arguments to be what we expect\n  //     new SimpleSchema({\n  //         userIds: { type: [String] }\n  //     }).validate({ userIds });\n  //\n  //     // Select only the users that match the array of IDs passed in\n  //     const selector = {\n  //         _id: { $in: userIds }\n  //     };\n  //\n  //     // Only return one field, `initials`\n  //     const options = {\n  //         fields: { initials: 1 }\n  //     };\n  //\n  //     return Meteor.users.find(selector, options);\n  // });\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"server\":{\"core\":{\"SA.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/core/SA.js                                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * Created by njanjanam on 27/03/2018.\n */\nMeteor.methods({\n  SAGenerateSlugsForMissingProperties: function (auctionCode) {\n    //Will generate slugs to all auctions, missing ones\n    console.log(\"server method Super Admin SAGenerateSlugsForMissingProperties called\");\n    var user = Meteor.user();\n\n    if (!user) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    if (!user.isSA) {\n      //Only super admins can use this method.\n      throw new Meteor.Error('not-authorized');\n      return false;\n    }\n\n    var properties = Collections.Properties.find({\n      isArchived: false\n    });\n    var tmp = properties.fetch();\n    var property = '';\n    var c = 0;\n    var slug = ''; // console.log('Total: '+tmp.length)\n\n    for (var i = 0; i < tmp.length; i++) {\n      property = tmp[i]; // if(property.slug){\n      //Format: (apartment-for-rent-in-area- // not this format as its for browse pages) (name and are apartment)\n      //Approved format: /rent/apartment-name-of-apt-AREA-CITY\n\n      if (property.type) slug = property.type;\n      if (property.address.address) slug += '-' + property.address.address;\n      if (property.address.area) slug += '-' + property.address.area;\n      if (property.address.county) slug += '-' + property.address.county;\n      Collections.Properties.update(property._id, {\n        $set: {\n          \"slug\": slugify(slug)\n        }\n      });\n      c++; // }\n    }\n\n    return 'Slug Added Count: ' + c;\n  },\n  SAdeactivateAuction: function (auctionCode) {\n    //Below is the code used on client to mass delete the objects.\n    // var props = Collections.Auctions.find({},{fields:{lettingAuctionCode:1}}).fetch()\n    // var excludes = ['TUK94','RR5DK','KZ6X9','RCWJG']\n    // var a=[];\n    // for(var i=0;i<props.length;i++){\n    //     if(excludes.indexOf(props[i].lettingAuctionCode)!=-1)continue;\n    //     a.push(props[i].lettingAuctionCode)\n    // }\n    // for(var i=0;i<a.length;i++){\n    //     Meteor.call('SAdeactivateAuction',a[i]);\n    // }\n    check(auctionCode, String);\n    console.log(\"server method Super Admin deactivateAuction called\");\n    console.log(auctionCode);\n    var user = Meteor.user();\n\n    if (!user) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    if (!user.isSA) {\n      //Only super admins can use this method.\n      throw new Meteor.Error('not-authorized');\n      return false;\n    }\n\n    const auction = Collections.Auctions.findOne({\n      lettingAuctionCode: auctionCode\n    });\n    if (!auction) throw new Meteor.Error('Invalid auction');\n    const property = Collections.Properties.findOne({\n      _id: auction.propertyId\n    });\n    if (!property) throw new Meteor.Error('Invalid property');\n    var userId = property.createdByAgent;\n    var auctionHistory = property.auctionHistory;\n    if (!auctionHistory) auctionHistory = [];\n    auctionHistory.push({\n      auctionId: property.auctionId,\n      deactivatedOn: new Date()\n    });\n    Collections.Properties.update(auction.propertyId, {\n      $set: {\n        \"auctionId\": \"\",\n        \"rent\": \"\",\n        \"auctionHistory\": auctionHistory\n      }\n    });\n    Collections.Auctions.update(auction._id, {\n      $set: {\n        \"isArchived\": true,\n        \"endDate\": new Date()\n      }\n    });\n    var bidCount = Collections.Bids.find({\n      auctionId: auction._id\n    }).count();\n\n    if (bidCount) {\n      //Non zero\n      Collections.Bids.update({\n        auctionId: auction._id\n      }, {\n        $set: {\n          \"isArchived\": true,\n          \"endDate\": new Date()\n        }\n      });\n    } // const user = Meteor.user();\n\n\n    user = Meteor.users.findOne(userId);\n    if (!auction.auctionBidProfit) auction.auctionBidProfit = 0;\n    if (!user.profile.bidProfitActive) user.profile.bidProfitActive = 0;\n    if (!user.profile.activeAuctions) user.profile.activeAuctions = 0;\n    if (!user.profile.bidsReceivedActiveAuctions) user.profile.bidsReceivedActiveAuctions = 0;\n    user.profile.activeAuctions--;\n    user.profile.bidsReceivedActiveAuctions -= bidCount;\n    user.profile.bidProfitActive -= auction.auctionBidProfit;\n    if (user.profile.activeAuctions < 0) user.profile.activeAuctions = 0;\n    if (user.profile.bidsReceivedActiveAuctions < 0) user.profile.bidsReceivedActiveAuctions = 0;\n    if (user.profile.bidProfitActive < 0) user.profile.bidProfitActive = 0;\n    Meteor.users.update(userId, {\n      $set: {\n        \"profile.activeAuctions\": user.profile.activeAuctions,\n        \"profile.bidsReceivedActiveAuctions\": user.profile.bidsReceivedActiveAuctions,\n        \"profile.bidProfitActive\": user.profile.bidProfitActive\n      }\n    });\n    return {\n      status: 'success'\n    };\n  },\n  FixAddRentToProperty: function () {\n    //Add rent field to all property records, take from auction table.\n    console.log(\"server method Super Admin FixAddRentToProperty called\");\n    var user = Meteor.user();\n\n    if (!user) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    if (!user.isSA) {\n      //Only super admins can use this method.\n      throw new Meteor.Error('not-authorized');\n      return false;\n    }\n\n    var auctions = Collections.Auctions.find({\n      isArchived: false\n    });\n    var tmp = auctions.fetch();\n    var auction = '';\n    var c = 0; // console.log('Total: '+tmp.length)\n\n    for (var i = 0; i < tmp.length; i++) {\n      auction = tmp[i]; // if(auction.propertyId=='JGhAi548Bfa3q7TEJ')console.log('found it')\n      // console.log(auction._id)\n\n      if (!auction.propertyId) continue;\n      Collections.Properties.update(auction.propertyId, {\n        $set: {\n          \"rent\": parseInt(auction.price)\n        }\n      });\n      c++;\n    }\n\n    return 'Fixed count: ' + c;\n  },\n  AddBedCountToAllProperty: function () {\n    //Add rent field to all property records, take from auction table.\n    console.log(\"server method Super Admin AddBedCountToAllProperty called\");\n    var user = Meteor.user();\n\n    if (!user) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    if (!user.isSA) {\n      //Only super admins can use this method.\n      throw new Meteor.Error('not-authorized');\n      return false;\n    }\n\n    var properties = Collections.Properties.find({\n      isArchived: false\n    });\n    var tmp = properties.fetch();\n    var property = '';\n    var c = 0;\n    var bedCount = 1;\n    console.log('Total: ' + tmp.length);\n\n    for (var i = 0; i < tmp.length; i++) {\n      property = tmp[i];\n      if (property.bedrooms) bedCount = property.bedrooms.length;\n      if (!bedCount) bedCount = 1;\n      Collections.Properties.update(property._id, {\n        $set: {\n          \"bedCount\": parseInt(bedCount)\n        }\n      });\n      c++;\n    }\n\n    console.log('bedCount Added Count: ' + c);\n    return 'bedCount Added Count: ' + c;\n  },\n  AddMonthlyRentOnAuctionProperty: function () {\n    //Add rent field to all property records, take from auction table.\n    console.log(\"server method Super Admin AddMonthlyRentOnAuctionProperty called\");\n    var user = Meteor.user();\n\n    if (!user) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    if (!user.isSA) {\n      //Only super admins can use this method.\n      throw new Meteor.Error('not-authorized');\n      return false;\n    }\n\n    var properties = Collections.Properties.find({\n      isArchived: false\n    });\n    var tmp = properties.fetch();\n    var property = '';\n    var c = 0;\n    var rentMonthly = 0;\n    var auction = {};\n    console.log('Total: ' + tmp.length);\n\n    for (var i = 0; i < tmp.length; i++) {\n      property = tmp[i];\n      if (!property.auctionId) continue;\n      auction = Collections.Auctions.findOne({\n        _id: property.auctionId\n      }); // if(auction.price==null)auction.price = Math.floor(Math.random() *10 +10) *10\n\n      rentMonthly = parseFloat(auction.price);\n      if (auction.rentType == 'weekly') rentMonthly = parseFloat(rentMonthly / 7 * 30); // Month has 30 days\n\n      if (!rentMonthly) continue;\n      if (!auction.price) continue;\n      Collections.Properties.update(property._id, {\n        $set: {\n          \"rent\": parseInt(auction.price),\n          \"rentMonthly\": rentMonthly\n        }\n      });\n      Collections.Auctions.update(property.auctionId, {\n        $set: {\n          \"price\": parseInt(auction.price),\n          \"rentMonthly\": rentMonthly\n        }\n      });\n      c++;\n    }\n\n    console.log('bedCount Added Count: ' + c);\n    return 'Fixed count: ' + c;\n  },\n  ////////////// TEMP - NOT IMP\n  FixRentDataTypeOnAuctionProperty: function () {\n    //Add rent field to all property records, take from auction table.\n    console.log(\"server method Super Admin FixRentFormatOnAuctionProperty called\");\n    var user = Meteor.user();\n\n    if (!user) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    if (!user.isSA) {\n      //Only super admins can use this method.\n      throw new Meteor.Error('not-authorized');\n      return false;\n    }\n\n    var auctions = Collections.Auctions.find({\n      isArchived: false\n    });\n    var tmp = auctions.fetch();\n    var auction = '';\n    var c = 0; // console.log('Total: '+tmp.length)\n\n    for (var i = 0; i < tmp.length; i++) {\n      auction = tmp[i];\n      if (!auction.propertyId) continue;\n      Collections.Auctions.update(auction._id, {\n        $set: {\n          \"price\": parseInt(auction.price)\n        }\n      });\n      Collections.Properties.update(auction.propertyId, {\n        $set: {\n          \"rent\": parseInt(auction.price)\n        }\n      });\n      c++;\n    }\n\n    return 'Fixed count: ' + c;\n  }\n}); // Meteor.call('FixAddRentToProperty',function(err, res){\n//     debugger;\n//     console.log(res);\n// })\n\nfunction slugify(text) {\n  if (!text) return '';\n  const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/_,:;';\n  const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return text.toString().toLowerCase().replace(/\\s+/g, '-') // Replace spaces with -\n  .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n  .replace(/&/g, '-and-') // Replace & with 'and'\n  .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"activityhistory.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/core/activityhistory.js                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet check;\nmodule.link(\"meteor/check\", {\n  check(v) {\n    check = v;\n  }\n\n}, 0);\n// import TokenGen from 'token-gen';\nMeteor.methods({\n  addActivityHistory: function (data) {\n    console.log(\"server method addActivityHistory called\");\n    this.unblock();\n\n    if (!data.userIdPassed) {\n      const userId = Meteor.userId();\n      console.log(userId);\n      if (!userId) throw new Meteor.Error('not-authorized');\n    }\n\n    delete data.userIdPassed;\n    if (!data.propertyId) throw new Meteor.Error('Property ID id required.');\n    data.createdAt = new Date();\n    var docId = Collections.ActivityHistory.insert(data);\n    return docId;\n  }\n});\n\nArray.prototype.pushUnique = function (item) {\n  if (this.indexOf(item) == -1) {\n    //if(jQuery.inArray(item, this) == -1) {\n    this.push(item);\n    return true;\n  }\n\n  return false;\n};\n\nfunction numDifferentiation(val) {\n  if (val >= 1000000000) val = (val / 1000000000).toFixed(2) + ' Billion';else if (val >= 1000000) val = (val / 1000000).toFixed(2) + ' Million';\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"email.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/core/email.js                                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet check;\nmodule.link(\"meteor/check\", {\n  check(v) {\n    check = v;\n  }\n\n}, 0);\nvar EMAIL_CONFIG = Meteor.settings.EMAIL_CONFIG;\nvar SUPPORT_DATA = Meteor.settings.SUPPORT_DATA;\nMeteor.methods({\n  requestEmail: function (mailData) {\n    this.unblock();\n    console.log('requestEmail method called');\n\n    switch (mailData.requestType) {\n      case 'emailEnquiryReceived':\n        //15 mns grouping\n        mailData.frequency = 15; //its a 15min grouping\n\n        if (!mailData.scheduledDate) mailData.scheduledDate = moment().add(15, 'm').toDate();\n        break;\n\n      case 'uploadRefsReminder':\n        //1440 mns grouping - 1 day\n        mailData.frequency = 1440; //its a 1 per day grouping\n\n        if (!mailData.scheduledDate) mailData.scheduledDate = moment().add(1, 'd').toDate();\n        break;\n\n      case 'reminderUploadReferences':\n        //1440 mns grouping - 1 day\n        mailData.frequency = 1440; //its a 1 per day grouping\n\n        if (!mailData.scheduledDate) mailData.scheduledDate = moment().add(1, 'd').toDate();\n        break;\n\n      default:\n        throw new Meteor.Error('Invalid requestType');\n    }\n\n    mailData.status = 'new';\n    mailData.isArchived = false;\n    Collections.EmailRequests.insert(mailData);\n  },\n  sendNotificationEmail: function (data) {\n    let serialMode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    //Format as shown below\n    //data = {\n    //  template: \"bidSuccessfullyPlaced\",\n    //  subject: \"Welcome to SMC\"\n    //}\n    // check(args, [String]);\n    // Let other method calls from the same client start running,\n    // without waiting for the email sending to complete.\n    if (!serialMode) this.unblock();\n    console.log('sendNotificationEmail ' + (serialMode ? \"serialMode\" : \"\") + ' called for ' + data.mailTo); // don't send account emails unless email server configured\n    // if (!Meteor.settings.MAIL_URL) {\n\n    if (!process.env.MAIL_URL) {\n      console.log(\"Mail not configured: suppressing sendNotificationEmail output\");\n      console.log('no MAIL_URL in env vars');\n      return true;\n    }\n\n    SSR.compileTemplate(\"email/\" + data.template, Assets.getText(\"email/\" + data.template + \".html\"));\n    let renderArr = {\n      homepage: Meteor.isDevelopment ? 'https://www.spotmycrib.ie/' : Meteor.absoluteUrl(),\n      cdnHomepage: Meteor.isDevelopment ? 'https://www.spotmycrib.ie/' : CDN.get_cdn_url() + '/',\n      support: EMAIL_CONFIG,\n      headers: {}\n    };\n    renderArr.data = data;\n    let renderedTemplate = SSR.render(\"email/\" + data.template, renderArr);\n\n    if (Meteor.isDevelopment && !data.mailTo.endsWith('@spotmycrib.com')) {\n      data.mailTo = 'srikanth681@gmail.com';\n    }\n\n    if (data.mailTo.indexOf('daft.ie') != -1) {\n      console.log(\"Looks like a daft.ie email, supressing it.\");\n      console.log(data.mailTo);\n      return true;\n    }\n\n    var arr = {\n      to: data.mailTo,\n      // to: 'srikanth681@gmail.com',\n      from: EMAIL_CONFIG.name + \" <\" + EMAIL_CONFIG.email + \">\",\n      subject: data.subject,\n      html: renderedTemplate\n    };\n    if (data.replyTo) arr.replyTo = data.replyTo;\n    if (data['o:tag']) arr.headers['o:tag'] = data['o:tag'];\n\n    if (Meteor.isDevelopment && !data.mailTo.endsWith('@spotmycrib.com')) {\n      arr['o:testmode'] = true;\n    }\n\n    Email.send(arr);\n    return true;\n  },\n  sendEmail: function (to, from, subject, text) {\n    check([to, from, subject, text], [String]); // Let other method calls from the same client start running,\n    // without waiting for the email sending to complete.\n\n    this.unblock(); //actual email sending method\n\n    Email.send({\n      to: to,\n      from: from,\n      subject: subject,\n      text: text\n    });\n  },\n  knowMoreRequestReceived: function (email) {\n    console.log('in knowMoreRequestReceived');\n    console.log(email);\n    this.unblock();\n    Email.send({\n      to: 'srikanth681@gmail.com',\n      from: 'sales@spotmycrib.com',\n      subject: \"Know more request received\",\n      text: 'Email provided is: ' + email,\n      headers: {\n        'o:tag': 'notifySales'\n      }\n    });\n  },\n  notifyAdmin: function () {\n    let subject = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    let desc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    console.log('in notifyAdmin');\n    this.unblock();\n    if (Meteor.isDevelopment) return;\n    Email.send({\n      to: 'srikanth681@gmail.com',\n      // cc: 'divyarao807@gmail.com',\n      from: 'support@spotmycrib.com',\n      subject: \"Notify: \" + subject,\n      html: 'Content is: ' + desc,\n      headers: {\n        'o:tag': 'notifyAdmin'\n      }\n    });\n  },\n  introOfferRequestReceived: function (email, name, company, phone) {\n    console.log('in introOfferRequestReceived');\n    console.log(email + \" \" + name + \" \" + company + \" \" + phone);\n    this.unblock();\n    Email.send({\n      to: 'srikanth681@gmail.com',\n      from: 'sales@spotmycrib.com',\n      subject: \"Intro offer request received\",\n      text: 'Email provided is: ' + email + \"\\n   name: \" + name + \"\\n   company: \" + company + \"\\n   phone: \" + phone,\n      headers: {\n        'o:tag': 'notifySales'\n      }\n    });\n  },\n  sendWelcomeEmailCustom: function (args) {\n    // check(args, Match.Any);\n    var userId = args[0];\n    console.log(\"server method sendWelcomeEmailCustom called\");\n    console.log(userId);\n    var user = Accounts.users.findOne(userId); // console.log(user);\n\n    if (!user) {\n      throw new Meteor.Error(500, 'Error 500: Invalid user', 'User not found.');\n    }\n\n    let userFirstName = user.profile.name;\n\n    if (userFirstName) {\n      userFirstName = titleCase(userFirstName.split(' ')[0]);\n    }\n\n    var globalConfig = Collections.Config.findOne();\n    var mailData = {\n      template: 'welcomeEmail',\n      'o:tag': 'welcomeEmail',\n      subject: \"Welcome to SpotMyCrib\",\n      mailTo: user.profile.email,\n      user: user,\n      conf: globalConfig,\n      data: {\n        userFirstName: userFirstName\n      }\n    }; //debugger;\n    // Accounts.sendVerificationEmail(userId);\n\n    Meteor.call('sendNotificationEmailWithoutSSR', mailData);\n    /*\n     if( user.profile.isEmailVerified){\n     throw new Meteor.Error(500, 'Error 500: Email already verified. ', 'Your email is already verified.');\n     }\n      var newVerifyCode = randomString(32, '#a');//Random alpha numeric string of 32 chars\n     Meteor.users.update({\n     \"_id\": user._id\n     }, {\n     $currentDate: {\n     \"profile.emailVerificationSentOn\": { $type: \"timestamp\" }\n     },\n     $set: {\n     \"profile.emailVerificationValue\": newVerifyCode\n     }\n     });\n     */\n\n    return {\n      status: 'Success'\n    };\n  },\n  sendNotificationEmailWithoutSSR: function (mailData) {\n    //Format as shown below\n    //data = {\n    //  template: \"bidSuccessfullyPlaced\",\n    //  subject: \"Welcome to SMC\"\n    //}\n    // check(args, [String]);\n    // Let other method calls from the same client start running,\n    // without waiting for the email sending to complete.\n    this.unblock();\n    console.log('sendNotificationEmailWithoutSSR called for ' + mailData.user.profile.name); // don't send account emails unless email server configured\n    // if (!Meteor.settings.MAIL_URL) {\n\n    if (!process.env.MAIL_URL) {\n      console.log(\"Mail not configured: suppressing sendNotificationEmail output\");\n      console.log('no MAIL_URL in env vars');\n      return true;\n    }\n\n    mailData.data.homepage = Meteor.absoluteUrl();\n    if (Meteor.isDevelopment) mailData.data.homepage = 'https://www.spotmycrib.ie/';\n    mailData.data.cdnHomepage = CDN.get_cdn_url() + '/';\n    if (Meteor.isDevelopment) mailData.data.cdnHomepage = 'https://www.spotmycrib.ie/';\n    mailData.data.support = EMAIL_CONFIG;\n    let variableData = {};\n    variableData[mailData.mailTo] = mailData.data;\n    console.log(variableData);\n\n    if (Meteor.isDevelopment) {\n      mailData.mailTo = 'srikanth681@gmail.com';\n    }\n\n    let arr = {\n      to: mailData.mailTo,\n      from: EMAIL_CONFIG.name + \" <\" + EMAIL_CONFIG.email + \">\",\n      subject: mailData.subject,\n      html: Assets.getText(\"email/\" + mailData.template + \".html\"),\n      headers: {\n        'X-Mailgun-Recipient-Variables': JSON.stringify(variableData)\n      }\n    };\n    if (mailData.replyTo) arr.replyTo = mailData.replyTo;\n    if (mailData['o:tag']) arr.headers['o:tag'] = mailData['o:tag'];\n\n    if (Meteor.isDevelopment) {//   arr['o:testmode']=true;\n    }\n\n    Email.send(arr);\n    console.log({\n      to: mailData.mailTo,\n      from: EMAIL_CONFIG.name + \" <\" + EMAIL_CONFIG.email + \">\",\n      subject: mailData.subject\n    });\n    return true;\n  },\n  sendNotificationEmailWithTemplate: function (mailData) {\n    this.unblock();\n    console.log('sendNotificationEmailWithTemplate called'); // don't send account emails unless email server configured\n\n    if (!process.env.MAIL_URL) {\n      console.log(\"Mail not configured: suppressing sendNotificationEmail output\");\n      console.log('no MAIL_URL in env vars');\n      return true;\n    }\n\n    mailData.data.homepage = Meteor.absoluteUrl();\n    if (Meteor.isDevelopment) mailData.data.homepage = 'https://www.spotmycrib.ie/';\n    mailData.data.cdnHomepage = CDN.get_cdn_url() + '/';\n    if (Meteor.isDevelopment) mailData.data.cdnHomepage = 'https://www.spotmycrib.ie/';\n    mailData.data.support = EMAIL_CONFIG;\n    let arr = {\n      to: mailData.mailTo,\n      from: EMAIL_CONFIG.name + \" <\" + EMAIL_CONFIG.email + \">\",\n      subject: mailData.subject,\n      template: mailData.template // ,\n      // headers:{\n      //     // 'X-Mailgun-Recipient-Variables':JSON.stringify(variableData),\n      //     'X-Mailgun-Variables':JSON.stringify(mailData.data)\n      // }\n\n    };\n    if (mailData.replyTo) arr.replyTo = mailData.replyTo;\n    if (mailData['o:tag']) arr.headers['o:tag'] = mailData['o:tag']; // if(Meteor.isDevelopment){\n    //   arr['o:testmode']=true;\n    // }key-85cc066727dcada64aa3e70b96274e55\n\n    arr = {\n      to: 'srikanth681@gmail.com',\n      from: 'Mailgun Sandbox <postmaster@spotmycrib.com>',\n      subject: 'Hello Naga Srikanth',\n      template: 'propertyalerts' // ,\n      // headers:{\n      //     // 'X-Mailgun-Recipient-Variables':JSON.stringify(variableData),\n      //     'X-Mailgun-Variables':JSON.stringify(mailData.data)\n      // }\n\n    };\n    Email.send(arr);\n    console.log(arr);\n    return true;\n  }\n});\nAccounts.emailTemplates.siteName = EMAIL_CONFIG.companyName;\nAccounts.emailTemplates.from = Meteor.settings.NO_REPLY.name + ' <' + Meteor.settings.NO_REPLY.email + '>'; // Accounts.emailTemplates.enrollAccount.subject = (user) => {\n//     return `Welcome to Awesome Town, ${user.profile.name}`;\n// };\n// Accounts.emailTemplates.enrollAccount.text = (user, url) => {\n//     return 'You have been selected to participate in building a better future!'\n//         + ' To activate your account, simply click the link below:\\n\\n'\n//         + url;\n// };\n\nAccounts.emailTemplates.resetPassword = {\n  from: function () {\n    return Meteor.settings.NO_REPLY.name + ' Password Reset <' + Meteor.settings.NO_REPLY.email + '>';\n  },\n  subject: function (user) {\n    return titleCase(user.profile.name) + ', here\\'s the link to reset your password';\n  },\n  html: function (user, url) {\n    SSR.compileTemplate('email/forgotPassword', Assets.getText('email/forgotPassword.html'));\n    console.log(Meteor.absoluteUrl());\n    return SSR.render(\"email/forgotPassword\", {\n      homepage: Meteor.absoluteUrl(),\n      support: EMAIL_CONFIG,\n      user: user,\n      activationLink: url\n    });\n  }\n};\nAccounts.emailTemplates.verifyEmail = {\n  from: function () {\n    return Meteor.settings.NO_REPLY.name + ' <' + Meteor.settings.NO_REPLY.email + '>';\n  },\n  subject: function () {\n    return 'Activate your account now!';\n  },\n  html: function (user, url) {\n    SSR.compileTemplate('email/verifyEmail', Assets.getText('email/verifyEmail.html'));\n    return SSR.render(\"email/verifyEmail\", {\n      homepage: Meteor.absoluteUrl(),\n      support: EMAIL_CONFIG,\n      user: user,\n      activationLink: url\n    });\n  }\n}; // Accounts.emailTemplates.verifyEmail = {\n//     subject() {\n//         return \"Activate your account now!\";\n//     },\n//     text(user, url) {\n//         return `Hey ${user}! Verify your e-mail by following this link: ${url}`;\n//     }\n// };\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"importer.js\":function module(require){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/core/importer.js                                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * Created by naga on 19/03/2018.\n */\nMeteor.methods({\n  importPost: function (url) {\n    if (!url) return {}; //Empty url\n\n    var user = Meteor.user();\n\n    if (!user) {\n      console.log('not logged in');\n      return;\n    } // var cheerio = Meteor.npmRequire('cheerio');\n\n\n    var cheerio = require('cheerio');\n\n    result = Meteor.http.get(url);\n    $ = cheerio.load(result.content);\n    var tmp = '';\n    return {}; //hiding this code\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"manageproperty.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/core/manageproperty.js                                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet check;\nmodule.link(\"meteor/check\", {\n  check(v) {\n    check = v;\n  }\n\n}, 0);\n// import TokenGen from 'token-gen';\nMeteor.methods({\n  addManageProperty: function (propertyId) {\n    check(propertyId, String);\n    console.log(\"server method addManageProperty called\");\n    console.log(propertyId);\n    const userId = Meteor.userId();\n    console.log(userId);\n\n    if (!userId) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    const property = Collections.Properties.findOne({\n      _id: propertyId\n    });\n    if (!property) throw new Meteor.Error('Invalid property');\n    var doc = {\n      \"propertyId\": propertyId,\n      \"rent\": {\n        \"price\": 0,\n        \"collectionDayInMonth\": 1,\n        \"frequency\": \"monthly\",\n        \"reminderEmail\": false\n      },\n      \"econtract\": {\n        \"manualFileUploaded\": false,\n        \"file\": {\n          \"name\": \"\",\n          \"relative_url\": \"\",\n          \"url\": \"\"\n        },\n        \"reminderEmail\": false\n      },\n      \"tenants\": [],\n      \"prevActivationsCount\": 0,\n      \"createdAt\": new Date(),\n      \"updatedAt\": new Date()\n    };\n    var docId = Collections.PropertyManage.insert(doc);\n    return docId;\n  }\n});\n\nArray.prototype.pushUnique = function (item) {\n  if (this.indexOf(item) == -1) {\n    //if(jQuery.inArray(item, this) == -1) {\n    this.push(item);\n    return true;\n  }\n\n  return false;\n};\n\nfunction numDifferentiation(val) {\n  if (val >= 1000000000) val = (val / 1000000000).toFixed(2) + ' Billion';else if (val >= 1000000) val = (val / 1000000).toFixed(2) + ' Million';\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"mybids.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/core/mybids.js                                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet check;\nmodule.link(\"meteor/check\", {\n  check(v) {\n    check = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 1);\n\nfunction numDifferentiation(val) {\n  if (val >= 1000000000) val = (val / 1000000000).toFixed(2) + ' Billion';else if (val >= 1000000) val = (val / 1000000).toFixed(2) + ' Million';\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nMeteor.methods({\n  placeBid: function (args) {\n    check(args[0], String);\n    check(args[1], Number);\n    check(args[2], String);\n    if (args[3]) check(args[3], String); // check(price, Number);\n\n    var auctionId = args[0];\n    var price = args[1];\n    var bidMessage = args[2];\n    let userIdPassed = false;\n    if (args[3]) userIdPassed = args[3];\n    bidMessage = bidMessage.substring(0, 500);\n    console.log(\"server method outBid called: \" + auctionId);\n    let userId = '';\n    if (!userIdPassed) userId = Meteor.userId();else userId = userIdPassed;\n    var biduser = Meteor.users.findOne({\n      _id: userId\n    });\n    const auction = Collections.Auctions.findOne(auctionId);\n    const property = Collections.Properties.findOne(auction.propertyId);\n    const bid = Collections.Bids.findOne({\n      \"auctionId\": auctionId,\n      \"userId\": userId\n    });\n    const emailEnquiry = Collections.EmailEnquiries.findOne({\n      \"auctionId\": auctionId,\n      \"email\": biduser.profile.email\n    });\n\n    if (bid) {\n      throw new Meteor.Error(500, 'Error 500: Bid exists', 'Please wait, there might be network lag.');\n    }\n\n    var bidData = {\n      \"auctionCode\": auction.lettingAuctionCode,\n      \"auctionId\": auctionId,\n      \"userId\": userId,\n      \"yourBid\": price,\n      \"bidMessage\": bidMessage,\n      \"isArchived\": false,\n      \"chosen\": false\n    };\n    let bidId = Collections.Bids.insert(bidData);\n\n    if (bidMessage) {\n      Accounts.users.update(userId, {\n        $set: {\n          \"profile.personalMessage\": bidMessage\n        }\n      });\n    }\n\n    if (emailEnquiry) {\n      //Enquiry exists, deactivate it as now it converted into an application.\n      Collections.EmailEnquiries.update({\n        _id: emailEnquiry._id\n      }, {\n        $set: {\n          isArchived: true,\n          bidId: bidId\n        }\n      });\n    }\n\n    const agent = Accounts.users.findOne(property.createdByAgent);\n    if (!agent.profile.totalBidsReceived) agent.profile.totalBidsReceived = 0;\n    if (!agent.profile.bidsReceivedActiveAuctions) agent.profile.bidsReceivedActiveAuctions = 0;\n    if (!agent.profile.bidProfitActive) agent.profile.bidProfitActive = 0;\n    if (!agent.profile.totalBidProfit) agent.profile.totalBidProfit = 0;\n    agent.profile.totalBidsReceived++;\n    agent.profile.bidsReceivedActiveAuctions++;\n\n    if (price > auction.price) {\n      //Its in profit\n      var profit = price - auction.price;\n      var oldProfit = auction.auctionBidProfit;\n      if (!oldProfit) oldProfit = 0;\n\n      if (profit > oldProfit) {\n        //Update auction with auctionProfit as we hv a new highest profit\n        Collections.Auctions.update(auction._id, {\n          $set: {\n            \"auctionBidProfit\": profit\n          }\n        });\n        agent.profile.bidProfitActive = agent.profile.bidProfitActive + (profit - oldProfit);\n        agent.profile.totalBidProfit = agent.profile.totalBidProfit + (profit - oldProfit);\n      } else {//U already hv highest added to auctionBidProfit and agents bidProfit, so do nothing\n      }\n    }\n\n    Collections.Auctions.update(auction._id, {\n      $inc: {\n        \"bids\": 1\n      }\n    });\n    Accounts.users.update(agent._id, {\n      $set: {\n        \"profile.totalBidsReceived\": agent.profile.totalBidsReceived,\n        \"profile.bidsReceivedActiveAuctions\": agent.profile.bidsReceivedActiveAuctions,\n        \"profile.bidProfitActive\": agent.profile.bidProfitActive,\n        \"profile.totalBidProfit\": agent.profile.totalBidProfit\n      }\n    }); // Meteor.call('requestEmail',{\n    //     userId: biduser._id,\n    //     requestType: 'reminderUploadReferences',//This is an Ack email for all the emailEnqueries placed by user in a group of 15mns.\n    //     propertyId: property._id\n    // });\n    ///////////////////////////MAIL CODE - Bid Successfully Placed\n\n    property.type = titleCase(property.type);\n    property.address.address = titleCase(property.address.address);\n    property.address.area = titleCase(property.address.area);\n    property.address.county = titleCase(property.address.county);\n    var globalConfig = Collections.Config.findOne();\n    let userFirstName = biduser.profile.name;\n\n    if (userFirstName) {\n      userFirstName = titleCase(userFirstName.split(' ')[0]);\n    }\n\n    let propertyImage = '';\n\n    if (property.gallery) {\n      if (property.gallery[0]) propertyImage = property.gallery[0];\n      propertyImage.titleText = 'Photo 1 of ' + property.address.address + (property.address.area ? \", \" + property.address.area : '') + (property.address.county ? \", \" + property.address.county : '');\n    }\n\n    var mailData = {\n      template: 'applicationPlaced',\n      subject: \"Application Successfully Placed\",\n      mailTo: biduser.profile.email,\n      // replyTo      : agent.profile.email,//He just placed the application, don't reveal the email yet, agent needs to start the communication first.\n      //mailTo: 'srikanth681@gmail.com',\n      // homepage    : Meteor.absoluteUrl(),//its done by sendNotificationEmail\n      propertyURL: FlowRouter.url('rent', {\n        slug: property.slug,\n        key: auction.lettingAuctionCode\n      }),\n      application: bidData,\n      auction: auction,\n      project: property,\n      user: biduser,\n      userFirstName: userFirstName,\n      propertyImage: propertyImage,\n      agentName: agent.profile.name,\n      agentEmail: agent.profile.email,\n      bedsCount: property.bedrooms.length,\n      offerFormated: numDifferentiation(bidData.yourBid),\n      rentFormated: numDifferentiation(auction.price)\n    };\n    Meteor.call('sendNotificationEmail', mailData);\n    var mailData = {\n      template: 'applicationReceived',\n      subject: \"Application Received\",\n      mailTo: agent.profile.email,\n      replyTo: biduser.profile.email,\n      //Agent can reach out to the person directly\n      //mailTo: 'srikanth681@gmail.com',\n      // homepage    : Meteor.absoluteUrl(),//its done by sendNotificationEmail\n      application: bidData,\n      auction: auction,\n      project: property,\n      user: biduser,\n      agent: agent,\n      bedsCount: property.bedrooms.length,\n      offerFormated: numDifferentiation(bidData.yourBid),\n      rentFormated: numDifferentiation(auction.price)\n    };\n    Meteor.call('sendNotificationEmail', mailData);\n    Meteor.call('addActivityHistory', {\n      propertyId: auction.propertyId,\n      auctionId: auction._id,\n      type: 'applicationReceived',\n      userId: biduser._id,\n      name: biduser.profile.name,\n      email: biduser.profile.email,\n      userIdPassed: userIdPassed\n    }); ///////////////////////////MAIL CODE END  - SMS CODE START ////\n\n    var smsText = 'Hi ' + biduser.profile.name + '. We have mailed your bid details and the total price to your registered mail id.'; // Meteor.call('sendSMS', [user.profile.mobile, smsText]);\n\n    return {\n      status: 'Success',\n      bidData: bidData\n    };\n  },\n  getDateFromServer: function (args) {\n    check(args, [Match.Any]);\n    return new Date();\n  },\n  updateViews: function (auctionId) {\n    // console.log(\"updateViews called for: \"+auctionId)\n    Collections.Auctions.update(auctionId, {\n      $inc: {\n        \"views\": 1\n      }\n    });\n  },\n  withdrawBid: function (auctionId) {\n    console.log('withdrawBid called');\n    check(auctionId, String);\n    var userId = Meteor.userId();\n    const bid = Collections.Bids.findOne({\n      auctionId: auctionId,\n      userId: userId\n    });\n\n    if (bid) {\n      throw new Meteor.Error(500, 'Error 500: Bid not found');\n    } //console.log(userId)\n    //console.log(bidId)\n\n\n    Collections.Bids.update({\n      \"_id\": bidId\n    }, {\n      $set: {\n        \"isArchived\": true\n      }\n    });\n    return {\n      status: 'success'\n    };\n  },\n  sendInviteForViewingEmail: function (args) {\n    // check(args, Match.Any);\n    var bidId = args[0];\n    console.log(\"server method sendInviteForViewingEmail called\");\n    console.log(bidId);\n    var bid = Collections.Bids.findOne(bidId, {\n      transform: function (data) {\n        data.user = Accounts.users.findOne(data.userId);\n        data.auction = Collections.Auctions.findOne({\n          _id: data.auctionId,\n          isArchived: false\n        });\n        data.property = Collections.Properties.findOne(data.auction.propertyId);\n        return data;\n      }\n    });\n    if (!bid) throw new Meteor.Error(500, 'Error 500: Invalid application', 'Application not found.');\n    if (bid.isArchived) throw new Meteor.Error('This application is withdrawn by the user. Please choose another application.');\n    if (!bid.user) throw new Meteor.Error(500, 'Error 500: Invalid user', 'User not found.');\n    if (!bid.auction) throw new Meteor.Error(500, 'Error 500: Property not active', 'Active property is needed to send an invite.');\n    if (!bid.property) throw new Meteor.Error(500, 'Error 500: Property not active', 'Active property is needed to send an invite.'); //In future we will have concept of archiving the property, so the same keywords like 'property not active' just like auction.\n\n    var d = new Date(args[1]);\n    if (!d) throw new Meteor.Error(500, 'Error 500: Invalid invite date', 'Please select a valid invite date.');\n    var property = bid.property;\n    var auction = bid.auction;\n    Collections.Bids.update(bidId, {\n      $set: {\n        invitedDate: new Date()\n      }\n    });\n    var options = {\n      weekday: \"long\",\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\"\n    };\n    const agent = Meteor.user(); //////////// SEND MAIL to winning user\n\n    property.type = titleCase(property.type);\n    property.address.address = titleCase(property.address.address);\n    property.address.area = titleCase(property.address.area);\n    property.address.county = titleCase(property.address.county);\n    var mailData = {\n      template: 'inviteForViewing',\n      subject: \"Invite for viewing\",\n      mailTo: bid.user.profile.email,\n      replyTo: agent.profile.email,\n      inviteDateFormated: d.toLocaleTimeString(\"en-us\", options),\n      //mailTo: 'srikanth681@gmail.com',\n      homepage: Meteor.absoluteUrl(),\n      application: bid,\n      auction: auction,\n      project: property,\n      user: bid.user,\n      agent: Accounts.user(),\n      bedsCount: property.bedrooms.length,\n      offerFormated: numDifferentiation(bid.yourBid),\n      rentFormated: numDifferentiation(auction.price)\n    };\n    Meteor.call('sendNotificationEmail', mailData);\n    return {\n      status: 'Success'\n    };\n  },\n  sendInviteToApplyEmail: function (args) {\n    // check(args, Match.Any);\n    var advertisements = args[0];\n    var tenantId = args[1];\n    console.log(\"server method sendInviteToApplyEmail called\");\n    var tenant = Meteor.users.findOne(tenantId);\n    if (!tenant) throw new Meteor.Error(500, 'Error 500: Invalid tenant', 'Tenant not found.');\n    console.log(advertisements);\n    var results = Collections.Auctions.find({\n      _id: {\n        $in: advertisements\n      }\n    }, {\n      fields: {\n        lettingAuctionCode: 1,\n        propertyId: 1,\n        property: 1\n      },\n      transform: function (data) {\n        data.property = Collections.Properties.findOne(data.propertyId, {\n          fields: {\n            address: 1,\n            createdByAgent: 1,\n            createdAt: 1,\n            updatedAt: 1,\n            isArchived: 1,\n            auctionId: 1\n          }\n        });\n        return data;\n      }\n    }).fetch();\n    var advertisementCount = results.length;\n    console.log(advertisementCount);\n\n    if (!advertisementCount) {\n      //Nothing found.\n      throw new Meteor.Error(500, 'Error 500: Invalid advertisements', 'Advertisements not found.');\n    }\n\n    const agent = Meteor.user(); //////////// SEND MAIL to winning user\n\n    var mailData = {\n      template: 'inviteToApply',\n      subject: \"Invitation to apply for properties\",\n      mailTo: tenant.profile.email,\n      replyTo: agent.profile.email,\n      //mailTo: 'srikanth681@gmail.com',\n      homepage: Meteor.absoluteUrl(),\n      user: tenant,\n      agent: Accounts.user(),\n      advertisementCount: advertisementCount,\n      advertisements: results\n    }; // console.log('results are:');\n    // console.log(results);\n\n    Meteor.call('sendNotificationEmail', mailData);\n    return {\n      status: 'Success'\n    };\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"properties.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/core/properties.js                                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet check;\nmodule.link(\"meteor/check\", {\n  check(v) {\n    check = v;\n  }\n\n}, 0);\n// import TokenGen from 'token-gen';\nMeteor.methods({\n  archiveProperty: function (propertyId) {\n    check(propertyId, String);\n    console.log(\"server method archiveProperty called\");\n    console.log(propertyId);\n    const userId = Meteor.userId();\n    console.log(userId);\n    if (!userId) throw new Meteor.Error('not-authorized');\n    const property = Collections.Properties.findOne({\n      _id: propertyId\n    });\n    if (!property) throw new Meteor.Error('Invalid property');\n    if (property.createdByAgent != userId) throw new Meteor.Error('Invalid user'); //PROPERTY BELONGS TO THIS AGENT\n\n    if (property.auctionId) {\n      //if it has an active auction\n      Meteor.call('deactivateAuction', property.auctionId, function (error, result) {\n        if (error) {\n          throw new Meteor.Error(400, \"Deactivation Failed\");\n        }\n      });\n    }\n\n    Collections.Properties.update(propertyId, {\n      $set: {\n        \"isArchived\": true\n      }\n    });\n  },\n  editProperty: function (propertyId, data) {\n    console.log(\"common method editProperty called\");\n    const userId = Meteor.userId();\n    console.log(userId);\n    if (!userId) throw new Meteor.Error('not-authorized');\n    var property = Collections.Properties.findOne(propertyId);\n    if (property.createdByAgent != userId) throw new Meteor.Error('not-authorized'); // Its not your property\n\n    var price = getA(data, 'price');\n\n    if (price) {\n      var tmpP = price.split('.');\n      tmpP = tmpP[0]; //No decimals\n\n      price = tmpP.trim().match(/\\d+/g).join('');\n    }\n\n    if (!price) price = 0; // console.log('price is: '+price)\n    // console.log('parsed price is: '+parseInt(price))\n\n    var rentMonthly = parseFloat(price);\n    if (getA(data, 'type') == 'weekly') rentMonthly = parseFloat(rentMonthly / 7 * 30); // Month has 30 days\n\n    var doc = {\n      \"address\": {\n        \"address\": getA(data, 'address.address'),\n        \"county\": getA(data, 'address.county'),\n        \"area\": getA(data, 'address.area'),\n        \"country\": \"Ireland\"\n      },\n      \"rent\": parseInt(price),\n      \"rentMonthly\": rentMonthly,\n      \"type\": getA(data, 'type'),\n      \"baths\": parseInt(getA(data, 'baths')),\n      \"furnished\": getA(data, 'furnished') == \"true\" ? true : false,\n      \"contacts\": [{\n        \"name\": getA(data, 'contacts.0.name'),\n        \"phone\": getA(data, 'contacts.0.phone'),\n        \"email\": getA(data, 'contacts.0.email')\n      }],\n      \"about\": getA(data, 'about'),\n      \"amenities\": getA(data, 'amenities'),\n      \"createdByAgent\": userId,\n      \"updatedAt\": new Date()\n    }; // {name: \"bedrooms.0.ensuite\", value: \"on\"}\n    // 8\n    // :\n    // {name: \"bedrooms.0.bedType\", value: \"single\"}\n    // \"bedrooms\" : [\n    //     {\n    //         \"bedType\" : \"double\",\n    //         \"ensuite\" : true\n    //     },\n    //     {\n    //         \"bedType\" : \"single\",\n    //         \"ensuite\" : false\n    //     }\n    // ],\n\n    var numBedRoomCount = getA(data, 'numBedRoomCount');\n\n    if (numBedRoomCount) {\n      var bedrooms = [];\n\n      for (var i = 0; i < numBedRoomCount; i++) {\n        var bne = \"bedrooms.\" + i + \".ensuite\";\n        var bnt = \"bedrooms.\" + i + \".bedType\";\n        var tmp = {};\n        if (getA(data, bne)) tmp.ensuite = true;else tmp.ensuite = false;\n        tmp.bedType = getA(data, bnt);\n        bedrooms.push(tmp);\n      }\n\n      doc['bedrooms'] = bedrooms;\n      doc['bedCount'] = bedrooms.length;\n    } else {\n      doc['bedrooms'] = [];\n      doc['bedCount'] = '1'; //default 1\n    } // console.log('before');\n    // console.log(doc);\n    // console.log('after');\n    // debugger;\n    // Collections.Properties.update(propertyId,{\n    //     $set:{\n    //         contacts:[],\n    //         bedrooms:[]\n    //     }\n    // });//commeted due to point: editProperty server method has 2 updates one after another - not needed, below code will replace anyways.\n\n\n    Collections.Properties.update(propertyId, {\n      $set: doc\n    }); ////////ADVERTISE FORM DATA\n\n    var advertiseFormActive = getA(data, 'advertiseFormActive');\n\n    if (advertiseFormActive == 'yes') {\n      console.log(\"common method editProperty - editAdvertisement section\");\n      var lease = getA(data, 'lease');\n      var allowedLease = ['1 month', '2 months', '3 months', '4 months', '5  months', '6 months', '7 months', '8 months', '9 months', '10 months', '11 months', '1 year', 'More than a year'];\n      if (!lease || allowedLease.indexOf(lease) == -1) lease = 'More than a year';\n      var rentType = getA(data, 'rentType');\n      var allowedRentType = ['weekly', 'monthly', 'other'];\n      if (!rentType || allowedRentType.indexOf(rentType) == -1) rentType = 'monthly';\n      var currency = getA(data, 'currency');\n      var allowedCurrencies = [\"EUR\", \"POUND\", \"USD\"];\n      if (!currency || allowedCurrencies.indexOf(currency) == -1) currency = \"EUR\";\n      var readyFrom = getA(data, 'readyFrom');\n      if (!readyFrom) readyFrom = new Date(moment().add(1, 'days').startOf('day'));\n      if (readyFrom < new Date(moment().add(1, 'days').startOf('day'))) readyFrom = new Date(moment().add(1, 'days').startOf('day'));\n      var adDoc = {\n        \"price\": parseInt(price),\n        \"currency\": currency,\n        \"readyFrom\": readyFrom,\n        \"lease\": lease,\n        \"rentType\": rentType,\n        \"updatedAt\": new Date()\n      };\n\n      if (getA(data, 'advertContacts.0.name') || getA(data, 'advertContacts.0.phone') || getA(data, 'advertContacts.0.email')) {\n        adDoc['contacts'] = [{\n          \"name\": getA(data, 'advertContacts.0.name'),\n          \"phone\": getA(data, 'advertContacts.0.phone'),\n          \"email\": getA(data, 'advertContacts.0.email')\n        }];\n      }\n\n      Collections.Auctions.update(property.auctionId, {\n        $set: adDoc\n      });\n    } //End of auctions\n\n  },\n  updateGalleries: function (args) {\n    console.log(args); // check(args, [String, [null]]);\n\n    var propertyId = args[0];\n    var galleries = args[1];\n    console.log(\"server method updateGalleries called\");\n\n    if (!Meteor.userId()) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    const property = Collections.Properties.findOne({\n      _id: propertyId\n    });\n    const userId = Meteor.userId(); // console.log(userId)\n    //console.log(bidId)\n\n    if (!property) throw new Meteor.Error('Invalid property');\n    if (property.createdByAgent != userId) throw new Meteor.Error('Invalid user'); //PROPERTY BELONGS TO THIS AGENT\n\n    console.log(galleries);\n    Collections.Properties.update(propertyId, {\n      $set: {\n        \"gallery\": galleries\n      }\n    });\n    return {\n      status: 'success'\n    };\n  },\n  updateGalleriesInUserProfile: function (galleries) {\n    // console.log(galleries);\n    console.log(\"server method updateGalleriesInUserProfile called\");\n    const userId = Meteor.userId();\n    if (!userId) throw new Meteor.Error('not-authorized'); // console.log(galleries);\n\n    Meteor.users.update(userId, {\n      $set: {\n        \"profile.session.addproperty.gallery\": galleries\n      }\n    });\n    return {\n      status: 'success'\n    };\n  },\n  addAuction: function (auctionId) {\n    check(auctionId, String);\n    console.log(\"server method addAuction called\");\n    console.log(auctionId);\n    const userId = Meteor.userId();\n    console.log(userId);\n\n    if (!userId) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    const auction = Collections.Auctions.findOne(auctionId);\n    if (!auction) throw new Meteor.Error('Invalid auction');\n    const property = Collections.Properties.findOne({\n      _id: auction.propertyId\n    });\n    if (!property) throw new Meteor.Error('Invalid property'); // if(property.auctionId)throw new Meteor.Error('Property already has an auction ID');//NOT NEEDED, LET IT REWRITE\n\n    if (property.createdByAgent != userId) throw new Meteor.Error('Invalid user'); //PROPERTY BELONGS TO THIS AGENT\n\n    var rentMonthly = parseFloat(auction.price);\n    if (auction.rentType == 'weekly') rentMonthly = parseFloat(rentMonthly / 7 * 30); // Month has 30 days\n\n    Collections.Properties.update(auction.propertyId, {\n      $set: {\n        \"auctionId\": auction._id,\n        \"rent\": parseInt(auction.price),\n        \"rentMonthly\": rentMonthly\n      }\n    }); // var TokenGen = require('token-gen');\n    // var auctionCode = TokenGen();\n    // console.log(auctionCode);\n    // auctionCode = auctionCode.toString()\n    // console.log(auctionCode);\n    //\n    // Collections.Auctions.update(auctionId, {\n    //     $set: {\n    //         \"lettingAuctionCode\": auctionCode\n    //     }\n    // });\n\n    const user = Meteor.user();\n    if (!user.profile.activeAuctions) user.profile.activeAuctions = 0;\n    if (!user.profile.totalAuctions) user.profile.totalAuctions = 0;\n    user.profile.activeAuctions++;\n    user.profile.totalAuctions++;\n    Meteor.users.update(userId, {\n      $set: {\n        \"profile.activeAuctions\": user.profile.activeAuctions,\n        \"profile.totalAuctions\": user.profile.totalAuctions\n      }\n    });\n    Meteor.call('addActivityHistory', {\n      propertyId: auction.propertyId,\n      auctionId: auction._id,\n      type: 'prop_activation',\n      activated: true\n    });\n    return {\n      status: 'success'\n    };\n  },\n  addAdvertisement: function (data, pid) {\n    let TokenGen;\n    module.link(\"token-gen\", {\n      default(v) {\n        TokenGen = v;\n      }\n\n    }, 1);\n    // check(auctionId, String);\n    console.log(\"server method addAdvertisement called\");\n    const userId = Meteor.userId();\n    console.log(userId);\n\n    if (!userId) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    var propertyId = getA(data, 'propertyId');\n    if (!propertyId && pid) propertyId = pid;\n\n    if (!propertyId) {\n      throw new Meteor.Error('Invalid property ID key. Aborting.');\n      return;\n    }\n\n    const property = Collections.Properties.findOne({\n      _id: propertyId\n    });\n    if (!property) throw new Meteor.Error('Invalid property');\n    if (property.createdByAgent != userId) throw new Meteor.Error('Invalid user'); //PROPERTY BELONGS TO THIS AGENT\n\n    var price = getA(data, 'price');\n\n    if (price) {\n      var tmpP = price.split('.');\n      tmpP = tmpP[0]; //No decimals\n\n      price = tmpP.trim().match(/\\d+/g).join('');\n    }\n\n    if (!price) price = 0;\n    var lease = getA(data, 'lease');\n    var allowedLease = ['1 month', '2 months', '3 months', '4 months', '5  months', '6 months', '7 months', '8 months', '9 months', '10 months', '11 months', '1 year', 'More than a year'];\n    if (!lease || allowedLease.indexOf(lease) == -1) lease = 'More than a year';\n    var rentType = getA(data, 'rentType');\n    var allowedRentType = ['weekly', 'monthly', 'other'];\n    if (!rentType || allowedRentType.indexOf(rentType) == -1) rentType = 'monthly';\n    var currency = getA(data, 'currency');\n    var allowedCurrencies = [\"EUR\", \"POUND\", \"USD\"];\n    if (!currency || allowedCurrencies.indexOf(currency) == -1) currency = \"EUR\";\n    var readyFrom = getA(data, 'readyFrom');\n    if (!readyFrom) readyFrom = new Date(moment().add(1, 'days').startOf('day'));\n    if (readyFrom < new Date(moment().add(1, 'days').startOf('day'))) readyFrom = new Date(moment().add(1, 'days').startOf('day'));\n    var rentMonthly = parseFloat(price);\n    if (rentType == 'weekly') rentMonthly = parseFloat(rentMonthly / 7 * 30); // Month has 30 days\n\n    var doc = {\n      \"propertyId\": propertyId,\n      \"price\": parseInt(price),\n      \"rentMonthly\": rentMonthly,\n      \"createdByAgent\": userId,\n      \"isArchived\": false,\n      \"auctionBidProfit\": 0,\n      \"currency\": currency,\n      \"readyFrom\": readyFrom,\n      \"lease\": lease,\n      \"rentType\": rentType,\n      \"views\": 0,\n      \"bids\": 0,\n      \"enquiryCount\": 0,\n      \"createdByAgent\": userId,\n      \"createdAt\": new Date(),\n      \"updatedAt\": new Date()\n    };\n\n    if (getA(data, 'contacts.0.name') || getA(data, 'contacts.0.phone') || getA(data, 'contacts.0.email')) {\n      doc['contacts'] = [{\n        \"name\": getA(data, 'contacts.0.name'),\n        \"phone\": getA(data, 'contacts.0.phone'),\n        \"email\": getA(data, 'contacts.0.email')\n      }];\n    }\n\n    var auctionCode = TokenGen();\n    var key = auctionCode.toString();\n    var auc = Collections.Auctions.findOne({\n      \"lettingAuctionCode\": key\n    });\n    var i = 0;\n\n    while (auc) {\n      // it should be undefined, else loop\n      auctionCode = TokenGen();\n      key = auctionCode.toString();\n      auc = Collections.Auctions.findOne({\n        \"lettingAuctionCode\": key\n      });\n\n      if (1 > 10000) {\n        throw new Meteor.Error('Couldnt generate property key. Aborting.');\n        return;\n      }\n\n      i++;\n    }\n\n    if (auctionCode) {\n      doc['lettingAuctionCode'] = key;\n    } // console.log(doc);\n\n\n    var auctionId = Collections.Auctions.insert(doc); // return 'as';\n    // const auction = Collections.Auctions.findOne(auctionId);\n\n    const auction = doc;\n    Collections.Properties.update(propertyId, {\n      $set: {\n        \"auctionId\": auctionId,\n        \"rent\": parseInt(price),\n        \"rentMonthly\": rentMonthly\n      }\n    });\n    const user = Meteor.user();\n    if (!user.profile.activeAuctions) user.profile.activeAuctions = 0;\n    if (!user.profile.totalAuctions) user.profile.totalAuctions = 0;\n    user.profile.activeAuctions++;\n    user.profile.totalAuctions++;\n    Meteor.users.update(userId, {\n      $set: {\n        \"profile.activeAuctions\": user.profile.activeAuctions,\n        \"profile.totalAuctions\": user.profile.totalAuctions\n      }\n    });\n    Meteor.call('addActivityHistory', {\n      propertyId: auction.propertyId,\n      auctionId: auction._id,\n      type: 'prop_activation',\n      activated: true\n    });\n    var sub = 'Property added: ' + user.profile.name;\n    var desc = \"\\nProperty ID: \" + auction.propertyId + \"<br/>\\nProperty Key: \" + auction.lettingAuctionCode + \"<br/>\\nProperty Link: <a href=\\\"https://www.spotmycrib.ie/letting/\" + auction.lettingAuctionCode + \"\\\">Link</a><br/>\\nProperty Link New: <a href=\\\"https://www.spotmycrib.ie/rent/\" + property.slug + '/' + auction.lettingAuctionCode + \"\\\">Link New</a><br/>\\n\";\n    Meteor.call('notifyAdmin', sub, desc);\n    return auctionId;\n  },\n  chooseWinning: function (args) {\n    auctionId = args[0];\n    bidId = args[1];\n    check(auctionId, String);\n    check(bidId, String);\n    console.log(\"server method chooseWinning called\");\n    const agent = Meteor.user(); // console.log(agent._id);\n\n    if (!agent._id) throw new Meteor.Error('not-authorized');\n    const auction = Collections.Auctions.findOne(auctionId);\n    if (!auction) throw new Meteor.Error('Invalid auction');\n    const bid = Collections.Bids.findOne(bidId, {\n      transform: function (doc) {\n        doc.user = Meteor.users.findOne(doc.userId);\n        return doc;\n      }\n    });\n    if (!bid) throw new Meteor.Error('Invalid bid');\n    if (bid.isArchived) throw new Meteor.Error('This application is withdrawn by the user. Please choose another application.');\n    const user = bid.user;\n    if (!user._id) throw new Meteor.Error('User not found');\n    const property = Collections.Properties.findOne({\n      _id: auction.propertyId\n    });\n    if (!property) throw new Meteor.Error('Invalid property');\n    if (property.createdByAgent != agent._id) throw new Meteor.Error('Invalid user'); //PROPERTY BELONGS TO THIS AGENT CHECK\n    ///////DONE WITH ALL THE CHECKS\n\n    var chosenBids = [];\n    var formattedBid = {};\n\n    if (auction.chosenBids) {\n      chosenBids = auction.chosenBids;\n\n      for (var a = 0; a < auction.chosenBids.length; a++) {\n        if (auction.chosenBids[a].bidId == bid._id) {\n          throw new Meteor.Error('This application is already chosen');\n        } //Already in chosen\n\n      }\n    }\n\n    formattedBid = {\n      bidId: bid._id,\n      chosenOn: new Date()\n    };\n    chosenBids.unshift(formattedBid);\n    console.log('chosenBids');\n    console.log(chosenBids);\n    Collections.Auctions.update(auction._id, {\n      $set: {\n        chosenBids: chosenBids\n      }\n    });\n    Collections.Bids.update(bid._id, {\n      $set: {\n        chosen: true\n      }\n    }); //////////// CODE TO COPY ALL REFERENCES\n\n    var bids = Collections.Bids.find({\n      auctionId: auction._id,\n      isArchived: false\n    }, {\n      transform: function (doc) {\n        doc.user = Meteor.users.findOne(doc.userId);\n        return doc;\n      }\n    }).fetch();\n\n    for (var i = 0; i < bids.length; i++) {\n      //Everytime you click on choose, this field gets refreshed.\n      Collections.Bids.update(bids[i]._id, {\n        $set: {\n          references: bids[i].user.profile.references // isArchived: true//Bid archive is used for bid deletion, so don't archive\n\n        }\n      });\n    } //////////// SEND MAIL to winning user\n\n\n    property.type = titleCase(property.type);\n    property.address.address = titleCase(property.address.address);\n    property.address.area = titleCase(property.address.area);\n    property.address.county = titleCase(property.address.county);\n    var mailData = {\n      template: 'applicationWon',\n      subject: \"Application Won\",\n      mailTo: bid.user.profile.email,\n      replyTo: agent.profile.email,\n      //mailTo: 'srikanth681@gmail.com',\n      homepage: Meteor.absoluteUrl(),\n      application: bid,\n      auction: auction,\n      project: property,\n      user: user,\n      agentName: agent.profile.name,\n      agentEmail: agent.profile.email,\n      bedsCount: property.bedrooms.length,\n      offerFormated: numDifferentiation(bid.yourBid),\n      rentFormated: numDifferentiation(auction.price)\n    };\n    Meteor.call('sendNotificationEmail', mailData); // Meteor.call('deactivateAuction', auctionId);\n  },\n  unChooseWinning: function (args) {\n    auctionId = args[0];\n    bidId = args[1];\n    check(auctionId, String);\n    check(bidId, String);\n    console.log(\"server method unChooseWinning called\");\n    const agent = Meteor.user(); // console.log(agent._id);\n\n    if (!agent._id) throw new Meteor.Error('not-authorized');\n    const auction = Collections.Auctions.findOne(auctionId);\n    if (!auction) throw new Meteor.Error('Invalid auction');\n    const bid = Collections.Bids.findOne(bidId, {\n      transform: function (doc) {\n        doc.user = Meteor.users.findOne(doc.userId);\n        return doc;\n      }\n    });\n    if (!bid) throw new Meteor.Error('Invalid bid');\n    if (bid.isArchived) throw new Meteor.Error('This application is withdrawn by the user. Please choose another application.');\n    const user = bid.user;\n    if (!user._id) throw new Meteor.Error('User not found');\n    const property = Collections.Properties.findOne({\n      _id: auction.propertyId\n    });\n    if (!property) throw new Meteor.Error('Invalid property');\n    if (property.createdByAgent != agent._id) throw new Meteor.Error('Invalid user'); //PROPERTY BELONGS TO THIS AGENT CHECK\n    ///////DONE WITH ALL THE CHECKS\n\n    var chosenBids = [];\n    var formattedBid = {};\n    if (!auction.chosenBids) throw new Meteor.Error('You need to chose an application first.');\n    if (!auction.chosenBids.length) throw new Meteor.Error('You need to chose an application first.');\n    chosenBids = auction.chosenBids;\n    var found = false;\n\n    for (var a = 0; a < chosenBids.length; a++) {\n      if (chosenBids[a].bidId == bid._id) {\n        found = true;\n        chosenBids.splice(a, 1);\n      } //Already in chosen\n\n    }\n\n    if (!found) throw new Meteor.Error('You need to chose an application first.'); // console.log('chosenBids');\n    // console.log(chosenBids);\n\n    Collections.Auctions.update(auction._id, {\n      $set: {\n        chosenBids: chosenBids\n      }\n    });\n    Collections.Bids.update(bid._id, {\n      $set: {\n        chosen: false\n      }\n    }); //////////// CODE TO COPY ALL REFERENCES\n\n    var bids = Collections.Bids.find({\n      auctionId: auction._id,\n      isArchived: false\n    }, {\n      transform: function (doc) {\n        doc.user = Meteor.users.findOne(doc.userId);\n        return doc;\n      }\n    }).fetch();\n\n    for (var i = 0; i < bids.length; i++) {\n      //Everytime you click on choose, this field gets refreshed.\n      Collections.Bids.update(bids[i]._id, {\n        $set: {\n          references: bids[i].user.profile.references // isArchived: true//Bid archive is used for bid deletion, so don't archive\n\n        }\n      });\n    } //////////// SEND MAIL to winning user\n\n\n    property.type = titleCase(property.type);\n    property.address.address = titleCase(property.address.address);\n    property.address.area = titleCase(property.address.area);\n    property.address.county = titleCase(property.address.county);\n    var mailData = {\n      template: 'applicationPending',\n      subject: \"Application Pending\",\n      mailTo: bid.user.profile.email,\n      replyTo: agent.profile.email,\n      //mailTo: 'srikanth681@gmail.com',\n      homepage: Meteor.absoluteUrl(),\n      application: bid,\n      auction: auction,\n      project: property,\n      user: user,\n      agentName: agent.profile.name,\n      agentEmail: agent.profile.email,\n      bedsCount: property.bedrooms.length,\n      offerFormated: numDifferentiation(bid.yourBid),\n      rentFormated: numDifferentiation(auction.price)\n    };\n    Meteor.call('sendNotificationEmail', mailData); // Meteor.call('deactivateAuction', auctionId);\n  },\n  markChosen: function (args) {\n    bidId = args[0];\n    check(bidId, String);\n    console.log(\"server method markChosen called\");\n    const agent = Meteor.user(); // console.log(agent._id);\n\n    if (!agent._id) throw new Meteor.Error('not-authorized');\n    const bid = Collections.Bids.findOne(bidId, {\n      transform: function (doc) {\n        doc.auction = Collections.Auctions.findOne(doc.auctionId);\n        return doc;\n      }\n    });\n    if (!bid) throw new Meteor.Error('Invalid bid');\n    if (bid.isArchived) throw new Meteor.Error('This application is withdrawn by the user. Please choose another application.');\n    var auction = bid.auction;\n    if (!bid.auction) throw new Meteor.Error('Invalid auction');\n    if (bid.auction.createdByAgent != agent._id) throw new Meteor.Error('Invalid property owner. '); //PROPERTY BELONGS TO THIS AGENT CHECK\n\n    Collections.Bids.update(bidId, {\n      $set: {\n        chosen: false\n      }\n    });\n  },\n  unMarkChosen: function (args) {\n    bidId = args[0];\n    check(bidId, String);\n    console.log(\"server method unMarkChosen called\");\n    const agent = Meteor.user(); // console.log(agent._id);\n\n    if (!agent._id) throw new Meteor.Error('not-authorized');\n    const bid = Collections.Bids.findOne(bidId, {\n      transform: function (doc) {\n        doc.auction = Collections.Auctions.findOne(doc.auctionId);\n        return doc;\n      }\n    });\n    if (!bid) throw new Meteor.Error('Invalid bid');\n    if (bid.isArchived) throw new Meteor.Error('This application is withdrawn by the user. Please choose another application.');\n    var auction = bid.auction;\n    if (!bid.auction) throw new Meteor.Error('Invalid auction');\n    if (bid.auction.createdByAgent != agent._id) throw new Meteor.Error('Invalid property owner. '); //PROPERTY BELONGS TO THIS AGENT CHECK\n\n    Collections.Bids.update(bidId, {\n      $set: {\n        chosen: false\n      }\n    });\n  },\n  deactivateAuction: function (auctionId) {\n    check(auctionId, String);\n    console.log(\"server method deactivateAuction called\");\n    console.log(auctionId);\n    const userId = Meteor.userId();\n    console.log(userId);\n\n    if (!userId) {\n      throw new Meteor.Error('not-authorized');\n    }\n\n    const auction = Collections.Auctions.findOne(auctionId);\n    if (!auction) throw new Meteor.Error('Invalid auction');\n    const property = Collections.Properties.findOne({\n      _id: auction.propertyId\n    });\n    if (!property) throw new Meteor.Error('Invalid property');\n    if (property.createdByAgent != userId) throw new Meteor.Error('Invalid user'); //PROPERTY BELONGS TO THIS AGENT\n\n    var auctionHistory = property.auctionHistory;\n    if (!auctionHistory) auctionHistory = [];\n    auctionHistory.push({\n      auctionId: property.auctionId,\n      deactivatedOn: new Date()\n    });\n    Collections.Properties.update(auction.propertyId, {\n      $set: {\n        \"auctionId\": \"\",\n        \"rent\": \"\",\n        \"auctionHistory\": auctionHistory\n      }\n    });\n    Collections.Auctions.update(auction._id, {\n      $set: {\n        \"isArchived\": true,\n        \"endDate\": new Date()\n      }\n    });\n    var bidCount = Collections.Bids.find({\n      auctionId: auction._id\n    }).count();\n\n    if (bidCount) {\n      //Non zero\n      Collections.Bids.update({\n        auctionId: auction._id\n      }, {\n        $set: {\n          \"isArchived\": true,\n          \"endDate\": new Date()\n        }\n      });\n    }\n\n    const user = Meteor.user();\n    if (!auction.auctionBidProfit) auction.auctionBidProfit = 0;\n    if (!user.profile.bidProfitActive) user.profile.bidProfitActive = 0;\n    if (!user.profile.activeAuctions) user.profile.activeAuctions = 0;\n    if (!user.profile.bidsReceivedActiveAuctions) user.profile.bidsReceivedActiveAuctions = 0;\n    user.profile.activeAuctions--;\n    user.profile.bidsReceivedActiveAuctions -= bidCount;\n    user.profile.bidProfitActive -= auction.auctionBidProfit;\n    if (user.profile.activeAuctions < 0) user.profile.activeAuctions = 0;\n    if (user.profile.bidsReceivedActiveAuctions < 0) user.profile.bidsReceivedActiveAuctions = 0;\n    if (user.profile.bidProfitActive < 0) user.profile.bidProfitActive = 0;\n    Meteor.users.update(userId, {\n      $set: {\n        \"profile.activeAuctions\": user.profile.activeAuctions,\n        \"profile.bidsReceivedActiveAuctions\": user.profile.bidsReceivedActiveAuctions,\n        \"profile.bidProfitActive\": user.profile.bidProfitActive\n      }\n    });\n    Meteor.call('addActivityHistory', {\n      propertyId: auction.propertyId,\n      auctionId: auction._id,\n      type: 'prop_deactivation',\n      activated: false\n    });\n    return {\n      status: 'success'\n    };\n  },\n  deactivateAuctionMulti: function (propIds) {\n    // check(auctionId, String);\n    console.log(\"server method deactivateAuctionMulti called\");\n    let propId = '',\n        successCount = 0,\n        deactivatedProps = [];\n\n    for (let i = 0; i < propIds.length; i++) {\n      propId = propIds[i];\n      console.log('propId is: ' + propId);\n      const auction = Collections.Auctions.findOne({\n        propertyId: propId,\n        isArchived: false\n      }); //Dont get already archived props\n\n      if (!auction) continue;\n      const property = Collections.Properties.findOne(propId);\n      if (!property) continue;\n      var auctionHistory = property.auctionHistory;\n      if (!auctionHistory) auctionHistory = [];\n      auctionHistory.push({\n        auctionId: property.auctionId,\n        deactivatedOn: new Date()\n      });\n      console.log('auctionHistory done ' + auction._id);\n      Collections.Properties.update(auction.propertyId, {\n        $set: {\n          \"auctionId\": \"\",\n          \"rent\": \"\",\n          \"auctionHistory\": auctionHistory\n        }\n      });\n      console.log('Properties update done ' + auction.propertyId);\n      Collections.Auctions.update(auction._id, {\n        $set: {\n          \"isArchived\": true,\n          \"endDate\": new Date()\n        }\n      });\n      var bidCount = Collections.Bids.find({\n        auctionId: auction._id\n      }).count();\n\n      if (bidCount) {\n        //Non zero\n        Collections.Bids.update({\n          auctionId: auction._id\n        }, {\n          $set: {\n            \"isArchived\": true,\n            \"endDate\": new Date()\n          }\n        });\n      }\n\n      console.log('bidCount done ' + bidCount);\n      const userId = property.createdByAgent;\n      const user = Meteor.users.findOne({\n        _id: userId\n      });\n      if (!auction.auctionBidProfit) auction.auctionBidProfit = 0;\n\n      if (user) {\n        // in Dev with all users deleted, below code would fail, so adding this if condition. \n        if (!user.profile.bidProfitActive) user.profile.bidProfitActive = 0;\n        if (!user.profile.activeAuctions) user.profile.activeAuctions = 0;\n        if (!user.profile.bidsReceivedActiveAuctions) user.profile.bidsReceivedActiveAuctions = 0;\n        user.profile.activeAuctions--;\n        user.profile.bidsReceivedActiveAuctions -= bidCount;\n        user.profile.bidProfitActive -= auction.auctionBidProfit;\n        if (user.profile.activeAuctions < 0) user.profile.activeAuctions = 0;\n        if (user.profile.bidsReceivedActiveAuctions < 0) user.profile.bidsReceivedActiveAuctions = 0;\n        if (user.profile.bidProfitActive < 0) user.profile.bidProfitActive = 0;\n        Meteor.users.update(userId, {\n          $set: {\n            \"profile.activeAuctions\": user.profile.activeAuctions,\n            \"profile.bidsReceivedActiveAuctions\": user.profile.bidsReceivedActiveAuctions,\n            \"profile.bidProfitActive\": user.profile.bidProfitActive\n          }\n        });\n      }\n\n      data = {\n        propertyId: auction.propertyId,\n        auctionId: auction._id,\n        type: 'prop_deactivation',\n        activated: false,\n        createdAt: new Date()\n      };\n      Collections.ActivityHistory.insert(data);\n      successCount++;\n      deactivatedProps.push({\n        slug: property.slug,\n        lettingAuctionCode: auction.lettingAuctionCode,\n        address: property.address.address + ', ' + property.address.county + ', ' + property.address.area\n      });\n    }\n\n    if (successCount > 0) {\n      var sub = 'Multi Auctions Deactivated';\n      let tableHtml = '',\n          deactivatedProp = {};\n\n      for (i = 0; i < deactivatedProps.length; i++) {\n        deactivatedProp = deactivatedProps[i];\n        tableHtml += \"<tr>\\n                <td>\" + deactivatedProps[i].address + \"</td>\\n                <td><a href=\\\"https://www.spotmycrib.ie/rent/\" + deactivatedProps[i].slug + \"/\" + deactivatedProps[i].lettingAuctionCode + \"\\\">Link1</a></td>\\n                <td><a href=\\\"https://www.spotmycrib.ie/letting/\" + deactivatedProps[i].lettingAuctionCode + \"\\\">Link2</a></td>\\n                </tr>\";\n      }\n\n      var desc = \"\\n\\n    Deactivate Count: \" + successCount + \"<br/><br/>\\n\\n    <table>\\n    \" + tableHtml + \"\\n    </table>\\n    \";\n      Meteor.call('notifyAdmin', sub, desc);\n    }\n\n    return {\n      status: 'success'\n    };\n  }\n});\n\nArray.prototype.pushUnique = function (item) {\n  if (this.indexOf(item) == -1) {\n    //if(jQuery.inArray(item, this) == -1) {\n    this.push(item);\n    return true;\n  }\n\n  return false;\n};\n\nfunction numDifferentiation(val) {\n  if (val >= 1000000000) val = (val / 1000000000).toFixed(2) + ' Billion';else if (val >= 1000000) val = (val / 1000000).toFixed(2) + ' Million';\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction getA(arr, find) {\n  if (!Array.isArray(arr)) return;\n  var eles = [];\n\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i]['name'] == find) eles.push(arr[i]['value']);\n  }\n\n  if (find == 'amenities') return eles;\n  if (eles.lenght > 1) return eles;\n  if (eles.lenght == 0) return false;\n  return eles[0];\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"cronjobs\":{\"cronjobs.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/cronjobs/cronjobs.js                                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet emailProcessors;\nmodule.link(\"./functions.js\", {\n  default(v) {\n    emailProcessors = v;\n  }\n\n}, 0);\n// SyncedCron.add({\n//   name    : 'CORN-E1',\n//   schedule: function(parser) {\n//     return parser.text('every 1 mins');\n//   },\n//   job     : function() {\n//     console.log('CORN-E1 executing ')\n//     deactivateProps();\n//     return true;\n//   }\n// });\n// SyncedCron.add({\n//   name    : 'CORN-E1',\n//   schedule: function(parser) {\n//     return parser.text('every 3 mins');\n//   },\n//   job     : function() {\n//     console.log('CORN-E1 executing ')\n//     emailProcessors.dailyPropAlerts()\n//     return true;\n//   }\n// });\nSyncedCron.add({\n  name: 'CORN-E15',\n  schedule: function (parser) {\n    return parser.text('every 15 mins');\n  },\n  job: function () {\n    console.log('CORN-E15 executing ');\n    emailProcessors.emailEnquiryReceived();\n\n    if (!Meteor.Development) {// importBlogs();//Disabling as migration to new wordpress has changed the import json format, so the old code doesnt work anymore. \n    }\n\n    return true;\n  }\n});\nSyncedCron.add({\n  name: 'CORN-E1D',\n  schedule: function (parser) {\n    return parser.text('every 1 day');\n  },\n  job: function () {\n    console.log('CORN-E1D executing '); // emailProcessors.reminderUploadReferences()\n\n    deactivateProps();\n    return true;\n  }\n});\nMeteor.startup(function () {\n  // deactivateProps();  \n  if (!process.env.MAIL_URL) console.log('Env URL is empty : ' + process.env.MAIL_URL);\n  if (!process.env.MAIL_URL) process.env.MAIL_URL = 'smtp://dev%40spotmycrib.ie:b399dbc946d2ef90dac4a1c3414d31dc-1d8af1f4-9c3055ea@smtp.mailgun.org:587';\n});\nSyncedCron.start(); // SyncedCron.add({\n//   name: 'Auctions are completed. Send mails to users who won aucitons.',\n//     schedule: function(parser) {//12 am of everyday\n//     // parser is a later.parse object\n//     //return parser.text('every 2 hours');\n//     //var gloablConfig = ReactionCore.Collections.Config.findOne()\n//     //return parser.recur().on(parseInt(gloablConfig.auctionEndDay)+1).month();\n//     return parser.text('at 12:00am every day');\n//   },\n//   job: function() {\n//     // sendAuctionWonMails();\n//     processRefunds();\n//     return true;\n//   }\n// });\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"emailAlerts.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/cronjobs/emailAlerts.js                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet check;\nmodule.link(\"meteor/check\", {\n  check(v) {\n    check = v;\n  }\n\n}, 0);\nMeteor.methods({\n  subscribeToEmailAlert(email) {\n    console.log('in subscribeToEmailAlert: ' + email);\n    this.unblock();\n    let validatedEmail = emailValidation(email);\n\n    if (validatedEmail !== true) {\n      throw new Meteor.Error(400, 'Invalid email, please enter a valid email address.');\n    }\n\n    let ele = Collections.propertyAlerts.findOne({\n      'email': email\n    }); // You can make this email field unique index and save 1 mongodb query here, but its async anyway, so ignoring\n\n    if (ele) {//ignore; you alredy have it subscribed ;\n    } else {\n      Collections.propertyAlerts.insert({\n        'email': email\n      });\n    }\n\n    if (this.userId) {\n      Meteor.users.update({\n        \"_id\": this.userId\n      }, {\n        $set: {\n          \"profile.emailAlertsActive\": true\n        }\n      });\n    }\n\n    return true;\n  },\n\n  emailAlertsNoThanks() {\n    console.log('in emailAlertsNoThanks');\n    this.unblock();\n\n    if (this.userId) {\n      Meteor.users.update({\n        \"_id\": this.userId\n      }, {\n        $set: {\n          \"profile.emailAlertsNoThanks\": true\n        }\n      });\n    }\n\n    return true;\n  }\n\n});\n\nfunction emailValidation(email) {\n  email = email.trim();\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/; // Valid\n\n  if (re.test(email)) {\n    return true;\n  } // Invalid\n\n\n  return {\n    error: \"INVALID_EMAIL\",\n    reason: \"Please enter a valid email address in format pat@gmail.com\"\n  };\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"functions.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/cronjobs/functions.js                                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * Created by srikanth681 on 29/02/16.\n */\nfunction cleanText(str) {\n  if (!str) return str;\n  str = str.toString().trim();\n  str = str.replace('http://blog.spotmycrib.com', 'http://www.spotmycrib.ie/blog');\n  str = str.replace('www.spotmycrib.com', 'www.spotmycrib.ie');\n  str = str.replace(/(^,)|(,$)/g, \"\"); //\",liger, unicorn, snipe,\" will remove first and last comma\n\n  return str;\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction decodeHTMLEntities(text) {\n  var entities = [['amp', '&'], ['apos', '\\''], ['#x27', '\\''], ['#x2F', '/'], ['#39', '\\''], ['#47', '/'], ['lt', '<'], ['gt', '>'], ['nbsp', ' '], ['raquo', ''], ['quot', '\"']];\n  if (text) for (var i = 0, max = entities.length; i < max; ++i) text = text.replace(new RegExp('&' + entities[i][0] + ';', 'g'), entities[i][1]);\n  return text;\n}\n\nfunction stripHTML(str) {\n  return str.replace(/<\\/?[^>]+(>|$)/g, \"\");\n}\n\nfunction numDifferentiation(val) {\n  if (val >= 1000000000) val = (val / 1000000000).toFixed(2) + ' Billion';else if (val >= 1000000) val = (val / 1000000).toFixed(2) + ' Million';\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction onlyUnique(value, index, self) {\n  return self.indexOf(value) === index;\n}\n\nfunction chunkify(a, n, balanced) {\n  if (n < 2) return [a];\n  if (!Array.isArray(a)) return [];\n  var len = a.length,\n      out = [],\n      i = 0,\n      size;\n\n  if (len % n === 0) {\n    size = Math.floor(len / n);\n\n    while (i < len) {\n      out.push(a.slice(i, i += size));\n    }\n  } else if (balanced) {\n    while (i < len) {\n      size = Math.ceil((len - i) / n--);\n      out.push(a.slice(i, i += size));\n    }\n  } else {\n    n--;\n    size = Math.floor(len / n);\n    if (len % size === 0) size--;\n\n    while (i < size * n) {\n      out.push(a.slice(i, i += size));\n    }\n\n    out.push(a.slice(size * n));\n  }\n\n  return out;\n}\n\nfunction chunkifyObj(a, n, balanced) {\n  let ret = chunkify(a, n, balanced);\n\n  if (ret.length > 1) {\n    let newRet = [],\n        tmp; // New Format is\n    // [\n    //   {props: [prop1, prop2, prop3]},\n    //   {props: [prop1, prop2, prop3]}\n    // ]\n\n    for (let i = 0; i < ret.length; i++) {\n      console.log(ret[i]);\n      tmp = {};\n      tmp = {\n        props: ret[i]\n      };\n      newRet.push(tmp);\n    }\n\n    ret = newRet;\n  }\n\n  return ret;\n} // todo: \n// Create indexes for emailEnquiries and emailRequests\n\n\nvar emailProcessors = {\n  emailEnquiryReceived: function () {\n    /*\n    Assumptions and requirements\n    - There can be only emailRequest / user / property\n    - There can be multiple emailRequests / user but diff properties\n    - There should be only one email send for 1 user - by this method - with a max cut of of 4 props per email\n    - One email can contain props belonging to multiple agents - there is no agent specific grouping - to reduce the number of testing scenarios and the logic simple.\n    */\n    let list = Collections.EmailRequests.find({\n      isArchived: false,\n      requestType: \"emailEnquiryReceived\"\n    }, {\n      transform: function (data) {\n        data.property = Collections.Properties.findOne({\n          _id: data.propertyId\n        });\n        data.property.address.address = cleanText(data.property.address.address);\n        data.property.address.area = cleanText(data.property.address.area);\n        data.property.address.county = cleanText(data.property.address.county);\n        let altText = '';\n        data.property.sliderImages = [];\n\n        if (data.property.gallery) {\n          for (var i = 0; i < data.property.gallery.length; i++) {\n            altText = 'Photo ' + (i + 1) + ' of ' + titleCase(data.property.address.address);\n            if (data.property.address.area) altText += ', ' + titleCase(data.property.address.area);\n            if (data.property.address.county) altText += ', ' + titleCase(data.property.address.county);\n            data.property.sliderImages.push({\n              url: data.property.gallery[i].url,\n              altText: altText\n            });\n          }\n        }\n\n        data.property.desktopHideClassName = \"desktop_hide\";\n        if (data.property.sliderImages.length == 0) data.property.desktopHideClassName = \"\";\n        data.emailEnquiry = Collections.EmailEnquiries.findOne({\n          _id: data.emailEnquiryId\n        });\n        data.propertyImage = null;\n\n        if (data.property.gallery) {\n          if (data.property.gallery[0]) data.property.propertyImage = data.property.gallery[0];\n        }\n\n        data.property.bedsCount = data.property.bedrooms.length;\n        data.auction = Collections.Auctions.findOne({\n          _id: data.property.auctionId\n        });\n        if (data.auction) //// Added to handle recoreds with no actions, we can directly archive this records. \n          data.auction.rentFormated = numDifferentiation(data.auction.price); //ToDo: What if property is deactivated in the meanwhile and property.auctionId is empty, then this will throw an error.\n\n        if (data.property) data.agent = Meteor.users.findOne({\n          _id: data.property.createdByAgent\n        });else console.log('no property found for: ' + data.propertyId);\n        return data;\n      },\n      sort: {\n        createdAt: -1\n      }\n    }).fetch();\n    if (list.length == 0) return;\n    console.log('total requests found: ' + list.length);\n    if (!list.length) return true;\n    let userEmailList = [],\n        maxPropertiesPerEmail = 4,\n        i,\n        j,\n        k,\n        a,\n        req = {},\n        listOfInvalidReqsToArchive = [],\n        listOfReqsToArchive = [],\n        listOfReqsToArchiveTmp = [],\n        user = {},\n        emailReq = {},\n        tmp = {},\n        userFirstName = '',\n        agentName = '',\n        address = '',\n        subject = '',\n        globalConfig = Collections.Config.findOne();\n\n    for (i = 0; i < list.length; i++) {\n      req = list[i];\n      listOfReqsToArchiveTmp = [];\n\n      try {\n        if (!req.auction || !req.agent) {\n          //Auction not found. \n          console.log('Auction or Agent not found for propId: ' + req.property._id);\n          listOfInvalidReqsToArchive.push(req._id);\n          continue;\n        }\n\n        console.log('Auction found for propId: ' + req.property._id);\n\n        if (listOfReqsToArchive.indexOf(req._id) != -1) {\n          // already processed\n          //duplicate request ; this user already has a fully composed object in emailReqList;\n          continue;\n        } //Now compose a new object that has a list of all emailRequests by this user for all properties\n\n\n        emailReq.userEmail = req.userEmail;\n        emailReq.fullname = req.fullname;\n        emailReq.property = req.property;\n        emailReq.auction = req.auction;\n        emailReq.agent = req.agent; ///////Easiest way - but too many DB queries\n        // emailReq.emailRequests = Collections.EmailRequests.find({isArchived:false, status:\"new\",requestType: \"emailEnquiryReceived\", userEmail: req.userEmail},{sort:{createdAt:-1}}).fetch();\n        ///////Efficient way \n\n        emailReq.emailRequests = [];\n        emailReq.landlordNames = [];\n        emailReq.propertyKeys = [];\n        k = 0; //This represents the number of sub child props per email.\n\n        for (j = 0; j < list.length; j++) {\n          tmp = list[j];\n          if (k >= maxPropertiesPerEmail) break;\n\n          if (tmp.userEmail == emailReq.userEmail) {\n            //of same user, so add it to the list\n            if (k == 0) {\n              tmp.isFirstProperty = true;\n            } else tmp.isFirstProperty = false;\n\n            emailReq.emailRequests.push(tmp);\n            k++; // increment this only of child is added via - emailReq.emailRequests.push\n\n            listOfReqsToArchiveTmp.push(tmp._id);\n            emailReq.landlordNames.push(tmp.agent.profile.name);\n            emailReq.propertyKeys.push(tmp.auction.lettingAuctionCode);\n          } else {\n            continue;\n          }\n        } // emailReqList.push(emailReq);\n        /// END OF loop; now emailReqList is a processed version of \"list\" ; it has a list of users and sub list of all their emailRequests of type emailEnquiryReceived\n\n\n        if (!emailReq.emailRequests.length) {\n          // it should be at least 1\n          console.log('No sub requests found. completely ignore this user request'); //Code should never come here, its only kept as precaution\n\n          continue;\n        } ///////////////////////////MAIL CODE - \n\n\n        address = titleCase(emailReq.property.address.address);\n        if (emailReq.property.address.area) address += ', ' + titleCase(emailReq.property.address.area);\n        if (emailReq.property.address.county) address += ', ' + titleCase(emailReq.property.address.county);\n        subject = 'Your enquiry for ' + address;\n        a = emailReq.landlordNames;\n        a = a.filter(onlyUnique); //Only unique\n\n        agentNames = [a.slice(0, -1).join(', '), a.slice(-1)[0]].join(a.length < 2 ? '' : ' and ');\n        userFirstName = emailReq.fullname;\n\n        if (userFirstName) {\n          userFirstName = titleCase(userFirstName.split(' ')[0]);\n        }\n\n        user = {\n          \"profile\": {\n            name: emailReq.fullname,\n            email: emailReq.userEmail,\n            userFirstName: userFirstName\n          }\n        };\n        var mailData = {\n          template: 'emailEnquiryReceived',\n          subject: subject,\n          mailTo: emailReq.userEmail,\n          replyTo: emailReq.agent.profile.email,\n          //He just placed the application, don't reveal the email yet, agent needs to start the communication first.\n          //mailTo: 'srikanth681@gmail.com',\n          homepage: Meteor.absoluteUrl(),\n          firstProperty: emailReq.property,\n          firstAuction: emailReq.auction,\n          emailEnquiries: emailReq.emailRequests,\n          enquiryCount: emailReq.emailRequests.length,\n          isSingleEnquiry: emailReq.emailRequests.length > 1 ? false : true,\n          propertyKeys: emailReq.propertyKeys.join('-'),\n          // propertyUrl:FlowRouter.url('rent', { slug: emailReq.property.slug, key: emailReq.auction.lettingAuctionCode }),\n          user: user,\n          //Email requests only exists for users who doesn't exist in SMC. if the user exists, then a bid is placed.\n          agentNames: agentNames\n        };\n        Meteor.call('sendNotificationEmail', mailData, true);\n        listOfReqsToArchive = listOfReqsToArchive.concat(listOfReqsToArchiveTmp); //At the end because everything should be successful, i.e without going into cache block for it to be archived.\n      } catch (e) {\n        console.log('In catch of emailEnquiryReceived email processor');\n        console.log(e);\n      }\n    }\n\n    if (listOfReqsToArchive.length) {\n      Collections.EmailRequests.update({\n        _id: {\n          $in: listOfReqsToArchive\n        }\n      }, {\n        $set: {\n          isArchived: true,\n          status: \"completed\"\n        }\n      }, {\n        multi: true\n      });\n    }\n\n    console.log('total requests completed: ' + listOfReqsToArchive.length);\n\n    if (listOfInvalidReqsToArchive.length) {\n      Collections.EmailRequests.update({\n        _id: {\n          $in: listOfInvalidReqsToArchive\n        }\n      }, {\n        $set: {\n          isArchived: true,\n          status: \"invalid\"\n        }\n      }, {\n        multi: true\n      });\n      console.log('total invalid requests archived: ' + listOfInvalidReqsToArchive.length);\n    }\n  },\n  dailyPropAlerts: function () {\n    /*\n    Assumptions and requirements\n    - There should be only one email send for 1 user - by this method - with a max cut of of 20 props per email\n    - One email can contain props belonging to multiple agents - there is no agent specific grouping - to reduce the number of testing scenarios and the logic simple.\n    - There is County wise grouping to make it simple to navigate and scroll\n    */\n    let maxPropertiesPerEmail = 20,\n        today = new Date(),\n        yesterday = new Date();\n    today.setHours(11, 59, 59, 999);\n    yesterday.setDate(today.getDate() - 1);\n    yesterday.setHours(12, 0, 0, 0); // , \"createdAt\": { $lte: today, $gte: yesterday }\n\n    let list = Collections.Auctions.find({\n      isArchived: false\n    }, {\n      transform: function (data) {\n        data.property = Collections.Properties.findOne({\n          _id: data.propertyId\n        });\n        data.property.address.address = cleanText(data.property.address.address);\n        data.property.address.area = cleanText(data.property.address.area);\n        data.property.address.county = cleanText(data.property.address.county);\n        data.property.bedsCount = data.property.bedrooms.length;\n        data.rentFormated = numDifferentiation(data.property.rentMonthly); // data.user = Meteor.users.findOne({_id:data.userId});//this userId is same as the createdByAgent\n\n        if (data.property) data.agent = Meteor.users.findOne({\n          _id: data.property.createdByAgent\n        });else console.log('no property found for: ' + data.propertyId);\n        return data;\n      },\n      sort: {\n        createdAt: -1\n      },\n      limit: maxPropertiesPerEmail\n    }).fetch();\n    console.log('total requests found: ' + list.length); // if(!list.length) return true;\n\n    let i = 0,\n        j,\n        k,\n        req = {},\n        uniqueCounties = [],\n        tmp = {},\n        tmp2 = [],\n        propertyData = [],\n        propTitle,\n        propBedNBath; //, tmpPropData = {}\n    // {\n    //   userFirstName:\"Adam\",\n    //   counties : [\n    //             {\n    //               countyName: 'Dublin',\n    //               propLines: [\n    //                 {\n    //                   props : [\n    //                     {propTitle : \"\",propType:\"House\",propBedNBath:\"3 Beds, 2 Baths\",propRent:\"1,750\" },\n    //                     {propAddress},\n    //                     {propAddress},\n    //                   ]\n    //                 }\n    //               ]\n    //             }\n    //           ]\n    // }\n    // propertyData.userFirstName = '';\n    // propertyData.numOfProps=list.length;\n    // propertyData.counties = [];\n    /// Create a list of all unique counties\n\n    for (j = 0; j < list.length; j++) {\n      tmp = list[j].property.address.county;\n      if (uniqueCounties.indexOf(tmp) == -1) uniqueCounties.push(tmp); //push if its not already found.\n    } // propertyData.countiesList = uniqueCounties;\n    /// Create a list of all props group by county\n\n\n    tmp = '';\n\n    for (k = 0; k < uniqueCounties.length; k++) {\n      tmp = uniqueCounties[k];\n      tmp2 = [];\n\n      for (j = 0; j < list.length; j++) {\n        propTitle = '', bedsCount = 0;\n        if (list[j].property.address.county != tmp) continue;\n        propTitle = titleCase(list[j].property.address.address);\n        if (list[j].property.address.area) propTitle += ', ' + titleCase(list[j].property.address.area);\n        if (list[j].property.address.county) propTitle += ', ' + titleCase(list[j].property.address.county);\n        console.log(propTitle);\n        console.log(list[j].property.address.address);\n        console.log(list[j].property.address);\n        propBedNBath = [];\n        if (bedsCount) propBedNBath.push(bedsCount + ' Beds');\n        if (list[j].property.baths) propBedNBath.push(list[j].property.baths + ' Baths');\n        propBedNBath = propBedNBath.join(', ');\n        tmp2.push({\n          propTitle: propTitle,\n          propType: titleCase(list[j].property.type),\n          propBedNBath: propBedNBath,\n          propRent: list[j].rentFormated,\n          propLink: FlowRouter.url('rent', {\n            slug: list[j].property.slug,\n            key: list[j].lettingAuctionCode\n          })\n        });\n      }\n\n      propertyData.push({\n        countyName: tmp,\n        propLinesDesktop: chunkifyObj(tmp2, 3, true),\n        propLinesMobile: chunkifyObj(tmp2, 2, true)\n      }); // break;//Temporary measure\n    }\n\n    console.log('Showing final array');\n    console.log(propertyData); // return;\n    // END\n    /// Get list of all users who needs email and send them those\n    // TODO: \n    // remove the additional anchor tag on the template for propTitle \n    // Add campaign information to all links\n    // Use MailGun template instead of PropertyAlerts.html\n    // let user = {name: }\n    // userFirstName = user.name;\n    // if(userFirstName){\n    //   userFirstName = titleCase(userFirstName.split(' ')[0]);\n    // }\n\n    let countyGroupInfo = ''; // They are grouped into Dublin, Galway, Limrick, Cork and Others.\n\n    if (uniqueCounties.length > 4) countyGroupInfo = uniqueCounties.slice(0, 3).join(', ') + ' and others';\n    if (uniqueCounties.length >= 2 && uniqueCounties.length <= 4) countyGroupInfo = uniqueCounties.slice(0, -1).join(', ') + ' and ' + uniqueCounties.slice(-1); // No need for a logic if there is only 1 \n\n    countyGroupInfo = 'They are grouped into ' + countyGroupInfo + '.';\n    if (uniqueCounties.length <= 1) countyGroupInfo = '';\n    console.log(uniqueCounties);\n    console.log('They are grouped into ' + countyGroupInfo + '.');\n    var mailData = {\n      template: 'propertyalerts',\n      subject: 'Daily Property Alerts',\n      mailTo: 'srikanth681@gmail.com',\n      data: {\n        countyGroupInfo: countyGroupInfo,\n        propertyData: propertyData\n      },\n      \"X-Mailgun-Variables\": {}\n    };\n    console.log(\"Final maildata\");\n    console.log(mailData); // return;\n\n    Meteor.call('sendNotificationEmailWithTemplate', mailData); // console.log('total requests completed: '+listOfReqsToArchive.length)\n  },\n  reminderUploadReferences: function () {\n    /*\n    Assumptions and requirements\n    - There can be only emailRequest / user / property\n    - There can be multiple emailRequests / user but diff properties\n    - There should be only one email send for 1 user - by this method - with a max cut of of 4 props per email\n    - One email can contain props belonging to multiple agents - there is no agent specific grouping - to reduce the number of testing scenarios and the logic simple.\n    */\n    let today = new Date();\n    today.setHours(0, 0, 0, 0);\n    let list = Collections.EmailRequests.find({\n      isArchived: false,\n      requestType: \"reminderUploadReferences\",\n      \"createdAt\": {\n        $lte: today\n      }\n    }, {\n      transform: function (data) {\n        data.property = Collections.Properties.findOne({\n          _id: data.propertyId\n        });\n        data.property.address.address = cleanText(data.property.address.address);\n        data.property.address.area = cleanText(data.property.address.area);\n        data.property.address.county = cleanText(data.property.address.county);\n        data.auction = Collections.Auctions.findOne({\n          _id: data.property.auctionId\n        }); // data.auction.rentFormated = numDifferentiation(data.auction.price);\n\n        data.user = Meteor.users.findOne({\n          _id: data.userId\n        });\n        if (data.property) data.agent = Meteor.users.findOne({\n          _id: data.property.createdByAgent\n        });else console.log('no property found for: ' + data.propertyId);\n        return data;\n      },\n      sort: {\n        createdAt: -1\n      }\n    }).fetch();\n    if (list.length == 0) return;\n    console.log('total requests found: ' + list.length);\n    if (!list.length) return true;\n    let userEmailList = [],\n        maxPropertiesPerEmail = 50,\n        i,\n        j,\n        k,\n        a,\n        req = {},\n        listOfReqsToArchive = [],\n        listOfReqsToArchiveTmp = [],\n        user = {},\n        emailReq = {},\n        tmp = {},\n        userFirstName = '',\n        agentName = '',\n        address = '',\n        subject = '',\n        missingReferences = [],\n        globalConfig = Collections.Config.findOne();\n\n    for (i = 0; i < list.length; i++) {\n      req = list[i];\n      listOfReqsToArchiveTmp = [];\n\n      try {\n        if (listOfReqsToArchive.indexOf(req._id) != -1) {\n          // already processed\n          //duplicate request ; this user already has a fully composed object in emailReqList;\n          continue;\n        } //Now compose a new object that has a list of all emailRequests by this user for all properties\n\n\n        emailReq.user = req.user;\n        emailReq.property = req.property; // emailReq.auction = req.auction;\n\n        emailReq.agent = req.agent; ///////Easiest way - but too many DB queries\n        // emailReq.emailRequests = Collections.EmailRequests.find({isArchived:false, status:\"new\",requestType: \"reminderUploadReferences\", userEmail: req.userEmail},{sort:{createdAt:-1}}).fetch();\n        ///////Efficient way\n\n        emailReq.emailRequests = [];\n        k = 0; //This represents the number of sub child props per email.\n\n        for (j = 0; j < list.length; j++) {\n          tmp = list[j];\n          if (k >= maxPropertiesPerEmail) break;\n\n          if (tmp.user.email == emailReq.user.email) {\n            //of same user, so add it to the list\n            emailReq.emailRequests.push(tmp);\n            k++; // increment this only of child is added via - emailReq.emailRequests.push\n\n            listOfReqsToArchiveTmp.push(tmp._id);\n          } else {\n            continue;\n          }\n        } // emailReqList.push(emailReq);\n        /// END OF loop; now emailReqList is a processed version of \"list\" ; it has a list of users and sub list of all their emailRequests of type reminderUploadReferences\n\n\n        if (!emailReq.emailRequests.length) {\n          // it should be at least 1\n          console.log('No sub requests found. completely ignore this user request'); //Code should never come here, its only kept as precaution\n\n          continue;\n        } ///////////////////////////MAIL CODE -\n\n\n        address = titleCase(emailReq.property.address.address);\n        if (emailReq.property.address.area) address += ', ' + titleCase(emailReq.property.address.area);\n        if (emailReq.property.address.county) address += ', ' + titleCase(emailReq.property.address.county);\n        subject = 'Your enquiry for ' + address;\n        userFirstName = emailReq.user.name;\n\n        if (userFirstName) {\n          userFirstName = titleCase(userFirstName.split(' ')[0]);\n        }\n\n        missingReferences = [];\n        if (emailReq.user) if (emailReq.user.profile) if (emailReq.user.profile.references) {\n          // if (!user.profile.references.hasResume) refListArr.push(\"Resume\");//Why do you need it?\n          if (!emailReq.user.profile.references.hasLandlordRef) missingReferences.push(\"Landlord reference\");\n          if (!emailReq.user.profile.references.employerName) missingReferences.push(\"Employer name\");\n          if (!emailReq.user.profile.references.hasWorkRef) missingReferences.push(\"Work reference\");\n          if (!emailReq.user.profile.references.hasFinancialRef) missingReferences.push(\"Financial reference\");\n          if (!emailReq.user.profile.references.hasGovtID) missingReferences.push(\"Government ID\");\n          if (!emailReq.user.profile.references.hasPassport) missingReferences.push(\"Passport\");\n          if (!emailReq.user.profile.references.hasPPS) missingReferences.push(\"PPS\");\n\n          try {\n            if (emailReq.user.profile.references.hasResume && emailReq.user.profile.references.hasLandlordRef && emailReq.user.profile.references.hasGovtID && emailReq.user.profile.references.hasWorkRef) hasAllReqReferences = true;\n          } catch (e) {\n            console.log(e);\n          }\n        }\n        var mailData = {\n          template: 'reminderUploadReferences',\n          subject: subject,\n          mailTo: emailReq.user.email,\n          replyTo: emailReq.agent.profile.email,\n          //He just placed the application, don't reveal the email yet, agent needs to start the communication first.\n          //mailTo: 'srikanth681@gmail.com',\n          homepage: Meteor.absoluteUrl(),\n          firstPropAddress: address,\n          missingReferences: missingReferences,\n          bidCount: emailReq.emailRequests.length,\n          isSingleEnquiry: emailReq.emailRequests.length > 1 ? false : true,\n          propertyUrl: FlowRouter.url('rent', {\n            slug: emailReq.property.slug,\n            key: emailReq.auction.lettingAuctionCode\n          }),\n          user: emailReq.user //Email requests only exists for users who doesn't exist in SMC. if the user exists, then a bid is placed.\n\n        };\n        Meteor.call('sendNotificationEmail', mailData, true);\n        listOfReqsToArchive = listOfReqsToArchive.concat(listOfReqsToArchiveTmp); //At the end because everything should be successful, i.e without going into cache block for it to be archived.\n      } catch (e) {\n        console.log('In catch of reminderUploadReferences email processor');\n        console.log(e);\n      }\n    }\n\n    Collections.EmailRequests.update({\n      _id: {\n        $in: listOfReqsToArchive\n      }\n    }, {\n      $set: {\n        isArchived: true,\n        status: \"completed\"\n      }\n    }, {\n      multi: true\n    });\n    console.log('total requests completed: ' + listOfReqsToArchive.length);\n  }\n};\nmodule.exportDefault(emailProcessors);\n\nimportBlogs = function () {\n  let url = 'http://blog.spotmycrib.com/wp-json/wp/v2/posts?status=publish&orderby=modified&per_page=10'; // let url = 'https://public-api.wordpress.com/rest/v1.1/sites/spotmycribblog.wordpress.com/posts/?status=publish&orderby=modified&per_page=10';\n  // https://developer.wordpress.com/docs/api/1.1/get/sites/%24site/posts/\n\n  try {\n    result = Meteor.http.get(url);\n  } catch (c) {\n    console.log('Failed to fetch blogs. In cache.');\n    return;\n  }\n\n  let blog = {},\n      isUpdating = false,\n      insertedListLinks = [],\n      updatedListLink = [];\n  let newBlog = {},\n      newBlogRelated = {};\n  let fromDB = {},\n      date1 = 0,\n      date2 = 0,\n      insertNewCount = 0,\n      updateCount = 0,\n      tmp = '';\n\n  if (result.statusCode != 200) {\n    console.log('Failed to fetch blogs. Status code: ' + result.statusCode);\n    return;\n  }\n\n  result = JSON.parse(result.content);\n\n  for (let i = 0; i < result.length; i++) {\n    blog = result[i];\n    fromDB = {};\n    fromDB = Collections.Blogs.findOne({\n      wpId: blog.id\n    });\n\n    if (fromDB) {\n      //Blog exists in DB.\n      if (fromDB.isArchived) continue; //Skip this blog.\n\n      if (fromDB.modified == blog.modified) continue; //Skip this blog.\n      // else there is a mismatch ; overwrite the DB with imported blog.\n\n      updateCount++;\n      console.log('Updating blog: ' + blog.title.rendered);\n      isUpdating = true;\n    } else {\n      //Blog doesn'' exist ; insert new\n      insertNewCount++;\n      console.log('Inserting blog: ' + blog.title.rendered);\n    } //////////// LOGIC TO GATHER REQUIRED FIELDS START\n\n\n    let imgHTML = '',\n        srcImg = '',\n        content = cleanText(blog.content.rendered);\n\n    try {\n      tmp = content.split('src=\"');\n\n      if (tmp.length > 1) {\n        console.log('Image found');\n        srcImage = tmp[1].split('?resize=')[0];\n        imgHTML = '<img class=\"img-responsive\" src=\"' + srcImage + '\"/><p>';\n        tmp = content.split('/>')[1];\n        if (tmp) content = imgHTML + tmp;\n      }\n    } catch (e) {\n      console.log('Failed to extract image');\n      content = cleanText(blog.content.rendered); //Reset\n    }\n\n    newBlog['wpId'] = blog.id;\n    newBlog['created'] = blog.date;\n    newBlog['modified'] = blog.modified;\n    newBlog['slug'] = blog.slug;\n    newBlog['link'] = blog.link;\n    newBlog['title'] = cleanText(blog.title.rendered);\n    newBlog['metaTitle'] = stripHTML(decodeHTMLEntities(newBlog['title']));\n    newBlog['content'] = content;\n    newBlog['excerpt'] = cleanText(blog.excerpt.rendered);\n    let metaDesc = decodeHTMLEntities(newBlog['excerpt']);\n    metaDesc = stripHTML(metaDesc);\n    metaDesc = metaDesc.replace('Read More', '');\n    newBlog['metaDesc'] = metaDesc;\n    newBlog['sticky'] = blog.sticky;\n    newBlog['categories'] = blog.categories;\n    newBlog['image'] = blog.jetpack_featured_media_url;\n    newBlog['related'] = [];\n    newBlog['isArchived'] = false;\n\n    for (let j = 0; j < blog['jetpack-related-posts'].length; j++) {\n      newBlogRelated = {};\n      newBlogRelated['wpId'] = blog['jetpack-related-posts'][j].id;\n      newBlogRelated['link'] = blog['jetpack-related-posts'][j].url; // tmp = blog['jetpack-related-posts'][j].url.split('/');\n\n      newBlogRelated['slug'] = blog['jetpack-related-posts'][j].url.split('/')[3];\n      newBlogRelated['title'] = blog['jetpack-related-posts'][j].title;\n      newBlogRelated['date'] = blog['jetpack-related-posts'][j].date;\n      newBlogRelated['excerpt'] = cleanText(blog['jetpack-related-posts'][j].excerpt);\n      newBlogRelated['context'] = blog['jetpack-related-posts'][j].context;\n      newBlogRelated['image'] = blog['jetpack-related-posts'][j].img;\n      newBlog.related.push(newBlogRelated);\n    } //////////// LOGIC TO GATHER REQUIRED FIELDS END\n\n\n    if (isUpdating) {\n      Collections.Blogs.update({\n        _id: fromDB._id\n      }, newBlog);\n      updatedListLink.push('<a href=\"http://spotmycrib.ie/blog/' + newBlog.slug + '/\" >' + newBlog.title + '</a>');\n    } else {\n      Collections.Blogs.insert(newBlog);\n      insertedListLinks.push('<a href=\"http://spotmycrib.ie/blog/' + newBlog.slug + '/\" >' + newBlog.title + '</a>');\n    }\n  }\n\n  if (updateCount > 0 || insertNewCount > 0) {\n    var sub = 'Blogs Imported';\n    var desc = \"\\nInserted Count: \" + insertNewCount + \"<br/>\\nUpdated Count: \" + updateCount + \"<br/>\\nInserted List: \" + insertedListLinks.join('<br/>') + \"<br/>\\nUpdated List: \" + updatedListLink.join('<br/>') + \"<br/>\\n\";\n    Meteor.call('notifyAdmin', sub, desc);\n  } else {\n    console.log('No blogs inserted or updated. ');\n  }\n};\n\ndeactivateProps = function () {\n  let date2daysbefore = new Date(new Date().setDate(new Date().getDate() - 2));\n  let props = Collections.Properties.find({\n    'importData.url': {\n      $gt: ''\n    },\n    'auctionId': {\n      $gt: ''\n    },\n    //Only get props that have an active auction. \n    'importData.lastCheckedDate': {\n      $lt: date2daysbefore\n    }\n  }, // Query for Studio 3T { 'importData.lastCheckedDate':{$lt: ISODate(\"2019-04-07T11:49:11.546+0000\") }, 'importData.url':{$gt:''}, 'auctionId':{$gt:''} }\n  {\n    fields: {\n      importData: 1,\n      auctionId: 1\n    }\n  }).fetch();\n  let url = '',\n      updateCount = 0,\n      propsToDeactivate = [],\n      propsCheckedIds = [];\n  console.log('deactivateProps len: ' + props.length); // console.log(props.length);\n\n  for (let i = 0; i < props.length; i++) {\n    url = props[i].importData.url; // url = 'https://www.spotmycrib.com/';\n    //console.log('Working on: '+url)\n    // Meteor.http.FollowRedirects = false; // useless as its not working\n    // Meteor.http.followAllRedirects = false; // useless as its not working\n\n    const request = require('request');\n\n    try {\n      result = Meteor.http.get(url);\n    } catch (c) {\n      console.log('Failed to get prop url: ');\n      continue;\n    }\n\n    propsCheckedIds.push(props[i]._id); //if the url check on the above line worked then do this\n    //if(result.statusCode !=200 ){\n\n    if (result.content.indexOf('- Daft.ie</title>') != -1) {\n      //Only search page has a title ending with \"- Daft.ie</title>\"\n      console.log('prop to deactivate: ' + url);\n      propsToDeactivate.push(props[i]._id); //Meteor.call('deactivateAuction',props[i].auctionId)\n\n      updateCount++;\n    }\n  }\n\n  if (propsToDeactivate.length) Meteor.call('deactivateAuctionMulti', propsToDeactivate);\n  if (propsCheckedIds.length) Collections.Properties.update({\n    _id: {\n      $in: propsCheckedIds\n    }\n  }, {\n    $set: {\n      'importData.lastCheckedDate': new Date()\n    }\n  }, {\n    multi: true\n  });\n\n  if (updateCount == 0) {\n    console.log('No props deactivated. ');\n  }\n};\n/*\n// date1 = New Date(fromDB.modified)\n            // date2 = New Date(blog.modified)\n            // if(date1 > date2){\n            //     blog is updated\n            // }else\n{\n    \"id\": 275,\n    \"date\": \"2018-02-06T02:25:37\",\n    \"date_gmt\": \"2018-02-06T02:25:37\",\n    \"guid\": {\n      \"rendered\": \"http://blog.spotmycrib.com/?p=275\"\n    },\n    \"modified\": \"2018-11-24T13:16:30\",\n    \"modified_gmt\": \"2018-11-24T13:16:30\",\n    \"slug\": \"irish-renting-will-higher-result-tech-establishments-docklands\",\n    \"status\": \"publish\",\n    \"type\": \"post\",\n    \"link\": \"http://blog.spotmycrib.com/irish-renting-will-higher-result-tech-establishments-docklands/\",\n    \"title\": {\n      \"rendered\": \"Irish renting will be higher as a result of tech establishments in Docklands\"\n    },\n    \"content\": {\n      \"rendered\": \"<p><img data-attachment-id=\\\"276\\\" data-permalink=\\\"http://blog.spotmycrib.com/irish-renting-will-higher-result-tech-establishments-docklands/irish-renting/\\\" data-orig-file=\\\"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?fit=622%2C350\\\" data-orig-size=\\\"622,350\\\" data-comments-opened=\\\"1\\\" data-image-meta=\\\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\\\" data-image-title=\\\"irish renting\\\" data-image-description=\\\"&lt;p&gt;irish renting&lt;/p&gt;\\n\\\" data-medium-file=\\\"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?fit=300%2C169\\\" data-large-file=\\\"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?fit=622%2C350\\\" class=\\\"aligncenter size-full wp-image-276\\\" src=\\\"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?resize=622%2C350\\\" alt=\\\"irish renting\\\" width=\\\"622\\\" height=\\\"350\\\" srcset=\\\"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?w=622 622w, https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?resize=300%2C169 300w\\\" sizes=\\\"(max-width: 622px) 100vw, 622px\\\" data-recalc-dims=\\\"1\\\" /></p>\\n<p>Dockland is one of the vibrant places for enterprises in the city of Dublin. The place is known to be the home to most of tech workers who pay around €2,226 per month for a two bed room property. As compared to Irish renting, the rent in Silicon Docks is higher for its establishments. Where the average rent is €1,473 in Dublin, the average capped rent in this place is €1,988. Basically tech workers buy <a href=\\\"http://www.spotmycrib.com\\\">properties</a> in this place and the landlords are Irish. They prefer to buy two bed room apartments and for rent tech workers prefer to share this two bedroom property. Due to rising demand for the rental property, rent increased by 10.8 per cent in 2017. The dwellers in the Dock area are mostly Europeans. Where around 63 per cent are Europeans, 22 per cent are non-Europeans.</p>\\n<p>The rental sector and buying of houses in this area are mostly acquired by European and British nationals working with a number of international companies engaged in technical sector.  The estate agents report that 92 per cent of tenants are non- Irish tech workers. The Irish renting witnesses an increase due to the dwelling of non-Irish tech population. The engagement of tech professionals in <a href=\\\"http://www.spotmycrib.com\\\">large companies</a> such as Google, facebook, LinkedIn and Twitter is one of the reasons for rising the Irish renting. The tech professionals prefer living nearer to their office and they offer higher price for eliminating traveling.</p>\\n<p>The data from the Docklands Residential Report for the year 2018 says that the Irish renting has been decreasing and non-Irish tenants are increasing. Within three years, the population of Irish tenants has been diminished from 35 per cent to 15 per cent. This is another reason why the Irish renting is soaring in this area. Most of the tech workers are German, French, Spanish and Scandinavians. These people who have been working in the tech companies for more than five years have bought houses in this area. They prefer to buy two bed room houses in this area. So, the price of the two bed apartments has also increased from €355,000 to €400,000 in a year.</p>\\n<p>In Dublin 2, the price has increased by 12 per cent in 2017 where in Dublin 4, the price of properties has increased by 7 per cent. Dublin 4 is also mostly referred by the tech workers. More price hike is expected towards the end of 2018 due to the buying of houses in these areas. Again, Irish landlords are getting more interested to buy property in these areas due to higher return on investment. They will be getting higher rent in Dublin 2 and Dublin 4 regions. For getting a higher Irish renting, the landlords are purchasing houses in these regions.</p>\\n<p>One of the increasing Irish renting is the establishment of enterprises and coming of large companies. One cannot avoid establishing the larger establishments so the Irish renting. As far as the tech world will be active in the docklands, the Irish renting will be higher. Visit <a href=\\\"http://www.spotmycrib.com\\\">www.spotmycrib.com</a> and know more about Irish renting.</p>\\n<p>&nbsp;</p>\\n\",\n      \"protected\": false\n    },\n    \"excerpt\": {\n      \"rendered\": \"<p>Dockland is one of the vibrant places for enterprises in the city of Dublin. The place is known to be the home to most of tech workers who pay around €2,226 per month for a two bed room property. As compared to Irish renting, the rent in Silicon Docks is higher for its establishments. Where… <span class=\\\"read-more\\\"><a href=\\\"http://blog.spotmycrib.com/irish-renting-will-higher-result-tech-establishments-docklands/\\\">Read More &raquo;</a></span></p>\\n\",\n      \"protected\": false\n    },\n    \"author\": 2,\n    \"featured_media\": 276,\n    \"comment_status\": \"open\",\n    \"ping_status\": \"open\",\n    \"sticky\": false,\n    \"template\": \"\",\n    \"format\": \"standard\",\n    \"meta\": [],\n    \"categories\": [\n      1\n    ],\n    \"tags\": [],\n    \"jetpack_featured_media_url\": \"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?fit=622%2C350\",\n    \"jetpack-related-posts\": [\n      {\n        \"id\": 243,\n        \"url\": \"http://blog.spotmycrib.com/price-property-rent-dublin-increase-25-percent-2018/\",\n        \"url_meta\": {\n          \"origin\": 275,\n          \"position\": 0\n        },\n        \"title\": \"The price of property to rent in Dublin is going to increase by 25 percent by the end of 2018\",\n        \"date\": \"January 26, 2018\",\n        \"format\": false,\n        \"excerpt\": \"According to The Irish Times, the rent is going to increase further in the year 2018.  While the government is planning to bring down the price of property to rent in Dublin, the assessment shows a different figure. The economic factors which are not under the control of government are…\",\n        \"rel\": \"nofollow\",\n        \"context\": \"In \\\"General\\\"\",\n        \"img\": {\n          \"src\": \"https://i2.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/01/prioperty-to-rent-in-dublin.jpeg?fit=466%2C350&resize=350%2C200\",\n          \"width\": 350,\n          \"height\": 200\n        },\n        \"classes\": []\n      },\n      {\n        \"id\": 285,\n        \"url\": \"http://blog.spotmycrib.com/rental-cap-able-control-housing-market-crisis/\",\n        \"url_meta\": {\n          \"origin\": 275,\n          \"position\": 1\n        },\n        \"title\": \"Is Rental Cap Able to Control the Housing Market Crisis?\",\n        \"date\": \"February 19, 2018\",\n        \"format\": false,\n        \"excerpt\": \"Rental cap introduced by the Irish government is becoming an issue for the rental sector. The government issued the rental cap for capturing the price hike. The increasing rent of the properties in Dublin and cork region forced the government to set rental caps. The landlords were barred from increasing…\",\n        \"rel\": \"nofollow\",\n        \"context\": \"In \\\"General\\\"\",\n        \"img\": {\n          \"src\": \"https://i2.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/rental-capp-in-rent-pressure-zone.jpeg?fit=523%2C350&resize=350%2C200\",\n          \"width\": 350,\n          \"height\": 200\n        },\n        \"classes\": []\n      },\n      {\n        \"id\": 174,\n        \"url\": \"http://blog.spotmycrib.com/building-more-houses-rent-dublin-affecting-rent/\",\n        \"url_meta\": {\n          \"origin\": 275,\n          \"position\": 2\n        },\n        \"title\": \"Is Building More Houses for rent in Dublin is affecting rent?\",\n        \"date\": \"January 2, 2018\",\n        \"format\": false,\n        \"excerpt\": \"Most of us may think that building more houses for rent in Dublin and nearby areas can mitigate the issues related to the housing crisis. It is impossible to predict that to what extent it can reduce the rental crisis. There has been a lot of discussion on this issue…\",\n        \"rel\": \"nofollow\",\n        \"context\": \"In \\\"General\\\"\",\n        \"img\": {\n          \"src\": \"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/01/rent-in-Dublin.jpeg?fit=525%2C350&resize=350%2C200\",\n          \"width\": 350,\n          \"height\": 200\n        },\n        \"classes\": []\n      }\n    ],\n    \"_links\": {\n      \"self\": [\n        {\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/posts/275\"\n        }\n      ],\n      \"collection\": [\n        {\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/posts\"\n        }\n      ],\n      \"about\": [\n        {\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/types/post\"\n        }\n      ],\n      \"author\": [\n        {\n          \"embeddable\": true,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/users/2\"\n        }\n      ],\n      \"replies\": [\n        {\n          \"embeddable\": true,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/comments?post=275\"\n        }\n      ],\n      \"version-history\": [\n        {\n          \"count\": 2,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/posts/275/revisions\"\n        }\n      ],\n      \"predecessor-version\": [\n        {\n          \"id\": 308,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/posts/275/revisions/308\"\n        }\n      ],\n      \"wp:featuredmedia\": [\n        {\n          \"embeddable\": true,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/media/276\"\n        }\n      ],\n      \"wp:attachment\": [\n        {\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/media?parent=275\"\n        }\n      ],\n      \"wp:term\": [\n        {\n          \"taxonomy\": \"category\",\n          \"embeddable\": true,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/categories?post=275\"\n        },\n        {\n          \"taxonomy\": \"post_tag\",\n          \"embeddable\": true,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/tags?post=275\"\n        }\n      ],\n      \"curies\": [\n        {\n          \"name\": \"wp\",\n          \"href\": \"https://api.w.org/{rel}\",\n          \"templated\": true\n        }\n      ]\n    }\n  },\n\n\n\n\n\n\nsendAuctionWonMails = function(){\n  //To be executed at 12:00 am, mid night, once the day is closed.\n\n  today = new Date();\n  yesterday = new Date(today);\n  yesterday.setDate(today.getDate() - 1);\n  var start = yesterday\n  // start.setHours(0,0,0,0);\n  start = start.setHours(0,0,0,0);\n  start = new Date(start)\n  var end = yesterday\n  end.setHours(23,59,59,999);\n\n  // debugger;\n  // var AuctionDocuments = ReactionCore.Collections.Auctions.find({endDate:{$gte: start, $lte: end}},{\n  //   transform: function(doc){\n  //     if(doc.highestBid)\n  //       doc.highestBidUser = Meteor.users.findOne({_id:doc.highestBid});\n  //     if(doc.secondHighestBidUser)\n  //       doc.secondHighestBidUser = Meteor.users.findOne({_id:doc.secondHighestBid});\n  //\n  //     return doc;\n  //   }\n  // }).fetch();\n\n  var globalConfig = ReactionCore.Collections.Config.findOne();\n\n  //fetch list to whom highest bid email is to be send\n  var AuctionDocuments = ReactionCore.Collections.Auctions.find({\n      \"endDate\": {$lte: end},\n      $or      : [\n        {\"highestBid\": {$ne: \"\"}, \"isHighestBidWonEmailSent\": false},\n        {\"secondHighestBid\": {$ne: \"\"}, \"isSecondHighestBidWonEmailSent\": false}]\n    },\n    {\n    transform: function(doc){\n      if (doc.highestBid && !doc.isHighestBidWonEmailSent)\n        doc.highestBidUser = Meteor.users.findOne({_id:doc.highestBid});\n      if (doc.secondHighestBid && !doc.isSecondHighestBidWonEmailSent)\n        doc.secondHighestBidUser = Meteor.users.findOne({_id:doc.secondHighestBid});\n\n      return doc;\n    }\n  }).fetch();\n\n  for (var i = 0; i < AuctionDocuments.length; i++) {\n    var auction                   = AuctionDocuments[i]\n    var endDate = new Date(auction.endDate);\n    var firstHigestBidderEndDate = new Date(endDate.setDate(endDate.getDate() + 2));\n    var secondHigestBidderEndDate = new Date(endDate.setDate(endDate.getDate() + 4));\n\n    if (auction.highestBidUser && !auction.isHighestBidWonEmailSent) {\n      var mailDataHighestBidUser = {\n        template: 'userWonBid',\n        subject: \"Congratulation! You have placed the winning bid.\",\n        mailTo: auction.highestBidUser.emails[0].address,\n        //mailTo: 'srikanth681@gmail.com',\n        homepage: Meteor.absoluteUrl(),\n        auction: auction,\n        user:auction.highestBidUser,\n        endDate: endDate.toDateString(),\n        firstHigestBidderEndDate: firstHigestBidderEndDate.toDateString(),\n        secondHigestBidderEndDate: secondHigestBidderEndDate.toDateString(),\n        conf: globalConfig\n      }\n      Meteor.call('sendNotificationEmail',mailDataHighestBidUser)\n      var smsText = 'Hi ' + auction.highestBidUser.profile.username + '. Congratulations! You bid is the highest. Login to ibidmyhome.com and confirm your unit!';\n      Meteor.call('sendSMS',[auction.highestBidUser.profile.mobile[0], smsText]);\n\n      //update email sent flag\n      ReactionCore.Collections.Auctions.update({_id: auction._id},\n        {$set: {isHighestBidWonEmailSent: true}});\n    }\n    if (auction.secondHighestBidUser && !auction.isSecondHighestBidWonEmailSent) {\n      var mailDataSecondHighestBidUser = {\n        template: 'userAnnouncedAsSecondHigest',\n        subject: \"Congratulations! You have placed the 2nd highest bid.\",\n        mailTo: auction.secondHighestBidUser.emails[0].address,\n        //mailTo: 'srikanth681@gmail.com',\n        homepage: Meteor.absoluteUrl(),\n        auction: auction,\n        user:auction.secondHighestBidUser,\n        endDate: endDate.toDateString(),\n        firstHigestBidderEndDate: firstHigestBidderEndDate.toDateString(),\n        secondHigestBidderEndDate: secondHigestBidderEndDate.toDateString(),\n        conf: globalConfig\n      }\n      Meteor.call('sendNotificationEmail',mailDataSecondHighestBidUser)\n      var smsText = 'Hi '+auction.secondHighestBidUser.profile.username+'. You have placed the 2nd highest bid. You have a chance to buy it. Login to follow the post-auction procedure closely.';\n      Meteor.call('sendSMS',[auction.secondHighestBidUser.profile.mobile[0], smsText]);\n\n      //update email sent flag\n      ReactionCore.Collections.Auctions.update({_id: auction._id},\n        {$set: {isSecondHighestBidWonEmailSent: true}});\n    }\n  }\n\n  return true;\n}\nnotYetARegisteredBidder = function(){\n  var today = new Date()\n  var start = new Date(today.getYear() , today.getMonth() , today.getDate() , today.getHours() , today.getMinutes(), 0, 0);\n  var end = new Date(today.getYear() , today.getMonth() , today.getDate() , today.getHours() , today.getMinutes(), 59, 999);\n\n  // var data = Meteor.users.find({\n  //   \"profile.isRegisteredBidder\":false,\n  //   createdAt:{$gte: start, $lte: end}\n  // }).fetch();\n  var data = Meteor.users.find({\n    \"profile.hasSignedUpButNotPaidRegistrationAmount\": true,\n    \"profile.isRegistrationPaymentReminderSent\"      : false\n  }).fetch();\n\n  var globalConfig = ReactionCore.Collections.Config.findOne();\n\n  for(var i=0;i<data.length;i++) {\n    var user = data[i]\n\n    var mailData = {\n      template: 'notYetARegisteredBidder',\n      subject : \"Created account but not paid Rs 499\",\n      //mailTo: 'srikanth681@gmail.com',\n      mailTo  : user.emails[0].address,\n      homepage: Meteor.absoluteUrl(),\n      user    : user,\n      conf    : globalConfig\n    }\n    Meteor.call('sendNotificationEmail', mailData)\n    ///////////////////////////MAIL CODE END  - SMS CODE START ////\n\n    var smsText = 'Hi ' + user.profile.username + '. Now that you have signed in, select an apartment and proceed to bid by paying an auction amount of Rs.499';\n    Meteor.call('sendSMS', [user.profile.mobile[0], smsText]);\n\n    ///////////////////////////SMS END  - SMS CODE START ////\n\n    //update email remidner flags\n    Meteor.users.update({\"_id\": user._id}, {\n      $set: {\n        \"profile.isRegistrationPaymentReminderSent\": true\n      }\n    });\n  }\n}\nnotYetBidOnProperty = function(){\n  // debugger;\n  var auctionDocuments = ReactionCore.Collections.Auctions.find({\n      propertyConfirmationNotificationNeededForBidders: {$exists: true, $ne: []},\n    },\n    {\n      transform: function (doc) {\n        doc.userDocuments = Meteor.users.find({\n            _id: {$in: doc.propertyConfirmationNotificationNeededForBidders}\n          }\n        ).fetch();\n\n        return doc;\n      }\n    }).fetch();\n\n  var globalConfig = ReactionCore.Collections.Config.findOne();\n\n  //loop on all auctionDocuments\n  for (var i = 0; i < auctionDocuments.length; i++) {\n    //loop on all users in auctionDocuments.userDocuments\n    for (var j = 0; j < auctionDocuments[i].userDocuments.length; j++) {\n      var user = auctionDocuments[i].userDocuments[j];\n\n      var mailData = {\n        template: 'notYetBidOnProperty',\n        subject : \"We have observed that you are yet to place the bid on ibidmyhome.com.\",\n        //mailTo: 'srikanth681@gmail.com',\n        mailTo  : user.emails[0].address,\n        homepage: Meteor.absoluteUrl(),\n        user    : user,\n        conf    : globalConfig\n      }\n      Meteor.call('sendNotificationEmail', mailData)\n      ///////////////////////////MAIL CODE END  - SMS CODE START ////\n\n      var smsText = 'Hi ' + user.profile.username + '. You are now a registered bidder, but have not placed your bid. Avail the apartment by outbidding current highest bid.';\n      Meteor.call('sendSMS', [user.profile.mobile[0], smsText]);\n\n      ///////////////////////////SMS END  - SMS CODE START ////\n\n      //update email reminder flags\n      ReactionCore.Collections.Auctions.update({_id: auctionDocuments[i]._id},\n        {\n          $pull: {\n            propertyConfirmationNotificationNeededForBidders: user._id\n          }\n        });\n    }\n  }\n\n};\nprocessRefunds = function(){\n  //To be executed at 12:00 am, mid night, once the auction winner is diclared, auction is closed 5 days ago.\n  today = new Date();\n  yesterday = new Date($today);\n  yesterday.setDate(today.getDate() - 5);\n  var start = yesterday\n  start = start.setHours(0,0,0,0);\n  start = new Date(start)\n  var end = yesterday\n  end.setHours(23,59,59,999);\n\n  //isAuctionConfirmed: true\n  var data = ReactionCore.Collections.Auctions.find({endDate:{$gte: start, $lte: end}},{}).fetch();\n\n  for(var i=0;i<data.length;i++){\n    var auction = data[i]\n    var user;\n    for (var i=0;i<auction.registeredBidders.length;i++){\n      userId = auction.registeredBidders[i]\n\n      if(auction.highestBid == userId && !auction.highestBidWithdrawed){continue;}\n      if(auction.highestBidWithdrawed && auction.secondHighestBid){continue;}\n      //if(auction.auctionConfirmedUser  == userId ){continue;}\n\n      var payment = ReactionCore.Collections.Payments.findOne({_id:userId, auctionId:auction._id });\n      Meteor.call('requestRefund',[payment._id,'Bidder registration amount refunded as unit is confirmed to another user.'])\n    }\n\n\n    //var mailDataHighestBidUser = {\n    //  template: 'userWonBid',\n    //  subject: \"Congratulation! You have placed the winning bid.\",\n    //  mailTo: auction.highestBidUser.emails[0].address,\n    //  //mailTo: 'srikanth681@gmail.com',\n    //  homepage: Meteor.absoluteUrl(),\n    //  data: auction,\n    //  conf: globalConfig\n    //}\n    //var mailDataSecondHighestBidUser = {\n    //  template: 'userAnnouncedAsSecondHigest',\n    //  subject: \"Congratulations! You have placed the 2nd highest bid.\",\n    //  mailTo: auction.highestBidUser.emails[0].address,\n    //  //mailTo: 'srikanth681@gmail.com',\n    //  homepage: Meteor.absoluteUrl(),\n    //  data: auction,\n    //  conf: globalConfig\n    //}\n    //Meteor.call('sendNotificationEmail',mailDataHighestBidUser)\n    //Meteor.call('sendNotificationEmail',mailDataSecondHighestBidUser)\n\n  }\n\n  return true;\n}\n\n transform: function(doc){\n doc.registeredBidUsers = []\n if(doc.registeredBidders){\n for (var i=0;i<doc.registeredBidders.length;i++){\n if(doc.highestBid == doc.registeredBidders[i] && !doc.highestBidWithdrawed){continue;}\n if(doc.highestBidWithdrawed && doc.secondHighestBid){continue;}\n //if(doc.auctionConfirmedUser  == doc.registeredBidders[i] ){continue;}\n var user = Meteor.users.findOne({_id:doc.registeredBidders[i] });\n doc.registeredBidUsers.push(user);\n }\n }\n return doc;\n }\n\n\n\n var user;\n for (var i=0;i<auction.registeredBidUsers.length;i++){\n user = auction.registeredBidUsers[i]\n var payment = ReactionCore.Collections.Payments.findOne({_id:user._id, auctionId:auction._id });\n Meteor.call('requestRefund',[payment._id,'Bidder registration amount refunded as unit is confirmed to another user.'])\n }\n\n */\n\n\nfunction getUserProfileScore(user) {\n  let score = 0;\n\n  if (user.profile.mobile) {\n    score += 15;\n  }\n\n  if (!user.services) user.services = {};\n\n  if (user.services.facebook) {\n    score += 15;\n  } // if(user.services.google){score += 10;}\n\n\n  if (user.services.twitter) {\n    score += 10;\n  }\n\n  if (user.services.linkedin) {\n    score += 15;\n  }\n\n  if (user.profile.references.hasPassport) {\n    score += 10;\n  }\n\n  if (user.profile.references.employerName) {\n    score += 3;\n  }\n\n  if (user.profile.references.employerTakeHome) {\n    score += 2;\n  }\n\n  if (user.profile.references.hasWorkRef) {\n    score += 10;\n  }\n\n  if (user.profile.references.hasLandlordRef) {\n    score += 10;\n  }\n\n  if (user.profile.references.hasPPS) {\n    score += 3;\n  } // if(user.profile.references.hasFinancialRef){score += 0;}\n\n\n  if (user.profile.references.hasGovtID) {\n    score += 4;\n  }\n\n  if (user.profile.references.hasResume) {\n    score += 3;\n  }\n\n  if (score > 100) score = 100;\n  return score;\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"routes\":{\"lettingEnquiry.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/routes/lettingEnquiry.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nmodule.link(\"../../imports/api/publications.js\");\nlet bodyParser;\nmodule.link(\"body-parser\", {\n  default(v) {\n    bodyParser = v;\n  }\n\n}, 1);\n\nfunction validateEmail(email) {\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nvar stripedhtml = \"%3Cdiv+dir%3D%22ltr%22%3E%3Cimg+width%3D%220%22+height%3D%220%22+class%3D%22mailtrack-img%22+alt%3D%22%22+style%3D%22display%3Aflex%22+src%3D%22https%3A%2F%2Fmailtrack.io%2Ftrace%2Fmail%2F7706d8d19240906d922f05d56f1dc1b59d192efd.png%3Fu%3D2390507%22%3E%3Cdiv%3E%3C%2Fdiv%3E%3Cdiv%3E%3C%2Fdiv%3E%3Cdiv+class%3D%22gmail_quote%22%3E%3Cbr%3E%3Cu%3E%3C%2Fu%3E+%3Cdiv%3E+%3Cdiv+style%3D%22color%3Atransparent%3Bopacity%3A0%3Bfont-size%3A0px%3Bborder%3A0%3Bmax-height%3A1px%3Bwidth%3A1px%3Bmargin%3A0px%3Bpadding%3A0px%3Bborder-width%3A0px%21important%3Bdisplay%3Anone%21important%3Bline-height%3A0px%21important%22%3E%3Cimg+border%3D%220%22+width%3D%221%22+height%3D%221%22+src%3D%22http%3A%2F%2Fpost.spmailtechnol.com%2Fq%2FTHE-IBC7KjfGMZ2g91VIzA%7E%7E%2FAAFbhgA%7E%2FRgRdkLCdPVcDc3BjQgoAAB19r1slyyCmUhVzcmlrYW50aDY4MUBnbWFpbC5jb21YBAAAAAA%7E%22%3E%3C%2Fdiv%3E+%3Ctable+style%3D%22width%3A100%25%21important%3Bbackground-color%3A%23efefef%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+align%3D%22center%22+style%3D%22font-family%3Aarial%3Bfont-size%3A12px%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd+style%3D%22width%3A2%25%22%3E%26nbsp%3B%3C%2Ftd%3E+%3Ctd+style%3D%22width%3A96%25%22%3E+%3Cdiv+style%3D%22max-width%3A800px%3Bmin-width%3A180px%22%3E+%3Ctable+id%3D%22m_-9020740417607596646background-table%22+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22margin%3A0%3Bpadding%3A0%3Bcolor%3A%23000000%3Bborder-top%3A10px+solid+%23efefef%3Bborder-bottom%3A10px+solid+%23efefef%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+align%3D%22center%22+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%21important%3Bbackground-color%3Awhite%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+align%3D%22center%22+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%21important%3Bbackground-color%3Awhite%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd+height%3D%2214%22+style%3D%22height%3A14px%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd%3E+%3Cimg+src%3D%22https%3A%2F%2Fc1.dmstatic.com%2F402%2Fi%2Femail_alerts%2Fdomain-logos%2Fdaft.png%22+border%3D%220%22+alt%3D%22+Daft.ie+%22+style%3D%22margin-left%3A20px%3Bwidth%3A119px%3Bheight%3A37px%3Bdisplay%3Ablock%22%3E+%3C%2Ftd%3E+%3Ctd+style%3D%22width%3A9px%3Bmargin%3A3px%22%3E%26nbsp%3B%3C%2Ftd%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A14px%3Bpadding-right%3A30px%3Bcolor%3A%23333%3Btext-align%3Aright%22%3E+%3Cstrong+style%3D%22color%3A%23000%22%3E+Ad+enquiry+%3C%2Fstrong%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+height%3D%2214px%22+style%3D%22height%3A14px%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3Ctable+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%3Bheight%3A10px%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd+height%3D%2210%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3Ctable+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%3Bbackground-color%3Awhite%3Bmargin-left%3Aauto%3Bmargin-right%3Aauto%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22margin-left%3A20px%3Bmargin-right%3A20px%3Bcolor%3A%23525252%3Bfont-family%3Aarial%3Bmin-width%3A120px%3Bmax-width%3A588px%3Bfont-size%3A14px%22%3E+%3Ctbody%3E%3Ctr%3E%3Ctd+height%3D%2220%22+style%3D%22height%3A20px%22%3E%3C%2Ftd%3E%3C%2Ftr%3E+%3Ctr%3E+%3Ctd%3E+%3Ctable+border%3D%220%22+cellpadding%3D%220%22+cellspacing%3D%220%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%3Bmargin-left%3Aauto%3Bmargin-right%3Aauto%3Bmin-width%3A120px%3Bmax-width%3A588px%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A16px%3Bfont-weight%3Abold%3Bcolor%3A%23000%22%3E+From%3A+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%3Bpadding-bottom%3A10px%22%3E+Anthony+Bloomer+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A16px%3Bfont-weight%3Abold%3Bcolor%3A%23000%22%3E+Email%3A+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%3Bpadding-bottom%3A10px%22%3E+%3Ca+href%3D%22mailto%3Aabloomer%40newrelic.com%22+style%3D%22color%3A%232953aa%3Btext-decoration%3Anone%22+target%3D%22_blank%22%3E+abloomer%40newrelic.com+%3C%2Fa%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A16px%3Bfont-weight%3Abold%3Bcolor%3A%23000%22%3E+Phone+number%3A+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%3Bpadding-bottom%3A10px%22%3E+%3Ca+style%3D%22color%3A%23333%3Btext-decoration%3Anone%22+href%3D%22tel%3A0858278968%22+target%3D%22_blank%22%3E+0858278968+%3C%2Fa%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A16px%3Bfont-weight%3Abold%3Bcolor%3A%23000%22%3E+Property%3A+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%3Bpadding-bottom%3A10px%22%3E+%3Ca+style%3D%22text-decoration%3Anone%3Bcolor%3A%232953aa%22+href%3D%22https%3A%2F%2Fwww.daft.ie%2F31041941%22+target%3D%22_blank%22%3E+Rockfield%2C+Dundrum%2C+Dublin+14+%3C%2Fa%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A16px%3Bfont-weight%3Abold%3Bcolor%3A%23000%22%3E+Message%3A+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%22%3E+Hi%2C%3Cbr%3E+%3Cbr%3E+My+name+is+Anthony+Bloomer%2C+an+Engineering+professional+in+the+IT+industry.%3Cbr%3E+%3Cbr%3E+Currently%2C+I+am+working+for+a+large+multinational+company+called+New+Relic+as+a+Technical+Support+Engineer.%3Cbr%3E+%3Cbr%3E+This+property+you+are+advertising+is+ideal+since+it+is+very+close+to+my+workplace+in+Dublin+City+Centre.%3Cbr%3E+%3Cbr%3E+I+would+be+very+grateful+for+an+opportunity+to+view+the+room+in+person+and+chat+with+you+about+it.%3Cbr%3E+%3Cbr%3E+I+can+provide+references+and+letter+of+employment+on+request.%3Cbr%3E+%3Cbr%3E+I+do+look+forward+to+hearing+back+from+you.%3Cbr%3E+%3Cbr%3E+All+the+best%2C%3Cbr%3E+Anthony+Bloomer+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3Cbr%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+height%3D%2215%22+style%3D%22height%3A15px%3Bborder-bottom%3A2px+solid+%23efefef%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E%3Ctd+height%3D%2215%22+style%3D%22height%3A15px%22%3E%3C%2Ftd%3E%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%22%3E+Please+be+aware+of+suspicious+behaviour.+Never+wire+funds+through+a+third+party+money+transfer+service.+For+more+advice+please+see+%3Ca+style%3D%22text-decoration%3Anone%3Bcolor%3A%232953aa%22+href%3D%22https%3A%2F%2Fwww.daft.ie%2Fsafety-online%22+target%3D%22_blank%22%3E+Daft%26%2339%3Bs+Safety+Online+Guide+%3C%2Fa%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+height%3D%2215%22+style%3D%22height%3A15px%3Bborder-bottom%3A2px+solid+%23efefef%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E%3Ctd+height%3D%2215%22+style%3D%22height%3A15px%22%3E%3C%2Ftd%3E%3C%2Ftr%3E+%3Ctr%3E%3Ctd+height%3D%2210%22+style%3D%22height%3A10px%22%3E%3C%2Ftd%3E%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bmargin%3A0px%3Bfont-size%3A16px%22%3E+Kind+Regards%2C+%3C%2Ftd%3E+%3C%2Ftr%3E%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%22%3E+The+Daft.ie+Team+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+height%3D%2220%22+style%3D%22height%3A20px%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22color%3A%23777%3Bmargin%3A0px%3Bfont-family%3Aarial%3Bfont-size%3A11px%22%3E+Email%3A+%3Ca+href%3D%22mailto%3Asupportdesk%40daft.ie%22+style%3D%22font-weight%3Abold%3Btext-decoration%3Anone%3Bcolor%3A%232953aa%22+target%3D%22_blank%22%3E+supportdesk%40daft.ie+%3C%2Fa%3E+%7C+Daft+Media+Ltd.%2C+3rd+Floor+Latin+Hall%2C+Golden+Lane%2C+Dublin+8+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+height%3D%2210%22+style%3D%22height%3A10px%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Fdiv%3E+%3C%2Ftd%3E+%3Ctd+style%3D%22width%3A2%25%22%3E%26nbsp%3B%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3Cimg+border%3D%220%22+width%3D%221%22+height%3D%221%22+alt%3D%22%22+src%3D%22http%3A%2F%2Fpost.spmailtechnol.com%2Fq%2Fokk99SCiCrBeq5auetPObw%7E%7E%2FAAFbhgA%7E%2FRgRdkLCdPlcDc3BjQgoAAB19r1slyyCmUhVzcmlrYW50aDY4MUBnbWFpbC5jb21YBAAAAAA%7E%22%3E+%3C%2Fdiv%3E+%3C%2Fdiv%3E%3Cdiv%3E%3Cbr%3E%3C%2Fdiv%3E%3Cbr%3E%3C%2Fdiv%3E\"; // Add two middleware calls. The first attempting to parse the request body as\n// JSON data and the second as URL encoded data.\n\nPicker.middleware(bodyParser.json());\nPicker.middleware(bodyParser.urlencoded({\n  extended: true\n})); // Picker.middleware( bodyParser.raw( ) );\n// Picker.middleware( bodyParser.text( ) );\n\nPicker.route('/lettingEnquiry2', function (params, req, res, next) {\n  if (req.method != 'POST') {\n    res.writeHead(400, 'Bad Request');\n    res.end();\n    return false; // This is an invalid request\n  }\n\n  console.log('in lettingEnquiry2');\n  let body = '';\n  req.on('data', Meteor.bindEnvironment(data => {\n    body += data;\n  })).on('end', Meteor.bindEnvironment(() => {\n    // console.log(body)\n    // keys = Object.keys(body)\n    // json = keys[0];\n    console.log(\"typeof body\");\n    console.log(typeof body);\n    console.log(body); // console.log(typeof keys);\n    // console.log(typeof json);\n    // console.log(json);\n\n    try {\n      json = JSON.parse(body);\n    } catch (e) {\n      console.log('Parse failed');\n      console.log(e);\n      res.writeHead(400, 'Bad Request');\n      res.end();\n      return;\n    }\n\n    if (!json) {\n      res.writeHead(400);\n      res.end('Invalid input');\n      return;\n    }\n\n    processEmail = processEmail.bind(this);\n    let ret = processEmail(json);\n\n    if (!ret.status) {\n      res.writeHead(400);\n      res.end('Invalid input. Error: ' + ret.message);\n      return;\n    }\n\n    res.writeHead(200);\n    res.end('success');\n  }));\n});\nPicker.route('/lettingEnquiry', function (params, req, res, next) {\n  if (req.method != 'POST') {\n    res.writeHead(400, 'Bad Request');\n    res.end();\n    return false; // This is an invalid request\n  }\n\n  console.log('in lettingEnquiry');\n  let json = {};\n\n  if (req.body) {\n    // console.log(\"req.body\")\n    // console.log(req.body)\n    json = req.body;\n    json = JSON.stringify(json); // console.log(typeof json);\n    // console.log(json);\n\n    try {\n      json = JSON.parse(json);\n    } catch (e) {\n      console.log('Parse failed');\n      console.log(e);\n      res.writeHead(400, 'Bad Request');\n      res.end();\n      return;\n    }\n  } else {}\n\n  if (!json) {\n    res.writeHead(400);\n    res.end('Invalid input');\n    return;\n  }\n\n  processEmail = processEmail.bind(this);\n  let ret = processEmail(json);\n\n  if (!ret.status) {\n    res.writeHead(400);\n    console.log('Invalid input. Error: ' + ret.message);\n    res.end('Invalid input. Error: ' + ret.message);\n    return;\n  }\n\n  res.writeHead(200);\n  res.end('success');\n});\n\nfunction processEmail(json) {\n  //How to handle spam, email \n  // console.log(json);\n  // console.log(json.recipient);\n  // console.log(json['recipient']);\n  let enq = {};\n\n  try {\n    enq.fullname = json.subject.split('from ')[1].split(' on')[0]; //Enquiry from Anthony Bloomer on Daft.ie | Flat share in Rockfield, Dundrum, Co. Dublin\n  } catch (e) {\n    console.log('failed to retrive full name');\n  } // enq.date = new Date(json.Date);\n\n\n  try {\n    enq.message = json['body-plain'].split('Message:')[1].split('Please be aware of suspicious')[0].trim(); // enq.message = json['body-plain'].split('Message:')[1].split('</tr>')[0].trim();\n  } catch (e) {\n    console.log('failed to retrive message');\n    console.log(e);\n  } // enq.recipient = json.recipient;\n\n\n  let propKey = '';\n\n  try {\n    propKey = json.recipient.split('let-')[1].split('@')[0];\n    if (propKey.length != 5) throw \"Invalid property Key\";\n    propKey = propKey.toUpperCase();\n  } catch (e) {\n    return {\n      status: false,\n      message: 'failed to retrieve property Key'\n    };\n  }\n\n  enq.propKey = propKey; // console.log(json['body-plain'].replace(/\\n/g, \" \") );\n  // console.log('more deeper');\n  // console.log(json['body-plain'].replace(/\\n/g, \" \").replace(/ {1,}/g,\" \") );\n  // console.log('with split');\n  // console.log(json['body-plain'].replace(/\\n/g, \" \").replace(/ {1,}/g,\" \").split('Email: ')[1] );\n\n  try {\n    enq.email = json['body-plain'].match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi)[0]; // enq.email = json['body-plain'].replace(/\\n/g, \" \").replace(/ {1,}/g,\" \").split('Email: ')[1].split(' ')[0];\n\n    if (enq.email.indexOf('supportdesk@daft.ie') != -1) {\n      //it took dafts email. use 2nd logic now.\n      console.log('Using 2nd logic to fetch email');\n      enq.email = json['body-plain'].split('Email:')[1].split(' ')[1].trim();\n\n      if (!validateEmail(enq.email)) {\n        console.log('Using 3rd logic to fetch email');\n        enq.email = json['body-plain'].split('Email:')[1].split(' ')[0].trim();\n      }\n\n      if (!validateEmail(enq.email)) {\n        console.log('Using 4rd logic to fetch email');\n        enq.email = enq.email.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi)[0];\n      }\n\n      console.log('Email is: ' + enq.email);\n    }\n  } catch (e) {}\n\n  if (!validateEmail(enq.email)) {\n    return {\n      status: false,\n      message: 'failed to retrieve email'\n    };\n  }\n\n  console.log(enq.email);\n\n  try {\n    enq.mobile = json['body-plain'].split('Phone number:')[1].split('Property')[0].trim(); // enq.mobile = json['body-plain'].split('Phone number: ')[1].split(' ')[0];\n  } catch (e) {} // console.log(enq);\n\n\n  let auction = Collections.Auctions.findOne({\n    lettingAuctionCode: enq.propKey\n  });\n\n  if (!auction) {\n    //Auction not found, don't process this \n    return {\n      status: false,\n      message: 'Auction not found'\n    };\n  }\n\n  let property = false;\n  if (auction.propertyId) property = Collections.Properties.findOne({\n    _id: auction.propertyId\n  });\n\n  if (!property) {\n    //Auction not found, don't process this \n    return {\n      status: false,\n      message: 'Property not found'\n    };\n  }\n\n  let user = Meteor.users.findOne({\n    'profile.email': enq.email\n  });\n\n  if (!user) {\n    //User not found, so insert a new emailEnquiry, send emailEnquiryReceived\n    let existingEnquiry = Collections.EmailEnquiries.findOne({\n      email: enq.email,\n      propertyId: property._id,\n      auctionId: auction._id\n    });\n\n    if (!existingEnquiry) {\n      //Not existing, insert new one\n      let emailEnquiryId = Collections.EmailEnquiries.insert({\n        fullname: enq.fullname,\n        email: enq.email,\n        mobile: enq.mobile,\n        // propKey: enq.propKey,\n        propertyId: property._id,\n        auctionId: auction._id,\n        createdAt: new Date(),\n        message: enq.message,\n        isArchived: false\n      });\n      console.log(\"emailEnquiry placed: \" + emailEnquiryId);\n      var data = {\n        userEmail: enq.email,\n        fullname: enq.fullname,\n        requestType: 'emailEnquiryReceived',\n        //This is an Ack email for all the emailEnqueries placed by user in a group of 15mns. \n        emailEnquiryId: emailEnquiryId,\n        propertyId: property._id\n      };\n      Meteor.call('requestEmail', data);\n\n      if (isNaN(auction.enquiryCount)) {\n        //if its not a number ; for first time scenarios.\n        Collections.Auctions.update(auction._id, {\n          $set: {\n            \"enquiryCount\": 1\n          }\n        });\n      } else {\n        Collections.Auctions.update(auction._id, {\n          $inc: {\n            \"enquiryCount\": 1\n          }\n        });\n      } //////////////LANDLORD EMAIL\n\n\n      let address = titleCase(property.address.address);\n      if (property.address.area) address += ', ' + titleCase(property.address.area);\n      if (property.address.county) address += ', ' + titleCase(property.address.county);\n      let subject = 'Enquiry received for ' + address;\n      let agent = Meteor.users.findOne({\n        _id: property.createdByAgent\n      });\n      let userFirstName = agent.profile.name;\n\n      if (userFirstName) {\n        userFirstName = titleCase(userFirstName.split(' ')[0]);\n      }\n\n      let ec = auction.enquiryCount;\n      if (!ec) ec = 1;else ec += 1;\n      let ac = auction.bids;\n      let subHeading = 'This letting has received ' + ec + ' email ' + (ec > 1 ? 'enquiries' : 'enquiry') + ' and ' + (ac == 0 ? 'no' : ac) + ' ' + (ac != 1 ? 'applications' : 'application') + ' so far.';\n      let sluggedName = slugifyEmailAddress(agent.profile.name);\n      if (!sluggedName) sluggedName = 'rent';\n      let propertyEmail = sluggedName + '-let-' + auction.lettingAuctionCode.toLowerCase() + \"@spotmycrib.ie\";\n      let user = {\n        \"profile\": {\n          name: enq.fullname,\n          email: enq.email,\n          userFirstName: userFirstName\n        }\n      };\n      var mailData = {\n        template: 'emailEnquiryReceivedLandlord',\n        subject: subject,\n        mailTo: agent.profile.email,\n        //mailTo: 'srikanth681@gmail.com',\n        replyTo: enq.email,\n        property: property,\n        bedsCount: property.bedrooms.length,\n        rentFormated: numDifferentiation(auction.price),\n        auction: auction,\n        enquiry: enq,\n        propertyKeys: auction.lettingAuctionCode,\n        agent: agent,\n        user: user,\n        propertyImage: false,\n        //dont need it here\n        propertyUrl: FlowRouter.url('rent', {\n          slug: property.slug,\n          key: auction.lettingAuctionCode\n        }),\n        propertyApplicationsUrl: FlowRouter.url('account/propertyApplications', {\n          id: property._id\n        }),\n        propertyEmail: propertyEmail,\n        subHeading: subHeading\n      };\n\n      try {\n        Meteor.call('sendNotificationEmail', mailData); //Keep it asynchronous for speed\n        // Meteor.call('sendNotificationEmail', mailData,true);//if you don't want it to fail and need it to be sync, use email queues instead.\n      } catch (e) {\n        console.log('Mail sending failed. ');\n        console.log(e);\n        return {\n          status: false,\n          message: 'Mail sending failed'\n        };\n      }\n    } else {\n      //There is an existing enquiry\n      return {\n        status: false,\n        message: 'Request already exists'\n      };\n    }\n  } else if (user) {\n    // User found, insert bid, send uploadRefsReminder\n    this.placeBidCallback = function (error, result) {\n      if (error) {\n        console.log(\"emailEnquiry bid failed\");\n        console.log(error);\n        return false;\n      }\n\n      if (result.status == 'Success') {\n        console.log(\"emailEnquiry bid success\");\n      }\n    };\n\n    this.placeBidCallback = this.placeBidCallback.bind(this);\n    Meteor.call('placeBid', [auction._id, auction.price, enq.message, user._id], this.placeBidCallback);\n\n    if (getUserProfileScore(user) < 70) {\n      var mailData = {\n        userEmail: enq.email,\n        fullname: enq.fullname,\n        requestType: 'uploadRefsReminder',\n        //This is a reminder email for the user to complete their profile. \n        propertyId: property._id,\n        auctionId: auction._id\n      }; // Meteor.call('requestEmail',mailData);//Temporarly disabling the reminder emails.\n    }\n  }\n\n  return {\n    status: true,\n    message: 'end of method'\n  };\n}\n\nfunction getUserProfileScore(user) {\n  let score = 0;\n\n  if (user.profile.mobile) {\n    score += 15;\n  }\n\n  if (!user.services) user.services = {};\n\n  if (user.services.facebook) {\n    score += 15;\n  } // if(user.services.google){score += 10;}\n\n\n  if (user.services.twitter) {\n    score += 10;\n  }\n\n  if (user.services.linkedin) {\n    score += 15;\n  }\n\n  if (user.profile.references.hasPassport) {\n    score += 10;\n  }\n\n  if (user.profile.references.employerName) {\n    score += 3;\n  }\n\n  if (user.profile.references.employerTakeHome) {\n    score += 2;\n  }\n\n  if (user.profile.references.hasWorkRef) {\n    score += 10;\n  }\n\n  if (user.profile.references.hasLandlordRef) {\n    score += 10;\n  }\n\n  if (user.profile.references.hasPPS) {\n    score += 3;\n  } // if(user.profile.references.hasFinancialRef){score += 0;}\n\n\n  if (user.profile.references.hasGovtID) {\n    score += 4;\n  }\n\n  if (user.profile.references.hasResume) {\n    score += 3;\n  }\n\n  if (score > 100) score = 100;\n  return score;\n}\n\nfunction numDifferentiation(val) {\n  if (val >= 1000000000) val = (val / 1000000000).toFixed(2) + ' Billion';else if (val >= 1000000) val = (val / 1000000).toFixed(2) + ' Million';\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction slugifyEmailAddress(text) {\n  if (!text) return '';\n  const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ/_,:;';\n  const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return text.toString().toLowerCase().replace(/\\s+/g, '.') // Replace spaces with \".\"\n  .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n  .replace(/&/g, '-and-') // Replace & with ''\n  // .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single ''\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n}\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n/*\nUrl {\n            I20181205-20:24:53.640(0)?   protocol: null,\n            I20181205-20:24:53.640(0)?   slashes: null,\n            I20181205-20:24:53.642(0)?   auth: null,\n            I20181205-20:24:53.644(0)?   host: null,\n            I20181205-20:24:53.645(0)?   port: null,\n            I20181205-20:24:53.646(0)?   hostname: null,\n            I20181205-20:24:53.646(0)?   hash: null,\n            I20181205-20:24:53.647(0)?   search: null,\n            I20181205-20:24:53.648(0)?   query: null,\n            I20181205-20:24:53.649(0)?   pathname: '/account/profile',\n            I20181205-20:24:53.649(0)?   path: '/account/profile',\n            I20181205-20:24:53.651(0)?   href: '/account/profile',\n            I20181205-20:24:53.651(0)?   _raw: '/account/profile' }\n\n\n */\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"accounts.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/accounts.js                                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * Created by njanjanam on 08/04/2017.\n */\n// Deny all client-side updates to user documents\n// Meteor.users.deny({\n//     update() { return true; }\n// });\nMeteor.users.deny({\n  insert() {\n    return true;\n  },\n\n  update() {\n    return true;\n  },\n\n  remove() {\n    return true;\n  }\n\n});\nAccounts.onCreateUser(function (options, user) {\n  //@RELATIVE: imports/ui/templates/accounts/signUp/signUp.js\n  if (options.profile) {\n    if (user.services.facebook) {\n      options.profile.picture = \"http://graph.facebook.com/\" + user.services.facebook.id + \"/picture/?width=40\"; //?type=large\n\n      options.profile.email = user.services.facebook.email;\n    }\n\n    if (user.services.twitter) {\n      options.profile.picture = user.services.twitter.profile_image_url_https; //?type=large\n\n      options.profile.name = user.services.twitter.screenName;\n      options.profile.email = \"\"; //Twitter doesn' give email.\n    }\n\n    if (user.services.google) {\n      options.profile.picture = user.services.google.picture + \"?sz=40\";\n      options.profile.name = user.services.google.given_name + user.services.google.family_name;\n      options.profile.email = user.services.google.email;\n    }\n\n    if (user.services.linkedin) {\n      options.profile.picture = user.services.linkedin.pictureUrl;\n      options.profile.name = user.services.linkedin.firstName + user.services.linkedin.lastName;\n      options.profile.email = user.services.linkedin.emailAddress;\n    } // user.profile = options.profile; Dont overwrite like this\n\n\n    if (user.profile) {\n      if (options.profile.name) user.profile.name = options.profile.name;\n      user.profile.email = options.profile.email;\n      user.profile.picture = options.profile.picture;\n    } else user.profile = options.profile;\n  } // user.createdAt = new Date();\n\n\n  return user;\n}); // Meteor.users.before.insert(function (userId, user) {\n//\n// });\n//https://guide.meteor.com/accounts.html\n// https://github.com/lirbank/meteor-accounts-merge\n// Ensuring every user has an email address, should be in server-side code\n\nAccounts.validateNewUser(user => {\n  console.log('In validate new user');\n  console.log(user);\n\n  if (user.profile.email) {\n    var tmp = Meteor.users.findOne({\n      'profile.email': user.profile.email\n    });\n    var msg = '';\n    var t1 = [];\n    var t2 = [];\n    if (tmp) if (tmp.services) {\n      if (tmp.services.facebook) {\n        t1.push('Facebook');\n        t2.push('Facebook'); // msg = 'Existing Facebook account exists, please login with your Facebook account.'\n      }\n\n      if (tmp.services.twitter) {\n        t1.push('Twitter');\n        t2.push('Twitter');\n      }\n\n      if (tmp.services.google) {\n        t1.push('Google');\n        t2.push('Google');\n      }\n\n      if (tmp.services.linkedin) {\n        t1.push('LinkedIn');\n        t2.push('LinkedIn');\n      }\n\n      if (tmp.services.password) {\n        t1.push('Password');\n        t2.push('Username-password');\n      }\n    }\n\n    if (t1.length) {\n      var s = t1.length > 1 ? 's' : '';\n      msg = 'Existing ' + formatArray(t1) + ' account' + s + ' found, please login with your ' + formatArray(t2, 'or') + '.';\n      throw new Meteor.Error('account-exists', msg);\n    }\n  } // Return true to allow user creation to proceed\n\n\n  return true;\n});\n\nfunction formatArray(arr) {\n  let con = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'and';\n  var outStr = \"\";\n\n  if (arr.length === 1) {\n    outStr = arr[0];\n  } else if (arr.length === 2) {\n    //joins all with \"and\" but no commas\n    //example: \"bob and sam\"\n    outStr = arr.join(' ' + con + ' ');\n  } else if (arr.length > 2) {\n    //joins all with commas, but last one gets \", and\" (oxford comma!)\n    //example: \"bob, joe, and sam\"\n    outStr = arr.slice(0, -1).join(', ') + ' ' + con + ' ' + arr.slice(-1);\n  }\n\n  return outStr;\n}\n\nMeteor.users.after.insert(function (userId, user) {\n  console.log(user);\n  var toUpdate = {\n    \"profile.role\": \"agent\",\n    \"profile.personalMessage\": \"\",\n    \"lastLoginDate\": new Date(),\n    \"profile.isPublic\": false\n  };\n  if (!user.profile.picture) toUpdate[\"profile.picture\"] = \"\";\n  if (!user.profile.mobile) toUpdate[\"profile.mobile\"] = \"\";\n  if (!user.profile.email) toUpdate[\"profile.email\"] = \"\";\n  var references = {};\n  references.hasResume = false;\n  references.hasLandlordRef = false;\n  references.hasGovtID = false;\n  references.employerName = \"\";\n  references.employerTakeHome = \"\";\n  references.hasWorkRef = false;\n  references.hasPassport = false;\n  references.hasPPS = false;\n  references.hasFinancialRef = false;\n  references.others = [];\n  toUpdate[\"profile.references\"] = references;\n  console.log(\"Account Created hook: \");\n\n  if (user.profile.email) {\n    //Check if this user already has any emailEnquiry with us?\n    let req = Collections.EmailEnquiries.findOne({\n      email: user.profile.email,\n      message: {\n        $exists: true,\n        $gt: \"\"\n      }\n    }, {\n      sort: {\n        createdAt: -1\n      }\n    });\n\n    if (req) {\n      toUpdate['profile.personalMessage'] = req.message;\n    }\n  }\n\n  Meteor.users.update({\n    \"_id\": user._id\n  }, {\n    $set: toUpdate\n  }); // if(!user.services.password && user.profile.email){\n  //     Accounts.sendEnrollmentEmail(user._id);\n  // }\n  // Meteor.call('sendWelcomeEmailCustom',[userId]); Moved to server side in Accounts.onCreateUser\n  // var smsText = 'Hi '+fullName+'. Welcome to SpotMyCrib. ';//Please verify your mobile number and email id.\n  // Meteor.call('sendSMS',[mobile, smsText]);\n\n  Meteor.call('sendWelcomeEmailCustom', [user._id]);\n});\nMeteor.methods({\n  'setUserPwd': function (args) {\n    var clientUserId = args[0];\n    var newPassword = args[1];\n    const userId = Meteor.userId();\n    if (clientUserId != userId) throw new Meteor.Error(400, 'Invalid user, please re-login and try again. ');\n    Accounts.setPassword(userId, newPassword, {\n      logout: false\n    });\n  },\n  'togglePublicProfileSetting': function () {\n    console.log('togglePublicProfileSetting called.');\n    var currentUser = Meteor.user();\n\n    if (!currentUser) {\n      throw new Meteor.Error(500, 'Error 500: Invalid user', 'You need to login first.');\n    }\n\n    var update = currentUser.profile.isPublic;\n    if (update == undefined) update = true; //First time, users get the option of public to true.\n    else {\n        if (update) update = false;else update = true;\n      }\n    Meteor.users.update({\n      \"_id\": currentUser._id\n    }, {\n      $set: {\n        \"profile.isPublic\": update\n      }\n    });\n\n    if (update) {\n      //If its true\n      if (!currentUser.profile.username) {\n        //Check if user name doesnt exists\n        Meteor.call('generateUsername', currentUser._id);\n      }\n    }\n  },\n  'userLoggedIn': function () {\n    // Let other method calls from the same client start running,\n    // without waiting for the email sending to complete.\n    this.unblock();\n    var currentUser = Meteor.userId();\n\n    if (!currentUser) {\n      throw new Meteor.Error(500, 'Error 500: Invalid user', 'You need to login first.');\n    }\n\n    Meteor.users.update({\n      \"_id\": currentUser\n    }, {\n      $set: {\n        \"lastLoginDate\": new Date()\n      }\n    });\n  },\n\n  'generateUsername'(userId) {\n    this.unblock();\n    var currentUser = Meteor.userId();\n\n    if (!currentUser) {\n      throw new Meteor.Error(500, 'Error 500: Invalid user', 'You need to login first.');\n    }\n\n    var user = Meteor.user(userId);\n    if (!user) throw new Meteor.Error(500, 'Error 500: Invalid user', 'Please send a valid userID');\n    console.log('user found: ' + user._id);\n    let username = slugify(user.profile.name);\n    if (!username) return false;\n    let u1 = Meteor.users.findOne({\n      \"profile.username\": username\n    });\n    let number = 0;\n\n    while (u1) {\n      number++;\n      username = slugify(user.profile.name + number);\n      u1 = Meteor.users.findOne({\n        \"profile.username\": username\n      });\n    }\n\n    if (username) {\n      Accounts.users.update(user._id, {\n        $set: {\n          \"profile.username\": username\n        }\n      });\n    }\n\n    return username;\n  },\n\n  isSocialAccount: function (email) {\n    // new SimpleSchema({\n    //     email: { type: [email] }\n    // }).validate({ email });\n    // User has no password set\n    var user = Accounts.findUserByEmail(email);\n\n    if (!user) {\n      //Not found in generic way\n      var users = Meteor.users.find({\n        'profile.email': email\n      }).fetch();\n      if (users.length) user = users[0];\n    }\n\n    if (user) {\n      var social = '';\n      if (user.services.facebook) social = 'Facebook';\n      if (user.services.twitter) social = 'Twitter';\n      if (user.services.google) social = 'Google';\n      if (user.services.linkedin) social = 'LinkedIn';\n      if (social) return {\n        error: false,\n        reason: social + ' user found. Please try login with ' + social + '.'\n      };\n    }\n\n    return {\n      error: 'NoUser',\n      reason: 'User not found'\n    };\n  },\n  hasPasswordSet: function () {\n    // new SimpleSchema({\n    //     email: { type: [email] }\n    // }).validate({ email });\n    var user = Meteor.user();\n    if (!user) return false;\n\n    try {\n      if (user.services.password) return true;\n    } catch (e) {\n      console.log(e);\n    }\n\n    return false;\n  }\n});\n\nfunction slugify(text) {\n  if (!text) return '';\n  const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/_,:;';\n  const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return text.toString().toLowerCase().replace(/\\s+/g, '') // Replace spaces with \"\"\n  .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n  .replace(/&/g, '-and-') // Replace & with ''\n  .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single ''\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"sitemap.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/sitemap.js                                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * Created by njanjanam on 23/12/2017.\n */\nsitemaps.add('/sitemap.xml', function () {\n  // 'page' is reqired\n  // 'lastmod', 'changefreq', 'priority' are optional.\n  var ret = [{\n    page: '/',\n    changefreq: 'daily',\n    priority: 0.9\n  }, {\n    page: '/advertisewithus',\n    changefreq: 'hourly',\n    priority: 0.9\n  }, {\n    page: '/estateagent',\n    changefreq: 'hourly',\n    priority: 0.9\n  }, {\n    page: '/faqs',\n    changefreq: 'daily',\n    priority: 0.9\n  }, {\n    page: '/about',\n    changefreq: 'monthly',\n    priority: 0.4\n  }, {\n    page: '/contactus',\n    changefreq: 'daily',\n    priority: 0.4\n  }, {\n    page: '/careers',\n    changefreq: 'monthly',\n    priority: 0.2\n  }, {\n    page: '/howitworks',\n    changefreq: 'daily',\n    priority: 0.5\n  }, {\n    page: '/cookiepolicy',\n    changefreq: 'monthly',\n    priority: 0.2\n  }, {\n    page: '/terms',\n    changefreq: 'monthly',\n    priority: 0.2\n  }, {\n    page: '/privacy',\n    changefreq: 'monthly',\n    priority: 0.2\n  }, {\n    page: '/gdpr',\n    changefreq: 'monthly',\n    priority: 0.2\n  }, {\n    page: '/b/rent-in-ireland',\n    changefreq: 'hourly',\n    priority: 1\n  }];\n  var ele;\n  var auctions = Collections.Auctions.find({\n    isArchived: false\n  }, {\n    transform: function (doc) {\n      var prop = Collections.Properties.findOne({\n        _id: doc.propertyId\n      });\n      doc.slug = prop.slug;\n      return doc;\n    },\n    limit: 1000,\n    sort: {\n      updatedAt: -1\n    }\n  }).fetch();\n\n  for (var i = 0; i < auctions.length; i++) {\n    ele = auctions[i];\n    if (!ele.lettingAuctionCode) continue;\n    if (!ele.slug) continue;\n    ret.push({\n      page: 'rent/' + ele.slug + '/' + ele.lettingAuctionCode,\n      priority: 1\n    }); // ret.push({ page: 'letting/'+ele.lettingAuctionCode,priority: 1 })\n  } //lastmod: new Date().getTime(),\n\n\n  return ret;\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"social-config.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/social-config.js                                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * Created by njanjanam on 01/04/2017.\n */\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"main.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// server/main.js                                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nmodule.link(\"../imports/api/publications.js\");\n// import \"../imports/api/properties.js\";\nif (Meteor.isProduction) FlowRouter.setDeferScriptLoading(true);\nvar timeInMillis = 1000 * 300; // 300 secs\n\nFlowRouter.setPageCacheTimeout(timeInMillis);\n\nString.prototype.replaceAll = function (search, replacement) {\n  var target = this;\n  return target.replace(new RegExp(search, 'g'), replacement);\n};\n\n_hijackWrite = function (res) {\n  var originalWrite = res.write;\n\n  res.write = function (chunk, encoding) {\n    //prevent hijacking other http requests\n    if (!res.iInjected && encoding === undefined && /^<!DOCTYPE html>/.test(chunk)) {\n      chunk = chunk.toString(); // console.log('chunk html '+chunk.substring(0,10))\n\n      chunk = chunk.replace(/<html>/, '<!-- HTML 5 -->\\n<html lang=\"en\">');\n      if (Meteor.isProduction) chunk = chunk.replaceAll('<script type=\"text/javascript\" src', '<script type=\"text/javascript\" async src');\n      res.iInjected = true;\n    }\n\n    originalWrite.call(res, chunk, encoding);\n  };\n};\n\nWebApp.connectHandlers.use(function (req, res, next) {\n  var path = req._parsedUrl.path; // console.log(req._parsedUrl);\n  // console.log(req.headers.host);\n  // console.log(res);\n  ///////Below logic to check if the URL ends with / and remove ending slash unless its a homepage\n\n  var pathname = req._parsedUrl.pathname;\n\n  _hijackWrite(res);\n\n  if (pathname[pathname.length - 1] == '/') {\n    //url ends with tailing /\n    if (pathname != \"/\") {\n      //Its not a home page\n      pathname = pathname.substring(0, pathname.length - 1);\n      var search = req._parsedUrl.search;\n      if (!search) search = \"\";\n      var protocol = 'https://';\n      if (Meteor.isDevelopment) protocol = 'http://';\n      res.writeHead(301, {\n        Location: protocol + req.headers.host + pathname + search\n      });\n      res.end();\n      return;\n    }\n  } // if (req.headers.host == 'localhost:3000') {\n\n\n  if (req.headers.host == 'www.spotmycrib.com') {\n    // temporary redirect - https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\n    res.writeHead(301, {\n      Location: 'https://www.spotmycrib.ie' + path\n    });\n    res.end();\n  } else next.apply();\n}); // if(Meteor.isProduction)\n// WebAppInternals.setBundledJsCssUrlRewriteHook((url) => {\n//     console.log(\"CDN: \"+url)\n//     return `http://d30nklzkhaqiiz.cloudfront.net${url}&_g_app_v_=${process.env.GALAXY_APP_VERSION_ID}`;\n// });\n// if (Meteor.isProduction) {\n\nCDN.config({\n  headers: {\n    \"/\": {\n      \"cache-control\": \"public, max-age: 2592000\"\n    } //30 days in seconds\n\n  }\n}); // }\n\nfunction titleCase(str) {\n  if (!str) return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nTemplate.registerHelper(\"titleCase\", function (str) {\n  return titleCase(str);\n}); // Security.permit(['insert', 'update']).collections([Collections.Properties, Collections.Auctions]).ruleChainMethods();\n// Collections.Properties.permit(['insert', 'update']).ifLoggedIn();\n// Collections.Auctions.permit(['insert', 'update']).ifLoggedIn();//, 'remove'\n\nCollections.Properties.allow({\n  insert: function (userId, doc) {\n    var user = Meteor.user();\n\n    if (user.profile.role = 'agent') {\n      return true;\n    }\n\n    return false;\n  },\n  update: function (userId, doc, fields, modifier) {\n    var user = Meteor.user();\n\n    if (userId === doc.createdByAgent) {\n      return true;\n    }\n\n    return false;\n  }\n});\nCollections.Auctions.allow({\n  insert: function (userId, doc, fields, modifier) {\n    var user = Meteor.user();\n\n    if (user.profile.role = 'agent') {\n      return true;\n    }\n\n    return false;\n  },\n  update: function (userId, doc, fields, modifier) {\n    if (userId === doc.createdByAgent) {\n      return true;\n    }\n\n    return false;\n  }\n});\nCollections.PropertyManage.deny({\n  insert() {\n    return true;\n  },\n\n  update() {\n    return false;\n  },\n\n  remove() {\n    return true;\n  }\n\n});\nCollections.ActivityHistory.deny({\n  insert() {\n    return true;\n  },\n\n  update() {\n    return true;\n  },\n\n  remove() {\n    return true;\n  }\n\n});\nMeteor.startup(() => {\n  // code to run on server at startup\n  if (!process.env.MAIL_URL) process.env.MAIL_URL = Meteor.settings[\"galaxy.meteor.com\"]['env']['MAIL_URL'];\n});\nS3.config = {\n  key: 'AKIA5S4UA6UV3RUSZ7XK',\n  secret: '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',\n  bucket: 'spotmycrib',\n  region: 'eu-west-1' // Only needed if not \"us-east-1\" or \"us-standard\"\n\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"common\":{\"common.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// common/common.js                                                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"../imports/api/publications.js\");\nmodule.link(\"../imports/api/profile.js\");\nmodule.link(\"../imports/api/properties.js\");\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\n// import '../imports/ui/templates/accounts/signIn/signIn.js'\n// import '../imports/ui/templates/accounts/signUp/signUp.js'\n// import '../imports/ui/templates/accounts/forgot/forgot.js'\nviews = {};\n\nviews['propertyManage.view'] = function (terms) {\n  try {\n    // var id = Router.current().params.id\n    return {\n      find: {\n        propertyId: terms.id\n      },\n      options: {\n        limit: 1\n      } // sort: {sort: {createdAt: -1}, limit: 1}\n\n    };\n  } catch (e) {\n    return {\n      find: {},\n      options: {\n        limit: 1\n      },\n      fail: true\n    };\n  }\n};\n\nviews['property.view'] = function (terms) {\n  try {\n    return {\n      find: {\n        _id: terms.id\n      },\n      options: {\n        limit: 1\n      }\n    };\n  } catch (e) {\n    return {\n      find: {},\n      options: {\n        limit: 1\n      },\n      fail: true\n    };\n  }\n};\n\nviews['PMactivityHistory.view'] = function (terms) {\n  try {\n    // var id = Router.current().params.id\n    var lim = Session.get('resultsPerPage');\n    if (!lim) lim = 100;\n    return {\n      find: {\n        propertyId: terms.id\n      },\n      options: {\n        limit: lim,\n        sort: {\n          createdAt: -1\n        }\n      } // sort: {sort: {createdAt: -1}, limit: 1}\n\n    };\n  } catch (e) {\n    return {\n      find: {},\n      options: {\n        limit: 1\n      },\n      fail: true\n    };\n  }\n};\n\nviews['MyProperties.view'] = function (terms) {\n  try {\n    var resperpage = terms.resperpage;\n    if (isNaN(resperpage)) resperpage = 20;\n    if (!resperpage) resperpage = 20;\n    if (resperpage < 0 || resperpage > 100) resperpage = 20;\n    var pg = 1;\n\n    try {\n      pg = parseInt(terms.pageno);\n    } catch (e) {}\n\n    if (isNaN(pg)) pg = 1;\n    var skip = (pg - 1) * resperpage;\n    if (isNaN(skip)) skip = 0;\n    return {\n      find: {},\n      options: {\n        limit: parseInt(resperpage),\n        sort: {\n          updatedAt: -1\n        },\n        skip: parseInt(skip)\n      }\n    };\n  } catch (e) {\n    console.log(e);\n    return {\n      find: {},\n      options: {\n        limit: 1\n      },\n      fail: true\n    };\n  }\n};\n\nviews['PropertyApplications.view'] = function (terms) {\n  try {\n    let originalPgSplit = null,\n        validOriginalPgSplit = false;\n\n    if (terms.pageno) {\n      originalPgSplit = terms.pageno.toString().split('-');\n\n      if (originalPgSplit.length == 2) {\n        //if format issue, then reset issue.\n        // if inside it means that format is correct, below if will correct data if required.\n        validOriginalPgSplit = true;\n        if (isNaN(originalPgSplit[0])) originalPgSplit[0] = 1; // if its not a number then reset it.\n\n        if (isNaN(originalPgSplit[1])) originalPgSplit[1] = 1; // if its not a number then reset it.\n      }\n    }\n\n    if (!validOriginalPgSplit) {\n      //invalid originalPgSplit; reset it\n      originalPgSplit = [1, 1];\n    } //// for property applications\n\n\n    var resperpage = terms.PAresperpage;\n    if (isNaN(resperpage)) resperpage = 20;\n    if (!resperpage) resperpage = 20;\n    if (resperpage < 0 || resperpage > 100) resperpage = 20;\n    var pg = originalPgSplit[0];\n    var skip = (pg - 1) * resperpage;\n    if (isNaN(skip)) skip = 0;\n    let out = {\n      id: terms.id,\n      options: {\n        limit: resperpage\n      }\n    };\n    out.propertyApplications = {\n      find: {},\n      options: {\n        limit: parseInt(resperpage),\n        sort: {\n          createdAt: -1\n        },\n        skip: parseInt(skip)\n      }\n    }; //// for Email Enquiries\n\n    resperpage = terms.EEresperpage;\n    if (isNaN(resperpage)) resperpage = 20;\n    if (!resperpage) resperpage = 20;\n    if (resperpage < 0 || resperpage > 100) resperpage = 20;\n    pg = originalPgSplit[1];\n    skip = (pg - 1) * resperpage;\n    if (isNaN(skip)) skip = 0;\n    out.emailEnquiries = {\n      find: {},\n      options: {\n        limit: parseInt(resperpage),\n        sort: {\n          createdAt: -1\n        },\n        skip: parseInt(skip)\n      }\n    };\n    return out;\n  } catch (e) {\n    console.log(e);\n    return {\n      propertyApplications: {\n        find: {},\n        options: {\n          limit: 1\n        },\n        fail: true\n      },\n      emailEnquiries: {\n        find: {},\n        options: {\n          limit: 1\n        },\n        fail: true\n      },\n      fail: true\n    };\n  }\n};\n\nviews['MyAdvertisements.view'] = function (terms) {\n  try {\n    var resperpage = terms.resperpage;\n    if (isNaN(resperpage)) resperpage = 20;\n    if (!resperpage) resperpage = 20;\n    if (resperpage < 0 || resperpage > 100) resperpage = 20;\n    var pg = 1;\n\n    try {\n      pg = parseInt(terms.pageno);\n    } catch (e) {}\n\n    if (isNaN(pg)) pg = 1;\n    var skip = (pg - 1) * resperpage;\n    if (isNaN(skip)) skip = 0;\n    return {\n      find: {},\n      options: {\n        limit: parseInt(resperpage),\n        sort: {\n          updatedAt: -1\n        },\n        skip: parseInt(skip)\n      }\n    };\n  } catch (e) {\n    console.log(e);\n    return {\n      find: {},\n      options: {\n        limit: 1\n      },\n      fail: true\n    };\n  }\n};\n\nviews['browseLettings.view'] = function (terms) {\n  try {\n    var resperpage = terms.resperpage;\n    if (isNaN(resperpage)) resperpage = 20;\n    if (!resperpage) resperpage = 20;\n    if (resperpage < 0 || resperpage > 100) resperpage = 20;\n    var slugData = getSlugData(terms.slug, terms.query);\n    var find = {};\n    if (slugData.area) find['address.area'] = slugData.area;\n    if (slugData.county) find['address.county'] = slugData.county;\n    if (slugData.propertyType) find['type'] = slugData.propertyType; //.toString().toLowerCase()\n    // if(slugData.country) find.address.country=slugData.country;\n    // console.log(slugData)\n\n    var bedCount = null;\n    if (slugData.bedCount && !isNaN(slugData.bedCount)) bedCount = parseInt(slugData.bedCount);\n    var pg = 1;\n\n    try {\n      pg = parseInt(terms.pageno);\n    } catch (e) {}\n\n    if (isNaN(pg)) pg = 1;\n    var skip = (pg - 1) * resperpage;\n    if (isNaN(skip)) skip = 0;\n    var sortOptions = {\n      updatedAt: -1\n    };\n    if (slugData.luxurySort) sortOptions = {\n      rentMonthly: -1\n    };else if (slugData.cheapSort) sortOptions = {\n      rentMonthly: 1\n    };else if (slugData.mostRecentSort) sortOptions = {\n      updatedAt: -1\n    };else if (slugData.leastRecentSort) sortOptions = {\n      updatedAt: 1\n    };\n    let tmp = [],\n        validKeys = null;\n\n    if (terms.propertykey) {\n      validKeys = [];\n      tmp = terms.propertykey.split('-');\n\n      for (let i = 0; i < tmp.length; i++) {\n        if (tmp[i].length == 5) validKeys.push(tmp[i].toUpperCase()); //This is the validation we are doing.\n      }\n    }\n\n    return {\n      find: find,\n      propertykey: validKeys,\n      minRent: slugData.minRent,\n      maxRent: slugData.maxRent,\n      minBeds: slugData.minBeds,\n      maxBeds: slugData.maxBeds,\n      bedCount: bedCount,\n      options: {\n        limit: parseInt(resperpage),\n        sort: sortOptions,\n        skip: parseInt(skip)\n      }\n    };\n  } catch (e) {\n    console.log(e);\n    return {\n      find: {},\n      options: {\n        limit: 1\n      },\n      fail: true\n    };\n  }\n};\n\nviews['browseBlogs.view'] = function (terms) {\n  try {\n    var resperpage = terms.resperpage;\n    if (isNaN(resperpage)) resperpage = 6;\n    if (!resperpage) resperpage = 6;\n    if (resperpage < 0 || resperpage > 100) resperpage = 6; // if(!terms.slug) throw 'Slug required';\n\n    var find = {}; // if(terms.slug) find['slug']=slug\n\n    var pg = 1;\n\n    try {\n      pg = parseInt(terms.pageno);\n    } catch (e) {}\n\n    if (isNaN(pg)) pg = 1;\n    var skip = (pg - 1) * resperpage;\n    if (isNaN(skip)) skip = 0;\n    var sortOptions = {\n      updatedAt: -1\n    };\n    return {\n      find: find,\n      options: {\n        limit: parseInt(resperpage),\n        sort: sortOptions,\n        skip: parseInt(skip)\n      }\n    };\n  } catch (e) {\n    console.log(e);\n    return {\n      find: {},\n      options: {\n        limit: 1\n      },\n      fail: true\n    };\n  }\n};\n\nqueryConstructor = function (terms) {\n  var viewFunction = views[terms.viewName];\n  var data = viewFunction(terms);\n\n  if (data.options.limit > 100) {\n    data.options.limit = 100;\n  }\n\n  return data;\n}; //http://www.discovermeteor.com/blog/query-constructors/\n\n\nfunction getSlugData(slug, query) {\n  //This needs to be seperate on common.\n  var propertyType = \"\";\n  var county = \"\";\n  var area = \"\";\n  var maxRent = \"\";\n  var minRent = \"\";\n  var minBeds = \"\";\n  var maxBeds = \"\";\n  var country = \"\";\n  var bedCount = \"\";\n  var luxurySort = \"\";\n  var cheapSort = \"\";\n  var mostRecentSort = \"\";\n  var leastRecentSort = \"\";\n  var range = [{\n    cur: \"eur\",\n    min: 0,\n    max: 10000\n  }];\n  var selectedCur = range[0];\n\n  if (query) {\n    if (query.minRent) minRent = query.minRent;\n    if (query.maxRent) maxRent = query.maxRent;\n    if (query.minBeds) minBeds = query.minBeds;\n    if (query.maxBeds) maxBeds = query.maxBeds;\n    if (query.bedCount) bedCount = query.bedCount;\n    if (query.luxurySort) luxurySort = query.luxurySort;\n    if (query.cheapSort) cheapSort = query.cheapSort;\n    if (query.mostRecentSort) mostRecentSort = query.mostRecentSort;\n    if (query.leastRecentSort) leastRecentSort = query.leastRecentSort;\n  }\n\n  if (!slug) {\n    return {\n      country: country,\n      county: county,\n      area: area,\n      minRent: minRent,\n      maxRent: maxRent,\n      minBeds: minBeds,\n      maxBeds: maxBeds,\n      bedCount: bedCount,\n      luxurySort: luxurySort,\n      cheapSort: cheapSort,\n      mostRecentSort: mostRecentSort,\n      leastRecentSort: leastRecentSort,\n      propertyType: propertyType\n    };\n  }\n\n  if (slug.indexOf('-for-') != -1) {\n    propertyType = slug.split('-for-')[0];\n    propertyType = propertyType.split('-').join(' ');\n  }\n\n  if (slug.indexOf('-in-') != -1) {\n    var tmp = slug.split('-in-')[1].split('-');\n\n    switch (tmp.length) {\n      case 3:\n        country = tmp[2];\n        county = tmp[1];\n        area = tmp[0];\n        break;\n\n      case 2:\n        country = tmp[1];\n        county = tmp[0];\n        break;\n\n      case 1:\n        country = tmp[0];\n        break;\n    }\n\n    if (propertyType) propertyType = propertyType.replace(/_/g, ' ');\n    if (county) county = titleCaseAllWords(county.replace(/_/g, ' '));\n    if (country) country = titleCaseAllWords(country.replace(/_/g, ' '));\n    if (area) area = titleCaseAllWords(area.replace(/_/g, ' '));\n  }\n\n  return {\n    country: country,\n    county: county,\n    area: area,\n    minRent: minRent,\n    maxRent: maxRent,\n    minBeds: minBeds,\n    maxBeds: maxBeds,\n    bedCount: bedCount,\n    luxurySort: luxurySort,\n    cheapSort: cheapSort,\n    mostRecentSort: mostRecentSort,\n    leastRecentSort: leastRecentSort,\n    propertyType: propertyType\n  };\n}\n\nfunction titleCaseAllWords(str) {\n  if (!str) return;\n  return str.split(' ').map(function (str) {\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n  }).join(' '); // var words = str.split(' ')\n  // for(var i=0;i<words.length;i++){\n  //\n  // }\n  // return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\ncdnPath = function (url) {\n  if (Meteor.settings.public.CDN_ENABLED) {\n    return CDN.get_cdn_url() + url; // if(Meteor.isDevelopment || !process.env.GALAXY_APP_VERSION_ID) return `http://d30nklzkhaqiiz.cloudfront.net${url}`;\n    //\n    // if(url.indexOf('?')!=-1)return `http://d30nklzkhaqiiz.cloudfront.net${url}?_g_app_v_=${process.env.GALAXY_APP_VERSION_ID}`;\n    // else return `http://d30nklzkhaqiiz.cloudfront.net${url}&_g_app_v_=${process.env.GALAXY_APP_VERSION_ID}`;\n  }\n\n  return url;\n};\n\nclearMeta = function () {\n  addLangLink();\n  if (!Meteor.isClient) return;\n  var arr_elms = [];\n  arr_elms = document.head.getElementsByTagName(\"meta\"); // This var is reactive\n\n  var c = 0;\n\n  while (arr_elms[c]) {\n    //First 3 are default and useful\n    // console.log(arr_elms[3])\n    if (arr_elms[c].name == \"description\") document.head.removeChild(arr_elms[c]);\n    c++;\n  } // console.log('Removed: '+c);\n  ///Below code removed extra link hreflang 's\n\n\n  arr_elms = [];\n  arr_elms = document.head.getElementsByTagName(\"link\"); // This var is reactive\n\n  c = 0;\n\n  while (arr_elms[c]) {\n    //First 3 are default and useful\n    if (arr_elms[c].hreflang) document.head.removeChild(arr_elms[c]);\n    c++;\n  }\n};\n\naddLangLink = function () {\n  try {\n    // <link rel=\"alternate\" href=\"https://www.spotmycrib.ie/\" hreflang=\"en-ie\" />\n    var currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params, FlowRouter.current().queryParams);\n    var linkInfo = {\n      rel: \"alternate\",\n      hreflang: \"en-ie\",\n      href: currentURL\n    };\n    DocHead.addLink(linkInfo);\n    if (FlowRouter.current().route.name != 'letting') DocHead.addMeta({\n      rel: \"canonical\",\n      href: currentURL\n    }); // console.log('In addLang');\n  } catch (e) {}\n};\n\nfbq = function () {}; //Replacement for FB pixel code\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\",\n    \".jsx\"\n  ]\n});\n\nrequire(\"/lib/routing.js\");\nrequire(\"/server/core/SA.js\");\nrequire(\"/server/core/activityhistory.js\");\nrequire(\"/server/core/email.js\");\nrequire(\"/server/core/importer.js\");\nrequire(\"/server/core/manageproperty.js\");\nrequire(\"/server/core/mybids.js\");\nrequire(\"/server/core/properties.js\");\nrequire(\"/server/cronjobs/cronjobs.js\");\nrequire(\"/server/cronjobs/emailAlerts.js\");\nrequire(\"/server/cronjobs/functions.js\");\nrequire(\"/server/routes/lettingEnquiry.js\");\nrequire(\"/common/common.js\");\nrequire(\"/server/accounts.js\");\nrequire(\"/server/sitemap.js\");\nrequire(\"/server/social-config.js\");\nrequire(\"/server/main.js\");","hash":"1115bcb504c2e8ff8183d05d89deedf6ed96a77f","servePath":"/app.js","sourceMap":{"version":3,"sources":["lib/routing.js","imports/reactui/layout/LoginFormViews.jsx","imports/reactui/layout/MainLayoutFooter.jsx","imports/reactui/layout/MainLayoutHeader.jsx","imports/reactui/layout/NotFound.jsx","imports/reactui/pages/AdvertiseWithUs.jsx","imports/reactui/pages/BlogDetail.jsx","imports/reactui/pages/BlogHome.jsx","imports/reactui/pages/Home.jsx","imports/reactui/pages/HousesForrent.jsx","imports/reactui/pages/LettingDetail.jsx","imports/reactui/static/About.jsx","imports/reactui/static/Careers.jsx","imports/reactui/static/ContactUs.jsx","imports/reactui/static/CookiePolicy.jsx","imports/reactui/static/EstateAgent.jsx","imports/reactui/static/Faqs.jsx","imports/reactui/static/Gdpr.jsx","imports/reactui/static/HowItWorks.jsx","imports/reactui/static/Privacy.jsx","imports/reactui/static/Terms.jsx","imports/ui/layout/footer.js","imports/ui/layout/header.js","imports/ui/layout/layout.js","imports/ui/templates/editProperty.js","imports/ui/templates/lettingprintview.js","imports/ui/templates/myProperties.js","imports/ui/templates/profile.js","imports/ui/templates/propertyApplications.js","imports/ui/templates/propertyManage.js","imports/ui/templates/shared.js","imports/ui/templates/tenant.js","imports/ui/templates/tenants.js","imports/api/collections.js","imports/api/profile.js","imports/api/properties.js","imports/api/publications.js","server/core/SA.js","server/core/activityhistory.js","server/core/email.js","server/core/importer.js","server/core/manageproperty.js","server/core/mybids.js","server/core/properties.js","server/cronjobs/cronjobs.js","server/cronjobs/emailAlerts.js","server/cronjobs/functions.js","server/routes/lettingEnquiry.js","server/accounts.js","server/sitemap.js","server/social-config.js","server/main.js","common/common.js"],"names":["React","module","link","default","v","Meteor","render","mount","isClient","Session","set","generalDesc","FlowRouter","route","name","action","Home","BlazeLayout","reset","clearMeta","DocHead","setTitle","addMeta","content","params","queryParams","LettingDetail","BlogHome","BlogDetail","AdvertiseWithUs","curStep","parseInt","pageno","title","description","curStepComponent","HousesForrent","slug","indexOf","prevRoute","args","scrollTo","go","isServer","templateName","dataContext","isLandlordMode","accountRoutes","group","prefix","triggersEnter","context","redirect","notFound","console","log","NotFound","About","setStaticPageMetaTags","Careers","ContactUs","CookiePolicy","Faqs","Gdpr","HowItWorks","Privacy","Terms","EstateAgent","pageName","desc","setTimeout","jQuery","animate","scrollTop","e","document","body","documentElement","export","LoginFormSignInView","LoginFormSignUpView","LoginFormSignUpViewLandlord","LoginFormResetPasswordView","Component","withTracker","LoginFormMessages","SocialLoginButtonsT","constructor","props","onPage","state","isLoading","formMessages","errors","signInHandler","bind","componentDidMount","$","find","focus","click","setState","event","preventDefault","usernameInput","passwordInput","username","val","trim","password","validatedEmail","LoginFormValidation","email","validatedPassword","validationLevel","push","length","loginCallBack","error","fbq","ga","reason","isSocialAccountCallback","err1","result","info","call","isOnPage","hide","undefined","keys","loginFlowStart","loginWithPassword","loginFromApplyNowBtn","paddingTop","margin","showForgotFormHandler","color","showSignupFormHandler","forgotPwdHandler","signUpHandler","intlTelInput","preferredCountries","emailInput","fullNameInput","mobileInput","fullName","mobile","validatedFullName","validatedMobile","newUserData","profile","createUserCallback","Accounts","createUser","map","p","i","showSignInFormHandler","radioHandler","showForm","tryAgainBtnHandler","emailAddress","forgotPwdCallback","forgotPassword","contactUsClickHandler","fancybox","close","url","MainLayoutFooter","cdnPath","display","LoginFormHorizontalT","LoginPage","LoginPageHorizontal","LoginFormT","emailAlerts","heading","para","yesButtonText","EMAIL_ALERT_VARIATION_count","EMAIL_ALERT_VARIATION","EMAILALERT","isMobileMenuEventAttached","delayedFunctions","unbind","hasClass","target","closest","current","addClass","removeClass","showLoginDialog","showSignupDialog","showLoginPopup","afterClose","template","emailValidation","re","test","decideAndShowCreateAlertPopup","showAlertCreate","saidNo","readCookie","c","on","tmp","Date","now","user","emailAlertsActive","emailAlertsNoThanks","showCreateAlertPopup","includes","isNaN","createCookie","afterShow","showAddPropertyHeaderPopup","value","days","expires","date","setTime","getTime","toUTCString","cookie","nameEQ","ca","split","charAt","substring","eraseCookie","loadFonts","wf","createElement","href","rel","async","s","getElementsByTagName","parentNode","insertBefore","MainLayoutHeader","emailAlertEmailAddress","currentUser","emailAlertEmailAddressHandler","NeedsCreateAlertPopup","componentWillReceiveProps","nextProps","componentWillMount","get","newAlertCreateForm","newAlertCreatedSuccessfully","emailAlertCreateBtnHandler","emailAlertNoThanksBtnHandler","alert","subscribeToEmailAlert","getScript","scrolling","helpers","overlay","locked","fontsLoaded","raf","window","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","addEventListener","runOnlyOnce","off","addon","position","top","showLoginDialogClick","showSignupDialogClick","logoutBtnClick","logout","err","Error","profileBtnClick","cookieConsentBtnClick","remove","self","showCookieConsent","marginLeft","currentUserId","path","getProfilePic","displayName","textAlign","fontSize","marginBottom","borderBottom","width","marginTop","exportDefault","errorModel","timeoutVal","tmpHTML","j","html","shift","picture","services","facebook","userId","messages","item","warning","success","LoginForm","showForgotForm","showSignupForm","isLandLordMode","showLandlordViewHandler","ret","SocialLoginButtons","loginFlowComplete","errorMessages","dontShow","buttonForText","buttonFor","handleFBLogin","handleTwitterLogin","handleGoogleLogin","handleLinkedInLogin","FBCallback","msg","errorType","message","usedInDlg","loginWithFacebook","TwitterCallback","loginWithTwitter","GoogleCallback","loginWithGoogle","LinkedInCallback","loginWithLinkedIn","LoginFormHorizontal","ReactDOM","Collections","titleCase","str","toUpperCase","toLowerCase","searialisedAdvertiseForm","saveToLocalStorage","serializeArray","localStorage","advertisewithusFormData","advertisewithusFormData_address","advertisewithusFormData_price","advertisewithusFormData_county","advertisewithusFormData_area","advertisewithusFormData_type","advertisewithusFormData_furnished","advertisewithusFormData_baths","advertisewithusFormData_numBedRoomCount","components","c1","AwsStep1","c2","AwsStep2","AwsStep3","TagName","getParam","backBtnHandler","propertyId","auctionId","myPropertyLink","addPropImagesHandler","id","prop","Properties","findOne","auction","Auctions","_id","key","lettingAuctionCode","addPropertyCallback","subscribe","addAdvertisementFormCallback","templateInstance","AdvertiseWithUsForm","addPropertyFormSaving","numBedRoomCount","numBedRoomCountArr","counties","areas","countySelected","propertyTypes","countySelectedHandler","areaSelectedHandler","propertyTypeHandler","areaSelected","propertyTypeSelected","handleSubmit","instance","address","findDOMNode","refs","price","county","updateNumBedRoomCount","countArr","validator","validate","submitHandler","restoreLocalStorageSettings","label","arr","k","index","AdvertiseWithUsFormT","staticCounties","allareas","allcounties","distinctEntries","_","uniq","Areas","sort","Area","fields","fetch","x","Config","propertyType","AreasSub","ConfigSub","ready","dateFormat","text","toString","toDateString","chunkify","a","n","balanced","len","out","size","Math","floor","slice","ceil","blogDetail","currentURL","propsListHTML","isServerSSRReq","componentDidUpdate","renderMain","blog","data","blogImage","image","isAgent","padding","address1","__html","excerpt","related","float","relatedBlog","src","height","recentBlogs","renderFullMain","carousel","isSubsLoaded","viewBlogSub","Blogs","limit","$not","updatedAt","metaTitle","metaDesc","titleTmp","socialDesc","socialTitle","property","ImagesSlider","w","first","h","images","altText","countsCollection","Pagination","pagination","prevPage","disabled","handleChoosePage","prevPageNo","parent","pages","page","nextPage","nextPageNo","pBlogs","blogs","pTotalCount","totalCount","pPagination","component","propGrid","created","mainAllPage","paddingBottom","getPaginationData","totalResultsCount","currentPageNo","resultsPerPage","pgMin","pgMax","maxPages","Number","isInteger","cRoute","cParams","cQueryParams","resperpage","sortOptions","bBlogsSub","viewName","Mongo","Collection","Counts","countsGet","count","has","countsHas","homePageMainFormData_county","homePageMainFormData_area","homePageMainFormData_propertyType","homePageMainFormData_maxRent","slugify","b","RegExp","join","replace","generateSlug","curURL","area","maxRent","country","query","range","cur","min","max","selectedCur","bedCount","luxurySort","cheapSort","generateSlugURL","fixImageSize","avgW","each","searchCrumbs","c3","fCrumbs","areaCrumbs","countyCrumbs","chunks","searchCrumbsLoaded","navigator","userAgent","hash","offset","css","border","borderWidth","location","crumbsUpdate","handleJoinNow","handlePostYourProperty","instructions","openPostNewProp","crumb","background","advancedCrumbs","tmpCrumbs","concat","advC","HomePageMainForm","isLocalAlreadySet","isLocalAreaAlreadySet","maxRentHandler","localHistorySet","removeAttr","submitFormHandler","propertykey","zIndex","HomePageMainFormT","countries","areasSub","HomePageLatestProps","pAuctions","auctions","pProperties","properties","resize","propType","gallery","type","baths","HomePageLatestPropsT","bLettingsSub","mostRecentSort","titleCaseAllWords","getSlugData","minRent","minBeds","maxBeds","leastRecentSort","sortBy","updateRoute","baseURL","curCity","updateQueryStringParameter","curBuilder","pCS","pAS","pTS","pCounties","pPropertyTypes","pAreas","showXSMenu","minRentSelected","maxRentSelected","minBedCountSelected","maxBedCountSelected","sortBySelected","minRentOptions","maxRentOptions","minBedOptions","maxBedOptions","sortByOptions","isEqualSelect","uri","separator","match","handleCountyDropdown","countyChanged","handleAreaDropdown","handlePropertyTypeDropdown","handleMinRentDropdown","homePageMainFormData_minRent","handleMaxRentDropdown","handleMinBedDropdown","homePageMainFormData_minBed","handleMaxBedDropdown","homePageMainFormData_maxBed","handleSortByDropdown","searchXSMenu","cancelSearchXSMenu","handleShowFilters","showFilterText","formatedPT","handleClearFilters","slugData","sluggedTitle","sluggedTitleWithoutType","sluggedType","propertyTypePlural","startTime","countyParam","areaParam","getQueryParam","rentMonthly","module1","isArray","updateViewsCalled","propertyKeyOfThisPage","addCommaToEach","nlToBr","validateMobileNumber","attachEvents","redirectToProfilePageEvent","closePopupEvent","showConfDialog","Array","autoExpandDelayed","autoExpand","field","style","computed","getComputedStyle","getPropertyValue","scrollHeight","isApplySuccessfulOpen","showApplySuccessfulDialog","isApplicationInProgress","personalMessage","applyNowBtnHandler","redirectToProfilePageHandler","confirmApplyBtnHandler","cap_closePopupBtnHandler","cap_viewSimilarLettingsBtnHandler","noPropBackBtnHandler","pd_cap_btnHandler","pd_cap_aHandler","headerApplyNowBtnHandler","mainUploadRefBtnHandler","mainUpdateRefBtnHandler","mainApplyNowBtnHandler","createAlertBtnHandler","handlePersonalMessageChange","element","getElementById","scrollIntoView","bidMessage","placeBidCallback","status","isValid","prompt","myBid","afterCFun","select","scrollPercent","fadeIn","isCurUserBid","applicationsReceivedCount","rentType","alreadyLeased","PD","sliderImages","logourl","furnished","bedroomsCount","ensuiteCount","doubleBedCount","views","fontFamily","hasAllReqReferences","refListArr","readyFrom","lease","BER","about","primaryContact","phone","contacts","contact","amenitiesWithImgs","aminity","relatedProps","firstImg","priceRange","lineHeight","bcrumbs","viewLettingSub","globalConfig","deletedList","otherBids","Bids","PDret","bedrooms","amenities","amenitiesLogos","slugTemp","reverse","notArr","filters","$exists","$gt","$in","tmpRelated","transform","doc","isArchived","maxLen","forTotCount","yourBid","needed","weNeedOnSides","needAbove","back","$ne","$lt","backCount","$lte","above","aboveCount","$gte","retAbove","retBack","references","hasLandlordRef","employerName","hasWorkRef","hasFinancialRef","hasGovtID","hasPassport","hasPPS","hasResume","AddThisReact","maxWidth","TxtType","el","toRotate","period","loopNum","txt","tick","isDeleting","prototype","fullTxt","innerHTML","that","delta","random","elements","getElementsByClassName","getAttribute","JSON","parse","appendChild","updateFormFromLocalStorage","contactFormData_name","contactFormData_email","contactFormData_mobile","contactFormData_message","searialisedContactUsForm","clearLocalStorage","removeItem","contactFormSaving","contactFormSavedSuccess","takeBackupHandler","formSubmitHandler","autoGrowTAHandler","sub","f2Success","knowMore","sinterestformHandler","sinterestformtryagainHandler","knowMoreBtnHandler","noUiSlider","start","ev","round","joinNowBtnHandler","emailaddress","fullname","company","minHeight","boxShadow","KnowMoreForm","f1Success","knowmoreformtryagainHandler","knowmoreformHandler","paddingRight","paddingLeft","Template","footerExtended","RouteB","headerExtended","onRendered","onCreated","loginFlowCompleteManager","showAddPropertyHeaderTemplate","isAgentRole","role","events","startup","Blaze","_allowJavascriptUrls","filestack","apikey","fsClient","init","policy","signature","editProperty","ReactiveVar","autorun","subscriptionsReady","deactivateInProgress","archiveInProgress","userLoggedIn","propertyData","propertyFound","inIgnoreList","ignoreList","createdByAgent","goBack","sluggedName","slugifyEmailAddress","successful","execCommand","editPropertyForm","S3","collection","editPropertyFormSaving","results","trimVal","isEqualCheck","furnishedOptions","isFurnished","selected","County","ensuiteLoop","ensuiteLoopCheckbox","ensuite","ensuiteLoopBedType","bedType","leaseUntil","allowedVals","ensuiteLoopBedTypeOptions","isSingle","isDouble","isTwin","sel","hasAmenityCheckbox","propertyContact","advertisementContact","submit","files","upload","r","editPropertyImages","editPropertyImagesNewOnes","file","original_name","relative_url","secure_url","updateGalleriesInServer","res","openPicker","t1","datetimepicker","imageEditView","imgEditTag","isOriginalImageFromOwnS3","newArr","handle","getIndexByHandle","getIndexByRelativeURL","pickOptions","transformations","crop","force","aspectRatio","rotate","accept","imageMax","cropFiles","then","response","filesUploaded","delete","splice","filename","mimetype","originalFile","originalPath","source","uploadId","pick","fromSources","maxFiles","getpropertyData","applicationsActiveCount","myArray","fileId","deactivateConfEvent","archiveConfEvent","lettingprintview","Projects","selector","print","SimpleSchema","advertiseFormSaving","saveAndAdvertise","globalFILTERS","getFiltersFromRoute","FILTERS","home_type","facing","floor_low","floor_high","val_l","val_h","price_low","price_high","setFilters","defaultFilters","filter","clear","originalUrl","homeType","l1","l2","numDifferentiation","updateUISlider","getDefaultFilters","getCurUsersBid","bid","slider","slider1","resetUISlider","startUISlider","create","s1","connect","step","format","wNumb","decimals","s2","applyFilterValues","applyFilters","urlBase","registerHelper","object","absoluteUrl","toFixed","numFormat","afterPoint","substr","lastThree","otherNumbers","myProperties","applyClearFiltersEvent","failed","showAddProperty","onlyActive","skip","showDemoProp","demoProperty","showFilters","projectData","isArraysEqual","hasLowerLimit","hasUpperLimit","Object","isAuctionClosed","timestamp","dend","endDate","timeDiff","agentStats","activeAuctions","totalAuctions","totalBidsReceived","bidsReceivedActiveAuctions","bidProfitActive","totalBidProfit","bidProfit","propertyList","expanded","showAddAuctionForm","isSubsLoadedAttempted","attempt","lettingprintviewData","showEditPropertyForm","propId","addPropertyForm","session","addproperty","isSA","addPropertyImages","rent","trigger","number","atob","galleryLen","galleryStoredLen","storeURL","stringify","updateGalleriesInProfile","advertiseForm","parentIns","view","parentView","imageView","imgTag","ok","getIndex","clearFiltersEvent","attr","filterDefaults","array","floorLevelDOM","priceRangeDOM","delayedCall","functionName","array1","array2","is_same","every","callDelayedFunctions","unitid","mybidsJqueryEvents","redirectURL","bidId","getPriceBreakUp","unit","ratePerSqFt","pricing","priceBreakUp","electricityMultiplier","statutoryGovtCharges","constructionRateForVAT","landCost","superBuiltUpArea","parseFloat","basicUnitCost","floorRaiseCharge","plcCharge","totalBasicRatepsft","total","agreementValue","infrastructureValue","clubHouseCharges","otherCharges","advanceMaintainence","generatorBackup","builderCharges","serviceTax","vat","labourCess","electricityCharges","stampDuty","stampPaperCharges","legalCharges","otherStatutoryCharges","totalAllInclusive","ordinal_suffix_of","_validFileExtensions","filevalidation","arrInputs","oInput","sFileName","blnValid","sCurExtension","isPublic","userProfile","privacyTermsMore","hasPasswordSet","hasPasswordSetReqCompleted","city","emailVerified","backBtnNeeded","isPublicProfileSelectYes","isPublicProfileSelectNo","progress","score","issues","twitter","linkedin","employerTakeHome","percent","showFileTemplate","showHideFileDlg","ses","show","cate","localHasPasswordSet","ele","hideSaveBtn","showSaveBtn","num","linkWithGoogle","linkWithTwitter","linkWithFacebook","connectWithLinkedIn","arguments","fileUploadDlgTemplate","sesCate","p1","p2","uploading","fileObj","fileObjPrevious","dlgTitle","existingFile","isStep","isNotStep","validFileExtensions","cropper","cameraOptions","MeteorCamera","getPicture","finalImgData","toDataURL","head","imgFileSize","sizeKB","sizeMB","mimeType","imgQuality","toBlob","blob","File","cat","regex","isIE","FileReader","reader","onload","imgData","readAsDataURL","fileUploadArea","isMyBidsPage","parents","fadeOut","loginFormSetPassword","LoginFormSharedHelpers","stopPropagation","password1Input","password2Input","password1","password2","validatedPassword2","loginFormChangePassword","oldPasswordInput","oldPassword","validatedOldPassword","changePassword","myNav","userFilters","check","enabled","dropdownCheckbox","offerRangeVal","startFilters","gDefaultFilters","fetchPrevFilters","userFiltersAuctionId","getPaginationData2D","dimensionNumber","originalPgSplit","validOriginalPgSplit","propertyApplications","PAresperpage","EEresperpage","avgOffer","PA_AvgOffer","offer","dataFull","dataChosen","chosen","globlaAuctionId1","globalAuctionData1","totalChosenCount","retChosen","resultsChosen","dataEmailEnquiries","totalEnquiryCount","EmailEnquiries","paginationNeeded","resultsEnquiries","paginationNeede","dataNonChosen","totalNonChosenCount","resultsNonChosen","userStatic","users","isItNeeded","countActiveFilters","selSatisfiedCount","ref","initFilters","assistanceAlreadyRequested","assistanceRequested","toggle","bidList","choosingInProgress","unChoosingInProgress","canAfford","salary","classBidList","chosenBids","confirm","inviteForViewing","today","tomorrow","setDate","getDate","setMinutes","setSeconds","getHours","setHours","inviteDate","d","am","df","getMonth","getFullYear","getMinutes","emailEnquiryList","inviteInProgress","inviteDateFormated","options","weekday","year","month","day","hour","minute","toLocaleTimeString","inviteMessage","chosenApplicationCount","$target","currentTarget","$inp","idx","not","blur","propertyManage","pdExpanded","enablingPMS","PropertyManage","docs","hasPropFound","tenants","tenIds","history","PM_bidList","PM_propertyList","chosenTenantCount","addTenantDlg","activity_history","loadingMoreText","ActivityHistory","createdAt","decideTemplate","callback","tenant","isViewingHisProfile","isPublicProfile","u1","userFound","userFirstName","tenantList","inviteToApply","myAdvertisements","selectedAdvertisements","Agents","EmailRequests","before","insert","update","fieldNames","modifier","$set","propertyAlerts","UI","methods","updateReferenceFile","setObj","updateMobile","newMobile","updateEmployerName","newEmp","String","updateEmployerTakeHome","MAX_VALUE","sendOTP","Match","Any","isLoggedOn","isMobileVerified","newOTP","userEmail","otp","subject","mailTo","OPTsmsText","APIURL","HTTP","$currentDate","$type","verifyOTP","OTPValue","OTPSentOn","diffMs","diffMins","randomString","chars","mask","addProperty","getA","isImported","importData","bne","bnt","docId","pushUnique","eles","lenght","publish","terms","parameters","queryConstructor","fail","ReactiveAggregate","$match","$group","$avg","clientCollection","pg","propertyIds","bids","mainProperty","relatedPropsTmp","maxRel","relPropIds","relAuctionIds","transformMyActiveAdvertisements","subHandle","observeChanges","added","changed","removed","onStop","stop","emailEnquiries","userIds","advertisementId","validationSuccess","invalidAgent","auctionIDTmp","invalidAgentProp","c4","c5","paramReceived","recentBlogsTmp","relBlogIds","maxRecent","wpId","SAGenerateSlugsForMissingProperties","auctionCode","SAdeactivateAuction","auctionHistory","deactivatedOn","bidCount","auctionBidProfit","FixAddRentToProperty","AddBedCountToAllProperty","AddMonthlyRentOnAuctionProperty","FixRentDataTypeOnAuctionProperty","addActivityHistory","unblock","userIdPassed","EMAIL_CONFIG","settings","SUPPORT_DATA","requestEmail","mailData","requestType","frequency","scheduledDate","moment","add","toDate","sendNotificationEmail","serialMode","process","env","MAIL_URL","SSR","compileTemplate","Assets","getText","renderArr","homepage","isDevelopment","cdnHomepage","CDN","get_cdn_url","support","headers","renderedTemplate","endsWith","to","from","replyTo","Email","send","sendEmail","knowMoreRequestReceived","notifyAdmin","introOfferRequestReceived","sendWelcomeEmailCustom","conf","sendNotificationEmailWithoutSSR","variableData","sendNotificationEmailWithTemplate","emailTemplates","siteName","companyName","NO_REPLY","resetPassword","activationLink","verifyEmail","importPost","cheerio","require","http","load","addManageProperty","placeBid","biduser","emailEnquiry","bidData","agent","profit","oldProfit","$inc","propertyImage","titleText","propertyURL","application","project","agentName","agentEmail","bedsCount","offerFormated","rentFormated","smsText","getDateFromServer","updateViews","withdrawBid","sendInviteForViewingEmail","invitedDate","sendInviteToApplyEmail","advertisements","tenantId","advertisementCount","archiveProperty","tmpP","advertiseFormActive","allowedLease","allowedRentType","currency","allowedCurrencies","startOf","adDoc","updateGalleries","galleries","updateGalleriesInUserProfile","addAuction","activated","addAdvertisement","pid","TokenGen","auc","chooseWinning","formattedBid","chosenOn","unshift","unChooseWinning","found","markChosen","unMarkChosen","deactivateAuction","deactivateAuctionMulti","propIds","successCount","deactivatedProps","tableHtml","deactivatedProp","emailProcessors","SyncedCron","schedule","parser","job","emailEnquiryReceived","Development","deactivateProps","cleanText","decodeHTMLEntities","entities","stripHTML","onlyUnique","chunkifyObj","newRet","list","desktopHideClassName","emailEnquiryId","userEmailList","maxPropertiesPerEmail","req","listOfInvalidReqsToArchive","listOfReqsToArchive","listOfReqsToArchiveTmp","emailReq","emailRequests","landlordNames","propertyKeys","isFirstProperty","agentNames","firstProperty","firstAuction","enquiryCount","isSingleEnquiry","multi","dailyPropAlerts","yesterday","uniqueCounties","tmp2","propTitle","propBedNBath","propRent","propLink","countyName","propLinesDesktop","propLinesMobile","countyGroupInfo","reminderUploadReferences","missingReferences","firstPropAddress","propertyUrl","importBlogs","isUpdating","insertedListLinks","updatedListLink","newBlog","newBlogRelated","fromDB","date1","date2","insertNewCount","updateCount","statusCode","modified","rendered","imgHTML","srcImg","srcImage","sticky","categories","jetpack_featured_media_url","img","date2daysbefore","propsToDeactivate","propsCheckedIds","request","getUserProfileScore","bodyParser","validateEmail","stripedhtml","Picker","middleware","json","urlencoded","extended","next","method","writeHead","end","bindEnvironment","processEmail","enq","propKey","recipient","existingEnquiry","ec","ac","subHeading","propertyEmail","enquiry","propertyApplicationsUrl","deny","onCreateUser","profile_image_url_https","screenName","google","given_name","family_name","pictureUrl","firstName","lastName","validateNewUser","t2","formatArray","con","outStr","after","toUpdate","others","clientUserId","newPassword","setPassword","isSocialAccount","findUserByEmail","social","sitemaps","changefreq","priority","isProduction","setDeferScriptLoading","timeInMillis","setPageCacheTimeout","replaceAll","search","replacement","_hijackWrite","originalWrite","write","chunk","encoding","iInjected","WebApp","connectHandlers","use","_parsedUrl","pathname","protocol","Location","host","apply","config","allow","secret","bucket","region","lim","validKeys","viewFunction","public","CDN_ENABLED","addLangLink","arr_elms","removeChild","hreflang","linkInfo","addLink"],"mappings":"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G;;AAE3B,MAAG2B,WAAW,IAAE,CAAhB,EAAkB;AACdviD,WAAO,CAACC,GAAR,CAAY,wBAAZ;AACH;AAEJ,CA1CD;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASqjD,mBAAT,CAA8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","file":"/app.js","sourcesContent":["import React from 'react';\nimport { Meteor } from 'meteor/meteor';\nimport { render } from 'react-dom';\nimport { mount } from 'react-mounter';\n\nif(Meteor.isClient)Session.set('subscriptionsReady',false);\n\n\n// Search 1000s of houses, apartments & properties for sale and to rent from all leading estate agents\n//SpotMyCrib helps you find your dream house in the easiest way possible. You get to set your rent when you apply for the house, apartment or property online with leading estate agents/landlords in Ireland. Experience the safest, transparent and innovative rental process in Ireland.\ngeneralDesc = \"Find your dream house in the easiest way possible. Set your rent when you apply for the house, apartment or property online with leading estate agents/landlords in Ireland. Experience the safest, transparent and innovative rental process in Ireland. SpotMyCrib.\";\n\nFlowRouter.route('/', {\n    name: \"home\",\n    action() {\n        if (Meteor.isClient) BlazeLayout.reset()\n        import Home from '../imports/reactui/pages/Home.jsx';\n        clearMeta();\n        DocHead.setTitle('SpotMyCrib - Safe and easy rentals');\n        DocHead.addMeta({name: \"description\", content: generalDesc} );\n\n        mount(Home, {content: 'test'});\n    }\n});\nFlowRouter.route('/rent/:slug/:key', {\n    name: 'rent',\n    action(params, queryParams) {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        import LettingDetail from '../imports/reactui/pages/LettingDetail.jsx';\n        mount(LettingDetail);\n\n    }\n});\nFlowRouter.route('/blog/:pageno?', {\n    name: 'bloghome',\n    action(params, queryParams) {\n        if (Meteor.isClient) BlazeLayout.reset()\n        import BlogHome from '../imports/reactui/pages/BlogHome.jsx';\n        clearMeta();\n        DocHead.setTitle('Blog - SpotMyCrib - Property renting tips, management and much more');\n        DocHead.addMeta({name: \"description\", content: \"Browse through the latest property news, renting tips, management and much more.\"} );\n\n        mount(BlogHome);\n    }\n});\nFlowRouter.route('/article/:slug', {\n    name: 'blogdetail',\n    action(params, queryParams) {\n        if (Meteor.isClient) BlazeLayout.reset()\n        import BlogDetail from '../imports/reactui/pages/BlogDetail.jsx';\n        mount(BlogDetail);\n    }\n});\nFlowRouter.route('/letting/:key', {\n    name: 'letting',\n    action(params, queryParams) {\n        if (Meteor.isClient) BlazeLayout.reset()\n        import LettingDetail from '../imports/reactui/pages/LettingDetail.jsx';\n        mount(LettingDetail);\n\n    }\n});\nFlowRouter.route('/advertisewithus/:pageno?', {\n    name: \"advertisewithus\",\n    action(params, queryParams) {\n        var curStep = parseInt(params.pageno); if(!curStep)curStep=1;\n\n        clearMeta();\n        var title = \"Advertise with us\";\n        if(curStep==2)title +=' (step 2 of 3)'\n        if(curStep==3)title +=' (step 3 of 3)'\n        DocHead.setTitle(title+' | SpotMyCrib');\n        var description = 'List your property to rent in SpotMyCrib. Let thousands of verified tenants apply for your letting. Choose if you are a landlord, agent or the current tenant looking for a replacement so you can move.';\n        DocHead.addMeta({name: \"description\", content: description} );\n\n        let curStepComponent = 'AwsStep1';\n        switch(curStep){\n            case 1://advertiseWithUsFormDelayedRan1st = false;\n                curStepComponent = 'AwsStep1';break;\n            case 2:curStepComponent =  'AwsStep2';break;\n            case 3:curStepComponent =  'AwsStep3';break;\n        }\n        if (Meteor.isClient) BlazeLayout.reset()\n        import AdvertiseWithUs from '../imports/reactui/pages/AdvertiseWithUs.jsx';\n        mount(AdvertiseWithUs, {curStepComponent: curStepComponent});\n    }\n});\nFlowRouter.route('/b/:slug/:pageno?', {\n    name: \"b\",\n    action(params, queryParams) {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        if(!params.slug || params.slug.indexOf('-in-')==-1){\n            var prevRoute = {name: 'home',args:{scrollTo:0} }\n            if(Meteor.isClient)Session.set('prevRoute',prevRoute);\n            FlowRouter.go('pagenotfound');\n            return;\n        }\n\n        import HousesForrent from '../imports/reactui/pages/HousesForrent.jsx';\n        mount(HousesForrent);\n    }\n});\nFlowRouter.route('/joinnow', {\n    name: 'joinnow',\n    action () {\n        if(Meteor.isServer)return;\n        if(Meteor.isClient) {\n            import '../imports/ui/layout/layout.js'\n\n            clearMeta();\n            DocHead.setTitle('Join Now | SpotMyCrib');\n            var description = 'Login to your account or create an account in SpotMyCrib to apply for a letting, update your references and social profiles.';\n            DocHead.addMeta({name: \"description\", content: description} );\n\n            mount(() => (<span></span>));\n            BlazeLayout.render('reactLayout', { templateName: 'loginPageHorizontal' });\n        }\n        // BlazeLayout.render('loading');\n\n    }\n});\nFlowRouter.route('/joinnow-landlord', {\n    name: 'joinnowlandlord',\n    action () {\n        if(Meteor.isServer)return;\n        if(Meteor.isClient) {\n            import '../imports/ui/layout/layout.js'\n            clearMeta();\n            DocHead.setTitle('Landlord Join Now | SpotMyCrib');\n            var description = 'Login to your account or create an account in SpotMyCrib to manage your lettings and advertise your property.';\n            DocHead.addMeta({name: \"description\", content: description} );\n\n            mount(() => (<span></span>));\n            BlazeLayout.render('reactLayout', { templateName: 'loginPageHorizontal',dataContext :{isLandlordMode:true} });\n        }\n        // BlazeLayout.render('loading');\n\n    }\n});\nvar accountRoutes = FlowRouter.group({\n    prefix: '/account',\n    name: 'account',\n    triggersEnter: [function(context, redirect) {\n        // console.log('running account group triggers');\n    }]\n});\naccountRoutes.route('/myproperies/:pageno?', {\n    name: 'account/myProperties',\n    action () {\n        if(Meteor.isServer)return;\n        if(Meteor.isClient) {\n            import '../imports/ui/layout/layout.js'\n            clearMeta();\n            DocHead.setTitle('My properties | SpotMyCrib Admin');\n            DocHead.addMeta({name: \"description\", content: \"View list of your properties, activate them, print their keys, view their applications, etc.\"} );\n\n            import '../imports/ui/templates/myProperties.js';\n            mount(() => (<span></span>));\n            BlazeLayout.render('reactLayout', { templateName: 'myProperties' });\n        }\n\n    }\n});\naccountRoutes.route('/editproperty/:id', {\n    name: 'account/editproperty',\n    action () {\n        if(Meteor.isServer)return;\n        if(Meteor.isClient) {\n            import '../imports/ui/layout/layout.js'\n\n            import '../imports/ui/templates/editProperty.js';\n            mount(() => (<span></span>));\n            BlazeLayout.render('reactLayout', { templateName: 'editProperty' });\n        }\n\n    }\n});\naccountRoutes.route('/propertyapplications/:id/:pageno?', {\n    name: 'account/propertyApplications',\n    action () {\n        if(Meteor.isServer)return;\n        if(Meteor.isClient) {\n            import '../imports/ui/layout/layout.js'\n\n            import '../imports/ui/templates/propertyApplications.js';\n            mount(() => (<span></span>));\n            BlazeLayout.render('reactLayout', { templateName: 'propertyApplications' });\n        }\n\n    }\n});\naccountRoutes.route('/manageproperty/:id/:pageno?', {\n    name: 'account/propertyManage',\n    action () {\n        if(Meteor.isServer)return;\n        if(Meteor.isClient) {\n            import '../imports/ui/layout/layout.js'\n\n            import '../imports/ui/templates/propertyManage.js';\n            mount(() => (<span></span>));\n            BlazeLayout.render('reactLayout', { templateName: 'propertyManage' });\n        }\n\n    }\n});\naccountRoutes.route('/profile', {\n    name: 'account/profile',\n    action () {\n        if(Meteor.isServer)return;\n        if(Meteor.isClient) {\n            import '../imports/ui/layout/layout.js'\n\n            import '../imports/ui/templates/profile.js';\n            mount(() => (<span></span>));\n            BlazeLayout.render('reactLayout', { templateName: 'profile' });\n        }\n\n    }\n});\nFlowRouter.route('/lettingprintview/:key', {\n    name: 'lettingprintview',\n    action () {\n        if(Meteor.isServer)return;\n        if(Meteor.isClient) {\n            import '../imports/ui/layout/layout.js'\n\n            import '../imports/ui/templates/lettingprintview.js';\n            mount(() => (<span></span>));\n            BlazeLayout.render('reactPlainLayout', { templateName: 'lettingprintview' });\n        }\n    }\n});\nFlowRouter.route('/tenant/:username', {\n    name: 'tenant',\n    action () {\n        if(Meteor.isServer)return;\n        if(Meteor.isClient) {\n            import '../imports/ui/layout/layout.js'\n\n            import '../imports/ui/templates/tenant.js';\n            mount(() => (<span></span>));\n            BlazeLayout.render('reactLayout', { templateName: 'tenant' });\n        }\n\n    }\n});\nFlowRouter.route('/tenants/:pageno?', {\n    name: 'tenants',\n    action () {\n        if(Meteor.isServer)return;\n        if(Meteor.isClient) {\n            import '../imports/ui/layout/layout.js'\n\n            DocHead.setTitle('Tenant database | SpotMyCrib');\n            var description = 'View list of interested tenant profiles, their references and social profiles. Invite them to apply for your letting advertisement.';\n            DocHead.addMeta({name: \"description\", content: description} );\n\n            import '../imports/ui/templates/tenants.js';\n            mount(() => (<span></span>));\n            BlazeLayout.render('reactLayout', { templateName: 'tenants' });\n        }\n\n    }\n});\nFlowRouter.notFound = {\n    triggersEnter: [function(context, redirect) {\n        redirect('/notFound');\n    }],\n    action: function() {\n        console.log('Route not found')\n    }\n};\nFlowRouter.route('/notFound', {\n    name: 'notFound',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        clearMeta();\n        DocHead.setTitle('Page Not Found | SpotMyCrib');\n        DocHead.addMeta({name: \"description\", content: 'Could not find the page your are looking for, it might be removed. Please try again.'} );\n\n        import NotFound from '../imports/reactui/layout/NotFound.jsx';\n        mount(NotFound);\n    }\n});\nFlowRouter.route('/about', {\n    name: 'about',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        setStaticPageMetaTags('about')\n        import About from '../imports/reactui/static/About.jsx';\n        mount(About);\n    }\n});\nFlowRouter.route('/careers', {\n    name: 'careers',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        setStaticPageMetaTags('careers')\n        import Careers from '../imports/reactui/static/Careers.jsx';\n        mount(Careers);\n    }\n});\nFlowRouter.route('/contactus', {\n    name: 'contactus',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        setStaticPageMetaTags('contactus')\n        import ContactUs from '../imports/reactui/static/ContactUs.jsx';\n        mount(ContactUs);\n    }\n});\nFlowRouter.route('/cookiepolicy', {\n    name: 'cookiepolicy',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        setStaticPageMetaTags('cookiepolicy')\n        import CookiePolicy from '../imports/reactui/static/CookiePolicy.jsx';\n        mount(CookiePolicy);\n    }\n});\nFlowRouter.route('/faqs', {\n    name: 'faqs',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        setStaticPageMetaTags('faqs')\n        import Faqs from '../imports/reactui/static/Faqs.jsx';\n        mount(Faqs);\n    }\n});\nFlowRouter.route('/gdpr', {\n    name: 'gdpr',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        setStaticPageMetaTags('gdpr')\n        import Gdpr from '../imports/reactui/static/Gdpr.jsx';\n        mount(Gdpr);\n    }\n});\nFlowRouter.route('/howitworks', {\n    name: 'howitworks',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        setStaticPageMetaTags('howitworks')\n        import HowItWorks from '../imports/reactui/static/HowItWorks.jsx';\n        mount(HowItWorks);\n    }\n});\nFlowRouter.route('/privacy', {\n    name: 'privacy',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        setStaticPageMetaTags('privacy')\n        import Privacy from '../imports/reactui/static/Privacy.jsx';\n        mount(Privacy);\n    }\n});\nFlowRouter.route('/terms', {\n    name: 'terms',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        setStaticPageMetaTags('terms')\n        import Terms from '../imports/reactui/static/Terms.jsx';\n        mount(Terms);\n    }\n});\nFlowRouter.route('/estateagent', {\n    name: 'estateagent',\n    action () {\n        if (Meteor.isClient) BlazeLayout.reset()\n\n        setStaticPageMetaTags('estateagent')\n        import EstateAgent from '../imports/reactui/static/EstateAgent.jsx';\n        mount(EstateAgent);\n    }\n});\n\n\ngeneralDesc = \"Find your dream house in the easiest way possible. Set your rent when you apply for the house, apartment or property online with leading estate agents/landlords in Ireland. Experience the safest, transparent and innovative rental process in Ireland. SpotMyCrib.\";\nfunction setStaticPageMetaTags(pageName){\n    var title = '',desc = '';\n    switch(pageName){\n        case 'about':\n            title = 'About SpotMyCrib'\n            desc = \"Know more about SpotMyCrib and what inspires us to build the safest, transparent and innovative rental portal in Ireland. Learn more on how we operate and our values. Experience SpotMyCrib.\";\n            break;\n        case 'terms':\n            title = 'Terms of Service | SpotMyCrib'\n            desc = 'Read our terms and conditions and learn more on how we operate and our values.';\n            break;\n        case 'faqs':\n            title = 'FAQs | SpotMyCrib'\n            desc = 'Frequently asked questions by tenants(users) and landlords/estate agents.';\n            break;\n        case 'privacy':\n            title = 'Privacy policy | SpotMyCrib'\n            desc = 'Find how we keep your data safe and secure. Read our cookie policy and much more on our privacy policy.';\n            break;\n        case 'contactus':\n            title = 'Contact Us | SpotMyCrib'\n            desc = 'Find our contact details and work timings here.';\n            break;\n        case 'howitworks':\n            title = 'How it works | SpotMyCrib'\n            desc = 'Find your next dream home fast, easy and simple way.';\n            break;\n        case 'careers':\n            title = 'Careers | SpotMyCrib'\n            desc = 'We are hiring! Work in the most innovative online real estate company. ';\n            // import '../static/careers.js';\n            break;\n        case 'estateagent':\n            title = 'Agents/Landlords | SpotMyCrib'\n            desc = 'Learn on why you need next generation high tech automated property managment solution. Learn how SpotMyCrib can ease your life with tenant screening, digital leasing, online rent collection and much more. ';\n            // import '../static/careers.js';\n            break;\n        case 'gdpr':\n            title = 'Data Protection / EU GDPR | SpotMyCrib'\n            desc = 'An overview of Data Protection and EU GDPR and how we are preparing for it at SpotMyCrib.';\n            break;\n        case 'cookiepolicy':\n            title = 'Cookie Policy | SpotMyCrib'\n            desc = 'An overview of our cookie policy and how we use them to provide you with best user experence.';\n            break;\n        default:\n    }\n    clearMeta();\n    DocHead.setTitle(title);\n    DocHead.addMeta({name: \"description\", content: desc} );\n\n    ////////////Adding below code only for static\n    if(Meteor.isClient) {\n        setTimeout(function(){\n            try {\n                jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n            } catch (e) {\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\n            }\n        },2000)\n    }\n}\n// FlowRouter.triggers.enter([function(){\n//\n// }]);\n\n// FlowRouter.go('account/propertyApplications')\n// tesing my properties from anonomoues tab to see if login works and if pubs work fine,\n//     also if post login , will it automatically update pubs?\n//     use ctrl+m to see the records returned by pubs\n//FlowRouter.current().route.getName()  to FlowRouter.current().route.name\n//Router to FlowRouter\n// 1. all routes conversion\n// 2. new react header and footer used in home page needs to work\n// 3. react ssr work\n// 4. performance tuning for pages that are using ssr\n// 5. category pages\n//\n\n// FlowRouter.route(\"/\", {\n//   subscriptions: function() {\n//     var selector = {category: {$ne: \"private\"}};\n//     this.register('posts', Meteor.subscribe('posts', selector));\n//   },\n//   action: function() {\n//     ReactLayout.render(BlogLayout, {\n//       content: <PostList />\n//     });\n//   }\n// });\n\n\n// if(Meteor.isServer) {\n//     WebApp.connectHandlers.use('/', function(req, res, next) {\n//         if(isValidRoute(req.url))\n//             return next();\n//\n//         res.writeHead(404);\n//         res.end(SSR.render('404'));\n//     });\n//\n//     var pathToRegexp = Meteor.npmRequire('path-to-regexp')\n//\n//     function isValidRoute(requestUrl) {\n//         for(var i = 0; i < FlowRouter._routes.length; i++)\n//             if(pathToRegexp(FlowRouter._routes[i].path).test(requestUrl))\n//                 return true;\n//\n//         return false;\n//     }\n// }","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport { withTracker } from 'meteor/react-meteor-data';\nimport {LoginFormMessages,SocialLoginButtonsT} from \"./MainLayoutHeader\";\n\nexport class LoginFormSignInView extends Component{\n  constructor(props){\n      super(props);\n      if(!props.onPage)props.onPage=false;\n      this.state = {\n          isLoading:true,\n          formMessages:{\n              errors:[]\n          }\n      }\n      // this.forgotPwdHandler = this.forgotPwdHandler.bind(this)\n      this.signInHandler = this.signInHandler.bind(this)\n      // this.signUpHandler = this.signUpHandler.bind(this)\n  }\n  componentDidMount(){\n      $('#signin-div').find('#email').focus();\n      $('.new-focus').click(function(){\n          $('#signin-div').find('#email').focus();\n      });\n      this.setState({isLoading:false})\n  }\n    signInHandler(event){\n        event.preventDefault();\n\n        let usernameInput = $(\".login-input-email-LoginFormSignInView\");\n        let passwordInput = $(\".login-input-password-LoginFormSignInView\");\n\n        let username = usernameInput.val().trim();\n        let password = passwordInput.val().trim();\n\n        let validatedEmail = LoginFormValidation.email(username);\n        let validatedPassword = LoginFormValidation.password(password, {validationLevel: \"exists\"});\n\n        var errors = []\n\n        this.setState({formMessages:{}})\n        this.setState({isLoading:true})\n\n        if (validatedEmail !== true) {\n            errors.push(validatedEmail);\n        }\n\n        if (validatedPassword !== true) {\n            errors.push(validatedPassword);\n        }\n\n        if (errors.length) {\n            this.setState({formMessages:{errors: errors}})\n            this.setState({isLoading:false})\n            return;\n        }\n\n        this.loginCallBack = (error) => {\n            fbq('track', 'EmailUserLogin'+ (error ? \"Failed\" : \"Successful\"));\n            ga('send', 'event', 'General', 'userLoginSignup', 'Email Login '+ (error ? \"Failed\" : \"Successful\"));\n\n            this.setState({isLoading:false})\n            if (error) {\n                console.log(error)\n                if(error.reason=='User has no password set' || error.reason=='User not found'){\n                    this.isSocialAccountCallback = function (err1,result) {\n                        if(err1) this.setState({formMessages:{errors: [err1]}})\n                        else this.setState({formMessages:{info: [result]}})\n                    }\n                    this.isSocialAccountCallback = this.isSocialAccountCallback.bind(this);\n                    Meteor.call('isSocialAccount',username,this.isSocialAccountCallback)\n                }\n\n                // Show some error messages above the form fields\n                this.setState({formMessages:{errors: [error]}})\n            } else {\n                var isOnPage = false;\n\n                if(this.props.onPage)isOnPage = true;\n\n                if( !isOnPage ){\n                    $('#signin-div , .fancybox-overlay').hide()\n                    Session.set('showLoginDialog',false)\n                    Session.set('showSignupDialog',false)\n                    Session.set('showLoginSignupFancyBoxDialog',false)\n                }\n                Session.set('loginFlowComplete', true)\n                Session.set('loginFlowStart',undefined)\n                delete Session.keys.loginFlowStart\n                Meteor.call(\"userLoggedIn\");\n            }\n        }\n        this.loginCallBack = this.loginCallBack.bind(this)\n        Meteor.loginWithPassword(username, password, this.loginCallBack);\n    }\n    // signUpHandler(){\n    //     Session.set('showForgotForm',false)\n    //     Session.set('showSignupForm',true)\n    //     Session.set('showLoginSignupFancyBoxDialog',true)\n    //     Session.set('showLoginDialog',true)\n    // }\n    // forgotPwdHandler(){\n    //     var isOnPage = false;\n    //     if(this.props.onPage)isOnPage = true;\n    //     if( !isOnPage ){\n    //         Session.set('showForgotForm',true)\n    //         Session.set('showSignupForm',false)\n    //         Session.set('showLoginSignupFancyBoxDialog',true)\n    //         Session.set('showLoginDialog',true)\n    //     }else{\n    //         Session.set('showForgotForm',true)\n    //     }\n    // }\n  render(){\n      return (\n<div>\n    <div className=\"refund-div\"><h2>Sign In {this.props.loginFromApplyNowBtn ? \"Required\":\"\"}</h2></div>\n    {this.props.loginFromApplyNowBtn ? (\n        <p className={\"color-text info-msg-text\"}>Login is required to apply for this property. Quickly use the options below to Login or Create yourself an account.</p>\n    ):\"\"}\n    <div className=\"profile-text\" style={{paddingTop:'20px'}}>\n        {this.props.onPage ? \"\" : (\n            <div>\n                <SocialLoginButtonsT buttonFor='login' usedInDlg={true}/>\n                <div className=\"seperator\" style={{margin: '0 0 30px 0px'}}><span></span></div>\n            </div>\n        )}\n\n        <h5>Enter your email and password below</h5>\n\n        <form className=\"signin-form\">\n            <div className=\"form-border\">\n\n                <div className={\"styled-input  \"+ (this.state.formMessages.errors ? this.state.formMessages.errors.email ? \"has-error has-feedback\" : \"\" : \"\") }>\n                    <input autoComplete=\"email\" type=\"email\" name=\"email\" required htmlFor=\"email-loginFormSignInView\"\n                           className=\"login-input-email-LoginFormSignInView\"/>\n                    <label htmlFor=\"email-loginFormSignInView\">EMAIL ID</label>\n                    <span></span>\n                </div>\n\n                <div className={\"styled-input underline \"+ (this.state.formMessages.errors ? this.state.formMessages.errors.password ? \"has-error has-feedback\" : \"\" : \"\") }>\n                    <input autoComplete=\"current-password\" type=\"password\" name=\"password\"\n                           className=\"login-input-password-LoginFormSignInView\" required htmlFor=\"password-loginFormSignInView\"/>\n                    <label htmlFor=\"password-loginFormSignInView\">PASSWORD</label>\n                    <span></span>\n                </div>\n\n\n            </div>\n            <LoginFormMessages messages={this.state.formMessages} />\n\n            <div className=\"signup-btn\">\n                {this.state.isLoading ? (\n                    <button className=\"transparent-btn btns\">Loading...</button>\n                ):(\n                    <button className=\"blue-btn btns\" type=\"submit\" data-event-action=\"submitSignInForm\" onClick={this.signInHandler}>SIGN IN</button>\n                )}\n                <h5 data-event-action=\"forgotPassword\" onClick={this.props.showForgotFormHandler}>Forgot password?</h5>\n                {this.props.onPage ? \"\" : (\n                    <h6>Not registered? <span style={{color: '#0c68a7'}} data-event-action=\"signUp\"  onClick={this.props.showSignupFormHandler}>Sign Up now</span></h6>\n                )}\n            </div>\n\n        </form>\n    </div>\n</div>\n      )\n  }\n};\n\nexport class LoginFormSignUpView extends Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            isLoading:true,\n            formMessages:{\n                errors:[]\n            }\n        }\n        this.forgotPwdHandler = this.forgotPwdHandler.bind(this)\n        // this.signInHandler = this.signInHandler.bind(this)\n        this.signUpHandler = this.signUpHandler.bind(this)\n    }\n    componentDidMount(){\n        $(\".SignupFormMobileField\").intlTelInput({\n            preferredCountries:[\"ie\",\"gb\",'in']\n        });\n\n        $('#signin-div').find('#name').focus();\n        $('.new-focus').click(function(){\n            $('#signin-div').find('#name').focus();\n        });\n        this.setState({isLoading:false})\n    }\n    // signInHandler(){\n    //     Session.set('showForgotForm',false)\n    //     Session.set('showSignupForm',false)\n    //     Session.set('showLoginSignupFancyBoxDialog',true)\n    //     Session.set('showLoginDialog',true)\n    // }\n    signUpHandler(event){\n        event.preventDefault();\n\n        // var usernameInput = $(\".login-input--username\");\n        let emailInput = $(\".login-input-email-LoginFormSignUpView\");\n        let passwordInput = $(\".login-input-password-LoginFormSignUpView\");\n        let fullNameInput = $(\".login-input-fullName-LoginFormSignUpView\");\n        let mobileInput = $(\".login-input-mobile-LoginFormSignUpView\");\n\n        let email = emailInput.val().trim();\n        let password = passwordInput.val().trim();\n        let fullName = fullNameInput.val().trim();\n        let mobile = mobileInput.val().trim();\n\n        let validatedEmail = LoginFormValidation.email(email);\n        let validatedFullName = LoginFormValidation.username(fullName);\n        let validatedPassword = LoginFormValidation.password(password, {validationLevel: \"length\"});\n        let validatedMobile = LoginFormValidation.mobile(mobile);\n\n        var errors = []\n\n        this.setState({formMessages:{}})\n        this.setState({isLoading:true})\n\n\n        if (validatedEmail !== true) {\n            errors.push(validatedEmail);\n        }\n\n        if (validatedFullName !== true) {\n            errors.push(validatedFullName);\n        }\n\n        if (validatedMobile !== true) {\n            errors.push(validatedMobile);\n        }\n\n        if (validatedPassword !== true) {\n            errors.push(validatedPassword);\n        }\n\n        if (errors.length) {\n            this.setState({formMessages:{errors: errors}})\n            this.setState({isLoading:false})\n            return;\n        }\n\n        let newUserData = {\n            // username: username,\n            email: email,\n            password: password,\n            profile:{\n                name:fullName,\n                email: email,\n                mobile:mobile\n            }\n        };\n        this.createUserCallback = function (error, result) {\n            fbq('track', 'EmailUserSignup'+ (error ? \"Failed\" : \"Successful\"));\n            ga('send', 'event', 'General', 'userLoginSignup', 'Email Signup '+ (error ? \"Failed\" : \"Successful\"));\n\n            this.setState({isLoading:false})\n            if (error) {\n                // Show some error message\n                this.setState({formMessages:{errors: [error]}})\n            } else {\n                var isOnPage = false;\n                if(this.props.onPage)isOnPage = true;\n                if( !isOnPage ){\n                    $('#signin-div , .fancybox-overlay').hide()\n                    Session.set('showLoginDialog',false)\n                    Session.set('showSignupDialog',false)\n                    Session.set('showLoginSignupFancyBoxDialog',false)\n                }\n\n                Session.set('loginFlowComplete', true)\n                Session.set('loginFlowStart',undefined)\n                delete Session.keys.loginFlowStart\n            }\n        }\n        this.createUserCallback = this.createUserCallback.bind(this);\n        Accounts.createUser(newUserData, this.createUserCallback);\n    }\n    forgotPwdHandler(){\n        var isOnPage = false;\n        if(this.props.onPage)isOnPage = true;\n        if( !isOnPage ){\n            Session.set('showForgotForm',true)\n            Session.set('showSignupForm',false)\n            Session.set('showLoginSignupFancyBoxDialog',true)\n            Session.set('showLoginDialog',true)\n        }else{\n            Session.set('showForgotForm',true)\n        }\n    }\n    render(){\n        return (\n            <div>\n                <div className=\"refund-div\"><h2>Sign Up {this.props.loginFromApplyNowBtn ? \"Required\":\"\"}</h2></div>\n                {this.props.loginFromApplyNowBtn ? (\n                    <p className={\"color-text info-msg-text\"}>Login is required to apply for this property. Quickly use the options below to Login or Create yourself an account.</p>\n                ):\"\"}\n                <div className=\"profile-text\" style={{paddingTop:'20px'}}>\n                    {this.props.onPage ? \"\" : (\n                        <div>\n                            <SocialLoginButtonsT buttonFor='signup' usedInDlg={true}/>\n                            <div className=\"seperator\" style={{margin: '0 0 30px 0px'}}><span></span></div>\n                        </div>\n                    )}\n\n                    <h5>Enter your details below</h5>\n                    <form className=\"signin-form\">\n                        <div className=\"form-border\">\n\n                            <div className=\"styled-input\">\n                                <input autoComplete=\"name\" className=\"login-input-fullName-LoginFormSignUpView\" type=\"text\" name=\"name\"\n                                       required htmlFor=\"email-loginFormSignUpView\"/><br/>\n                                <label htmlFor=\"email-loginFormSignUpView\">FULL NAME</label>\n                                <span></span>\n                            </div>\n\n                            <div className=\"styled-input\">\n                                <input autoComplete=\"email\" className=\"login-input-email-LoginFormSignUpView\" type=\"email\" name=\"email\"\n                                       required htmlFor=\"email-loginFormSignUpView\"/>\n                                <label htmlFor=\"email-loginFormSignUpView\">EMAIL ID</label>\n                                <span></span>\n                            </div>\n\n                            <div className=\"styled-input\">\n                                <input autoComplete=\"new-password\" className=\"login-input-password-LoginFormSignUpView\" type=\"password\"\n                                       name=\"password\" required htmlFor=\"password-loginFormSignUpView\"/>\n                                <label htmlFor=\"password-loginFormSignUpView\">PASSWORD</label>\n                                <span></span>\n                                {this.state.formMessages.errors ? this.state.formMessages.errors.password ? (\n                                    <span className=\"help-block\">\n                                    {\n                                        this.state.formMessages.errors.password.map(function (p, i) {\n                                            return (<p key={i}>{p.reason}</p>)\n                                        })\n                                    }\n                                    </span>\n                                ) : \"\" : \"\"}\n                            </div>\n\n                            <div className=\"styled-input\">\n                                <input autoComplete=\"tel\" className=\"login-input-mobile-LoginFormSignUpView SignupFormMobileField\"\n                                       type=\"text\" name=\"mobile\" htmlFor=\"mobile-loginFormSignUpView\"/>\n                                <label htmlFor=\"mobile-loginFormSignUpView\">MOBILE</label>\n                                <span></span>\n                            </div>\n\n                        </div>\n                        <LoginFormMessages messages={this.state.formMessages} />\n\n                        <div className=\"signup-btn\">\n                            {this.state.isLoading ? (\n                                <button className=\"transparent-btn btns\">Loading...</button>\n                            ):(\n                                <button className=\"blue-btn btns\" type=\"Submit\" data-event-category=\"accounts\" data-event-action=\"register\"  onClick={this.signUpHandler}>SIGN UP</button>\n                            )}\n                            {this.props.onPage ? \"\" : (\n                                <p>Already have an account? <a href=\"javascript:;\"><span style={{color: '#0c67a6'}} data-event-category=\"accounts\" data-event-action=\"signIn\"  onClick={this.props.showSignInFormHandler}>Sign In</span></a></p>\n                            )}\n                        </div>\n\n                    </form>\n\n                </div>\n            </div>\n        )\n    }\n};\n\nexport class LoginFormSignUpViewLandlord extends Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            isLoading:true,\n            formMessages:{\n                errors:[]\n            }\n        }\n        this.forgotPwdHandler = this.forgotPwdHandler.bind(this)\n        this.signInHandler = this.signInHandler.bind(this)\n        this.signUpHandler = this.signUpHandler.bind(this)\n    }\n    componentDidMount(){\n        $(\".SignupFormMobileField\").intlTelInput({\n            preferredCountries:[\"ie\",\"gb\",'in']\n        });\n\n        $('#signin-div').find('#name').focus();\n        $('.new-focus').click(function(){\n            $('#signin-div').find('#name').focus();\n        });\n        this.setState({isLoading:false})\n    }\n    signInHandler(){\n        Session.set('showForgotForm',false)\n        Session.set('showSignupForm',false)\n        Session.set('showLoginSignupFancyBoxDialog',true)\n        Session.set('showLoginDialog',true)\n    }\n    signUpHandler(event){\n        event.preventDefault();\n\n        // var usernameInput = $(\".login-input--username\");\n        let emailInput = $(\".login-input-email-LoginFormSignUpViewLandlord\");\n        let passwordInput = $(\".login-input-password-LoginFormSignUpViewLandlord\");\n        let fullNameInput = $(\".login-input-fullName-LoginFormSignUpViewLandlord\");\n        let mobileInput = $(\".login-input-mobile-LoginFormSignUpViewLandlord\");\n\n        let email = emailInput.val().trim();\n        let password = passwordInput.val().trim();\n        let fullName = fullNameInput.val().trim();\n        let mobile = mobileInput.val().trim();\n\n        let validatedEmail = LoginFormValidation.email(email);\n        let validatedFullName = LoginFormValidation.username(fullName);\n        let validatedPassword = LoginFormValidation.password(password, {validationLevel: \"length\"});\n        let validatedMobile = LoginFormValidation.mobile(mobile);\n\n        var errors = []\n\n        this.setState({formMessages:{}})\n        this.setState({isLoading:true})\n\n\n        if (validatedEmail !== true) {\n            errors.push(validatedEmail);\n        }\n\n        if (validatedFullName !== true) {\n            errors.push(validatedFullName);\n        }\n\n        if (validatedMobile !== true) {\n            errors.push(validatedMobile);\n        }\n\n        if (validatedPassword !== true) {\n            errors.push(validatedPassword);\n        }\n\n        if (errors.length) {\n            this.setState({formMessages:{errors: errors}})\n            this.setState({isLoading:false})\n            return;\n        }\n\n        let newUserData = {\n            // username: username,\n            email: email,\n            password: password,\n            profile:{\n                name:fullName,\n                email: email,\n                mobile:mobile\n            }\n        };\n        this.createUserCallback = function (error, result) {\n            fbq('track', 'EmailLandlordSignup'+ (error ? \"Failed\" : \"Successful\"));\n            ga('send', 'event', 'General', 'userLoginSignup', 'Email Landlord Signup '+ (error ? \"Failed\" : \"Successful\"));\n\n            this.setState({isLoading:false})\n            if (error) {\n                // Show some error message\n                this.setState({formMessages:{errors: [error]}})\n            } else {\n                var isOnPage = false;\n                if(this.props.onPage)isOnPage = true;\n                if( !isOnPage ){\n                    $('#signin-div , .fancybox-overlay').hide()\n                    Session.set('showLoginDialog',false)\n                    Session.set('showSignupDialog',false)\n                    Session.set('showLoginSignupFancyBoxDialog',false)\n                }\n\n                Session.set('loginFlowComplete', true)\n                Session.set('loginFlowStart',undefined)\n                delete Session.keys.loginFlowStart\n            }\n        }\n        this.createUserCallback = this.createUserCallback.bind(this);\n        Accounts.createUser(newUserData, this.createUserCallback);\n    }\n    forgotPwdHandler(){\n        var isOnPage = false;\n        if(this.props.onPage)isOnPage = true;\n        if( !isOnPage ){\n            Session.set('showForgotForm',true)\n            Session.set('showSignupForm',false)\n            Session.set('showLoginSignupFancyBoxDialog',true)\n            Session.set('showLoginDialog',true)\n        }else{\n            Session.set('showForgotForm',true)\n        }\n    }\n    radioHandler(){\n\n    }\n    render(){\n        return (\n            <div className=\"landlordSignup-div signup-div\">\n\n                <div className=\"refund-div\"><h2>Landlord Join Now</h2></div>\n                <div className=\"profile-text\">\n                    <div className=\"row\">\n                        <div className=\"col-md-12 rd-details\">\n                            <span>I am a</span>\n                            <label className=\"account-type-label\" htmlFor=\"rd1\">\n                                <input className=\"account-type-radio\" name=\"accountType\" value=\"LANDLORD\" type=\"radio\"\n                                       defaultChecked onChange={this.radioHandler}/>\n                                    Landlord\n                            </label>\n                            <label className=\"account-type-label\">\n                                <input className=\"account-type-radio\" name=\"accountType\" value=\"LANDLORD\" type=\"radio\"/>\n                                    Agent\n                            </label>\n                            <label className=\"account-type-label\">\n                                <input className=\"account-type-radio\" name=\"accountType\" value=\"LANDLORD\" type=\"radio\"/>\n                                    Building Manager\n                            </label>\n                            <label className=\"account-type-label\">\n                                <input className=\"account-type-radio\" name=\"accountType\" value=\"LANDLORD\" type=\"radio\"/>\n                                    Tenant\n                            </label>\n                        </div>\n                    </div>\n\n\n                    <form className=\"signin-form\">\n                        <div className=\"form-border\">\n                            <div className=\"row frm-group\">\n                                <div className=\"col-sm-6\">\n                                    <div className=\"styled-input\">\n                                        <input autoComplete=\"name\" type=\"text\" name=\"name\"\n                                               className=\"login-input-fullName-LoginFormSignUpViewLandlord\" required/><br/>\n                                        <label>FULL NAME</label>\n                                        <span></span>\n                                    </div>\n                                </div>\n                                <div className=\"col-sm-6\">\n                                    <div className=\"styled-input\">\n                                        <input autoComplete=\"email\" type=\"email\" name=\"email\"\n                                               className=\"login-input-email-LoginFormSignUpViewLandlord\" required/>\n                                        <label>EMAIL ID</label>\n                                        <span></span>\n                                    </div>\n                                </div>\n\n                                <div className=\"col-sm-6\">\n                                    <div className=\"styled-input\">\n                                        <input autoComplete=\"new-password\" type=\"password\" name=\"password\"\n                                               className=\"login-input-password-LoginFormSignUpViewLandlord\" required/>\n                                        <label>PASSWORD</label>\n                                        <span></span></div>\n                                </div>\n\n                                <div className=\"col-sm-6\">\n                                    <div className=\"styled-input\">\n                                        <input autoComplete=\"tel\" type=\"number\" name=\"mobile\"\n                                               className=\"login-input-mobile-LoginFormSignUpViewLandlord SignupFormMobileField\" required/>\n                                        <label>MOBILE</label>\n                                        <span></span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <LoginFormMessages messages={this.state.formMessages}/>\n\n                        </div>\n                        <div className=\"signup-btn\">\n                            <div className=\"styled-input\">\n                                {this.state.isLoading ? (\n                                    <button className=\"transparent-btn btns\">Loading...</button>\n                                ):(\n                                    <button className=\"blue-btn btns\" type=\"submit\" onClick={this.signUpHandler}>SIGN UP</button>\n                                )}\n                            </div>\n                            {this.props.onPage ? \"\" : (\n                                <p style={{paddingTop: 0}}>Already have an account? <a href=\"javascript:;\"><span style={{color: '#0c67a6'}} data-event-category=\"accounts\" data-event-action=\"signIn\" onClick={this.props.showSignInFormHandler}>Sign In</span></a></p>\n                            )}\n                        </div>\n                    </form>\n\n                </div>\n            </div>\n        )\n    }\n};\n\nexport class LoginFormResetPasswordView extends Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            isLoading:true,\n            showForm:true,\n            formMessages:{\n                errors:[]\n            }\n        }\n        this.forgotPwdHandler = this.forgotPwdHandler.bind(this)\n        // this.signInHandler = this.signInHandler.bind(this)\n        // this.signUpHandler = this.signUpHandler.bind(this)\n        this.tryAgainBtnHandler = this.tryAgainBtnHandler.bind(this)\n    }\n    componentDidMount(){\n        $('#signin-div').find('#email').focus();\n        $('.new-focus').click(function(){\n            $('#signin-div').find('#email').focus();\n        });\n        this.setState({isLoading:false})\n    }\n    // signInHandler(){\n    //     var isOnPage = false;\n    //     if(this.props.onPage)isOnPage = true;\n    //     if( !isOnPage ){\n    //         Session.set('showForgotForm',false)\n    //         Session.set('showSignupForm',false)\n    //         Session.set('showLoginSignupFancyBoxDialog',true)\n    //         Session.set('showLoginDialog',true)\n    //     }else{\n    //         this.props.showSignInFormHandler();\n    //         // Session.set('showForgotForm',false)\n    //     }\n    // }\n    forgotPwdHandler(event){\n        event.preventDefault();\n\n        let emailAddress = $(\".login-input-email-LoginFormResetPasswordView\").val().trim();\n        let validatedEmail = LoginFormValidation.email(emailAddress);\n\n        var errors = []\n\n        this.setState({formMessages:{}})\n        this.setState({isLoading:true})\n\n        if (validatedEmail !== true) {\n            errors.push(validatedEmail);\n        }\n\n        if (errors.length) {\n            this.setState({formMessages:{errors: errors}})\n            this.setState({isLoading:false})\n            return;\n        }\n\n        this.forgotPwdCallback = (error) => {\n            fbq('track', 'ForgotPwd'+ (error ? \"Failed\" : \"Successful\"));\n            ga('send', 'event', 'General', 'userLoginSignup', 'Forgot Password '+ (error ? \"Failed\" : \"Successful\"));\n\n            this.setState({isLoading:false})\n            // Show some message confirming result\n            if (error) {\n                console.log(error)\n                this.setState({formMessages:{errors: [error]}})\n            } else {\n\n                this.setState({showForm:false})\n                this.setState({formMessages:{info: [{\n                            reason:  \"Password reset mail sent.\"\n                        }]\n                }})\n            }\n        };\n        this.forgotPwdCallback = this.forgotPwdCallback.bind(this);\n\n        Accounts.forgotPassword({ email: emailAddress}, this.forgotPwdCallback);\n\n    }\n    tryAgainBtnHandler(){\n        this.state.setState({showForm:true})\n    }\n    contactUsClickHandler(){\n        if($)\n            if($.fancybox)\n                $.fancybox.close();\n    }\n    render(){\n        return (\n            <div>\n                {this.state.showForm ? (\n                    <div>\n                        <div className=\"refund-div\">\n                            <h2>Forgot password?</h2>\n                        </div>\n                        <div className=\"profile-text\">\n                            <h5 className=\"no-capitalize\">Enter your registered Email ID</h5>\n                            <form className=\"signin-form\">\n                                <div className=\"form-border\">\n                                    <div className={\"styled-input  \" + (this.state.formMessages.errors ? this.state.formMessages.errors.email ? \"has-error has-feedback\" : \"\" : \"\")}>\n                                        <input autoComplete=\"email\" type=\"email\" name=\"email\" required\n                                               htmlFor=\"email-LoginFormResetPasswordView\"\n                                               className=\"login-input-email-LoginFormResetPasswordView\"/>\n                                        <label htmlFor=\"email-LoginFormResetPasswordView\">EMAIL ID</label>\n                                        <span></span>\n                                    </div>\n                                    <LoginFormMessages messages={this.state.formMessages}/>\n                                    <div className=\"signup-btn\">\n                                        {this.state.isLoading ? (\n                                            <button className=\"transparent-btn btns\">Loading...</button>\n                                        ) : (\n                                            <button className=\"blue-btn btns\" type=\"submit\" data-event-action=\"accounts\"\n                                                    onClick={this.forgotPwdHandler}>Reset My Password</button>\n                                        )}\n                                        <h6><span style={{color: '#0c68a7'}} data-event-category=\"accounts\"\n                                                  data-event-action=\"signIn\" onClick={this.props.showSignInFormHandler}>Sign In</span>\n                                        </h6>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                ) : (\n                    <div>\n                        <div className=\"refund-div\">\n                            <h2>We just emailed you a link</h2>\n                        </div>\n                        <div className=\"profile-text\">\n                            <h5 className=\"no-capitalize\">Please check your email and click the secure link.</h5>\n                            <div className=\"signup-btn\">\n                                <button className=\"transparent-btn btns tryAgainBtn\"\n                                        onClick={this.tryAgainBtnHandler}>Try again\n                                </button>\n                            </div>\n                            <p></p>\n                            <p className=\"color-text contactusBtn\">If you don’t see our email, check your spam folder\n                                or <a href={FlowRouter.url('contactus')} onClick={this.contactUsClickHandler}>Contact\n                                    us</a></p>\n                        </div>\n                    </div>\n                )}\n        </div>\n        )\n    }\n};","import React, { Component } from 'react';\n\nexport default class MainLayoutFooter extends Component {\n    render() {\n        return (\n            <div>\n            <section className=\"footer-div\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-md-9 col-sm-12 col-xs-12 foot-menu\">\n                            <div className=\"col-md-3 col-sm-3 col-xs-12 foot-logo\">\n                                <a href={FlowRouter.url('home')}><img src={cdnPath(\"/images/spot-my-crib-logo.png\")} height=\"32px\" alt=\"\"/></a>\n                            </div>\n                            <div className=\"col-md-9 col-sm-9 col-xs-12 pad0\">\n                                <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                    <ul>\n                                        <li><h6 className=\"pad-bot-2\">TENANTS</h6></li>\n\n                                        <li><a href={FlowRouter.url('b', {slug:'rent-in-dublin-ireland'})}>Rent in Dublin</a></li>\n                                        <li><a href={FlowRouter.url('b', {slug:'rent-in-cork-ireland'})}>Rent in Cork</a></li>\n                                        <li><a href={FlowRouter.url('b', {slug:'rent-in-kildare-ireland'})}>Rent in Kildare</a></li>\n                                        <li><a href={FlowRouter.url('b', {slug:'rent-in-galway-ireland'})}>Rent in Galway</a></li>\n                                        <li><a href={FlowRouter.url('b', {slug:'rent-in-meath-ireland'})}>Rent in Meath</a></li>\n                                    </ul>\n                                </div>\n                                <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                    <ul>\n                                        <li><h6 className=\"pad-bot-2\">LANDLORDS</h6></li>\n                                        <li><a href={FlowRouter.url('advertisewithus')}>List My Property</a></li>\n                                        <li><a href={FlowRouter.url('estateagent')}>Estate Agents/Landlords</a></li>\n                                        <li><a href={FlowRouter.url('howitworks')}>How it Works?</a></li>\n                                        <li><a href={FlowRouter.url('faqs')}>FAQs</a></li>\n                                        <li><a href={FlowRouter.url('contactus')}>Contact Us</a></li>\n                                    </ul>\n                                </div>\n\n                                <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                    <ul>\n                                        <li><h6 className=\"pad-bot-2\">SPOTMYCRIB</h6></li>\n                                        <li><a href={FlowRouter.url('about')}>About Us</a></li>\n                                        <li><a href={FlowRouter.url('bloghome')}>Blog</a></li>\n                                        <li><a href={FlowRouter.url('careers')}>Careers</a></li>\n                                        <li><a href={FlowRouter.url('gdpr')}>Data Protection / EU GDPR</a></li>\n                                        <li><a href={FlowRouter.url('terms')}>Legal</a></li>\n                                        <li><a href={FlowRouter.url('privacy')}>Privacy Policy</a></li>\n                                        <li><a href={FlowRouter.url('cookiepolicy')}>Cookie Policy</a></li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"col-md-3 col-sm-12 col-xs-12 social-icon\">\n                            <div className=\"col-md-12 col-sm-12 col-xs-12\">\n                                <ul>\n                                    <li><a href=\"https://www.facebook.com/SpotMyCrib/\" target=\"_blank\"><img src={cdnPath(\"/images/facebook-icon.png\")} alt=\"\"/></a></li>\n                                    <li><a href=\"https://twitter.com/SpotMyCrib\" target=\"_blank\"><img src={cdnPath(\"/images/twitter-icon.png\")} alt=\"\"/></a></li>\n                                    <li><a href=\"https://www.linkedin.com/company/11223356/\" target=\"_blank\"><img src={cdnPath(\"/images/linkedin-icon.png\")} alt=\"\"/></a></li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <section className=\"copyright\" style={{display: 'none'}}>\n                <div className=\"container\">\n                    <ul className=\"footer-left visible-md\">\n                        <li>SpotMyCrib. </li>\n                    </ul>\n                    <ul className=\"footer-left hidden-md\">\n                        <li>SpotMyCrib. </li>\n                    </ul>\n                </div>\n            </section>\n            </div>\n        );\n        }\n};","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport { withTracker } from 'meteor/react-meteor-data';\nimport {LoginFormSignInView,LoginFormSignUpView,LoginFormSignUpViewLandlord,LoginFormResetPasswordView  } from './LoginFormViews.jsx'\n\nemailAlerts = [\n    // {\n    //     heading: 'OH, HEY!',\n    //     para: 'Get your dream place sooner without even searching for it! Sign up for our emails and we will send you the latest properties of your choice',\n    //     yesButtonText: \"Awesome 🤘👍\"\n    // },\n    {\n        heading: 'Always First.',\n        para: 'Be the first to hear about the latest lettings in your area. Signup for our email alerts.',\n        yesButtonText: \"HELL YES!\"\n    }\n    // ,\n    // {\n    //     heading: 'Get Notified.',\n    //     para: 'Get your rental soon by signing up for our email alerts. Be the first one to know when a letting is posted.',\n    //     yesButtonText: \"Okays! Sign me up. :)\"\n    // }\n]\nEMAIL_ALERT_VARIATION_count = 2;\n// EMAIL_ALERT_VARIATION = Math.floor(Math.random() * EMAIL_ALERT_VARIATION_count) // expected output: 0, 1, 2\nEMAIL_ALERT_VARIATION = 0;//Keeping only 1 variation.\nEMAILALERT = emailAlerts[EMAIL_ALERT_VARIATION]\nisMobileMenuEventAttached = false;\nfunction delayedFunctions() {\n    // if(!isMobileMenuEventAttached) {\n        $(document).unbind('click').bind('click',function (e) {\n            if (!$('.xs-menu').hasClass('slide-right')) {//Its not open\n                if ($(e.target).closest(\".xs-menu-icon-master\").length > 0) {\n                    if(FlowRouter.current().route.name=='home')\n                        $('.carousel-indicators').addClass('carousel-indicatorsLowZindex');\n                    $('.xs-menu').addClass('slide-right');\n                    return true;\n                } else return true\n            } else {//Its open\n                if ($(e.target).closest(\".xs-menu-close-icon .xs-close, .xs-menu a\").length > 0 || $(e.target).closest(\".slide-right\").length < 1) {\n                    $('.xs-menu').removeClass('slide-right')\n                    if(FlowRouter.current().route.name=='home')\n                        setTimeout(function(){\n                            if(FlowRouter.current().route.name=='home') $('.carousel-indicators').removeClass('carousel-indicatorsLowZindex');\n                        },250);\n                    return true;\n                }\n            }\n        });\n        // isMobileMenuEventAttached = true;\n    // }\n\n}\nfunction showLoginDialog(){\n    Session.set('showForgotForm',false)\n    Session.set('showSignupForm',false)\n    Session.set('showLoginSignupFancyBoxDialog',true)\n    Session.set('showLoginDialog',true)\n}\nfunction showSignupDialog(){\n    Session.set('showForgotForm',false)\n    Session.set('showSignupForm',true)\n    Session.set('showLoginSignupFancyBoxDialog',true)\n    Session.set('showLoginDialog',true)\n}\nfunction showLoginPopup(){\n    // let doesDivStillExists = $('#signin-div').html()\n    // if( doesDivStillExists != \"\" ){//To prevent home page dialogs\n        $.fancybox({\n            'padding': 0,\n            'href': '#signin-div',\n            afterClose:function(template){\n                console.log(template);\n                //template.showLoginDialog.set(false);\n                Session.set('isLandLordMode',false)\n                Session.set('showLoginDialog',false)\n                Session.set('showLoginSignupFancyBoxDialog',false)\n                Session.set('loginFromApplyNowBtn',false)\n\n            }\n        })\n}\nfunction emailValidation(email) {\n\n    email = email.trim();\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    // Valid\n    if( re.test(email) ){\n        return true;\n    }\n\n    // Invalid\n    return {\n        error: \"INVALID_EMAIL\",\n        reason: \"Please enter a valid email address in format pat@gmail.com\",\n    };\n\n}\nfunction decideAndShowCreateAlertPopup(){\n    // console.log(\"Apply decideAndShowCreateAlertPopup\")\n    let showAlertCreate = true;\n    \n    let saidNo = parseInt(readCookie('emailAlertNoThanks')) ;\n    if(!saidNo){\n        let c = parseInt(readCookie('emailAlertShowedCount')) ;\n        let on = parseInt(readCookie('emailAlertShowedOnTime')) ;\n        let tmp = (Date.now() - on) / 60000 ;// time in mins\n        // console.log('Time is: '+tmp);\n        if(c > 1 ){\n            if( tmp < 2 )showAlertCreate = false; //its not even 2mns since last popup show, so wait\n        }\n        if(c > 2 ){\n            if( tmp < 2 )showAlertCreate = false; //its not even 2mns since last popup show, so wait\n        }\n        if(c > 3 ){\n            if( tmp < 3 )showAlertCreate = false; //its not even 3mns since last popup show, so wait\n        }\n        if(c > 4 ){\n            if( tmp < 6 )showAlertCreate = false; //its not even 6mns since last popup show, so wait\n        }\n        if(c > 5 ){\n            if( tmp < 12 )showAlertCreate = false; //its not even 12mns since last popup show, so wait\n        }\n    }\n    let user = Meteor.user();\n    if(user){\n        if(user.profile.emailAlertsActive || user.profile.emailAlertsNoThanks) showAlertCreate = false; // he already has alerts or he said no to them.\n    }\n    if(parseInt(readCookie('emailAlertAlreadyHasIt')) || parseInt(readCookie('emailAlertNoThanks')) ) showAlertCreate = false; // He already has alerts or He already said no\n    //you don't need above fallback because this function is called only after 3-5 sec , by then user subscription must be loaded.\n    // console.log(\"decision: \"+showAlertCreate)\n    if(showAlertCreate){\n        showCreateAlertPopup();\n    }\n}\nfunction showCreateAlertPopup(){\n    if ( ['rent',\"b\",'letting'].includes(  FlowRouter.current().route.name ) ){\n    let c = parseInt(readCookie('emailAlertShowedCount')) ;\n    c= parseInt(c);\n    if(isNaN(c))c = 1;\n    else {\n        c++;\n    }\n    createCookie('emailAlertShowedCount',c,5)\n    createCookie('emailAlertShowedOnTime',Date.now(),5)\n\n    $.fancybox({\n        'padding': 0,\n        'href': '#create-alert-popup',\n        afterShow:function(){\n            $('#emailAlertUserEmailAddress').focus();\n            ga('send', 'event', 'emailAlert', 'Show Email Alert', 'Route name: '+FlowRouter.current().route.name+' Variation: '+EMAIL_ALERT_VARIATION);\n        },\n        afterClose:function(){\n            Session.set('showCreateAlertPopup',false)\n        }\n    })\n    }\n}\nfunction showAddPropertyHeaderPopup(){\n    $.fancybox({\n        'padding': 0,\n        'href': '#addPropertyHeader-div',\n\n        afterClose:function(template){\n            //console.log(template);\n            Session.set('showAddPropertyHeaderTemplate',false)\n            Session.set('showAddPropertyHeaderFancyBoxDialog',false)\n\n        }\n    })\n}\nfunction createCookie(name,value,days) {\n    var expires = \"\";\n    if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + (days*24*60*60*1000));\n        expires = \"; expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + value + expires + \"; path=/\";\n}\nfunction readCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(';');\n    for(var i=0;i < ca.length;i++) {\n        var c = ca[i];\n        while (c.charAt(0)==' ') c = c.substring(1,c.length);\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\n    }\n    return null;\n}\nfunction eraseCookie(name) {\n    createCookie(name,\"\",-1);\n}\nfunction loadFonts(){\n    (function() {\n        var wf = document.createElement('link');\n        wf.href = cdnPath('/fonts/Montserrat/stylesheet.css');\n        wf.rel = 'stylesheet';\n        wf.async = 'true';//link doesnt support async\n        var s = document.getElementsByTagName('link')[0];\n        s.parentNode.insertBefore(wf, s);\n\n        Session.set('fontsLoaded',true);\n\n        // var wf = document.createElement('script');\n        // wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';\n        // wf.type = 'text/javascript';\n        // wf.async = 'true';\n        // var s = document.getElementsByTagName('script')[0];\n        // s.parentNode.insertBefore(wf, s);\n    })();\n}\n\nclass MainLayoutHeader extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            emailAlertEmailAddress : this.props.currentUser ? this.props.currentUser.profile.email : \"\"\n        };\n        this.emailAlertEmailAddressHandler = this.emailAlertEmailAddressHandler.bind(this);\n        this.NeedsCreateAlertPopup = false;\n        if( ['rent',\"b\",'letting'].includes(  FlowRouter.current().route.name ) ){\n            this.NeedsCreateAlertPopup = true;\n            // EMAIL_ALERT_VARIATION = Math.floor(Math.random() * EMAIL_ALERT_VARIATION_count) // expected output: 0, 1\n            EMAIL_ALERT_VARIATION = 0;\n            EMAILALERT = emailAlerts[EMAIL_ALERT_VARIATION]\n        }\n    }\n    componentWillReceiveProps(nextProps) {\n        if(nextProps.currentUser && !this.state.emailAlertEmailAddress)//update only if it has vals and emailAlertEmailAddress is empty.\n            this.setState({emailAlertEmailAddress: nextProps.currentUser.profile.email })\n    }\n    componentWillMount(){\n        if(Meteor.isClient) {\n            Session.set('showLoginDialog', false)\n            Session.set('showForgotForm', false)\n            Session.set('showLoginDialog', false)\n            Session.set('showLoginSignupFancyBoxDialog', false)\n            Session.set('showAddPropertyHeaderTemplate', false)\n            Session.set('showAddPropertyHeaderFancyBoxDialog', false)\n            if (!Session.get(\"showErrorDlg\")) Session.set(\"showErrorDlg\", []);\n        }\n        this.state = {\n            newAlertCreateForm:true,\n            newAlertCreatedSuccessfully:false\n        }\n        this.emailAlertCreateBtnHandler = this.emailAlertCreateBtnHandler.bind(this)\n        this.emailAlertNoThanksBtnHandler = this.emailAlertNoThanksBtnHandler.bind(this)\n    }\n    emailAlertCreateBtnHandler(){\n        console.log('emailAlertCreateBtnHandler')\n        let val = $('#emailAlertUserEmailAddress').val();\n        let validatedEmail = emailValidation(val);\n        if(validatedEmail !== true){\n            alert('Invalid email, please enter a valid email address.');\n            $('#emailAlertUserEmailAddress').focus();\n            return;\n        }\n        this.subscribeToEmailAlert = function(error, result){\n            if(error){\n                console.log(error);\n                alert('Error: '+error.reason);\n                $('#emailAlertUserEmailAddress').focus();\n                return;\n            }else{\n                createCookie('emailAlertAlreadyHasIt',1,365)\n                this.setState({newAlertCreateForm:false,newAlertCreatedSuccessfully:true})\n                setTimeout(function () {\n                    if ($)\n                        if ($.fancybox)\n                            $.fancybox.close();\n                },10000)\n            }\n        }\n        this.subscribeToEmailAlert = this.subscribeToEmailAlert.bind(this);\n        Meteor.call('subscribeToEmailAlert',val,this.subscribeToEmailAlert);\n\n        ga('send', 'event', 'emailAlert', 'Created Email Alert', 'Route name: '+FlowRouter.current().route.name+' Variation: '+EMAIL_ALERT_VARIATION);\n    }\n    emailAlertNoThanksBtnHandler(){\n        console.log('emailAlertNoThanksBtnHandler')\n        createCookie('emailAlertNoThanks',1,365)\n        if(this.props.currentUser){\n            Meteor.call('emailAlertsNoThanks');\n        }\n        if ($)\n            if ($.fancybox)\n                $.fancybox.close();\n    }\n    componentDidMount(){\n        $.getScript(cdnPath('/js/bootstrap.min.js'), function(){\n            // console.log(\"Bootstrap loaded\")\n        });\n        // $.getScript(cdnPath('//static.filestackapi.com/filestack-js/1.x.x/filestack.min.js'), function(){\n        //     console.log(\"Filestack loaded\")\n        // });\n\n        $.getScript(cdnPath('/plugins/fancybox/js/jquery.fancybox.min.js'), function(){\n            // script should be loaded and do something with it.\n            $('.fancybox').fancybox({\n                scrolling:'no',\n                helpers: {\n                    overlay: {\n                        locked: true\n                    }\n                }\n            })\n        });\n        if(Meteor.isClient){\n            var fontsLoaded = Session.get('fontsLoaded');\n            if(!fontsLoaded) {\n                //Below code is taken from https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery\n                var raf = window.requestAnimationFrame || window.mozRequestAnimationFrame ||\n                    window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n                if (raf) raf(function() { window.setTimeout(loadFonts, 0); });\n                else window.addEventListener('load', loadFonts);\n            }\n        }\n        setTimeout(delayedFunctions,1500)\n        if( ['rent',\"b\",'letting'].includes(  FlowRouter.current().route.name ) ){\n            setTimeout(function(){\n                decideAndShowCreateAlertPopup();\n            },10000)\n            var runOnlyOnce = false;\n            $(document).off('scroll').on('scroll', function() {\n                try{\n                    let addon = 50; if(FlowRouter.current().route.name == 'b')addon = 300;\n                    if($(this).scrollTop()>=($('.subscribeTillPopop').position().top - addon) && !runOnlyOnce ){\n                        runOnlyOnce = true;\n                        decideAndShowCreateAlertPopup();\n                    }\n                }catch(e){}\n            })\n        }\n    }\n\n    showLoginDialogClick(event){\n        showLoginDialog();\n    }\n    showSignupDialogClick(event){\n        showSignupDialog();\n    }\n    logoutBtnClick(event){\n        Meteor.logout(function(err){\n            if (err) {\n                throw new Meteor.Error(\"Logout failed\");\n            }\n        })\n    }\n    profileBtnClick(event){\n        FlowRouter.go('account/profile');\n    }\n    cookieConsentBtnClick(event){\n        createCookie('cookieConsent',1,365);\n        $('.cookieConsentArea').remove();\n    }\n    emailAlertEmailAddressHandler(event){\n        this.setState({emailAlertEmailAddress:event.target.value})\n    }\n\n    render() {\n        const self = this;\n        return (\n<div>\n    { this.props.showCookieConsent ?\n    <section className=\"cookieConsentArea\">\n        <div className=\"container\">\n            <div className=\"cookieConsentArea-inner\">\n                <div className=\"left-menu text-center\" style={{color: 'white'}}><p>  SpotMyCrib uses cookies. By continuing to use this site you consent to the use of cookies in accordance to our  <a href={FlowRouter.url('cookiepolicy')}> cookie policy </a>.<button className=\"green-btn btns cookieConsentBtn\" onClick={self.cookieConsentBtnClick.bind(this)} type=\"button\" style={{marginLeft: 20}}>I understand</button></p>\n            </div>\n        </div>\n    </div>\n</section>\n: \"\"}\n<section className=\"header\">\n    <div className=\"container\">\n        <div className=\"logo-holder-div\">\n            <div className=\"xs-menu-icon-master\"><div className=\"xs-menu-icon\">\n                    <span className=\"menu-xs sprite\" />\n            </div></div>\n                <div className=\"logo-holder\">\n                    <a href={FlowRouter.url('home')}>\n                        <img src={cdnPath(\"/images/spot-my-crib-logo.png\")} alt=\"SpotMyCrib\" title=\"SpotMyCrib - Safe and easy rentals\" className=\"logo-big\" />\n                        <img src={cdnPath(\"/images/spotmycrib-logo-130.jpg\")} alt=\"SpotMyCrib\" title=\"SpotMyCrib - Safe and easy rentals\" className=\"logo-xs\" />\n                    </a>\n                </div>\n                <div className=\"menu\">\n                    <ul>\n                        <li className=\"hidden-xs\"><a href={FlowRouter.url('advertisewithus')} className=\"btns green-btn addPropertyHeaderBtn\" type=\"button\"><span className=\"glyphicon glyphicon-object-align-bottom\" aria-hidden=\"true\" /> Advertise property</a></li>\n                        \n                        { this.props.currentUserId ?\n                            <li className=\"login-menu hidden-xs\">\n                                <a href={FlowRouter.url('account/myProperties')}>\n                                    <span className=\"glyphicon glyphicon-check\" aria-hidden=\"true\"/> MY PROPERTIES\n                                </a>\n                            </li>\n                            : \"\"}\n                        { this.props.currentUserId ?\n                            <li className=\"login-menu hidden-xs\">\n                                <a href={FlowRouter.url('account/profile')}>\n                                    <span className=\"glyphicon glyphicon-check\" aria-hidden=\"true\"/> MY REFERENCES\n                                </a>\n                            </li>\n                        : \"\"}\n                        { this.props.currentUserId ?\n                            <li className=\"login-menu hidden-xs\"><a href=\"javascript:void(0);\" onClick={self.logoutBtnClick.bind(this)} className=\"logoutBtn\">SIGN OUT</a></li>\n                        : \"\"}\n                        { this.props.currentUserId ?\n                            <li>\n                                <div className=\"navbar-accounts\">\n                                    <a href={FlowRouter.path('account/profile')}>\n                                        <img className=\"circular-icon profileBtn\" src={this.props.getProfilePic} width=\"40px\" height=\"40px\" />\n                                        <span id=\"logged-in-display-name profileBtn\">\n                                                        {this.props.displayName}\n                                        </span>\n                                    </a>\n                                </div>\n                            </li>\n                            :\n                            <ul className=\"oval logedout-menu\">\n                                <li><a className=\"right-border showLoginDialog\" onClick={self.showLoginDialogClick.bind(this)} href=\"javascript:;\">SIGN IN</a></li>\n                                <li><a href=\"javascript:;\" onClick={self.showSignupDialogClick.bind(this)} className=\"showSignupDialog\">SIGN UP</a></li>\n                            </ul>\n                        }\n                    </ul>\n                </div>\n                        <div className=\"xs-menu visible-xs transition\">\n                            <div className=\"xs-menu-close-icon text-right\">\n                                <span className=\"sprite xs-close\" />\n                                </div>\n                                <ul className=\"transition\">\n                                    <li><a href={FlowRouter.url('home')}>HOME / SEARCH</a></li>\n                                    { this.props.currentUserId ?\n                                        <li><a href={FlowRouter.path('account/profile')}>MY REFERENCES</a></li>\n                                        : \"\"\n                                    }\n                                    <li><a href={FlowRouter.url('advertisewithus')}>LIST PROPERTY</a></li>\n                                    { this.props.currentUserId ?\n                                        <li><a href={FlowRouter.path('account/myProperties')}>MY PROPERTIES</a></li>\n                                        : \"\"\n                                    }\n                                    <li><a href={FlowRouter.url('estateagent')}>AGENTS/LANDLORDS</a></li>\n                                    <li><a href={FlowRouter.url('howitworks')}>HOW IT WORKS?</a></li>\n                                    <li><a href={FlowRouter.url('faqs')}>FAQ</a></li>\n                                    <li><a href={FlowRouter.url('contactus')}>CONTACT US</a></li>\n                                    <li><a href={FlowRouter.url('careers')}>CAREERS</a></li>\n                                    { this.props.currentUserId ?\n                                        <li><a href=\"javascript:void(0);\" onClick={self.logoutBtnClick.bind(this)}>SIGN OUT</a></li>\n                                        : \"\"\n                                    }\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n\n\n                <div id=\"errorModel\" className=\"alert alert-danger \" style={{display: 'none'}}></div>\n                <div id=\"signin-div\" className=\"signin1\" style={{display: 'none'}}>\n                    {this.props.showLoginDialog ? <LoginFormT/> : \"\" }\n                </div>\n    {this.NeedsCreateAlertPopup ? (\n                <div id=\"create-alert-popup\" style={{display: 'none'}} className={\"verification-div1\"}>\n                    <div className=\"refund-div\">\n                        {this.state.newAlertCreateForm && !this.state.newAlertCreatedSuccessfully  ? (<h2>{EMAILALERT.heading}</h2>) : \"\"}\n                        {this.state.newAlertCreatedSuccessfully && !this.state.newAlertCreateForm ? (<h2 className=\"green-text\">Well Done! Alert Created.</h2>) : \"\"}\n                    </div>\n                    {this.state.newAlertCreateForm && !this.state.newAlertCreatedSuccessfully  ? (\n                        <div className=\"profile-text\">\n                            <p className=\"color-text\"\n                               style={{textAlign: 'center', margin: '10px 0px', fontSize: '14px'}}>{EMAILALERT.para}</p>\n                            <hr/>\n                            <form className=\"signin-form\" action=\"javascript:void(0);\">\n\n                                <div className=\"form-border\">\n                                    <div className=\"styled-input\"><input type=\"text\"\n                                                                         placeholder=\"Enter your email address\" id=\"emailAlertUserEmailAddress\"\n                                                                         required=\"required\" style={{\n                                        fontSize: '14px',\n                                        marginBottom: '10px !important', borderBottom: 'none !important'\n                                    }} value={this.state.emailAlertEmailAddress} onChange={this.emailAlertEmailAddressHandler}/></div>\n                                </div>\n\n                                <div className=\"signup-btn\">\n                                    <button onClick={this.emailAlertCreateBtnHandler} className=\"green-btn btns\" type=\"submit\" style={{width: '100%', marginTop: '10px'}}>\n                                        {EMAILALERT.yesButtonText}\n                                    </button>\n                                </div>\n                            </form>\n                            <a href=\"javascript:void(0)\" onClick={this.emailAlertNoThanksBtnHandler} className={'noThanks'}>No thanks, I'm happy to search myself</a>\n                        </div>\n                    ) : \"\"}\n                    {this.state.newAlertCreatedSuccessfully  && !this.state.newAlertCreateForm ? (\n                        <div className=\"profile-text\">\n                            {/*<p style={{color: '#ccac4c', paddingBottom: 0}}>Well Done! </p>*/}\n                            <p className=\"color-text\" style={{textAlign: 'center', margin: '10px 0px', fontSize: '13px'}}>We will\n                                send you an email a day with new lettings. Be the first to apply for them. </p>\n                            <iframe src=\"https://giphy.com/embed/fxsqOYnIMEefC\" frameBorder={0} className=\"giphy-embed\"\n                                    allowFullScreen style={{width: '80%'}}/>\n                        </div>\n                    ) : \"\"}\n                    {false ? (\n                        <div className=\"profile-text\">\n                            <p className=\"green-text\" style={{textAlign: 'center', margin: '10px 0px', color: 'black'}}>\n                                You will now be notified of the new lettings in Dundrum of County Dubin.\n                            </p>\n                            <hr/>\n                            <p className=\"color-text mar-top-20\" style={{\n                                textAlign: 'center',\n                                margin: '20px 0px 10px', /* display: 'none', */\n                                fontSize: '14px'\n                            }}>Your active alerts are</p>\n                            <table className=\"table table-bordered\">\n                                <thead>\n                                <tr>\n                                    <th style={{textAlign: 'center'}}>County</th>\n                                    <th style={{textAlign: 'center'}}>Area</th>\n                                    <th/>\n                                </tr>\n                                </thead>\n                                <tbody style={{color: '#8b8b8b', fontSize: '14px'}}>\n                                <tr>\n                                    <td>Dublin</td>\n                                    <td>All Areas</td>\n                                    <td><a>Delete</a></td>\n                                </tr>\n                                <tr>\n                                    <td>Limrick</td>\n                                    <td>City Center North</td>\n                                    <td><a>Delete</a></td>\n                                </tr>\n                                <tr>\n                                    <td>Limrick</td>\n                                    <td>Madison square</td>\n                                    <td><a>Delete</a></td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    ) : \"\"}\n                </div>\n    ) : \"\"}\n\n            </div>\n\n        );\n        }\n};\nexport default withTracker(() => {\n\n    var showCookieConsent = false;\n    var errorModel = false;\n    var showLoginDialog = false;\n    if(Meteor.isClient) {\n        if (Session.get('loginFlowComplete')) {\n            setTimeout(function () {\n                Session.set('loginFlowComplete', undefined);\n            }, 1000)\n        }\n\n        ///////////////////// errorModel start\n        var tmp = Session.get(\"showErrorDlg\");\n        if (!tmp) tmp = [];\n        if (tmp)\n            if (tmp.length) {\n                var timeoutVal = 0;\n                if (!$.fancybox) timeoutVal = 3000;\n                let tmpHTML = ''\n                for(let j=0;j<tmp.length;j++){\n                    tmpHTML += '<p>'+tmp[j]+'</p>'\n                }\n                $('#errorModel').html(tmpHTML);\n                setTimeout(function () {\n                    $.fancybox({\n                        'padding': 0,\n                        'href': '#errorModel',\n                        // afterShow:function(template){\n                        //     setTimeout(function () {\n                        //         $.fancybox.close();\n                        //     },3000)\n                        // },\n                        afterClose: function () {\n                            var tmp = Session.get(\"showErrorDlg\");\n                            if (!tmp) tmp = [];\n                            tmp.shift();\n                            Session.set(\"showErrorDlg\", tmp)\n                        }\n                    })\n                }, timeoutVal)\n\n            }\n        ///////////////////// showLoginDialog start\n        if (Session.get('showLoginSignupFancyBoxDialog')) {\n            showLoginPopup()\n        } else {\n            if ($)\n                if ($.fancybox)\n                    $.fancybox.close();\n        }\n        ///////////////////// showCreateAlertPopup start\n        if (Session.get('showCreateAlertPopup')) {\n            showCreateAlertPopup();\n        }\n        // else {//No need for any control over its closing.\n        //     if ($)\n        //         if ($.fancybox)\n        //             $.fancybox.close();\n        // }\n\n        showCookieConsent = !parseInt(readCookie('cookieConsent'))\n        errorModel= Session.get(\"showErrorDlg\")\n        showLoginDialog= Session.get(\"showLoginDialog\")\n    }\n\n    var user= Meteor.user();\n    ///////////////////// displayName start\n    var displayName = \"Guest\";\n    try{\n        if (user) {\n            if (user.profile && user.profile.name) {\n                displayName = user.profile.name;\n            }\n        }\n    }catch (e){}\n    ///////////////////// getProfilePic start\n    var getProfilePic = cdnPath(\"/images/user-img.png\");\n    try{\n        if (user.profile.picture)\n        {\n            if(user.services.facebook)\n                if(user.services.facebook.indexOf('?width=40')==-1)\n                    getProfilePic = user.profile.picture+\"?width=40\"; //@BCompatibility : adding ?width=40 to it\n\n            getProfilePic = user.profile.picture;\n        }\n    }catch (e){}\n\n\n    return {\n        showCookieConsent: showCookieConsent,\n        currentUserId: Meteor.userId(),\n        errorModel: errorModel,\n        showLoginDialog: showLoginDialog,\n        displayName: displayName,\n        currentUser: Meteor.user(),\n    };\n})(MainLayoutHeader);\n\nclass LoginFormMessages extends Component {\n    render() {\n        return (\n            <div>\n                { this.props.messages ?\n                    (\n                        <div>\n                        {this.props.messages.info ?\n                            this.props.messages.info.map((item, i) => {\n                                return (\n                                    <div className=\"changePwdAlertMsgs alert alert-info\" role=\"alert\" key={i}>\n                                        <span className=\"glyphicon glyphicon-info-sign\" aria-hidden=\"true\"></span>&nbsp; {item.reason}\n                                    </div>\n                                )\n                            })\n                        :\"\"}\n                        {this.props.messages.warning ?\n                            this.props.messages.warning.map((item, i) => {\n                                return (\n                                <div className=\"changePwdAlertMsgs alert alert-warning\" role=\"alert\" key={i}>\n                                    <span className=\"glyphicon glyphicon-warning-sign\" aria-hidden=\"true\"></span>&nbsp; {item.reason}\n                                </div>\n                                )\n                            })\n                        :\"\"}\n                            {this.props.messages.success ?\n                                this.props.messages.success.map((item, i) => {\n                                    return (\n                                        <div className=\"changePwdAlertMsgs alert success\" role=\"alert\" key={i}>\n                                            <span className=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span>&nbsp; {item.reason}\n                                        </div>\n                                    )\n                                })\n                            :\"\"}\n                            {this.props.messages.errors ?\n                                this.props.messages.errors.map((item, i) => {\n                                    return (\n                                        <div className=\"changePwdAlertMsgs alert alert-danger\" role=\"alert\" key={i}>\n                                            <span className=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span>&nbsp; {item.reason}\n                                        </div>\n                                    )\n                                })\n                            :\"\"}\n\n                        </div>\n                    )\n                :\"\"\n                }\n            </div>\n\n        );\n    }\n};\n\nclass LoginForm extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            showForgotForm : props.showForgotForm ? true : false,\n            showSignupForm : props.showSignupForm ? true : false,\n            isLandLordMode : props.isLandLordMode ? true : false,\n            loginFromApplyNowBtn : props.loginFromApplyNowBtn ? true : false\n        }\n    }\n    showForgotFormHandler(){\n        this.setState({showForgotForm:true});\n        this.setState({showSignupForm:false});\n        this.setState({isLandLordMode:false});\n    }\n    showSignupFormHandler(){\n        this.setState({showForgotForm:false});\n        this.setState({showSignupForm:true});\n        this.setState({isLandLordMode:false});\n    }\n    showSignInFormHandler(){\n        this.setState({showForgotForm:false});\n        this.setState({showSignupForm:false});\n        this.setState({isLandLordMode:false});\n    }\n    showLandlordViewHandler(){\n        this.setState({showForgotForm:false});\n        this.setState({showSignupForm:true});\n        this.setState({isLandLordMode:true});\n    }\n    render() {\n        return (\n            <div className=\"loginForm\">\n                {\n                    this.state.showForgotForm ?\n                        <LoginFormResetPasswordView onPage={false} showSignInFormHandler={this.showSignInFormHandler.bind(this)}/>\n                    :\n                        this.state.showSignupForm ?\n                            this.state.isLandLordMode ?\n                                <LoginFormSignUpViewLandlord onPage={false} showSignInFormHandler={this.showSignInFormHandler.bind(this)}/>\n                            :\n                                <LoginFormSignUpView loginFromApplyNowBtn={this.state.loginFromApplyNowBtn} onPage={false} showSignInFormHandler={this.showSignInFormHandler.bind(this)}/>\n                        :\n                            <LoginFormSignInView loginFromApplyNowBtn={this.state.loginFromApplyNowBtn} onPage={false} showSignupFormHandler={this.showSignupFormHandler.bind(this)} showForgotFormHandler={this.showForgotFormHandler.bind(this)}/>\n\n                }\n            </div>\n        );\n    }\n};\nLoginFormT = withTracker(() => {\n    var ret = {}\n    if(Meteor.isClient){\n        ret.showSignupForm = Session.get('showSignupForm')\n        ret.showForgotForm = Session.get('showForgotForm')\n        ret.isLandLordMode = Session.get('isLandLordMode')\n        ret.loginFromApplyNowBtn = Session.get('loginFromApplyNowBtn')\n    }\n    return ret;\n})(LoginForm);\n\nclass LoginPage extends Component {\n    render() {\n        return (\n            <section className=\"mar-top-20 no-print\">\n                <div className=\"container\">\n                    <div className=\"filter-holder\">\n                        <div className=\"head-border-bottom\">\n                            <LoginFormT/>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        );\n    }\n};\n\nclass SocialLoginButtons extends Component {\n    componentWillMount(){\n        if(Meteor.isClient){\n            Session.set('loginFlowStart',true)\n            Session.set('loginFlowComplete', undefined)\n            delete Session.keys.loginFlowComplete\n        }\n        this.state = {\n            errorMessages : {}\n        }\n        this.dontShow = true\n        this.buttonForText = '';\n        switch(this.props.buttonFor){\n            case 'login': this.buttonForText = 'Login';break;\n            case 'signup': this.buttonForText = 'Signup';break;\n            default: this.buttonForText = 'Login / Signup';\n        }\n        this.handleFBLogin = this.handleFBLogin.bind(this)\n        this.handleTwitterLogin = this.handleTwitterLogin.bind(this)\n        this.handleGoogleLogin = this.handleGoogleLogin.bind(this)\n        this.handleLinkedInLogin = this.handleLinkedInLogin.bind(this)\n    }\n\n    handleFBLogin(event) {\n        this.setState({errorMessages:{}})\n        this.FBCallback = function(err){\n            switch(this.props.buttonFor){\n                case 'login':\n                    fbq('track', 'FBUserLogin'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'FB Login '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n                case 'signup':\n                    fbq('track', 'FBUserSignup'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'FB Signup '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n                default:\n                    fbq('track', 'FBUserLoginSignup'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'FB LoginSignup '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n            }\n            if (err) {\n                console.log(err)\n                var msg = 'Connect with Facebook failed. ';\n                if(err.errorType=='Accounts.LoginCancelledError')msg += 'Seems like attempt was cancelled. ';\n                else if(err.error=='account-exists'){\n                    msg += err.reason+' ';\n                }else if(err.message)msg += err.message+'. ';\n                msg += \"Please try again. Contact us if needed.\";\n                var errors = []\n                errors.push( {\n                    \"error\": \"SOCIALLOGIN_FAIL\",\n                    \"reason\": msg\n                })\n                this.setState({errorMessages:{errors: errors}})\n            }else{\n                if(this.props.usedInDlg){\n                    Session.set('showLoginSignupFancyBoxDialog',false)\n                    Session.set('showForgotForm',false)\n                    Session.set('showSignupForm',true)\n                    Session.set('showLoginDialog',true)\n                }\n                Session.set('loginFlowComplete', true)\n                Session.set('loginFlowStart',undefined)\n                delete Session.keys.loginFlowStart\n            }\n        }\n        this.FBCallback = this.FBCallback.bind(this)\n        Meteor.loginWithFacebook({}, this.FBCallback);\n    }\n\n    handleTwitterLogin(event) {\n        this.setState({errorMessages:{}})\n        this.TwitterCallback = function(err){\n            switch(this.props.buttonFor){\n                case 'login':\n                    fbq('track', 'TwitterUserLogin'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'Twitter Login '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n                case 'signup':\n                    fbq('track', 'TwitterUserSignup'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'Twitter Signup '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n                default:\n                    fbq('track', 'TwitterUserLoginSignup'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'Twitter LoginSignup '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n            }\n            if (err) {\n                console.log(err)\n                var msg = 'Connect with Twitter failed. ';\n                if(err.errorType=='Accounts.LoginCancelledError')msg += 'Seems like attempt was cancelled. ';\n                else if(err.error=='account-exists'){\n                    msg += err.reason+' ';\n                }else if(err.message)msg += err.message+'. ';\n                msg += \"Please try again. Contact us if needed.\";\n                var errors = []\n                errors.push( {\n                    \"error\": \"SOCIALLOGIN_FAIL\",\n                    \"reason\": msg\n                })\n                this.setState({errorMessages:{errors: errors}})\n            }else{\n                if(this.props.usedInDlg){\n                    Session.set('showLoginSignupFancyBoxDialog',false)\n                    Session.set('showForgotForm',false)\n                    Session.set('showSignupForm',true)\n                    Session.set('showLoginDialog',true)\n                }\n                Session.set('loginFlowComplete', true)\n                Session.set('loginFlowStart',undefined)\n                delete Session.keys.loginFlowStart\n            }\n        }\n        this.TwitterCallback = this.TwitterCallback.bind(this)\n        Meteor.loginWithTwitter({}, this.TwitterCallback);\n    }\n\n    handleGoogleLogin(event) {\n        this.setState({errorMessages:{}})\n        this.GoogleCallback = function(err){\n            switch(this.props.buttonFor){\n                case 'login':\n                    fbq('track', 'GoogleUserLogin'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'Google Login '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n                case 'signup':\n                    fbq('track', 'GoogleUserSignup'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'Google Signup '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n                default:\n                    fbq('track', 'GoogleUserLoginSignup'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'Google LoginSignup '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n            }\n            if (err) {\n                console.log(err)\n                var msg = 'Connect with Google failed. ';\n                if(err.errorType=='Accounts.LoginCancelledError')msg += 'Seems like attempt was cancelled. ';\n                else if(err.error=='account-exists'){\n                    msg += err.reason+' ';\n                }else if(err.message)msg += err.message+'. ';\n                msg += \"Please try again. Contact us if needed.\";\n                var errors = []\n                errors.push( {\n                    \"error\": \"SOCIALLOGIN_FAIL\",\n                    \"reason\": msg\n                })\n                this.setState({errorMessages:{errors: errors}})\n            }else{\n                if(this.props.usedInDlg){\n                    Session.set('showLoginSignupFancyBoxDialog',false)\n                    Session.set('showForgotForm',false)\n                    Session.set('showSignupForm',true)\n                    Session.set('showLoginDialog',true)\n                }\n                Session.set('loginFlowComplete', true)\n                Session.set('loginFlowStart',undefined)\n                delete Session.keys.loginFlowStart\n            }\n        }\n        this.GoogleCallback = this.GoogleCallback.bind(this)\n        Meteor.loginWithGoogle({}, this.GoogleCallback);\n    }\n\n    handleLinkedInLogin(event) {\n        this.setState({errorMessages:{}})\n        this.LinkedInCallback = function(err){\n            switch(this.props.buttonFor){\n                case 'login':\n                    fbq('track', 'LinkedInUserLogin'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'LinkedIn Login '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n                case 'signup':\n                    fbq('track', 'LinkedInUserSignup'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'LinkedIn Signup '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n                default:\n                    fbq('track', 'LinkedInUserLoginSignup'+ (err ? \"Failed\" : \"Successful\"));\n                    ga('send', 'event', 'General', 'userLoginSignup', 'LinkedIn LoginSignup '+ (err ? \"Failed\" : \"Successful\"));\n                    break;\n            }\n            if (err) {\n                console.log(err)\n                var msg = 'Connect with LinkedIn failed. ';\n                if(err.errorType=='Accounts.LoginCancelledError')msg += 'Seems like attempt was cancelled. ';\n                else if(err.error=='account-exists'){\n                    msg += err.reason+' ';\n                }else if(err.message)msg += err.message+'. ';\n                msg += \"Please try again. Contact us if needed.\";\n                var errors = []\n                errors.push( {\n                    \"error\": \"SOCIALLOGIN_FAIL\",\n                    \"reason\": msg\n                })\n                this.setState({errorMessages:{errors: errors}})\n            }else{\n                if(this.props.usedInDlg){\n                    Session.set('showLoginSignupFancyBoxDialog',false)\n                    Session.set('showForgotForm',false)\n                    Session.set('showSignupForm',true)\n                    Session.set('showLoginDialog',true)\n                }\n                Session.set('loginFlowComplete', true)\n                Session.set('loginFlowStart',undefined)\n                delete Session.keys.loginFlowStart\n            }\n        }\n        this.LinkedInCallback = this.LinkedInCallback.bind(this)\n        Meteor.loginWithLinkedIn({}, this.LinkedInCallback);\n    }\n    \n    render() {\n        const self = this;\n        return (\n            <div>\n                <div onClick={self.handleFBLogin} id=\"facebook-login\" className=\"blue-btn btns social-button\" data-max-rows=\"1\" data-size=\"medium\" data-show-faces=\"false\" data-auto-logout-link=\"false\">{this.buttonForText} with Facebook</div>\n                <div onClick={self.handleTwitterLogin} id=\"twitter-login\" style={{marginTop: '10px'}} className=\"blue-btn btns social-button\" data-max-rows=\"1\" data-size=\"medium\" data-show-faces=\"false\" data-auto-logout-link=\"false\">{this.buttonForText} with Twitter</div>\n                <div onClick={self.handleGoogleLogin} id=\"google-login\" style={{marginTop: '10px'}} className=\"blue-btn btns social-button\" data-max-rows=\"1\" data-size=\"medium\" data-show-faces=\"false\" data-auto-logout-link=\"false\">{this.buttonForText} with Google</div>\n                {this.dontShow ? \"\" :\n                <div onClick={self.handleLinkedInLogin} id=\"linkedin-login\" style={{marginTop: '10px'}} className=\"blue-btn btns social-button\" data-max-rows=\"1\" data-size=\"medium\" data-show-faces=\"false\" data-auto-logout-link=\"false\">Login with LinkedIn</div>\n                }\n\n                <br/>\n                <LoginFormMessages messages={this.state.errorMessages} />\n                <br/>\n            </div>\n        );\n    }\n};\nSocialLoginButtonsT = withTracker(() => {\n    var ret = {}\n    if(Meteor.isClient){\n        ret.showSignupForm = Session.get('showSignupForm')\n        ret.showForgotForm = Session.get('showForgotForm')\n    }\n    ret.user = Meteor.user()\n    return ret;\n})(SocialLoginButtons);\n\nclass LoginFormHorizontal extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            showForgotForm : props.showForgotForm ? true : false,\n            isLandLordMode : props.isLandLordMode ? true : false\n        }\n    }\n    showForgotFormHandler(){\n        this.setState({showForgotForm:true});\n    }\n    showSignInFormHandler(){\n        this.setState({showForgotForm:false});\n    }\n    componentDidMount(){\n        if(this.props.user) Session.set('loginFlowComplete', true)//todo: check this\n    }\n    render() {\n        return (\n            <div className=\"loginForm onpageSignin-form\">\n                <div className=\"row\">\n                    <SocialLoginButtonsT/>\n                </div>\n                <div className=\"row text-center\">\n                    <div className=\"col-md-6 col-sm-12\">\n                        {\n                            this.state.showForgotForm ?\n                                <LoginFormResetPasswordView onPage={true} showSignInFormHandler={this.showSignInFormHandler.bind(this)}/>\n                                :\n                                <LoginFormSignInView  onPage={true} showForgotFormHandler={this.showForgotFormHandler.bind(this)}/>\n                        }\n                    </div>\n                    <div className=\"col-md-6 col-sm-12\">\n                        {\n                            this.state.isLandLordMode ?\n                                <LoginFormSignUpViewLandlord onPage={true}/>\n                                :\n                                <LoginFormSignUpView  onPage={true}/>\n                        }\n                    </div>\n                </div>\n            </div>\n        );\n    }\n};\nLoginFormHorizontalT = withTracker(() => {\n    var ret = {}\n    ret.user = Meteor.user()\n    return ret;\n})(LoginFormHorizontal);\n\nclass LoginPageHorizontal extends Component {\n    render() {\n        return (\n        <section className=\"mar-top-20 mar-btm-20 no-print loginPageHorizontal\">\n            <div className=\"container\">\n                <div className=\"filter-holder\">\n                    <div className=\"head-border-bottom\">\n                        <LoginFormHorizontalT/>\n                    </div>\n                </div>\n            </div>\n        </section>\n            \n        );\n    }\n};\n\nexport {\n    LoginFormHorizontalT,\n    SocialLoginButtonsT,\n    LoginPage,\n    LoginPageHorizontal,\n    LoginFormT,\n    LoginFormMessages\n}","import {Component} from \"react\";\nimport MainLayoutHeader from \"./MainLayoutHeader\";\nimport MainLayoutFooter from \"./MainLayoutFooter\";\nimport React from \"react\";\n\nexport default class NotFound extends Component {\n    render() {\n        return (\n            <div>\n                <MainLayoutHeader />\n                <main role=\"main\" id=\"main\">\n                    <div className=\"container text-center mar-top-20 pad-btm-30\">\n                        <div className=\"filter-holder\">\n                            <div className=\"mar-top-30\">\n                                <h2>Page Not Found</h2><br/>\n                                <button className=\"blue-btn btns backBtn\" type=\"button\">Try again</button>\n                            </div>\n                        </div>\n                    </div>\n                </main>\n                <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n            </div>\n        );\n    }\n};","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { withTracker } from 'meteor/react-meteor-data';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader, {LoginFormHorizontalT}  from '../layout/MainLayoutHeader.jsx'\nimport {Collections} from \"../../api/collections\";\nif(Meteor.isClient)Session.set('subscriptionsReady',false);\n\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n// function getAreas(countySelected) {\n//     var distinctEntries = _.uniq(Collections.Areas.find({County:countySelected}, {\n//         sort: {Area: 1}, fields: {Area: true}\n//     }).fetch().map(function(x) {\n//         return x.Area;\n//     }), true);\n//     allareas = []\n//     for(var i=0;i< distinctEntries.length;i++){\n//         if(!distinctEntries[i])continue;\n//         allareas.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n//     }\n//     return allareas;\n// }\nsearialisedAdvertiseForm = '';\nfunction saveToLocalStorage(){\n    searialisedAdvertiseForm = $('#advertiseWithUsFormCF').serializeArray();\n    if (localStorage) {\n        // localStorage.searialisedAdvertiseForm=searialisedAdvertiseForm// doesn' work as it saves as string, but we need to store as object\n        localStorage.advertisewithusFormData={}\n        localStorage.advertisewithusFormData_address = $( \"input[name='address.address']\" ).val();\n        localStorage.advertisewithusFormData_price = $( \"input[name='price']\" ).val();\n        localStorage.advertisewithusFormData_county = $( \"select[name='address.county']\" ).val();\n        localStorage.advertisewithusFormData_area = $( \"select[name='address.area']\" ).val();\n        localStorage.advertisewithusFormData_type = $( \"select[name='type']\" ).val();\n        localStorage.advertisewithusFormData_furnished = $( \"select[name='furnished']\" ).val();\n        localStorage.advertisewithusFormData_baths = $( \"input[name='baths']\" ).val();\n        localStorage.advertisewithusFormData_numBedRoomCount = $( \"input[name='numBedRoomCount']\" ).val();\n    }\n}\nclass AdvertiseWithUs extends Component {\n\n    constructor(props){\n        super(props)\n        this.components = {\n            c1: AwsStep1,\n            c2: AwsStep2,\n            AwsStep1: AwsStep1,\n            AwsStep2: AwsStep2,\n            AwsStep3: AwsStep3\n        }\n    }\n\n    render(){\n        const self = this;\n        const TagName = this.components[this.props.curStepComponent];\n\n        return (\n        <div>\n            <MainLayoutHeader />\n            <div id=\"video-div\" style={{display: \"none\"}}>\n                <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/L689NIDwFdc?autoplay=1&rel=0\" frameBorder=\"0\" allowFullScreen></iframe>\n                {/* allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" */}\n            </div>\n            <section className=\"mar-top-20 mar-btm-20\">\n                <div className=\"container background-white \">\n                    <div className=\"filter-holder mar-top-20 pad-btm-20\">\n                        <div className=\"autoFrm\">\n                            <TagName />\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n        </div>\n    )\n    }\n}\nexport default withTracker(() => {\n    if(Meteor.isClient){\n        var pageno = FlowRouter.getParam('pageno'); if(!pageno)pageno=1;\n\n        var loginFlowComplete = Session.get('loginFlowComplete')\n        if(pageno == 2 && loginFlowComplete){\n            FlowRouter.go('advertisewithus',{pageno:3})\n            Session.set('loginFlowComplete', undefined);\n            if(typeof fbq !== 'undefined')fbq('track', 'Lead');\n            if(typeof ga !== 'undefined')ga('send', 'event', 'AdvertiseWithUsPage', 'UserLoginCompleted', 'User login / signup')\n        }\n    }\n\n    return {}\n})(AdvertiseWithUs);\nclass AwsStep1 extends Component {\n    componentDidMount(){\n        setTimeout(function(){\n            try{\n                $.fancybox({\n                    'padding': 0,\n                    'href':'#video-div'\n                })\n            }catch(e){}\n        },3000)\n    }\n    render(){\n        const self = this;\n        return (\n        <div>\n            <h1>Advertise your property to rent for FREE!</h1><br />\n            <p>List your property to rent in SpotMyCrib. Let thousands of verified tenants apply for your letting. Choose if you are a landlord, agent or the current tenant looking for a replacement so you can move. </p><br />\n            <p>Enter the details of the property below and click submit.<br /><br /><br /><br /></p>\n            <AdvertiseWithUsFormT/>\n        </div>\n        )\n    }\n}\nclass AwsStep2 extends Component {\n    constructor(props){\n        super(props);\n        this.backBtnHandler = this.backBtnHandler.bind(this);\n    }\n    backBtnHandler(){\n        FlowRouter.go('advertisewithus')\n    }\n    render(){\n        const self = this;\n        return (\n        <div>\n            <h1>Advertise your property to rent (step 2 of 3)</h1><br />\n            <a href=\"javascript:void(0)\" className=\"backBtn\" onClick={this.backBtnHandler}>&lt;&lt; Back to step 1</a>\n            <p>Connect your advert to your account. Login now or sign up with your social account. <br /><br /><br /><br /></p>\n\n            <LoginFormHorizontalT isLandLordMode={true}/>\n\n        </div>\n        )\n    }\n}\nclass AwsStep3 extends Component {\n\n    constructor(props){\n        super(props);\n        this.state={\n            propertyId:'',\n            auctionId:'',\n            myPropertyLink:'',\n        }\n        this.backBtnHandler = this.backBtnHandler.bind(this);\n        this.addPropImagesHandler = this.addPropImagesHandler.bind(this);\n    }\n    backBtnHandler(){\n        FlowRouter.go('advertisewithus')\n    }\n    addPropImagesHandler(){\n        if(typeof ga !== 'undefined')ga('send', 'event', 'AdvertiseWithUsPage', 'addPropertyImagesBtnClick', 'AddPropertyImages button clicked.');\n        Session.set('OpenImageUploader',true);\n        Session.set('fromAdvertiseWithUsPage',true);\n        FlowRouter.go('account/editproperty',{id:this.state.propertyId})\n    }\n    myPropertyLink(){\n        var propertyId = this.state.propertyId; if(!propertyId)return '';\n        var auctionId = this.state.auctionId; if(!auctionId)return '';\n        var prop = Collections.Properties.findOne(propertyId); if(!prop)return '';\n        var auction = Collections.Auctions.findOne({_id:auctionId}); if(!auction)return '';\n\n        return FlowRouter.path('rent',{slug:prop.slug,key:auction.lettingAuctionCode})\n    }\n    componentDidMount(){\n        if(Meteor.isClient){\n            var user = Meteor.user();\n            if(!user){//\n                FlowRouter.go('advertisewithus',{pageno:2})\n                return;\n            }\n            if(!searialisedAdvertiseForm){\n                FlowRouter.go('advertisewithus')\n                return;\n            }\n            this.addPropertyCallback = function (error, propertyId) {\n\n                if(error){\n                    console.log(error)\n                    var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                    var msg = 'An error occurred.';\n                    if(error.reason)msg += ' '+error.reason+'.'\n                    else if(error.message)msg += ' '+error.message+'.'\n                    tmp.push(msg);\n                    Session.set(\"showErrorDlg\",tmp)\n                    return;\n                }\n                this.setState({propertyId:propertyId})\n                Meteor.subscribe('editProperty',propertyId)//Can also be used for advertisewithus\n                this.addAdvertisementFormCallback = function (error, auctionId) {\n                    if(error){\n                        console.log(error)\n                        //    validator.showErrors({\n                        //         email: error.reason\n                        //     });\n                        var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                        var msg = 'An error occurred.';\n                        if(error.reason)msg += ' '+error.reason+'.'\n                        else if(error.message)msg += ' '+error.message+'.'\n                        tmp.push(msg);\n                        Session.set(\"showErrorDlg\",tmp)\n                        return;\n                    }\n                    console.log('addAdvertisement created successfully')\n                    console.log(auctionId);\n                    var templateInstance = this;\n                    this.setState({auctionId:auctionId},function () {\n                        var propertyId = templateInstance.state.propertyId; if(!propertyId)return '';\n                        var auctionId = templateInstance.state.auctionId; if(!auctionId)return '';\n                        var prop = Collections.Properties.findOne({_id:propertyId}); if(!prop)return '';\n                        var auction = Collections.Auctions.findOne({_id:auctionId}); if(!auction)return '';\n\n                        var myPropertyLink = FlowRouter.url('rent',{slug:prop.slug,key:auction.lettingAuctionCode})\n                        this.setState({myPropertyLink:myPropertyLink})\n                    })\n                }\n                this.addAdvertisementFormCallback = this.addAdvertisementFormCallback.bind(this)\n                Meteor.call('addAdvertisement',searialisedAdvertiseForm,propertyId,this.addAdvertisementFormCallback)\n            }\n            this.addPropertyCallback = this.addPropertyCallback.bind(this);\n            Meteor.call('addProperty',searialisedAdvertiseForm,this.addPropertyCallback)\n        }\n\n\n\n    }\n    //todo: this is page is not developed. So finish it.\n    render(){\n        const self = this;\n        return (\n        <div>\n            <h1>Congratulations! Your property is now live.</h1><br />\n            <a href=\"javascript:void(0)\" className=\"backBtn\" onClick={this.backBtnHandler}>&lt;&lt; Back to step 1</a>\n            {/*<h2>Add property images. </h2>*/}\n            <p style={{margin: '10px 0 10px 0px'}}>Choose add property images button below to add images to your advert to make it clear and attractive. Add description and choose amenities available by choosing edit option below. Choose preview below to view it, use the link from the preview window to share it with others. </p>\n            <div className=\"signin-form cf-1\">\n                <div className=\"clearfix\">\n                    <div className=\"styled-full-width\">\n                        <button className=\"btns blue-btn addPropImages\" onClick={self.addPropImagesHandler}>Add property images</button>\n                        {self.state.propertyId ? (\n                            <a href={FlowRouter.url('account/editproperty', {id:self.state.propertyId})} className=\"btns transparent-btn mar-left-10\">Edit property</a>\n                        ) : \"\"}\n                        <a href={self.state.myPropertyLink} target=\"_blank\" className=\"btns blue-btn mar-left-10\">Preview property</a>\n                    </div>\n                    <div className=\"w-100\" />\n                </div>\n            </div>\n            <h2>Whats next?</h2>\n            <p>Visit <a href={FlowRouter.url('account/myProperties')}>my properties</a> from <a href={FlowRouter.url('account/myProperties')}>here</a> or from top menu to see the list of all your properties. Visit <span className=\"green-text\">view applications</span> from my properties to see list of all applications your property receive. .</p>\n        </div>\n        )\n    }\n}\nclass AdvertiseWithUsForm extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            addPropertyFormSaving : false,\n            numBedRoomCount:0,\n            numBedRoomCountArr:0,\n            counties:props.counties,\n            areas:props.areas,\n            countySelected:props.countySelected,\n            propertyTypes:props.propertyTypes\n        };\n        this.countySelectedHandler = this.countySelectedHandler.bind(this);\n        this.areaSelectedHandler = this.areaSelectedHandler.bind(this);\n        this.propertyTypeHandler = this.propertyTypeHandler.bind(this);\n    }\n    countySelectedHandler(event){\n        var countySelected = event.target.value\n        this.setState({countySelected:countySelected})\n\n        if( Meteor.isClient )Session.set('countySelected', countySelected);\n        // if(countySelected) this.setState({areas:getAreas(countySelected)})\n\n        setTimeout(function(){\n            $('.areaSelected').val(\"\")\n            saveToLocalStorage();\n        },250)\n    }\n\n    areaSelectedHandler(event){\n        this.setState({areaSelected:event.target.value})\n        setTimeout(saveToLocalStorage,250)\n    }\n\n    propertyTypeHandler(event){\n        this.setState({propertyTypeSelected:event.target.value})\n        setTimeout(saveToLocalStorage,250)\n    }\n\n    handleSubmit(event){\n        event.preventDefault();\n        this.setState({addPropertyFormSaving:true})\n        var instance = this;\n        setTimeout(function(){\n            instance.setState({addPropertyFormSaving:false})\n        },2000)\n        const address = ReactDOM.findDOMNode(this.refs.address).value.trim()\n        const price = ReactDOM.findDOMNode(this.refs.price).value.trim()\n        const county = ReactDOM.findDOMNode(this.refs.county).value.trim()\n    }\n\n    updateNumBedRoomCount(event){\n        this.setState({numBedRoomCount:event.target.value})\n        var countArr = [];\n        for (var i=0; i<event.target.value; i++){\n            countArr.push({'index':i+1});\n        }\n        this.setState({numBedRoomCountArr:countArr})\n    }\n\n    componentDidMount(){\n        // console.log(this.props)\n        var instance = this;\n        if(Meteor.isClient) {\n            var validator = $('#advertiseWithUsFormCF').validate({\n                submitHandler: function (event) {\n                    // addPropertyFormSaving.set(true);//Not needed on this form.\n                    console.log(\"You just submitted the 'addPropertyForm' form.\");\n                    saveToLocalStorage();\n                    if (instance.props.user) {\n                        FlowRouter.go('advertisewithus', {pageno: 3})\n                    }\n                    else {\n                        FlowRouter.go('advertisewithus', {pageno: 2})\n                    }\n\n                }\n            });\n        }\n        setTimeout(function(){\n            try {\n                jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n            } catch (e) {\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\n            }\n            instance.restoreLocalStorageSettings();\n        },500)\n    }\n    componentWillReceiveProps(nextProps) {\n        if(nextProps.propertyTypes.length)//update only if it has vals.\n            this.setState({propertyTypes:nextProps.propertyTypes})\n        if(nextProps.areas.length)//update only if it has vals.\n            this.setState({areas:nextProps.areas})\n\n        \n    }\n    restoreLocalStorageSettings(){\n        var county = '';\n        if(localStorage) {\n            if (localStorage.advertisewithusFormData_county) {\n                county=localStorage.advertisewithusFormData_county;\n            }else if(localStorage.advertisewithusFormData_county===undefined){//Only for first time users\n                county = 'Dublin'\n            }\n            if (localStorage.advertisewithusFormData_type) {\n                this.setState({propertyTypeSelected:localStorage.advertisewithusFormData_type})\n            }\n        }\n        this.setState({countySelected:county})\n        if( Meteor.isClient )Session.set('countySelected', county);\n        // if(county)this.setState({areas:getAreas(county)})\n\n        if(localStorage)\n        if (localStorage.advertisewithusFormData_area) {\n            this.setState({areaSelected:localStorage.advertisewithusFormData_area})\n        }\n    }\n\n    render(){\n        const self = this;\n        return (\n        <form className=\"signin-form cf-1\" id=\"advertiseWithUsFormCF\" onSubmit={this.handleSubmit.bind(this)}>\n            <div className=\"clearfix\">\n                <div className=\"styled-input \">\n                    <input type=\"text\" name=\"address.address\" id=\"address.address\" required ref=\"address\"/>\n                    <label id=\"address.address-error\" className=\"error\" htmlFor=\"address.address\">This field is required.</label>\n                    <br />\n                    <label>Name and Street *</label>\n                    <span />\n                </div>\n                <div className=\"styled-input \">\n                    <input type=\"number\" name=\"price\" required ref=\"price\" />\n                    <label id=\"address.address-error\" className=\"error\" htmlFor=\"address.address\">This field is required.</label>\n                    <br />\n                    <label>Rent *</label>\n                    <span />\n                </div>\n                <div className=\"styled-input styled-input-select\">\n                    <label>County</label>\n                    <select autoComplete=\"on\" name=\"address.county\" ref=\"county\" required className=\"countySelected\" onChange={this.countySelectedHandler} value={this.state.countySelected}>\n                        <option value={\"\"}>(Select One)</option>\n                        {this.state.counties.map(function(c,i){\n                            return (\n                                <option key={i} value={c.value} >{c.label}</option>\n                            )\n                        })}\n                    </select>\n                    <span />\n                </div>\n                <div className=\"styled-input styled-input-select\">\n                    <label>Area *</label>\n                    <select autoComplete=\"on\" name=\"address.area\" required className=\"areaSelected\" onChange={this.areaSelectedHandler} value={this.state.areaSelected}>\n                        <option value={\"\"}>(Select One)</option>\n                        {this.state.areas.map(function(c,i){\n                            return (\n                                <option key={i} value={c.value} >{c.label}</option>\n                            )\n                        })}\n                    </select>\n                    <span />\n                </div>\n                <div className=\"styled-input styled-input-select\">\n                    <label>Property type *</label>\n                    <select autoComplete=\"on\" name=\"type\" ref=\"type\" required className=\"\" onChange={this.propertyTypeHandler} value={this.state.propertyTypeSelected}>\n                        <option value={\"\"}>(Select One)</option>\n                        {this.state.propertyTypes.map(function(c,i){\n                            return (\n                                <option key={i} value={c.value} >{c.label}</option>\n                            )\n                        })}\n                    </select>\n                    <span />\n                </div>\n                <div className=\"styled-input styled-input-select\">\n                    <label>Furnished? *</label>\n                    <select name=\"furnished\" required autoComplete=\"on\" ref=\"furnished\">\n                        <option value=\"true\">Yes</option>\n                        <option value=\"false\">No</option>\n                    </select>\n                    <span />\n                </div>\n                <div className=\"styled-input underline\">\n                    <input type=\"number\" name=\"baths\" id=\"baths\" required ref=\"baths\"/>\n                    <label>Number of bathrooms</label>\n                    <span />\n                </div>\n                <div className=\"styled-input underline\">\n                    <input type=\"number\" name=\"numBedRoomCount\" id=\"numBedRoomCount\" required ref=\"numBedRoomCount\" onChange={this.updateNumBedRoomCount.bind(this)} value={self.state.numBedRoomCount}/>\n                    <label>Number of bedrooms</label>\n                    <span />\n                </div>\n                { self.state.numBedRoomCountArr ? (\n                    <div>\n                        <div className=\"styled-full-width\">\n                            <label className=\"sep-label\">Ensuite? </label>\n                            {this.state.numBedRoomCountArr.map(function (arr,k) {\n                                return (\n                                    <div key={k} className=\"styled-input-select styled-input-checkbox max-20\">\n                                        <div className=\"checkbox disabled\">\n                                            <label><input type=\"checkbox\"\n                                                          name={\"bedrooms.\"+arr.index+\".ensuite\"}/>Bedroom {arr.index} Ensuite?</label>\n                                        </div>\n                                        <label>Bed Type</label>\n                                        <select required=\"\" autoComplete=\"\" name={\"bedrooms.\"+arr.index+\".bedType\"}>\n                                            <option value=\"single\">Single</option>\n                                            <option value=\"double\">Double</option>\n                                            <option value=\"twin\">Twin</option>\n                                        </select>\n                                        <span></span>\n                                    </div>\n                                )\n                            })}\n\n\n                        </div>\n                        <div className=\"w-100\"></div>\n                    </div>\n                ) : \"\"\n                }\n\n                <div className=\"styled-full-width\">\n                    {self.state.addPropertyFormSaving ? (\n                            <button type=\"button\" className=\"btns transparent-btn\">Saving</button>\n                        ) : (\n                        <button type=\"submit\" className=\"btns blue-btn addPropertyFormSaveBtn\">Save</button>\n                        )\n                    }\n                    <button type=\"button\" className=\"btns transparent-btn addPropertyFormCancelBtn mar-left-10\">Cancel</button>\n                </div>\n\n\n                <div className=\"w-100\" />\n            </div>\n        </form>\n    )}\n}\nAdvertiseWithUsFormT = withTracker(() => {\n    var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n    var allareas = [];\n    var allcounties = [];\n    var countySelected = 'Dublin';\n\n    if( Meteor.isClient )if(Session.get('countySelected'))countySelected = Session.get('countySelected')\n\n    for(var i=0;i< staticCounties.length;i++){\n        if(!staticCounties[i])continue;\n        allcounties.push({label: staticCounties[i], value: staticCounties[i] })\n    }\n    var distinctEntries = _.uniq(Collections.Areas.find({}, {//County:countySelected ; Dynamically load areas based on the subscription.\n        sort: {Area: 1}, fields: {Area: true}\n    }).fetch().map(function(x) {\n        return x.Area;\n    }), true);\n    allareas = []\n    for(var i=0;i< distinctEntries.length;i++){\n        if(!distinctEntries[i])continue;\n        allareas.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n    }\n\n    var Config = Collections.Config.find().fetch();Config = Config[0];\n    var propertyTypes = []\n    if(Config)\n        for(var i=0;i< Config.propertyType.length;i++){\n            propertyTypes.push({label: titleCase(Config.propertyType[i].name), value: Config.propertyType[i].value})\n        }\n\n    const AreasSub = Meteor.subscribe('Areas','','',countySelected,'','',function(){\n        if( ConfigSub.ready()  )Session.set('subscriptionsReady',true);\n    });\n    const ConfigSub = Meteor.subscribe('Config',function(){\n        if(AreasSub.ready() )Session.set('subscriptionsReady',true);\n    });\n    if(Meteor.isClient)Session.get('subscriptionsReady');\n    // Meteor.subscribe('Areas');\n    // Meteor.subscribe('Config');\n    Meteor.subscribe('userData')\n    return {\n        user: Meteor.user(),\n        counties: allcounties,\n        countySelected: countySelected,\n        areas: allareas,\n        propertyTypes: propertyTypes,\n    }\n})(AdvertiseWithUsForm);\n","/**\n * Created by njanjanam on 08/08/2018.\n */\nimport { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { withTracker } from 'meteor/react-meteor-data';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\nimport {Collections} from \"../../api/collections\";\nif(Meteor.isClient)Session.set('subscriptionsReady',false);\n\nfunction titleCase(str) {\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction dateFormat(text){\n    var date = new Date(text)\n    if(date.toString() == \"Invalid Date\")return 'N/A';\n    return  date.toDateString();\n}\n\nfunction chunkify(a, n, balanced) {\n\n    if (n < 2)\n        return [a];\n\n    var len = a.length,\n        out = [],\n        i = 0,\n        size;\n\n    if (len % n === 0) {\n        size = Math.floor(len / n);\n        while (i < len) {\n            out.push(a.slice(i, i += size));\n        }\n    }\n\n    else if (balanced) {\n        while (i < len) {\n            size = Math.ceil((len - i) / n--);\n            out.push(a.slice(i, i += size));\n        }\n    }\n\n    else {\n\n        n--;\n        size = Math.floor(len / n);\n        if (len % size === 0)\n            size--;\n        while (i < size * n) {\n            out.push(a.slice(i, i += size));\n        }\n        out.push(a.slice(size * n));\n\n    }\n\n    return out;\n}\n\nclass blogDetail extends Component {\n\n    constructor(props) {\n        super(props)\n        var current = FlowRouter.current();\n        this.currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params)\n\n        this.backBtnHandler = this.backBtnHandler.bind(this)\n\n        this.propsListHTML = '';\n        this.isServerSSRReq = '';\n    }\n    backBtnHandler(){\n        var prevRoute = Session.get('prevRoute');\n        if(prevRoute){\n            FlowRouter.go(prevRoute.name,prevRoute.args)\n            Session.set('prevRoute',false);\n        }else{\n            FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n        }\n    }\n    componentDidMount(){\n        try {\n            jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n        } catch (e) {\n            document.body.scrollTop = document.documentElement.scrollTop = 0;\n        }\n        setTimeout(function(){\n            try {\n                jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n            } catch (e) {\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\n            }\n\n        },500)\n    }\n    componentDidUpdate() {}\n\n\n    renderMain(){\n        let blog = this.props.data\n        let blogImage='';\n        return (\n\n\n            <section className=\"main-sec\" style={{marginTop:0}}>\n                {false ? (\n                    <div>\n                        <section className=\"banner\">\n                            <div className=\"container\">\n                                <div className=\"row\">\n                                    <div id=\"imagessection\" className=\"col-md-7 padding0\">\n                                        <figure>\n                                            <div className=\"banner-holder\">\n                                                {blog.image ? (\n                                                    <img src={cdnPath(blog.image)} alt={'Photo of '+blog.title} title={blog.title}/>\n                                                ):(\n                                                    <img src={cdnPath(\"/images/no-photo.png\")} alt={'Image not available'} title={'Image not available'}/>\n                                                )}\n                                            </div>\n                                            { false ? (\n                                                <figcaption>\n                                                    <h2>{this.props.isAgent.name}</h2>\n                                                    <h5 style={{padding: 0}}>{this.props.isAgent.address1}</h5>\n                                                </figcaption>\n                                            ) : \"\"\n                                            }\n                                        </figure>\n                                    </div>\n                                    <div className=\"col-md-5 purva-bg\">\n                                        <div className=\"purva\">\n                                            <h1 dangerouslySetInnerHTML={{__html: blog.title}}></h1>\n                                            <div className=\"blogContentArea\" style={{marginBottom: '10px'}} dangerouslySetInnerHTML={{__html: blog.excerpt}}></div>\n\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </section>\n                    </div>\n                ):\"\"}\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div id=\"detailssection\" className=\"border mar-btm-20 background-white col-md-9 col-sm-12 col-xs-12\">\n                                <div className=\"head-border-bottom head-border-bottomTitleArea\">\n                                    <h1 dangerouslySetInnerHTML={{__html: blog.title}}></h1>\n                                </div>\n                                <div className=\"developer proj-dtls \">\n                                    <div className=\"clearfix\">\n                                        <div className=\"col-md-12 blogContentArea\" style={{marginBottom: '10px'}} dangerouslySetInnerHTML={{__html: blog.content}}>\n\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            {this.props.data.related ?(\n                                <div id=\"\" className=\"rightRelatedSection mar-btm-30 amenities col-md-3 col-sm-12 col-xs-12\">\n                                    <div className=\"head-border-bottom head-border-bottomTitleArea\"><h2>Similar Articles</h2></div>\n                                        <div className=\"background-white\" style={{float:'left',display:'block'}}>\n                                            <p style={{margin: '0px 0px 5px 5px'}}>Below are few more articles similar to <span dangerouslySetInnerHTML={{__html: blog.title}}></span></p>\n                                            <ul className={\"thumbnails thumbRelated\"}>\n                {\n                    this.props.data.related.map(function (relatedBlog,i) {\n\n                    // style={{width: 250, height: 188}}\n                    return (\n                    <li className=\"span4\" key={i} style={{float:'left'}}>\n                        <a href={ FlowRouter.url('blogdetail',{slug:relatedBlog.slug}) }>\n                            <div className=\"thumbnail\">\n                                {relatedBlog.image.src ? (\n                                    <img src={relatedBlog.image.src} width={relatedBlog.image.width} height={relatedBlog.image.height}\n                                    alt={relatedBlog.title}\n                                    className=\"img-responsive\"/>\n                                    ) : (\n                                    <img src={cdnPath(\"/images/no-photo.png\")}\n                                         alt={'Image not available'}\n                                         className=\"img-responsive\" style={{width: 250, height: 188}}/>\n                                )}\n                                <h3 dangerouslySetInnerHTML={{__html: relatedBlog.title}}></h3>\n                        </div></a>\n                    </li>\n                    )\n                }\n                )\n                }\n                                                </ul>\n                                            </div>\n                                 </div>\n                            ): \"\"}\n                            {this.props.recentBlogs ?(\n                                <div id=\"realtedsection\" className=\"background-white mar-btm-30 amenities col-md-12 col-sm-12 col-xs-12\">\n                                    <div className=\"head-border-bottom head-border-bottomTitleArea\"><h2>Recent Articles</h2></div>\n                                        <div className=\"amenitiy-block\" style={{float:'left',display:'block'}}>\n                                            <p style={{margin: '0 20px'}}>Below are few more recenty updated articles similar to <span dangerouslySetInnerHTML={{__html: blog.title}}></span></p>\n                                            <ul className={\"thumbnails thumbRelated\"}>\n                {\n                    this.props.recentBlogs.map(function (relatedBlog,i) {\n\n                    // style={{width: 250, height: 188}}\n                    return (\n                    <li className=\"span4\" key={i} style={{float:'left'}}>\n                        <a href={ FlowRouter.url('blogdetail',{slug:relatedBlog.slug}) }>\n                            <div className=\"thumbnail\">\n                                {relatedBlog.image ? (\n                                    <img src={relatedBlog.image} style={{width: 250, height: 188}}\n                                    alt={relatedBlog.title}\n                                    className=\"img-responsive\"/>\n                                    ) : (\n                                    <img src={cdnPath(\"/images/no-photo.png\")}\n                                         alt={'Image not available'}\n                                         className=\"img-responsive\" style={{width: 250, height: 188}}/>\n                                )}\n                                <h3 dangerouslySetInnerHTML={{__html: relatedBlog.title}}></h3>\n                        </div></a>\n                    </li>\n                    )\n                }\n                )\n                }\n                                                </ul>\n                                            </div>\n                                 </div>\n                            ): \"\"}\n\n                        </div>\n                    </div>\n                </section>\n\n        )\n    }\n\n    renderFullMain(){\n\n        if(Meteor.isClient){\n            setTimeout(function(){\n                $('#lettingDetailCarousel').carousel();\n                $('#lettingDetailCarousel .carousel-control.right').unbind('click').bind('click',function(){$('#lettingDetailCarousel').carousel('next')})\n                $('#lettingDetailCarousel .carousel-control.left').unbind('click').bind('click',function(){$('#lettingDetailCarousel').carousel('prev')})\n            },1000)\n        }\n\n        return (\n            <div className=\"property-details-page\" id={'props_list'}>\n                {\n                    Meteor.isServer ? (\n                        <div id={\"isservercheckdiv\"}></div>\n                    ):\"\"\n                }\n\n                <section className=\"banner\">\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <nav aria-label=\"breadcrumb\">\n                                <ol className=\"breadcrumb\" style={{margin:\"10px 0\"}}>\n                                    <li className=\"breadcrumb-item\"><a href={FlowRouter.url('home')}>Home</a></li>\n                                    <li className=\"breadcrumb-item\"><a href={FlowRouter.url('bloghome')}>Blogs</a></li>\n                                    <li className=\"breadcrumb-item active\" aria-current=\"page\">This Article</li>\n                                </ol>\n                            </nav>\n                        </div>\n                    </div>\n                </section>\n\n                {\n                    this.props.isSubsLoaded ?\n                        this.props.data ? this.renderMain() :\n                            (\n                                <section className=\"\">\n                                    <div className=\"container text-center mar-top-20 pad-btm-30\">\n                                        <div className=\"filter-holder\">\n                                            <div className=\"mar-top-30\">\n                                                <span>\n                                                    <strong>This article is not found. Please check the url and try again.</strong><br /><br />\n                                                    <a href={FlowRouter.url('bloghome')} className=\"blue-btn btns noPropBackBtn\">Find recent articles</a>\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </section>\n                            )\n                        :\n                        (\n                            <section className=\"mar-top-20 mar-btm-20 no-print\">\n                                <div className=\"container text-center mar-top-20 pad-btm-30\">\n                                    <div className=\"filter-holder\">\n                                        <div className=\"mar-top-30\">\n                                            <div className={'h2-div'}>Loading...</div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </section>\n                        )\n                }\n            </div>\n        )\n    }\n\n    render() {\n        const self = this;\n        if(Meteor.isClient && this.propsListHTML==\"\"){\n            this.propsListHTML = $('#props_list').html()\n        }\n        if(Meteor.isClient) {\n            this.isServerSSRReq = $('#isservercheckdiv').html()\n            if (this.isServerSSRReq == \"\") this.isServerSSRReq = true\n            else this.isServerSSRReq = false\n        }\n        // if(this.propsListHTML) console.log(\"propsListHTML: \"+this.propsListHTML.length)\n\n        return (\n            <div>\n                <MainLayoutHeader />\n                { (this.props.isSubsLoaded )  ? (\n                        this.renderFullMain()\n                    ) :\n                    this.isServerSSRReq && this.propsListHTML? (\n                        <div dangerouslySetInnerHTML={{__html: this.propsListHTML}}></div>\n                    ): (\n                        <section className=\"mar-top-20 mar-btm-20 no-print\">\n                            <div className=\"container text-center mar-top-20 pad-btm-30\">\n                                <div className=\"filter-holder\">\n                                    <div className=\"mar-top-30\">\n                                        <div className={'h2-div'}>Loading...</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </section>\n                    )}\n                <MainLayoutFooter />\n            </div>\n        )\n    }\n}\n\nexport default withTracker(() => {\n\n    var slug = FlowRouter.getParam('slug'); if(!slug)return {data:false,isSubsLoaded:true};\n\n    const viewBlogSub = Meteor.subscribe(\"viewBlog\",slug,function(){\n        Session.set('subscriptionsReady',true);\n    })\n    if(Meteor.isClient)Session.get('subscriptionsReady');\n\n    if( !viewBlogSub.ready() ) {\n        return {data: false, isSubsLoaded:false};\n    }\n\n    var blog = Collections.Blogs.find({\"slug\" : slug}, { limit: 1 }).fetch();\n    if(blog.length){\n        blog = blog[0];\n    }\n    var recentBlogs = Collections.Blogs.find({\"slug\" : {$not: slug}}, { sort: {updatedAt:-1} }).fetch();\n\n    if(!blog || blog.length==0){//Blog not found\n        clearMeta();\n        DocHead.setTitle('Article not found | SpotMyCrib');\n        DocHead.addMeta({name: \"description\", content: \"\"});\n        return {\n            data: false,\n            recentBlogs: recentBlogs,\n            isSubsLoaded:true\n        }\n    }else{\n        var title = blog.metaTitle; //Is Rental Cap Able to Control the Housing Market Crisis? - Blog - SpotMyCrib\n        var desc = blog.metaDesc;\n\n        clearMeta();\n        let titleTmp = title + ' | SpotMyCrib Blog'\n        if(titleTmp.length<=75)title = titleTmp;\n\n        DocHead.setTitle(title);\n        DocHead.addMeta({\n            name: \"description\",\n            content: desc\n        });\n\n        var socialDesc = blog.metaDesc;\n        var socialTitle = blog.metaTitle;\n        var currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params);\n        DocHead.addMeta({property: \"og:title\", content: socialTitle});\n        DocHead.addMeta({property: \"og:description\", content: socialDesc});\n\n        DocHead.addMeta({rel: \"canonical\", href: currentURL  });\n\n        DocHead.addMeta({property: \"og:type\", content: \"article\"});\n        DocHead.addMeta({property: \"og:url\", content: currentURL });\n        DocHead.addMeta({property: \"fb:app_id\", content: '309356899476430'})\n\n        try{DocHead.addMeta({property: \"og:image\", content: blog.image  }); }\n        catch (c){\n            //Putting this here is making FB take the first response from here. & its showing no image if if this meta is later updated. So better put it later after all rendering at a template level. For now lets not keep anywhere.\n            // DocHead.addMeta({name: \"og:image\", content: 'https://www.spotmycrib.ie/images/spot-my-crib-logo.png'  });\n        }\n    }\n\n\n    return {\n        data: blog,\n        recentBlogs: recentBlogs,\n        isSubsLoaded:true\n    };\n})(blogDetail);\n\nclass ImagesSlider extends Component {\n    constructor(props) {\n        super(props)\n        var current = FlowRouter.current();\n        this.currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params)\n    }\n    componentDidMount(){\n        $(document).ready(function() {\n            // $('#lettingDetailCarousel').first().addClass('active');//not needed as bug of isActive helper not working is fixed.\n\n            $('#imagessection .item img').width('100%')\n            var w = $('#imagessection .item img').first().width()\n            var h = w/1.33;\n            if(h>250)$('#imagessection .item img').height(w/1.33)\n            setTimeout(function () {\n                $('#imagessection .item img').width('100%')\n                var w = $('#imagessection .item img').first().width()\n                var h = w/1.33;\n                if(h>250)$('#imagessection .item img').height()\n            },3000)\n\n            // $('#lettingDetailCarousel').carousel();\n            // $(\"#lettingDetailCarousel\").swiperight(function() {\n            //     $(this).carousel('prev');\n            // });\n            // $(\"#lettingDetailCarousel\").swipeleft(function() {\n            //     $(this).carousel('next');\n            // });\n        });\n    }\n    render() {\n        return (\n\n            <div id=\"lettingDetailCarousel\" className=\"carousel slide\" data-ride=\"carousel\">\n                <div className=\"carousel-inner\">\n                    {this.props.images ?\n                        this.props.images.map(function(image,i){\n                            return (\n                            <div key={i} className={'item '+ (i==0 ? 'active' : \"\")}>\n                                <img src={image.url} alt={image.altText} title={image.altText} className=\"img-responsive\"/>\n                            </div>\n                            )\n                        })\n                    :(\n                        <div className=\"item active\">\n                            <img src={cdnPath(\"/images/no-photo.png\")} alt={'Image not available'} title={'Image not available'} className=\"img-responsive\"/>\n                        </div>\n                    )}\n                </div>\n                {/* Left and right controls */}\n                <a className=\"left carousel-control\" href={\"javascript:void(0)\"} data-slide=\"prev\">\n                    <span className=\"glyphicon glyphicon-chevron-left\"/>\n                    <span className=\"sr-only\">Previous</span>\n                </a>\n                <a className=\"right carousel-control\" href={\"javascript:void(0)\"} data-slide=\"next\">\n                    <span className=\"glyphicon glyphicon-chevron-right\"/>\n                    <span className=\"sr-only\">Next</span>\n                </a>\n            </div>\n        );\n    }\n}\n","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport { withTracker } from 'meteor/react-meteor-data';\n\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nimport { Collections } from  '../../api/collections.js'\nif(Meteor.isClient)Session.set('subscriptionsReady',false);\n\nlet countsCollection = null;\nfunction dateFormat(text){\n    var date = new Date(text)\n    if(date.toString() == \"Invalid Date\")return 'N/A';\n    return  date.toDateString();\n}\n\nclass Pagination extends Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    componentDidMount() {\n        // console.log(this.props)\n    }\n    \n    render() {\n        const self = this;\n        return (\n        <nav>\n            <ul className=\"pagination\">\n                <li className={\"page-item \" +self.props.pagination.prevPage.disabled}>\n                    <a \n                    className=\"page-link\" \n                    href={self.props.pagination.prevPage.href} \n                    tabIndex=\"-1\"\n                    onClick={self.props.handleChoosePage.bind(self, self.props.pagination.prevPage.prevPageNo, self.props.parent)}\n                    >{self.props.pagination.prevPage.text}\n                    </a>\n                </li>\n                {self.props.pagination.pages.map((page, i) => {\n                    if(typeof page.current !== 'undefined' && page.current) {\n                        return (\n                            <li key={i} className=\"page-item active\">\n                                <a className=\"page-link\" href={page.href}>{page.text} <span className=\"sr-only\">(current)</span></a>\n                            </li>\n                        );\n                    } else {\n                        return (\n                           <li key={i} className=\"page-item\">\n                            <a \n                            className=\"page-link\" \n                            onClick={self.props.handleChoosePage.bind(self, page.text, self.props.parent)}\n                            href={page.href}\n                            >{page.text}\n                            </a>\n                           </li>\n                        );\n                    }\n                })}\n                <li className={\"page-item \" + self.props.pagination.nextPage.disabled}>\n                    <a \n                    className=\"page-link\" \n                    href={self.props.pagination.nextPage.href}\n                    onClick={self.props.handleChoosePage.bind(self, self.props.pagination.nextPage.nextPageNo, self.props.parent)}\n                    >{self.props.pagination.nextPage.text}\n                    </a>\n                </li>\n            </ul>\n        </nav>\n        )\n    }\n}\n\nclass BlogHome extends Component {\n\n    constructor(props) {\n        super(props);\n\n        let pBlogs = props.blogs; if(!pBlogs)pBlogs = [];\n        let pTotalCount = props.totalCount; if(!pTotalCount)pTotalCount = 0;\n        let pPagination = props.pagination; if(!pPagination)pPagination = 0;\n        this.state = {\n            blogs: pBlogs,\n            totalCount: pTotalCount,\n            pagination: pPagination,\n        };\n        this.propsListHTML = '';\n        this.isServerSSRReq = '';\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.setState({\n            blogs: nextProps.blogs,\n            totalCount: nextProps.totalCount,\n            pagination: nextProps.pagination\n        });\n    }\n\n    componentWillMount() {}\n\n    componentDidMount() {\n        const self = this;\n        setTimeout(function(){\n            try {\n                jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n            } catch (e) {\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\n            }\n        },500)\n    }\n    componentDidUpdate() {}\n    handleChoosePage(page, component) {\n        if (typeof page == \"undefined\") return\n\n        // var data = getSlugData();\n        // var slug = generateSlug(data);\n        //\n        // FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0], pageno: page}, slug[1]);\n        //\n        // component.setState({pagination: pagination()});\n    }\n\n    propGrid() {\n        const self = this;\n        let blogImage = '';\n        return (\n            <div className=\"row\">\n                {self.state.blogs.map((blog, i) => {\n                    if(blog.image){\n                        let tmp = blog.image.split('?');\n                        blogImage = tmp[0]+\"?resize=200%2C140\";\n                    }else{\n                        blogImage='';\n                    }\n                    return (\n                        <section key={i} className=\"main-holder border-top mar-btm-10\" id>\n                            <div className=\"container\">\n                                <div className=\"act-box\">\n                                    <div className=\"background-white\">\n                                        <div className=\"logo-holder-div\" style={{padding: '10px 20px'}}>\n                                            <div className=\"logo-holder\">\n                                                <ul>\n                                                    <li>\n                                                        <a href={FlowRouter.url('blogdetail', {slug: blog.slug})}>\n                                                            <h3 className=\"pad-btm-0\" dangerouslySetInnerHTML={{__html: blog.title}}></h3>\n                                                        </a>\n                                                    </li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"apt-info1 background-white clearfix\">\n                                        <div className=\"media\">\n                                            { blogImage ?\n                                                (\n                                                <a className=\"pull-left\" href={FlowRouter.url('blogdetail', {slug: blog.slug})}>\n                                                    <img className=\"media-object\" src={blogImage} alt={blog.title}/>\n                                                </a>\n                                                )\n                                                :\n                                                (\n                                                <img src={cdnPath(\"/images/no-photo.png\")}\n                                                alt={'Image not available'}\n                                                className=\"img-responsive\"/>\n                                                )\n                                            }\n\n                                            <div className=\"media-body\">\n                                                <div className=\"text-left mar-btm-10\" dangerouslySetInnerHTML={{__html: blog.excerpt}}></div>\n                                                {/*... <span className=\"read-more\"><a href={FlowRouter.url('blogdetail', {slug: blog.slug})}>Read More &raquo;</a></span>*/}\n                                                <ul className=\"list-inline list-unstyled\">\n                                                    <li><span><i className=\"glyphicon glyphicon-calendar\" /> {dateFormat(blog.created)} </span></li>\n                                                    {/*<li>|</li>*/}\n                                                    {/*<li>*/}\n                                                        {/*/!* Use Font Awesome http://fortawesome.github.io/Font-Awesome/ *!/*/}\n                                                        {/*<span><i className=\"fa fa-facebook-square\" /></span>*/}\n                                                        {/*<span><i className=\"fa fa-twitter-square\" /></span>*/}\n                                                        {/*<span><i className=\"fa fa-google-plus-square\" /></span>*/}\n                                                    {/*</li>*/}\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </section>\n                    );\n                })}\n            </div>\n        )\n    }\n    mainAllPage(){\n        const self = this;\n        return (\n            <div id=\"props_list\">\n                <section className=\"logo-below-div value-div\">\n                    <div className=\"container\">\n                        <div className=\"logo-holder-div\">\n                            <div className=\"logo-holder\">\n                                <ul>\n                                    <li>\n                                        <h1 style={{marginBottom: 10}}>Blog – SpotMyCrib</h1>\n                                        <div className=\"h4-div\" style={{paddingBottom: 5}}>Property renting tips, management and much more</div>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n\n                { self.state.totalCount == 0 && this.props.isSubsLoaded ? (\n                    <div className=\"container text-center mar-top-20 pad-btm-30\">\n                        <strong>\n                            No blogs found.\n                        </strong>\n                    </div>\n                ) : (\"\")}\n\n                { self.state.totalCount > 0 ? (\n                    <section className=\"paginationArea mar-top-20 \">\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-md-12\">\n                                    <p className={'mar-btm-20'}>\n                                        Found total {self.state.totalCount ? self.state.totalCount : 'no'} articles. Browse the latest property news, renting tips, management and much more. Use the navigation below to find more.\n                                    </p>\n                                    <Pagination\n                                        pagination={self.state.pagination}\n                                        handleChoosePage={self.handleChoosePage}\n                                        parent={self}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                ) : (\"\")}\n\n                {\n                    Meteor.isServer ? (\n                        <div id={\"isservercheckdiv\"}></div>\n                    ):\"\"\n                }\n\n                { self.state.totalCount > 0 ? (\n                <section className=\"proplist-sec property-list\">\n                    <div className=\"container\">\n                        {this.propGrid()}\n                    </div>\n                </section>\n                ) : (\"\")}\n                { self.state.totalCount > 0 ? (\n                    <section className=\"paginationArea\">\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-md-12\">\n                                    <Pagination\n                                        pagination={self.state.pagination}\n                                        handleChoosePage={self.handleChoosePage}\n                                        parent={self}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                ) : (\"\")}\n\n            </div>\n        )\n    }\n\n    render() {\n    const self = this;\n    let totalCount = 0;\n    if(Meteor.isClient && this.propsListHTML==\"\"){\n        this.propsListHTML = $('#props_list').html()\n    }\n    if(Meteor.isClient) {\n        this.isServerSSRReq = $('#isservercheckdiv').html()\n        if (this.isServerSSRReq == \"\") this.isServerSSRReq = true\n        else this.isServerSSRReq = false\n    }\n    // if(this.propsListHTML) console.log(\"propsListHTML: \"+this.propsListHTML.length)\n    return (\n            <div>\n                <MainLayoutHeader />\n                { (this.props.isSubsLoaded && self.state.blogs )  ? (\n                        this.mainAllPage()\n                    ) :\n                    this.isServerSSRReq && this.propsListHTML? (\n                        <div dangerouslySetInnerHTML={{__html: this.propsListHTML}}></div>\n                    ): (\n                        <section className=\"mar-top-20 mar-btm-20 no-print\">\n                            <div className=\"container text-center mar-top-20 pad-btm-30\">\n                                <div className=\"filter-holder\">\n                                    <div className=\"mar-top-30\">\n                                        <div className={'h2-div'}>Loading...</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </section>\n                )}\n                <MainLayoutFooter />\n            </div>\n        )\n    }\n};\n\nexport default withTracker(() => {\n    \n    function getPaginationData(totalResultsCount,currentPageNo,resultsPerPage) {\n        currentPageNo = parseInt(currentPageNo);\n        var pages = [], prevPage = {}, nextPage={};\n        var pgMin = currentPageNo-4, pgMax = currentPageNo+ 5, maxPages = Math.ceil(totalResultsCount/resultsPerPage);\n        if(!Number.isInteger(currentPageNo)){\n            return {\n                \"prevPage\":prevPage,\n                \"pages\":pages,\n                \"nextPage\": nextPage\n            }\n        }\n        \n        if(pgMin<1)pgMin =1;\n        if(pgMax<1)pgMax =1;\n        if(maxPages<1)maxPages =1;\n        if(pgMin>maxPages)currentPageNo =maxPages;\n\n        let tmp={};let href = '';\n        let cRoute = FlowRouter.current().route.name, cParams = FlowRouter.current().params, cQueryParams = FlowRouter.current().queryParams;\n        for (var i=pgMin; i<=maxPages;i++){\n            cParams.pageno = i;\n            tmp = {\n                \"href\": FlowRouter.url(cRoute, cParams, cQueryParams),\n                \"text\": i\n            }\n            if(i== currentPageNo) {\n                tmp['href'] = 'javascript:void(0);';\n                tmp['current'] = true;\n            }\n            pages.push(tmp)\n        }\n\n        var prevPageNo = currentPageNo- 1, nextPageNo=currentPageNo+ 1;\n        \n        if(prevPageNo<1){\n            prevPage['href'] = 'javascript:void(0)';\n            prevPage['text'] = 'Previous';\n            prevPage['disabled'] = 'disabled';\n        }else{\n            cParams.pageno = prevPageNo;\n            prevPage['href'] = FlowRouter.url(cRoute, cParams, cQueryParams),\n            prevPage['prevPageNo'] = prevPageNo;\n            prevPage['text'] = 'Previous';\n            prevPage['disabled'] = '';\n        }\n\n        if(nextPageNo>maxPages) nextPageNo = maxPages;\n        if(nextPageNo == currentPageNo){\n            nextPage['href'] = 'javascript:void(0)';\n            nextPage['text'] = 'Next';\n            nextPage['disabled'] = 'disabled';\n        }else{\n            cParams.pageno = nextPageNo;\n            nextPage['href'] = FlowRouter.url(cRoute, cParams, cQueryParams),\n            nextPage['text'] = 'Next';\n            nextPage['nextPageNo'] = nextPageNo;\n            nextPage['disabled'] = '';\n        }\n\n        return {\n            \"prevPage\":prevPage,\n            \"pages\":pages,\n            \"nextPage\": nextPage\n        }\n    }\n\n    var pageno = FlowRouter.getParam('pageno'); if(!pageno)pageno=1;\n    var resperpage = 6;\n    // var query = FlowRouter.current().queryParams;\n    var current = FlowRouter.current();\n    var currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params, FlowRouter.current().queryParams)\n\n    var sortOptions = { updatedAt : -1 }\n\n    const bBlogsSub = Meteor.subscribe(\"browseBlogs\", {viewName: 'browseBlogs.view', pageno:pageno, resperpage:resperpage } ,function(){\n        if(bBlogsSub.ready() && Meteor.isClient)Session.set('subscriptionsReady',true);\n    });\n\n    Meteor.subscribe(\"total-blogs-count\", {viewName: 'browseBlogs.view', pageno:pageno, resperpage:resperpage});\n\n    if(Meteor.isServer){\n        if(countsCollection==null)countsCollection = new Mongo.Collection('counts');\n        Counts.get = function countsGet(name) {\n            const count = countsCollection.findOne(name);\n            return count && count.count || 0;\n        };\n        Counts.has = function countsHas(name) {\n            return !!countsCollection.findOne(name);\n        };\n\n        totalCount = Counts.get(\"total-blogs-count\");\n\n    }else{\n        totalCount = Counts.get(\"total-blogs-count\");\n    }\n\n    // Meteor.subscribe('userData');\n    // Meteor.subscribe('Config');\n\n    if(Meteor.isClient)Session.get('subscriptionsReady');\n    if( !bBlogsSub.ready() ) {\n        return {\n            isSubsLoaded : false\n        }\n    }\n\n    return {\n        totalCount: totalCount,\n        pagination: getPaginationData(totalCount,pageno,6),\n        blogs: Collections.Blogs.find().fetch(),\n        isSubsLoaded : true\n    };\n})(BlogHome);","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport { withTracker } from 'meteor/react-meteor-data';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\nimport {Collections} from \"../../api/collections\";\nif(Meteor.isClient)Session.set('subscriptionsReady',false);\n\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction saveToLocalStorage(){\n    if(Meteor.isServer)return;\n    if (localStorage) {\n        // if($( \".countySelected\" ).val().toString().trim()) //It needs to work even all options are reset, i.e its empty.\n        localStorage.homePageMainFormData_county = $( \".countySelected\" ).val();\n        // if($( \".areaSelected\" ).val().toString().trim())//it needs to reset to empty\n        localStorage.homePageMainFormData_area = $( \".areaSelected\" ).val();\n        var tmp = $( \"input:radio[name=propertyType]:checked\" ).val();\n        if(tmp)localStorage.homePageMainFormData_propertyType = tmp\n        localStorage.homePageMainFormData_maxRent = $('.maxRent').val();\n    }\n}\nfunction slugify (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '')           // Replace spaces with \"\"\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with ''\n        .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single ''\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}\nfunction generateSlug(curURL){\n    var propertyType = curURL.propertyType;\n    var county = curURL.county\n    var area = curURL.area\n    var maxRent = curURL.maxRent\n    var country = curURL.country;\n    // const territory = target.territory.value;\n\n    var slug='';\n    var query=[];\n\n    if(propertyType)propertyType = propertyType.replace(/\\s+/g, '_')\n    if(county)county = county.replace(/\\s+/g, '_')\n    if(area)area = area.replace(/\\s+/g, '_')\n    if(country)country = country.replace(/\\s+/g, '_')\n\n    if(propertyType)slug=propertyType+\"-for-\"\n    slug+=\"rent\"\n    // if(areaSelected||countySelected||country)\n    slug+=\"-in-\"\n\n    if(!county)area = '';\n\n    if(area)slug+=area\n    if(area && county)slug+=\"-\"\n    if(county)slug+=county\n\n    if(country)slug+=\"-\"+country\n\n    var range = [{cur:\"eur\",min:400,max:10000}]\n    var selectedCur = range[0];\n    if(maxRent && maxRent!=selectedCur.max)query[\"maxRent\"] = maxRent;\n\n    // apartment-for-rent-in-dundrum-dublin-ireland\n    // apartment-for-rent-in-donnybroke-london-uk\n    // rent/apartment/dundrum/dublin\n    // rent/apartment/donnybroke/london/england/uk/\n    return [\n        slugify(slug),\n        query\n    ]\n}\nfunction chunkify(a, n, balanced) {\n\n    if (n < 2)\n        return [a];\n\n    var len = a.length,\n        out = [],\n        i = 0,\n        size;\n\n    if (len % n === 0) {\n        size = Math.floor(len / n);\n        while (i < len) {\n            out.push(a.slice(i, i += size));\n        }\n    }\n\n    else if (balanced) {\n        while (i < len) {\n            size = Math.ceil((len - i) / n--);\n            out.push(a.slice(i, i += size));\n        }\n    }\n\n    else {\n\n        n--;\n        size = Math.floor(len / n);\n        if (len % size === 0)\n            size--;\n        while (i < size * n) {\n            out.push(a.slice(i, i += size));\n        }\n        out.push(a.slice(size * n));\n\n    }\n\n    return out;\n}\nfunction generateSlug(curURL){\n    var propertyType = curURL.propertyType;\n    var county = curURL.county\n    var area = curURL.area\n    var maxRent = curURL.maxRent\n    var country = curURL.country;\n    var bedCount = curURL.bedCount;\n    var luxurySort = curURL.luxurySort;\n    var cheapSort = curURL.cheapSort;\n    // const territory = target.territory.value;\n\n    var slug='';\n    var query={};\n\n    if(propertyType)propertyType = propertyType.replace(/\\s+/g, '_')\n    if(county)county = county.replace(/\\s+/g, '_')\n    if(area)area = area.replace(/\\s+/g, '_')\n    if(country)country = country.replace(/\\s+/g, '_')\n\n    if(propertyType)slug=propertyType+\"-for-\"\n    slug+=\"rent\"\n    // if(areaSelected||countySelected||country)\n    slug+=\"-in-\"\n\n    if(!county)area = '';\n\n    if(area)slug+=area\n    if(area && county)slug+=\"-\"\n    if(county)slug+=county\n\n    if(bedCount)query.bedCount = bedCount;\n    if(luxurySort)query.luxurySort = 1;\n    if(cheapSort)query.cheapSort = 1;\n\n    if(country)slug+=\"-\"+country\n    else slug+=\"-ireland\"\n\n    var range = [{cur:\"eur\",min:400,max:10000}]\n    var selectedCur = range[0];\n    if(maxRent && maxRent!=selectedCur.max)query.maxRent = maxRent;\n\n    // apartment-for-rent-in-dundrum-dublin-ireland\n    // apartment-for-rent-in-donnybroke-london-uk\n    // rent/apartment/dundrum/dublin\n    // rent/apartment/donnybroke/london/england/uk/\n    return [\n        slugify(slug),\n        query\n    ]\n}\nfunction generateSlugURL(curURL){\n    var ret = generateSlug(curURL)\n    return FlowRouter.url('b',{slug:ret[0]},ret[1]);\n}\nfunction fixImageSize() {\n    var avgW=0;\n    $('.image-holder img').each(function(){\n\n        if(!avgW)avgW = $(this).width();\n        else {\n            avgW += $(this).width();\n            avgW =  avgW / 2;\n        }\n    })\n    if(!avgW)avgW = 250;\n    $('.image-holder img').width('100%');\n    $('.image-holder img').height(avgW*0.7);\n}\nclass Home extends Component {\n\n    constructor(props) {\n        super(props);\n        var searchCrumbs = {c1:[],c2:[],c3:[]}\n        var fCrumbs = {c1:[],c2:[],c3:[]}\n        var areaCrumbs = {c1:[],c2:[],c3:[]}\n        var countyCrumbs = {c1:[],c2:[],c3:[]}\n        if(props.searchCrumbs){\n            var chunks = chunkify(props.searchCrumbs,3,true)\n            searchCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n        }\n        if(props.fCrumbs){\n            var chunks = chunkify(props.fCrumbs,3,true)\n            fCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n        }\n        if(props.areaCrumbs){\n            var chunks = chunkify(props.areaCrumbs,3,true)\n            areaCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n        }\n        if(props.countyCrumbs){\n            var chunks = chunkify(props.countyCrumbs,3,true)\n            countyCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n        }\n        this.state = {\n            'searchCrumbs':searchCrumbs,fCrumbs:fCrumbs,areaCrumbs:areaCrumbs,countyCrumbs:countyCrumbs\n        }\n        this.searchCrumbsLoaded = false;\n\n    }\n    componentWillMount(){\n        if(Meteor.isClient) Session.set('showLoginInPlace',false);\n        // console.log('In componentWillMount');\n    }\n\n    componentDidMount() {\n        // console.log('In componentDidMount');\n        if ( /^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {\n            $('select').addClass('safariSelect')//css('-moz-appearance','none');\n        }\n   \n        $('.iamarenterbtn').click(function (e) {\n            e.preventDefault();\n            $('html,body').animate({scrollTop: $(this.hash).offset().top }, 500,function(){\n                $(\".bigsearchbox\").css({border: '0 solid red','background-color':\"rgba(0, 0, 0, 0.8)\"}).animate({\n                    borderWidth: 2,\n                    'background-color':\"rgba(0, 0, 0, 1)\"\n                }, 500, function() {\n                    $(\".bigsearchbox\").animate({\n                        borderWidth: 0,\n                        'background-color':\"rgba(0, 0, 0, 0.8)\"\n                    }, 500);\n                });\n            })\n        });\n\n        if(Meteor.isClient) {\n            setTimeout(function(){\n                if(window.location.hash){\n                    jQuery(\"html,body\").animate({scrollTop: $(window.location.hash).offset().top }, 250);\n                }\n            },2000)\n        }\n    }\n    \n    componentDidUpdate() {\n    }\n\n    crumbsUpdate(){\n        if(!this.searchCrumbsLoaded){\n            var searchCrumbs = {c1:[],c2:[],c3:[]}\n            var fCrumbs = {c1:[],c2:[],c3:[]}\n            var areaCrumbs = {c1:[],c2:[],c3:[]}\n            var countyCrumbs = {c1:[],c2:[],c3:[]}\n            if(this.props.searchCrumbs){\n                var chunks = chunkify(this.props.searchCrumbs,3,true)\n                searchCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n                this.searchCrumbsLoaded = true;\n            }\n            if(this.props.fCrumbs){\n                var chunks = chunkify(this.props.fCrumbs,3,true)\n                fCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n                this.searchCrumbsLoaded = true;\n            }\n            if(this.props.areaCrumbs){\n                var chunks = chunkify(this.props.areaCrumbs,3,true)\n                areaCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n                this.searchCrumbsLoaded = true;\n            }\n            if(this.props.countyCrumbs){\n                var chunks = chunkify(this.props.countyCrumbs,3,true)\n                countyCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n                this.searchCrumbsLoaded = true;\n            }\n            if(this.searchCrumbsLoaded)//Update the state only once; when its true\n                this.setState({'searchCrumbs':searchCrumbs,fCrumbs:fCrumbs,areaCrumbs:areaCrumbs,countyCrumbs:countyCrumbs})\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log(nextProps)\n        // console.log(this)\n        // console.log('In componentWillReceiveProps');\n        this.crumbsUpdate();\n    }\n\n    handleJoinNow() {\n        Session.set('showForgotForm',false)\n        Session.set('isLandLordMode',true)\n        Session.set('showSignupForm',true)\n        Session.set('showLoginSignupFancyBoxDialog',true)\n        Session.set('showLoginDialog',true)\n    }\n    \n    handlePostYourProperty(event) {\n        event.preventDefault();\n        var prevRoute = {name: FlowRouter.current().route.name,args:{scrollTo:0},instructions:{openPostNewProp:true} }\n        Session.set('prevRoute',prevRoute);\n        FlowRouter.go('account/myProperties')\n    }\n\n    render() {\n        const self = this;\n        return (\n        <div>\n            <MainLayoutHeader />\n            <div className=\"index home\">\n                <section className=\"\" id=\"searchform\">\n                    <div className=\"index-main-banner\">\n                        <div className=\"container\">\n                            <div className=\"index-bnr-cont\">\n                                \n                                { true ? (\n                                <div id=\"homeSliderParent\" >\n                                    <div id=\"homeSlider\">\n                                        <div className=\"carousel-inner\">\n                                            <div className=\"item active\">\n                                                <p>Best properties to rent in Ireland. Find them, right here!</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                ) : \"\"}\n                                <div className=\"home-banner\" style={{marginBottom: \"50px\"}}>\n                                    <a className=\"btns green-btn \" href={FlowRouter.url('estateagent')} style={{fontSize:'15px'}}>I'm a Landlord</a>\n                                    <a className=\"btns transparent-btn iamarenterbtn\" href=\"#searchform\">I'm a Renter</a>\n                                </div>\n                                <div className=\"box-places home-page-box-places bigsearchbox\">\n                                    <ul>\n                                        <li>\n                                            <HomePageMainFormT />\n                                        </li>\n                                    </ul>\n                                </div>\n                                \n                            </div>\n                        </div>\n                    </div>\n                </section>\n                <HomePageLatestPropsT />\n                {true ? (\n                <section id=\"homeLinks\" className=\"sec-holder how-it-works\">\n                    <div className=\"container\">\n\n                        <div className=\"row\">\n                            <div className=\"col-md-12\">\n                                <div id=\"\" className=\"mar-btm-30 amenities\">\n\n                                    <div className=\"\" style={{paddingTop:0}}>\n                                        { this.props.fCrumbs === undefined || this.props.fCrumbs.length == 0 ? (\"\") : (\n                                            <div className={'bottomcrumbs row'}>\n                                                <h2>Browse properties to rent in top cities</h2>\n                                                <span className=\"bottom-line\"></span>\n                                                <div className=\"col-md-12 col-sm-12 col-xs-12 pad0\">\n                                                    <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                        {this.state.fCrumbs.c1 ?\n                                                            this.state.fCrumbs.c1.map(function (crumb, i) {\n                                                                return (\n                                                                    <a key={i} style={{display: \"block\"}}\n                                                                       href={crumb.url}>{crumb.name}</a>\n                                                                )\n                                                            })\n                                                            : \"\"}\n                                                    </div>\n                                                    <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                        {this.state.fCrumbs.c2 ?\n                                                            this.state.fCrumbs.c2.map(function (crumb, i) {\n                                                                return (\n                                                                    <a key={i} style={{display: \"block\"}}\n                                                                       href={crumb.url}>{crumb.name}</a>\n                                                                )\n                                                            })\n                                                            : \"\"}\n                                                    </div>\n                                                    <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                        {this.state.fCrumbs.c3 ?\n                                                            this.state.fCrumbs.c3.map(function (crumb, i) {\n                                                                return (\n                                                                    <a key={i} style={{display: \"block\"}}\n                                                                       href={crumb.url}>{crumb.name}</a>\n                                                                )\n                                                            })\n                                                            : \"\"}\n                                                        <a style={{display: \"block\"}} className=\"iamarenterbtn\" href=\"#searchform\">More</a>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n                                        { this.props.countyCrumbs === undefined || this.props.countyCrumbs.length == 0  ? (\"\") : (\n                                            <div className={'bottomcrumbs row mar-top-30'}>\n                                                {/*<h2>Counties</h2>*/}\n                                                <span className=\"bottom-line\"></span>\n                                                <div className=\"col-md-12 col-sm-12 col-xs-12 pad0\">\n                                                    <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                        {this.state.countyCrumbs.c1 ?\n                                                            this.state.countyCrumbs.c1.map(function (crumb, i) {\n                                                                return (\n                                                                    <a key={i} style={{display: \"block\"}}\n                                                                       href={crumb.url}>{crumb.name}</a>\n                                                                )\n                                                            })\n                                                            : \"\"}\n                                                    </div>\n                                                    <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                        {this.state.countyCrumbs.c2 ?\n                                                            this.state.countyCrumbs.c2.map(function (crumb, i) {\n                                                                return (\n                                                                    <a key={i} style={{display: \"block\"}}\n                                                                       href={crumb.url}>{crumb.name}</a>\n                                                                )\n                                                            })\n                                                            : \"\"}\n                                                    </div>\n                                                    <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                        {this.state.countyCrumbs.c3 ?\n                                                            this.state.countyCrumbs.c3.map(function (crumb, i) {\n                                                                return (\n                                                                    <a key={i} style={{display: \"block\"}}\n                                                                       href={crumb.url}>{crumb.name}</a>\n                                                                )\n                                                            })\n                                                            : \"\"}\n                                                        <a style={{display: \"block\"}} className=\"iamarenterbtn\" href=\"#searchform\">More</a>\n                                                    </div>\n                                                </div>\n\n                                            </div>\n                                        )}\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>\n                </section>\n                ) : \"\"}\n                <section id=\"whatis\" className=\"sec-holder how-it-works whatissmc\" style={{background:'white'}}>\n                    <div className=\"container\">\n                        <h2>What is SpotMyCrib?</h2>\n                        <span className=\"bottom-line\"></span>\n                        <div className=\"container\">\n                            <p>SpotMyCrib is the safest platform to find your next rental home. It brings 100% verified landlords with genuine rentals to you. Just search for your ideal home, apply, get screened, e-sign your lease and pay rent online.</p>\n                            <a href=\"#how-works\" className=\"scroll1 transparent-btn btns \">Know More</a>\n                        </div>\n                    </div>\n                </section>\n                <section id=\"how-works\" className=\"sec-holder how-it-works\">\n                    <div className=\"container\">\n                        <h2>How it works</h2>\n                        <span className=\"bottom-line\"></span>\n                        <ul className=\"mar-top-30\">\n                            <li>\n                                <h6 className=\"pad-btm-30\">Search Property</h6>\n                                <img src={cdnPath(\"/images/how-it-works/search-and-find-property-apartment-flat.png\")} alt=\"Search and find your rental property\" className=\"pad-btm-30\" />\n                                <p>\n                                    Search and find an apartment/house you like from our <a className=\"iamarenterbtn\" href={FlowRouter.url('home')+'#searchform'}>browse form</a>.\nOr choose your county from our <a href={FlowRouter.url('home')+'#homeLinks'}>county list</a>.\n                                    </p>\n                            </li>\n                            <li>\n                                <h6 className=\"pad-btm-30\">Set Your Rent</h6>\n                                <img src={cdnPath(\"/images/how-it-works/set-your-rent-apartment.png\")} alt=\"Apply and set your rent for Apartment\"  className=\"pad-btm-30\"/>\n                                <p>Make your offer for the house and click apply. Remember to upload all your references in your profile.</p>\n                            </li>\n                            <li>\n                                <h6 className=\"pad-btm-30\">Confirm your Home</h6>\n                                <img src={cdnPath(\"/images/how-it-works/confirm-your-rent-in-dublin.png\")} alt=\"Confirm your rental\"  className=\"pad-btm-30\"/>\n                                <p>Landlord chooses a tenant based on your references and your offer. If you are chosen, you would receive a confirmation email. </p>\n                            </li>\n                        </ul>\n                    </div>\n                    <div className=\"container mar-top-30\">\n                        <a href={FlowRouter.url('faqs')} className=\"transparent-btn btns \" type=\"button\">Learn more</a>\n                        <span className=\"pad-btm-30 visible-xs visible-sm\">&nbsp;</span>\n                    </div>\n                </section>\n                <section className=\"sec-holder about-us\">\n                    <div className=\"container\">\n                        <h1>Manage all your lettings at one place</h1>\n                        <h3 style={{marginTop: \"10px\", color: \"white\"}}>From finding tenants to verifying their social profiles</h3>\n                        <h3 style={{marginTop: \"10px\", color: \"white\"}}>From collecting rents to logging maintenance costs</h3>\n                        <div>\n                        { self.props.currentUserId ?\n                            <a href=\"#TODO\" style={{marginTop: \"10px\"}} onClick={self.handlePostYourProperty} className=\"pink-btn oval-btn postYourProperty\">Post your property</a>\n                        :\n                            <a href=\"javascript:;\" style={{marginTop: \"10px\"}} onClick={self.handleJoinNow} className=\"pink-btn oval-btn joinNowBtn\">Start Your Free 30-Day Trial</a>\n                        }\n                        </div>\n                    </div>\n                </section>\n            </div>\n            <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n        </div>\n        );\n    }\n};\n\n\nexport default withTracker(() => {\n    ////////// ADV BREADCRUMBS MORE LINKS\n    advancedCrumbs = function(propertyType){\n        let fCrumbs = [], tmpCrumbs = [], areaCrumbs = [], countyCrumbs = [];\n        if(propertyType)propertyType = propertyType.toLowerCase();\n\n        // Home / Search Residential Rentals / Dublin City Apartments for Rent / Dublin 2 Apartments for Rent\n        //Property Size\n        //Property Size - Property Type\n        //Property Size - Property Type - County\n        //Property Type - county\n        //Counties\n        //Areas\n        //Property Size - Property Type - area - County\n        //Property Size - area - County\n        //Property Type - area - county\n\n        fCrumbs.push({url: generateSlugURL({propertyType: 'studio'}), name: 'Studios'})//Property Size\n        fCrumbs.push({url: generateSlugURL({bedCount: 1}), name: '1-Beds'})//Property Size\n        fCrumbs.push({url: generateSlugURL({bedCount: 2}), name: '2-Beds'})\n        fCrumbs.push({url: generateSlugURL({bedCount: 3}), name: '3-Beds'})\n\n        tmpCrumbs.push({url: generateSlugURL({cheapSort: true, propertyType: 'house'}), name: 'Cheap Houses'})\n        tmpCrumbs.push({url: generateSlugURL({bedCount: 1, propertyType: 'house'}), name: '1-Bed Houses'})//Property Size - Property Type\n        tmpCrumbs.push({url: generateSlugURL({bedCount: 2, propertyType: 'house'}), name: '2-Bed Houses'})\n        tmpCrumbs.push({url: generateSlugURL({bedCount: 3, propertyType: 'house'}), name: '3-Bed Houses'})\n        tmpCrumbs.push({url: generateSlugURL({luxurySort: true, propertyType: 'house'}), name: 'Luxury Houses'})\n\n        if (propertyType == 'house') {\n            fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        fCrumbs.push({\n            url: generateSlugURL({cheapSort: true, propertyType: 'apartment'}),\n            name: 'Cheap Apartments'\n        })\n        fCrumbs.push({url: generateSlugURL({bedCount: 1, propertyType: 'apartment'}), name: '1-Bed Apartments'})//Property Size - Property Type\n        fCrumbs.push({url: generateSlugURL({bedCount: 2, propertyType: 'apartment'}), name: '2-Bed Apartments'})\n        fCrumbs.push({url: generateSlugURL({bedCount: 3, propertyType: 'apartment'}), name: '3-Bed Apartments'})\n        fCrumbs.push({\n            url: generateSlugURL({luxurySort: true, propertyType: 'apartment'}),\n            name: 'Luxury Apartments'\n        })\n\n        if (propertyType != 'house') {\n            fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n//dublin-apartments\n        //Not doing dublin-houses due to less searches for Dublin apartments\n        var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n\n        for (var i = 0; i < staticCounties.length; i++) {\n            if (!staticCounties[i]) continue;\n            countyCrumbs.push({\n                url: generateSlugURL({county: staticCounties[i]}),\n                name: staticCounties[i] + ' Apartments'\n            })\n        }\n\n        return {\n            fCrumbs:fCrumbs,\n            areaCrumbs: areaCrumbs,\n            countyCrumbs:countyCrumbs\n        }\n    }\n    let advC = {fCrumbs:[],areaCrumbs:[],countyCrumbs:[]}\n    if(true) {\n        let propertyType = '';\n        if(Meteor.isClient)propertyType = Session.get('HPFpropertyTypeSelected');\n        if(!propertyType)propertyType = 'Apartment';\n        advC = advancedCrumbs(propertyType);\n    }\n    ////////// END ADV BREADCRUMBS\n\n    \n    // Meteor.subscribe('Areas')\n    // Meteor.subscribe('Config');\n\n  return {\n    currentUserId: Meteor.userId(),\n    fCrumbs : advC.fCrumbs,\n    areaCrumbs : advC.areaCrumbs,\n    countyCrumbs : advC.countyCrumbs\n  };\n})(Home);\n\nclass HomePageMainForm extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            counties:props.counties,\n            areas:props.areas,\n            countySelected:props.countySelected,\n        }\n        this.isLocalAlreadySet = false;\n        this.isLocalAreaAlreadySet = false;\n        this.countySelectedHandler = this.countySelectedHandler.bind(this);\n        this.areaSelectedHandler = this.areaSelectedHandler.bind(this);\n        this.propertyTypeHandler = this.propertyTypeHandler.bind(this);\n        this.maxRentHandler = this.maxRentHandler.bind(this);\n        this.localHistorySet = this.localHistorySet.bind(this);\n    }\n    componentWillReceiveProps(nextProps) {\n        // console.log(nextProps)\n        this.setState({\n            areas: nextProps.areas\n        });\n    }\n    localHistorySet(){\n        if(this.props.isSubsLoaded && this.isLocalAlreadySet && !this.isLocalAreaAlreadySet){\n            if (localStorage.homePageMainFormData_area) {\n                this.setState({areaSelected:localStorage.homePageMainFormData_area})\n            }\n            this.isLocalAreaAlreadySet = true;\n        }\n        if(this.props.isSubsLoaded && !this.isLocalAlreadySet){\n            var county = '';\n            if(localStorage) {\n                if (localStorage.homePageMainFormData_maxRent) {\n                    $('.maxRent').val(localStorage.homePageMainFormData_maxRent);\n                }\n                if (localStorage.homePageMainFormData_county) {\n                    county=localStorage.homePageMainFormData_county;\n                }else if(localStorage.homePageMainFormData_county===undefined){//Only for first time users\n                    county = 'Dublin'\n                }\n                if (localStorage.homePageMainFormData_propertyType) {\n                    var tmp = localStorage.homePageMainFormData_propertyType\n                    $('input:radio[name=propertyType]').removeAttr('checked');\n                    $('input:radio[name=propertyType][value=\"'+tmp+'\"]').prop('checked', true)\n                }\n            }\n            this.setState({countySelected:county})\n            if( Meteor.isClient )Session.set('countySelected', county);\n            // if(county)this.setState({areas:getAreas(county)})\n            this.isLocalAreaAlreadySet = false;\n\n            this.isLocalAlreadySet = true;\n        }\n    }\n    componentDidMount(){\n        this.localHistorySet();\n        // setTimeout(function () {\n        //     $('.countySelected').val(county)\n        // },100)\n        // setTimeout(function () {\n        //     if (localStorage.homePageMainFormData_area) {\n        //         Session.set('areaRestored',localStorage.homePageMainFormData_area)\n        //         // setTimeout(function () {\n        //         //     $('.areaSelected').val(localStorage.homePageMainFormData_area)\n        //         // },100)\n        //     }\n        // },1000)\n    }\n    componentDidUpdate(){\n        this.localHistorySet();\n    }\n    countySelectedHandler(event){\n        var countySelected = event.target.value\n        this.setState({countySelected:countySelected})\n        if( Meteor.isClient )Session.set('countySelected', countySelected);\n\n        //if(countySelected) this.setState({areas:getAreas(countySelected)})\n        this.isLocalAreaAlreadySet = false;\n\n        if(localStorage)localStorage.homePageMainFormData_county = countySelected;\n    }\n    areaSelectedHandler(event){\n        this.setState({areaSelected:event.target.value})\n        if(localStorage)localStorage.homePageMainFormData_area = event.target.value;\n    }\n    propertyTypeHandler(event){\n        if(localStorage)localStorage.homePageMainFormData_propertyType = event.target.value;\n    }\n    maxRentHandler(event){\n        if(localStorage)localStorage.homePageMainFormData_maxRent = event.target.value;\n    }\n    submitFormHandler(event) {\n        event.preventDefault();\n        const target = event.target;\n        const key = target.propertykey.value;\n        if(key){\n            if(key.length!=5){\n                alert('Invalid property key! It should of 5 characters in length.');\n                return;\n            }\n            FlowRouter.go('letting',{key:key.toUpperCase()})\n            return;\n        }\n\n        // const territory = target.territory.value;\n\n        var data={\n            country:target.country.value,\n            county:target.countySelected.value == 'all' ? '' : target.countySelected.value,\n            area:target.areaSelected.value == 'all' ? '' : target.areaSelected.value,\n            maxRent:target.maxRent.value,\n            propertyType:target.propertyType.value,\n        }\n        var slug = generateSlug(data);\n        FlowRouter.go('b',{slug:slug[0]},slug[1])\n    }\n    render(){\n    return (\n<form className=\"propertykey-form\" onSubmit={this.submitFormHandler}>\n<div className=\"input-group\">\n{/*start */}\n<div className=\"searchformSec\">\n<input type=\"hidden\" name=\"country\" defaultValue=\"ireland\" />\n<div className=\"profile-text\">\n<div className=\"rd-details\">\n{ false ? (<span>I am looking for an</span>) : \"\"}\n<label className=\"account-type-label\" htmlFor=\"rd1\">\n<input autoComplete=\"on\" className=\"account-type-radio propertyType\" id=\"rd1\" name=\"propertyType\" defaultValue=\"apartment\" type=\"radio\" defaultChecked onChange={this.propertyTypeHandler} />\nApartment for rent\n</label>\n<label className=\"account-type-label\">\n<input autoComplete=\"on\" className=\"account-type-radio propertyType\" name=\"propertyType\" defaultValue=\"house\" type=\"radio\" onChange={this.propertyTypeHandler} />\nHouse for rent\n</label>\n<label className=\"account-type-label\">\n<input autoComplete=\"on\" className=\"account-type-radio propertyType\" name=\"propertyType\" defaultValue=\"student\" type=\"radio\" onChange={this.propertyTypeHandler} />\nStudent Accommodation\n</label>\n<label className=\"account-type-label\">\n<input autoComplete=\"on\" className=\"account-type-radio propertyType\" name=\"propertyType\" defaultValue=\"share\" type=\"radio\" onChange={this.propertyTypeHandler} />\nShare\n</label>\n{ false ? (\n<label className=\"account-type-label\">\n<input autoComplete=\"on\" className=\"account-type-radio propertyType\" name=\"propertyType\" defaultValue=\"holidayhomes\" type=\"radio\" onChange={this.propertyTypeHandler} />\nHoliday Homes\n</label>\n) : \"\"}\n</div>\n\n<div className=\"signin-form\">\n<div className=\"frm-group clearfix\">\n<div className=\"styled-input styled-input-select\">\n<select autoComplete=\"on\" name=\"countySelected\" className=\"countySelected\" onChange={this.countySelectedHandler} value={this.state.countySelected}>\n<option value={\"\"}>Choose City/County</option>\n<option value={\"all\"} >All</option>\n{this.state.counties.map(function(c,i){\n    return (\n        <option key={i} value={c.value} >{c.label}</option>\n        )\n})}\n</select>\n<span />\n</div>\n<div className=\"styled-input styled-input-select\">\n<select autoComplete=\"on\" name=\"areaSelected\" className=\"areaSelected\" onChange={this.areaSelectedHandler} value={this.state.areaSelected}>\n<option value={\"\"}>Choose Area</option>\n<option value={\"all\"}>All</option>\n    {this.state.areas.map(function(c,i){\n        return (\n            <option key={i} value={c.value} >{c.label}</option>\n        )\n    })}\n</select>\n<span />\n</div>\n<div className=\"styled-input styled-input-select\">\n<select autoComplete=\"on\" name=\"maxRent\" className=\"maxRent\" onChange={this.maxRentHandler}>\n<option value={\"\"}>Max Rent</option>\n<option value={\"\"}>Any</option>\n    {this.props.maxRent.map(function(c,i){\n        return (\n            <option key={i} value={c.value} >{c.label}</option>\n        )\n    })}\n</select>\n<span />\n</div>\n<div className=\"styled-input styled-input-select\">\n<input autoComplete=\"on\" type=\"text\" className=\"form-control propertykey\" name=\"propertykey\" placeholder=\"Property KEY\" />\n</div>\n<div className=\"styled-input\">\n<span className=\"input-group-btn\" style={{zIndex: 0}}>\n<button className=\"btn white-btn\" type=\"submit\" style={{width:'100%'}}>Find</button>\n</span>\n</div>\n</div>\n</div>\n\n</div>\n</div>\n</div>\n</form>\n\n    );\n    }\n}\nHomePageMainFormT = withTracker(() => {\n    var countries = [{label: \"Ireland\", value: \"Ireland\"}];//Both capital\n    var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n    var allareas = [];\n    var allcounties = [];\n    var countySelected = 'Dublin';\n\n    if( Meteor.isClient )if(Session.get('countySelected'))countySelected = Session.get('countySelected')\n    let isSubsLoaded = false;\n    const areasSub = Meteor.subscribe('Areas','','',countySelected,'','',function(){\n        if(areasSub.ready() && Meteor.isClient )Session.set('subscriptionsReady',true);\n    })\n    // Meteor.subscribe('Config');\n    if( Meteor.isClient )\n    if( Session.get('subscriptionsReady') ) {\n        isSubsLoaded = true;\n    }\n\n    if(Meteor.isClient)Session.get('subscriptionsReady');\n\n    for(var i=0;i< staticCounties.length;i++){\n        if(!staticCounties[i])continue;\n        allcounties.push({label: staticCounties[i], value: staticCounties[i] })\n    }\n    ////////////////////////START AREAS PROCESSING\n    var distinctEntries = _.uniq(Collections.Areas.find({}, {//Dynamically load areas based on the subscription.\n        sort: {Area: 1}, fields: {Area: true}\n    }).fetch().map(function(x) {\n        return x.Area;\n    }), true);\n    allareas = []\n    for(var i=0;i< distinctEntries.length;i++){\n        if(!distinctEntries[i])continue;\n        allareas.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n    }\n    ////////////////////////END AREAS PROCESSING\n\n    var range = [{cur:\"eur\",min:400,max:10000}]\n    var selectedCur = range[0];\n    var maxRent = []\n    for(var i=selectedCur.min;i<selectedCur.max+1;i=i+50){\n        maxRent.push({label: i, value: i })\n    }\n\n    // var Config = Collections.Config.find().fetch();Config = Config[0];\n    var propertyTypes = []\n    // if(Config)\n    // for(var i=0;i< Config.propertyType.length;i++){\n    //     propertyTypes.push({label: titleCase(Config.propertyType[i].name), value: Config.propertyType[i].value})\n    // }\n\n    \n    return {\n        // countries: countries,\n        counties: allcounties,\n        countySelected: countySelected,\n        areas: allareas,\n        maxRent: maxRent,\n        isSubsLoaded:isSubsLoaded\n        // propertyTypes: propertyTypes,\n    };\n})(HomePageMainForm);\n\n\nclass HomePageLatestProps extends Component{\n    constructor(props) {\n        super(props);\n        let pAuctions = props.auctions; if(!pAuctions)pAuctions = [];\n        let pProperties = props.properties; if(!pProperties)pProperties = [];\n        this.state = {\n            auctions: pAuctions,\n            properties: pProperties\n        };\n        this.propsListHTML = '';\n        this.isServerSSRReq = '';\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log(nextProps)\n        this.setState({\n            auctions: nextProps.auctions,\n            properties: nextProps.properties\n        });\n    }\n\n    componentWillMount() {}\n\n    componentDidMount() {\n        const self = this;\n        // console.log('In componentDidMount');\n        // console.log(this)\n\n        setTimeout(fixImageSize,1000)\n        setTimeout(fixImageSize,3000)\n        setTimeout(fixImageSize,5000)\n        $(window).resize(fixImageSize);\n    }\n\n    componentDidUpdate() {\n        // console.log('In did update');\n        // console.log(this)\n\n        setTimeout(fixImageSize,1000)\n        setTimeout(fixImageSize,3000)\n        setTimeout(fixImageSize,5000)\n    }\n    propGrid() {\n        const self = this;\n        let propType = '';\n        return (\n            <div className=\"row\" id=\"props_list\">\n                {\n                    Meteor.isServer ? (\n                        <div id={\"isservercheckdiv\"}></div>\n                    ):\"\"\n                }\n                {self.state.auctions.map((auction, i) => {\n                    return (\n                        <div key={i} className=\"col-md-4 col-sm-6 img-hold-div\">\n                            {this.state.properties.map(function (property, a) {\n                                if (auction.propertyId !== property._id) return false\n                                if(typeof property.gallery === 'undefined' || property.gallery.length == 0 || typeof property.gallery[0] !== 'object') return false;\n                                propType = '';\n                                switch(property.type){\n                                    case 'apartment': propType = 'Apartment to rent'; break;\n                                        case 'house': propType = 'House for rent'; break;\n                                        case 'student': propType = 'Student Accommodation'; break;\n                                        case 'share': propType = 'Flat Share'; break;\n                                        case 'holidayhomes': propType = 'Holiday Home'; break;\n                                        case 'studio': propType = 'Studio for rent'; break;\n                                }\n                                return (\n                                    <div key={a} className=\"proj-card\">\n                                        <div className=\"prop-img-hold\">\n                                            <a href={\n                                                property.slug && auction.lettingAuctionCode ?\n                                                    FlowRouter.url('rent', {\n                                                        slug: property.slug,\n                                                        key: auction.lettingAuctionCode\n                                                    })\n                                                    :\n                                                    FlowRouter.url('letting', {key: auction.lettingAuctionCode})\n                                            }>\n                                                <div className=\"image-holder\">\n                                                    {typeof property.gallery !== 'undefined' && property.gallery.length > 0 && typeof property.gallery[0] === 'object' ? (\n                                                        <img className=\"img-responsive\" src={property.gallery[0].url}\n                                                             alt={'Photo 1 of ' + titleCase(property.address.address) + (property.address.area ? \", \" + titleCase(property.address.area) : '') + (property.address.county ? \", \" + titleCase(property.address.county) : '')}/>\n                                                    ) : (\n                                                        <div className=\"item active\">\n                                                            <img src={cdnPath(\"/images/no-photo.png\")}\n                                                                 alt={'Image not available'}\n                                                                 className=\"img-responsive\"/>\n                                                        </div>\n                                                    )}\n                                                    <div className=\"image-position\">\n                                                        <h3 className=\"color-white\"\n                                                            style={{paddingBottom: \"2px\"}}>{property.address.area ? titleCase(property.address.area) : ''}{property.address.county ? (property.address.area ? \", \" : \"\") + titleCase(property.address.county) : ''}</h3>\n                                                        {/*<h4>{property.address.county ? titleCase(property.address.county) : ''} </h4>*/}\n                                                        {propType ? ( <h4 style={{paddingBottom:'4px'}}>{propType}</h4> ) : ''}\n                                                        <h4>{property.bedCount ? property.bedCount : '1'} Beds, {property.baths ? property.baths : '1'} Baths </h4>\n                                                    </div>\n\n                                                </div>\n                                                <div className=\"bg-opacity\"></div>\n                                            </a>\n                                        </div>\n                                        <div className=\"textbox-holder\" style={{margin: 0, padding: 20, height: 130}}>\n                                            <h4>\n                                                <a href={\n                                                    property.slug && auction.lettingAuctionCode ?\n                                                        FlowRouter.url('rent', {\n                                                            slug: property.slug,\n                                                            key: auction.lettingAuctionCode\n                                                        })\n                                                        :\n                                                        FlowRouter.url('letting', {key: auction.lettingAuctionCode})\n                                                }>\n                                                    {titleCase(property.address.address)}\n                                                    {property.address.area ? \" \" + titleCase(property.address.area) : ''}\n                                                    {/*{property.address.county ? \" \"+titleCase(property.address.county) : ''}*/}\n                                                </a>\n                                            </h4>\n                                            <ul>\n                                                <li className=\"left-border\">\n                                                    <h4>Rent</h4>\n                                                    <div className={'h2-div'}>&euro;<span>{auction.price}</span></div>\n                                                </li>\n\n                                                <li className=\"pad-right-0\">\n                                                    <a\n                                                        className=\"transparent-btn btns view-details\"\n                                                        href={\n                                                            property.slug && auction.lettingAuctionCode ?\n                                                                FlowRouter.url('rent', {\n                                                                    slug: property.slug,\n                                                                    key: auction.lettingAuctionCode\n                                                                })\n                                                                :\n                                                                FlowRouter.url('letting', {key: auction.lettingAuctionCode})\n                                                        }\n                                                        type=\"button\"\n                                                        id=\"enter-auction\">view details</a>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    );\n                })}\n            </div>\n        )\n    }\n    render(){\n\n        if(Meteor.isClient && this.propsListHTML==\"\"){\n            this.propsListHTML = $('#props_list').html()\n        }\n        if(Meteor.isClient) {\n            this.isServerSSRReq = $('#isservercheckdiv').html()\n            if (this.isServerSSRReq == \"\") this.isServerSSRReq = true\n            else this.isServerSSRReq = false\n        }\n        // if(this.propsListHTML) console.log(\"propsListHTML: \"+this.propsListHTML.length)\n\n    return (\n<section className=\"property-list\" id=\"latestRentals\">\n   <div className=\"container\">\n      {true ? (\n      <div className=\"prop-wrap\">\n         <h2>Latest Rentals</h2>\n         <span className=\"bottom-line\" />\n      </div>\n      ): ''}\n      <div className=\"auction\">\n        { false ? (<h5>Ends on endsDate</h5> ): \"\"}\n         <section>\n            <section className=\"proplist-sec\">\n               <div className=\"row blogs\">\n                  \n                  { (this.props.isSubsLoaded && this.state.auctions && this.state.properties )  ? (\n                        this.propGrid()\n                    ) :\n                    this.isServerSSRReq && this.propsListHTML? (\n                        <div dangerouslySetInnerHTML={{__html: this.propsListHTML}}></div>\n                    ): (\n                        <div className={'h2-div'} style={{textAlign:'center'}}>Loading...</div>\n                )}\n\n                  <div className=\"pink-div col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n                     <a href={FlowRouter.url('b',{'slug':\"rent-in-ireland\"},{'mostRecentSort':1})} className=\"pink-btn oval-btn \">View All</a>\n                  </div>\n               </div>\n            </section>\n         </section>\n      </div>\n   </div>\n</section>\n\n\n    );\n    }\n}\nHomePageLatestPropsT = withTracker(() => {\n    const bLettingsSub = Meteor.subscribe(\"browseLettings\", {viewName: 'browseLettings.view', slug:'rent-in-ireland', pageno:1, resperpage:6, query:{mostRecentSort:1}, propertykey:''} ,function(){\n        if(bLettingsSub.ready() && Meteor.isClient)Session.set('subscriptionsReady',true);\n    });\n\n    if(Meteor.isClient)Session.get('subscriptionsReady');\n    if( !bLettingsSub.ready() ) {\n        return {\n            isSubsLoaded : false\n        }\n    }\n\n    return {\n        auctions: Collections.Auctions.find({},{sort:{updatedAt : -1}}).fetch(),\n        properties: Collections.Properties.find().fetch(),\n        isSubsLoaded : true\n    };\n})(HomePageLatestProps);\n","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport { withTracker } from 'meteor/react-meteor-data';\n\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nimport { Collections } from  '../../api/collections.js'\n\nlet countsCollection = null;\nif(Meteor.isClient)Session.set('subscriptionsReady',false);\n\nfunction titleCase(str) {\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nfunction titleCaseAllWords(str) {\n    if(!str)return;\n    return str.split(' ').map(function(str){\n        return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n    }).join(' ')\n}\nfunction chunkify(a, n, balanced) {\n\n    if (n < 2)\n        return [a];\n\n    var len = a.length,\n        out = [],\n        i = 0,\n        size;\n\n    if (len % n === 0) {\n        size = Math.floor(len / n);\n        while (i < len) {\n            out.push(a.slice(i, i += size));\n        }\n    }\n\n    else if (balanced) {\n        while (i < len) {\n            size = Math.ceil((len - i) / n--);\n            out.push(a.slice(i, i += size));\n        }\n    }\n\n    else {\n\n        n--;\n        size = Math.floor(len / n);\n        if (len % size === 0)\n            size--;\n        while (i < size * n) {\n            out.push(a.slice(i, i += size));\n        }\n        out.push(a.slice(size * n));\n\n    }\n\n    return out;\n}\nfunction slugify (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '')           // Replace spaces with \"\"\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with ''\n        .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single ''\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}\n\nfunction getSlugData() {\n    var query = FlowRouter.current().queryParams;\n    var slug = FlowRouter.current().params.slug;\n\n    var propertyType = \"\";\n    var county = \"\";\n    var area = \"\";\n    var maxRent = \"\";\n    var minRent = \"\";\n    var minBeds = \"\";\n    var maxBeds = \"\";\n    var country = \"\";\n    var bedCount = \"\";\n    var luxurySort = \"\";\n    var cheapSort = \"\";\n    var mostRecentSort = \"\";\n    var leastRecentSort = \"\";\n\n    var range = [{cur:\"eur\",min:0,max:10000}]\n    var selectedCur = range[0];\n\n    if(query) {\n        if(query.minRent)minRent = query.minRent;\n        if(query.maxRent)maxRent = query.maxRent;\n        if(query.minBeds)minBeds = query.minBeds;\n        if(query.maxBeds)maxBeds = query.maxBeds;\n        if(query.bedCount)bedCount = query.bedCount;\n        if(query.luxurySort)luxurySort = query.luxurySort;\n        if(query.cheapSort)cheapSort = query.cheapSort;\n        if(query.mostRecentSort)mostRecentSort = query.mostRecentSort;\n        if(query.leastRecentSort)leastRecentSort = query.leastRecentSort;\n    }\n\n    if(!slug){\n        return {\n            country:country,\n            county:county,\n            area:area,\n            minRent:minRent,\n            maxRent:maxRent,\n            minBeds:minBeds,\n            maxBeds:maxBeds,\n            bedCount:bedCount,\n            luxurySort:luxurySort,\n            cheapSort:cheapSort,\n            mostRecentSort:mostRecentSort,\n            leastRecentSort:leastRecentSort,\n            propertyType:propertyType,\n        };\n    }\n    if(slug.indexOf('-for-')!=-1){\n        propertyType = slug.split('-for-')[0];\n        propertyType = propertyType.split('-').join(' ');\n    }\n    if(slug.indexOf('-in-')!=-1) {\n        var tmp = slug.split('-in-')[1].split('-')\n        switch (tmp.length) {\n            case 3:\n                country = tmp[2];\n                county = tmp[1];\n                area = tmp[0];\n                break;\n            case 2:\n                country = tmp[1];\n                county = tmp[0];\n                break;\n            case 1:\n                country = tmp[0];\n                break;\n        }\n        if (propertyType) propertyType = propertyType.replace(/_/g, ' ')\n        if (county) county = titleCaseAllWords(county.replace(/_/g, ' '))\n        if (country) country = titleCaseAllWords(country.replace(/_/g, ' '))\n        if (area) area = titleCaseAllWords(area.replace(/_/g, ' '))\n    }\n    return {\n        country:country,\n        county:county,\n        area:area,\n        minRent:minRent,\n        maxRent:maxRent,\n        minBeds:minBeds,\n        maxBeds:maxBeds,\n        bedCount:bedCount,\n        luxurySort:luxurySort,\n        cheapSort:cheapSort,\n        mostRecentSort:mostRecentSort,\n        leastRecentSort:leastRecentSort,\n        propertyType:propertyType,\n    }\n}\n\nfunction generateSlug(curURL){\n    var propertyType = curURL.propertyType;\n    var county = curURL.county\n    var area = curURL.area\n    var minRent = curURL.minRent\n    var maxRent = curURL.maxRent\n    var minBeds = curURL.minBeds\n    var maxBeds = curURL.maxBeds\n    var sortBy = curURL.sortBy\n    var country = curURL.country;\n    var bedCount = curURL.bedCount;\n    var luxurySort = curURL.luxurySort;\n    var cheapSort = curURL.cheapSort;\n    var mostRecentSort = curURL.mostRecentSort;\n    var leastRecentSort = curURL.leastRecentSort;\n    // const territory = target.territory.value;\n\n    var slug='';\n    var query={};\n\n    if(propertyType)propertyType = propertyType.replace(/\\s+/g, '_')\n    if(county)county = county.replace(/\\s+/g, '_')\n    if(area)area = area.replace(/\\s+/g, '_')\n    if(country)country = country.replace(/\\s+/g, '_')\n\n    if(propertyType)slug=propertyType+\"-for-\"\n    slug+=\"rent\"\n    // if(areaSelected||countySelected||country)\n    slug+=\"-in-\"\n\n    if(!county)area = '';\n\n    if(area)slug+=area\n    if(area && county)slug+=\"-\"\n    if(county)slug+=county\n\n    if(bedCount)query.bedCount = bedCount;\n\n    if(country)slug+=\"-\"+country\n    else slug+=\"-ireland\"\n\n    var range = [{cur:\"eur\",min:200,max:10000}]\n    var selectedCur = range[0];\n    if(minRent && minRent!=selectedCur.min)query.minRent = minRent;\n    if(maxRent && maxRent!=selectedCur.max)query.maxRent = maxRent;\n    if(minBeds)query.minBeds = minBeds;\n    if(maxBeds)query.maxBeds = maxBeds;\n    if(sortBy){\n        switch(sortBy){\n            case 'ascRent': query.cheapSort = 1; break;\n            case 'descRent': query.luxurySort = 1; break;\n            case 'mRecent': query.mostRecentSort = 1; break;\n            case 'lRecent': query.leastRecentSort = 1; break;\n        }\n    }else{\n        if(luxurySort)query.luxurySort = 1;\n        if(cheapSort)query.cheapSort = 1;\n        if(mostRecentSort)query.mostRecentSort = 1;\n        if(leastRecentSort)query.leastRecentSort = 1;\n    }\n\n    // apartment-for-rent-in-dundrum-dublin-ireland\n    // apartment-for-rent-in-donnybroke-london-uk\n    // rent/apartment/dundrum/dublin\n    // rent/apartment/donnybroke/london/england/uk/\n    return [\n        slugify(slug),\n        query\n    ]\n}\nfunction generateSlugURL(curURL){\n    var ret = generateSlug(curURL)\n    return FlowRouter.url('b',{slug:ret[0]},ret[1]);\n}\n\nfunction updateRoute() {\n    // Function is not in use\n    //console.log(\"In updateRoute\")\n    // TODO Router.query.clear();\n\n  var baseURL = window.location.href.split('?')[0];\n  var route = baseURL;\n  //debugger;\n\n  var curCity = Session.get('curCity');\n  if(curCity && curCity!='All')\n    route = updateQueryStringParameter(route, 'city', curCity)\n\n\n    var curBuilder = Session.get('curBuilder');\n    if(curBuilder && curBuilder!='All')\n        route = updateQueryStringParameter(route, 'builder', curBuilder)\n\n  //console.log(\"New Route\"+route);\n  FlowRouter.go(route);\n}\n\nfunction fixImageSize() {\n    var avgW=0;\n    $('.image-holder img').each(function(){\n\n        if(!avgW)avgW = $(this).width();\n        else {\n            avgW += $(this).width();\n            avgW =  avgW / 2;\n        }\n    })\n    if(!avgW)avgW = 250;\n    $('.image-holder img').width('100%');\n    $('.image-holder img').height(avgW*0.7);\n}\n\nfunction saveToLocalStorage(){//There is no restore local on this page; its not needed as people come to this page from other pages and they might have diff preferences every time.\n    if (localStorage) {\n\n        localStorage.homePageMainFormData_county = $( \".countySelected\" ).val();\n\n        localStorage.homePageMainFormData_area = $( \".areaSelected\" ).val();\n        var tmp = $( \"input:radio[name=propertyType]:checked\" ).val();\n        if(tmp)localStorage.homePageMainFormData_propertyType = tmp\n            tmp = $('.maxRent').val()\n        if(tmp)localStorage.homePageMainFormData_maxRent = $('.maxRent').val();\n    }\n}\n\nclass Pagination extends Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    componentDidMount() {\n        // console.log(this.props)\n    }\n    \n    render() {\n        const self = this;\n        return (\n        <nav>\n            <ul className=\"pagination\">\n                <li className={\"page-item \" +self.props.pagination.prevPage.disabled}>\n                    <a \n                    className=\"page-link\" \n                    href={self.props.pagination.prevPage.href} \n                    tabIndex=\"-1\"\n                    onClick={self.props.handleChoosePage.bind(self, self.props.pagination.prevPage.prevPageNo, self.props.parent)}\n                    >{self.props.pagination.prevPage.text}\n                    </a>\n                </li>\n                {self.props.pagination.pages.map((page, i) => {\n                    if(typeof page.current !== 'undefined' && page.current) {\n                        return (\n                            <li key={i} className=\"page-item active\">\n                                <a className=\"page-link\" href={page.href}>{page.text} <span className=\"sr-only\">(current)</span></a>\n                            </li>\n                        );\n                    } else {\n                        return (\n                           <li key={i} className=\"page-item\">\n                            <a \n                            className=\"page-link\" \n                            onClick={self.props.handleChoosePage.bind(self, page.text, self.props.parent)}\n                            href={page.href}\n                            >{page.text}\n                            </a>\n                           </li>\n                        );\n                    }\n                })}\n                <li className={\"page-item \" + self.props.pagination.nextPage.disabled}>\n                    <a \n                    className=\"page-link\" \n                    href={self.props.pagination.nextPage.href}\n                    onClick={self.props.handleChoosePage.bind(self, self.props.pagination.nextPage.nextPageNo, self.props.parent)}\n                    >{self.props.pagination.nextPage.text}\n                    </a>\n                </li>\n            </ul>\n        </nav>\n        )\n    }\n}\n\n\nclass HousesForrent extends Component {\n\n    constructor(props) {\n        super(props);\n        var searchCrumbs = {c1:[],c2:[],c3:[]}\n        var fCrumbs = {c1:[],c2:[],c3:[]}\n        var areaCrumbs = {c1:[],c2:[],c3:[]}\n        var countyCrumbs = {c1:[],c2:[],c3:[]}\n        if(props.searchCrumbs){\n            var chunks = chunkify(props.searchCrumbs,3,true)\n            searchCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n}\n        if(props.fCrumbs){\n            var chunks = chunkify(props.fCrumbs,3,true)\n            fCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n        }\n        if(props.areaCrumbs){\n            var chunks = chunkify(props.areaCrumbs,3,true)\n            areaCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n        }\n        if(props.countyCrumbs){\n            var chunks = chunkify(props.countyCrumbs,3,true)\n            countyCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n        }\n        let pCS = props.countySelected; if(!pCS)pCS = '';\n        let pAS = props.areaSelected; if(!pAS)pAS = '';\n        let pTS = props.propertyTypeSelected; if(!pTS)pTS = '';\n        let pCounties = props.counties; if(!pCounties)pCounties = [];\n        let pPropertyTypes = props.propertyTypes; if(!pPropertyTypes)pPropertyTypes = [];\n        let pAreas = props.areas; if(!pAreas)pAreas = [];\n        let pAuctions = props.auctions; if(!pAuctions)pAuctions = [];\n        let pProperties = props.properties; if(!pProperties)pProperties = [];\n        let pTotalCount = props.totalCount; if(!pTotalCount)pTotalCount = 0;\n        let pPagination = props.pagination; if(!pPagination)pPagination = 0;\n        this.state = {\n            showXSMenu:false,\n            countySelected: pCS,\n            areaSelected: pAS,\n            propertyTypeSelected: pTS,\n            counties: pCounties,\n            propertyTypes: pPropertyTypes,\n            areas: pAreas,\n            auctions: pAuctions,\n            properties: pProperties,\n            totalCount: pTotalCount,\n            pagination: pPagination,\n            'searchCrumbs':searchCrumbs,fCrumbs:fCrumbs,areaCrumbs:areaCrumbs,countyCrumbs:countyCrumbs\n        };\n        this.searchCrumbsLoaded = false;\n\n        this.propsListHTML = '';\n        this.isServerSSRReq = '';\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // console.log(nextProps)\n        this.setState({\n            counties: nextProps.counties,\n            areas: nextProps.areas,\n            propertyTypes: nextProps.propertyTypes,\n            auctions: nextProps.auctions,\n            properties: nextProps.properties,\n            totalCount: nextProps.totalCount,\n            pagination: nextProps.pagination\n        });\n        // if(!this.state.countySelected)\n            this.setState({countySelected:nextProps.countySelected})\n        // if(!this.state.areaSelected)\n            this.setState({areaSelected:nextProps.areaSelected})\n        // if(!this.state.propertyTypeSelected)\n            this.setState({propertyTypeSelected:nextProps.propertyTypeSelected})\n\n            this.setState({minRentSelected:nextProps.minRentSelected})\n            this.setState({maxRentSelected:nextProps.maxRentSelected})\n            this.setState({minBedCountSelected:nextProps.minBedCountSelected})\n            this.setState({maxBedCountSelected:nextProps.maxBedCountSelected})\n            this.setState({sortBySelected:nextProps.sortBySelected})\n    }\n\n    componentWillMount() {}\n\n    componentDidMount() {\n        const self = this;\n        // console.log('In componentDidMount');\n        // console.log(this)\n\n        try{\n            jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n        }catch(e){\n            document.body.scrollTop = document.documentElement.scrollTop = 0;\n        }\n\n        setTimeout(fixImageSize,1000)\n        setTimeout(fixImageSize,3000)\n        setTimeout(fixImageSize,5000)\n        $(window).resize(fixImageSize);\n\n        setTimeout(function(){\n            try {\n                jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n            } catch (e) {\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\n            }\n        },500)\n    }\n\n    componentDidUpdate() {\n        // console.log('In did update');\n        // console.log(this)\n\n        setTimeout(fixImageSize,1000)\n        setTimeout(fixImageSize,3000)\n        setTimeout(fixImageSize,5000)\n        this.crumbsUpdate();\n\n        setTimeout(function(){\n            try {\n                jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n            } catch (e) {\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\n            }\n        },500)\n    }\n\n    minRentOptions(){\n        var range = [{cur:\"eur\",min:200,max:9900}]\n        var selectedCur = range[0];\n        var maxRent = []\n        for(var i=selectedCur.min;i<selectedCur.max+1;){\n            maxRent.push({label: i, value: i })\n            if(i<1000)i=i+50\n            else if(i<=4000)i=i+100\n            else if(i<=8000)i=i+500\n            else i=i+1000\n        }\n        return maxRent;\n    }\n    maxRentOptions(){\n        var range = [{cur:\"eur\",min:400,max:10000}]\n        var selectedCur = range[0];\n        var maxRent = []\n        for(var i=selectedCur.min;i<selectedCur.max+1;){\n            maxRent.push({label: i, value: i })\n            if(i<1000)i=i+50\n            else if(i<=4000)i=i+100\n            else if(i<=8000)i=i+500\n            else i=i+1000\n        }\n        return maxRent;\n    }\n    minBedOptions(){\n        var range = [{min:1,max:9}]\n        var selectedCur = range[0];\n        var maxRent = []\n        for(var i=selectedCur.min;i<selectedCur.max+1;i=i+1){\n            maxRent.push({label: i, value: i })\n        }\n        return maxRent;\n    }\n    maxBedOptions(){\n        var range = [{min:2,max:10}]\n        var selectedCur = range[0];\n        var maxRent = []\n        for(var i=selectedCur.min;i<selectedCur.max+1;i=i+1){\n            maxRent.push({label: i, value: i })\n        }\n        return maxRent;\n    }\n    sortByOptions(){\n        var sortBy = [\n            {label: \"Most recent\", value: \"mRecent\" },\n            {label: \"Least recent\", value: \"lRecent\" },\n            {label: \"Rent: Cheaper first\", value: \"ascRent\" },\n            {label: \"Rent: Luxury first\", value: \"descRent\" },\n            ]\n        return sortBy;\n    }\n    crumbsUpdate(){\n        if(!this.searchCrumbsLoaded){\n            var searchCrumbs = {c1:[],c2:[],c3:[]}\n            var fCrumbs = {c1:[],c2:[],c3:[]}\n            var areaCrumbs = {c1:[],c2:[],c3:[]}\n            var countyCrumbs = {c1:[],c2:[],c3:[]}\n            if(this.props.searchCrumbs){\n                var chunks = chunkify(this.props.searchCrumbs,3,true)\n                searchCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n                this.searchCrumbsLoaded = true;\n            }\n            if(this.props.fCrumbs){\n                var chunks = chunkify(this.props.fCrumbs,3,true)\n                fCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n                this.searchCrumbsLoaded = true;\n            }\n            if(this.props.areaCrumbs){\n                var chunks = chunkify(this.props.areaCrumbs,3,true)\n                areaCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n                this.searchCrumbsLoaded = true;\n            }\n            if(this.props.countyCrumbs){\n                var chunks = chunkify(this.props.countyCrumbs,3,true)\n                countyCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n                this.searchCrumbsLoaded = true;\n            }\n            if(this.searchCrumbsLoaded)//Update the state only once; when its true\n                this.setState({'searchCrumbs':searchCrumbs,fCrumbs:fCrumbs,areaCrumbs:areaCrumbs,countyCrumbs:countyCrumbs})\n        }\n    }\n    isEqualSelect(a,b) {\n        if(a==b)return ' selected ';\n        return '';\n    }\n\n    updateQueryStringParameter(uri, key, value) {\n        var re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n        var separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\n        if (uri.match(re)) {\n            return uri.replace(re, '$1' + key + \"=\" + value + '$2');\n        } else {\n            return uri + separator + key + \"=\" + value;\n        }\n    }\n\n    handleChoosePage(page, component) {\n        if (typeof page == \"undefined\") return \n\n        // var data = getSlugData();\n        // var slug = generateSlug(data);\n        //\n        // FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0], pageno: page}, slug[1]);\n        //\n        // component.setState({pagination: pagination()});\n    }\n\n    handleCountyDropdown(event){\n        var val = event.target.value;\n\n        var countyChanged = false;\n        var data = getSlugData();\n        var countySelected = data.county;\n\n        this.setState({countySelected: val});\n        if(localStorage)localStorage.homePageMainFormData_county = val;\n\n        this.setState({areaSelected: \"\"});\n\n        // if(val!=countySelected)\n        //     countyChanged=true;\n\n        // if(countyChanged)\n        //     this.setState({areaSelected: \"\"});\n\n        data.county = val;\n        data.area = '';\n        // if(countyChanged)data.area='';\n\n        var slug = generateSlug(data);\n\n        FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0]}, slug[1]);\n    }\n    handleAreaDropdown(event){\n        var val = event.target.value;\n        this.setState({areaSelected: val});\n        if(localStorage)localStorage.homePageMainFormData_area = val;\n\n        var data = getSlugData();\n        data.area = val;\n        var slug = generateSlug(data);\n\n        FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0]}, slug[1]);\n    }\n    handlePropertyTypeDropdown(event){\n        var val = event.target.value;\n        this.setState({propertyTypeSelected: val});\n        if(localStorage)localStorage.homePageMainFormData_propertyType = val;\n\n        var data = getSlugData();\n        data.propertyType = val;\n        var slug = generateSlug(data);\n\n        FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0]}, slug[1]);\n    }\n    handleMinRentDropdown(event){\n        var val = event.target.value;\n        this.setState({minRentSelected: val});\n        if(localStorage)localStorage.homePageMainFormData_minRent = val;\n\n        var data = getSlugData();\n        data.minRent = val;\n        var slug = generateSlug(data);\n\n        FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0]}, slug[1]);\n    }\n    handleMaxRentDropdown(event){\n        var val = event.target.value;\n        this.setState({maxRentSelected: val});\n        if(localStorage)localStorage.homePageMainFormData_maxRent = val;\n\n        var data = getSlugData();\n        data.maxRent = val;\n        var slug = generateSlug(data);\n\n        FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0]}, slug[1]);\n    }\n    handleMinBedDropdown(event){\n        var val = event.target.value;\n        this.setState({minBedCountSelected: val});\n        if(localStorage)localStorage.homePageMainFormData_minBed = val;\n\n        var data = getSlugData();\n        data.minBeds = val;\n        var slug = generateSlug(data);\n\n        FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0]}, slug[1]);\n    }\n    handleMaxBedDropdown(event){\n        var val = event.target.value;\n        this.setState({maxBedCountSelected: val});\n        if(localStorage)localStorage.homePageMainFormData_maxBed = val;\n\n        var data = getSlugData();\n        data.maxBeds = val;\n        var slug = generateSlug(data);\n\n        FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0]}, slug[1]);\n    }\n    handleSortByDropdown(event){\n        var val = event.target.value;\n        this.setState({sortBySelected: val});\n\n        var data = getSlugData();\n        data.sortBy = val;\n        var slug = generateSlug(data);\n\n        FlowRouter.go('/b/:slug/:pageno?', {slug: slug[0]}, slug[1]);\n    }\n    searchXSMenu(event){\n        console.log('searchXSMenu')\n        this.setState({showXSMenu: false});\n        ga('send', 'event', 'BrowsePage', 'searchXSMenuBtn', 'Mobile: searchXSMenu Btn Clicked');\n    }\n    cancelSearchXSMenu(event){\n        console.log('cancelSearchXSMenu')\n        this.setState({showXSMenu: false});\n        ga('send', 'event', 'BrowsePage', 'cancelFilterBtn', 'Mobile: cancelFilter Btn Clicked');\n    }\n    handleShowFilters(event){\n        this.setState({showXSMenu: true});\n        ga('send', 'event', 'BrowsePage', 'showFilterBtn', 'Mobile: showFilter Btn Clicked');\n    }\n    showFilterText(state){\n        var text = [];\n        if(state.countySelected){\n            text.push(\"County: \"+state.countySelected)\n        }//else text.push(\"all counties\")\n        if(state.areaSelected){\n            text.push(\"Area: \"+state.areaSelected)\n        }//else text.push(\"Area: all areas\")\n        if(state.propertyTypeSelected){\n            text.push(\"Type: \"+this.formatedPT(state.propertyTypeSelected))\n        }//else text.push(\"Type: all property types\")\n\n        if(state.minRentSelected && state.maxRentSelected){\n            text.push(\"Rent: between &euro;\"+state.minRentSelected+\" and &euro;\"+state.maxRentSelected+\"\")\n        }else if(state.minRentSelected){\n            text.push(\"Rent: greater than &euro;\"+state.minRentSelected+\"\")\n        }else if(state.maxRentSelected){\n            text.push(\"Rent: less than &euro;\"+state.maxRentSelected+\"\")\n        }else{\n            // text.push(\"Rent: Any\")\n        }\n\n        if(state.minBedCountSelected && state.maxBedCountSelected){\n            text.push(\"Beds: between \"+state.minBedCountSelected+\" and \"+state.maxBedCountSelected)\n        }else if(state.minBedCountSelected){\n            text.push(\"Beds: has at least \"+state.minBedCountSelected+\"\" )\n        }else if(state.maxBedCountSelected){\n            text.push(\"Beds: at most \"+state.maxBedCountSelected+\"\")\n        }else{\n            // text.push(\"Rent: Any\")\n        }\n\n        switch(this.state.sortBySelected){\n            case 'mRecent': text.push('Showing: Most recent first'); break;\n            case 'lRecent': text.push('Showing: Oldest first'); break;\n        }\n        if(state.propertyTypeSelected){\n            switch(this.state.sortBySelected){\n                case 'ascRent': text.push('Showing: Cheap '+this.formatedPT(state.propertyTypeSelected)+' first'); break;\n                case 'descRent': text.push('Showing: Luxury '+this.formatedPT(state.propertyTypeSelected)+' first'); break;\n            }\n        }else{\n            switch(this.state.sortBySelected){\n                case 'ascRent': text.push('Showing: Least expensive first'); break;\n                case 'descRent': text.push('Showing: Most expensive first'); break;\n            }\n        }\n\n\n\n        return 'Chosen filters are <br/>'+text.join('<br/>')\n\n        // Searching in county Dublin<br>\n        // Area: Amiens Street<br>\n        // Rent: between 200 to 1200 Euros<br>\n        // Bedrooms: between 2 to 4<br>\n        // Showing: Most recent first\n    }\n\n    handleClearFilters() {\n        FlowRouter.go('/b/:slug/:pageno?', {slug: 'rent-in-ireland'});\n    }\n    formatedPT(propertyTypeSelected){\n        propertyTypeSelected = propertyTypeSelected.toLowerCase();\n        if(propertyTypeSelected=='student')return 'Student Accommodation';\n        if(propertyTypeSelected=='holidayhomes')return 'Holiday Homes';\n        if(propertyTypeSelected=='parkingspace')return 'Parking Space';\n        return titleCaseAllWords(propertyTypeSelected);\n    }\n\n    propGrid() {\n        const self = this;\n        let propType = '';\n        return (\n            <div className=\"row\">\n                {self.state.auctions.map((auction, i) => {\n                    return (\n                        <div key={i} className=\"col-md-4 col-sm-6 img-hold-div\">\n                            {this.state.properties.map(function (property, a) {\n                                if (auction.propertyId !== property._id) return false\n                                propType = '';\n                                switch(property.type){\n                                    case 'apartment': propType = 'Apartment to rent'; break;\n                                        case 'house': propType = 'House for rent'; break;\n                                        case 'student': propType = 'Student Accommodation'; break;\n                                        case 'share': propType = 'Flat Share'; break;\n                                        case 'holidayhomes': propType = 'Holiday Home'; break;\n                                        case 'studio': propType = 'Studio for rent'; break;\n                                }\n                                return (\n                                    <div key={a} className=\"proj-card\">\n                                        <div className=\"prop-img-hold\">\n                                            <a href={\n                                                property.slug && auction.lettingAuctionCode ?\n                                                    FlowRouter.url('rent', {\n                                                        slug: property.slug,\n                                                        key: auction.lettingAuctionCode\n                                                    })\n                                                    :\n                                                    FlowRouter.url('letting', {key: auction.lettingAuctionCode})\n                                            }>\n                                                <div className=\"image-holder\">\n                                                    {typeof property.gallery !== 'undefined' && property.gallery.length > 0 && typeof property.gallery[0] === 'object' ? (\n                                                        <img className=\"img-responsive\" src={property.gallery[0].url}\n                                                             alt={'Photo 1 of ' + titleCase(property.address.address) + (property.address.area ? \", \" + titleCase(property.address.area) : '') + (property.address.county ? \", \" + titleCase(property.address.county) : '')}/>\n                                                    ) : (\n                                                        <div className=\"item active\">\n                                                            <img src={cdnPath(\"/images/no-photo.png\")}\n                                                                 alt={'Image not available'}\n                                                                 className=\"img-responsive\"/>\n                                                        </div>\n                                                    )}\n                                                    <div className=\"image-position\">\n                                                        <h3 className=\"color-white\"\n                                                            style={{paddingBottom: \"2px\"}}>{property.address.area ? titleCase(property.address.area) : ''}{property.address.county ? (property.address.area ? \", \" : \"\") + titleCase(property.address.county) : ''}</h3>\n                                                        {/*<h4>{property.address.county ? titleCase(property.address.county) : ''} </h4>*/}\n                                                        {propType ? ( <h4 style={{paddingBottom:'4px'}}>{propType}</h4> ) : ''}\n                                                        <h4>{property.bedCount ? property.bedCount : '1'} Beds, {property.baths ? property.baths : '1'} Baths </h4>\n                                                    </div>\n\n                                                </div>\n                                                <div className=\"bg-opacity\"></div>\n                                            </a>\n                                        </div>\n                                        <div className=\"textbox-holder\" style={{margin: 0, padding: 20, height: 130}}>\n                                            <h4>\n                                                <a href={\n                                                    property.slug && auction.lettingAuctionCode ?\n                                                        FlowRouter.url('rent', {\n                                                            slug: property.slug,\n                                                            key: auction.lettingAuctionCode\n                                                        })\n                                                        :\n                                                        FlowRouter.url('letting', {key: auction.lettingAuctionCode})\n                                                }>\n                                                    {titleCase(property.address.address)}\n                                                    {property.address.area ? \" \" + titleCase(property.address.area) : ''}\n                                                    {/*{property.address.county ? \" \"+titleCase(property.address.county) : ''}*/}\n                                                </a>\n                                            </h4>\n                                            <ul>\n                                                <li className=\"left-border\">\n                                                    <h4>Rent</h4>\n                                                    <div className={'h2-div'}>&euro;<span>{auction.price}</span></div>\n                                                </li>\n                                                {/*<li className=\"\" style={{verticalAlign:\"middle\"}}>*/}\n                                                {/*<h4 style={{padding:\"0\"}}>{property.bedCount ? property.bedCount : '1'} Beds</h4><br/>*/}\n                                                {/*<h4>{property.baths ? property.baths : '1'} Baths</h4>*/}\n                                                {/*</li>*/}\n                                                <li className=\"pad-right-0\">\n                                                    <a\n                                                        className=\"transparent-btn btns view-details\"\n                                                        href={\n                                                            property.slug && auction.lettingAuctionCode ?\n                                                                FlowRouter.url('rent', {\n                                                                    slug: property.slug,\n                                                                    key: auction.lettingAuctionCode\n                                                                })\n                                                                :\n                                                                FlowRouter.url('letting', {key: auction.lettingAuctionCode})\n                                                        }\n                                                        type=\"button\"\n                                                        id=\"enter-auction\">view details</a>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    );\n                })}\n            </div>\n        )\n    }\n    mainAllPage(){\n        const self = this;\n        var slugData = getSlugData();\n        this.sluggedTitle = '';\n        this.sluggedTitleWithoutType = '';\n        this.sluggedType = ''\n\n        try{\n            this.sluggedType = slugData.propertyType ? slugData.propertyType : 'Property';\n\n            this.sluggedTitle += slugData.propertyType ? slugData.propertyType+\" for\" : '';\n            this.sluggedTitle += this.sluggedTitle ? ' rent in' : 'rent in'\n            this.sluggedTitle += slugData.area ? ' '+slugData.area+\"\" : '';\n            this.sluggedTitle += slugData.county ? ' '+slugData.county+\"\" : '';\n            this.sluggedTitle += ' Ireland'\n\n            this.sluggedTitleWithoutType = 'rent in'\n            this.sluggedTitleWithoutType += slugData.area ? ' '+slugData.area+\"\" : '';\n            this.sluggedTitleWithoutType += slugData.county ? ' '+slugData.county+\"\" : '';\n            this.sluggedTitleWithoutType += ' Ireland'\n        }catch(e){}\n\n        try{this.sluggedTitle = this.props.slug.replace(/[-_]/g,' ');}catch(e){}\n\n        this.propertyTypePlural = this.state.propertyTypeSelected;\n        switch(this.propertyTypePlural){\n            case 'apartment': this.propertyTypePlural = 'Apartments '; break;\n                case 'house': this.propertyTypePlural = 'Houses '; break;\n                case 'student': this.propertyTypePlural = 'Student Accommodations '; break;\n                case 'share': this.propertyTypePlural = 'Flat Shares '; break;\n                case 'holidayhomes': this.propertyTypePlural = 'Holiday Homes '; break;\n                case 'studio': this.propertyTypePlural = 'Studios '; break;\n                case '': this.propertyTypePlural = 'advertisements '; break;\n        }\n\n        return (\n            <div id=\"props_list\">\n                <section className=\"logo-below-div value-div\">\n                    <div className=\"container\">\n                        <div className=\"logo-holder-div\">\n                            <div className=\"logo-holder\">\n                                <ul>\n                                    <li>\n                                        <h1 style={{marginBottom: 10}}>\n                                            {self.state.propertyTypeSelected ? this.formatedPT(self.state.propertyTypeSelected) : 'Houses'}\n                                            &nbsp;for rent\n                                            { self.state.countySelected ? (\n                                                <span>\n                                                    &nbsp;in {self.state.areaSelected ? self.state.areaSelected + \" \" : ''}\n                                                    {self.state.countySelected}\n                                                </span>\n                                            ) : (\n                                                \"\"\n                                            )}\n                                        </h1>\n                                        <div className=\"h4-div\" style={{paddingBottom: 5}}>Found {self.state.totalCount} \n                                        {this.props.pageno > 1 ? ( ' (Showing page 3)' ):\"\"}\n                                        </div>\n                                    </li>\n                                </ul>\n                            </div>\n                            {this.state.showXSMenu ? (\n                            <div className=\"xs-filter-menu xs-menu visible-xs transition\">\n                                <div className=\"xs-menu-close-icon text-right\">\n                                    <span className=\"h2-h2\" style={{float: \"left\",marginLeft:'12px'}}>FILTERS</span>\n                                    <span className=\"sprite xs-close\" onClick={self.cancelSearchXSMenu.bind(this)}/>\n                                </div>\n                                <ul className=\"transition\" style={{paddingTop:0}}>\n                                    <li>\n                                        <p className=\"color-grey\">Change County</p>\n                                        <div className=\"styled-input styled-input-select\">\n                                            <select\n                                                name=\"furnished\"\n                                                autoComplete=\"true\"\n                                                style={{margin: 0}}\n                                                className=\"countyDropdown countySelected\"\n                                                onChange={self.handleCountyDropdown.bind(this)}\n                                                value={self.state.countySelected}\n                                            >\n                                                <option value=\"\">All</option>\n                                                {self.state.counties ?\n                                                    self.state.counties.map((item, i) => {\n                                                        return (\n                                                            <option key={i} value={item.value}>{item.label}</option>\n                                                        )\n                                                    }) : \"\"}\n                                            </select>\n                                        </div>\n                                    </li>\n                                    <li>\n                                        <p className=\"color-grey\">Area</p>\n                                        <div className=\"styled-input styled-input-select\">\n                                            <select\n                                                name=\"furnished\"\n                                                autoComplete=\"true\"\n                                                style={{margin: 0}}\n                                                className=\"countyDropdown areaSelected\"\n                                                onChange={self.handleAreaDropdown.bind(this)}\n                                                value={self.state.areaSelected}\n                                            >\n                                                <option value=\"\">All</option>\n                                                {self.state.areas ? self.state.areas.map((item, i) => {\n                                                    return (\n                                                        <option key={i} value={item.value}>{item.label}</option>\n                                                    )\n                                                }):\"\"}\n                                            </select>\n                                        </div>\n                                    </li>\n                                    <li>\n                                        <div className=\"row\">\n                                            <div className=\"col-xs-6 col-md-6\">\n                                                <p className=\"color-grey\">Min Rent</p>\n                                                <div className=\"styled-input styled-input-select\">\n                                                    <select\n                                                        name=\"furnished\"\n                                                        autoComplete=\"true\"\n                                                        style={{margin: 0}}\n                                                        className=\"countyDropdown countySelected\"\n                                                        onChange={self.handleMinRentDropdown.bind(this)}\n                                                        value={self.state.minRentSelected}\n                                                    >\n                                                        <option value=\"\">All</option>\n                                                        { self.minRentOptions().map((item, i) => {\n                                                            return (\n                                                                <option key={i} value={item.value}>{item.label}</option>\n                                                            )\n                                                        }) }\n                                                    </select>\n                                                </div>\n                                            </div>\n                                            <div className=\"col-xs-6 col-md-6\">\n                                                <p className=\"color-grey\">Max Rent</p>\n                                                <div className=\"styled-input styled-input-select\">\n                                                    <select\n                                                        name=\"furnished\"\n                                                        autoComplete=\"true\"\n                                                        style={{margin: 0}}\n                                                        className=\"countyDropdown countySelected\"\n                                                        onChange={self.handleMaxRentDropdown.bind(this)}\n                                                        value={self.state.maxRentSelected}\n                                                    >\n                                                        <option value=\"\">All</option>\n                                                        { self.maxRentOptions().map((item, i) => {\n                                                            return (\n                                                                <option key={i} value={item.value}>{item.label}</option>\n                                                            )\n                                                        }) }\n                                                    </select>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </li>\n                                    <li>\n                                        <p className=\"color-grey\">How many bedrooms?</p>\n                                        <div className=\"row\">\n                                            <div className=\"col-xs-6 col-md-6\">\n                                                <p className=\"color-grey\">Min Beds</p>\n                                                <div className=\"styled-input styled-input-select\">\n                                                    <select\n                                                        name=\"furnished\"\n                                                        autoComplete=\"true\"\n                                                        style={{margin: 0}}\n                                                        className=\"countyDropdown countySelected\"\n                                                        onChange={self.handleMinBedDropdown.bind(this)}\n                                                        value={self.state.minBedCountSelected}\n                                                    >\n                                                        <option value=\"\">All</option>\n                                                        { self.minBedOptions().map((item, i) => {\n                                                            return (\n                                                                <option key={i} value={item.value}>{item.label}</option>\n                                                            )\n                                                        }) }\n                                                    </select>\n                                                </div>\n                                            </div>\n                                            <div className=\"col-xs-6 col-md-6\">\n                                                <p className=\"color-grey\">Max Beds</p>\n                                                <div className=\"styled-input styled-input-select\">\n                                                    <select\n                                                        name=\"furnished\"\n                                                        autoComplete=\"true\"\n                                                        style={{margin: 0}}\n                                                        className=\"countyDropdown countySelected\"\n                                                        onChange={self.handleMaxBedDropdown.bind(this)}\n                                                        value={self.state.maxBedCountSelected}\n                                                    >\n                                                        <option value=\"\">All</option>\n                                                        { self.maxBedOptions().map((item, i) => {\n                                                            return (\n                                                                <option key={i} value={item.value}>{item.label}</option>\n                                                            )\n                                                        }) }\n                                                    </select>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </li>\n                                    <li>\n                                        <p className=\"color-grey\">Property Type? </p>\n                                        <div className=\"styled-input styled-input-select\">\n                                            <select\n                                                name=\"furnished\"\n                                                autoComplete=\"true\"\n                                                style={{margin: 0}}\n                                                className=\"countyDropdown countySelected\"\n                                                onChange={self.handlePropertyTypeDropdown.bind(this)}\n                                                value={self.state.propertyTypeSelected}\n                                            >\n                                                <option value=\"\">All</option>\n                                                {self.state.propertyTypes ? self.state.propertyTypes.map((item, i) => {\n                                                    return (\n                                                        <option key={i} value={item.value}>{item.label}</option>\n                                                    )\n                                                }):\"\"}\n                                            </select>\n                                        </div>\n                                    </li>\n                                    <li>\n                                        <p className=\"color-grey\">Sort by</p>\n                                        <div className=\"styled-input styled-input-select\">\n                                            <select\n                                                name=\"furnished\"\n                                                autoComplete=\"true\"\n                                                style={{margin: 0}}\n                                                className=\"countyDropdown countySelected\"\n                                                onChange={self.handleSortByDropdown.bind(this)}\n                                                value={self.state.sortBySelected}\n                                            >\n                                                <option value=\"\">All</option>\n                                                {self.sortByOptions().map((item, i) => {\n                                                    return (\n                                                        <option key={i} value={item.value}>{item.label}</option>\n                                                    )\n                                                })}\n                                            </select>\n                                        </div>\n                                    </li>\n                                    <li>\n                                        <button className=\"btns green-btn\" onClick={self.searchXSMenu.bind(this)}>Search</button>\n                                        <button className=\"btns transparent-btn\" style={{marginLeft:5}}  onClick={self.cancelSearchXSMenu.bind(this)}>Cancel</button>\n                                    </li>\n                                </ul>\n                            </div>\n                            ):\"\"}\n                            <div className=\"menu houseForRentFilters\">\n                                <ul>\n                                    <li className=\"left-border pad-right-0 cf-1\">\n                                        <p className=\"visible-xs\" dangerouslySetInnerHTML={{__html:this.showFilterText(this.state)}}></p>\n                                        <a className=\"visible-xs\" href=\"javascript:void(0)\" onClick={self.handleShowFilters.bind(this)}><h4 className=\"hfr-h4\">Edit Filters <span className=\"glyphicon glyphicon-filter\"></span></h4></a>\n                                        <p className=\"color-grey\">Change County</p>\n                                        <div className=\"styled-input styled-input-select\">\n                                            <select\n                                                name=\"furnished\"\n                                                autoComplete=\"true\"\n                                                style={{margin: 0}}\n                                                className=\"countyDropdown countySelected\"\n                                                onChange={self.handleCountyDropdown.bind(this)}\n                                                value={self.state.countySelected}\n                                            >\n                                                <option value=\"\">All</option>\n                                                {self.state.counties ?\n                                                    self.state.counties.map((item, i) => {\n                                                        return (\n                                                            <option key={i} value={item.value}>{item.label}</option>\n                                                        )\n                                                    }) : \"\"}\n                                            </select>\n                                        </div>\n                                    </li>\n                                    <li className=\"cf-1 pad-right-0\">\n                                        <p className=\"color-grey\">Area</p>\n                                        <div className=\"styled-input styled-input-select\">\n                                            <select\n                                                name=\"furnished\"\n                                                autoComplete=\"true\"\n                                                style={{margin: 0}}\n                                                className=\"countyDropdown countySelected\"\n                                                onChange={self.handleAreaDropdown.bind(this)}\n                                                value={self.state.areaSelected}\n                                            >\n                                                <option value=\"\">All</option>\n                                                {self.state.areas ? self.state.areas.map((item, i) => {\n                                                    return (\n                                                        <option key={i} value={item.value}>{item.label}</option>\n                                                    )\n                                                }):\"\"}\n                                            </select>\n                                        </div>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n\n                { self.state.totalCount == 0 && this.props.isSubsLoaded ? (\n                    <div className=\"container text-center mar-top-20 pad-btm-30\">\n                        <strong>\n                            No {this.propertyTypePlural}found\n                            { self.state.countySelected ? (\n                                <span>\n                                &nbsp;in {self.state.areaSelected ? self.state.areaSelected + \" of \" : ''}\n                                    county {self.state.countySelected}\n                            </span>\n                            ) : (\n                                \"\"\n                            )}.&nbsp;\n                            Click show all below to search other areas.\n                        </strong>\n\n                        <br/><br/>\n                        <button\n                            className=\"blue-btn btns clearFilters\"\n                            onClick={self.handleClearFilters}\n                            type=\"button\">Show all\n                        </button>\n                    </div>\n                ) : (\"\")}\n\n                { self.state.totalCount > 0 ? (\n                    <section className=\"paginationArea mar-top-20 \">\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-md-12\">\n                                    <p className={'mar-btm-20'}>\n                                        {this.props.pageno > 1 ? ( 'Showing page 3 of ' ):'Found '}\n                                        total {self.state.totalCount ? self.state.totalCount : 'no'} {this.sluggedTitle}. Browse through the apartments, houses, studios, 1 bed, 2 bed, 3 bed rooms available to {this.sluggedTitleWithoutType}. Choose county and area from the top right drop-down options. Click view details button by the {this.sluggedType.toLowerCase()} to know more about it. Use the navigation below to find more {this.sluggedTitle}.\n                                    </p>\n                                    <Pagination\n                                        pagination={self.state.pagination}\n                                        handleChoosePage={self.handleChoosePage}\n                                        parent={self}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                ) : (\"\")}\n\n                {\n                    Meteor.isServer ? (\n                        <div id={\"isservercheckdiv\"}></div>\n                    ):\"\"\n                }\n\n                <section className=\"proplist-sec property-list\">\n                    <div className=\"container\">\n                        {this.propGrid()}\n                    </div>\n                </section>\n                { self.state.totalCount > 0 ? (\n                    <section className=\"paginationArea subscribeTillPopop\">\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-md-12\">\n                                    <Pagination\n                                        pagination={self.state.pagination}\n                                        handleChoosePage={self.handleChoosePage}\n                                        parent={self}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                ) : (\"\")}\n\n\n\n\n\n\n\n                {true ? (\n                    <section className=\"\">\n                        <div className=\"container\">\n                                    <div id=\"homeLinks\" className=\"mar-btm-30 amenities\">\n\n                                        <div className=\"amenitiy-block-removed\" style={{paddingTop:0,textAlign:\"center\"}}>\n                                            { this.props.searchCrumbs === undefined || this.props.searchCrumbs.length == 0  ? (\"\") : (\n                                                <div id=\"searchsection\" className={'row'}>\n                                                    <h2>Search more properties to rent</h2>\n                                                    <p>Chooes a link below to browse through more relavent properties to rent.</p>\n                                                    <br/>\n                                                    <div className=\"pad0\">\n                                                        <div className=\"col-md-5 col-sm-5 col-xs-12\">\n                                                            {this.state.searchCrumbs.c1 ?\n                                                                this.state.searchCrumbs.c1.map(function(crumb,i){\n                                                                    return (\n                                                                        <a key={i} style={{display:\"block\"}} href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                        <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                            {this.state.searchCrumbs.c2 ?\n                                                                this.state.searchCrumbs.c2.map(function(crumb,i){\n                                                                    return (\n                                                                        <a key={i} style={{display:\"block\"}} href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                        <div className=\"col-md-3 col-sm-3 col-xs-12\">\n                                                            {this.state.searchCrumbs.c3 ?\n                                                                this.state.searchCrumbs.c3.map(function(crumb,i){\n                                                                    return (\n                                                                        <a key={i} style={{display:\"block\"}} href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                    </div>\n\n                                                </div>\n                                            )}\n                                            { this.props.fCrumbs === undefined || this.props.fCrumbs.length == 0 ? (\"\") : (\n                                                <div className={'row mar-top-30'}>\n                                                    <h2>Property types to rent</h2><br/>\n                                                    <div className=\"pad0\">\n                                                        <div className=\"col-md-3 col-sm-3 col-xs-12\">\n                                                            {this.state.fCrumbs.c1 ?\n                                                                this.state.fCrumbs.c1.map(function (crumb, i) {\n                                                                    return (\n                                                                        <a key={i} style={{display: \"block\"}}\n                                                                           href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                        <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                            {this.state.fCrumbs.c2 ?\n                                                                this.state.fCrumbs.c2.map(function (crumb, i) {\n                                                                    return (\n                                                                        <a key={i} style={{display: \"block\"}}\n                                                                           href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                        <div className=\"col-md-5 col-sm-5 col-xs-12\">\n                                                            {this.state.fCrumbs.c3 ?\n                                                                this.state.fCrumbs.c3.map(function (crumb, i) {\n                                                                    return (\n                                                                        <a key={i} style={{display: \"block\"}}\n                                                                           href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            )}\n                                            { this.props.areaCrumbs === undefined || this.props.areaCrumbs.length == 0  ? (\"\") : (\n                                                <div className={'row mar-top-30'}>\n                                                    <h2>{self.state.countySelected} neighbourhoods</h2><br/>\n                                                    <div className=\"pad0\">\n                                                        <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                            {this.state.areaCrumbs.c1 ?\n                                                                this.state.areaCrumbs.c1.map(function (crumb, i) {\n                                                                    return (\n                                                                        <a key={i} style={{display: \"block\"}}\n                                                                           href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                        <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                            {this.state.areaCrumbs.c2 ?\n                                                                this.state.areaCrumbs.c2.map(function (crumb, i) {\n                                                                    return (\n                                                                        <a key={i} style={{display: \"block\"}}\n                                                                           href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                        <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                            {this.state.areaCrumbs.c3 ?\n                                                                this.state.areaCrumbs.c3.map(function (crumb, i) {\n                                                                    return (\n                                                                        <a key={i} style={{display: \"block\"}}\n                                                                           href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            )}\n                                            { this.props.countyCrumbs === undefined || this.props.countyCrumbs.length == 0  ? (\"\") : (\n                                                <div className={'row mar-top-30'}>\n                                                    <h2>Other counties</h2><br/>\n                                                    <div className=\"pad0\">\n                                                        <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                            {this.state.countyCrumbs.c1 ?\n                                                                this.state.countyCrumbs.c1.map(function (crumb, i) {\n                                                                    return (\n                                                                        <a key={i} style={{display: \"block\"}}\n                                                                           href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                        <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                            {this.state.countyCrumbs.c2 ?\n                                                                this.state.countyCrumbs.c2.map(function (crumb, i) {\n                                                                    return (\n                                                                        <a key={i} style={{display: \"block\"}}\n                                                                           href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                        <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                            {this.state.countyCrumbs.c3 ?\n                                                                this.state.countyCrumbs.c3.map(function (crumb, i) {\n                                                                    return (\n                                                                        <a key={i} style={{display: \"block\"}}\n                                                                           href={crumb.url}>{crumb.name}</a>\n                                                                    )\n                                                                })\n                                                                : \"\"}\n                                                        </div>\n                                                    </div>\n\n                                                </div>\n                                            )}\n                                        </div>\n\n                                    </div>\n                                \n                        </div>\n                    </section>\n                ) : \"\"}\n\n\n\n\n\n\n            </div>\n        )\n    }\n\n    render() {\n    const self = this;\n    let totalCount = 0;\n    if(Meteor.isClient && this.propsListHTML==\"\"){\n        this.propsListHTML = $('#props_list').html()\n    }\n    if(Meteor.isClient) {\n        this.isServerSSRReq = $('#isservercheckdiv').html()\n        if (this.isServerSSRReq == \"\") this.isServerSSRReq = true\n        else this.isServerSSRReq = false\n    }\n    // if(this.propsListHTML) console.log(\"propsListHTML: \"+this.propsListHTML.length)\n\n    return (\n            <div>\n                <MainLayoutHeader />\n                { (this.props.isSubsLoaded && self.state.auctions && self.state.properties )  ? (\n                        this.mainAllPage()\n                    ) :\n                    this.isServerSSRReq && this.propsListHTML? (\n                        <div dangerouslySetInnerHTML={{__html: this.propsListHTML}}></div>\n                    ): (\n                        <section className=\"mar-top-20 mar-btm-20 no-print\">\n                            <div className=\"container text-center mar-top-20 pad-btm-30\">\n                                <div className=\"filter-holder\">\n                                    <div className=\"mar-top-30\">\n                                        <div className={'h2-div'}>Loading...</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </section>\n                )}\n                <MainLayoutFooter />\n            </div>\n        )\n    }\n};\nvar startTime = Date.now();\nexport default withTracker(() => {\n    var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n    function counties() {\n\n        var ret = []\n        for(var i=0;i< staticCounties.length;i++){\n            if(!staticCounties[i])continue;\n            ret.push({label: titleCase(staticCounties[i]), value: staticCounties[i] })\n        }\n        return ret;\n    }\n\n    function areas() {\n\n        var distinctEntries = _.uniq(Collections.Areas.find({}, {//Dynamically load areas based on the subscription.\n            sort: {Area: 1}, fields: {Area: true}\n        }).fetch().map(function(x) {\n            return x.Area;\n        }), true);\n        var ret = []\n        for(var i=0;i< distinctEntries.length;i++){\n            if(!distinctEntries[i])continue;\n            ret.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n        }\n        return ret;\n    }\n    function propertyTypes() {\n        var Config = Collections.Config.find().fetch();Config = Config[0];\n        var propertyTypes = []\n        if(Config)\n            for(var i=0;i< Config.propertyType.length;i++){\n                propertyTypes.push({label: titleCase(Config.propertyType[i].name), value: Config.propertyType[i].value})\n            }\n\n        return propertyTypes;\n    }\n\n    function areaSelected(){\n        var data = getSlugData();\n        var areaSelected = data.area;\n\n        if(areaSelected!=false)return areaSelected;\n        else{\n            var data = getSlugData();\n            return data.area;\n        }\n    }\n\n\n    function propertyTypeSelected(){\n        var data = getSlugData();\n        var propertyTypeSelected = data.propertyType;\n\n        if(propertyTypeSelected!=false){\n            propertyTypeSelected = propertyTypeSelected.toLowerCase();\n            return propertyTypeSelected;\n        }\n        else{\n            var data = getSlugData();\n            propertyTypeSelected = data.propertyType;\n            propertyTypeSelected = propertyTypeSelected.toLowerCase();\n            return propertyTypeSelected;\n        }\n    }\n\n    function getPaginationData(totalResultsCount,currentPageNo,resultsPerPage) {\n        currentPageNo = parseInt(currentPageNo);\n        var pages = [], prevPage = {}, nextPage={};\n        var pgMin = currentPageNo-4, pgMax = currentPageNo+ 5, maxPages = Math.ceil(totalResultsCount/resultsPerPage);\n        if(!Number.isInteger(currentPageNo)){\n            return {\n                \"prevPage\":prevPage,\n                \"pages\":pages,\n                \"nextPage\": nextPage\n            }\n        }\n        \n        if(pgMin<1)pgMin =1;\n        if(pgMax<1)pgMax =1;\n        if(maxPages<1)maxPages =1;\n        if(pgMin>maxPages)currentPageNo =maxPages;\n\n        let tmp={};let href = '';\n        let cRoute = FlowRouter.current().route.name, cParams = FlowRouter.current().params, cQueryParams = FlowRouter.current().queryParams;\n        for (var i=pgMin; i<=maxPages;i++){\n            cParams.pageno = i;\n            tmp = {\n                \"href\": FlowRouter.url(cRoute, cParams, cQueryParams),\n                \"text\": i\n            }\n            if(i== currentPageNo) {\n                tmp['href'] = 'javascript:void(0);';\n                tmp['current'] = true;\n            }\n            pages.push(tmp)\n        }\n\n        var prevPageNo = currentPageNo- 1, nextPageNo=currentPageNo+ 1;\n\n        if(prevPageNo<1){\n            prevPage['href'] = 'javascript:void(0)';\n            prevPage['text'] = 'Previous';\n            prevPage['disabled'] = 'disabled';\n        }else{\n            cParams.pageno = prevPageNo;\n            prevPage['href'] = FlowRouter.url(cRoute, cParams, cQueryParams),\n                prevPage['prevPageNo'] = prevPageNo;\n            prevPage['text'] = 'Previous';\n            prevPage['disabled'] = '';\n        }\n\n        if(nextPageNo>maxPages) nextPageNo = maxPages;\n        if(nextPageNo == currentPageNo){\n            nextPage['href'] = 'javascript:void(0)';\n            nextPage['text'] = 'Next';\n            nextPage['disabled'] = 'disabled';\n        }else{\n            cParams.pageno = nextPageNo;\n            nextPage['href'] = FlowRouter.url(cRoute, cParams, cQueryParams),\n                nextPage['text'] = 'Next';\n            nextPage['nextPageNo'] = nextPageNo;\n            nextPage['disabled'] = '';\n        }\n\n        return {\n            \"prevPage\":prevPage,\n            \"pages\":pages,\n            \"nextPage\": nextPage\n        }\n    }\n\n    advancedCrumbs = function(countyParam,areaParam,propertyType){\n        let fCrumbs = [], tmpCrumbs = [], areaCrumbs = [], countyCrumbs = [];\n        if(propertyType)propertyType = propertyType.toLowerCase();\n\n        // Home / Search Residential Rentals / Dublin City Apartments for Rent / Dublin 2 Apartments for Rent\n        //Property Size\n        //Property Size - Property Type\n        //Property Size - Property Type - County\n        //Property Type - county\n        //Counties\n        //Areas\n        //Property Size - Property Type - area - County\n        //Property Size - area - County\n        //Property Type - area - county\n\n        fCrumbs.push({url: generateSlugURL({propertyType: 'studio'}), name: 'Studios'})//Property Size\n        fCrumbs.push({url: generateSlugURL({bedCount: 1}), name: '1-Bed'})//Property Size\n        fCrumbs.push({url: generateSlugURL({bedCount: 2}), name: '2-Beds'})\n        fCrumbs.push({url: generateSlugURL({bedCount: 3}), name: '3-Beds'})\n\n        tmpCrumbs.push({url: generateSlugURL({cheapSort: true, propertyType: 'house'}), name: 'Cheap Houses'})\n        tmpCrumbs.push({url: generateSlugURL({bedCount: 1, propertyType: 'house'}), name: '1-Bed Houses'})//Property Size - Property Type\n        tmpCrumbs.push({url: generateSlugURL({bedCount: 2, propertyType: 'house'}), name: '2-Bed Houses'})\n        tmpCrumbs.push({url: generateSlugURL({bedCount: 3, propertyType: 'house'}), name: '3-Bed Houses'})\n        tmpCrumbs.push({url: generateSlugURL({luxurySort: true, propertyType: 'house'}), name: 'Luxury Houses'})\n\n        if (propertyType == 'house') {\n            fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        fCrumbs.push({\n            url: generateSlugURL({cheapSort: true, propertyType: 'apartment'}),\n            name: 'Cheap Apartments'\n        })\n        fCrumbs.push({url: generateSlugURL({bedCount: 1, propertyType: 'apartment'}), name: '1-Bed Apartments'})//Property Size - Property Type\n        fCrumbs.push({url: generateSlugURL({bedCount: 2, propertyType: 'apartment'}), name: '2-Bed Apartments'})\n        fCrumbs.push({url: generateSlugURL({bedCount: 3, propertyType: 'apartment'}), name: '3-Bed Apartments'})\n        fCrumbs.push({\n            url: generateSlugURL({luxurySort: true, propertyType: 'apartment'}),\n            name: 'Luxury Apartments'\n        })\n\n        if (propertyType != 'house') {\n            fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n//dublin-apartments\n        //Not doing dublin-houses due to less searches for Dublin apartments\n\n        for (var i = 0; i < staticCounties.length; i++) {\n            if (!staticCounties[i]) continue;\n            countyCrumbs.push({\n                url: generateSlugURL({county: staticCounties[i]}),\n                name: staticCounties[i] + ' Apartments'\n            })\n        }\n\n        if (countyParam) {\n            // var propertyType = curURL.propertyType;\n            // var county = curURL.county\n            // var area = curURL.area\n            // var maxRent = curURL.maxRent\n            // var country = curURL.country;\n            // var bedCount = curURL.bedCount;\n            // var luxurySort = curURL.luxurySort;\n            // var cheapSort = curURL.cheapSort;\n\n            //////////////////////////// WITH COUNTY\n            tmpCrumbs = [];\n            tmpCrumbs.push({\n                url: generateSlugURL({cheapSort: true, propertyType: 'house', county: countyParam}),\n                name: 'Cheap Houses to rent in ' + titleCase(countyParam)\n            })\n\n            if (propertyType == 'house') {\n                fCrumbs = fCrumbs.concat(tmpCrumbs);\n            }\n            fCrumbs.push({\n                url: generateSlugURL({cheapSort: true, propertyType: 'apartment', county: countyParam}),\n                name: 'Cheap Apartments to rent in ' + titleCase(countyParam)\n            })\n\n            if (propertyType != 'house') {\n                fCrumbs = fCrumbs.concat(tmpCrumbs);\n            }\n\n            fCrumbs.push({\n                url: generateSlugURL({propertyType: 'studio', county: countyParam}),\n                name: 'Studio to rent in ' + titleCase(countyParam)\n            })\n\n            tmpCrumbs = [];\n            tmpCrumbs.push({\n                url: generateSlugURL({bedCount: 1, propertyType: 'house', county: countyParam}),\n                name: '1-Bed Houses to rent in ' + titleCase(countyParam)\n            })//Property Size - Property Type\n            tmpCrumbs.push({\n                url: generateSlugURL({bedCount: 2, propertyType: 'house', county: countyParam}),\n                name: '2-Bed Houses to rent in ' + titleCase(countyParam)\n            })\n            tmpCrumbs.push({\n                url: generateSlugURL({bedCount: 3, propertyType: 'house', county: countyParam}),\n                name: '3-Bed Houses to rent in ' + titleCase(countyParam)\n            })\n            tmpCrumbs.push({\n                url: generateSlugURL({luxurySort: true, propertyType: 'house', county: countyParam}),\n                name: 'Luxury Houses to rent in ' + titleCase(countyParam)\n            })\n\n            if (propertyType == 'house') {\n                fCrumbs = fCrumbs.concat(tmpCrumbs);\n            }\n            fCrumbs.push({\n                url: generateSlugURL({bedCount: 1, propertyType: 'apartment', county: countyParam}),\n                name: '1-Bed Apartments to rent in ' + titleCase(countyParam)\n            })//Property Size - Property Type\n            fCrumbs.push({\n                url: generateSlugURL({bedCount: 2, propertyType: 'apartment', county: countyParam}),\n                name: '2-Bed Apartments to rent in ' + titleCase(countyParam)\n            })\n            fCrumbs.push({\n                url: generateSlugURL({bedCount: 3, propertyType: 'apartment', county: countyParam}),\n                name: '3-Bed Apartments to rent in ' + titleCase(countyParam)\n            })\n            fCrumbs.push({\n                url: generateSlugURL({luxurySort: true, propertyType: 'apartment', county: countyParam}),\n                name: 'Luxury Apartments to rent in ' + titleCase(countyParam)\n            })\n\n            if (propertyType != 'house') {\n                fCrumbs = fCrumbs.concat(tmpCrumbs);\n            }\n\n            if (areaParam) {\n                //////////////////////////// WITH AREA COUNTY\n                tmpCrumbs = [];\n                tmpCrumbs.push({\n                    url: generateSlugURL({\n                        cheapSort: true,\n                        propertyType: 'house',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: 'Cheap Houses to rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n\n                if (propertyType == 'house') {\n                    fCrumbs = fCrumbs.concat(tmpCrumbs);\n                }\n                fCrumbs.push({\n                    url: generateSlugURL({\n                        cheapSort: true,\n                        propertyType: 'apartment',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: 'Cheap Apartments to rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n\n                if (propertyType != 'house') {\n                    fCrumbs = fCrumbs.concat(tmpCrumbs);\n                }\n\n                fCrumbs.push({\n                    url: generateSlugURL({propertyType: 'studio', county: countyParam, area: areaParam}),\n                    name: 'Studio to rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n\n                tmpCrumbs = [];\n                tmpCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 1,\n                        propertyType: 'house',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '1-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })//Property Size - Property Type\n                tmpCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 2,\n                        propertyType: 'house',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '2-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n                tmpCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 3,\n                        propertyType: 'house',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '3-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n                tmpCrumbs.push({\n                    url: generateSlugURL({\n                        luxurySort: true,\n                        propertyType: 'house',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: 'Luxury Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n\n                if (propertyType == 'house') {\n                    fCrumbs = fCrumbs.concat(tmpCrumbs);\n                }\n                fCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 1,\n                        propertyType: 'apartment',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '1-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })//Property Size - Property Type\n                fCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 2,\n                        propertyType: 'apartment',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '2-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n                fCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 3,\n                        propertyType: 'apartment',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '3-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n                fCrumbs.push({\n                    url: generateSlugURL({\n                        luxurySort: true,\n                        propertyType: 'apartment',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: 'Luxury Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n\n                if (propertyType != 'house') {\n                    fCrumbs = fCrumbs.concat(tmpCrumbs);\n                }\n            }\n\n            var distinctEntries = _.uniq(Collections.Areas.find({}, {//County: countyParam ; Dynamically load areas based on the subscription.\n                sort: {Area: 1}, fields: {Area: true}\n            }).fetch().map(function (x) {\n                return x.Area;\n            }), true);\n            areaCrumbs = []\n            for (var i = 0; i < distinctEntries.length; i++) {\n                if (!distinctEntries[i]) continue;\n                // if (distinctEntries[i] == areaParam) continue;//Don't show the same area in this list\n                areaCrumbs.push({\n                    url: generateSlugURL({county: countyParam, area: distinctEntries[i]}),\n                    name: distinctEntries[i] + ' Apartments'\n                })\n            }\n\n            // let ptypeString='';\n            // switch(propertyType){\n            //     case 'apartment': ptypeString = 'Apartments '; break;\n            //     case 'house': ptypeString = 'Houses '; break;\n            // }\n            // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'Studio for rent in county '+titleCase(PD.address.county)})\n            // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'1-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n            // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'2-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n            // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'3-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n        }\n        return {\n            fCrumbs:fCrumbs,\n            areaCrumbs: areaCrumbs,\n            countyCrumbs:countyCrumbs\n        }\n    }\n\n    var pageno = FlowRouter.getParam('pageno'); if(!pageno)pageno=1;\n    var resperpage = 20;\n    var minBeds = FlowRouter.getQueryParam('minBeds'); if(!minBeds)minBeds=\"\";\n    var maxBeds = FlowRouter.getQueryParam('maxBeds'); if(!maxBeds)maxBeds=\"\";\n    var minRent = FlowRouter.getQueryParam('minRent'); if(!minRent)minRent=\"\";\n    var maxRent = FlowRouter.getQueryParam('maxRent'); if(!maxRent)maxRent=\"\";\n    var bedCount = FlowRouter.getQueryParam('bedCount'); if(!bedCount)bedCount=null;\n    var luxurySort = FlowRouter.getQueryParam('luxurySort'); if(!luxurySort)luxurySort=null;\n    var cheapSort = FlowRouter.getQueryParam('cheapSort'); if(!cheapSort)cheapSort=null;\n    var mostRecentSort = FlowRouter.getQueryParam('mostRecentSort'); if(!mostRecentSort)mostRecentSort=null;\n    var leastRecentSort = FlowRouter.getQueryParam('leastRecentSort'); if(!leastRecentSort)leastRecentSort=null;\n    var propertykey = FlowRouter.getQueryParam('propertykey'); if(!propertykey)propertykey=null;\n    var slug = FlowRouter.getParam('slug');\n    var query = FlowRouter.current().queryParams;\n    var current = FlowRouter.current();\n    var currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params, FlowRouter.current().queryParams)\n\n    // try{if(!slug)slug = FlowRouter.current().params.slug;}catch(e){}\n\n    if(!slug || slug.indexOf('-in-')==-1){\n        return {\n            isSubsLoaded : false\n        }\n        // if( (Date.now() - startTime) < 1000 )\n        //     return {\n        //         isSubsLoaded : false\n        //     }\n        // // this.render('notFound');\n        // var prevRoute = {name: 'home',args:{scrollTo:0} }\n        // Session.set('prevRoute',prevRoute);\n        // FlowRouter.go('pagenotfound');\n        // return;\n    }\n\n    let sortBySelected = \"mRecent\";\n    var sortOptions = { updatedAt : -1 }\n    if( luxurySort ){sortBySelected = \"descRent\"; sortOptions = { rentMonthly : -1 } }\n    else if( cheapSort ){sortBySelected = \"ascRent\";  sortOptions = { rentMonthly : 1 } }\n    else if( mostRecentSort ){sortBySelected = \"mRecent\"; sortOptions = { updatedAt : -1 } }\n    else if( leastRecentSort ){sortBySelected = \"lRecent\"; sortOptions = { updatedAt : 1 } }\n\n    const bLettingsSub = Meteor.subscribe(\"browseLettings\", {viewName: 'browseLettings.view', slug:slug, pageno:pageno, resperpage:resperpage, query:query, propertykey:propertykey} ,function(){\n        if(bLettingsSub.ready() && areasSub.ready()  && Meteor.isClient)Session.set('subscriptionsReady',true);\n    });\n\n    Meteor.subscribe(\"total-houses-for-rent-count\", {viewName: 'browseLettings.view', slug:slug, pageno:pageno, resperpage:resperpage, query:query, propertykey:propertykey});\n\n    if(Meteor.isServer){\n        if(countsCollection==null)countsCollection = new Mongo.Collection('counts');\n        Counts.get = function countsGet(name) {\n            const count = countsCollection.findOne(name);\n            return count && count.count || 0;\n        };\n        Counts.has = function countsHas(name) {\n            return !!countsCollection.findOne(name);\n        };\n\n        totalCount = Counts.get(\"total-houses-for-rent-count\");\n\n    }else{\n        totalCount = Counts.get(\"total-houses-for-rent-count\");\n    }\n\n    var slugData = getSlugData();\n    var countySelected = slugData.county;\n\n    Meteor.subscribe('userData');\n    const areasSub = Meteor.subscribe('Areas','','',countySelected,'','',function(){\n        if(bLettingsSub.ready() && areasSub.ready() && Meteor.isClient )Session.set('subscriptionsReady',true);\n    })\n    Meteor.subscribe('Config');\n\n    if(Meteor.isClient)Session.get('subscriptionsReady');\n    if( !bLettingsSub.ready() || !areasSub.ready() ) {\n        return {\n            isSubsLoaded : false\n        }\n    }\n\n    ////////// ADV BREADCRUMBS MORE LINKS\n    let advC = {fCrumbs:[],areaCrumbs:[],countyCrumbs:[]}\n    if(true) {\n        advC = advancedCrumbs(slugData.county,slugData.area,slugData.propertyType);\n    }\n    ////////// END ADV BREADCRUMBS\n\n    var title = '';//slug.replace(/[-_]/g,' ')\n    title += slugData.propertyType ? slugData.propertyType+\" for\" : '';\n    title += title ? ' rent in' : 'Rent in'\n    title += slugData.area ? ' '+slugData.area+\"\" : '';\n    title += slugData.county ? ' '+slugData.county+\"\" : '';\n    title += ' Ireland'\n\n    var description = \"\"\n    description = 'Find';\n    description += slugData.propertyType ? ' an '+slugData.propertyType+\" for\" : '';\n    description += ' rent in'\n    description += slugData.area ? ' '+slugData.area+\"\" : '';\n    description += slugData.county ? ' '+slugData.county+\"\" : '';\n    description += ' Ireland.'\n\n    description += \" Browse through the apartments, houses, studios, 1 bed, 2 bed, 3 bed rooms available to rent in Ireland.\"\n\n\n    // Find an apartment for rent in Ireland. Browse through the studio, apartments, houses, 1 bed, 2 bed, 3 bed rooms available to rent in Ireland.\n    // Found total 32 apartment for rent in Ireland. Browse through the studio, apartments, houses, 1 bed, 2 bed, 3 bed rooms available to rent in Ireland. Choose county and area from the top right drop-down options. Click view details button by the apartment to know more about it. Use the navigation below to find more apartment for rent in Ireland.\n    clearMeta();\n    let titleTmp = title + ' | SpotMyCrib'\n    if(titleTmp.length<=75)title = titleTmp;\n\n    DocHead.setTitle(title);\n    DocHead.addMeta({name: \"description\", content: description});\n\n    return {\n        // currentUserId: Meteor.userId(),\n        counties: counties(),\n        totalCount: totalCount,\n        pagination: getPaginationData(totalCount,pageno,20),\n        pageno:pageno,\n        areas: areas(),\n        propertyTypes: propertyTypes(),\n        auctions: Collections.Auctions.find({},{sort:sortOptions}).fetch(),\n        properties: Collections.Properties.find().fetch(),\n        areaSelected: areaSelected(),\n        countySelected: countySelected,\n        propertyTypeSelected: propertyTypeSelected(),\n        isSubsLoaded : true,\n        slug:slug,\n        fCrumbs : advC.fCrumbs,\n        areaCrumbs : advC.areaCrumbs,\n        countyCrumbs : advC.countyCrumbs,\n        minRentSelected: slugData.minRent,\n        maxRentSelected: slugData.maxRent,\n        minBedCountSelected: slugData.minBeds,\n        maxBedCountSelected: slugData.maxBeds,\n        sortBySelected: sortBySelected,\n    };\n})(HousesForrent);","/**\n * Created by njanjanam on 08/08/2018.\n */\nimport { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { withTracker } from 'meteor/react-meteor-data';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\nimport {Collections} from \"../../api/collections\";\nimport { isArray } from 'util';\nupdateViewsCalled=false;\npropertyKeyOfThisPage = ''\nif(Meteor.isClient)Session.set('subscriptionsReady',false);\nif(Meteor.isClient)Session.set('subscriptionsReady2',false);\n\nfunction titleCase(str) {\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction dateFormat(text){\n    var date = new Date(text)\n    if(date.toString() == \"Invalid Date\")return 'N/A';\n    return  date.toDateString();\n}\nfunction addCommaToEach(arr){\n    if(!arr)return '';\n    return  arr.join(', ');\n}\nfunction nlToBr(str) {\n    if (!str) return '';\n    return str.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n}\nfunction validateMobileNumber(mobile){\n    let tmp = mobile.split('+');\n    if(tmp.length>1)\n        mobile = tmp[1];\n    if(mobile.length<6) return false;\n    return /^\\d+$/.test(mobile)\n}\nfunction attachEvents() {\n    $(\".confirmApplyBtn\").unbind().bind(\"click\",function () {\n        ga('send', 'event', 'PDPage', 'confirmApplyBtn', 'CAP: Confirm Apply Btn Clicked');\n    })\n    $(\".redirectToProfilePage\").unbind().bind(\"click\",function () {\n        redirectToProfilePageEvent();\n    })\n    $(\".pd_cap_btn\").unbind().bind(\"click\",function () {\n        console.log('pd_cap_btn');\n        ga('send', 'event', 'PDPage', 'CAPUploadRefBtnClicked', 'CAP: Upload Reference Btn Clicked');\n        redirectToProfilePageEvent();\n    })\n    $(\".pd_cap_a\").unbind().bind(\"click\",function () {\n        console.log('pd_cap_a');\n        ga('send', 'event', 'PDPage', 'CAPUploadRefAClicked', 'CAP: Upload Reference Anchor Link Clicked');\n        redirectToProfilePageEvent();\n    })\n    $(\".cap_closePopupBtn\").unbind().bind(\"click\",function () {\n        console.log('cap_closePopupBtn');\n        ga('send', 'event', 'PDPage', 'CAPClosePopupBtn', 'CAP: Cancle Apply Btn Clicked');\n        closePopupEvent();\n    })\n}\nfunction showConfDialog(){\n    $.fancybox({\n        'padding': 0,\n        'href': '#fully-confirm',\n        afterShow:function(){\n            attachEvents();\n\n        },\n        afterClose:function(template){}\n    })\n}\nfunction redirectToProfilePageEvent() {\n    var prevRoute = {name: FlowRouter.current().route.name,args:{key:FlowRouter.current().params.key} }\n    Session.set('prevRoute',prevRoute);\n    FlowRouter.go(\"account/profile\")\n    closePopupEvent();\n}\nfunction closePopupEvent() {\n    if($)\n        if($.fancybox)\n            $.fancybox.close();\n}\nfunction generateSlug(curURL){\n    var propertyType = curURL.propertyType;\n    var county = curURL.county\n    var area = curURL.area\n    var maxRent = curURL.maxRent\n    var country = curURL.country;\n    var bedCount = curURL.bedCount;\n    var luxurySort = curURL.luxurySort;\n    var cheapSort = curURL.cheapSort;\n    // const territory = target.territory.value;\n\n    var slug='';\n    var query={};\n\n    if(propertyType)propertyType = propertyType.replace(/\\s+/g, '_')\n    if(county)county = county.replace(/\\s+/g, '_')\n    if(area)area = area.replace(/\\s+/g, '_')\n    if(country)country = country.replace(/\\s+/g, '_')\n\n    if(propertyType)slug=propertyType+\"-for-\"\n    slug+=\"rent\"\n    // if(areaSelected||countySelected||country)\n    slug+=\"-in-\"\n\n    if(!county)area = '';\n\n    if(area)slug+=area\n    if(area && county)slug+=\"-\"\n    if(county)slug+=county\n\n    if(bedCount)query.bedCount = bedCount;\n    if(luxurySort)query.luxurySort = 1;\n    if(cheapSort)query.cheapSort = 1;\n\n    if(country)slug+=\"-\"+country\n    else slug+=\"-ireland\"\n\n    var range = [{cur:\"eur\",min:400,max:10000}]\n    var selectedCur = range[0];\n    if(maxRent && maxRent!=selectedCur.max)query.maxRent = maxRent;\n\n    // apartment-for-rent-in-dundrum-dublin-ireland\n    // apartment-for-rent-in-donnybroke-london-uk\n    // rent/apartment/dundrum/dublin\n    // rent/apartment/donnybroke/london/england/uk/\n    return [\n        slugify(slug),\n        query\n    ]\n}\nfunction generateSlugURL(curURL){\n    var ret = generateSlug(curURL)\n    return FlowRouter.url('b',{slug:ret[0]},ret[1]);\n}\nfunction slugify (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '')           // Replace spaces with \"\"\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with ''\n        .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single ''\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}\nfunction showLoginDialog(){\n    Session.set('showForgotForm',false)\n    Session.set('showSignupForm',false)\n    Session.set('showLoginSignupFancyBoxDialog',true)\n    Session.set('showLoginDialog',true)\n}\nfunction fixImageSize() {\n    var avgW=0;\n    $('#relatedsection .thumbnail img').each(function(){\n\n        if(!avgW)avgW = $(this).width();\n        else {\n            avgW += $(this).width();\n            avgW =  avgW / 2;\n        }\n    })\n    if(!avgW)avgW = 250;\n    $('#relatedsection .thumbnail img').width('100%');\n    $('#relatedsection .thumbnail img').height(avgW*0.7);\n}\nfunction chunkify(a, n, balanced) {\n\n    if (n < 2)\n        return [a];\n\n    if(!Array.isArray(a))return [];\n\n    var len = a.length,\n        out = [],\n        i = 0,\n        size;\n\n    if (len % n === 0) {\n        size = Math.floor(len / n);\n        while (i < len) {\n            out.push(a.slice(i, i += size));\n        }\n    }\n\n    else if (balanced) {\n        while (i < len) {\n            size = Math.ceil((len - i) / n--);\n            out.push(a.slice(i, i += size));\n        }\n    }\n\n    else {\n\n        n--;\n        size = Math.floor(len / n);\n        if (len % size === 0)\n            size--;\n        while (i < size * n) {\n            out.push(a.slice(i, i += size));\n        }\n        out.push(a.slice(size * n));\n\n    }\n\n    return out;\n}\nfunction autoExpandDelayed() {\n    setTimeout(autoExpand,500)\n}\nfunction autoExpand() {\n    let field = $('#bidMessage')[0]\n    if(!field)return;\n    // Reset field height\n    field.style.height = 'inherit';\n\n    // Get the computed styles for the element\n    var computed = window.getComputedStyle(field);\n\n    // Calculate the height\n    var height = parseInt(computed.getPropertyValue('border-top-width'), 10)\n        + parseInt(computed.getPropertyValue('padding-top'), 10)\n        + field.scrollHeight\n        + parseInt(computed.getPropertyValue('padding-bottom'), 10)\n        + parseInt(computed.getPropertyValue('border-bottom-width'), 10);\n\n    field.style.height = (height-20) + 'px';//adding -40 due to the result of test case that its causing too much space extra in a normal way, may be due to font size, line height etc.\n\n};\nisApplySuccessfulOpen = false;\nfunction showApplySuccessfulDialog(){\n    // console.log(\"Apply showApplySuccessfulDialog\")\n\n    $.fancybox({\n        'padding': 0,\n        'href': '#apply-successful-popup',\n        afterShow:function(){isApplySuccessfulOpen=true;},\n        afterClose:function(){isApplySuccessfulOpen=false;}\n    })\n}\n\nclass LettingDetail extends Component {\n\n    constructor(props) {\n        super(props)\n        var current = FlowRouter.current();\n        this.currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params)\n        var searchCrumbs = {c1:[],c2:[],c3:[]}\n        var fCrumbs = {c1:[],c2:[],c3:[]}\n        var areaCrumbs = {c1:[],c2:[],c3:[]}\n        var countyCrumbs = {c1:[],c2:[],c3:[]}\n        if(props.data){\n            if(props.data.searchCrumbs){\n                var chunks = chunkify(props.data.searchCrumbs,3,true)\n                searchCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n            }\n            if(props.data.fCrumbs){\n                var chunks = chunkify(props.data.fCrumbs,3,true)\n                fCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n            }\n            if(props.data.areaCrumbs){\n                var chunks = chunkify(props.data.areaCrumbs,3,true)\n                areaCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n            }\n            if(props.data.countyCrumbs){\n                var chunks = chunkify(props.data.countyCrumbs,3,true)\n                countyCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n            }\n        }\n        this.state = {\n            isApplicationInProgress:false,\n            'searchCrumbs':searchCrumbs,fCrumbs:fCrumbs,areaCrumbs:areaCrumbs,countyCrumbs:countyCrumbs,\n            personalMessage:\"\"\n        }\n        this.searchCrumbsLoaded = false;\n\n        this.applyNowBtnHandler = this.applyNowBtnHandler.bind(this)\n        this.redirectToProfilePageHandler = this.redirectToProfilePageHandler.bind(this)\n        this.confirmApplyBtnHandler = this.confirmApplyBtnHandler.bind(this)\n        this.cap_closePopupBtnHandler = this.cap_closePopupBtnHandler.bind(this)\n        this.cap_viewSimilarLettingsBtnHandler = this.cap_viewSimilarLettingsBtnHandler.bind(this)\n        this.backBtnHandler = this.backBtnHandler.bind(this)\n        this.noPropBackBtnHandler = this.noPropBackBtnHandler.bind(this)\n        this.pd_cap_btnHandler = this.pd_cap_btnHandler.bind(this)\n        this.pd_cap_aHandler = this.pd_cap_aHandler.bind(this)\n        this.headerApplyNowBtnHandler = this.headerApplyNowBtnHandler.bind(this)\n        this.mainUploadRefBtnHandler = this.mainUploadRefBtnHandler.bind(this)\n        this.mainUpdateRefBtnHandler = this.mainUpdateRefBtnHandler.bind(this)\n        this.mainApplyNowBtnHandler = this.mainApplyNowBtnHandler.bind(this)\n        this.createAlertBtnHandler = this.createAlertBtnHandler.bind(this)\n        updateViewsCalled=false;\n\n        this.propsListHTML = '';\n        this.isServerSSRReq = '';\n        this.handlePersonalMessageChange = this.handlePersonalMessageChange.bind(this);\n    }\n    backBtnHandler(){\n        var prevRoute = Session.get('prevRoute');\n        if(prevRoute){\n            FlowRouter.go(prevRoute.name,prevRoute.args)\n            Session.set('prevRoute',false);\n        }else{\n            FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n        }\n    }\n    noPropBackBtnHandler(){\n        var prevRoute = Session.get('prevRoute');\n        if(prevRoute){\n            FlowRouter.go(prevRoute.name,prevRoute.args)\n            Session.set('prevRoute',false);\n        }else{\n            FlowRouter.go(\"home\");\n        }\n    }\n    cap_closePopupBtnHandler(){\n        console.log('cap_closePopupBtn');\n        ga('send', 'event', 'PDPage', 'CAPClosePopupBtn', 'CAP: Cancle Apply Btn Clicked');\n        closePopupEvent();\n    }\n    cap_viewSimilarLettingsBtnHandler(){\n        console.log('cap_viewSimilarLettingsBtnHandler');\n        ga('send', 'event', 'PDPage', 'CAPViewSimilarLettingsBtn', 'CAP: View Simiar Lettings Btn Clicked');//CAP: Confirm Apply Popup\n        closePopupEvent();\n        var element = document.getElementById(\"relatedsection\");\n        element.scrollIntoView();\n    }\n    redirectToProfilePageHandler(){\n        redirectToProfilePageEvent();\n    }\n    handlePersonalMessageChange(event) {\n        this.setState({personalMessage: event.target.value});\n        autoExpandDelayed();\n    }\n    confirmApplyBtnHandler(){\n        console.log('confirmApplyBtn');\n        ga('send', 'event', 'PDPage', 'confirmApplyBtn', 'CAP: Confirm Apply Btn Clicked');\n\n        var auctionId = this.props.data._id;\n        var price = $('#bidPrice').val();\n        price = parseInt(price);\n        if(isNaN(price)){alert(\"Please enter a valid offer price.\");return;}\n        // var bidMessage = $('#bidMessage').val();\n        var bidMessage = this.state.personalMessage;\n        bidMessage = bidMessage.substring(0,500);\n        var min = this.props.data.price*0.7, max = this.props.data.price*1.5;\n        if(!auctionId){console.log(\"invalid data\");return;}\n        if(price <  min || price > max ){\n            alert(\"Offer price should be between \"+min+\" and \"+max+\". Please adjust your offer price again.\");return;\n        }\n        // debugger;\n        this.setState({isApplicationInProgress:true})\n\n        this.placeBidCallback = function(error, result){\n            this.setState({isApplicationInProgress:false})\n            if(error){\n                console.log(error);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Failed applying. Please try again, try checking your internet connectivity. Contact us if needed.\");\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n            if(result.status=='Success'){\n                console.log(\"Success\");\n                closePopupEvent()//Dont close it, instead show the successful part of that dialog\n                setTimeout(showApplySuccessfulDialog,500)\n                setTimeout(function(){\n                    if(!isApplySuccessfulOpen)\n                        showApplySuccessfulDialog();\n                },1500)\n                setTimeout(function(){\n                    if(!isApplySuccessfulOpen)\n                        showApplySuccessfulDialog();\n                },3000)\n            }\n        }\n        this.placeBidCallback = this.placeBidCallback.bind(this);\n        Meteor.call('placeBid',[auctionId, price, bidMessage],this.placeBidCallback);\n\n        var user = Accounts.user();\n        if(user)\n        if(user.profile)\n        if(!user.profile.mobile){\n            let mobile = false, isValid = false;\n            mobile = prompt(\"You don't have a mobile number attached to your profile. Please enter mobile to proceed. \");\n            let tmp = mobile.split('+');\n            if(tmp.length>1)\n                mobile = tmp[1];\n            if( validateMobileNumber(mobile) )isValid=true;\n\n            while(! isValid) {//This is an un limited loop of mobile number.\n                mobile = prompt(\"Error! invalid format. Please enter mobile number in format +353 893456789.\");\n                if( validateMobileNumber(mobile) )isValid=true;\n            }\n            // if(/^\\d{10}$/.test(mobile)) {\n            if( isValid ) {\n                Meteor.call('updateMobile', mobile, function (error, result) {\n                    if (error) {\n                        console.log(error.error);\n                        var tmp = Session.get(\"showErrorDlg\");\n                        var msg = 'Mobile number update failed. Please try again. Contact us if needed.';\n                        tmp.push(msg);\n                        Session.set(\"showErrorDlg\", tmp)\n\n                        return;\n                    }\n                });\n            }\n        }\n\n\n    }\n    applyNowBtnHandler(event){\n        // Prevent default browser form submit\n        if(event)event.preventDefault();\n        console.log(\"Apply now btn clicked\")\n\n        if(!this.props.user){\n            Session.set('loginFromApplyNowBtn',true)\n            showLoginDialog();\n            return;\n        }\n        // if(user._id == this._createdByAgent ){\n        //     console.log(\"Owner cannot apply for the house.\");\n        //     return;\n        // }\n        //Do mobile verification\n        if(this.props.user.profile)\n        if(this.props.user.profile.personalMessage && !this.state.personalMessage){//Do this only if the current sessions personal message is empty\n            this.setState({personalMessage: this.props.user.profile.personalMessage})\n        }\n\n        if(this.props.myBid){\n            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n            tmp.push(\"Error: You have an existing application, please refresh the page.\");\n            Session.set(\"showErrorDlg\",tmp)\n            console.log(\"Already has a bid\");\n            return;\n        }\n        this.afterCFun = function(){\n            attachEvents();\n\n            setTimeout(function () {\n                $('#bidPrice').focus().select()\n                autoExpandDelayed()\n            },500)\n        }\n        this.afterCFun = this.afterCFun.bind(this);\n\n        $.fancybox({\n            'padding': 0,\n            'href': '#confirm-apply-pop',\n            afterShow:this.afterCFun,\n            afterClose:function(){}\n        })\n    }\n    headerApplyNowBtnHandler(){\n        console.log('headerApplyNowBtn');\n        ga('send', 'event', 'PDPage', 'HeaderApplyNowBtnClicked', 'Header: Apply now Btn Clicked');\n        this.applyNowBtnHandler();\n    }\n    mainApplyNowBtnHandler(event){\n        console.log('mainApplyNowBtn');\n        ga('send', 'event', 'PDPage', 'ApplyNowBtnClicked', 'Main: Apply now Btn Clicked');\n        this.applyNowBtnHandler(event);\n    }\n    pd_cap_btnHandler(event){\n        if(event)event.preventDefault();\n        console.log('pd_cap_btn');\n        ga('send', 'event', 'PDPage', 'CAPUploadRefBtnClicked', 'CAP: Upload Reference Btn Clicked');\n        redirectToProfilePageEvent();\n    }\n    pd_cap_aHandler(event){\n        if(event)event.preventDefault();\n        console.log('pd_cap_a');\n        ga('send', 'event', 'PDPage', 'CAPUploadRefAClicked', 'CAP: Upload Reference Anchor Link Clicked');\n        redirectToProfilePageEvent();\n    }\n    mainUploadRefBtnHandler(){\n        console.log('mainUploadRefBtn');\n        ga('send', 'event', 'PDPage', 'UploadRefBtnClicked', 'Main: Upload Reference Btn Clicked');\n        redirectToProfilePageEvent();\n    }\n    mainUpdateRefBtnHandler(){\n        console.log('mainUpdateRefBtn');\n        ga('send', 'event', 'PDPage', 'UpdateRefBtnClicked', 'Main: Update Reference Btn Clicked');\n        redirectToProfilePageEvent();\n    }\n    createAlertBtnHandler(){\n        console.log('createAlertBtnHandler');\n        ga('send', 'event', 'PDPage', 'createAlertBtnClicked', 'Main: Create Alert Btn Clicked');\n        Session.set('showCreateAlertPopup',true)\n    }\n    componentDidMount(){\n        $(document).ready(function(){\n            $('.scroll-menu-div').hide();\n            $(window).on(\"scroll\", function() {\n                var scrollPercent = 100 * $(window).scrollTop() / ($(document).height() - $(window).height());\n                if(scrollPercent > 10){\n                    $('.scroll-menu-div').fadeIn();\n                    $(\".scroll-menu-div\").addClass('fixed-header');\n                }\n                else{\n                    $('.scroll-menu-div').hide();\n                    $(\".scroll-menu-div\").removeClass(\"fixed-header\");\n\n                }\n            });\n            setTimeout(function(){\n                try {\n                    jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n                } catch (e) {\n                    document.body.scrollTop = document.documentElement.scrollTop = 0;\n                }\n                $('.scroll-menu-div').hide();\n                $(\".scroll-menu-div\").removeClass(\"fixed-header\");\n\n            },500)\n        });\n        setTimeout(fixImageSize,1000)\n        setTimeout(fixImageSize,3000)\n        setTimeout(fixImageSize,5000)\n        // setTimeout(function(){addthis.init();addthis.layers.refresh();},5000)\n        $(window).resize(fixImageSize);\n        $(window).resize(autoExpandDelayed);\n    }\n    componentDidUpdate() {\n        setTimeout(fixImageSize,1000)\n        setTimeout(fixImageSize,3000)\n        setTimeout(fixImageSize,5000)\n        if(this.props.data && !updateViewsCalled){\n            updateViewsCalled=true;\n            Meteor.call('updateViews',this.props.data._id);\n        }\n        if(propertyKeyOfThisPage && this.props.data.lettingAuctionCode){\n            if(this.props.data.lettingAuctionCode!=propertyKeyOfThisPage){//lettingAuctionCode changed, means page is changed\n                //Constructor elements needs to be called again\n                updateViewsCalled=true;\n                Meteor.call('updateViews',this.props.data._id);\n                this.setState({isApplicationInProgress:false,personalMessage:\"\"})\n                this.searchCrumbsLoaded = false;\n                Session.set('subscriptionsReady2',false);\n                propertyKeyOfThisPage = this.props.data.lettingAuctionCode;\n                setTimeout(function(){\n                    try {\n                        jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n                    } catch (e) {\n                        document.body.scrollTop = document.documentElement.scrollTop = 0;\n                    }\n                },500)\n            }\n        }\n    }\n    componentWillReceiveProps(props){\n        var searchCrumbs = {c1:[],c2:[],c3:[]}\n        var fCrumbs = {c1:[],c2:[],c3:[]}\n        var areaCrumbs = {c1:[],c2:[],c3:[]}\n        var countyCrumbs = {c1:[],c2:[],c3:[]}\n        if(props.data.searchCrumbs != this.state.searchCrumbs){\n            var chunks = chunkify(props.data.searchCrumbs,3,true)\n            searchCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n            // console.log('in the setState for searchCrumbs')\n            this.setState({'searchCrumbs':searchCrumbs})\n        }\n        if(props.data.fCrumbs != this.state.fCrumbs){\n            var chunks = chunkify(props.data.fCrumbs,3,true)\n            fCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n            // console.log('in the setState for fCrumbs')\n            this.setState({fCrumbs:fCrumbs})\n        }\n        if(props.data.areaCrumbs != this.state.areaCrumbs){\n            var chunks = chunkify(props.data.areaCrumbs,3,true)\n            areaCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n            // console.log('in the setState for areaCrumbs')\n            this.setState({areaCrumbs:areaCrumbs})\n        }\n        if(props.data.countyCrumbs != this.state.countyCrumbs){\n            var chunks = chunkify(props.data.countyCrumbs,3,true)\n            countyCrumbs = {c1:chunks[0],c2:chunks[1],c3:chunks[2]}\n            // console.log('in the setState for countyCrumbs')\n            this.setState({countyCrumbs:countyCrumbs})\n        }\n\n    }\n    // currentURL:function () {\n    //     return Router.current().originalUrl;\n    // },\n    isCurUserBid() {\n        //todo: test this\n        debugger;\n\n        if(!this.props.user)return false;\n        if(this.userId == user._id)return true;\n        return false;\n    }\n\n    renderMain(){\n        return (\n            <div>\n                <section className=\"scroll-menu-div\" style={{zIndex:'1000'}}>\n                    <div className=\"container\">\n                        <div className=\"scroll-menu\">\n                            <div className=\"left-menu\">\n                                <ul>\n                                    <li><a href={this.currentURL+\"#imagessection\"} className=\"active scroll1\">PHOTOS</a></li>\n                                    <li><a href={this.currentURL+\"#detailssection\"} className=\"scroll1\">DETAILS</a></li>\n                                    <li><a href={this.currentURL+\"#amenitiessection\"} className=\"scroll1\">AMENITIES</a></li>\n                                </ul>\n                            </div>\n                            <div className=\"right-menu\">\n                                <ul>\n                                    <li className=\"left-line\">\n                                        <p>Applications received</p>\n                                        <p className=\"pad-btm-0 text-center\">{this.props.data.applicationsReceivedCount}</p>\n                                    </li>\n                                    <li className=\"left-line\">\n                                        <p>Owner's Current Rent</p>\n                                        <p className=\"pad-btm-0 text-center\">€ {this.props.data.price +\" (\"+this.props.data.rentType+\")\"}</p>\n                                    </li>\n                                    <li>\n                                        {\n                                        this.props.alreadyLeased ?\n                                        (\n                                            <a href={this.currentURL+'#relatedsection'} className=\"green-btn  btns\" type=\"button\">View similar lettings</a>\n                                        ) :\n                                            this.props.myBid ? (\n                                            <button className=\"green-btn  btns viewMyApplication\" type=\"button\">Already applied</button>\n                                        ): (\n                                            <buttons onClick={this.headerApplyNowBtnHandler} className=\"blue-btn btns headerApplyNowBtn applyNowBtn\">Apply for this {this.props.PD.type}</buttons>\n                                        )}\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                <section className=\"banner\">\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div id=\"imagessection\" className=\"col-md-7 padding0\">\n                                <figure>\n                                    <div className=\"banner-holder\">\n                                        <ImagesSlider images={this.props.sliderImages}/>\n                                    </div>\n                                    { this.props.isAgent ? (\n                                        <figcaption>\n                                            <h2>{this.props.isAgent.name}</h2>\n                                            <h5 style={{padding: 0}}>{this.props.isAgent.address1}</h5>\n                                        </figcaption>\n                                    ) : \"\"\n                                    }\n                                </figure>\n                            </div>\n                            <div className=\"col-md-5 purva-bg\">\n                                <div className=\"purva\">\n                                    { this.props.isAgent ? (\n                                        <img src={this.props.isAgent.logourl} alt={this.props.isAgent.name} style={this.props.isAgent.style}/>\n                                    ) : \"\"\n                                    }\n                                    <h1>{titleCase(this.props.PD.address.address)}{this.props.PD.address.area ?  (<span>, {titleCase(this.props.PD.address.area)}</span>) : ''}{this.props.PD.address.county ?  (<span>, {titleCase(this.props.PD.address.county)}</span>) : ''}</h1>\n                                    <p style={{marginBottom: '10px'}}>{titleCase(this.props.PD.type)} to rent in {titleCase(this.props.PD.address.area)}{this.props.PD.address.county ?  (<span>, {titleCase(this.props.PD.address.county)}</span>) : ''}. Its {this.props.PD.furnished ? \"a furnished\" : \"an Unfurnished\" } {titleCase(this.props.PD.type)} with {this.props.PD.bedroomsCount} beds, {this.props.PD.baths} baths, {this.props.PD.ensuiteCount ? this.props.PD.ensuiteCount : \"no\" } Ensuite and {this.props.PD.doubleBedCount ? this.props.PD.doubleBedCount : \"has no\" } Double bed property/accommodation, your next my home. { this.props.isAgent ? (<span>Its posted by {this.props.isAgent.name}.</span>) : \"\" } Click apply below to send your interest to the landlord and he would contact you soon. </p>\n                                    <ul>\n                                        <li>\n                                            <p><span style={{color: '#b3b3b3'}}>Views</span> :  {this.props.data.views}</p>\n                                        </li>\n                                        <li>\n                                            <a href={FlowRouter.url('howitworks')}><p style={{color: '#39b54a', fontFamily: '\"montserratregular\"', padding: 0}}>How it works?</p></a>\n                                        </li>\n                                        <li>\n                                            <a href={FlowRouter.url('contactus')}><p style={{color: '#39b54a', fontFamily: '\"montserratregular\"', padding: 0}}>Need help?</p></a>\n                                        </li>\n                                    </ul>\n                                    <p>&nbsp;</p>\n                                    <div className=\"purva-developer\">\n                                        <h5><span style={{color: '#b3b3b3'}}>Owner's Current Rent :</span>€ {this.props.data.price +\" (\"+this.props.data.rentType+\")\"}</h5>\n                                    </div>\n                                    {this.props.alreadyLeased ? (\n                                        <p style={{fontFamily: '\"montserratregular\"'}}>This property is already leased. Please use one of the options below.</p>\n                                    ) :\"\"}\n                                    <div className=\"purva-btns\">\n                                        <ul>\n                                            <li>\n                                                { this.props.alreadyLeased ?\n                                                    (\n                                                    <span>\n<a href={this.currentURL+'#relatedsection'} className=\"green-btn  btns\" type=\"button\">View similar lettings</a>\n<a href={this.currentURL+'#searchsection'} className=\"transparent-btn btns mar-left-10\" type=\"button\">Search More</a>\n                                                            \n                                                    </span>\n                                                    )\n                                                :\n                                                    this.props.myBid ? (\n                                                    <span>\n<button className=\"green-btn  btns viewMyApplication\" type=\"button\">Already applied</button>\n{this.hasAllReqReferences ? (\n    <button className=\"transparent-btn btns mainUpdateRefBtn mar-left-10\" onClick={this.mainUpdateRefBtnHandler} type=\"button\" title=\"View your references\">Update references</button>\n):(\n    <button className=\"transparent-btn btns mainUploadRefBtn mar-left-10\" onClick={this.mainUploadRefBtnHandler} type=\"button\" title=\"You dont have all your references updated in your profile. Missing files are  {addCommaToEach(this.props.refListArr)}\">Upload references</button>\n)}\n                                                    </span>\n                                                    ) :(\n                                                    <span>\n<buttons onClick={this.mainApplyNowBtnHandler} className=\"blue-btn btns mainApplyNowBtn applyNowBtn\">Apply for this {this.props.PD.type}</buttons>\n                                                        <span className=\"hidden-xs\">&nbsp;</span>\n                                                        <span className=\"visible-xs\" style={{height: 1}}><br/></span>\n{this.hasAllReqReferences ? (\n    <button className=\"transparent-btn btns mainUpdateRefBtn\" onClick={this.mainUpdateRefBtnHandler} type=\"button\" title=\"View your references\">Update references</button>\n):(\n    <button className=\"transparent-btn btns mainUploadRefBtn\" onClick={this.mainUploadRefBtnHandler} type=\"button\" title={\"You dont have all your references updated in your profile. Missing files are  \"+addCommaToEach(this.props.refListArr)}>Upload references</button>\n)}\n                                                    </span>\n                                                    )\n                                                }\n                                                <span className=\"hidden-xs\">&nbsp;</span>\n                                                <span className=\"visible-xs\" style={{height: 1}}><br/></span>\n                                                <button className=\"green-btn btns\" onClick={this.createAlertBtnHandler} type=\"button\" title={\"Be the first to hear about the latest lettings in your area. Signup for our email alerts.\"}>\n                                                    <span className=\"glyphicon glyphicon-bell\"></span> Create Alert</button>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                <section className=\"main-sec\">\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div id=\"detailssection\" className=\"border mar-btm-20 background-white\">\n                                <div className=\"head-border-bottom head-border-bottomTitleArea\">\n                                    <h2>Details</h2>\n                                </div>\n                                <div className=\"developer proj-dtls \">\n                                    <div className=\"clearfix\">\n                                        <div className=\"col-md-9\">\n                                            <div>\n                                                <ul className=\"list-inline\">\n                                                    <li className>\n                                                        <h3>Rent type</h3>\n                                                        <h4 className=\"pad-btm-0\">{titleCase(this.props.data.rentType)}</h4>\n                                                    </li>\n                                                    <li className=\"left-line\">\n                                                        <h3>Available from</h3>\n                                                        <h4 className=\"pad-btm-0\">{dateFormat(this.props.data.readyFrom)}</h4>\n                                                    </li>\n                                                    <li className=\"left-line\">\n                                                        <h3>Available until</h3>\n                                                        <h4 className=\"pad-btm-0\">{this.props.data.lease}</h4>\n                                                    </li>\n                                                </ul>\n                                                <div className=\"project-detail\">\n                                                    <ul className=\"bdr-btm\">\n                                                        <li>\n                                                            <span className=\"color-grey\">Location</span>\n                                                            <h5 className=\"heading-reg\"> {titleCase(this.props.PD.address.address)}, {titleCase(this.props.PD.address.area)}, {titleCase(this.props.PD.address.county)}</h5>\n                                                        </li>\n                                                        <li className=\"pad-left-35\">\n                                                            <span className=\"color-grey\">BER</span>\n                                                            <h5 className=\"heading-reg\"> {addCommaToEach(this.props.PD.BER)}</h5>\n                                                        </li>\n                                                    </ul>\n                                                </div>\n                                            </div>\n                                            <div className=\"mar-top-20 \">\n                                                <h5 className=\"heading-reg\">Description</h5>\n                                                <p className=\"color-grey pad-btm-10\" dangerouslySetInnerHTML={{__html:nlToBr( this.props.PD.about) }}></p>\n                                                {/*<a href=\"javascript:;\" class=\"text-underline\" >Read More</a>*/}\n                                            </div>\n                                        </div>\n                                        <div className=\"col-md-3\">\n                                            <h5 className=\"heading-reg\">Bedrooms : {this.props.PD.bedroomsCount}</h5>\n                                            <div className=\"handed-proj-bg clearfix\">\n                                                <div className=\"col-md-6\">\n                                                    <div>\n                                                        <h3>{this.props.PD.doubleBedCount}</h3>\n                                                        <h4 className=\"pad-btm-0\">Double</h4>\n                                                    </div>\n                                                </div>\n                                                <div className=\"col-md-6\" style={{padding: 0}}>\n                                                    <div className=\"left-line\">\n                                                        <h3>{this.props.PD.ensuiteCount}</h3>\n                                                        <h4 className=\"pad-btm-0\">Ensuite</h4>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <h5 className=\"heading-reg mar-top-30\">Contact</h5>\n                                            <div className=\"handed-proj-bg clearfix\">\n                                                {/*\n                        <div class=\"col-md-12 color-grey\"  style=\"font-size:13px\">Apply for this property to view contact details</div>\n                        */}\n    {this.props.alreadyLeased ? (\n        <p style={{fontFamily: '\"montserratregular\"'}} className={\"text-center\"}>This property is already leased.<br/>\n            <a href={this.currentURL+'#relatedsection'} title={\"Browse through more available lettings for rent in \"+titleCase(this.props.PD.address.area)+\", \"+titleCase(this.props.PD.address.county)}>View similar lettings</a><br/>\n            <a href={this.currentURL+'#searchsection'} title={\"Search more available properties for rent in \"+titleCase(this.props.PD.address.area)+\", \"+titleCase(this.props.PD.address.county)}>Search More</a>\n        </p>\n    ) :\n        this.props.data.primaryContact.phone ?\n            this.props.PD.contacts.map(function(contact,i){\n                return (\n                <div key={i} className=\"col-md-12\">\n                    <div>\n                        <h3>{titleCase(contact.name)} : <a href={\"tel:\"+contact.phone}>{contact.phone}</a></h3>\n                    </div>\n                </div>\n                )\n            })\n        : (\n            <div className=\"col-md-12\">Apply for this property to email owner</div>\n        )\n    }\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div id=\"amenitiessection\" className=\"mar-btm-30 amenities\">\n                                <div className=\"head-border-bottom head-border-bottomTitleArea\">\n                                    <h2>Amenities</h2>\n                                </div>\n                                <div className=\"amenitiy-block\">\n                                    <ul>\n                                        { this.props.PD.amenitiesWithImgs.map(function(aminity,i){\n                                            return (\n                                                <li key={i}>\n                                                    <p><span><img src={aminity.src} /></span>{titleCase(aminity.name)}</p>\n                                                </li>\n                                            )\n                                            })\n                                        }\n                                    </ul>\n                                </div>\n                            </div>\n                            {this.props.data.relatedProps ?(\n                                <div id=\"relatedsection\" className=\"mar-btm-30 amenities subscribeTillPopop\">\n                                    <div className=\"head-border-bottom head-border-bottomTitleArea\">\n                                        <h2>Similar {titleCase(this.props.PD.type)} to rent\n                                            in {titleCase(this.props.PD.address.area)}{this.props.PD.address.county ?  (<span>, {titleCase(this.props.PD.address.county)}</span>) : ''}</h2></div>\n                                                <div className=\"amenitiy-block\" style={{float:'left',display:'block'}}>\n                                                <p style={{margin: '0 20px'}}>Below are few more {titleCase(this.props.PD.type)} to rent in {this.props.PD.address.area ?  (<span>{titleCase(this.props.PD.address.area)}</span>) : ''}{this.props.PD.address.county ?  (<span>, {titleCase(this.props.PD.address.county)}</span>) : ''}. They are also located near {titleCase(this.props.PD.address.address)}{this.props.PD.address.area ?  (<span>, {titleCase(this.props.PD.address.area)}</span>) : ''}{this.props.PD.address.county ?  (<span>, {titleCase(this.props.PD.address.county)}</span>) : ''}</p>\n                                                <ul className={\"thumbnails thumbRelated\"}>\n                {this.props.data.relatedProps.map(function (property,i) {\n                    return (\n                    <li className=\"span4\" key={i} style={{float:'left'}}>\n                        <a href={ FlowRouter.url('rent',{slug:property.slug,key:property.auction.lettingAuctionCode}) }>\n                            <div className=\"thumbnail\">\n                                {property.firstImg ? property.firstImg.url ? property.firstImg.url.indexOf('amazonaws') ? (\n                                <img src={\"https://process.filestackapi.com/AIPACLEs7ShGwwPh6fMTxz/resize=width:250/\"+property.firstImg.url}\n                                     alt={titleCase(property.address.address)+property.address.area ?  \", \"+titleCase(property.address.area) : '' + property.address.county ?  \", \"+titleCase(property.address.county) : ''}/>\n                                    ): (\n                                <img src={\"https://process.filestackapi.com/resize=width:250/\"+property.firstImg.url}\n                                     alt={titleCase(property.address.address)+property.address.area ?  \", \"+titleCase(property.address.area) : '' + property.address.county ?  \", \"+titleCase(property.address.county) : ''}/>\n                                    ) : (\n                                    <img src={cdnPath(\"/images/no-photo.png\")} style={{width: 250, height: 188}}/>\n                                ):\"\"}\n                                <h3>{titleCase(property.address.address)}{property.address.area ?  (<as>, {titleCase(property.address.area)}</as>) : ''}{property.address.county ?  (<as>, {titleCase(property.address.county)}</as>) : ''} for rent</h3>\n                        </div></a>\n                    </li>\n                    )\n                })}\n                                                    </ul>\n                                                </div>\n                                                <div className=\"amenitiy-block\" style={{paddingTop:0}}>\n                                                    <div id=\"searchsection\" className={'bottomcrumbs row'}>\n                                                        <h2>Search more properties to rent</h2>\n                                                        <p>Chooes a link below to browse through more relavent properties to rent.</p>\n                                                        <br/>\n                                                        <div className=\"col-md-12 col-sm-12 col-xs-12 pad0\">\n                                                            <div className=\"col-md-5 col-sm-5 col-xs-12\">\n                                                                {this.state.searchCrumbs.c1 ?\n                                                                    this.state.searchCrumbs.c1.map(function(crumb,i){\n                                                                        return (\n                                                                            <a key={i} style={{display:\"block\"}} href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                : \"\"}\n                                                            </div>\n                                                            <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                                {this.state.searchCrumbs.c2 ?\n                                                                    this.state.searchCrumbs.c2.map(function(crumb,i){\n                                                                        return (\n                                                                            <a key={i} style={{display:\"block\"}} href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                            <div className=\"col-md-3 col-sm-3 col-xs-12\">\n                                                                {this.state.searchCrumbs.c3 ?\n                                                                    this.state.searchCrumbs.c3.map(function(crumb,i){\n                                                                        return (\n                                                                            <a key={i} style={{display:\"block\"}} href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                        </div>\n\n                                                    </div>\n                                                    {/*{ true ? (*/}\n                                                    <div className={'bottomcrumbs row'}>\n                                                        <h2>Property types to rent</h2>\n                                                        <div className=\"col-md-12 col-sm-12 col-xs-12 pad0\">\n                                                            <div className=\"col-md-3 col-sm-3 col-xs-12\">\n                                                                {this.state.fCrumbs.c1 ?\n                                                                    this.state.fCrumbs.c1.map(function (crumb, i) {\n                                                                        return (\n                                                                            <a key={i} style={{display: \"block\"}}\n                                                                               href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                            <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                                {this.state.fCrumbs.c2 ?\n                                                                    this.state.fCrumbs.c2.map(function (crumb, i) {\n                                                                        return (\n                                                                            <a key={i} style={{display: \"block\"}}\n                                                                               href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                            <div className=\"col-md-5 col-sm-5 col-xs-12\">\n                                                                {this.state.fCrumbs.c3 ?\n                                                                    this.state.fCrumbs.c3.map(function (crumb, i) {\n                                                                        return (\n                                                                            <a key={i} style={{display: \"block\"}}\n                                                                               href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                    <div className={'bottomcrumbs row'}>\n                                                        <h2>{this.props.PD.address.county} neighbourhoods</h2>\n                                                        <div className=\"col-md-12 col-sm-12 col-xs-12 pad0\">\n                                                            <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                                {this.state.areaCrumbs.c1 ?\n                                                                    this.state.areaCrumbs.c1.map(function (crumb, i) {\n                                                                        return (\n                                                                            <a key={i} style={{display: \"block\"}}\n                                                                               href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                            <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                                {this.state.areaCrumbs.c2 ?\n                                                                    this.state.areaCrumbs.c2.map(function (crumb, i) {\n                                                                        return (\n                                                                            <a key={i} style={{display: \"block\"}}\n                                                                               href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                            <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                                {this.state.areaCrumbs.c3 ?\n                                                                    this.state.areaCrumbs.c3.map(function (crumb, i) {\n                                                                        return (\n                                                                            <a key={i} style={{display: \"block\"}}\n                                                                               href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                    <div className={'bottomcrumbs row'}>\n                                                        <h2>Other counties to rent</h2>\n                                                        <div className=\"col-md-12 col-sm-12 col-xs-12 pad0\">\n                                                            <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                                {this.state.countyCrumbs.c1 ?\n                                                                    this.state.countyCrumbs.c1.map(function (crumb, i) {\n                                                                        return (\n                                                                            <a key={i} style={{display: \"block\"}}\n                                                                               href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                            <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                                {this.state.countyCrumbs.c2 ?\n                                                                    this.state.countyCrumbs.c2.map(function (crumb, i) {\n                                                                        return (\n                                                                            <a key={i} style={{display: \"block\"}}\n                                                                               href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                            <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                                                                {this.state.countyCrumbs.c3 ?\n                                                                    this.state.countyCrumbs.c3.map(function (crumb, i) {\n                                                                        return (\n                                                                            <a key={i} style={{display: \"block\"}}\n                                                                               href={crumb.url}>{crumb.name}</a>\n                                                                        )\n                                                                    })\n                                                                    : \"\"}\n                                                            </div>\n                                                        </div>\n\n                                                    </div>\n                                                     {/*) : \"\"}*/}\n                                                </div>\n\n                                 </div>\n                            ): \"\"}\n\n                        </div>\n                    </div>\n                </section>\n                <div id=\"apply-successful-popup\" style={{display: 'none'}} className={\"verification-div1 isApplicationSuccessful\"}>\n                    <div className=\"refund-div\">\n                        <h2 className=\"green-text\">Application Successful</h2>\n                    </div>\n                    <div className=\"profile-text\">\n                        <h3>Good Job!</h3>\n                        <p style={{padding: 0}}>Landlord is notified of your application and would contact you via email if successful.</p>\n\n                        { false ? \"\" :\n                            this.hasAllReqReferences ? \"\" : (\n\n                                <div className=\"\">\n                                    <hr/>\n                                    <h3>Improve your chances of securing this letting</h3>\n                                    <p className=\"color-text\" style={{textAlign:\"center\",margin:\"10px 0\"}}>Upload your references in your profile to have an higher chance over other applicants. Missing files are&nbsp;\n                                        {addCommaToEach(this.props.refListArr)}\n                                        &nbsp;<a href={FlowRouter.url(\"account/profile\")} onClick={this.pd_cap_aHandler} className=\"pd_cap_a \">Upload them now?</a>\n                                    </p>\n                                    <p><a href={FlowRouter.url(\"account/profile\")} style={{margin:'0 auto',width:\"200px\"}} className=\"blue-btn btns\" onClick={this.pd_cap_btnHandler}  type=\"button\">Upload references </a></p>\n                                </div>\n\n                            )\n                        }\n                        <hr/>\n                        <p style={{padding: 0}}><a href={this.currentURL+\"#relatedsection\"} onClick={this.cap_viewSimilarLettingsBtnHandler} className=\"transparent-btn btns\" style={{margin:'0 auto',width:\"200px\"}}>View Similar lettings</a></p>\n                    </div>\n                </div>\n                <div id=\"confirm-apply-pop\" style={{display: 'none'}} className={\"verification-div1 \"}>\n                    <div className=\"refund-div\">\n                        <h2>Confirm Apply</h2>\n                    </div>\n                    <div className=\"profile-text\">\n                        <h3>Landlords asking rent is {this.props.data.price +\" (\"+this.props.data.rentType+\")\"}</h3>\n                        <form className=\"signin-form\">\n                            <div className=\"form-border\" style={{padding: '20px 0'}}>\n                                <div className=\"styled-input underline\" style={{borderBottom: '1px solid #2169a8'}}>\n                                    <input className=\"bidPrice\" type=\"number\" placeholder={this.props.data.price} defaultValue={this.props.data.price} name=\"number\" id=\"bidPrice\" required min={this.props.priceRange.min} max={this.props.priceRange.max} />\n                                </div>\n                                <div className=\"styled-input underline\">\n                                    <textarea className=\"form-control bidMessage\" id=\"bidMessage\" rows={1} placeholder=\"You may enter a personal message to landlord if you wish.\" maxLength={500} value={this.state.personalMessage} onChange={this.handlePersonalMessageChange} style={{textAlign:\"center\"}}/>\n                                </div>\n                                {/*<div class=\"input-group date\">*/}\n                                {/*<span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-calendar\"></i></span>*/}\n                                {/*<input class=\"set-due-date form-control moveindate\" type=\"text\" id=\"moveindate\"/>*/}\n                                {/*</div>*/}\n                            </div>\n                        </form>\n                        <p className=\"color-text\" style={{marginTop: '20px', textAlign:\"center\"}}>We will submit all the references available in your profile. </p>\n                        { false ? \"\" :\n                        this.hasAllReqReferences ? \"\" : (\n\n                        <div className=\"radio-bg register\">\n                            <h3 style={{lineHeight: '22px', marginBottom: '10px'}}>Oops! You dont have all your references updated in your profile. </h3>\n                            <p className=\"color-text\" style={{textAlign:\"center\"}}>Missing files are&nbsp;\n                                {addCommaToEach(this.props.refListArr)}\n                                &nbsp;<a href={FlowRouter.url(\"account/profile\")} onClick={this.pd_cap_aHandler} className=\"pd_cap_a \">Upload them now?</a>\n                            </p>\n                            <p><a href={FlowRouter.url(\"account/profile\")} style={{margin:'0 auto',width:\"200px\"}} className=\"transparent-btn btns pd_cap_btn\" onClick={this.pd_cap_btnHandler}  type=\"button\">Upload references </a></p>\n                            <p>Your chances of getting the house will be more if you apply with all the references. To proceed anyways click Submit below.</p>\n                        </div>\n\n                        )\n                        }\n                        <ul>\n                            {this.state.isApplicationInProgress ? (\n                                <li><button className=\"transparent-btn  btns\" type=\"button\">Applying... </button></li>\n                            ) : (\n                                <li><button onClick={this.confirmApplyBtnHandler} className=\"blue-btn  btns confirmApplyBtn\" type=\"button\">Submit </button></li>\n                            )}\n                            <li><button onClick={this.cap_closePopupBtnHandler} style={{marginLeft: '10px'}} className=\"transparent-btn btns cap_closePopupBtn\" disabled={this.state.isApplicationInProgress} type=\"button\">Cancel</button></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    renderFullMain(){\n\n        if(Meteor.isClient){\n            setTimeout(function(){\n                $('#lettingDetailCarousel').carousel();\n                $('#lettingDetailCarousel .carousel-control.right').unbind('click').bind('click',function(){$('#lettingDetailCarousel').carousel('next')})\n                $('#lettingDetailCarousel .carousel-control.left').unbind('click').bind('click',function(){$('#lettingDetailCarousel').carousel('prev')})\n            },1000)\n        }\n\n        return (\n            <div className=\"property-details-page\" id={'props_list'}>\n                {\n                    Meteor.isServer ? (\n                        <div id={\"isservercheckdiv\"}></div>\n                    ):\"\"\n                }\n                    <section className=\"banner\">\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <nav aria-label=\"breadcrumb\">\n                                    <ol className=\"breadcrumb\">\n                                        <li className=\"breadcrumb-item\"><a href={FlowRouter.url('home')}>Home</a></li>\n                                        {this.props.data ?\n                                            this.props.data.bcrumbs.map(function (crumb, i) {\n                                                return (\n                                                    <li key={i} className=\"breadcrumb-item\"><a\n                                                        href={crumb.url}>{crumb.name}</a></li>\n                                                )\n                                            })\n                                            :\"\"}\n                                        <li className=\"breadcrumb-item active\" aria-current=\"page\">This property</li>\n                                    </ol>\n                                </nav>\n                            </div>\n                        </div>\n                    </section>\n                {\n                    this.props.isSubsLoaded ?\n                        this.props.data ? this.renderMain() :\n                            (\n                                <section className=\"mar-top-20\">\n                                    <div className=\"container text-center mar-top-20 pad-btm-30\">\n                                        <div className=\"filter-holder\">\n                                            <div className=\"mar-top-30\">\n                                                {this.props.alreadyLeased ? (\n                                                    <span>\n                                                    <strong>Property already leased. Your landlord would contact you if you are chosen as a tenant.</strong><br /><br />\n                                                    <button onClick={this.backBtnHandler} className=\"blue-btn btns backBtn\" type=\"button\">Try again</button>\n                                                </span>\n                                                ) : (\n                                                    <span>\n                                                    <strong>This property is not found. Please check your key and try again.</strong><br /><br />\n                                                    <button onClick={this.noPropBackBtnHandler} className=\"blue-btn btns noPropBackBtn\" type=\"button\">Try again</button>\n                                                </span>\n                                                )}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </section>\n                            )\n                        :\n                        (\n                            <section className=\"mar-top-20 mar-btm-20 no-print\">\n                                <div className=\"container text-center mar-top-20 pad-btm-30\">\n                                    <div className=\"filter-holder\">\n                                        <div className=\"mar-top-30\">\n                                            <div className={'h2-div'}>Loading...</div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </section>\n                        )\n                }\n            </div>\n        )\n    }\n\n    render() {\n        const self = this;\n        if(Meteor.isClient && this.propsListHTML==\"\"){\n            this.propsListHTML = $('#props_list').html()\n        }\n        if(Meteor.isClient) {\n            this.isServerSSRReq = $('#isservercheckdiv').html()\n            if (this.isServerSSRReq == \"\") this.isServerSSRReq = true\n            else this.isServerSSRReq = false\n        }\n        // if(this.propsListHTML) console.log(\"propsListHTML: \"+this.propsListHTML.length)\n\n        return (\n            <div>\n                <MainLayoutHeader />\n                { (this.props.isSubsLoaded )  ? (\n                        this.renderFullMain()\n                    ) :\n                    this.isServerSSRReq && this.propsListHTML? (\n                        <div dangerouslySetInnerHTML={{__html: this.propsListHTML}}></div>\n                    ): (\n                        <section className=\"mar-top-20 mar-btm-20 no-print\">\n                            <div className=\"container text-center mar-top-20 pad-btm-30\">\n                                <div className=\"filter-holder\">\n                                    <div className=\"mar-top-30\">\n                                        <div className={'h2-div'}>Loading...</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </section>\n                    )}\n                <MainLayoutFooter />\n            </div>\n        )\n    }\n}\n\nexport default withTracker(() => {\n\n    var key = FlowRouter.getParam('key'); if(!key)return {data:false,alreadyLeased:false,isSubsLoaded:true};\n    if(key && !propertyKeyOfThisPage) propertyKeyOfThisPage = key;//This will init the var\n\n    const viewLettingSub = Meteor.subscribe(\"viewLetting\",key,function(){\n        if(ConfigSub.ready()  )Session.set('subscriptionsReady',true);//AreasSub.ready() &&  make areas sub not req\n    })\n    // const AreasSub = Meteor.subscribe('Areas',function(){\n    //     if(viewLettingSub.ready() && ConfigSub.ready()  )Session.set('subscriptionsReady',true);\n    // });\n    const ConfigSub = Meteor.subscribe('Config',function(){\n        if(viewLettingSub.ready() )Session.set('subscriptionsReady',true);\n    });\n\n    if(Meteor.isClient)Session.get('subscriptionsReady');\n    if( !viewLettingSub.ready() || !ConfigSub.ready() ) {\n        return {data: false, alreadyLeased: false,isSubsLoaded:false};\n    }\n\n    var globalConfig = Collections.Config.findOne();\n\n    var deletedList = []\n    if(globalConfig){\n        deletedList = globalConfig.deletedList\n    }\n\n    if(deletedList.includes(key)){\n        return {data:false,alreadyLeased:false,isSubsLoaded:true};\n    }\n\n    var user = Meteor.user();\n    var priceRange = {min:0, max:10000}\n    var myBid = false;\n    var otherBids = false;\n    var PD = {}\n    var sliderImages = []\n\n    advancedCrumbs = function(countyParam,areaParam,propertyType){\n        let fCrumbs = [], tmpCrumbs = [], areaCrumbs = [], countyCrumbs = [];\n        if(propertyType)propertyType = propertyType.toLowerCase();\n\n        // Home / Search Residential Rentals / Dublin City Apartments for Rent / Dublin 2 Apartments for Rent\n        //Property Size\n        //Property Size - Property Type\n        //Property Size - Property Type - County\n        //Property Type - county\n        //Counties\n        //Areas\n        //Property Size - Property Type - area - County\n        //Property Size - area - County\n        //Property Type - area - county\n\n        fCrumbs.push({url: generateSlugURL({propertyType: 'studio'}), name: 'Studios'})//Property Size\n        fCrumbs.push({url: generateSlugURL({bedCount: 1}), name: '1-Beds'})//Property Size\n        fCrumbs.push({url: generateSlugURL({bedCount: 2}), name: '2-Beds'})\n        fCrumbs.push({url: generateSlugURL({bedCount: 3}), name: '3-Beds'})\n\n        tmpCrumbs.push({url: generateSlugURL({cheapSort: true, propertyType: 'house'}), name: 'Cheap Houses'})\n        tmpCrumbs.push({url: generateSlugURL({bedCount: 1, propertyType: 'house'}), name: '1-Bed Houses'})//Property Size - Property Type\n        tmpCrumbs.push({url: generateSlugURL({bedCount: 2, propertyType: 'house'}), name: '2-Bed Houses'})\n        tmpCrumbs.push({url: generateSlugURL({bedCount: 3, propertyType: 'house'}), name: '3-Bed Houses'})\n        tmpCrumbs.push({url: generateSlugURL({luxurySort: true, propertyType: 'house'}), name: 'Luxury Houses'})\n\n        if (propertyType == 'house') {\n            fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        fCrumbs.push({\n            url: generateSlugURL({cheapSort: true, propertyType: 'apartment'}),\n            name: 'Cheap Apartments'\n        })\n        fCrumbs.push({url: generateSlugURL({bedCount: 1, propertyType: 'apartment'}), name: '1-Bed Apartments'})//Property Size - Property Type\n        fCrumbs.push({url: generateSlugURL({bedCount: 2, propertyType: 'apartment'}), name: '2-Bed Apartments'})\n        fCrumbs.push({url: generateSlugURL({bedCount: 3, propertyType: 'apartment'}), name: '3-Bed Apartments'})\n        fCrumbs.push({\n            url: generateSlugURL({luxurySort: true, propertyType: 'apartment'}),\n            name: 'Luxury Apartments'\n        })\n\n        if (propertyType != 'house') {\n            fCrumbs = fCrumbs.concat(tmpCrumbs);\n        }\n\n        //dublin-apartments\n        //Not doing dublin-houses due to less searches for Dublin apartments\n        var staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n\n        for (var i = 0; i < staticCounties.length; i++) {\n            if (!staticCounties[i]) continue;\n            countyCrumbs.push({\n                url: generateSlugURL({county: staticCounties[i]}),\n                name: staticCounties[i] + ' Apartments'\n            })\n        }\n\n        if (countyParam) {\n            // var propertyType = curURL.propertyType;\n            // var county = curURL.county\n            // var area = curURL.area\n            // var maxRent = curURL.maxRent\n            // var country = curURL.country;\n            // var bedCount = curURL.bedCount;\n            // var luxurySort = curURL.luxurySort;\n            // var cheapSort = curURL.cheapSort;\n\n            //////////////////////////// WITH COUNTY\n            tmpCrumbs = [];\n            tmpCrumbs.push({\n                url: generateSlugURL({cheapSort: true, propertyType: 'house', county: countyParam}),\n                name: 'Cheap Houses for rent in county ' + titleCase(countyParam)\n            })\n\n            if (propertyType == 'house') {\n                fCrumbs = fCrumbs.concat(tmpCrumbs);\n            }\n            fCrumbs.push({\n                url: generateSlugURL({cheapSort: true, propertyType: 'apartment', county: countyParam}),\n                name: 'Cheap Apartments for rent in county ' + titleCase(countyParam)\n            })\n\n            if (propertyType != 'house') {\n                fCrumbs = fCrumbs.concat(tmpCrumbs);\n            }\n\n            fCrumbs.push({\n                url: generateSlugURL({propertyType: 'studio', county: countyParam}),\n                name: 'Studio for rent in county ' + titleCase(countyParam)\n            })\n\n            tmpCrumbs = [];\n            tmpCrumbs.push({\n                url: generateSlugURL({bedCount: 1, propertyType: 'house', county: countyParam}),\n                name: '1-Bed Houses for rent in county ' + titleCase(countyParam)\n            })//Property Size - Property Type\n            tmpCrumbs.push({\n                url: generateSlugURL({bedCount: 2, propertyType: 'house', county: countyParam}),\n                name: '2-Bed Houses for rent in county ' + titleCase(countyParam)\n            })\n            tmpCrumbs.push({\n                url: generateSlugURL({bedCount: 3, propertyType: 'house', county: countyParam}),\n                name: '3-Bed Houses for rent in county ' + titleCase(countyParam)\n            })\n            tmpCrumbs.push({\n                url: generateSlugURL({luxurySort: true, propertyType: 'house', county: countyParam}),\n                name: 'Luxury Houses for rent in county ' + titleCase(countyParam)\n            })\n\n            if (propertyType == 'house') {\n                fCrumbs = fCrumbs.concat(tmpCrumbs);\n            }\n            fCrumbs.push({\n                url: generateSlugURL({bedCount: 1, propertyType: 'apartment', county: countyParam}),\n                name: '1-Bed Apartments for rent in county ' + titleCase(countyParam)\n            })//Property Size - Property Type\n            fCrumbs.push({\n                url: generateSlugURL({bedCount: 2, propertyType: 'apartment', county: countyParam}),\n                name: '2-Bed Apartments for rent in county ' + titleCase(countyParam)\n            })\n            fCrumbs.push({\n                url: generateSlugURL({bedCount: 3, propertyType: 'apartment', county: countyParam}),\n                name: '3-Bed Apartments for rent in county ' + titleCase(countyParam)\n            })\n            fCrumbs.push({\n                url: generateSlugURL({luxurySort: true, propertyType: 'apartment', county: countyParam}),\n                name: 'Luxury Apartments for rent in county ' + titleCase(countyParam)\n            })\n\n            if (propertyType != 'house') {\n                fCrumbs = fCrumbs.concat(tmpCrumbs);\n            }\n\n            if (areaParam) {\n                //////////////////////////// WITH AREA COUNTY\n                tmpCrumbs = [];\n                tmpCrumbs.push({\n                    url: generateSlugURL({\n                        cheapSort: true,\n                        propertyType: 'house',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: 'Cheap Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n\n                if (propertyType == 'house') {\n                    fCrumbs = fCrumbs.concat(tmpCrumbs);\n                }\n                fCrumbs.push({\n                    url: generateSlugURL({\n                        cheapSort: true,\n                        propertyType: 'apartment',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: 'Cheap Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n\n                if (propertyType != 'house') {\n                    fCrumbs = fCrumbs.concat(tmpCrumbs);\n                }\n\n                fCrumbs.push({\n                    url: generateSlugURL({propertyType: 'studio', county: countyParam, area: areaParam}),\n                    name: 'Studio for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n\n                tmpCrumbs = [];\n                tmpCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 1,\n                        propertyType: 'house',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '1-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })//Property Size - Property Type\n                tmpCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 2,\n                        propertyType: 'house',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '2-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n                tmpCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 3,\n                        propertyType: 'house',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '3-Bed Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n                tmpCrumbs.push({\n                    url: generateSlugURL({\n                        luxurySort: true,\n                        propertyType: 'house',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: 'Luxury Houses for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n\n                if (propertyType == 'house') {\n                    fCrumbs = fCrumbs.concat(tmpCrumbs);\n                }\n                fCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 1,\n                        propertyType: 'apartment',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '1-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })//Property Size - Property Type\n                fCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 2,\n                        propertyType: 'apartment',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '2-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n                fCrumbs.push({\n                    url: generateSlugURL({\n                        bedCount: 3,\n                        propertyType: 'apartment',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: '3-Bed Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n                fCrumbs.push({\n                    url: generateSlugURL({\n                        luxurySort: true,\n                        propertyType: 'apartment',\n                        county: countyParam,\n                        area: areaParam\n                    }), name: 'Luxury Apartments for rent in ' + titleCase(areaParam) + ' ' + titleCase(countyParam)\n                })\n\n                if (propertyType != 'house') {\n                    fCrumbs = fCrumbs.concat(tmpCrumbs);\n                }\n            }\n\n            var distinctEntries = _.uniq(Collections.Areas.find({}, {//County: countyParam ; Dynamically load areas based on the subscription.\n                sort: {Area: 1}, fields: {Area: true}\n            }).fetch().map(function (x) {\n                return x.Area;\n            }), true);\n            areaCrumbs = []\n            for (var i = 0; i < distinctEntries.length; i++) {\n                if (!distinctEntries[i]) continue;\n                // if (distinctEntries[i] == areaParam) continue;//Don't show the same area in this list\n                areaCrumbs.push({\n                    url: generateSlugURL({county: countyParam, area: distinctEntries[i]}),\n                    name: distinctEntries[i] + ' Apartments'\n                })\n            }\n\n            // let ptypeString='';\n            // switch(propertyType){\n            //     case 'apartment': ptypeString = 'Apartments '; break;\n            //     case 'house': ptypeString = 'Houses '; break;\n            // }\n            // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'Studio for rent in county '+titleCase(PD.address.county)})\n            // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'1-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n            // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'2-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n            // fCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'3-Bed '+ptypeString+'for rent in county '+titleCase(PD.address.county)})\n        }\n        return {\n            fCrumbs:fCrumbs,\n            areaCrumbs: areaCrumbs,\n            countyCrumbs:countyCrumbs\n        }\n    }\n\n\n    var data = Collections.Auctions.findOne({\"lettingAuctionCode\" : key}, { limit: 1 });\n\n    if(data){\n\n        data.applicationsReceivedCount = Collections.Bids.find({auctionId:data._id}).count();\n        PDret = Collections.Properties.find(data.propertyId).fetch();\n        PD = PDret[0];\n\n        PD.bedroomsCount=0\n        PD.ensuiteCount = 0;\n        PD.doubleBedCount = 0;\n        if(PD.bedrooms){\n            PD.bedroomsCount = PD.bedrooms.length;\n            for (var i = 0; i < PD.bedrooms.length; i++) {\n                if (PD.bedrooms[i][\"ensuite\"] ) {\n                    PD.ensuiteCount++;\n                }\n            if (PD.bedrooms[i][\"bedType\"] == 'double' ) {\n                PD.doubleBedCount++;\n            }\n        }\n        }\n\n        if(PD.contacts) {//Take the contact of activation not property\n            data.primaryContact = PD.contacts[0];\n        }else data.primaryContact = {};\n\n        tmp = [];\n        if(PD.amenities){\n            for ( var i=0; i< PD.amenities.length;i++){\n                var src = globalConfig.amenitiesLogos[PD.amenities[i]];\n                if(!src)src = globalConfig.amenitiesLogos[\"default\"]\n                tmp.push({name:PD.amenities[i], src: cdnPath(src) })\n            }\n        }\n        PD.amenitiesWithImgs = tmp;\n\n        if(PD.gallery){\n            for(var i=0;i<PD.gallery.length;i++){\n                let altText = 'Photo '+(i+1)+' of '+titleCase(PD.address.address)\n                if (PD.address.area) altText +=', '+titleCase(PD.address.area)\n                if (PD.address.county) altText +=', '+titleCase(PD.address.county)\n\n                // sliderImages.push(PD.gallery[i].url)\n                sliderImages.push({url:PD.gallery[i].url,altText:altText})\n            }\n        }\n\n        ////////// BREADCRUMBS\n        let bcrumbs = [];let slugTemp, searchCrumbs = [];\n        // Home / Search Residential Rentals / Dublin City Apartments for Rent / Dublin 2 Apartments for Rent\n        if(PD.address.county){\n            slugTemp = generateSlug({county:PD.address.county})\n            bcrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:titleCase(PD.address.county)})\n            searchCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'rent in '+titleCase(PD.address.county)})\n        }\n        if(PD.address.area && PD.address.county) {\n            slugTemp = generateSlug({county: PD.address.county, area:PD.address.area})\n            bcrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:titleCase(PD.address.area)})\n            searchCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:'rent in '+titleCase(PD.address.area)+\" of county \"+titleCase(PD.address.county)})\n        }\n        if(PD.address.area && PD.address.county && PD.type) {\n            slugTemp = generateSlug({\n                county: PD.address.county,\n                area: PD.address.area,\n                propertyType: PD.type\n            })\n            bcrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:titleCase(PD.type)})\n            searchCrumbs.push({url:FlowRouter.url('b',{slug:slugTemp[0]}), name:''+titleCase(PD.type)+\" for rent in \"+titleCase(PD.address.area)+\" of county \"+titleCase(PD.address.county)})\n        }\n        data.bcrumbs = bcrumbs;\n        data.searchCrumbs = searchCrumbs.reverse();\n        ////////// END BREADCRUMBS\n        ////////// ADV BREADCRUMBS MORE LINKS\n        if(true) {\n            if(PD.address.county) {\n                AreasSub = Meteor.subscribe('Areas','','',PD.address.county,'','',function(){\n                    Session.set('subscriptionsReady2',true);\n                });\n            }\n            if(Meteor.isClient)Session.get('subscriptionsReady2');\n\n            var advC = advancedCrumbs(PD.address.county,PD.address.area,PD.type);\n            data.fCrumbs = advC.fCrumbs;\n            data.areaCrumbs = advC.areaCrumbs;\n            data.countyCrumbs = advC.countyCrumbs;\n        }\n        ////////// END ADV BREADCRUMBS\n        //////// RELATED PROPS\n        var notArr = [PD._id]\n        var filters = {\n            \"type\":PD.type,\n            \"address.county\":PD.address.county,\n            \"address.area\":PD.address.area,\n            \"auctionId\": {$exists:true, $gt: \"\" },\n            \"isArchived\":false,\n            \"_id\": { $not: { $in: notArr } }\n        }\n\n        data.relatedProps = []\n        var tmpRelated = Collections.Properties.find(filters,{\n            transform:function(doc){\n                doc.auction = Collections.Auctions.findOne({_id:doc.auctionId})\n                if(doc.gallery){\n                    if(doc.gallery[0])doc.firstImg = doc.gallery[0]\n                }\n                return doc;\n            },\n            limit:4}).fetch();\n        data.relatedProps = data.relatedProps.concat(tmpRelated);\n        notArr = [PD._id]\n        for(var i=0;i<data.relatedProps.length;i++){\n            notArr.push(data.relatedProps[i]._id)\n        }\n        filters[\"_id\"] = { $not: { $in: notArr } };\n\n        if(data.relatedProps.length<4){\n            delete filters[\"address.area\"];\n            var tmpRelated = Collections.Properties.find(filters,{\n                transform:function(doc){\n                    doc.auction = Collections.Auctions.findOne({_id:doc.auctionId})\n                    if(doc.gallery){\n                        if(doc.gallery[0])doc.firstImg = doc.gallery[0]\n                    }\n                    return doc;\n                },\n                limit:4}).fetch();\n            data.relatedProps = data.relatedProps.concat(tmpRelated);\n        }\n        notArr = [PD._id]\n        for(var i=0;i<data.relatedProps.length;i++){\n            notArr.push(data.relatedProps[i]._id)\n        }filters[\"_id\"] = { $not: { $in: notArr } };\n\n        if(data.relatedProps.length<4){\n            delete filters[\"address.county\"]\n            var tmpRelated = Collections.Properties.find(filters,{\n                transform:function(doc){\n                    doc.auction = Collections.Auctions.findOne({_id:doc.auctionId})\n                    if(doc.gallery){\n                        if(doc.gallery[0])doc.firstImg = doc.gallery[0]\n                    }\n                    return doc;\n                },\n                limit:4}).fetch();\n            data.relatedProps = data.relatedProps.concat(tmpRelated);(tmpRelated);\n        }\n        notArr = [PD._id]\n        for(var i=0;i<data.relatedProps.length;i++){\n            notArr.push(data.relatedProps[i]._id)\n        }filters[\"_id\"] = { $not: { $in: notArr } };\n\n        if(data.relatedProps.length<4){\n            delete filters[\"type\"]\n            var tmpRelated = Collections.Properties.find(filters,{\n                transform:function(doc){\n                    doc.auction = Collections.Auctions.findOne({_id:doc.auctionId})\n                    if(doc.gallery){\n                        if(doc.gallery[0])doc.firstImg = doc.gallery[0]\n                    }\n                    return doc;\n                },\n                limit:4}).fetch();\n            data.relatedProps = data.relatedProps.concat(tmpRelated);(tmpRelated);\n        }\n        if(data.relatedProps.length>4){\n            data.relatedProps = data.relatedProps.slice(0,4);\n        }\n        ///////// END FILTERS\n\n        var min = data.price*0.7, max = data.price*1.5;// also used in propertyApplications.onRendered\n        priceRange = {min:min, max:max}\n\n        ///////// START MY BIG AND OTHER BIDS\n        if(user){\n            var ret = Collections.Bids.find({auctionId:data._id,userId:user._id, isArchived:false}, {limit: 1}).fetch();\n            myBid = ret[0];\n\n            var maxLen = 5;\n            var forTotCount = Collections.Bids.find({auctionId:data._id, isArchived:false}, {\n                limit: maxLen,\n                sort: { yourBid : -1 }\n            })\n            // debugger;\n            if(!forTotCount.count()){//No results, return\n                otherBids = {\n                    needed: false,\n                    arr: []\n                }\n            }else{\n                if(!myBid || !user)\n                    otherBids = {\n                        needed: true,\n                        arr: forTotCount.fetch()\n                    }\n                else{\n                    var weNeedOnSides = Math.floor( maxLen/2 )\n                    var needAbove = weNeedOnSides;\n                    var back = Collections.Bids.find({auctionId:data._id, userId:{$ne: user._id}, yourBid:{$lt:myBid.yourBid} ,isArchived:false}, {\n                        limit: maxLen - 1,\n                        sort: { yourBid : -1 }\n                    })\n                    var backCount = back.count();\n\n                    if(backCount<weNeedOnSides){ // if count isn't enough, then change back itself.\n                        back = Collections.Bids.find({auctionId: data._id, userId:{$ne: user._id}, yourBid:{$lte:myBid.yourBid} ,isArchived:false},         {\n                            limit: maxLen - 1,\n                            sort: { yourBid : -1 }\n                        })\n                    }\n                    backCount = back.count();\n                    if(backCount<weNeedOnSides){//if its still less, then update we needAbove value\n                        needAbove += weNeedOnSides-backCount;\n                    }\n\n                    var above = Collections.Bids.find({auctionId:data._id, userId:{$ne: user._id}, yourBid:{$gt:myBid.yourBid} ,isArchived:false}, {\n                        limit: maxLen - 1,\n                        sort: { yourBid : -1 }\n                    })\n                    var aboveCount = above.count();\n\n                    if(aboveCount<needAbove){ // if count isn't enough, then change back itself.\n                        above = Collections.Bids.find({auctionId:data._id, userId:{$ne: user._id}, yourBid:{$gte:myBid.yourBid} ,isArchived:false}, {\n                            limit: maxLen - 1,\n                            sort: { yourBid : -1 }\n                        })\n                    }\n                    aboveCount = above.count();\n\n                    var retAbove = above.fetch();\n                    var retBack = back.fetch();\n                    retAbove.push(myBid)\n\n                    otherBids = {\n                        needed: true,\n                        arr: retAbove.concat(retBack)\n                    };\n\n                }\n            }\n        }\n        ///////// START MY BIG AND OTHER BIDS\n    }\n\n    var isAgent = false;\n    // switch(data.createdByAgent){\n    //     case '':\n    //         isAgent = {\n    //             \"logourl\":Meteor.absoluteUrl()+'images/property-rental-agents/Bell-Property-Consultants.jpeg',\n    //             \"name\": 'Bell Property Consultants Ltd',\n    //             \"address1\":\"Harolds Cross, Dublin\",\n    //             \"style\":{height:\"100px\"}\n    //         }\n    // }\n\n    var alreadyLeased = false;\n    if(data){\n        if(data.isArchived)alreadyLeased=true;\n    }\n\n    var refListArr = [];\n    var hasAllReqReferences = false;\n    if(user)\n    if(user.profile)\n    if(user.profile.references) {\n        // if (!user.profile.references.hasResume) refListArr.push(\"Resume\");//Why do you need it?\n        if (!user.profile.references.hasLandlordRef) refListArr.push(\"Landlord reference\");\n        if (!user.profile.references.employerName) refListArr.push(\"Employer name\");\n        if (!user.profile.references.hasWorkRef) refListArr.push(\"Work reference\");\n        if (!user.profile.references.hasFinancialRef) refListArr.push(\"Financial reference\");\n        if (!user.profile.references.hasGovtID) refListArr.push(\"Government ID\");\n        if (!user.profile.references.hasPassport) refListArr.push(\"Passport\");\n        if (!user.profile.references.hasPPS) refListArr.push(\"PPS\");\n        try{\n            if(user.profile.references.hasResume && user.profile.references.hasLandlordRef && user.profile.references.hasGovtID && user.profile.references.hasWorkRef )hasAllReqReferences = true;\n        }catch(e){console.log(e)}\n    }\n\n\n\n    try {\n        var title = '';\n        title = PD.address.address + ', ' + PD.address.area;\n        if (PD.address.county) title += ', ' + PD.address.county;\n\n        var desc = '';\n        if(PD.type) desc += titleCase(PD.type)+ ' for rent at ';\n        desc += PD.address.address + ', ' + PD.address.area;\n        if (PD.address.county) desc += ', ' + PD.address.county+'. ';\n        desc += 'Its '+ (PD.furnished ? \"a furnished \" : \"an Unfurnished \")+ titleCase(PD.type)+\n            \" with \"+ (PD.bedroomsCount ? PD.bedroomsCount : 'no')+\" beds, \"+\n            (PD.baths ? PD.baths : 'no')+\" baths, \"+\n            (PD.ensuiteCount ? PD.ensuiteCount : \"no\" )+\" Ensuite and \" +\n            (PD.doubleBedCount ? PD.doubleBedCount : \"has no\" )+\" Double bed property. \"\n        desc += \"Apply for this \" + PD.type + \", view its images, details and much more.\";\n\n        // Apartment for rent in\n        //     Newbrook road, mullingar, co. westmeath, murrisk, mayo | SpotMyCrib\n        clearMeta();\n        let titleTmp = title + ' | SpotMyCrib'\n        if(titleTmp.length<=75)title = titleTmp;\n\n        DocHead.setTitle(title);\n        DocHead.addMeta({\n            name: \"description\",\n            content: desc\n        });\n\n        var socialDesc = \"Apply for this \" + PD.type + \", view its images, details and much more.\";\n        var socialTitle = '';\n        if(PD.bedroomsCount) socialTitle += PD.bedroomsCount+ ' Bed '\n        if(PD.type) socialTitle += PD.type+ ' available at '\n        socialTitle += title\n        socialTitle = '' + titleCase(socialTitle) + ' | SpotMyCrib'\n        DocHead.addMeta({property: \"og:title\", content: socialTitle});\n        DocHead.addMeta({property: \"og:description\", content: socialDesc});\n\n        {/*<link rel=\"canonical\" href=\"http://example.com/wordpress/seo-plugin/\" />*/}\n        if(FlowRouter.current().route.name == 'letting')\n        DocHead.addMeta({rel: \"canonical\", href: FlowRouter.url('rent',{slug:PD.slug,key:key}) });\n\n        DocHead.addMeta({property: \"og:type\", content: \"place\"});\n        DocHead.addMeta({property: \"og:url\", content: FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params) });\n        DocHead.addMeta({property: \"fb:app_id\", content: '309356899476430'})\n\n        try{DocHead.addMeta({property: \"og:image\", content: PD.gallery[0].url  }); }\n        catch (c){\n            //Putting this here is making FB take the first response from here. & its showing no image if if this meta is later updated. So better put it later after all rendering at a template level. For now lets not keep anywhere.\n            // DocHead.addMeta({name: \"og:image\", content: 'https://www.spotmycrib.ie/images/spot-my-crib-logo.png'  });\n        }\n\n    }catch(err){\n        clearMeta();\n        DocHead.setTitle(' Property not found | SpotMyCrib');\n        DocHead.addMeta({name: \"description\", content: \"\"});\n    }\n\n    return {\n        data: data,\n        alreadyLeased: alreadyLeased,\n        isAgent: isAgent,\n        user: user,\n        refListArr: refListArr,\n        priceRange: priceRange,\n        hasAllReqReferences: hasAllReqReferences,\n        myBid: myBid,\n        otherBids: otherBids,\n        PD: PD,\n        sliderImages: sliderImages,\n        isSubsLoaded:true\n    };\n})(LettingDetail);\n\nclass ImagesSlider extends Component {\n    constructor(props) {\n        super(props)\n        var current = FlowRouter.current();\n        this.currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params)\n    }\n    componentDidMount(){\n        $(document).ready(function() {\n            // $('#lettingDetailCarousel').first().addClass('active');//not needed as bug of isActive helper not working is fixed.\n\n            $('#imagessection .item img').width('100%')\n            var w = $('#imagessection .item img').first().width()\n            var h = w/1.33;\n            if(h>250)$('#imagessection .item img').height(w/1.33)\n            setTimeout(function () {\n                $('#imagessection .item img').width('100%')\n                var w = $('#imagessection .item img').first().width()\n                var h = w/1.33;\n                if(h>250)$('#imagessection .item img').height()\n            },3000)\n\n            // $('#lettingDetailCarousel').carousel();\n            // $(\"#lettingDetailCarousel\").swiperight(function() {\n            //     $(this).carousel('prev');\n            // });\n            // $(\"#lettingDetailCarousel\").swipeleft(function() {\n            //     $(this).carousel('next');\n            // });\n        });\n    }\n    render() {\n        return (\n\n            <div id=\"lettingDetailCarousel\" className=\"carousel slide\" data-ride=\"carousel\">\n                <div className=\"carousel-inner\">\n                    {this.props.images ?\n                        this.props.images.map(function(image,i){\n                            return (\n                            <div key={i} className={'item '+ (i==0 ? 'active' : \"\")}>\n                                <img src={image.url} alt={image.altText} title={image.altText} className=\"img-responsive\"/>\n                            </div>\n                            )\n                        })\n                    :(\n                        <div className=\"item active\">\n                            <img src={cdnPath(\"/images/no-photo.png\")} alt={'Image not available'} title={'Image not available'} className=\"img-responsive\"/>\n                        </div>\n                    )}\n                </div>\n                {/* Left and right controls */}\n                <a className=\"left carousel-control\" href={\"javascript:void(0)\"} data-slide=\"prev\">\n                    <span className=\"glyphicon glyphicon-chevron-left\"/>\n                    <span className=\"sr-only\">Previous</span>\n                </a>\n                <a className=\"right carousel-control\" href={\"javascript:void(0)\"} data-slide=\"next\">\n                    <span className=\"glyphicon glyphicon-chevron-right\"/>\n                    <span className=\"sr-only\">Next</span>\n                </a>\n            </div>\n        );\n    }\n}\nclass AddThisReact extends Component {\n    constructor(props) {\n        super(props)\n        console.log('Add this started')\n    }\n    componentDidMount(){\n        console.log('Add this rendered');\n    }\n    render() {\n        return (\n            <div className=\"addThis\">\n                <div className=\"addthis_inline_share_toolbox\"></div>\n            </div>\n        );\n    }\n}\n// Error: Can't find npm module 'aws-sdk'. Did you forget to call 'Npm.depends' in package.js within the 'jns_flow-router-ssr' package?","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nexport default class About extends Component {\n    render() {\n        return (\n        <div>\n            <MainLayoutHeader />\n            <div className=\"index\">\n                <section className=\"about-bnr\">\n\n                    <h1>About Us</h1>\n\n                </section>\n                <section className=\"abt-content1\">\n                    <div className=\"container text-center\" style={{maxWidth: 750}}>\n                        <h2 className=\"no-capitalize\">Renting in Ireland is a pain, let us make it easy.</h2>\n                        <span className=\"bottom-line\"></span>\n                        <q className=\"color-grey\" style={{display: 'block', marginBottom: 20}}>An average tenant spends\n                            around 1 month of their time, viewing 10+ houses and submitting manual printed references to\n                            find their rental home. In the same way, a landlord shows their letting to 50+ potential\n                            tenants, manually verifying all of their paper refrences before finalising one of them. </q>\n                        <h6>We are spotmycrib. A couple of months ago, we had an intuition : A painless renting system.\n                            One where people can find their dream home for rent without any pain, unnecessary viewings\n                            and disappointment. That gave us our inspiration \"Renting made digital\". That means both\n                            landlords and tenants can use spotmycrib to save their time and money - For the better. We\n                            are just getting started. So, join us. <br/> Write to us at <a\n                                href={FlowRouter.url('contactus')}>Contact</a></h6>\n                    </div>\n                </section>\n            </div>\n            <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n        </div>\n\n        )\n    }\n}","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nvar TxtType = function(el, toRotate, period) {\n    this.toRotate = toRotate;\n    this.el = el;\n    this.loopNum = 0;\n    this.period = parseInt(period, 10) || 2000;\n    this.txt = '';\n    this.tick();\n    this.isDeleting = false;\n};\n\nTxtType.prototype.tick = function() {\n    var i = this.loopNum % this.toRotate.length;\n    var fullTxt = this.toRotate[i];\n\n    if (this.isDeleting) {\n        this.txt = fullTxt.substring(0, this.txt.length - 1);\n    } else {\n        this.txt = fullTxt.substring(0, this.txt.length + 1);\n    }\n\n    this.el.innerHTML = '<span class=\"wrap\">'+this.txt+'</span>';\n\n    var that = this;\n    var delta = 200 - Math.random() * 100;\n\n    if (this.isDeleting) { delta /= 2; }\n\n    if (!this.isDeleting && this.txt === fullTxt) {\n        delta = this.period;\n        this.isDeleting = true;\n    } else if (this.isDeleting && this.txt === '') {\n        this.isDeleting = false;\n        this.loopNum++;\n        delta = 500;\n    }\n\n    setTimeout(function() {\n        that.tick();\n    }, delta);\n};\nexport default class Careers extends Component {\n    componentDidMount(){\n        var elements = document.getElementsByClassName('typewrite');\n        for (var i=0; i<elements.length; i++) {\n            var toRotate = elements[i].getAttribute('data-type');\n            var period = elements[i].getAttribute('data-period');\n            if (toRotate) {\n                new TxtType(elements[i], JSON.parse(toRotate), period);\n            }\n        }\n        // INJECT CSS\n        var css = document.createElement(\"style\");\n        css.type = \"text/css\";\n        css.innerHTML = \".typewrite > .wrap { border-right: 0.08em solid #fff}\";\n        document.body.appendChild(css);\n    }\n    render() {\n        return (\n            <div>\n                <MainLayoutHeader />\n                <div className=\"index\">\n                    <section className=\"contact-bnr\">\n                        <h1>We are looking for talented <a className=\"typewrite\" data-period={2000} data-type=\"[ &quot;marketers&quot;, &quot;sales&quot;, &quot;engineers&quot; ]\">\n                            <span className=\"wrap\" />\n                        </a></h1>\n                    </section>\n                    <section className=\"contact-content career-content\">\n                        <div className=\"container\">\n                            <h3 className=\"bnr-txt\">Join our team in Dublin to transform the online real estate industry. Build tools that help hundreds of people find their dream home everyday. </h3><br />\n                            <p style={{fontSize: 14}}>Why wait? tell us about you and why you want to join us. </p><br />\n                            <a href=\"https://goo.gl/forms/nYxSp8YmuyMYTMEc2\" className=\"btns blue-btn\">Apply</a>\n                        </div>\n                    </section>\n                </div>\n                <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n            </div>\n\n        )\n    }\n}","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nfunction updateFormFromLocalStorage() {\n    if(localStorage) {\n        if (localStorage.contactFormData_name) {\n            $( \"input[name='name']\" ).val( localStorage.contactFormData_name );\n        }\n        if (localStorage.contactFormData_email) {\n            $( \"input[name='email']\" ).val(localStorage.contactFormData_email);\n        }\n        if (localStorage.contactFormData_mobile) {\n            $( \"input[name='mobile']\" ).val( localStorage.contactFormData_mobile);\n        }\n        if (localStorage.contactFormData_message) {\n            $( \"textarea[name='message']\" ).val( localStorage.contactFormData_message);\n            try {\n                var element = $(\"textarea[name='message']\")[0]\n                element.style.height = \"5px\";\n                if (element.scrollHeight < 310) element.style.height = (element.scrollHeight) + \"px\";\n                else element.style.height = \"310px\";\n            }catch(e){}\n        }\n    }\n}\nfunction saveToLocalStorage(){\n    searialisedContactUsForm = $('#contactUsForm').serializeArray();\n    if (localStorage) {\n        localStorage.contactFormData_name = $( \"input[name='name']\" ).val();\n        localStorage.contactFormData_email = $( \"input[name='email']\" ).val();\n        localStorage.contactFormData_mobile = $( \"input[name='mobile']\" ).val();\n        localStorage.contactFormData_message = $( \"textarea[name='message']\" ).val();\n    }\n}\nfunction clearLocalStorage(){\n    searialisedContactUsForm = $('#contactUsForm').serializeArray();\n    if (localStorage) {\n        localStorage.removeItem('contactFormData_name')\n        localStorage.removeItem('contactFormData_email')\n        localStorage.removeItem('contactFormData_mobile')\n        localStorage.removeItem('contactFormData_message')\n    }\n}\n\nexport default class ContactUs extends Component {\n    constructor(props){\n        super(props);\n        this.state={\n            contactFormSaving:false,\n            contactFormSavedSuccess:false\n        }\n        this.takeBackupHandler = this.takeBackupHandler.bind(this)\n        this.formSubmitHandler = this.formSubmitHandler.bind(this)\n        this.autoGrowTAHandler = this.autoGrowTAHandler.bind(this)\n    }\n    takeBackupHandler(){\n        saveToLocalStorage();\n    }\n    formSubmitHandler(event){\n        event.preventDefault();\n    }\n    autoGrowTAHandler(event){\n        var element = event.target;\n        element.style.height = \"5px\";\n        if(element.scrollHeight<310)element.style.height = (element.scrollHeight)+\"px\";\n        else element.style.height = \"310px\";\n    }\n    componentDidMount(){\n        updateFormFromLocalStorage();\n\n        const self = this;\n        var validator = $('#contactUsForm').validate({\n            submitHandler: function(event){\n                self.setState({contactFormSaving:true})\n                self.setState({contactFormSavedSuccess:true})\n\n                console.log(\"You just submitted the 'contact us' form.\");\n                var userId = Meteor.userId();\n                if(!userId)userId = '';\n                var sub = 'Contact form request '\n                var desc = `\n\nName: `+$( \"input[name='name']\" ).val()+`<br/>\nEmail: `+$( \"input[name='email']\" ).val()+`<br/>\nMobile: `+$( \"input[name='mobile']\" ).val()+`<br/>\nMessage: `+$( \"textarea[name='message']\" ).val()+`<br/>\nUser ID: `+userId+`<br/>\n`\n                Meteor.call('notifyAdmin', sub, desc,function(){\n                    $('#contactUsForm')[0].reset();\n                    clearLocalStorage();\n                    self.setState({contactFormSaving:false})\n                    self.setState({contactFormSavedSuccess:false})\n                });\n\n//             var sub = 'Thank you for getting in touch!'\n//             var desc = `\n// We will look over your message and get back to you by soon. In the meantime, you can check the <a href=\"https://www.spotmycrib.ie/faqs\">FAQ section</a>, our <a href=\"https://www.spotmycrib.ie/estateagent\">EstateAgent / Landlord page</a>, our <a href=\"https://www.spotmycrib.com/b/rent-in-ireland/?\">latest letting listings</a> or browse through our <a href=\"http://blog.spotmycrib.com/\">latest blog posts</a>.\n//\n// Your friends at SpotMyCrib.ie\n// `\n//             Meteor.call('notifyAdmin', sub, desc,function(){\n//\n//             });\n\n                // fbq('track', 'ViewContent');No FB Q here, let keep fb thing only for pre planned areas, just to make sure it doesn' give wrong success notices .\n                ga('send', 'event', 'ContactUsPage', 'formSubmitted', 'Contact us form is submitted');\n            }\n        });\n        setTimeout(function () {\n            fbq('track', 'ViewContent');\n            ga('send', 'event', 'ContactUsPage', 'formRendered', 'Contact us form is viewed');\n        },2000)\n\n    }\n    render() {\n        return (\n            <div>\n                <MainLayoutHeader />\n                <div className=\"index\">\n                    <section className=\"contact-bnr\">\n                        <h1>Contact Us</h1>\n                    </section>\n                    <section className=\"contact-content mar-btm-20\" style={{background: 'white'}}>\n                        <div className=\"container\">\n                            <p className=\"text-center\" style={{marginBottom: 10}}>\n                                Please contact the owner directly for queries regarding the properties advertised on our site as we do not own or deal diretly with them. For other queries please email at below email or fill the form below.\n                            </p>\n                            <p className=\"text-center\"><a style={{color: '#428bca'}} href=\"mailto:support@spotmycrib.com\"><i className=\"glyphicon glyphicon-envelopee\" /> support@spotmycrib.com</a></p>\n                            <p className=\"text-center\"> Or </p>\n                            <form onSubmit={this.formSubmitHandler} className=\"signin-form cf-1\" id=\"contactUsForm\">\n                                <div className=\"w-100\" />\n                                <div className=\"sep-section\">\n                                    <label className=\"sep-label\">Write to us</label>\n                                    <div className=\"styled-input underline\">\n                                        <input onChange={this.takeBackupHandler} type=\"text\" name=\"name\" required />\n                                        <label>Name *</label>\n                                        <span />\n                                    </div>\n                                    <div className=\"styled-input underline\">\n                                        <input onChange={this.takeBackupHandler} type=\"email\" name=\"email\" required />\n                                        <label>Email *</label>\n                                        <span />\n                                    </div>\n                                    <div className=\"styled-input underline\">\n                                        <input onChange={this.takeBackupHandler} type=\"text\" name=\"mobile\" />\n                                        <label>Mobile </label>\n                                        <span />\n                                    </div>\n                                    <div className=\"styled-full-width\">\n                                        <textarea onChange={this.takeBackupHandler} onKeyUp={this.autoGrowTAHandler} name=\"message\" className=\"styled-input-textarea autoGrowTA\" id=\"contactAG\" placeholder=\"Enter your message\" required defaultValue={\"\"} />\n                                    </div>\n                                    <div className=\"styled-full-width mar-top-10\">\n                                        {this.state.contactFormSaving ? (\n                                            <button type=\"button\" className=\"btns transparent-btn\">Saving</button>\n                                        ):(\n                                            <button type=\"submit\" className=\"btns blue-btn\">Submit</button>\n                                        )}\n                                    </div>\n                                    {this.state.contactFormSavedSuccess ? (\n                                    <div className=\"styled-full-width\">\n                                        <div className=\"alert alert-success\" role=\"alert\">\n                                            <span className=\"glyphicon glyphicon-ok\" aria-hidden=\"true\" />&nbsp;Thank you for contacting us, we will reach out to you as soon as possible.\n                                        </div>\n                                    </div>\n                                    ):\"\"}\n                                </div>\n                                <div className=\"w-100\" />\n                            </form>\n\n                        </div>\n                    </section>\n                </div>\n                <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n            </div>\n\n        )\n    }\n}","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nexport default class CookiePolicy extends Component {\n    render() {\n        return (\n            <div>\n                <MainLayoutHeader />\n                <div className=\"index\">\n                    <section className=\"about-bnr\">\n                        <h1>Cookie Policy</h1>\n                    </section>\n                    <section className=\"faq-content cookieconsent-content pad-btm-30\">\n                        <div className=\"container\">\n                            <div className=\"faq-section-hold\">\n                                <p>By using this website, you consent to the use of cookies in accordance with the SpotMyCrib.ie Cookie Policy below.<br /><br />SpotMyCrib.ie uses small pieces of data called cookies to help customise your user experience. Learn more about cookies and how you can control them by reading our Cookies Policy.<br /><br />We may update our Cookies Policy to reflect any changes in technology or data protection legislation. Any updates or changes that may affect how we use cookies or how you as a user can manage cookies will appear on this page.</p>\n                                <h3>What is a Cookie?</h3>\n                                <p>A cookie is a small piece of data sent by a website’s server to your computer or mobile device and stored in your browser (e.g. Google Chrome, Firefox, Internet Explorer etc). It consists of anonymous information, including a unique user identifier. When you revisit a site or navigate between pages, this data is passed from your browser to the site’s server. With this data, the website is able to ‘remember’ your browser, enabling it to retrieve your user preferences, to personalise your visits and to simplify any sign-in procedures.<br /><br />Cookies are intended to improve your user experience by making it easier and faster to navigate through a website. For example, some websites require that you log in to gain access. If such sites did not use cookies, then you would be required to enter your login details every time you navigated to a new page because the website would not be able to remember that you had already logged in.<br /><br />Many websites also use cookies for advertising purposes. For example, certain cookies allow a website to determine if you’ve already seen a particular ad and therefore it may not display that ad on subsequent pages that you visit.<br /><br />All of the information a cookie collects can only be retrieved by the website server that sent the cookie to your browser.</p>\n                                <h3>Cookies on SpotMyCrib.ie</h3>\n                                <p>We use the following Cookies on sections of SpotMyCrib.ie site and the mobile application:<br /><br />Strictly necessary cookies: These are cookies that are required for the operation of our website. They include, for example, cookies that enable you to log into secure areas of our website.<br /><br />Analytical / Performance Cookies: They are set by SpotMyCrib.ie and third parties, including Comscore and Google Analytics. Performance cookies allow us to collect statistical information about our visitors, such as whether they have visited the site before and the pages they view. This information is gathered anonymously - it does NOT enable us to identify who you are. We use these cookies to determine the kind of content and services our visitors value most, which in turn helps us improve our website and its content.<br /><br />Third Party Cookies: We and third-party vendors, including Google, use first-party cookies and third-party cookies together to inform, optimise and serve ads based on users’ past visits to this website. We use data from Google's Interest-based advertising or 3rd-party audience data (such as age, gender and interests) with Google Analytics to understand who our users are in order to create a better experience for them while visiting our website. We may use Remarketing with Google Analytics to advertise online. Third-party vendors, including Google, show our ads on sites across the Internet.<br /><br />Google Analytics: Users can opt out of Google Analytics for Display Advertising and customise Google Display Network ads using the Ads Settings found here: www.google.com/settings/ads.<br /><br />Functionality cookies: These are used to recognise you when you return to our website. This enables us to personalise our content for you, greet you by name and remember your preferences.<br /><br />Targeting cookies: These cookies record your visit to our website, the pages you have visited and the links you have followed. We will use this information to make our website and the advertising displayed on it more relevant to your interests. We may also share this information with third parties for this purpose.<br /><br />We do not control which cookies are set by third parties or how the cookie information is used – a cookie can only be accessed by the party who set it. For more information on these cookies, please visit the third-party website.</p>\n                                <h3>Controlling cookies</h3>\n                                <p>Cookies are meant to improve the user experience, but some users prefer to set restrictions on the types of cookies that can be stored on their computer or mobile phone.<br /><br />By modifying your browser preferences, you have the choice to accept all cookies, to be notified when a cookie is set or to reject all cookies.<br /><br />It is important to note that you will lose some functions of a website if you choose to restrict or disable its cookies.</p>\n                                <br />\n                                <p>Have more questions? <a href={FlowRouter.url('contactus')}>Submit a request</a></p>\n                            </div>\n                        </div>\n                    </section>\n                </div>\n\n                <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n            </div>\n\n        )\n    }\n}","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\n\nexport default class EstateAgent extends Component {\n    constructor(props){\n        super(props);\n        this.state={\n            f2Success:false,\n            knowMore:false\n        }\n        this.sinterestformHandler = this.sinterestformHandler.bind(this)\n        this.sinterestformtryagainHandler = this.sinterestformtryagainHandler.bind(this)\n        this.knowMoreBtnHandler = this.knowMoreBtnHandler.bind(this)\n    }\n    componentDidMount(){\n        // var $zoho=$zoho || {};$zoho.salesiq = $zoho.salesiq ||\n        //     {widgetcode:\"5e6f4b070bdd6e53b8a76febfd867047f48220a3f0e688fad51400b27169fabc7e3e6a8594601225fa1324917f66ed28\", values:{},ready:function(){}};\n        // var d=document;s=d.createElement(\"script\");s.type=\"text/javascript\";s.id=\"zsiqscript\";s.defer=true;\n        // s.src=\"https://salesiq.zoho.eu/widget\";t=d.getElementsByTagName(\"script\")[0];t.parentNode.insertBefore(s,t);d.write(\"<div id='zsiqwidget'></div>\");\n        try{\n            jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n        }catch(e){\n            document.body.scrollTop = document.documentElement.scrollTop = 0;\n        }\n        var data = [\n            [30,1,2,20],\n            ['300',10,20,'200'],//333 //10\n            ['3,000',100,200,'2,000'],//333 //100\n            ['6,000',200,400,'4,000'],//333 //200\n            ['12,000',400,800,'8,000'],//333 //400\n            ['30,000','1,000','2,000','20,000'],//333 //1000\n            ['60,000','2,000','4,000','40,000'],//333 //2000\n        ]\n        // $(\"#slider\").slider({\n        //\n        //     value: \"1\",\n        //     min: 0,\n        //     max: 6,\n        //     step: 1,\n        //     slide: function(event, ui) {\n        //         console.log('Sliding in progress');\n        //         // debugger;\n        //         $(\".viewingsSaved\").html(data[ui.value][0]);\n        //         $(\".tripsSaved\").html(data[ui.value][1]);\n        //         $(\".hoursSaved\").html(data[ui.value][2]);\n        //         $(\".moneySaved\").html(data[ui.value][3]);\n        //\n        //     }\n        // });\n\n        $(\"#many_properties_area_slider\").noUiSlider({\n            start: [ 10 ],\n            range: {\n                'min': [  1 ],\n                '30%': [  10 ],\n                '50%': [  100 ],\n                '60%': [  500 ],\n                '70%': [  1000 ],\n                'max': [ 2000 ]\n            }\n        }).on('slide', function (ev, val) {\n            // set real values on 'slide' event\n            var i = Math.round(val);\n            // $('#lcountInline').html(i);\n            $('#lcount').html(i);\n            $(\".viewingsSaved\").html(30*i);\n            $(\".tripsSaved\").html(1*i);\n            $(\".hoursSaved\").html(2*i);\n            $(\".moneySaved\").html(80*i);\n        }).on('change', function (ev, val) {\n            // round off values on 'change' event\n        });\n\n        // setTimeout(function() {\n        //     var slider = document.getElementById('many_properties_area_slider');\n        //     templateInstance.noUiSlider.create(slider, {\n        //         start: [ 10 ],\n        //         range: {\n        //             'min': [  1 ],\n        //             '30%': [  200 ],\n        //             '50%': [  500 ],\n        //             '70%': [  1000 ],\n        //             'max': [ 2000 ]\n        //         },\n        //         // tooltips: [wNumb({ decimals: 1 })]\n        //         tooltips: true\n        //\n        //\n        //     });\n        //\n        //     slider.noUiSlider.on('update', function( values, handle ) {\n        //         var i = Math.round(values[handle]);\n        //         $('#lcount').html(i);\n        //         $(\".viewingsSaved\").html(30*i);\n        //         $(\".tripsSaved\").html(1*i);\n        //         $(\".hoursSaved\").html(2*i);\n        //         $(\".moneySaved\").html(80*i);\n        //     });\n        // },500);\n        // setTimeout(function() {\n        //     // $.scrollify({\n        //     //     section: \"section\",\n        //     // });\n        // },500);\n    }\n    joinNowBtnHandler(){\n        FlowRouter.go('joinnowlandlord');\n    }\n    sinterestformHandler(event){\n        event.preventDefault();\n        const target = event.target;\n        const email = target.emailaddress.value;\n        const fullname = target.fullname.value;\n        const company = target.company.value;\n        const phone = target.phone.value;\n\n        // import \"../accounts/validation.js\";\n        let validatedEmail = LoginFormValidation.email(email);\n        if (validatedEmail !== true) {\n            console.log(validatedEmail.error);\n            alert(validatedEmail.reason);\n            // var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n            // if(!validatedEmail.reason)error.reason = 'Invalid email. Please correct the email address entered.';\n            // tmp.push(validatedEmail.reason);\n            // Session.set(\"showErrorDlg\",tmp)\n        }else{\n            ga('send', 'event', 'estateAgentPage', 'sinterestForm', 'Special intro offer form submitted');\n            Meteor.call('introOfferRequestReceived',email,fullname,company,phone);\n            this.setState({f2Success:true})\n        }\n    }\n    sinterestformtryagainHandler(){\n        this.setState({f2Success:false})\n    }\n    knowMoreBtnHandler(){\n        if(this.state.knowMore)this.setState({knowMore:false})\n        else{\n            this.setState({knowMore:true})\n            setTimeout(function () {\n                try{\n                    $('html, body').animate({\n                        scrollTop: $(\"#knowmorebegin\").offset().top\n                    }, 500);\n                }catch(e){}\n            },500)\n        }\n    }\n    render() {\n        return (\n            <div>\n                <link rel=\"stylesheet\" href=\"css/estateagent.css\" />\n                <section className=\"topheader\" id=\"topheader\">\n                    <div className=\"container-fluid\">\n                        <div className=\"container container-fixed rdc\">\n                            <div className=\"col-md-12 logo\">\n                                <a href={FlowRouter.url('home')}><img src={cdnPath(\"/images/estateagentpage/logo.png\")}/></a>\n                            </div>\n                            <div className=\"col-md-10 col-md-offset-1 property_listings\">\n                                <h1>Post Your Property listings and Select your tenant now</h1>\n                                <div className=\"box-places home-page-box-places\" style={{background: 'none', padding: 0}}>\n                                    <ul>\n                                        <li>\n                                            <KnowMoreForm/>\n                                        </li>\n                                    </ul>\n                                </div>\n                                {/*<div class=\"col-md-10 col-md-offset-1 \">\n                  <form class=\"form-horizontal\">\n                      <div class=\"form-group\">\n                          <div class=\"col-sm-9\">\n                              <input type=\"email\" class=\"input-group form-control\" id=\"email\" placeholder=\"Enter email\">\n                          </div>\n                          <div class=\"col-sm-3\">\n                              <button type=\"submit\" class=\"btn green-btn\">Know More!</button>\n                          </div>\n                      </div>\n                  </form>\n              </div>*/}\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                {/* Header Section End*/}\n                {/*Spot Your Tenant Section Start*/}\n                <section className=\"spotyourtenant\">\n                    <div className=\"container-fluid\">\n                        <div className=\"container container-fixed rdc\">\n                            <div className=\"col-md-12 rdc\">\n                                <div className=\"col-md-6 \">\n                                    <h2>Spot Your Tenant</h2>\n                                    <p>SpotMyCrib makes your work easy. You can <br />post your property and screen tenants online. The screening process includes a rental application <br />with their references and their complete social profiles.</p>\n                                </div>\n                                <div className=\"col-md-6 \">\n                                    {false? (<img src={cdnPath(\"/images/estateagentpage/video.png\")} className=\"img-responsive\" />):\"\"}\n            <div id=\"video-div\">\n                <iframe width=\"462.2\" height=\"260\" src=\"https://www.youtube.com/embed/L689NIDwFdc?rel=0\" frameBorder=\"0\" allowFullScreen></iframe>\n                {/* allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" */}\n            </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                {/*Spot Your Tenant Section Start*/}\n                {/*Spot Your Tenant Section Start*/}\n                <section className=\"many_properties_area\" style={{minHeight: 700}}>\n                    <div className=\"container-fluid\">\n                        <div className=\"container rdc container-fixed\">\n                            <div className=\"col-md-12 rdc text-center\">\n                                <h2>How Many Properties are you listing?</h2>\n                                {/*<span id=\"lcountInline\">10</span>*/}\n                                <div className=\"wrappernew\">\n                                    <div className=\"colThree\" style={{margin: '0px 0 20px 0px', textAlign: 'left'}}>\n                                        <div id=\"contenta\">\n                                            <div id=\"lcount\">10</div>\n                                            <span>1</span><span style={{float: 'right'}}>2000</span>\n                                            <div id=\"many_properties_area_slider\" />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"container container-fixed\">\n                                <div className=\"col-md-12 rdc\">\n                                    <article className=\"col oneline\">\n                                        <div className=\"circle-in\">\n                                            <div className=\"viewingsSaved\">300</div>\n                                            <p>Viewings Saved</p></div>\n                                    </article>\n                                    <article className=\"col oneline\">\n                                        <div className=\"circle-in\">\n                                            <div className=\"tripsSaved\">10</div>\n                                            <p>Travel trips Saved</p>\n                                        </div>\n                                    </article>\n                                    <article className=\"col oneline\">\n                                        <div className=\"circle-in\">\n                                            <div><span className=\"hoursSaved\">20</span><strong>Hours</strong></div>\n                                            <p>Time Saved</p>\n                                        </div>\n                                    </article>\n                                    <article className=\"col oneline\">\n                                        <div className=\"circle-in\">\n                                            <div>€<span className=\"moneySaved\">800</span></div>\n                                            <p>Money Saved</p>\n                                        </div>\n                                    </article>\n                                </div>\n                            </div>\n                            <div className=\"col-md-12 btn-account_area\">\n                                <button type=\"submit\" className=\"btn green-btn joinNowBtn\" onClick={this.joinNowBtnHandler}>Claim your Free Account</button>\n                            </div>\n                            <div className=\"container rdc\">\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                {/*Spot Your Tenant Section Start*/}\n                {/*Business Section Start*/}\n                <section className=\"business_area\" style={{minHeight: 970}}>\n                    <div className=\"container-fluid\">\n                        <div className=\"container  rdc\">\n                            <div className=\"col-md-12 rdc business_area_onesecton\">\n                                <h2>Expand / Develop Your Business with these BENEFITS</h2>\n                                <div className=\"col-md-4 competitive\">\n                                    <img src={cdnPath(\"/images/estateagentpage/img_01.png\")} className=\"img-responsive\" />\n                                    <h3>Competitive Advantage</h3>\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Get the competitive edge you need to excel in this extremely competitive market. </p>\n                                    {/*This value added service will give you the competitive edge you need in an extremely competitive market*/}\n                                </div>\n                                <div className=\"col-md-4 competitive\">\n                                    <img src={cdnPath(\"/images/estateagentpage/img_02.png\")} className=\"img-responsive\" />\n                                    <h3>Reduced Admin</h3>\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Save time and money by automating <br />renting, managing and maintaining <br />your property.</p>\n                                </div>\n                                <div className=\"col-md-4 competitive\">\n                                    <img src={cdnPath(\"/images/estateagentpage/img_03.png\")} className=\"img-responsive\" />\n                                    <h3>Safe secure system</h3>\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>SpotMyCrib uses state of the art<br />technology to keep your data<br /> safe and secure.</p>\n                                </div>\n                            </div>\n                            <div className=\"col-md-12 rdc business_area_onesecton\">\n                                <div className=\"col-md-4 competitive\">\n                                    <img src={cdnPath(\"/images/estateagentpage/img_04.png\")} className=\"img-responsive\" />\n                                    <h3>Digital accounting and maintenance</h3>\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Post your property instantly on the<br />go, from your mobile phone. Save valuable time.</p>\n                                </div>\n                                <div className=\"col-md-4 competitive\">\n                                    <img src={cdnPath(\"/images/estateagentpage/img_05.png\")} className=\"img-responsive\" />\n                                    <h3>Screen tenants</h3>\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Receive and access all your tenant <br />references and applications from one centralised account. Access them anytime, anywhere across the globe. </p>\n                                    {/*No more manual uploading into your 3rd party file storage.*/}\n                                </div>\n                                <div className=\"col-md-4 competitive\">\n                                    <img src={cdnPath(\"/images/estateagentpage/img_06.png\")} className=\"img-responsive\" />\n                                    <h3>Verify social profiles</h3>\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}> LinkedIn, twitter and facebook profile verification.</p>\n                                </div>\n                            </div>\n                            <div className=\"col-md-12 rdc business_area_onesecton\">\n                                <div className=\"col-md-4 competitive\">\n                                    <img src={cdnPath(\"/images/estateagentpage/img_10.png\")} className=\"img-responsive\" />\n                                    <h3>Report</h3>\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Get intelligent reports on rental and maintenance costs identifying patterns to add revenue streams.</p>\n                                    {/*Intelligent reporting on rents received, maintenance costs to identify patterns to boost business and add new revenue streams.*/}\n                                </div>\n                                <div className=\"col-md-4 competitive\">\n                                    <img src={cdnPath(\"/images/estateagentpage/img_08.png\")} className=\"img-responsive\" />\n                                    <h3>Get Paid</h3>\n                                    {/*<p style=\"line-height:30px;font-size:17px;\">Set your own Application Fee.<br>The Applicants will pay you online</p>*/}\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Auto-rent collection, friendly rental reminders 24 hours prior to rental date, failure to pay on time leads to warning notices being issued and much more.</p>\n                                </div>\n                                <div className=\"col-md-4 competitive\">\n                                    <img src={cdnPath(\"/images/estateagentpage/img_09.png\")} className=\"img-responsive\" />\n                                    <h3>e-Sign Lease</h3>\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Generate and sign lease/contracts<br />online.</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                {/*Business Section End*/}\n                {/*How It Work Section End*/}\n                <section className=\"howitwork_section\" style={{minHeight: 650}}>\n                    <div className=\"container-fluid\">\n                        <div className=\"container rdc\">\n                            <h2>How it works</h2>\n                            <div className=\"col-md-12 rdc\">\n                                <div className=\"col-md-3 posting_section\" style={{paddingBottom: 81}}>\n                                    <h3>POSTING LETTING</h3>\n                                    <img src={cdnPath(\"/images/estateagentpage/workimg_01.png\")} className=\"img-responsive\" />\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Market your property through spotmycrib.ie and find your ideal tenant effortlessly. Post your property photographs n details.</p>\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Market your property through spotmycrib.ie and find your ideal tenant effortlessly. Post your property photographs and particulars.</p>\n                                </div>\n                                <div className=\"col-md-3 posting_section\" style={{paddingBottom: 56}}>\n                                    <h3>SCREEN TENANTS</h3>\n                                    <img src={cdnPath(\"/images/estateagentpage/workimg_02.png\")} className=\"img-responsive\" />\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Our applicants apply for your property online via SpotMyCrib. View all their details, references, social profiles online and screen them. Click \"choose\" and select your tenant. It is as simple as that.</p>\n                                </div>\n                                <div className=\"col-md-3 posting_section\" style={{paddingBottom: 81}}>\n                                    <h3>SIGN DIGITAL LEASE</h3>\n                                    <img src={cdnPath(\"/images/estateagentpage/workimg_03.png\")} className=\"img-responsive\" />\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Generate and sign legally binding lease/contracts online. Automatic reminder and reporting on lease expiry dates. </p>\n                                </div>\n                                <div className=\"col-md-3 posting_section\" style={{paddingBottom: 81}}>\n                                    <h3>COLLECT RENTS</h3>\n                                    <img src={cdnPath(\"/images/estateagentpage/workimg_04.png\")} className=\"img-responsive\" />\n                                    <p style={{lineHeight: '30px', fontSize: '17px'}}>Let your tenants pay rent online. Automated rent collection and owner disbursements. Reminders and reporting on all payments.</p>\n                                </div>\n                            </div>\n                            <div className=\"col-md-12 btn-account_area\">\n                                {this.state.knowMore ? (\n                                    <button className=\"btn green-btn knowMoreBtn\" onClick={this.knowMoreBtnHandler}>Know Less!</button>\n                                ) : (\n                                    <button className=\"btn green-btn knowMoreBtn\" onClick={this.knowMoreBtnHandler}>Know More!</button>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                {/*How It Work Section End*/}\n            {this.state.knowMore ? (\n                <div>\n                {/*Property Area Section Start*/}\n                <section id=\"knowmorebegin\" className=\"property_area\" style={{minHeight: 700}}>\n                    <div className=\"container-fluid\">\n                        <div className=\"container container-fixed rdc\">\n                            <h2 style={{marginBottom: 60}}>Make your life faster and easier!!</h2>\n                            <div className=\"col-md-12\">\n                                <div className=\"col-md-6\">\n                                    <h3>Post your property</h3>\n                                    <p style={{}}>Here is your chance to post your property in the best light possible. Describe it, is it furnished? What amenities are available? Pets allowed? Add all the desirable features of it. Post the best photographs of it. Have tenants fall in love with your property time and time again.</p>\n                                    <a href={FlowRouter.url('advertisewithus')} className=\"btn green-btn\">Post your letting</a>\n                                </div>\n                                <div className=\"col-md-6\">\n                                    <img src={cdnPath(\"/images/post.png\")} className=\"img-responsive\" style={{boxShadow: 'none'}} />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                {/*Property Area Section End*/}\n                {/*Property Area Section Start*/}\n                <section className=\"screentenants_area\" style={{minHeight: 700}}>\n                    <div className=\"container-fluid\">\n                        <div className=\"container container-fixed rdc\">\n                            <div className=\"col-md-12\">\n                                <div className=\"col-md-6\">\n                                    <img src={cdnPath(\"/images/estateagentpage/screen-tenants.jpg\")} className=\"img-responsive\" />\n                                </div>\n                                <div className=\"col-md-1\" />\n                                <div className=\"col-md-5\">\n                                    <h3>Screen Tenants</h3>\n                                    <p>Find your best tenant by screening them online. You get all their details, references, social profiles as they apply for your property. Their application package will also include credentials like their experian credit check, criminal check, previous rental history and all other necessary details. Screen them faster and close your deal.</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                {/*Manage rent*/}\n                <section className=\"property_area\" style={{minHeight: 700}}>\n                    <div className=\"container-fluid\">\n                        <div className=\"container container-fixed rdc\">\n                            <div className=\"col-md-12\">\n                                <div className=\"col-md-6\">\n                                    <h3>Manage Rent Online</h3>\n                                    <p>No more paperwork. Manage your rental income online. SpotMyCrib is safe and reliable. You can also check the deposits, rent amount and deadlines here. No more hassle with cash payments or standing orders.</p>\n                                </div>\n                                <div className=\"col-md-6\">\n                                    <img src={cdnPath(\"/images/payment.png\")} className=\"img-responsive\" />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                {/*Online Lease Signing*/}\n                <section className=\"property_area\" style={{minHeight: 700}}>\n                    <div className=\"container-fluid\">\n                        <div className=\"container container-fixed rdc\">\n                            <div className=\"col-md-12\">\n                                <div className=\"col-md-6\">\n                                    <img src={cdnPath(\"/images/e-sign.png\")} className=\"img-responsive\" />\n                                </div>\n                                <div className=\"col-md-1\" />\n                                <div className=\"col-md-5\">\n                                    <h3>Online Lease Signing</h3>\n                                    <p>Simply upload your necessary details. Get your legally binding document back with minimal effort. SpotMyCrib makes your job much easier and simpler. Store your contract online and view it any time you wish.</p>\n                                    {/*Generate rental agreements online and get them to e-sign. */}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                </div>\n            ):\"\"}\n                {/*receive Section Start*/}\n                <section className=\"receive_area\">\n                    <div className=\"container-fluid\">\n                        <div className=\"container container-fixed rdc\">\n                            <div className=\"col-md-12 rdc text-center\">\n                                <h2>Receive a Special Introductory Offer</h2>\n                                {this.state.f2Success ? (\n        <div>\n            <p style={{marginBottom: 20, color: 'black'}} className=\"text-center\">Thank you for your interest.</p>\n            <button className=\"btn green-btn sinterestformtryagain\" type=\"submit\" onClick={this.sinterestformtryagainHandler}>Add another</button>\n        </div>\n                                ):(\n                                <form role=\"form\" className=\"sinterest-form\" onSubmit={this.sinterestformHandler}>\n                                    <div className=\"form-group col-xs-12 col-sm-6 col-md-6 col-lg-6\">\n                                        <input autoComplete=\"email\" type=\"email\" className=\"form-control\" id=\"emailaddress\" name=\"emailaddress\" placeholder=\"Enter your email\" />\n                                    </div>\n                                    <div className=\"form-group col-xs-12 col-sm-6 col-md-6 col-lg-6\">\n                                        <input autoComplete=\"name\" type=\"text\" className=\"form-control\" id=\"fullname\" name=\"fullname\" placeholder=\"Your full name\" />\n                                    </div>\n                                    <div className=\"clearfix\" />\n                                    <div className=\"form-group col-xs-12 col-sm-6 col-md-6 col-lg-6\">\n                                        <input autoComplete=\"organization\" type=\"text\" className=\"form-control\" id=\"company\" name=\"company\" placeholder=\"Company\" />\n                                    </div>\n                                    <div className=\"form-group col-xs-12 col-sm-6 col-md-6 col-lg-6\">\n                                        <input autoComplete=\"tel\" type=\"text\" className=\"form-control\" id=\"phone\" name=\"phone\" placeholder=\"Phone\" />\n                                    </div>\n                                    <div className=\"clearfix\" />\n                                    <div className=\"clearfix\" />\n                                    <div className=\"col-xs-12 col-sm-12 col-md-12 col-lg-12 submit\">\n                                        <button type=\"submit\" className=\"btns green-btn\">Learn More!</button>\n                                    </div>\n                                </form>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                {/*receive Section End*/}\n                <section className=\"frequently_area\">\n                    <div className=\"container-fluid\">\n                        <section className=\"faq-content mar-btm-20\">\n                            <div className=\"container container-fixed rdc\">\n                                <div className=\"faq-section-hold\">\n                                    <h2>Frequently asked questions</h2>\n                                    <div className=\"panel-group agent-panel-group\" id=\"accordion\" role=\"tablist\" aria-multiselectable=\"true\">\n                                        <div className=\"panel panel-default\">\n                                            <a role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseOne\" aria-expanded=\"false\" aria-controls=\"collapseOne\" className=\"collapsed\">\n                                                <div className=\"panel-heading\" role=\"tab\" id=\"headingOne\">\n                                                    <h4 className=\"panel-title \">\n                                                        <span className=\"green-circle\">1</span>\n                                                        <p className=\"position\">It is my understanding that current legislation will not allow for bidding that exceeds the permitted rent amount. </p>\n                                                        <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                    </h4>\n                                                </div>\n                                            </a>\n                                            <div id=\"collapseOne\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingOne\" aria-expanded=\"false\" style={{height: 0}}>\n                                                <div className=\"panel-body\">\n                                                    <ul>\n                                                        <li>We have an option to disable the bidding and have done so.</li>\n                                                        <li>We have contacted the RTB: Residential Tenancies Board in Ireland (in writing) and asked them if a tenant offers more rent and a landlord agrees to it - is that legal. They confirmed it is legal if both sides agree to it.</li>\n                                                    </ul>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"panel panel-default\">\n                                            <a role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseOne\" className=\"collapsed\">\n                                                <div className=\"panel-heading\" role=\"tab\" id=\"headingOne\">\n                                                    <h4 className=\"panel-title \">\n                                                        <span className=\"green-circle\">2</span>\n                                                        <p className=\"position\">What would the knock effect be should there be arrears, can warning letters be sent? etc</p>\n                                                        <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                    </h4>\n                                                </div>\n                                            </a>\n                                            <div id=\"collapseTwo\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingOne\" aria-expanded=\"false\">\n                                                <div className=\"panel-body\">\n                                                    <ul>\n                                                        <li>We can send warning emails/reminder emails and report on who are due rents, arrears.</li>                                              <li>SpotMyCrib also remembers the history of a tenants arrears, etc</li>\n                                                    </ul>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"panel panel-default\">\n                                            <a className=\"collapsed\" role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseThree\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\n                                                <div className=\"panel-heading\" role=\"tab\" id=\"headingTwo\">\n                                                    <h4 className=\"panel-title\">\n                                                        <span className=\"green-circle\">3</span>\n                                                        <p className=\"position\">What responsibility is there on the agent, from a Data Protection perspective, If references are sent to a website?</p>\n                                                        <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                    </h4>\n                                                </div>\n                                            </a>\n                                            <div id=\"collapseThree\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingTwo\" aria-expanded=\"false\">\n                                                <div className=\"panel-body\">\n                                                    <ul>\n                                                        <li>All Data is being held and maintained by SpotMyCrib within Europe and the key system ensures the data is being shared within in the terms of the consumer's signup.</li>\n                                                        <li>There is no responsibility on the agent, Users agree to terms of service, privacy when they upload their references. This actively operates within the GDPR (<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/General_Data_Protection_Regulation\"> Data protection Regulation</a>) framework. </li>\n                                                        <li>Customers retain at all times the option to have all of their data removed, inspected or deletion if we're contacted in writing directly or indirectly by the agent on the consumer's behalf.</li>\n                                                        <li>The key system ensures the agent can deal with all Data Protection issues for a renter, speedily and thoroughly within the regulations.</li>\n                                                        <li>Plus we are 100% compliant with data being stored within Europe, all of our data is stored on Amazon Ireland.</li>\n                                                        <li>We also use https encryption, which encrypts all the communication between user and spotmycrib.ie</li>\n                                                    </ul>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"panel panel-default\">\n                                            <a className=\"collapsed\" role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseFour\" aria-expanded=\"false\" aria-controls=\"collapseThree\">\n                                                <div className=\"panel-heading\" role=\"tab\" id=\"headingThree\">\n                                                    <h4 className=\"panel-title\">\n                                                        <span className=\"green-circle\">4</span>\n                                                        <p className=\"position\">Is there a benefit to the references being collect by Spot my crib rather than say our personal emails? </p>\n                                                        <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                    </h4>\n                                                </div>\n                                            </a>\n                                            <div id=\"collapseFour\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingThree\" aria-expanded=\"false\">\n                                                <div className=\"panel-body\">\n                                                    <p>There are many other advantages as given below. </p>\n                                                    <ul>\n                                                        <li>Centralised records, no more going through emails back and forth to gain references.</li>\n                                                        <li>Time tracking applications and sequencing</li>\n                                                        <li>Elimination of duplication.</li>\n                                                        <li>Time-saving - as discussed on our previous meeting, let's say Neptune gets 30 viewings per house and for 100 units, its 3000 viewings - that is 3k digital applications</li>\n                                                        <li>Instant social profile checks - verify users to check if they would they be a good fit for the property.</li>\n                                                        <li>Digital fingerprint background Checks - of all the references</li>\n                                                        <li>Instant salary affordability checks - Check if the tenants can afford the house</li>\n                                                        <li>No more paper to get lose.</li>\n                                                        <li>No longer tied to office - checks can be made from anywhere, any device, laptop/mobile.</li>\n                                                        <li>Customised filters - to choose only the best tenants using an Agent's experience.</li>\n                                                        <li>Set up invites for viewing - only invite selected applicants for the viewing.</li>\n                                                        <li>The key ensures it is a particular property and eliminates confusion for the renter.</li>\n                                                    </ul>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"panel panel-default\">\n                                            <a className=\"collapsed\" role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseFive\" aria-expanded=\"false\" aria-controls=\"collapseThree\">\n                                                <div className=\"panel-heading\" role=\"tab\" id=\"headingThree\">\n                                                    <h4 className=\"panel-title\">\n                                                        <span className=\"green-circle\">5</span>\n                                                        <p className=\"position\">How does someone who Is looking for an Apartment know to go to Spot my Crib?. They will think My Home and Daft. </p>\n                                                        <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                    </h4>\n                                                </div>\n                                            </a>\n                                            <div id=\"collapseFive\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingThree\" aria-expanded=\"false\">\n                                                <div className=\"panel-body\">\n                                                    <ul>\n                                                        <li>Tenants can search for the property directly from our home page.</li>\n                                                        <li>A property's link/key is shared either in the ad or with the ad in daft, myhome etc.</li>\n                                                        <li>A property's link/key can also be posted on the Agent's website.</li>\n                                                        <li>Agents can print the key and give a hardcopy of the key to viewers when they visit the property. </li>\n                                                    </ul>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"col-md-12 btn-account_area\">\n                                        <a href={FlowRouter.url('faqs')} className=\"btn green-btn\">More FAQs!</a>\n                                    </div>\n                                </div>\n                            </div>{/*container*/}\n                        </section>\n                    </div>\n                </section>\n            </div>\n\n        )\n    }\n}\nclass KnowMoreForm extends Component {\n    constructor(props){\n        super(props);\n        this.state={\n            f1Success:false,\n        }\n        this.knowmoreformtryagainHandler = this.knowmoreformtryagainHandler.bind(this)\n        this.knowmoreformHandler = this.knowmoreformHandler.bind(this)\n    }\n    knowmoreformtryagainHandler(){\n        this.setState({f1Success:false})\n    }\n    knowmoreformHandler(event){\n        event.preventDefault();\n        const target = event.target;\n        const email = target.emailaddress.value;\n\n        let validatedEmail = LoginFormValidation.email(email);\n        if (validatedEmail !== true) {\n            console.log(validatedEmail.error);\n            alert(validatedEmail.reason);\n            // var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n            // if(!validatedEmail.reason)error.reason = 'Invalid email. Please correct the email address entered.';\n            // tmp.push(validatedEmail.reason);\n            // Session.set(\"showErrorDlg\",tmp)\n        }else{\n            ga('send', 'event', 'estateAgentPage', 'knowmoreForm', 'Know more form submitted');\n            Meteor.call('knowMoreRequestReceived',email);\n            this.setState({f1Success:true})\n        }\n    }\n    render() {\n        return (\n            <form className=\"knowmore-form\" onSubmit={this.knowmoreformHandler}>\n                <div className=\"input-group\">\n                    <span className=\"input-group-btn\" style={{zIndex: 0, margin: 0}}>\n                      <a href={FlowRouter.url('advertisewithus')} className=\"btn green-btn\">Advertise your property</a>\n                    </span>\n                    {this.state.f1Success ? (\n                        <p style={{marginBottom: 20, display: 'inline', paddingRight:'15px'}}>Thank you for your interest.</p>\n                    ) : (\n                        <input autoComplete=\"email\" type=\"text\" className=\"form-control emailaddress\" name=\"emailaddress\" placeholder=\"Enter your email.\" style={{paddingLeft: 10, zIndex: 0}} />\n                    )}\n                    {this.state.f1Success ? (\n                        <button className=\"btn transparent-btn knowmoreformtryagain\" type=\"submit\" onClick={this.knowmoreformtryagainHandler}>Add another</button>\n                        ) : (\n                        <span className=\"input-group-btn\" style={{zIndex: 0}}>\n                          <button className=\"btn transparent-btn\" type=\"submit\">Know More!</button>\n                        </span>\n                    )}\n\n                </div>\n            </form>\n        )\n    }\n}","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nexport default class Faqs extends Component {\n    render() {\n        return (\n            <div>\n                <MainLayoutHeader />\n                <div className=\"index\">\n                    <section className=\"contact-bnr\">\n                        <h1>Frequently Asked Questions</h1>\n                    </section>\n                    <section className=\"faq-content\">\n                        <div className=\"container\">\n                            <div className=\"faq-section-hold\">\n                                <h3>About SpotMyCrib</h3>\n                                <div className=\"panel-group\" id=\"accordion1\" role=\"tablist\" aria-multiselectable=\"true\">\n                                    <div className=\"panel panel-default\">\n                                        <a role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion1\" href=\"#collapseOne1\" aria-expanded=\"false\" aria-controls=\"collapseOne\">\n                                            <div className=\"panel-heading\" role=\"tab\" id=\"headingOne\">\n                                                <h4 className=\"panel-title \">\n                                                    <span className=\"green-circle\">1</span>\n                                                    <p className=\"position\">What is SpotMyCrib?</p>\n                                                    <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                </h4>\n                                            </div>\n                                        </a>\n                                        <div id=\"collapseOne1\" className=\"panel-collapse collapse in\" role=\"tabpanel\" aria-labelledby=\"headingOne\">\n                                            <div className=\"panel-body\">\n                                                <p>Spotmycrib is an honest and open platform to provide you an ultimately safe and secure way make your renting experience an incredibly convenient experience for you. We understand your pain of standing in cold long queues and not getting called for. Say goodbye to your worries as spotmycrib is just a click away to bring together the landlord and the renter.</p>\n                                                <p>SpotMyCrib brings renters and property owners together in one&nbsp;transparent platform.</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"panel panel-default\">\n                                        <a className=\"collapsed\" role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion1\" href=\"#collapseTwo1\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\n                                            <div className=\"panel-heading\" role=\"tab\" id=\"headingTwo\">\n                                                <h4 className=\"panel-title\">\n                                                    <span className=\"green-circle\">2</span>\n                                                    <p className=\"position\">Why do you need it?</p>\n                                                    <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                </h4>\n                                            </div>\n                                        </a>\n                                        <div id=\"collapseTwo1\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingTwo\">\n                                            <div className=\"panel-body\">\n                                                <p>Your pain in waiting for the call after a long reference is about to end. This is the platform to view and apply to your future home conveniently using your mobile and get screened sooner. This platform provides you the ideal experience like no other.</p>\n                                                <p>Save your precious time and valuable money! You don’t need to wait for long. Submit your online application along with your personal credentials and make this process much easier and faster. Get your dream house with just a few clicks. Our online rental payment system is reliable and safe to pay your rent once you are in your home. Monthly payment is digital now.\n                                                </p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"panel panel-default\">\n                                        <a className=\"collapsed\" role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion1\" href=\"#collapseThree1\" aria-expanded=\"false\" aria-controls=\"collapseThree\">\n                                            <div className=\"panel-heading\" role=\"tab\" id=\"headingThree\">\n                                                <h4 className=\"panel-title\">\n                                                    <span className=\"green-circle\">3</span>\n                                                    <p className=\"position\">How it works?</p>\n                                                    <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                </h4>\n                                            </div>\n                                        </a>\n                                        <div id=\"collapseThree1\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingThree\">\n                                            <div className=\"panel-body\">\n                                                <p className=\"hidden-xs\">I am a\n                                                    <a className=\"btns transparent-btn mar-left-10\" href={FlowRouter.url('estateagent')}>Landlord</a>\n                                                    <a className=\"btns green-btn scroll1 mar-left-10\" href={FlowRouter.url('howitworks')}>Renter</a>\n                                                </p>\n                                                <p className=\"visible-xs\">\n                                                    Choose from below options<br />\n                                                    <a className=\"btns transparent-btn mar-left-10\" href={FlowRouter.url('estateagent')}>Landlord</a>\n                                                    <a className=\"btns green-btn scroll1 mar-left-10\" href={FlowRouter.url('howitworks')}>Renter</a>\n                                                </p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"faq-section-hold pad-btm-60\">\n                                <h3>Estate Agents/Landlords/Property Owners</h3>\n                                <div className=\"panel-group agent-panel-group\" id=\"accordion\" role=\"tablist\" aria-multiselectable=\"true\">\n                                    <div className=\"panel panel-default\">\n                                        <a role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseOne\" aria-expanded=\"false\" aria-controls=\"collapseOne\">\n                                            <div className=\"panel-heading\" role=\"tab\" id=\"headingOne\">\n                                                <h4 className=\"panel-title \">\n                                                    <span className=\"green-circle\">1</span>\n                                                    <p className=\"position\">It is my understanding that current legislation will not allow for bidding that exceeds the permitted rent amount. </p>\n                                                    <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                </h4>\n                                            </div>\n                                        </a>\n                                        <div id=\"collapseOne\" className=\"panel-collapse collapse in\" role=\"tabpanel\" aria-labelledby=\"headingOne\">\n                                            <div className=\"panel-body\">\n                                                <ul>\n                                                    <li>We have an option to disable the bidding and have done so.</li>\n                                                    <li>We have contacted the RTB: Residential Tenancies Board in Ireland (in writing) and asked them if a tenant offers more rent and a landlord agrees to it - is that legal. They confirmed it is legal if both sides agree to it.</li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"panel panel-default\">\n                                        <a role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseOne\">\n                                            <div className=\"panel-heading\" role=\"tab\" id=\"headingOne\">\n                                                <h4 className=\"panel-title \">\n                                                    <span className=\"green-circle\">2</span>\n                                                    <p className=\"position\">What would the knock effect be should there be arrears, can warning letters be sent? etc</p>\n                                                    <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                </h4>\n                                            </div>\n                                        </a>\n                                        <div id=\"collapseTwo\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingOne\">\n                                            <div className=\"panel-body\">\n                                                <ul>\n                                                    <li>We can send warning emails/ reminder emails and report on who are due rents, arrears.</li>                                              <li>SpotMyCrib also remembers the history of a tenants arrears, etc</li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"panel panel-default\">\n                                        <a className=\"collapsed\" role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseThree\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\n                                            <div className=\"panel-heading\" role=\"tab\" id=\"headingTwo\">\n                                                <h4 className=\"panel-title\">\n                                                    <span className=\"green-circle\">3</span>\n                                                    <p className=\"position\">What responsibility is there on the agent, from a Data Protection perspective, If references are sent to a website?</p>\n                                                    <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                </h4>\n                                            </div>\n                                        </a>\n                                        <div id=\"collapseThree\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingTwo\">\n                                            <div className=\"panel-body\">\n                                                <ul>\n                                                    <li>All Data is being held and maintained by Spot My Crib within Europe and the key system ensures the data is being shared within in the terms of the consumer's signup.</li>\n                                                    <li>There is no responsibility on the agent, Users agree to terms of service, privacy when they upload their references. This actively operates within the GDPR (<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/General_Data_Protection_Regulation\"> Data protection Regulation</a>) framework. </li>\n                                                    <li>Customers retain at all times the option to have all of their data removed, inspected or deletion if we're contacted in writing directly or indirectly by the agent on the consumer's behalf.</li>\n                                                    <li>The key system ensures the agent can deal with all Data Protection issues for a renter, speedily and thoroughly within the regulations.</li>\n                                                    <li>Plus we are 100% compliant with data being stored within Europe, all of our data is stored on Amazon Ireland.</li>\n                                                    <li>We also use https encryption, which encrypts all the communication between user and spotmycrib.ie</li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"panel panel-default\">\n                                        <a className=\"collapsed\" role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseFour\" aria-expanded=\"false\" aria-controls=\"collapseThree\">\n                                            <div className=\"panel-heading\" role=\"tab\" id=\"headingThree\">\n                                                <h4 className=\"panel-title\">\n                                                    <span className=\"green-circle\">4</span>\n                                                    <p className=\"position\">Is there a benefit to the references being collect by Spot my crib rather than say our personal emails? </p>\n                                                    <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                </h4>\n                                            </div>\n                                        </a>\n                                        <div id=\"collapseFour\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingThree\">\n                                            <div className=\"panel-body\">\n                                                <p>There are many other advantages as given below. </p>\n                                                <ul>\n                                                    <li>Centralised records, no more going through emails back and forth to gain references.</li>\n                                                    <li>Time tracking applications and sequencing</li>\n                                                    <li>Elimination of duplication.</li>\n                                                    <li>Time-saving - as discussed on our previous meeting, let's say Neptune gets 30 viewings per house and for 100 units, its 3000 viewings - that is 3k digital applications</li>\n                                                    <li>Instant social profile checks - verify users to check if they would they be a good fit for the property.</li>\n                                                    <li>Digital fingerprint background Checks - of all the references</li>\n                                                    <li>Instant salary affordability checks - Check if the tenants can afford the house</li>\n                                                    <li>No more paper to get lose.</li>\n                                                    <li>No longer tied to office - checks can be made from anywhere, any device, laptop/mobile.</li>\n                                                    <li>Customised filters - to choose only the best tenants using an Agent's experience.</li>\n                                                    <li>Set up invites for viewing - only invite selected applicants for the viewing.</li>\n                                                    <li>The key ensures it is a particular property and eliminates confusion for the renter.</li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"panel panel-default\">\n                                        <a className=\"collapsed\" role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseFive\" aria-expanded=\"false\" aria-controls=\"collapseThree\">\n                                            <div className=\"panel-heading\" role=\"tab\" id=\"headingThree\">\n                                                <h4 className=\"panel-title\">\n                                                    <span className=\"green-circle\">5</span>\n                                                    <p className=\"position\">How does someone who Is looking for an Apartment know to go to Spot my Crib?. They will think My Home and Daft. </p>\n                                                    <i className=\"glyphicon glyphicon-menu-down active-arrow\" />\n                                                </h4>\n                                            </div>\n                                        </a>\n                                        <div id=\"collapseFive\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingThree\">\n                                            <div className=\"panel-body\">\n                                                <ul>\n                                                    <li>Tenants can search for the property directly from our home page.</li>\n                                                    <li>A property's link/key is shared either in the ad or with the ad in daft, myhome etc.</li>\n                                                    <li>A property's link/key can also be posted on the Agent's website.</li>\n                                                    <li>Agents can print the key and give a hardcopy of the key to viewers when they visit the property. </li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"container mar-top-30\" style={{textAlign: 'center'}}>\n                                    <p>Learn more</p>\n                                    <a className=\"btns transparent-btn mar-left-10\" href={FlowRouter.url('estateagent')}>I'm a Landlord</a>\n                                    <a className=\"btns green-btn scroll1 mar-left-10\" href={FlowRouter.url('howitworks')}>I'm a Renter</a>\n                                </div>\n                            </div>\n                        </div>{/*container*/}\n                    </section>\n                </div>\n\n                <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n            </div>\n\n        )\n    }\n}","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nexport default class Gdpr extends Component {\n    render() {\n        return (\n            <div>\n                <MainLayoutHeader />\n                <div className=\"index\">\n                    <section className=\"contact-bnr\">\n                        <h1>Data Protection / GDPR</h1>\n                    </section>\n                    <section className=\"faq-content conditions\">\n                        <div className=\"container\">\n                            <div className=\"pad-top-btm-30 for-font\">\n                                <h3>EU General Data Protection Regulation (GDPR)</h3>\n                                <div className>\n                                    <p>\n                                        The EU General Data Protection Regulation (GDPR) will set a new standard for how companies use and protect EU citizens' data. It will take effect from May 2018.\n                                    </p><p>\n                                    At SpotMyCrib, we've been working hard to prepare for GDPR, to ensure that we fulfil its obligations and maintain our transparency about user and customer data and how we use data.\n                                </p><p>\n                                    Here's an overview of GDPR, and how we are preparing for it at SpotMyCrib.\n                                </p>\n                                    <h3>Overview</h3>\n                                    <h4>What is GDPR?</h4>\n                                    <p>The GDPR is a comprehensive European data protection law that provides significant data rights for protecting the privacy of natural persons residing in the EU. SpotMyCrib is committed to ensuring that our platform is GDPR-compliant when the regulation becomes enforceable on May 25, 2018.</p>\n                                    <h4>How is GDPR applicable to SpotMyCrib?</h4>\n                                    <p>We collect data from our users and customers to better serve them. We also take ID proofs, references from our users as a supporting document for their letting application. We respect everyone's personal information, and it makes perfect sense for us to have one privacy policy and set of procedures to protect everyone's interests, including compliance with applicable local laws.</p>\n                                    <h4>What personal information does SpotMyCrib process on behalf of its customers?</h4>\n                                    <ol>\n                                        <li>We collect and maintain personal contact details which includes contact name, job title, email address, telephone number, and company name. If the customer is an individual sole proprietor or unaffiliated with any commercial or non-profit entity, it's possible that additional information such as street address and credit cardholder data is included.</li>\n                                        <li>All customer data, that is, data controlled by our customers which we process according to their instructions, is appropriately classified as Confidential. This confidential data could contain personally-identifiable information about our Customers' End Users, which we cannot identify because it is encrypted and not accessible by SpotMyCrib staff.</li>\n                                        <li>We also collect personal identity information as references to users application to a property. For example passport ID, PPS, resume or other details are collected to help you with your application process.</li>\n                                        <li>More covered on <a href={FlowRouter.url('privacy')}>privacy page</a>.</li>\n                                    </ol>\n                                    <h4>What are Data Controllers and Data Processors?</h4>\n                                    <p>GDPR is designed to ensure protection of the privacy rights of data subjects. Data subjects are people from whom or about whom you collect information in connection with your business and its operations. Your obligations with regard to data subjects and their personal data depend on whether you're considered a controller or a processor under GDPR.</p>\n                                    <ul>\n                                        <li>Data Controllers</li>\n                                    </ul>\n                                    <p>GDPR defines a data controller as \"the natural or legal person, public authority, agency or another body which, alone or jointly with others, determines the purposes and means of the processing of personal data.\" In other words, if your organization processes personal data for your own organization's purposes and needs-not merely as a service provider acting on behalf of another organization-then you are likely to be a data controller.</p>\n                                    <p>SpotMyCrib is a Data Controller for our direct customers.</p>\n                                    <ul>\n                                        <li>Data Processor</li>\n                                    </ul>\n                                    <p>Businesses or organizations that process personal data solely on behalf of, and as directed by, data controllers are data processors. In other words, when a data controller outsources a data processing function to another entity, that other entity is generally a data processor.</p>\n                                    <p>For purposes of the GDPR, SpotMyCrib is also considered a Data Processor for our customers' end-users.</p>\n                                    <h4>What steps is SpotMyCrib taking to ensure GDPR compliance?</h4>\n                                    <ol>\n                                        <li>We conducted an internal review of all data our data points, how its collected, stored and how it's being used.</li>\n                                        <li>We conducted an internal Data Protection Impact Assessment (DPIA) to discover what information we collect, and how it's being used.</li>\n                                        <li>We will provide users and customers with resources and helpful information about privacy and GDPR, including whitepapers and blog posts.</li>\n                                        <li>We will announce an update of our Privacy Policy for GDPR.</li>\n                                    </ol>\n                                    <h3>Our Customers and the GDPR</h3>\n                                    <h4>As a SpotMyCrib customer, what are my main responsibilities under the GDPR?</h4>\n                                    <p>SpotMyCrib customers are responsible for protecting the personal information of their end users, as Data Controllers and/or Data Exporters.</p>\n                                    <p>Your responsibilities under GDPR will depend on the nature of your business and your personal data processing activities.  Nonetheless, broadly speaking, GDPR requires that personal data be:</p>\n                                    <ol>\n                                        <li>Processed lawfully, fairly and in a transparent manner,</li>\n                                        <li>Collected for specified, explicit and legitimate purposes and not further processed in a manner incompatible with those purposes,</li>\n                                        <li>Adequate, relevant, and limited to what is necessary for achieving those purposes,</li>\n                                        <li>Accurate and kept up to date</li>\n                                        <li>Stored no longer than necessary to achieve the purposes for which it was collected, and</li>\n                                        <li>Properly secured against accidental loss, destruction or damage.</li>\n                                    </ol>\n                                    <p>It is our customer's responsibility to obtain the EXPRESS CONSENT of individual Data Subjects (for example, tenants, applications) to transfer their Personal Data to SpotMyCrib as a Data Processor and/or Data Importer. SpotMyCrib processes all such information as Confidential Data in accordance with the terms of our Data Processing Agreement and/or this Privacy Policy.</p>\n                                    <h4>What actions does our customers need to take?</h4>\n                                    <ol>\n                                        <li>In addition to seeking independent legal advice regarding your obligations under the GDPR, here are some tips to get you started:</li>\n                                        <li>Educate yourself on the provisions of the <a href=\"https://gdpr-info.eu/\" target=\"_blank\">GDPR</a> to understand how they may differ from your existing data protection obligations and practices.</li>\n                                        <li>If you don't have dedicated data privacy or security personnel in-house, consider appointing a directly responsible individual (DRI) or small team to manage your company's GDPR compliance efforts.</li>\n                                        <li>Create an up-to-date inventory of personal data that you collect and manage.</li>\n                                        <li>Create a list of vendors who you send data to (analytics tools, CRMs, email tools, etc.), and understand whether they are a controller or a processor. Then, determine what their obligations are, and make sure they have a plan to be ready for the GDPR.</li>\n                                        <li>Develop a plan for obtaining and managing <a href=\"https://gdpr-info.eu/art-7-gdpr/\" target=\"_blank\">consent</a> in accordance with the GDPR or establish other lawful grounds for using personal data.</li>\n                                        <li>Determine if your company needs to appoint a <a href=\"https://gdpr-info.eu/art-37-gdpr/\" target=\"_blank\">Data Protection Officer</a> (DPO). For public authorities, and companies processing large amounts of special categories of personal data, the appointment of a <a href=\"https://secure.edps.europa.eu/EDPSWEB/edps/EDPS/DPO\" target=\"_blank\">data protection officer</a> (DPO) is mandatory. Organizations will be expected to hire someone who has real expertise and knowledge of the latest laws and practices.</li>\n                                        <li>Becoming GDPR compliant takes time, and will require you to rethink how you collect and manage customer data. If you have any questions about the GDPR or want to learn how SpotMyCrib can help you prepare, please let us know.</li>\n                                    </ol>\n                                    <h4>What are the penalties for non-compliance with GDPR?</h4>\n                                    <p>Depending on the nature of the violation, data protection authorities may issue fines or penalties for non-compliance up to € 20 million or 4% of global revenue.</p>\n                                    <h4>Where can I get more information about GDPR?</h4>\n                                    <ol>\n                                        <li>From the original source: The Council of the European Union where the legislation was approved. <a href=\"https://publications.europa.eu/en/publication-detail/-/publication/c7d157e6-fccd-11e7-b8f5-01aa75ed71a1/language-en/format-PDF/source-62885347\" target=\"_blank\">https://publications.europa.eu/en/publication-detail/-/publication/c7d157e6-fccd-11e7-b8f5-01aa75ed71a1/language-en/format-PDF/source-62885347</a></li>\n                                        <li>For more general GDPR readiness portals, we suggest:&nbsp;<a href=\"https://www.eugdpr.org/\" target=\"_blank\">https://www.eugdpr.org/</a>\n                                            <ul>\n                                                <li>GDPR FAQs: <a href=\"https://www.eugdpr.org/gdpr-faqs.html\" target=\"_blank\">https://www.eugdpr.org/gdpr-faqs.html</a></li>\n                                            </ul>\n                                        </li>\n                                        <li>From leading Privacy advocacy organizations:\n                                            <ol>\n                                                <li><a href=\"https://iapp.org/resources/topics/eu-gdpr/\" target=\"_blank\">https://iapp.org/resources/topics/eu-gdpr/</a></li>\n                                                <li><a href=\"https://www.epic.org/international/eu_general_data_protection_reg.html\" target=\"_blank\">https://www.epic.org/international/eu_general_data_protection_reg.html</a></li>\n                                                <li><a href=\"http://www.truste.com\" target=\"_blank\">www.truste.com</a></li>\n                                            </ol>\n                                        </li>\n                                    </ol>\n                                    <p>Have more questions? <a href={FlowRouter.url('contactus')} target=\"_blank\">Submit a request</a></p>\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                </div>\n                <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n            </div>\n\n        )\n    }\n}","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nexport default class HowItWorks extends Component {\n    render() {\n        return (\n            <div>\n                <MainLayoutHeader />\n                <div className=\"index\">\n                    <section className=\"about-bnr\">\n                        <h1>How it Works</h1>\n                    </section>\n                    <section id=\"how-works\" className=\"sec-holder how-it-works\">\n                        <div className=\"container\">\n                            {/*<h2>How it works</h2>*/}\n                            {/*<span class=\"bottom-line\"></span>*/}\n                            {/*<div class=\"\">*/}\n                            {/*<a id=\"video\" class=\"oval-btn green-btn cursor\"><span class=\"fa fa-play-circle-o play-icon\"></span>Watch the video</a>*/}\n                            {/*</div>*/}\n                            <ul className=\"mar-top-30\">\n                                <li>\n                                    <h6 className=\"pad-btm-30\">Search Property</h6>\n                                    <img src={cdnPath(\"/images/how-it-works/search-and-find-property-apartment-flat.png\")} alt=\"Search and find your rental property\" className=\"pad-btm-30\" />\n                                    <p>\n                                    Search and find an apartment/house you like from our <a href={FlowRouter.url('home')+'#searchform'}>browse form</a>.\nOr choose your county from our <a href={FlowRouter.url('home')+'#homeLinks'}>county list</a> in our home page.\n                                    </p>\n                                </li>\n                                <li>\n                                    <h6 className=\"pad-btm-30\">Set Your Rent</h6>\n                                    <img src={cdnPath(\"/images/how-it-works/set-your-rent-apartment.png\")} alt=\"Apply and set your rent for Apartment\" className=\"pad-btm-30\" />\n                                    <p>Make your offer for the house and click apply. Remember to upload all your references in your profile.</p>\n                                </li>\n                                <li>\n                                    <h6 className=\"pad-btm-30\">Confirm your Home</h6>\n                                    <img src={cdnPath(\"/images/how-it-works/confirm-your-rent-in-dublin.png\")} alt=\"Confirm your rental\" className=\"pad-btm-30\" />\n                                    <p>Landlord chooses a tenant based on your references and your offer. If you are chosen, you would receive a confirmation email. </p>\n                                </li>\n                            </ul>\n                        </div>\n                        <div className=\"container mar-top-30\">\n                            <a href={FlowRouter.url('faqs')} className=\"green-btn btns \" type=\"button\">Learn more</a>\n                        </div>\n                    </section>\n                </div>\n                <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n            </div>\n\n        )\n    }\n}","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nexport default class Privacy extends Component {\n    render() {\n        return (\n            <div>\n                <MainLayoutHeader />\n                <div className=\"index\">\n                    <section className=\"contact-bnr\">\n                        <h1>Privacy Policy</h1>\n                    </section>\n                    <section className=\"faq-content conditions\">\n                        <div className=\"container\">\n                            <div className=\"pad-top-btm-30 for-font\">\n                                {/*<h3>SpotMyCrib Terms &amp; Conditions</h3>*/}\n                                <div className=\"color-grey\">\n                                    <div className=\"innerText\">Your privacy is important to us. This privacy policy explains what personal data SpotMyCrib collects from you, through our interactions with you and through our products, and how we use that data.\n                                        <br /></div>\n                                    <span id=\"infoCo\" /><br />\n                                    <div className=\"innerText\">It is compiled to better serve those who are concerned with how their 'Personally Identifiable Information' (PII) is being used online. PII, as described in privacy law and information security, is information that can be used on its own or with other information to identify, contact, or locate a single person, or to identify an individual in context. Please read our privacy policy carefully to get a clear understanding of how we collect, use, protect or otherwise handle your Personally Identifiable Information in accordance with our website.<br /></div>\n                                    <span id=\"infoCo\" /><br />\n                                    <div className=\"color-black\"><strong>What personal information do we collect from the people that visit website?</strong></div>\n                                    <br />\n                                    <ol>\n                                        <li>We collect and maintain personal contact details which includes contact name, job title, email address, telephone number, and company name. If the customer is an individual sole proprietor or unaffiliated with any commercial or non-profit entity, it's possible that additional information such as street address and credit cardholder data is included.</li>\n                                        <li>All customer data, that is, data controlled by our customers which we process according to their instructions, is appropriately classified as Confidential. This confidential data could contain personally-identifiable information about our Customers' End Users, which we cannot identify because it is encrypted and not accessible by SpotMyCrib staff.</li>\n                                        <li>We also collect personal identity information as references to users application to a property. For example passport ID, PPS, resume or other details are collected to help you with your application process.</li>\n                                        <li>More covered on <a href={FlowRouter.url('gdpr')}>Data Protection</a> page.</li>\n                                    </ol>\n                                    <br />\n                                    <div className=\"color-black\"><strong>When do we collect information?</strong></div>\n                                    <br />\n                                    <div className=\"innerText\">We collect information from you when you register on our site, applying for a letting, upload references to your profile, browse through the site, search for properties, fill out a form or enter information on our site.</div>\n                                    <br /> <span id=\"infoUs\" /><br />\n                                    <div className=\"color-black\"><strong>How do we use your information? </strong></div>\n                                    <br />\n                                    <div className=\"innerText\"> We may use the information we collect from you when you register, apply for a letting, sign up for our newsletter, respond to a survey or marketing communication, surf the website, or use certain other site features in the following ways:<br /><br /></div>\n                                    <div className=\"color-black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> As a reference to your letting application process, your references and personal info will only be shared with the landlord or the agents who posted the property. Your information will not be shared with anyone else and will be kept confidential. </div>\n                                    <div className=\"innerText\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> To personalize your experience and to allow us to deliver the type of content and product offerings in which you are most interested.</div>\n                                    <div className=\"innerText\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> To improve our website in order to better serve you.</div>\n                                    <div className=\"innerText\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> To quickly process your transactions.</div>\n                                    <div className=\"innerText\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> To send periodic emails regarding your rental application, profile, property alerts or other similar services.</div>\n                                    <div className=\"innerText\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> To follow up with them after correspondence (live chat, email or phone inquiries)</div>\n                                    <span id=\"infoPro\" /><br />\n                                    <div className=\"color-black\"><strong>How do we protect your information?</strong></div>\n                                    <br />\n                                    <div className=\"innerText\">We do not use vulnerability scanning and/or scanning to PCI standards.</div>\n                                    <div className=\"innerText\">We only provide articles and information. We never ask for credit card numbers.</div>\n                                    <div className=\"innerText\">We do not use Malware Scanning.<br /><br /></div>\n                                    <div className=\"innerText\">Your personal information is contained behind secured networks and is only accessible by a limited number of persons who have special access rights to such systems, and are required to keep the information confidential. In addition, all sensitive/credit information you supply is encrypted via Secure Socket Layer (SSL) technology. </div>\n                                    <br />\n                                    <div className=\"innerText\">We implement a variety of security measures when a user enters, submits, or accesses their information to maintain the safety of your personal information.</div>\n                                    {/*<br>*/}\n                                    {/*<div class='innerText'>For your convenience we may store your credit card information kept for more than 60 days in order to expedite future orders, and to automate the billing process.</div>*/}\n                                    <br /><span id=\"coUs\" /><br />\n                                    <div className=\"color-black\"><strong>How to Access &amp; Control Your Personal Data?</strong></div>\n                                    <br />\n                                    <div className=\"innerText\">You can view, edit, or delete your personal data online for your profile. You can always choose whether you wish to receive promotional email, SMS messages, telephone calls and postal mail from SpotMyCrib. You can also opt out from receiving interest-based advertising from SpotMyCrib by clicking on unsubscribe from our emails or by writing to us at <a href=\"mailto:support@spotmycrib.com\">support@spotmycrib.com</a> .</div><br />\n                                    <br /><span id=\"coUs\" /><br />\n                                    <div className=\"color-black\"><strong>Do we use 'cookies'?</strong></div>\n                                    <br />\n                                    <div className=\"innerText\">Yes. Cookies are small files that a site or its service provider transfers to your computer's hard drive through your Web browser (if you allow) that enables the site's or service provider's systems to recognize your browser and capture and remember certain information. For instance, we use cookies to help us remember and process the items in your shopping cart. They are also used to help us understand your preferences based on previous or current site activity, which enables us to provide you with improved services. We also use cookies to help us compile aggregate data about site traffic and site interaction so that we can offer better site experiences and tools in the future.</div>\n                                    <div className=\"innerText\"><br /><strong>We use cookies to:</strong></div>\n                                    <div className=\"innerText\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> Understand and save user's preferences for future visits.</div>\n                                    <div className=\"innerText\"><br />You can choose to have your computer warn you each time a cookie is being sent, or you can choose to turn off all cookies. You do this through your browser settings. Since browser is a little different, look at your browser's Help Menu to learn the correct way to modify your cookies.<br /></div>\n                                    <br />\n                                    <div className=\"innerText\">If you turn cookies off, Some of the features that make your site experience more efficient may not function properly.It won't affect the user's experience that make your site experience more efficient and may not function properly.</div><br />\n                                    <div className=\"innerText\">More information about out cookies are in our <a href={FlowRouter.url('cookiepolicy')}>Cookie Policy</a> page.</div>\n                                    <br /><span id=\"trDi\" /><br />\n                                    <div className=\"color-black\"><strong>Third-party disclosure</strong></div>\n                                    <br />\n                                    <div className=\"innerText\"><strong>Do we disclose the information we collect to Third-Parties?</strong></div>\n                                    <div className=\"innerText\">\n                                        We sell,trade, or otherwise transfer to outside parties your name, address,city,town, any form or online contact identifier email, name of chat account etc., screen name or user names, phone number\n                                        <div className=\"innerText\"><br /><strong>We engage in this practice because,:</strong></div>\n                                        <div className=\"innerText\">Users references and personal details uploaded in profile will only be shared with landlord or agents, as a proof of your application. </div>\n                                        Personally Identifiable Information.\n                                    </div>\n                                    <br /><span id=\"trLi\" /><br />\n                                    <div className=\"color-black\"><strong>Third-party links</strong></div>\n                                    <br />\n                                    <div className=\"innerText\">Occasionally, at our discretion, we may include or offer third-party products or services on our website. These third-party sites have separate and independent privacy policies. We therefore have no responsibility or liability for the content and activities of these linked sites. Nonetheless, we seek to protect the integrity of our site and welcome any feedback about these sites.</div>\n                                    <span id=\"gooAd\" /><br />\n                                    <div className=\"blueText\"><strong>Google</strong></div>\n                                    <br />\n                                    <div className=\"innerText\">Google's advertising requirements can be summed up by Google's Advertising Principles. They are put in place to provide a positive experience for users. https://support.google.com/adwordspolicy/answer/1316548?hl=en <br /><br /></div>\n                                    <div className=\"innerText\">We use Google AdSense Advertising on our website.</div>\n                                    <div className=\"innerText\"><br />Google, as a third-party vendor, uses cookies to serve ads on our site. Google's use of the DART cookie enables it to serve ads to our users based on previous visits to our site and other sites on the Internet. Users may opt-out of the use of the DART cookie by visiting the Google Ad and Content Network privacy policy.<br /></div>\n                                    <div className=\"innerText\"><br /><strong>We have implemented the following:</strong></div>\n                                    <br />\n                                    <div className=\"innerText\">We, along with third-party vendors such as Google use first-party cookies (such as the Google Analytics cookies) and third-party cookies (such as the DoubleClick cookie) or other third-party identifiers together to compile data regarding user interactions with ad impressions and other ad service functions as they relate to our website. </div>\n                                    <div className=\"innerText\"><br />\n                                        <strong>Opting out:</strong>\n                                        <br />\n                                        Users can set preferences for how Google advertises to you using the Google Ad Settings page. Alternatively, you can opt out by visiting the Network Advertising Initiative Opt Out page or by using the Google Analytics Opt Out Browser add on.\n                                    </div>\n                                    <span id=\"calOppa\" /><br />\n                                    <div className=\"blueText\"><strong>California Online Privacy Protection Act</strong></div>\n                                    <br />\n                                    <div className=\"innerText\">CalOPPA is the first state law in the nation to require commercial websites and online services to post a privacy policy.  The law's reach stretches well beyond California to require any person or company in the United States (and conceivably the world) that operates websites collecting Personally Identifiable Information from California consumers to post a conspicuous privacy policy on its website stating exactly the information being collected and those individuals or companies with whom it is being shared. -  See more at: http://consumercal.org/california-online-privacy-protection-act-caloppa/#sthash.0FdRbT51.dpuf<br /></div>\n                                    <div className=\"innerText\"><br /><strong>According to CalOPPA, we agree to the following:</strong><br /></div>\n                                    <div className=\"innerText\">Users can visit our site anonymously.</div>\n                                    <div className=\"innerText\">Once this privacy policy is created, we will add a link to it on our home page or as a minimum, on the first significant page after entering our website.<br /></div>\n                                    <div className=\"innerText\">Our Privacy Policy link includes the word 'Privacy' and can easily be found on the page specified above.</div>\n                                    <div className=\"innerText\"><br />You will be notified of any Privacy Policy changes:</div>\n                                    <div className=\"innerText\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> On our Privacy Policy Page<br /></div>\n                                    <div className=\"innerText\">Can change your personal information:</div>\n                                    <div className=\"innerText\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> By logging in to your account</div>\n                                    <div className=\"innerText\"><br /><strong>How does our site handle Do Not Track signals?</strong><br /></div>\n                                    <div className=\"innerText\">We honor Do Not Track signals and Do Not Track, plant cookies, or use advertising when a Do Not Track (DNT) browser mechanism is in place. </div>\n                                    <div className=\"innerText\"><br /><strong>Does our site allow third-party behavioral tracking?</strong><br /></div>\n                                    <div className=\"innerText\">It's also important to note that we do not allow third-party behavioral tracking</div>\n                                    <span id=\"coppAct\" /><br />\n                                    <div className=\"blueText\"><strong>COPPA (Children Online Privacy Protection Act)</strong></div>\n                                    <br />\n                                    <div className=\"innerText\">When it comes to the collection of personal information from children under the age of 13 years old, the Children's Online Privacy Protection Act (COPPA) puts parents in control.  The Federal Trade Commission, United States' consumer protection agency, enforces the COPPA Rule, which spells out what operators of websites and online services must do to protect children's privacy and safety online.<br /><br /></div>\n                                    <div className=\"innerText\">We do not specifically market to children under the age of 13 years old.</div>\n                                    <div className=\"innerText\">Do we let third-parties, including ad networks or plug-ins collect PII from children under 13?</div>\n                                    <span id=\"ftcFip\" /><br />\n                                    <div className=\"blueText\"><strong>Fair Information Practices</strong></div>\n                                    <br />\n                                    <div className=\"innerText\">The Fair Information Practices Principles form the backbone of privacy law in the United States and the concepts they include have played a significant role in the development of data protection laws around the globe. Understanding the Fair Information Practice Principles and how they should be implemented is critical to comply with the various privacy laws that protect personal information.<br /><br /></div>\n                                    <div className=\"innerText\"><strong>In order to be in line with Fair Information Practices we will take the following responsive action, should a data breach occur:</strong></div>\n                                    <div className=\"innerText\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> Within 7 business days</div>\n                                    <div className=\"innerText\">We will notify the users via in-site notification</div>\n                                    <div className=\"innerText\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>•</strong> Within 7 business days</div>\n                                    <div className=\"innerText\"><br />We also agree to the Individual Redress Principle which requires that individuals have the right to legally pursue enforceable rights against data collectors and processors who fail to adhere to the law. This principle requires not only that individuals have enforceable rights against data users, but also that individuals have recourse to courts or government agencies to investigate and/or prosecute non-compliance by data processors.</div>\n                                    <br />\n                                    <p>Have more questions? <a href={FlowRouter.url('contactus')}>Submit a request</a></p>\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                </div>\n\n                <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n            </div>\n\n        )\n    }\n}","import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport MainLayoutFooter from '../layout/MainLayoutFooter.jsx'\nimport MainLayoutHeader from '../layout/MainLayoutHeader.jsx'\n\nexport default class Terms extends Component {\n    render() {\n        return (\n            <div>\n                <MainLayoutHeader />\n                <div className=\"index\">\n                    <section className=\"contact-bnr\">\n                        <h1>Terms of Service</h1>\n                    </section>\n                    <section className=\"faq-content conditions\">\n                        <div className=\"container\">\n                            <div className=\"pad-top-btm-30 for-font\">\n                                <div className=\"color-grey\">\n                                    <h3>1. Terms</h3>\n                                    <p>By accessing the website at <a href=\"https://www.spotmycrib.ie/\">https://www.spotmycrib.ie/</a>, you are agreeing to be bound by these terms of service, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws. If you do not agree with any of these terms, you are prohibited from using or accessing this site. The materials contained in this website are protected by applicable copyright and trademark law.</p>\n                                    <h3>2. Use License</h3>\n                                    <ol type=\"a\">\n                                        <li>Permission is granted to temporarily download one copy of the materials (information or software) on SpotMyCrib.ie's website for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:\n                                            <ol type=\"i\">\n                                                <li>modify or copy the materials;</li>\n                                                <li>use the materials for any commercial purpose, or for any public display (commercial or non-commercial);</li>\n                                                <li>attempt to decompile or reverse engineer any software contained on SpotMyCrib.ie's website;</li>\n                                                <li>remove any copyright or other proprietary notations from the materials; or</li>\n                                                <li>transfer the materials to another person or \"mirror\" the materials on any other server.</li>\n                                            </ol>\n                                        </li>\n                                        <li>This license shall automatically terminate if you violate any of these restrictions and may be terminated by SpotMyCrib.ie at any time. Upon terminating your viewing of these materials or upon the termination of this license, you must destroy any downloaded materials in your possession whether in electronic or printed format.</li>\n                                    </ol>\n                                    <h3>3. Disclaimer</h3>\n                                    <ol type=\"a\">\n                                        <li>The materials on SpotMyCrib.ie's website are provided on an 'as is' basis. SpotMyCrib.ie makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.</li>\n                                        <li>Further, SpotMyCrib.ie does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its website or otherwise relating to such materials or on any sites linked to this site.</li>\n                                    </ol>\n                                    <h3>4. Limitations</h3>\n                                    <p>In no event shall SpotMyCrib.ie or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on SpotMyCrib.ie's website, even if SpotMyCrib.ie or a SpotMyCrib.ie authorized representative has been notified orally or in writing of the possibility of such damage. Because some jurisdictions do not allow limitations on implied warranties, or limitations of liability for consequential or incidental damages, these limitations may not apply to you.</p>\n                                    <h3>5. Accuracy of materials</h3>\n                                    <p>The materials appearing on SpotMyCrib.ie website could include technical, typographical, or photographic errors. SpotMyCrib.ie does not warrant that any of the materials on its website are accurate, complete or current. SpotMyCrib.ie may make changes to the materials contained on its website at any time without notice. However SpotMyCrib.ie does not make any commitment to update the materials.</p>\n                                    <h3>6. Links</h3>\n                                    <p>SpotMyCrib.ie has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by SpotMyCrib.ie of the site. Use of any such linked website is at the user's own risk.</p>\n                                    <h3>7. Modifications</h3>\n                                    <p>SpotMyCrib.ie may revise these terms of service for its website at any time without notice. By using this website you are agreeing to be bound by the then current version of these terms of service.</p>\n                                    <h3>8. Governing Law</h3>\n                                    <p>These terms and conditions are governed by and construed in accordance with the laws of Dublin and you irrevocably submit to the exclusive jurisdiction of the courts in that State or location.</p>\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                </div>\n                <footer className=\"footer-default\"><MainLayoutFooter /></footer>\n            </div>\n\n        )\n    }\n}","/*\n * This is an example of a customized template.\n * This footer replaces the \"layoutFooter\" template defined in the reactioncommerce:core package.\n * https://github.com/reactioncommerce/reaction-core/blob/master/client/templates/layout/footer/footer.html\n */\nimport { Template } from 'meteor/templating';\nimport './footer.html';\n\nTemplate.footerExtended.helpers({\n    RouteB:function (slug) {\n        return FlowRouter.url('b',{slug:slug});\n    }\n  // customSocialSettings: function() {\n  //   return {\n  //     placement: 'footer',\n  //     faClass: 'square',\n  //     faSize: 'fa-3x',\n  //     appsOrder: ['facebook', 'twitter', 'pinterest', 'googleplus']\n  //   };\n  // }\n});\n\n// Template.footerExtended.replaces(\"layoutFooter\");\n// Template.footerExtended.onRendered(function(){\n//  $(\"#video1\").click(function () {\n//     $.fancybox({\n//       'padding': 0,\n//       'href': '#video-div1',\n//     });\n//   });\n//  });\n","/**\n * Created by srikanth681 on 18/02/16.\n */\nimport {Template} from \"meteor/templating\";\nimport \"./header.html\";\n\n\nTemplate.headerExtended.onRendered(function(){\n\n    $.getScript(cdnPath('/js/bootstrap.js'), function(){\n        // console.log(\"Bootstrap loaded\")\n    });\n    // $.getScript(cdnPath('//static.filestackapi.com/filestack-js/1.x.x/filestack.min.js'), function(){\n    //     console.log(\"Filestack loaded\")\n    // });\n\n    $.getScript('plugins/fancybox/js/jquery.fancybox.js', function(){\n        // script should be loaded and do something with it.\n        $('.fancybox').fancybox({\n            scrolling:'no',\n            helpers: {\n                overlay: {\n                    locked: true\n                }\n            }\n        })\n    });\n    setTimeout(delayedFunctions,1500)\n})\nisMobileMenuEventAttached = false;\nfunction delayedFunctions() {\n    // $('.xs-menu-icon').click(function(){\n    //     $('.xs-menu').addClass('slide-right');\n    // });\n    // $('.xs-menu-close-icon, .xs-menu a').click(function(){\n    //     $('.xs-menu').removeClass('slide-right');\n    // });\n\n    // if(!isMobileMenuEventAttached) {\n        $(document).unbind('click').bind('click',function (e) {\n            if (!$('.xs-menu').hasClass('slide-right')) {//Its not open\n                if ($(e.target).closest(\".xs-menu-icon-master\").length > 0) {\n                    if(FlowRouter.current().route.name=='home')\n                        $('.carousel-indicators').addClass('carousel-indicatorsLowZindex');\n                    $('.xs-menu').addClass('slide-right');\n                    return true;\n                } else return true\n            } else {//Its open\n                if ($(e.target).closest(\".xs-menu-close-icon .xs-close, .xs-menu a\").length > 0 || $(e.target).closest(\".slide-right\").length < 1) {\n                    $('.xs-menu').removeClass('slide-right')\n                    if(FlowRouter.current().route.name=='home')\n                        setTimeout(function(){\n                            if(FlowRouter.current().route.name=='home') $('.carousel-indicators').removeClass('carousel-indicatorsLowZindex');\n                        },250);\n                    return true;\n                }\n            }\n        });\n        // isMobileMenuEventAttached = true;\n    // }\n\n}\nTemplate.headerExtended.onCreated(function(){\n    Session.set('showLoginDialog',false)\n    Session.set('showForgotForm',false)\n    Session.set('showLoginDialog',false)\n    Session.set('showLoginSignupFancyBoxDialog',false)\n    Session.set('showAddPropertyHeaderTemplate',false)\n    Session.set('showAddPropertyHeaderFancyBoxDialog',false)\n    if( !Session.get(\"showErrorDlg\") ) Session.set(\"showErrorDlg\",[]);\n})\nTemplate.headerExtended.helpers({\n    loginFlowCompleteManager:function(){\n        if(Session.get('loginFlowComplete')){\n            setTimeout(function(){\n                Session.set('loginFlowComplete',undefined);\n            },1000)\n        }\n    },\n    errorModel: function(){\n        var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n        if(tmp)\n            if(tmp.length){\n                var timeoutVal = 0;\n                if(!$.fancybox) timeoutVal = 3000;\n                setTimeout(function () {\n                    $.fancybox({\n                        'padding': 0,\n                        'href': '#errorModel',\n                        // afterShow:function(template){\n                        //     setTimeout(function () {\n                        //         $.fancybox.close();\n                        //     },3000)\n                        // },\n                        afterClose:function(){\n                            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                            tmp.shift();\n                            Session.set(\"showErrorDlg\",tmp)\n                        }\n                    })\n                },timeoutVal)\n\n            }\n        return Session.get(\"showErrorDlg\");\n    },\n    showAddPropertyHeaderTemplate: function(){\n\n        if(Session.get('showAddPropertyHeaderFancyBoxDialog') ){\n            showAddPropertyHeaderPopup()\n        }else{\n            if($)\n                if($.fancybox)\n                    $.fancybox.close();\n        }\n\n        return Session.get('showAddPropertyHeaderTemplate');\n    },\n    showLoginDialog: function(){//Reason to create this method is for the lazyloading of signIn and signUp templates\n\n        if(Session.get('showLoginSignupFancyBoxDialog') ){\n            showLoginPopup()\n        }else{\n            if($)\n                if($.fancybox)\n                    $.fancybox.close();\n        }\n\n        return Session.get('showLoginDialog');\n    },\n    isAgentRole:function () {\n        var user = Meteor.user();\n        if(!user)return false;\n        if( user.profile.role == 'agent'){return true;}\n        return false;\n    },\n    showCookieConsent: function(){\n        return !parseInt(readCookie('cookieConsent'));\n        // var userConfig = Session.get('userConfig');\n        // if(!userConfig) return false;\n        // return userConfig.cookieConsent;\n    }\n})\nTemplate.headerExtended.events({\n    \"click .showLoginDialog\": function (event, template) {\n        showLoginDialog();\n    },\n    \"click .showSignupDialog\": function (event, template) {\n        showSignupDialog();\n    },\n    \"click .logoutBtn\":function () {\n        Meteor.logout(function(err){\n            if (err) {\n                throw new Meteor.Error(\"Logout failed\");\n            }\n        })\n    },\n    \"click .addPropertyHeaderBtn\":function(){\n        FlowRouter.go('advertisewithus')\n        console.log(\"added add property form\");\n        // Session.set('showAddPropertyHeaderTemplate',true)\n        //        Session.set('showAddPropertyHeaderFancyBoxDialog',true)\n    },\n    \"click .profileBtn\":function () {\n        FlowRouter.go('account/profile');\n    },\n    \"click .cookieConsentBtn\":function () {\n        createCookie('cookieConsent',1,365);\n        $('.cookieConsentArea').remove();\n        // var userConfig = Session.get('userConfig');\n        //\n        // if(!userConfig){\n        //     Session.set('userConfig',{cookieConsent:1})\n        // }else if(!userConfig.cookieConsent){\n        //     Session.set('userConfig',{cookieConsent:1})\n        // }\n    }\n})\n\nfunction showLoginDialog(){\n    Session.set('showForgotForm',false)\n    Session.set('showSignupForm',false)\n    Session.set('showLoginSignupFancyBoxDialog',true)\n    Session.set('showLoginDialog',true)\n}\nfunction showSignupDialog(){\n    Session.set('showForgotForm',false)\n    Session.set('showSignupForm',true)\n    Session.set('showLoginSignupFancyBoxDialog',true)\n    Session.set('showLoginDialog',true)\n}\nfunction showLoginPopup(){\n    $.fancybox({\n        'padding': 0,\n        'href': '#signin-div',\n\n        afterClose:function(template){\n            console.log(template);\n            //template.showLoginDialog.set(false);\n            Session.set('isLandLordMode',false)\n            Session.set('showLoginDialog',false)\n            Session.set('showLoginSignupFancyBoxDialog',false)\n\n        }\n    })\n}\nfunction showAddPropertyHeaderPopup(){\n    $.fancybox({\n        'padding': 0,\n        'href': '#addPropertyHeader-div',\n\n        afterClose:function(template){\n            //console.log(template);\n            Session.set('showAddPropertyHeaderTemplate',false)\n            Session.set('showAddPropertyHeaderFancyBoxDialog',false)\n\n        }\n    })\n}\nfunction createCookie(name,value,days) {\n    var expires = \"\";\n    if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + (days*24*60*60*1000));\n        expires = \"; expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + value + expires + \"; path=/\";\n}\nfunction readCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(';');\n    for(var i=0;i < ca.length;i++) {\n        var c = ca[i];\n        while (c.charAt(0)==' ') c = c.substring(1,c.length);\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\n    }\n    return null;\n}\nfunction eraseCookie(name) {\n    createCookie(name,\"\",-1);\n}\n","import \"./layout.html\";\nimport \"./header.js\";\nimport \"./footer.js\";\nif(Meteor.isClient){\n\n\n\n    Meteor.startup(function () {\n        Blaze._allowJavascriptUrls();\n    })\n}","/**\n * Created by njanjanam on 11/05/2017.\n */\nimport \"./imageView.html\";\nimport \"./editProperty.html\";\nimport './shared.js';\nimport filestack from 'filestack-js';\nconst apikey = 'AIPACLEs7ShGwwPh6fMTxz';\nconst fsClient = filestack.init(apikey,{\n    policy: 'eyJleHBpcnkiOjE4NjE5MjAwMDAsImNhbGwiOlsicGljayIsInJlYWQiLCJzdGF0Iiwid3JpdGUiLCJ3cml0ZVVybCIsInN0b3JlIiwiY29udmVydCIsInJlbW92ZSIsImV4aWYiXX0=',\n    signature: '465e8652c5cef95f44e5858e09d430abea855d98deaeb7425558f2c80d0f4f57'\n});\n// import SimpleSchema from \"simpl-schema\";\n// SimpleSchema.extendOptions(['autoform']);\n\n\n\nTemplate.editProperty.onCreated(function(){\n    // this.showEditProperty = new ReactiveVar( false );\n    // console.log(this.data.propertyData)\n    // debugger;\n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.autorun(function(){\n\n        instance.subscribe('Config');\n        var id = FlowRouter.getParam('id');\n        instance.subscribe('editProperty',id);\n        instance.subscribe('Areas');//Let it wait in edit prop page\n        instance.subscribe('userData');\n\n        if(instance.subscriptionsReady()){\n            instance.isSubsLoaded.set(true)\n        }\n    })\n\n    this.deactivateInProgress = new ReactiveVar( false );\n    this.archiveInProgress = new ReactiveVar( false );\n    // Session.set('editPropertyImagesNewOnes',[]);\n    // var gallery = this.data.propertyData.gallery;\n    // if(!gallery)gallery=[]\n    // Session.set('editPropertyImages',gallery);\n})\nTemplate.editProperty.helpers({\n    // showEditProperty: function () {\n    //     return Template.instance().showEditProperty.get();\n    // },\n    // propertyData : function () {\n    //     var ret = getpropertyData();\n    //     // console.log(\"propertyData\");\n    //     // console.log(ret);\n    //     Session.set('propertyData',ret);\n    //     return ret;\n    // },\n    isSubsLoaded:function(){\n        return Template.instance().subscriptionsReady();\n    },\n    userLoggedIn:function(){\n        if(Meteor.user())return true;\n        return false;\n    },\n    propertyData: function () {\n        // debugger;\n\n\n        var id = FlowRouter.current().params.id;\n        var ret = Collections.Properties.find(id, {\n            transform: function (data) {\n\n                var globalConfig = Collections.Config.findOne();\n                if(data.auctionId)data.auction = Collections.Auctions.findOne(data.auctionId);\n\n                return data;\n            },\n            limit: 1\n        }).fetch();\n        ret = ret[0];\n\n        clearMeta();\n        try {\n            var title = 'Editing ' + ret.address.address + ', ' + ret.address.area;\n            if (ret.address.county) title += ', ' + ret.address.county;\n\n            DocHead.setTitle('' + titleCase(title) + ' | SpotMyCrib Admin');\n            DocHead.addMeta({\n                name: \"description\",\n                content: \"Edit property \" + ret.type + \", upload its images, details and much more.\"\n            });\n        }catch(err){\n            DocHead.setTitle(' Property not found | SpotMyCrib Admin');\n            DocHead.addMeta({name: \"description\", content: \"\"});\n        }\n\n        Session.set(\"propertyData\", ret);\n        return ret;\n        // return {propertyData: ret};\n    },\n    propertyFound:function(){\n        var c = Collections.Properties.find().count()\n        if(c)return true;\n        return false;\n    },\n    inIgnoreList:function (str) {\n        ignoreList = ['gallery','isArchived']\n        if(ignoreList.indexOf(str) !== -1)return true;\n        return false;\n    },\n    deactivateInProgress: function(){\n        deactivateInProgress = Template.instance().deactivateInProgress;\n        return Template.instance().deactivateInProgress.get() ;\n    },\n    archiveInProgress: function(){\n        archiveInProgress = Template.instance().archiveInProgress;\n        return Template.instance().archiveInProgress.get() ;\n    },\n    // getGallery:function () {\n    //     // debugger;\n    //     var propertyData = Session.get('propertyData');\n    //     return propertyData.gallery;\n    // }\n})\nTemplate.editProperty.onRendered(function() {\n    try{\n        jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n    }catch(e){\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n    }\n\n\n\n})\n\nTemplate.editProperty.events({\n    \"click .deactivatePropertyBtn\": function (event, template) {\n        event.preventDefault();\n        var propertyData = Session.get('propertyData');\n        if(!propertyData){\n            console.log(\"Empty project data\");\n            return false;}\n        var user = Meteor.user();\n        if(!user){console.log(\"Invalid user\");return;}\n        if(propertyData.createdByAgent != user._id){console.log(\"Invalid user\");return;}\n\n        $.fancybox({\n            'padding': 0,\n            'href': '#conf-dactivate-pop',\n            afterShow:function(template){\n                attachEvents();\n            },\n            afterClose:function(template){\n                console.log(template);\n            }\n        })\n    },\n    \"click .archivePropertyBtn\": function (event, template) {\n        event.preventDefault();\n        var propertyData = Session.get('propertyData');\n        if(!propertyData){\n            console.log(\"Empty project data\");\n            return false;}\n        var user = Meteor.user();\n        if(!user){console.log(\"Invalid user\");return;}\n        if(propertyData.createdByAgent != user._id){console.log(\"Invalid user\");return;}\n\n        $.fancybox({\n            'padding': 0,\n            'href': '#conf-archive-pop',\n            afterShow:function(template){\n                attachEvents();\n            },\n            afterClose:function(template){\n                console.log(template);\n            }\n        })\n    },\n    // 'change .selectPropertyImages': function(event, template) {\n    //     var files = event.target.files;\n    //     S3.upload({\n    //         files:files,\n    //         path:\"propertyImagesLarge\"\n    //     },function(e,r){\n    //         if(e){\n    //             throw new Meteor.Error('Upload failed ', e);\n    //             var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n    //             tmp.push(\"Upload failed: please check your internet connection, contact us if needed.\");\n    //             Session.set(\"showErrorDlg\",tmp)\n    //             return;\n    //         }\n    //         var editPropertyImages = Session.get('editPropertyImages');\n    //         var editPropertyImagesNewOnes = Session.get('editPropertyImagesNewOnes');\n    //         var tmp = {\n    //             name: r.file.original_name,\n    //             relative_url: r.relative_url,\n    //             url: r.secure_url\n    //         };\n    //         editPropertyImages.push(tmp);\n    //         editPropertyImagesNewOnes.push(tmp);\n    //         Session.set('editPropertyImages',editPropertyImages);\n    //         Session.set('editPropertyImagesNewOnes',editPropertyImagesNewOnes);\n    //         var propertyData = Session.get(\"propertyData\");\n    //         updateGalleriesInServer(editPropertyImages,propertyData._id, function (err, res) {\n    //             if (err) {\n    //                 console.log(err);\n    //                 var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n    //                 tmp.push(\"Upload failed: please check your internet connection, contact us if needed.\");\n    //                 Session.set(\"showErrorDlg\",tmp)\n    //                 return;\n    //             } else {\n    //                 var editPropertyImages = Session.get('editPropertyImages');\n    //                 console.log(\"Current Count: \"+editPropertyImages.length )\n    //             }\n    //         });\n    //         console.log(r);\n    //     });\n    // },\n    \"click .backBtn\": function(event, template){\n        goBack();\n    },\n    'change input[name=price]':function(event, template){\n        if(event.target.value){\n            var tmp = event.target.value.split('.');tmp=tmp[0]//No decimals\n            tmp = tmp.trim().match(/\\d+/g)\n            if(!Array.isArray(tmp))event.target.value = '';\n            event.target.value = tmp.join('');\n        }\n    },\n    \"click .showCopyDlg\": function (event, template) {\n        var propertyData = Session.get('propertyData');\n\n        let user = Meteor.user();\n        let sluggedName = slugifyEmailAddress(user.profile.name);\n        if(!sluggedName)sluggedName = 'rent'\n        let email = sluggedName+'-let-'+propertyData.auction.lettingAuctionCode.toLowerCase()+\"@spotmycrib.ie\";\n        $('#agentPropertyEmailField').val(email);\n\n        var url = FlowRouter.url('letting',{key:propertyData.auction.lettingAuctionCode})\n        $('#propertyLinkField').val(url);\n        $.fancybox({\n            'padding': 0,\n            'href': '#propertyLinkDlg',\n            afterShow:function(template){\n                $('#agentPropertyEmailField').select();\n                $('#propertyLinkDlg .copyEmailBtn').unbind().bind('click',function () {\n                    $('#agentPropertyEmailField').select();\n\n                    try {\n                        var successful = document.execCommand('copy');\n                        var msg = successful ? 'successful' : 'unsuccessful';\n                        // console.log('Copying text command was ' + msg);\n                        $.fancybox.close()\n                    } catch (err) {\n                        console.log('Oops, unable to copy');\n                    }\n                    ga('send', 'event', 'editPropertyPage', 'copyShareEmail', 'copyShareEmail Btn Clicked');\n                })\n                $('#propertyLinkDlg .copyLinkBtn').unbind().bind('click',function () {\n                    $('#propertyLinkField').select();\n\n                    try {\n                        var successful = document.execCommand('copy');\n                        var msg = successful ? 'successful' : 'unsuccessful';\n                        // console.log('Copying text command was ' + msg);\n                        $.fancybox.close()\n                    } catch (err) {\n                        console.log('Oops, unable to copy');\n                    }\n                    ga('send', 'event', 'editPropertyPage', 'copyShareLink', 'copyShareLink Btn Clicked');\n                })\n                $('#propertyLinkDlg .cancelBtn').unbind().bind('click',function () {\n                    $.fancybox.close()\n                })\n            },\n        });\n\n    },\n})\nTemplate.editPropertyForm.onCreated(function(){\n    if(!Session.get('editPropertyImages')) {// Lets do this. Anyways we have delete button.\n        Session.set('editPropertyImages', []);\n        S3.collection.remove({})\n    }\n    this.numBedRoomCount = new ReactiveVar( 0 );\n    this.editPropertyFormSaving = new ReactiveVar( false );\n    this.countySelected = new ReactiveVar( false );\n\n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.autorun(function(){\n        if(instance.countySelected.get()){\n            instance.isSubsLoaded.set(false)\n            instance.subscribe('Areas','','',instance.countySelected.get(),'','');\n        }\n        if(instance.subscriptionsReady()){\n            instance.isSubsLoaded.set(true)\n        }\n    })\n\n    Session.set('editPropertyImagesNewOnes',[]);\n    var gallery = []\n    try{gallery = this.data.propertyData.gallery;}catch(e){gallery=[]}\n    Session.set('editPropertyImages',gallery);\n})\nTemplate.editPropertyForm.helpers({\n    'data':function(){\n        var user = Meteor.user();\n        if(!user) return {\n            results: []\n        }\n        var id = FlowRouter.current().params.id;\n        var doc = Collections.Properties.findOne(id,{\n            transform: function (data) {\n                if(data.auctionId)data.auction = Collections.Auctions.findOne(data.auctionId);\n                return data;\n            },\n            limit: 1\n        })\n        if(doc)if(doc.bedrooms)\n        Template.instance().numBedRoomCount.set(doc.bedrooms.length);\n\n        if(doc)\n        if(doc.gallery)Session.set('editPropertyImages',doc.gallery);//This will re-run everytime u update an images and data gets fetched again.\n\n        return doc;\n    },\n    trimVal:function (str) {\n        return str.trim();\n    },\n    isEqualSelect:function (a,b) {\n        if(a==b)return 'selected';\n        return '';\n    },\n    isEqualCheck:function (a,b) {\n        if(a==b)return 'checked';\n        return '';\n    },\n    furnishedOptions:function(isFurnished){\n        return [{label: \"yes\", value: \"true\",selected:isFurnished?'selected':''},{label: \"No\", value: \"false\",selected:!isFurnished?'selected':''}];\n    },\n    countries:function(){\n        return [{label: \"Ireland\", value: \"Ireland\", selected:\"selected\"}];//Both capital\n    },\n    counties:function(){\n        let staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n        let ret = []\n        for(let i=0;i< staticCounties.length;i++){\n            if(!staticCounties[i])continue;\n            ret.push({label: titleCase(staticCounties[i]), value: staticCounties[i] })\n        }\n        return ret;\n        // return [{label: \"Dublin\", value: \"dublin\"}];//Both capital\n        // var distinctEntries = _.uniq(Collections.Areas.find({}, {\n        //     sort: {County: 1}, fields: {County: true}\n        // }).fetch().map(function(x) {\n        //     return x.County;\n        // }), true);\n        // var ret = []\n        // for(var i=0;i< distinctEntries.length;i++){\n        //     if(!distinctEntries[i])continue;\n        //     ret.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n        // }\n        // return ret;\n    },\n    areas:function(){\n        var countySelected = Template.instance().countySelected.get();\n        if(!countySelected){\n            var c = Collections.Properties.find().count();\n            if(c>1)return [] // This is the fix for - bug of not loading existing areas - page is designed to work with 1 prop, but when user comes to this page from myprop page, it has many results, leading to invalid countySelected\n            var doc = Collections.Properties.findOne(); if(!doc)return [];\n            Template.instance().countySelected.set(doc.address.county);\n            countySelected = doc.address.county;\n        }\n\n        var distinctEntries = _.uniq(Collections.Areas.find({County:countySelected}, {\n            sort: {Area: 1}, fields: {Area: true}\n        }).fetch().map(function(x) {\n            return x.Area;\n        }), true);\n        var ret = []\n        for(var i=0;i< distinctEntries.length;i++){\n            if(!distinctEntries[i])continue;\n            ret.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n        }\n        return ret;\n        //Previous logic\n        // var Config = Collections.Config.find().fetch();Config = Config[0];\n        // var ret = []\n        // for(var i=0;i< Config.countyInfo.length;i++){\n        //     ret.push({label: titleCase(Config.countyInfo[i].area), value: Config.countyInfo[i].area})\n        // }\n    },\n    propertyTypes:function(){\n        var Config = Collections.Config.find().fetch();Config = Config[0];\n        var ret = []\n        for(var i=0;i< Config.propertyType.length;i++){\n            ret.push({label: titleCase(Config.propertyType[i].name), value: Config.propertyType[i].value})\n        }\n        return ret;\n    },\n    numBedRoomCount:function () {\n        var c = Template.instance().numBedRoomCount.get();\n        if(c<100)return Template.instance().numBedRoomCount.get();\n        else return 0;\n    },\n    editPropertyFormSaving:function () {\n        return Template.instance().editPropertyFormSaving.get();\n    },\n    ensuiteLoop: function(count){\n        var countArr = [];\n        for (var i=0; i<count; i++){\n            countArr.push({i:i+1});\n        }\n        return countArr;\n    },\n    ensuiteLoopCheckbox :function (index) {\n        var doc = Collections.Properties.findOne()\n        if(doc)if(doc.bedrooms[index]){\n            if(doc.bedrooms[index].ensuite)return 'checked';\n        }\n        return '';\n    },\n    ensuiteLoopBedType :function (index , b) {\n        var doc = Collections.Properties.findOne()\n        if(doc)if(doc.bedrooms[index]){\n            if(doc.bedrooms[index].bedType == b)return 'selected';\n        }\n        return '';\n    },\n    leaseUntil:function () {\n        var allowedVals = ['1 month', '2 months', '3 months', '4 months', '5  months', '6 months', '7 months', '8 months', '9 months', '10 months', '11 months', '1 year', 'More than a year'];\n        return allowedVals;\n    },\n    ensuiteLoopBedTypeOptions:function(index){\n        var doc = Collections.Properties.findOne();\n        var isSingle= false,isDouble= false,isTwin = false;\n        if(doc)if(doc.bedrooms)if(doc.bedrooms[index]){\n            switch(doc.bedrooms[index].bedType){\n                case 'single':isSingle=true;break;\n                case 'double':isDouble=true;break;\n                case 'twin':isTwin=true;break;\n            }\n        }\n        var arr = [{label: \"Single\", value: \"single\",sel:isSingle?'selected':''},{label: \"Double\", value: \"double\",sel:isDouble?'selected':''},{label: \"Twin\", value: \"twin\",sel:isTwin?'selected':''}];\n        return arr;\n    },\n    hasAmenityCheckbox :function (v) {\n        var doc = Collections.Properties.findOne()\n        if(doc)\n        if(doc.amenities)\n        if(doc.amenities.length)\n        if(doc.amenities.indexOf(v)!=-1)return 'checked';\n        return '';\n    },\n    propertyContact :function (i) {\n        var doc = Collections.Properties.findOne()\n        if(doc)if(doc.contacts) if(doc.contacts.length) return doc.contacts[0];\n\n        return {\n            name:'',\n            phone:'',\n            email:'',\n        };\n    },\n    advertisementContact:function (i) {\n        var id = FlowRouter.current().params.id;\n        var doc = Collections.Properties.findOne(id,{\n            transform: function (data) {\n                if(data.auctionId)data.auction = Collections.Auctions.findOne(data.auctionId);\n                return data;\n            },\n            limit: 1\n        })\n        if(doc)if(doc.auction)if(doc.auction.contacts) if(doc.auction.contacts.length) return doc.auction.contacts[0];\n        return {\n            name:'',\n            phone:'',\n            email:'',\n        };\n    }\n})\nTemplate.editPropertyForm.events({\n    \"click .backBtn\": function(event, template){\n        goBack();\n    },\n    'submit form': function(event){\n        event.preventDefault();\n    },\n    \"click .editPropertyFormSaveActivateBtn\": function(event, template) {\n        $('#editPropertyFormCF').submit();\n    },\n    \"click .editPropertyFormCancelBtn\": function(event, template) {\n        goBack();\n    },\n    'change .selectPropertyImages': function(event, template) {return;\n        var files = event.target.files;\n        console.log('Upload called');\n        // console.log(files);\n        S3.upload({\n            files:files,\n            path:\"DEVpropertyImagesLarge\"\n        },function(e,r){\n            if(e){\n                throw new Meteor.Error('Upload failed ', e);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Upload failed: please check your internet connection, contact us if needed.\");\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n            var editPropertyImages = Session.get('editPropertyImages');\n            var editPropertyImagesNewOnes = Session.get('editPropertyImagesNewOnes');\n            var tmp = {\n                name: r.file.original_name,\n                relative_url: r.relative_url,\n                url: r.secure_url\n            };\n            editPropertyImages.push(tmp);\n            editPropertyImagesNewOnes.push(tmp);\n            Session.set('editPropertyImages',editPropertyImages);\n            Session.set('editPropertyImagesNewOnes',editPropertyImagesNewOnes);\n            var propertyData = Session.get(\"propertyData\");\n\n            updateGalleriesInServer(editPropertyImages,propertyData._id, function (err, res) {\n                if (err) {\n                    console.log(err);\n                    var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                    tmp.push(\"Upload failed: please check your internet connection, contact us if needed.\");\n                    Session.set(\"showErrorDlg\",tmp)\n                    return;\n                } else {\n                    var editPropertyImages = Session.get('editPropertyImages');\n                    console.log(\"Current Count: \"+editPropertyImages.length )\n                }\n            });\n            console.log(r);\n        });\n    },\n    'change .countySelected': function(event, template) {\n        template.countySelected.set(event.target.value);\n    },\n    \"click .openFileUploader\":function (event, template) {\n        event.preventDefault();\n        openPicker();\n        // filename\n        //     :\n        //     \"webcam-1/12/2018, 6:53:25 PM.png\"\n        // handle\n        //     :\n        //     \"G8lStVqHTiGnwxof6d5y\"\n        // mimetype\n        //     :\n        //     \"image/png\"\n        // originalFile\n        //     :\n        // {name: \"webcam-1/12/2018, 6:53:25 PM.png\", type: \"image/png\", size: 630585}\n        // originalPath\n        //     :\n        //     \"webcam-1/12/2018, 6:53:25 PM.png\"\n        // size\n        //     :\n        //     629612\n        // source\n        //     :\n        //     \"local_file_system\"\n        // status\n        //     :\n        //     \"Stored\"\n        // uploadId\n        //     :\n        //     \"ba2fe36e9fd182ec0cb88236d676cefad\"\n        // url\n        //     :\n        //     \"https://cdn.filestackcontent.com\n        return;\n    },\n    'keyup .autoGrowTA': function(event, template) {\n        var element = event.target;\n        element.style.height = \"5px\";\n        if(element.scrollHeight<310)element.style.height = (element.scrollHeight)+\"px\";\n        else element.style.height = \"310px\";\n    },\n    'change #numBedRoomCount': function(event, template) {\n        var numBedRoomCount = parseInt($(event.target).val());\n        if(isNaN(numBedRoomCount))return;\n        Template.instance().numBedRoomCount.set(numBedRoomCount);\n        t1 = template;\n        setTimeout(function () {\n            t1.$('#editPropertyFormCF').validate();\n        },500)\n    },\n})\nTemplate.editPropertyForm.onRendered(function () {\n    this.$('#readyFrom').datetimepicker();\n    var element = this.$('.autoGrowTA')[0];\n    if(element.scrollHeight<310)element.style.height = (element.scrollHeight)+\"px\";\n    else element.style.height = \"310px\";\n\n    // this.$('#editPropertyFormCF').validate();\n    editPropertyFormSaving = this.editPropertyFormSaving\n    var validator = this.$('#editPropertyFormCF').validate({\n        submitHandler: function(event){\n            editPropertyFormSaving.set(true);\n            console.log(\"You just submitted the 'editPropertyForm' form.\");\n            var doc = Collections.Properties.findOne()\n            if(doc){\n            Meteor.call('editProperty',doc._id,$('#editPropertyFormCF').serializeArray(),function (error, result) {\n                editPropertyFormSaving.set(false);\n                if(error){\n                    console.log(error)\n                    //    validator.showErrors({\n                    //         email: error.reason\n                    //     });\n                    var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                    var msg = 'An error occurred.';\n                    if(error.reason)msg += ' '+error.reason+'.'\n                    else if(error.message)msg += ' '+error.message+'.'\n                    tmp.push(msg);\n                    Session.set(\"showErrorDlg\",tmp)\n                    return;\n                }\n                var propertyData = Session.get(\"propertyData\");\n                var editPropertyImages = Session.get('editPropertyImages');\n                if(!editPropertyImages){\n                    Session.set('editPropertyImages',[]);\n                    S3.collection.remove({})\n                    goBack();\n                }else{\n                updateGalleriesInServer(editPropertyImages, propertyData._id, function (err, res) {\n                    if (err) {\n                        console.log(err);\n                    } else {\n                        Session.set('editPropertyImages',[]);\n                        S3.collection.remove({})\n                    }\n                    goBack();\n                })\n                }\n                Session.set('hideAddPropertyForm',true)\n            })\n            }\n        }\n    });\n\n\n    if(Session.get('OpenImageUploader')){\n        scrollTo('.openFileUploader',0,500);\n        openPicker();\n        Session.set('OpenImageUploader',false)\n    }\n})\nTemplate.imageEditView.helpers({\n    images: function () {\n        // var propertyData = Session.get('propertyData');\n        // var existingGallery = propertyData.gallery;\n        // var editPropertyImages = Session.get('editPropertyImages');\n        // if(!editPropertyImages)editPropertyImages=[]\n        // if(!existingGallery )existingGallery =[]\n        // var newCombined = editPropertyImages.concat(existingGallery);\n        return Session.get('editPropertyImages');\n    }\n});\nTemplate.imgEditTag.events({\n    \"click .editImgBtn\": function (event, template) {\n        console.log(this);\n        debugger;\n\n        var editPropertyImages = Session.get('editPropertyImages');\n        var editPropertyImagesNewOnes = Session.get('editPropertyImagesNewOnes');\n        var isOriginalImageFromOwnS3 = false;\n\n        var newArr = [];\n        if(!editPropertyImages)return;\n        if(!editPropertyImages.length)return;\n\n        if(this.handle) {\n            index = getIndexByHandle(editPropertyImages, this.handle);\n        }else{\n            isOriginalImageFromOwnS3 = true;\n            index = getIndexByRelativeURL(editPropertyImages, this.relative_url);\n        }\n        newArr.push(editPropertyImages[index].url)//put it at first\n        // editPropertyImages.splice(index, 1);\n        //\n        // for(var i=0;i<editPropertyImages.length;i++){\n        //     newArr.push(editPropertyImages[i].url)\n        // }\n\n        const pickOptions = {\n            transformations:{\n                crop:{      force:true,\n                    aspectRatio:1.333},\n                rotate:true},\n            accept: 'image/*',\n            imageMax:[800,600]\n        };\n        fsClient.cropFiles(newArr,pickOptions).then( (response) => {\n            debugger;\n            var editPropertyImages = Session.get('editPropertyImages');\n            var editPropertyImagesNewOnes = Session.get('editPropertyImagesNewOnes');\n\n            //if its conversion from old amazon to new filestack, then it will create a new file, so delete the old file seperatly and insert a new file seperatly.\n\n            if(!response.filesUploaded.length){\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Edit failed: please try again, contact us if needed.\");\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n\n            if(isOriginalImageFromOwnS3){\n                S3.delete(editPropertyImages[index].relative_url,function(error, result){\n                    if(error){\n                        var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                        tmp.push(\"Edit failed: please check your internet connection, contact us if needed.\");\n                        Session.set(\"showErrorDlg\",tmp)\n                        return;\n                    }\n\n                    var editPropertyImages = Session.get('editPropertyImages');\n                    editPropertyImages.splice(index, 1);\n                    Session.set('editPropertyImages',editPropertyImages);\n                    var propertyData = Session.get(\"propertyData\");\n                    updateGalleriesInServer(editPropertyImages,propertyData._id, function (err, res) {\n                        if (err) {\n                            console.log(err);\n                            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                            tmp.push(\"Edit failed: please check your internet connection, contact us if needed.\");\n                            Session.set(\"showErrorDlg\",tmp)\n                            return;\n                        } else {\n                            var editPropertyImages = Session.get('editPropertyImages');\n                            console.log(\"Current Count: \"+editPropertyImages.length )\n                        }\n                    });\n                })\n            }else{\n                fsClient.remove(editPropertyImages[index].handle).then(function(result){\n                    debugger;\n                    console.log('In fs remove result');\n                    var editPropertyImages = Session.get('editPropertyImages');\n                    editPropertyImages.splice(index, 1);\n                    Session.set('editPropertyImages',editPropertyImages);\n                    var propertyData = Session.get(\"propertyData\");\n                    updateGalleriesInServer(editPropertyImages,propertyData._id, function (err, res) {\n                        if (err) {\n                            console.log(err);\n                            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                            tmp.push(\"Edit failed: please check your internet connection, contact us if needed.\");\n                            Session.set(\"showErrorDlg\",tmp)\n                            return;\n                        } else {\n                            var editPropertyImages = Session.get('editPropertyImages');\n                            console.log(\"Current Count: \"+editPropertyImages.length )\n                        }\n                    });\n                });\n            }\n\n\n            var tmp = {};\n            for(var i =0;i<response.filesUploaded.length;i++){\n                tmp = {\n                    name: response.filesUploaded[i].filename,\n                    url: response.filesUploaded[i].url,\n                    handle: response.filesUploaded[i].handle,\n                    mimetype: response.filesUploaded[i].mimetype,\n                    originalFile: response.filesUploaded[i].originalFile,\n                    originalPath: response.filesUploaded[i].originalPath,\n                    size: response.filesUploaded[i].size,\n                    source: response.filesUploaded[i].source,\n                    status: response.filesUploaded[i].status,\n                    uploadId: response.filesUploaded[i].uploadId\n                }\n                // editPropertyImages.push(tmp);\n                editPropertyImages.splice(index+1, 0, tmp);//insert at the index place where its deleted.\n                editPropertyImagesNewOnes.push(tmp);\n            }\n\n            //Logic to insert new file.\n            Session.set('editPropertyImages',editPropertyImages);\n            var propertyData = Session.get(\"propertyData\");\n            updateGalleriesInServer(editPropertyImages,propertyData._id, function (err, res) {\n                if (err) {\n                    console.log(err);\n                    var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                    tmp.push(\"Edit failed: please check your internet connection, contact us if needed.\");\n                    Session.set(\"showErrorDlg\",tmp)\n                    return;\n                } else {\n                    var editPropertyImages = Session.get('editPropertyImages');\n                    console.log(\"Current Count: \"+editPropertyImages.length )\n                }\n            });\n        });\n\n\n    },\n    \"click .deleteImgBtn\": function (event, template) {\n        console.log(this);\n        debugger;\n\n        var editPropertyImages = Session.get('editPropertyImages');\n        // editPropertyImages.splice(index, 1);\n        // Session.set('editPropertyImages',editPropertyImages);\n\n        if(this.handle){\n            index = getIndexByHandle(editPropertyImages, this.handle);\n\n            fsClient.remove(this.handle).then(function(result){\n                debugger;\n                console.log('In fs remove result');\n                var editPropertyImages = Session.get('editPropertyImages');\n                editPropertyImages.splice(index, 1);\n                Session.set('editPropertyImages',editPropertyImages);\n                var propertyData = Session.get(\"propertyData\");\n                updateGalleriesInServer(editPropertyImages,propertyData._id, function (err, res) {\n                    if (err) {\n                        console.log(err);\n                        var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                        tmp.push(\"Deletion failed: please check your internet connection, contact us if needed.\");\n                        Session.set(\"showErrorDlg\",tmp)\n                        return;\n                    } else {\n                        var editPropertyImages = Session.get('editPropertyImages');\n                        console.log(\"Current Count: \"+editPropertyImages.length )\n                    }\n                });\n            });\n\n        }else{\n            index = getIndexByRelativeURL(editPropertyImages, this.relative_url);\n\n            S3.delete(this.relative_url,function(error, result){\n                if(error){\n                    var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                    tmp.push(\"Deletion failed: please check your internet connection, contact us if needed.\");\n                    Session.set(\"showErrorDlg\",tmp)\n                    return;\n                }\n\n                var editPropertyImages = Session.get('editPropertyImages');\n                editPropertyImages.splice(index, 1);\n                Session.set('editPropertyImages',editPropertyImages);\n                var propertyData = Session.get(\"propertyData\");\n                updateGalleriesInServer(editPropertyImages,propertyData._id, function (err, res) {\n                    if (err) {\n                        console.log(err);\n                        var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                        tmp.push(\"Deletion failed: please check your internet connection, contact us if needed.\");\n                        Session.set(\"showErrorDlg\",tmp)\n                        return;\n                    } else {\n                        var editPropertyImages = Session.get('editPropertyImages');\n                        console.log(\"Current Count: \"+editPropertyImages.length )\n                    }\n                });\n            })\n        }\n\n\n    }\n});\nfunction openPicker() {\n    fsClient.pick({\n        fromSources:[\"local_file_system\",\"webcam\",\"facebook\",\"url\",\"googledrive\",\"dropbox\",\"flickr\",\"instagram\",\"gmail\",\"picasa\",\"onedrive\",\"clouddrive\"],\n        maxFiles:10,\n        transformations:{\n            crop:{      force:true,\n                aspectRatio:1.333},\n            rotate:true},\n        imageMax:[800,600],\n        accept:[\"image/*\"]//,\".pdf\",\".doc\",\".docx\",\".docm\"\n    }).then(function(response) {\n        // declare this function to handle response\n        debugger;\n        var editPropertyImages = Session.get('editPropertyImages');\n        var editPropertyImagesNewOnes = Session.get('editPropertyImagesNewOnes');\n        var tmp = {};\n        if(response.filesUploaded)\n            for(var i =0;i<response.filesUploaded.length;i++){\n                tmp = {\n                    name: response.filesUploaded[i].filename,\n                    url: response.filesUploaded[i].url,\n                    handle: response.filesUploaded[i].handle,\n                    mimetype: response.filesUploaded[i].mimetype,\n                    originalFile: response.filesUploaded[i].originalFile,\n                    originalPath: response.filesUploaded[i].originalPath,\n                    size: response.filesUploaded[i].size,\n                    source: response.filesUploaded[i].source,\n                    status: response.filesUploaded[i].status,\n                    uploadId: response.filesUploaded[i].uploadId\n                }\n                editPropertyImages.push(tmp);\n                editPropertyImagesNewOnes.push(tmp);\n            }\n        Session.set('editPropertyImages',editPropertyImages);\n        Session.set('editPropertyImagesNewOnes',editPropertyImagesNewOnes);\n\n        var propertyData = Session.get(\"propertyData\");\n        updateGalleriesInServer(editPropertyImages,propertyData._id, function (err, res) {\n            if (err) {\n                console.log(err);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Upload failed: please check your internet connection, contact us if needed.\");\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            } else {\n                var editPropertyImages = Session.get('editPropertyImages');\n                console.log(\"Current Count: \"+editPropertyImages.length )\n                if(Session.get('fromAdvertiseWithUsPage')){\n                    fbq('track', 'CompleteRegistration');\n                    ga('send', 'event', 'AdvertiseWithUsPage', 'ImageUploaded', 'Property Images Uploaded.')\n                    Session.set('fromAdvertiseWithUsPage',false)\n                }\n            }\n        });\n        console.log(response);\n    });\n}\n\nfunction goBack(){\n    var prevRoute = Session.get('prevRoute');\n    if(prevRoute){\n        FlowRouter.go(prevRoute.name,prevRoute.args)\n        Session.set('prevRoute',false);\n        if(prevRoute.scrollTo){\n            scrollTo(prevRoute.scrollTo,0,500)\n        }\n    }else{\n        FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n    }\n}\nfunction getpropertyData(){\n    var id = FlowRouter.current().params.id;\n\n    var ret = Collections.Properties.find(id, {\n        transform: function(data){\n\n            data.auction = Collections.Auctions.findOne(data.auctionId);\n            data.applicationsReceivedCount = Collections.Bids.find({auctionId:data.auctionId}).count();\n            data.applicationsActiveCount = Collections.Bids.find({auctionId:data.auctionId,isArchived:false}).count();\n\n            return data;\n        },\n        limit: 1\n    }).fetch();\n    // console.log(\"getProjectData\");\n    return ret[0];\n}\nfunction getIndexByHandle(myArray, fileId){\n    for (var i=0; i < myArray.length; i++) {\n        if (myArray[i].handle === fileId) {\n            return i;\n        }\n    }\n}\nfunction getIndexByRelativeURL(myArray, fileId){\n    for (var i=0; i < myArray.length; i++) {\n        if (myArray[i].relative_url === fileId) {\n            return i;\n        }\n    }\n}\n\nfunction attachEvents() {\n    $(\".deactivateConfirmBtn\").unbind().bind(\"click\",function () {\n        deactivateConfEvent();\n    })\n    $(\".archiveConfirmBtn\").unbind().bind(\"click\",function () {\n        archiveConfEvent();\n    })\n    $(\".closePopupBtn\").unbind().bind(\"click\",function () {\n        closePopupEvent();\n    })\n}\nfunction deactivateConfEvent() {\n    var data = Session.get(\"propertyData\");\n    var auctionId = data.auctionId;\n\n    deactivateInProgress.set(true) ;\n    Meteor.call('deactivateAuction',auctionId,function(error, result){\n        deactivateInProgress.set(false) ;\n        if(error){\n            console.log(error);\n            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n            tmp.push(\"Failed deactivating. Please try again, try checking your internet connectivity. Contact us if needed.\");\n            Session.set(\"showErrorDlg\",tmp)\n            return;\n        }\n        console.log(\"Success\");\n        var prevRoute = Session.get('prevRoute');\n        closePopupEvent();\n        goBack();\n\n    });\n}\nfunction archiveConfEvent() {\n    var data = Session.get(\"propertyData\");\n    var propertyId = data._id;\n\n    archiveInProgress.set(true) ;\n    Meteor.call('archiveProperty',propertyId,function(error, result){\n        archiveInProgress.set(false) ;\n        if(error){\n            console.log(error);\n            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n            tmp.push(\"Failed archiving. Please try again, try checking your internet connectivity. Contact us if needed.\");\n            Session.set(\"showErrorDlg\",tmp)\n            return;\n        }\n        console.log(\"Success\");\n        var prevRoute = Session.get('prevRoute');\n        closePopupEvent();\n        goBack();\n\n    });\n}\nfunction closePopupEvent() {\n    console.log('closePopupEvent');\n    if($)\n        if($.fancybox)\n            $.fancybox.close();\n}\n\n\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction slugifyEmailAddress (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ/_,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '.')           // Replace spaces with \".\"\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with ''\n        // .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single ''\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}","/**\n * Created by njanjanam on 19/05/2017.\n */\nimport './lettingprintview.html';\n\nTemplate.lettingprintview.onCreated(function() {\n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.autorun(function(){\n\n        var key = FlowRouter.getParam('key');\n        instance.subscribe(\"viewLetting\",key) ;\n        instance.subscribe('Config');\n\n        // instance.subscribe('Properties');\n        // instance.subscribe('Auctions');\n\n        if(instance.subscriptionsReady()){\n            instance.isSubsLoaded.set(true)\n        }\n    })\n})\nTemplate.lettingprintview.helpers({\n    isSubsLoaded: function () {\n        return Template.instance().subscriptionsReady();\n    },\n    userLoggedIn: function () {\n        if (Meteor.user())return true;\n        return false;\n    },\n    data : function () {\n        // debugger;\n        var id = FlowRouter.getParam('key');\n        let Projects = Collections.Auctions;\n        let selector = {\n            \"lettingAuctionCode\" : id\n        };\n        var ret = Projects.find(selector, {\n            transform: function(data){\n\n                var globalConfig = Collections.Config.findOne();\n                data.PD = Collections.Properties.findOne(data.propertyId);\n\n                data.PD.bedroomsCount=0\n                data.PD.ensuiteCount = 0;\n                data.PD.doubleBedCount = 0;\n                if(data.PD.bedrooms){\n                    data.PD.bedroomsCount = data.PD.bedrooms.length;\n                    for (var i = 0; i < data.PD.bedrooms.length; i++) {\n                        if (data.PD.bedrooms[i][\"ensuite\"] ) {\n                            data.PD.ensuiteCount++;\n                        }\n                        if (data.PD.bedrooms[i][\"bedType\"] == 'double' ) {\n                            data.PD.doubleBedCount++;\n                        }\n                    }\n                }\n\n\n                if(data.PD.contacts) {\n                    data.primaryContact = data.PD.contacts[0];\n                }else data.primaryContact = {};\n\n                tmp = [];\n                if(data.PD.amenities){\n                    for ( var i=0; i< data.PD.amenities.length;i++){\n                        var src = globalConfig.amenitiesLogos[data.PD.amenities[i]];\n                        if(!src)src = globalConfig.amenitiesLogos[\"default\"]\n                        tmp.push({name:data.PD.amenities[i], src: src })\n                    }\n                }\n                data.PD.amenitiesWithImgs = tmp;\n\n\n                return data;\n            },\n            limit: 1\n        }).fetch();\n        ret = ret[0];\n\n        clearMeta();\n        try {\n            var title = 'Print key for ' + ret.PD.address.address + ', ' + ret.PD.address.area;\n            if (ret.PD.address.county) title += ', ' + ret.PD.address.county;\n\n            DocHead.setTitle('' + titleCase(title) + ' | SpotMyCrib');\n            DocHead.addMeta({name: \"description\", content: \"Print key for \" + ret.PD.type + \".\"});\n        }catch(err){\n            DocHead.setTitle(' Property not found | SpotMyCrib Admin');\n            DocHead.addMeta({name: \"description\", content: \"\"});\n        }\n\n        return ret;\n    }\n});\nTemplate.lettingprintview.onRendered(function() {\n    // console.log(this)\n\n    setTimeout(function () {\n        window.print();\n    },1000)\n})","import \"./pagination.html\";\nimport \"./imageView.html\";\nimport \"./myProperties.html\";\nimport './shared.js';\nimport SimpleSchema from \"simpl-schema\";\n// SimpleSchema.extendOptions(['autoform']);\nadvertiseFormSaving='';\nfsClient = '';\nsaveAndAdvertise=false;\n\nvar globalFILTERS = {};\nfunction getFiltersFromRoute(){\n    var FILTERS = {};\n    if( FlowRouter.current().queryParams.home_type ){\n        var val = FlowRouter.current().queryParams.home_type;\n        FILTERS['homeType'] = val;\n    }\n    if( FlowRouter.current().queryParams.facing ){\n        var val = FlowRouter.current().queryParams.facing;\n        FILTERS['facing'] = val;\n    }\n\n    if( FlowRouter.current().queryParams.floor_low || FlowRouter.current().queryParams.floor_high  ){\n        var val_l = FlowRouter.current().queryParams.floor_low;\n        var val_h = FlowRouter.current().queryParams.floor_high;\n\n        if(isNaN(val_l) && isNaN(val_h)){//Both are not valid numbers\n\n        }else if(!isNaN(val_l) && isNaN(val_h)){//Low is valid and no upper\n            FILTERS['floor'] = [val_l,0];\n        }else if(isNaN(val_l) && !isNaN(val_h)){//Upper is valid and no lower\n            FILTERS['floor'] = [0, val_h];\n        }else{//Both are valid\n            FILTERS['floor'] = [val_l ,val_h ];\n        }\n    }\n\n    if( FlowRouter.current().queryParams.price_low || FlowRouter.current().queryParams.price_high  ){\n        var val_l = FlowRouter.current().queryParams.price_low;\n        var val_h = FlowRouter.current().queryParams.price_high;\n\n        if(isNaN(val_l) && isNaN(val_h)){//Both are not valid numbers\n\n        }else if(!isNaN(val_l) && isNaN(val_h)){//Low is valid and no upper\n            FILTERS['priceRange'] = [val_l,0];\n        }else if(isNaN(val_l) && !isNaN(val_h)){//Upper is valid and no lower\n            FILTERS['priceRange'] = [0, val_h];\n        }else{//Both are valid\n            FILTERS['priceRange'] = [val_l ,val_h ];\n        }\n    }\n    //if(FILTERS.length==0){return false;}\n    return FILTERS;//{\"Home Type\":[\"2 BHK\"],\"Floor\":[\"2 to 15\"],\"Price Range\":[\"67.45 to 97.45 \"]}\n}\nfunction setFilters(FILTERS){\n    Session.set('globalFILTERS', FILTERS);\n    var defaultFilters = Session.get('projectData');defaultFilters = defaultFilters.filter;\n    console.log(\"In setFilters\")\n    console.log(FILTERS);\n    console.log(defaultFilters);\n    FlowRouter.query.clear();\n\n    var baseURL = FlowRouter.current().originalUrl.split('?')[0];\n    var route = baseURL;\n    // debugger;\n    if(  FILTERS['homeType']  ){\n        if(FILTERS['homeType'].length != defaultFilters.homeType.length)\n            for(var i=0;i<FILTERS['homeType'].length;i++) {\n                // if(defaultFilters.homeType.indexOf(  FILTERS['homeType'][i]  ) == -1)\n                route = updateQueryStringParameter(route, 'home_type[]', FILTERS['homeType'][i])\n            }\n    }\n    if(  FILTERS['facing']  ){\n        if(FILTERS['facing'].length != defaultFilters.facing.length)\n            for(var i=0;i<FILTERS['facing'].length;i++) {\n                // if(defaultFilters.facing.indexOf(  FILTERS['facing'][i]  ) == -1)\n                route = updateQueryStringParameter(route, 'facing[]', FILTERS['facing'][i])\n            }\n    }\n    if(  FILTERS['floor'] ){\n        var l1 = FILTERS['floor'][0];\n        //if(l1 !=0 && l1 != defaultFilters.floor[0])\n        route = updateQueryStringParameter(route, 'floor_low', l1);\n        var l2 = FILTERS['floor'][1];\n        //if(l2 != defaultFilters.floor[1])\n        route = updateQueryStringParameter(route, 'floor_high', l2);\n\n        //route = updateQueryStringParameter(route, 'floor_low', FILTERS['floor'][0]);\n        //route = updateQueryStringParameter(route, 'floor_high', FILTERS['floor'][1]);\n    }\n    if( FILTERS['priceRange'] ){\n        var l1 = FILTERS['priceRange'][0];\n\n        //Don't uncomment below lines as they would cause another bug. It would be a flow bug, on page refresh, it shud know upper limit to compute, and its called during template create.\n        //if(l1 !=0 && l1 != defaultFilters.priceRange[0])\n        route = updateQueryStringParameter(route, 'price_low', l1);\n        var l2 = FILTERS['priceRange'][1];\n        //if(l2 != defaultFilters.priceRange[1])\n        route = updateQueryStringParameter(route, 'price_high', l2);\n\n\n        //route = updateQueryStringParameter(route, 'price_low', FILTERS['priceRange'][0]);\n        //route = updateQueryStringParameter(route, 'price_high', FILTERS['priceRange'][1]);\n    }\n\n    if(FILTERS['floor']){\n        $('.filterS1l').html(FILTERS['floor'][0]);\n        $('.filterS1h').html(FILTERS['floor'][1]);\n    }\n    if(FILTERS['priceRange']){\n        $('.filterS2l').html( numDifferentiation( FILTERS['priceRange'][0]) )\n        $('.filterS2h').html( numDifferentiation( FILTERS['priceRange'][1]) )\n    }\n    console.log(\"New Route\"+route);\n    FlowRouter.go(route);\n    updateUISlider(FILTERS)\n\n}\nfunction getDefaultFilters(){\n    return {};\n}\nfunction getCurUsersBid(auctionId){\n    var bid = Collections.Bids.find({auctionId:auctionId,userId:Meteor.userId()},{limit:1}).fetch()\n    return bid[0];\n}\n\nfunction updateUISlider(FILTERS){\n    //console.log('Updating slider values')\n    var slider = document.getElementById('range-input');\n    var slider1 = document.getElementById('range-input1');\n    if(!slider)return;\n    if(!slider.noUiSlider)return;\n    slider.noUiSlider.set(FILTERS.floor);\n    slider1.noUiSlider.set(FILTERS.priceRange);\n    var defaultFilters = Session.get('projectData');defaultFilters = defaultFilters.filter;\n\n    if(FILTERS.homeType)\n        if(FILTERS.homeType.length && (FILTERS.homeType.length != defaultFilters.homeType.length) )\n            $('.filterUnitType').val(FILTERS.homeType[0])\n        else\n            $('.filterUnitType').val('any')\n    if(FILTERS.facing)\n        if(FILTERS.facing.length && (FILTERS.facing.length != defaultFilters.facing.length))\n            $('.filterUnitFacing').val(FILTERS.facing[0])\n        else\n            $('.filterUnitFacing').val('any')\n}\nfunction resetUISlider(FILTERS){\n    // console.log('reset slider values')\n    var slider = document.getElementById('range-input');\n    var slider1 = document.getElementById('range-input1');\n    slider.noUiSlider.set(FILTERS.floor);\n    slider1.noUiSlider.set(FILTERS.priceRange);\n    $('.filterUnitType, .filterUnitFacing').val('any')\n}\nfunction startUISlider(data){\n    var slider = document.getElementById('range-input');\n    var slider1 = document.getElementById('range-input1');\n    //data = {\n    //  \"s1\":{\n    //    \"start\": [0, 25],\n    //    \"range\": [0, 25]\n    //  }, \"s2\":{\n    //    \"start\": [64, 94],\n    //    \"range\": [64, 94]\n    //  }\n    //}\n    noUiSlider.create(slider, {\n\n        start: data.s1.start,\n\n        connect: true,\n\n        step: 1,\n\n        range: {\n\n            'min': data.s1.range[0],\n\n            'max': data.s1.range[1]\n\n        },\n\n        format: wNumb({\n\n            decimals: 0\n\n        })\n\n    });\n\n    noUiSlider.create(slider1, {\n\n        start: data.s2.start,\n\n        connect: true,\n\n        step: 1000000,\n\n        range: {\n\n            'min': data.s2.range[0],\n\n            'max': data.s2.range[1]\n\n        },\n\n        format: wNumb({\n\n            decimals: 0\n\n        })\n\n    });\n    slider.noUiSlider.on('update', function(){\n        applyFilterValues();\n    });\n    slider1.noUiSlider.on('update', function(){\n        applyFilterValues();\n    });\n    slider.noUiSlider.on('change', function(){\n        applyFilters();\n    });\n    slider1.noUiSlider.on('change', function(){\n        applyFilters();\n    });\n}\nfunction getPaginationData(totalResultsCount,currentPageNo,urlBase, resultsPerPage){\n    var pages = [], prevPage = {}, nextPage={};\n    var pgMin = currentPageNo-4, pgMax = currentPageNo+ 5, maxPages = Math.ceil(totalResultsCount/resultsPerPage);\n    if(pgMin<1)pgMin =1;\n    if(pgMax<1)pgMax =1;\n    if(maxPages<1)maxPages =1;\n    if(pgMin>maxPages)currentPageNo =maxPages;\n    var tmp={};\n    var href = '';\n\n    var cRoute = FlowRouter.current();\n    // params: {pageno: undefined}\n    // path: \"/account/myproperies\"\n    // pathname: \"/account/myproperies\"\n    // queryParams: {}\n    // queryString: null\n    // route: Route {options: {…}, name:\n\n    for (var i=pgMin; i<=maxPages;i++){\n        cRoute.params['pageno'] = i;\n        href = FlowRouter.url(cRoute.route.name,cRoute.params,cRoute.queryParams)\n        tmp = {\n            \"href\": href,\n            \"text\": i\n        }\n        if(i== currentPageNo) {\n            tmp['href'] = 'javascript:void(0);';\n            tmp['current'] = true;\n        }\n        pages.push(tmp)\n    }\n    var prevPageNo = currentPageNo- 1, nextPageNo=currentPageNo+ 1;\n    if(prevPageNo<1){\n        prevPage['href'] = 'javascript:void(0)';\n        prevPage['text'] = 'Previous';\n        prevPage['disabled'] = 'disabled';\n    }else{\n        cRoute.params['pageno'] = prevPageNo;\n        prevPage['href'] = FlowRouter.url(cRoute.route.name,cRoute.params,cRoute.queryParams)\n        prevPage['text'] = 'Previous';\n    }\n    if(nextPageNo>maxPages)nextPageNo =maxPages;\n    if(nextPageNo == currentPageNo){\n        nextPage['href'] = 'javascript:void(0)';\n        nextPage['text'] = 'Next';\n        nextPage['disabled'] = 'disabled';\n    }else{\n        cRoute.params['pageno'] = nextPageNo;\n        prevPage['href'] = FlowRouter.url(cRoute.route.name,cRoute.params,cRoute.queryParams)\n        nextPage['text'] = 'Next';\n    }\n    return {\n        \"prevPage\":prevPage,\n        \"pages\":pages,\n        \"nextPage\": nextPage\n    }\n}\n\n\nTemplate.registerHelper(\"objectToPairs\",function(object){\n    return _.map(object, function(value, key) {\n        return {\n            key: key,\n            value: value\n        };\n    });\n});\nTemplate.registerHelper(\"hostname\",function(){\n    return Meteor.absoluteUrl();\n});\nfunction numDifferentiation(val) {\n    if(val >= 1000000000) val = (val/1000000000).toFixed(2) + ' Billion';\n    else if(val >= 1000000) val = (val/1000000).toFixed(2) + ' Million';\n    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\nfunction numFormat(x) {\n    //var x=12345652457.557;\n    //console.log(x)\n    if(!x)return x;\n    x=x.toString();\n    var afterPoint = '';\n    if(x.indexOf('.') > 0)\n        afterPoint = x.substring(x.indexOf('.'),x.length);\n    afterPoint = afterPoint.substr(0,3);\n    x = Math.floor(x);\n    x=x.toString();\n    var lastThree = x.substring(x.length-3);\n    var otherNumbers = x.substring(0,x.length-3);\n    if(otherNumbers != '')\n        lastThree = ',' + lastThree;\n    var res = otherNumbers.replace(/\\B(?=(\\d{2})+(?!\\d))/g, \",\") + lastThree + afterPoint;\n    return res;\n}\n\n\n\nTemplate.myProperties.events({\n    \"click .clearFilters\": function (event, template) {\n        //FlowRouter.query.clear();\n\n        console.log('in .clearFilters meteor event')\n        var defaultFilters = Session.get('projectData');defaultFilters = defaultFilters.filter;\n        $('.filterUnitFacing, .filterUnitType').val('any');\n        resetUISlider(defaultFilters);\n        setFilters(defaultFilters);\n        $.fancybox.close();\n        applyClearFiltersEvent();\n    },\n    \"click .addPropertyBtn\": function (event, template) {\n        var user = Accounts.user();\n        if(!user.profile.mobile){\n            var mobile = false, failed = false;\n            while(1) {//This is an un limited loop of mobile number.\n                if(failed) mobile = prompt(\"'\"+mobile+\"' is not a valid number. Please enter a valid mobile to proceed. \");\n                else mobile = prompt(\"You don't have a mobile number attached to your profile. Please enter mobile to proceed. \");\n                if( mobile == null || /^\\d{10}$/.test(mobile) ) break;\n                else{\n                    failed = true;\n                }\n            }\n            if(/^\\d{10}$/.test(mobile)) {\n                Meteor.call('updateMobile', mobile, function (error, result) {\n                    if (error) {\n                        console.log(error.error);\n                        var tmp = Session.get(\"showErrorDlg\");\n                        var msg = 'Mobile number update failed. Please try again. Contact us if needed.';\n                        tmp.push(msg);\n                        Session.set(\"showErrorDlg\", tmp)\n\n                        return;\n                    }\n                });\n            }\n        }\n        if(template.showAddProperty.get() )template.showAddProperty.set(false);\n        else template.showAddProperty.set(true);\n    },\n    \"change .new-filter select\":function(event, template){\n        console.log(\"Filters changed\");\n        applyFilters();\n    }\n})\nTemplate.myProperties.onCreated(function(){\n    this.showAddProperty = new ReactiveVar( false );\n    this.totalResultsCount = new ReactiveVar( 0 );\n\n    var globalFILTERS = getFiltersFromRoute();\n    Session.set('globalFILTERS',globalFILTERS);\n    // Session.set('enableDelayedFunctions',false);\n    Blaze._allowJavascriptUrls();\n\n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.autorun(function(){\n        // FlowRouter.watchPathChange()\n        var pageno = FlowRouter.getParam('pageno');\n        var resperpage = 20;\n        var onlyActive = false;//Show only active properties\n        try{\n            resperpage = FlowRouter.getQueryParam('resperpage');\n            onlyActive = FlowRouter.getQueryParam('onlyActive');\n        }catch(e){}\n        instance.subscribe('Config');\n        instance.subscribe('total-MyProperties',{onlyActive:onlyActive});\n        instance.subscribe(\"MyProperties\",{viewName: 'MyProperties.view',pageno:pageno,resperpage:resperpage,onlyActive:onlyActive}) ;\n        // instance.subscribe('Areas');\n        instance.subscribe('userData');\n        if(instance.subscriptionsReady()){\n            instance.isSubsLoaded.set(true)\n            totalResultsCount = Counts.get(\"total-MyProperties\");\n            if(!totalResultsCount)instance.showAddProperty.set(true);//if no properties, then show it\n        }\n    })\n    // Session.set('assistanceRequested',false)\n    // Meteor.call('getDateFromServer',[],function(error, success){\n    //     Session.set('getDateFromServer',success)\n    // })\n    // Session.set('globalConfig', Collections.Config.findOne());\n    // var ret = getProjectData();\n    // Session.set('projectData',ret);\n})\nTemplate.myProperties.helpers({\n    isSubsLoaded:function(){\n        return Template.instance().subscriptionsReady();\n    },\n    userLoggedIn:function(){\n        if(Meteor.user())return true;\n        return false;\n    },\n    data : function () {\n        if(!Template.instance().subscriptionsReady())return false;\n        var user = Meteor.user();\n        if(!user) return {\n            results: [],\n            totalResultsCount:0,\n            pagination: getPaginationData(0,1,'',10)\n        }\n        var selector = {createdByAgent:user._id,isArchived:false};//let limit = 10;\n        // debugger;\n\n        var FILTERS = Session.get('globalFILTERS')\n        var defaultFilters = getDefaultFilters();\n\n        // var arr = [];\n        // if(  FILTERS['homeType'] ){\n        //     if(FILTERS['homeType'].length) {\n        //         if(FILTERS['homeType'].length != defaultFilters.homeType.length)\n        //             selector['homeType'] = FILTERS['homeType'][0]\n        //         /*\n        //          // var arr = [];\n        //          for (var i = 0; i < FILTERS['homeType'].length; i++) {\n        //          arr.push({\"homeType\": FILTERS['homeType'][i]})\n        //          console.log(\"homeType\"+ FILTERS['homeType'][i])\n        //          }*/\n        //         // selector['$or'] = arr;//BUG: this or will over write or of facing; or of homeType will collide with this and\n        //         // while logic won't work\n        //\n        //     }\n        // }\n        // if(  FILTERS['facing'] ){\n        //     if(FILTERS['facing'].length) {\n        //         if(FILTERS['facing'].length != defaultFilters.facing.length)\n        //             selector['facing'] = FILTERS['facing'][0]\n        //         /*\n        //          var arr = [];\n        //          for (var i = 0; i < FILTERS['facing'].length; i++) {\n        //          arr.push({\"facing\": FILTERS['facing'][i]})\n        //          }\n        //          // selector['$or'] = arr;//BUG: this or will over write or of homeType; or of homeType will collide with this and\n        //          // while logic won't work\n        //          */\n        //     }\n        // }\n        // if(arr.length){\n        //     selector['$or'] = arr;\n        // }\n        // if( FILTERS['floor'] ){\n        //     var val_l = FILTERS['floor'][0];\n        //     var val_h = FILTERS['floor'][1];\n        //\n        //     if(isNaN(val_l) && isNaN(val_h)){//Both are not valid numbers\n        //\n        //     }else if(!isNaN(val_l) && isNaN(val_h)){//Low is valid and no upper\n        //         selector['floorLevel'] =  { $gte: parseInt(val_l) }\n        //     }else if(isNaN(val_l) && !isNaN(val_h)){//Upper is valid and no lower\n        //         selector['floorLevel'] =  { $lte: parseInt(val_h) }\n        //     }else{//Both are valid\n        //         selector['floorLevel'] =  { $gte: parseInt(val_l), $lte: parseInt(val_h) }\n        //     }\n        // }\n        // if( FILTERS['priceRange'] ){\n        //     var val_l = FILTERS['priceRange'][0];\n        //     var val_h = FILTERS['priceRange'][1];\n        //\n        //     if(isNaN(val_l) && isNaN(val_h)){//Both are not valid numbers\n        //\n        //     }else if(!isNaN(val_l) && isNaN(val_h)){//Low is valid and no upper\n        //         selector['priceBreakUp.totalAllInclusive'] =  { $gte: parseInt(val_l) }\n        //     }else if(isNaN(val_l) && !isNaN(val_h)){//Upper is valid and no lower\n        //         selector['priceBreakUp.totalAllInclusive'] =  { $lt: parseInt(val_h) }\n        //     }else{//Both are valid\n        //         selector['priceBreakUp.totalAllInclusive'] =  { $gte: parseInt(val_l), $lte: parseInt(val_h) }\n        //     }\n        // }\n\n        /////PAGINATION\n        var resultsPerPage = 20;\n        var currentPageNo = FlowRouter.current().params.pageno;\n        if(!currentPageNo){currentPageNo = 1}\n        var skip = (currentPageNo -1) * resultsPerPage;\n        var urlBase = 'account/myproperies/';\n\n\n        var totalResultsCount = Counts.get(\"total-MyProperties\");\n        Template.instance().totalResultsCount.set(totalResultsCount)\n\n        var ret = Collections.Properties.find(selector, {\n            transform: function(doc) {\n                doc.bedroomsCount=0\n                // console.log('May be here');\n                // console.log(doc)\n                if(doc.bedrooms){\n                    doc.bedroomsCount = doc.bedrooms.length;\n                }\n                if(doc.auctionId) {\n                    doc.auction = Collections.Auctions.findOne({\n                        _id: doc.auctionId\n                    });\n                }\n                return doc;\n            },\n            // limit: resultsPerPage,\n            sort: { updatedAt : -1 },\n            // skip: skip\n        });\n\n\n\n        return {\n            results: ret,\n            totalResultsCount:totalResultsCount,\n            pagination: getPaginationData(totalResultsCount,currentPageNo,urlBase,resultsPerPage)\n        };\n    },\n    showDemoProp:function () {\n        var currentPageNo = FlowRouter.current().params.pageno;\n        if(!currentPageNo || currentPageNo==1){\n            var count = Collections.Properties.find({createdByAgent:'demoproperty',isArchived:false},{limit: 1}).count();\n            if(count>0)\n            return true;\n        }\n        return false;\n    },\n    demoProperty:function () {\n        return Collections.Properties.find({createdByAgent:'demoproperty',isArchived:false}, {\n            transform: function(doc) {\n                doc.bedroomsCount=0\n                if(doc.bedrooms){\n                    doc.bedroomsCount = doc.bedrooms.length;\n                }\n                if(doc.auctionId) {\n                    doc.auction = Collections.Auctions.findOne({\n                        _id: doc.auctionId\n                    });\n                }\n                return doc;\n            },\n            limit: 1\n        })\n    },\n    showAddProperty: function () {\n        if(Session.get('hideAddPropertyForm') ){\n            Template.instance().showAddProperty.set(false);\n            Session.set('hideAddPropertyForm',false)\n            scrollTo('.addPropertyBtn',50,500)\n        }else{\n            if(!fsClient) {\n                import filestack from 'filestack-js';\n                const apikey = 'AIPACLEs7ShGwwPh6fMTxz';\n                fsClient = filestack.init(apikey, {\n                    policy: 'eyJleHBpcnkiOjE4NjE5MjAwMDAsImNhbGwiOlsicGljayIsInJlYWQiLCJzdGF0Iiwid3JpdGUiLCJ3cml0ZVVybCIsInN0b3JlIiwiY29udmVydCIsInJlbW92ZSIsImV4aWYiXX0=',\n                    signature: '465e8652c5cef95f44e5858e09d430abea855d98deaeb7425558f2c80d0f4f57'\n                });\n            }\n        }\n\n        return Template.instance().showAddProperty.get();\n    },\n    showFilters: function(){\n        return false;\n    },\n    projectData : function () {\n        // var ret = getProjectData();\n        var ret = {};\n        // Session.set('projectData',ret);\n        return ret;\n    },\n    filters:function(){\n        var data = {}//{\"Home Type\":[\"2 BHK\"],\"Floor\":[\"2 to 15\"],\"Price Range\":[\"67.45 to 97.45 \"]}\n        var FILTERS = Session.get('globalFILTERS')\n        var defaultFilters = Session.get('projectData');defaultFilters = defaultFilters.filter;\n        if( FILTERS['homeType']  ){\n            if(FILTERS['homeType'].length) {\n                if( !isArraysEqual( defaultFilters.homeType , FILTERS['homeType']) )\n                    data['Home Type'] = FILTERS['homeType'];\n            }\n        }\n        if( FILTERS['facing']  ){\n            if(FILTERS['facing'].length) {\n                if( !isArraysEqual( defaultFilters.facing , FILTERS['facing']) )\n                    data['Facing'] = FILTERS['facing'];\n            }\n        }\n        if(  FILTERS['floor'] ){\n            var hasLowerLimit = false, hasUpperLimit = false;\n            var l1 = parseInt(FILTERS['floor'][0]);\n            if(l1 !=0 && l1 != defaultFilters.floor[0])hasLowerLimit = true;\n\n            var l2 = parseInt(FILTERS['floor'][1]);\n            if( l2 != defaultFilters.floor[1])hasUpperLimit = true;\n\n            if(hasLowerLimit && !hasUpperLimit){//Only LowerLimit\n                data['Floor'] = [ 'More than '+l1 ]\n            }else if(!hasLowerLimit && hasUpperLimit){//Only UpperLimit\n                data['Floor'] = [ 'Below '+l2 ]\n            }else if(hasLowerLimit && hasUpperLimit){//Both are there\n                data['Floor'] = [ 'Between '+l1+\" and \"+l2 ]\n            }else{}//Both are not there. So don't show filter.\n\n        }\n\n        if(  FILTERS['priceRange'] ){\n            var hasLowerLimit = false, hasUpperLimit = false;\n            var l1 = parseInt(FILTERS['priceRange'][0]);\n            if(l1 !=0 && l1 != defaultFilters.priceRange[0])hasLowerLimit = true;\n\n            var l2 = parseInt(FILTERS['priceRange'][1]);\n            if( l2 != defaultFilters.priceRange[1])hasUpperLimit = true;\n\n            if(hasLowerLimit && !hasUpperLimit){//Only LowerLimit\n                data['Price Range'] = [ 'More than '+numDifferentiation(l1) ]\n            }else if(!hasLowerLimit && hasUpperLimit){//Only UpperLimit\n                data['Price Range'] = [ 'Below '+numDifferentiation(l2) ]\n            }else if(hasLowerLimit && hasUpperLimit){//Both are there\n                data['Price Range'] = [ 'Between '+numDifferentiation(l1)+\" to \"+numDifferentiation(l2) ]\n            }else{}//Both are not there. So don't show filter.\n\n        }\n        //if( FILTERS['priceRange'] ){\n        //  data['Price Range'] =  [ numDifferentiation(FILTERS['priceRange'][0]) +\" to \"+ numDifferentiation(FILTERS['priceRange'][1]) ]\n        //}\n        applyClearFiltersEvent();\n\n        return {\n            data:data,\n            count: Object.keys(data).length\n        };\n    },\n    // time: function(){\n    //\n    //     var projectData = Session.get('projectData');\n    //     var timestamp = TimeSync.serverTime(null, 30000);\n    //     if(!projectData.auction.endDate || !timestamp)return;\n    //\n    //\n    //     var dend = Date.parse(projectData.auction.endDate);\n    //     var timeDiff = dend - timestamp ;\n    //     if(timeDiff<0)return false;\n    //\n    //     var day = Math.floor(timeDiff / (1000 * 3600 * 24))\n    //     var hour = Math.floor(timeDiff / (1000 * 3600 ))\n    //     var min = Math.floor(timeDiff / (1000 * 60 ) )\n    //     hour = hour - (day * 24);\n    //     min = min - (day * 24* 60) - (hour * 60);\n    //     return {\"day\":day,\"hour\":hour,\"min\":min}\n    // },\n    isAuctionClosed:function(){\n        // var timestamp = TimeSync.serverTime(null, 30000);\n        var timestamp = new Date();\n        var projectData = Session.get('projectData');\n        var dend = Date.parse(projectData.auction.endDate);\n        var timeDiff = dend - timestamp;\n        if(timeDiff<0){\n            return true;\n        }\n        return false;\n    },\n    numDifferentiation: function(data){\n        return numDifferentiation(data);\n    },\n    agentStats: function(){\n        var user = Meteor.user();\n        if(user) {\n            if(!user.profile.activeAuctions)user.profile.activeAuctions=0\n            if(!user.profile.totalAuctions)user.profile.totalAuctions=0\n            if(!user.profile.totalBidsReceived)user.profile.totalBidsReceived=0\n            if(!user.profile.bidsReceivedActiveAuctions)user.profile.bidsReceivedActiveAuctions=0\n            if(!user.profile.bidProfitActive)user.profile.bidProfitActive=0\n            if(!user.profile.totalBidProfit)user.profile.totalBidProfit=0\n            return {\n                activeAuctions:user.profile.activeAuctions,\n                totalAuctions:user.profile.totalAuctions,\n                totalBidsReceived:user.profile.totalBidsReceived,\n                bidsReceivedActiveAuctions:user.profile.bidsReceivedActiveAuctions,\n                bidProfit:user.profile.bidProfitActive,\n                totalBidProfit:(user.profile.totalBidProfit*12)\n            };\n        }\n        return {\n            activeAuctions:0,\n            totalAuctions:0,\n            totalBidsReceived:0,\n            bidsReceivedActiveAuctions:0,\n            bidProfit:0,\n            totalBidProfit:0\n        };\n    }\n\n})\nTemplate.propertyList.onCreated(function(){\n    this.expanded = new ReactiveVar( false );\n    this.showAddAuctionForm = new ReactiveVar( false );\n    \n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.isSubsLoadedAttempted = new ReactiveVar(false);\n    //Meteor.default_connection._subscriptions //To get the list of scbscriptions\n    instance.autorun(function(){\n        try{\n            if(instance.data.auctionId && !instance.data.auction){\n                instance.isSubsLoadedAttempted.set(true)\n                instance.subscribe('Advertisement',instance.data.auctionId);\n            }else if(instance.data.auction){\n                instance.isSubsLoaded.set(true)\n                instance.isSubsLoadedAttempted.set(true)\n            }\n            if(instance.subscriptionsReady()){\n                instance.isSubsLoaded.set(true)\n            }\n        }catch(e){\n            instance.isSubsLoaded.set(true)\n        }\n    })\n})\nTemplate.propertyList.helpers({\n    isSubsLoaded:function(){\n        return Template.instance().subscriptionsReady();\n    },\n    expanded: function(){\n        return Template.instance().expanded.get() ;\n    },\n    showAddAuctionForm: function () {\n        return Template.instance().showAddAuctionForm.get();\n    },\n    numDifferentiation: function(data){\n        return numDifferentiation(data);\n    },\n    auction:function(){\n        if(this.auction) return this.auction;\n        if(this.auctionId){\n            let ret = Collections.Auctions.find({_id: this.auctionId}).fetch();\n            let attempt = Template.instance().isSubsLoadedAttempted.get()\n            \n            if(this.auctionId && !ret.length && !attempt){\n                Template.instance().subscribe('Advertisement',this.auctionId);\n                Template.instance().isSubsLoadedAttempted.set(true);\n            }\n    \n            if(ret) return ret[0];\n        }\n        return false;\n    },\n    lettingprintviewData:function () {\n        if(!this.auction)return \"\"\n        return this.auction.lettingAuctionCode\n        // if(!this.auction)return {key:\"\"}\n        // return {key:this.auction.lettingAuctionCode}\n    },\n    showEditPropertyForm:function(){\n        return FlowRouter.url('account/editproperty',{id:this._id})\n    }\n})\nTemplate.propertyList.events({\n    \"click .see_more_btn\": function (event, template) {\n        if(template.expanded.get() )template.expanded.set(false);\n        else template.expanded.set(true);\n    },\n    \"click .ActivateBtn\": function (event, template) {\n        if(!template.showAddAuctionForm.get() )template.showAddAuctionForm.set(true);\n    },\n    \"click .showEditPropertyForm\": function (event, template) {\n        var prevRoute = {name: FlowRouter.current().route.name,args:{pageno:FlowRouter.current().params.pageno,scrollTo:0} }\n        Session.set('prevRoute',prevRoute);\n\n        // FlowRouter.go('account/editproperty',{id:this._id})\n\n    },\n    \"click .managePropertyLink\": function (event, template) {\n        var prevRoute = {name: FlowRouter.current().route.name,args:{pageno:FlowRouter.current().params.pageno,scrollTo:0} }\n        Session.set('prevRoute',prevRoute);\n\n        FlowRouter.go('account/propertyManage',{id:this._id})\n    },\n    \"click .hideAddAuctionForm\": function (event, template) {\n        if(template.showAddAuctionForm.get() )template.showAddAuctionForm.set(false);\n        propId = this._id;\n        scrollTo('#property_'+propId,0,700)\n\n    },\n    \"click .viewApplications\": function (event, template) {\n        var prevRoute = {name: FlowRouter.current().route.name,args:{pageno:FlowRouter.current().params.pageno} }\n        Session.set('prevRoute',prevRoute);\n\n        FlowRouter.go(\"account/propertyApplications\",{id:this._id});\n    },\n    \"click .showCopyDlg\": function (event, template) {\n        let user = Meteor.user();\n        let sluggedName = slugifyEmailAddress(user.profile.name);\n        if(!sluggedName)sluggedName = 'rent'\n        let email = sluggedName+'-let-'+this.auction.lettingAuctionCode.toLowerCase()+\"@spotmycrib.ie\";\n        $('#agentPropertyEmailField').val(email);\n\n        var url = FlowRouter.url('letting',{key:this.auction.lettingAuctionCode})\n        $('#propertyLinkField').val(url);\n        $.fancybox({\n            'padding': 0,\n            'href': '#propertyLinkDlg',\n            afterShow:function(template){\n                $('#agentPropertyEmailField').select();\n                $('#propertyLinkDlg .copyEmailBtn').unbind().bind('click',function () {\n                    $('#agentPropertyEmailField').select();\n\n                    try {\n                        var successful = document.execCommand('copy');\n                        var msg = successful ? 'successful' : 'unsuccessful';\n                        // console.log('Copying text command was ' + msg);\n                        $.fancybox.close()\n                    } catch (err) {\n                        console.log('Oops, unable to copy');\n                    }\n                    ga('send', 'event', 'myPropertiesPage', 'copyShareEmail', 'copyShareEmail Btn Clicked');\n                })\n                $('#propertyLinkDlg .copyLinkBtn').unbind().bind('click',function () {\n                    $('#propertyLinkField').select();\n\n                    try {\n                        var successful = document.execCommand('copy');\n                        var msg = successful ? 'successful' : 'unsuccessful';\n                        // console.log('Copying text command was ' + msg);\n                        $.fancybox.close()\n                    } catch (err) {\n                        console.log('Oops, unable to copy');\n                    }\n                    ga('send', 'event', 'myPropertiesPage', 'copyShareLink', 'copyShareLink Btn Clicked');\n                })\n                $('#propertyLinkDlg .cancelBtn').unbind().bind('click',function () {\n                    $.fancybox.close()\n                })\n            },\n        });\n\n    },\n});\nTemplate.addPropertyForm.onCreated(function(){\n    if(!Session.get('addPropertyImages')) {// Lets do this. Anyways we have delete button.\n        Session.set('addPropertyImages', []);\n        S3.collection.remove({})\n\n        var user = Meteor.user();\n        try {\n            if (user.profile.session.addproperty.gallery){\n                Session.set('addPropertyImages', user.profile.session.addproperty.gallery);\n            }\n        }catch(e){}\n\n    }\n    this.numBedRoomCount = new ReactiveVar( 0 );\n    this.addPropertyFormSaving = new ReactiveVar( false );\n    this.countySelected = new ReactiveVar( false );\n    saveAndAdvertise=false;\n\n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.autorun(function(){\n        if(instance.countySelected.get()){\n            instance.isSubsLoaded.set(false)\n            instance.subscribe('Areas','','',instance.countySelected.get(),'','');\n        }\n        if(instance.subscriptionsReady()){\n            instance.isSubsLoaded.set(true)\n        }\n    })\n})\nTemplate.addPropertyForm.helpers({\n    isSA:function(){\n        var user = Meteor.user();\n        if(user.isSA)return true;\n        return false;\n    },\n    countries:function(){\n        return [{label: \"Ireland\", value: \"Ireland\", selected:\"selected\"}];//Both capital\n    },\n    counties:function(){\n        let staticCounties = [\"Carlow\", \"Cavan\", \"Clare\", \"Cork\", \"Donegal\", \"Dublin\", \"Galway\", \"Kerry\", \"Kildare\", \"Kilkenny\", \"Laois\", \"Leitrim\", \"Limerick\", \"Longford\", \"Louth\", \"Mayo\", \"Meath\", \"Monaghan\", \"Offaly\", \"Roscommon\", \"Sligo\", \"Tipperary\", \"Waterford\", \"Westmeath\", \"Wexford\", \"Wicklow\"];\n        let ret = []\n        for(let i=0;i< staticCounties.length;i++){\n            if(!staticCounties[i])continue;\n            ret.push({label: titleCase(staticCounties[i]), value: staticCounties[i] })\n        }\n        return ret;\n        // return [{label: \"Dublin\", value: \"dublin\"}];//Both capital\n        // var distinctEntries = _.uniq(Collections.Areas.find({}, {\n        //     sort: {County: 1}, fields: {County: true}\n        // }).fetch().map(function(x) {\n        //     return x.County;\n        // }), true);\n        // var ret = []\n        // for(var i=0;i< distinctEntries.length;i++){\n        //     if(!distinctEntries[i])continue;\n        //     ret.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n        // }\n        // return ret;\n    },\n    areas:function(){\n        var countySelected = Template.instance().countySelected.get();\n        if(!countySelected){\n            var doc = Collections.Properties.findOne(); if(!doc)return [];\n            Template.instance().countySelected.set(doc.address.county);\n            countySelected = doc.address.county;\n        }\n\n        var distinctEntries = _.uniq(Collections.Areas.find({County:countySelected}, {\n            sort: {Area: 1}, fields: {Area: true}\n        }).fetch().map(function(x) {\n            return x.Area;\n        }), true);\n        var ret = []\n        for(var i=0;i< distinctEntries.length;i++){\n            if(!distinctEntries[i])continue;\n            ret.push({label: titleCase(distinctEntries[i]), value: distinctEntries[i] })\n        }\n        return ret;\n    },\n    propertyTypes:function(){\n        var Config = Collections.Config.find().fetch();Config = Config[0];\n        var ret = []\n        for(var i=0;i< Config.propertyType.length;i++){\n            ret.push({label: titleCase(Config.propertyType[i].name), value: Config.propertyType[i].value})\n        }\n        return ret;\n    },\n    numBedRoomCount:function () {\n        var c = Template.instance().numBedRoomCount.get();\n        if(c<100)return Template.instance().numBedRoomCount.get();\n        else return 0;\n    },\n    addPropertyFormSaving:function () {\n        return Template.instance().addPropertyFormSaving.get();\n    },\n    ensuiteLoop: function(count){\n        var countArr = [];\n        for (var i=0; i<count; i++){\n            countArr.push({i:i+1});\n        }\n        return countArr;\n    }\n})\nTemplate.addPropertyForm.events({\n    \"click .openFileUploader\":function (event, template) {\n        event.preventDefault();\n        openPicker();\n        // filename\n        //     :\n        //     \"webcam-1/12/2018, 6:53:25 PM.png\"\n        // handle\n        //     :\n        //     \"G8lStVqHTiGnwxof6d5y\"\n        // mimetype\n        //     :\n        //     \"image/png\"\n        // originalFile\n        //     :\n        // {name: \"webcam-1/12/2018, 6:53:25 PM.png\", type: \"image/png\", size: 630585}\n        // originalPath\n        //     :\n        //     \"webcam-1/12/2018, 6:53:25 PM.png\"\n        // size\n        //     :\n        //     629612\n        // source\n        //     :\n        //     \"local_file_system\"\n        // status\n        //     :\n        //     \"Stored\"\n        // uploadId\n        //     :\n        //     \"ba2fe36e9fd182ec0cb88236d676cefad\"\n        // url\n        //     :\n        //     \"https://cdn.filestackcontent.com\n        return;\n    },\n    'change .selectPropertyImages': function(event, template) {\n        var files = event.target.files;\n        S3.upload({\n            files:files,\n            path:\"propertyImagesLarge\"\n        },function(e,r){\n            if(e)throw new Meteor.Error('Upload failed ', e);\n            var addPropertyImages = Session.get('addPropertyImages');\n            addPropertyImages.push(r);\n            Session.set('addPropertyImages',addPropertyImages);\n            console.log(r);\n        });\n        // for (var i = 0, ln = files.length; i < ln; i++) {\n        //     propertyImagesCollection.insert(files[i], function (err, fileObj) {\n        //         // Inserted new doc with ID fileObj._id, and kicked off the data upload using HTTP\n        //         console.log(fileObj);\n        //         var cursor = propertyImagesCollection.find(fileObj._id);\n        //\n        //         var liveQuery = cursor.observe({\n        //             changed: function(newImage, oldImage) {\n        //\n        //                 console.log(\"Inside live query \");\n        //                 console.log(newImage);\n        //                 if (newImage.isUploaded()) {\n        //                     liveQuery.stop();\n        //\n        //                     // Call your onUploaded callback here...\n        //                 }\n        //             }\n        //         });\n        //     });\n        // }\n    },\n    'change .countySelected': function(event, template) {\n        template.countySelected.set(event.target.value);\n    },\n    'change .url': function(event, template) {\n        var url = event.target.value;\n        if(!url)return false;//Empty url\n\n        Meteor.call('importPost',url,function(error,doc){\n            if(error){\n                console.log(error)\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                var msg = 'An error occurred.';\n                if(error.reason)msg += ' '+error.reason+'.'\n                else if(error.message)msg += ' '+error.message+'.'\n                tmp.push(msg);\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n\n            $( \"input[name='address.address']\" ).val(doc.address.address);\n            $( \"input[name='price']\" ).val(doc.rent);\n            $( \"select[name='address.county']\" ).val(doc.address.county).trigger('change');\n            setTimeout(function(){$( \"select[name='address.area']\" ).val(doc.address.area);},2000)\n            setTimeout(function(){$( \"select[name='address.area']\" ).val(doc.address.area);},4000)\n            $( \"select[name='type']\" ).val(doc.type.toLowerCase());\n            $( \"select[name='furnished']\" ).val(doc.furnished.toString());\n            $( \"input[name='baths']\" ).val(doc.baths);\n            $( \"input[name='numBedRoomCount']\" ).val(doc.numBedRoomCount).trigger('change');\n            $( \"textarea[name='about']\" ).val(doc.about).trigger('keyup');\n            $( \"input[name='contacts.0.name']\" ).val(doc.contacts[0].name);\n            var number = \"\";\n            try{\n                number = doc.contacts[0].phone\n            }catch(e){}\n            if(number){\n                try{\n                    number = atob(number)\n                    number = number.replace(/\\s+/g, '')\n                }catch(e){}\n                $( \"input[name='contacts.0.phone']\" ).val(number);\n            }\n            if(doc.amenities){\n                for (var i = 0; i < doc.amenities.length; i++) {\n                    $(\"input[value='\"+doc.amenities[i]+\"']\").prop('checked', true);\n                }\n            }\n            var tmp = {};\n            if(doc.gallery) {\n                var addPropertyImages = Session.get('addPropertyImages');if(!addPropertyImages)addPropertyImages=[]\n                var galleryLen = doc.gallery.length,galleryStoredLen=0;\n                // var galleryLen = 1,galleryStoredLen=0;\n                for (var i = 0; i < doc.gallery.length; i++) {\n                    // if(i>0)break;\n                    fsClient.storeURL(doc.gallery[i],{filename: 'Image '+i+1}).then(function(response) {\n                            console.log(JSON.stringify(response));\n                        // {\"url\":\"https://cdn.filestackcontent.com/QH10tMaGTrSgFweORrip\",\"size\":111949,\"type\":\"image/jpeg\",\"filename\":\"Image 01\",\"handle\":\"QH10tMaGTrSgFweORrip\"}\n                            tmp = {\n                                name: response.filename,\n                                url: response.url,\n                                handle: response.handle,\n                                mimetype: response.mimetype,\n                                // originalFile: doc.gallery[i],\n                                // originalPath: doc.gallery[i],\n                                size: response.size,\n                                // source: response.source,\n                                // status: response.status,\n                                // uploadId: response.uploadId\n                            }\n                            console.log(tmp)\n                            addPropertyImages.push(tmp);\n                            galleryStoredLen++;\n                            if(galleryStoredLen==galleryLen){//Now its fully imported\n                                Session.set('addPropertyImages', addPropertyImages);\n                                updateGalleriesInProfile(addPropertyImages, function (err, res) {//No need to show error. Because its just a backup.\n                                    var addPropertyImages = Session.get('addPropertyImages');\n                                    console.log(\"Current Count: \" + addPropertyImages.length)\n                                });\n                            }\n                        }\n                    );\n                }\n\n\n\n            }\n\n        })\n    },\n    'keyup .autoGrowTA': function(event, template) {\n        var element = event.target;\n        element.style.height = \"5px\";\n        if(element.scrollHeight<310)element.style.height = (element.scrollHeight)+\"px\";\n        else element.style.height = \"310px\";\n    },\n    'change #numBedRoomCount': function(event, template) {\n        var numBedRoomCount = parseInt($(event.target).val());\n        if(isNaN(numBedRoomCount))return;\n        Template.instance().numBedRoomCount.set(numBedRoomCount);\n        t1 = template;\n        setTimeout(function () {\n            t1.$('#addPropertyFormCF').validate();\n        },500)\n    },\n    'submit form': function(event){\n        event.preventDefault();\n    },\n    \"click .addPropertyFormSaveAdvertiseBtn\": function(event, template) {\n        saveAndAdvertise=true;\n        $('#addPropertyFormCF').submit();\n    },\n    \"click .addPropertyFormCancelBtn\": function(event, template) {\n        Session.set('hideAddPropertyForm',true)\n    },\n    'change input[name=price]':function(event, template){\n        if(event.target.value){\n            var tmp = event.target.value.split('.');tmp=tmp[0]//No decimals\n            tmp = tmp.trim().match(/\\d+/g)\n            if(!Array.isArray(tmp))event.target.value = '';\n            event.target.value = tmp.join('');\n        }\n    },\n});\nTemplate.addPropertyForm.onRendered(function () {\n    // this.$('#addPropertyFormCF').validate();\n    addPropertyFormSaving = this.addPropertyFormSaving\n    var validator = this.$('#addPropertyFormCF').validate({\n        submitHandler: function(event){\n            addPropertyFormSaving.set(true);\n            console.log(\"You just submitted the 'addPropertyForm' form.\");\n            Meteor.call('addProperty',$('#addPropertyFormCF').serializeArray(),function (error, propertyId) {\n\n                addPropertyFormSaving.set(false);\n                if(error){\n                    console.log(error)\n                    //    validator.showErrors({\n                    //         email: error.reason\n                    //     });\n                    var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                    var msg = 'An error occurred.';\n                    if(error.reason)msg += ' '+error.reason+'.'\n                    else if(error.message)msg += ' '+error.message+'.'\n                    tmp.push(msg);\n                    Session.set(\"showErrorDlg\",tmp)\n                    return;\n                }\n                if(saveAndAdvertise){\n                    Meteor.call('addAdvertisement',$('#addPropertyFormCF').serializeArray(),propertyId,function (error, auctionId) {\n\n                        if(error){\n                            console.log(error)\n                            //    validator.showErrors({\n                            //         email: error.reason\n                            //     });\n                            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                            var msg = 'An error occurred.';\n                            if(error.reason)msg += ' '+error.reason+'.'\n                            else if(error.message)msg += ' '+error.message+'.'\n                            tmp.push(msg);\n                            Session.set(\"showErrorDlg\",tmp)\n                            return;\n                        }\n                        console.log('addAdvertisement created successfully')\n                        console.log(auctionId);\n                        saveAndAdvertise=false;\n                    })\n                }\n\n                var addPropertyImages = Session.get('addPropertyImages');\n                updateGalleriesInServer(addPropertyImages, propertyId, function (err, res) {\n                    Meteor.call('updateGalleriesInUserProfile', [], function(){console.log('Reset the profile backup');});//Reset the profile backup\n                    if (err) {\n                        console.log(err);\n                    } else {\n                        Session.set('addPropertyImages',[]);\n                        S3.collection.remove({})\n                    }\n                })\n                Session.set('hideAddPropertyForm',true)\n            })\n        }\n    });\n})\n\n\nTemplate.advertiseForm.onCreated(function(){\n    this.advertiseFormSaving = new ReactiveVar( false );\n})\nTemplate.advertiseForm.helpers({\n    advertiseFormSaving:function () {\n        return Template.instance().advertiseFormSaving.get();\n    }\n})\nTemplate.advertiseForm.events({\n    'submit form': function(event){\n        event.preventDefault();\n    },\n    'change input[name=price]':function(event, template){\n        if(event.target.value){\n            var tmp = event.target.value.split('.');tmp=tmp[0]//No decimals\n            tmp = tmp.trim().match(/\\d+/g)\n            if(!Array.isArray(tmp))event.target.value = '';\n            event.target.value = tmp.join('');\n        }\n    },\n    \"click .advertiseFormCancelBtn\": function(event, template) {\n        parentIns = template.view.parentView.parentView.parentView.templateInstance();\n        parentIns.showAddAuctionForm.set(false);\n    }\n});\n\nTemplate.advertiseForm.onRendered(function () {\n    this.$('#readyFrom').datetimepicker();\n\n    advertiseFormSaving = this.advertiseFormSaving\n    parentIns = this.view.parentView.parentView.parentView.templateInstance();\n\n    var validator = this.$('#advertiseFormCF').validate({\n        submitHandler: function(event){\n            advertiseFormSaving.set(true);\n            // console.log(\"You just submitted the 'advertise' form.\");\n            Meteor.call('addAdvertisement',$('#advertiseFormCF').serializeArray(),function (error, result) {\n\n                advertiseFormSaving.set(false);\n                if(error){\n                    console.log(error)\n                    //    validator.showErrors({\n                    //         email: error.reason\n                    //     });\n                    var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                    var msg = 'An error occurred.';\n                    if(error.reason)msg += ' '+error.reason+'.'\n                    else if(error.message)msg += ' '+error.message+'.'\n                    tmp.push(msg);\n                    Session.set(\"showErrorDlg\",tmp)\n                    return;\n                }\n                // console.log('addAdvertisement completed successfully')\n                console.log(result);\n                auctionId = result;\n                parentIns.showAddAuctionForm.set(false);\n                scrollTo('.property_auction_'+auctionId,-100,700)\n            })\n        }\n    });\n})\nTemplate.imageView.helpers({\n    images: function () {\n        // return S3.collection.find();\n        return Session.get('addPropertyImages');\n    }\n});\nTemplate.imgTag.events({\n    \"click .editImgBtn\": function (event, template) {\n\n        var addPropertyImages = Session.get('addPropertyImages');\n\n        var newArr = [];\n        if(!addPropertyImages)return;\n        if(!addPropertyImages.length)return;\n\n        index = getIndexByHandle(addPropertyImages, this.handle);\n\n        newArr.push(addPropertyImages[index].url)//put it at first\n\n        const pickOptions = {\n            transformations:{\n                crop:{      force:true,\n                    aspectRatio:1.333},\n                rotate:true},\n            accept: 'image/*',\n            imageMax:[800,600],\n            \"uploadInBackground\": false//Disabled because, bg upload causes 2 uploads towards filestack limits\n        };\n        fsClient.cropFiles(newArr,pickOptions).then( (response) => {\n            var addPropertyImages = Session.get('addPropertyImages');\n\n            //if its conversion from old amazon to new filestack, then it will create a new file, so delete the old file seperatly and insert a new file seperatly.\n\n            if(!response.filesUploaded.length){\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Edit failed: please try again, contact us if needed.\");\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n\n            fsClient.remove(addPropertyImages[index].handle).then(function(result){\n                if(!result.ok){\n                    console.log(result);//Not required to show error to user as this is just edit. If the image appears, he will click delete again\n                }\n                console.log('In fs remove result');\n                var addPropertyImages = Session.get('addPropertyImages');\n                addPropertyImages.splice(index, 1);\n                Session.set('addPropertyImages',addPropertyImages);\n\n                updateGalleriesInProfile(addPropertyImages,function (err, res) {//No need to show error. Because its just a backup.\n                    var addPropertyImages = Session.get('addPropertyImages');\n                    console.log(\"Current Count: \" + addPropertyImages.length)\n                });\n            });\n\n\n\n            var tmp = {};\n            for(var i =0;i<response.filesUploaded.length;i++){\n                tmp = {\n                    name: response.filesUploaded[i].filename,\n                    url: response.filesUploaded[i].url,\n                    handle: response.filesUploaded[i].handle,\n                    mimetype: response.filesUploaded[i].mimetype,\n                    originalFile: response.filesUploaded[i].originalFile,\n                    originalPath: response.filesUploaded[i].originalPath,\n                    size: response.filesUploaded[i].size,\n                    source: response.filesUploaded[i].source,\n                    status: response.filesUploaded[i].status,\n                    uploadId: response.filesUploaded[i].uploadId\n                }\n                // addPropertyImages.push(tmp);\n                addPropertyImages.splice(index+1, 0, tmp);//insert at the index place where its deleted.\n            }\n\n            //Logic to insert new file.\n            Session.set('addPropertyImages',addPropertyImages);\n\n            updateGalleriesInProfile(addPropertyImages, function (err, res) {//No need to show error. Because its just a backup.\n                var addPropertyImages = Session.get('addPropertyImages');\n                console.log(\"Current Count: \" + addPropertyImages.length)\n            });\n        });\n\n\n    },\n    \"click .deleteImgBtn\": function (event, template) {\n\n        var addPropertyImages = Session.get('addPropertyImages');\n        index = getIndexByHandle(addPropertyImages, this.handle);\n\n        fsClient.remove(this.handle).then(function(result){\n            debugger;\n            if(!result.ok){\n                console.log(result);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Deletion failed: please check your internet connection, contact us if needed.\");\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n\n            var addPropertyImages = Session.get('addPropertyImages');\n            addPropertyImages.splice(index, 1);\n            Session.set('addPropertyImages',addPropertyImages);\n\n            updateGalleriesInProfile(addPropertyImages, function (err, res) {//No need to show error. Because its just a backup.\n                var addPropertyImages = Session.get('addPropertyImages');\n                console.log(\"Current Count: \" + addPropertyImages.length)\n            });\n        });\n\n\n\n    },\n    \"click .deleteImgBtnOld\": function (event, template) {\n        console.log(this);\n        var addPropertyImages = Session.get('addPropertyImages');\n        index = getIndex(addPropertyImages, this._id);\n        // debugger;\n        S3.delete(this.relative_url,function(error, result){\n            var addPropertyImages = Session.get('addPropertyImages');\n            S3.collection.remove(addPropertyImages[index]._id);\n            addPropertyImages.splice(index, 1);\n            Session.set('addPropertyImages',addPropertyImages);\n        })\n\n    }\n});\n\n\n\nfunction getIndex(myArray, fileId){\n    for (var i=0; i < myArray.length; i++) {\n        if (myArray[i]._id === fileId) {\n            return i;\n        }\n    }\n}\n\n\n\n\n\nTemplate.myProperties.onRendered(function() {\n    try{\n        jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n    }catch(e){\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n    }\n\n    var prevRoute = Session.get('prevRoute');\n    if(prevRoute){\n        try{\n        if(prevRoute)\n        if(prevRoute.instructions)\n        if(prevRoute.instructions.openPostNewProp){\n            Template.instance().showAddProperty.set(true);\n            setTimeout(function () {\n                jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n            },500)\n        }}catch(e){console.log(e);}\n    }\n\n})\nfunction updateQueryStringParameter(uri, key, value) {\n    var re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n    var separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\n    if (uri.match(re)) {\n        return uri.replace(re, '$1' + key + \"=\" + value + '$2');\n    }\n    else {\n        return uri + separator + key + \"=\" + value;\n    }\n}\nclearFiltersEvent = function(){\n    $('.clearFilterBtn').unbind().click(function(){\n        var val = $(this).closest('span').attr('val');\n        var key = $(this).closest('h5').attr('key');\n        var FILTERS = Session.get('globalFILTERS');\n        var filterDefaults = Session.get('projectData');\n        filterDefaults = filterDefaults.filter;\n\n        // console.log(FILTERS);\n        if(key == \"Home Type\"){\n            var array = FILTERS[\"homeType\"]\n            var index = array.indexOf(val);\n            if (index > -1) {\n                array.splice(index, 1);\n                FILTERS[\"homeType\"]=array;\n            }\n        }\n        else if(key == \"Facing\"){\n            var array = FILTERS[\"facing\"]\n            var index = array.indexOf(val);\n            if (index > -1) {\n                array.splice(index, 1);\n                FILTERS[\"facing\"]=array;\n            }\n        }else if(key == \"Price Range\"){\n            //if(FILTERS[\"priceRange\"][0]==val ){\n            //  FILTERS[\"priceRange\"][0] = filterDefaults.priceRange[0]\n            //}else{\n            //  FILTERS[\"priceRange\"][1] = filterDefaults.priceRange[1]\n            //}\n            FILTERS[\"priceRange\"][0] = filterDefaults.priceRange[0]\n            FILTERS[\"priceRange\"][1] = filterDefaults.priceRange[1]\n\n\n        }else if(key == \"Floor\"){\n            if(FILTERS[\"floor\"][0]==val ){\n                FILTERS[\"floor\"][0] = filterDefaults.floor[0]\n            }else{\n                FILTERS[\"floor\"][1] = filterDefaults.floor[1]\n            }\n        }\n\n        //Session.set('globalFILTERS', FILTERS);\n        setFilters(FILTERS);\n    })\n}\napplyClearFiltersEvent = function(){\n    setTimeout(clearFiltersEvent, 1000);\n    setTimeout(clearFiltersEvent, 3000);\n\n}\nfunction applyFilters(){\n    console.log('event applyFilters jquery')\n    var floorLevelDOM = document.getElementById('range-input');\n    var priceRangeDOM = document.getElementById('range-input1');\n    var tmp = $('.filterUnitType').val();\n    if(tmp == 'any')tmp = [];\n    else tmp = [tmp]\n    globalFILTERS.homeType = tmp;\n    var tmp = $('.filterUnitFacing').val();\n    if(tmp == 'any')tmp = [];\n    else tmp = [tmp]\n    globalFILTERS.facing = tmp;\n    globalFILTERS.floor = floorLevelDOM.noUiSlider.get();\n    globalFILTERS.priceRange = priceRangeDOM.noUiSlider.get();\n    // console.log(globalFILTERS);\n    setFilters(globalFILTERS);\n    $.fancybox.close();\n    applyClearFiltersEvent();\n}\nfunction applyFilterValues(){\n    // console.log('event applyFiltersValues jquery')\n    var floorLevelDOM = document.getElementById('range-input');\n    var priceRangeDOM = document.getElementById('range-input1');\n    var floor = floorLevelDOM.noUiSlider.get();\n    var priceRange = priceRangeDOM.noUiSlider.get();\n    $('.filterS1l').html(floor[0])\n    $('.filterS1h').html(floor[1])\n    $('.filterS2l').html(numDifferentiation(priceRange[0] ))\n    $('.filterS2h').html(numDifferentiation(priceRange[1] ))\n\n}\nfunction delayedCall(functionName){\n    setTimeout(functionName,3000);\n}\nfunction isArraysEqual(array1,array2){\n    var is_same = (array1.length == array2.length) && array1.every(function(element, index) {\n            return element === array2[index];\n        });\n    return is_same;\n}\ncallDelayedFunctions = function(){\n    setTimeout(delayedFunctions, 2000);\n}\nfunction delayedFunctions(){\n    Session.set('enableDelayedFunctions',true)\n    $('.fullyConfirmBlgOKBtn').unbind().click(function(){\n        console.log('fullyConfirmBlgOKBtn called');\n        Session.set('showConfirmFancyBox',false)\n        FlowRouter.query.clear();\n        $.fancybox.close();\n        $('.fancybox-overlay').hide();\n\n\n        setTimeout(function(){\n            var unitid = Session.get('adjustAutoExpandToUnitID');\n            if(unitid){\n                scrollTo('.has-error',0,500)\n                setTimeout(function(){$('html,body').animate({scrollTop: $('#unit_'+unitid).offset().top }, 1000)}, 1000)\n                Session.set('adjustAutoExpandToUnitID','')\n            }\n        },2000)\n\n\n\n    })\n}\nfunction mybidsJqueryEvents(){\n    $('.payNowBtn').unbind().click(function(){\n        console.log(\"jquery event payNowBtn\")\n\n        var redirectURL = FlowRouter.current().originalUrl;\n        if(redirectURL.indexOf('http:') == -1) {\n            var redirectURL = Meteor.absoluteUrl() + FlowRouter.current().originalUrl.substring(1);\n        }\n        var bidId = $(this).attr('bidid');\n        Meteor.call(\"getUnitConfirmationPaymentURL\",[redirectURL,bidId], function(error, result){\n            if(error){\n                return;\n            }\n            window.location.href = result;\n        })\n    })\n    $('.withdrawConfirmBtn').unbind().click(function(){\n        console.log(\"jquery event withdrawBtn\")\n        var bidId = $(this).attr('bidid');\n        Meteor.call(\"withdrawBid\",[bidId], function(error, result){\n            if(error){\n                return;\n            }\n            $.fancybox.close();\n        })\n    })\n    $('.cancelBtn').unbind().click(function(){\n        console.log('event cancelBtn jquery')\n        $.fancybox.close();\n    })\n}\n\nfunction getPriceBreakUp(unit,ratePerSqFt){\n\n    var pricing = unit.priceBreakUp\n    var electricityMultiplier = pricing.statutoryGovtCharges.electricityMultiplier;\n    var constructionRateForVAT = pricing.statutoryGovtCharges.constructionRateForVAT;\n    if(!electricityMultiplier)electricityMultiplier = 140;\n    if(!constructionRateForVAT)constructionRateForVAT = 2100;\n    if(!pricing.landCost)pricing.landCost = 2091;\n\n    unit.superBuiltUpArea = parseFloat(unit.superBuiltUpArea)\n    ratePerSqFt = parseFloat(ratePerSqFt)\n    pricing.landCost = parseFloat(pricing.landCost)\n    electricityMultiplier = parseFloat(electricityMultiplier)\n    constructionRateForVAT = parseFloat(constructionRateForVAT)\n    pricing.basicUnitCost.floorRaiseCharge = parseFloat(pricing.basicUnitCost.floorRaiseCharge)\n    pricing.basicUnitCost.plcCharge = parseFloat(pricing.basicUnitCost.plcCharge)\n    pricing.basicUnitCost.floorRaiseCharge = parseFloat(pricing.basicUnitCost.floorRaiseCharge);\n    pricing.basicUnitCost.plcCharge = parseFloat(pricing.basicUnitCost.plcCharge);\n    pricing.basicUnitCost.totalBasicRatepsft = parseFloat(pricing.basicUnitCost.totalBasicRatepsft)\n    pricing.basicUnitCost.total = parseFloat(pricing.basicUnitCost.total)\n    pricing.agreementValue.infrastructureValue = parseFloat(pricing.agreementValue.infrastructureValue)\n    pricing.agreementValue.clubHouseCharges = parseFloat(pricing.agreementValue.clubHouseCharges)\n    pricing.agreementValue.total = parseFloat(pricing.agreementValue.total)\n    pricing.otherCharges.advanceMaintainence = parseFloat(pricing.otherCharges.advanceMaintainence)\n    pricing.otherCharges.generatorBackup = parseFloat(pricing.otherCharges.generatorBackup)\n    pricing.otherCharges.builderCharges = parseFloat(pricing.otherCharges.builderCharges)\n    pricing.otherCharges.total = parseFloat(pricing.otherCharges.total)\n    pricing.statutoryGovtCharges.serviceTax = parseFloat(pricing.statutoryGovtCharges.serviceTax)\n    pricing.statutoryGovtCharges.vat = parseFloat(pricing.statutoryGovtCharges.vat)\n    pricing.statutoryGovtCharges.labourCess = parseFloat(pricing.statutoryGovtCharges.labourCess)\n    pricing.statutoryGovtCharges.electricityCharges = parseFloat(pricing.statutoryGovtCharges.electricityCharges)\n    pricing.statutoryGovtCharges.stampDuty = parseFloat(pricing.statutoryGovtCharges.stampDuty)\n    pricing.statutoryGovtCharges.stampPaperCharges = parseFloat(pricing.statutoryGovtCharges.stampPaperCharges);\n    pricing.statutoryGovtCharges.legalCharges = parseFloat(pricing.statutoryGovtCharges.legalCharges);\n    pricing.statutoryGovtCharges.otherStatutoryCharges = parseFloat(pricing.statutoryGovtCharges.otherStatutoryCharges);\n    pricing.statutoryGovtCharges.total = parseFloat(pricing.statutoryGovtCharges.total);\n    pricing.totalAllInclusive = parseFloat(pricing.totalAllInclusive);\n\n    pricing.basicUnitCost.totalBasicRatepsft = ratePerSqFt + pricing.basicUnitCost.floorRaiseCharge + pricing.basicUnitCost.plcCharge;\n    pricing.basicUnitCost.total = unit.superBuiltUpArea * pricing.basicUnitCost.totalBasicRatepsft\n\n\n    pricing.agreementValue.total = pricing.basicUnitCost.total + pricing.agreementValue.infrastructureValue + pricing.agreementValue.clubHouseCharges\n\n    //pricing.statutoryGovtCharges.electricityCharges = unit.superBuiltUpArea * electricityMultiplier;\n\n    //pricing.statutoryGovtCharges.vat = ( (constructionRateForVAT+pricing.basicUnitCost.floorRaiseCharge +\n    //  pricing.basicUnitCost.plcCharge)     +    (pricing.agreementValue.infrastructureValue + pricing.statutoryGovtCharges.electricityCharges + pricing.agreementValue.clubHouseCharges)/unit.superBuiltUpArea)*unit.superBuiltUpArea * 0.145 ;\n    //debugger;\n    // pricing.statutoryGovtCharges.labourCess = (pricing.basicUnitCost.total - (unit.superBuiltUpArea * pricing.landCost))*0.01\n    // var D30 = unit.floorLevel\n    // var E30 = D30<=5 ? 0 : D30>5 && D30<=15 ? (D30-5)*0.005 : 0.05\n    // //pricing.statutoryGovtCharges.stampDuty =  ((ratePerSqFt*2130)+(ratePerSqFt*2130*(E30+0.0525)+250000))*0.0665\n    // //pricing.statutoryGovtCharges.stampPaperCharges =  pricing.agreementValue.total*0.001+300\n    // pricing.statutoryGovtCharges.total = pricing.statutoryGovtCharges.vat +\n    //   pricing.statutoryGovtCharges.labourCess +\n    //   pricing.statutoryGovtCharges.electricityCharges +\n    //   pricing.statutoryGovtCharges.stampDuty +\n    //   pricing.statutoryGovtCharges.stampPaperCharges +\n    //   pricing.statutoryGovtCharges.legalCharges +\n    //   pricing.statutoryGovtCharges.otherStatutoryCharges\n\n    pricing.totalAllInclusive = pricing.agreementValue.total +\n        pricing.otherCharges.total +\n        pricing.statutoryGovtCharges.total\n    return pricing;\n}\nfunction ordinal_suffix_of(i) {\n    var j = i % 10,\n        k = i % 100;\n    if (j == 1 && k != 11) {\n        return i + \"st\";\n    }\n    if (j == 2 && k != 12) {\n        return i + \"nd\";\n    }\n    if (j == 3 && k != 13) {\n        return i + \"rd\";\n    }\n    return i + \"th\";\n}\nfunction openPicker() {\n    fsClient.pick({\n        fromSources:[\"local_file_system\",\"webcam\",\"facebook\",\"url\",\"googledrive\",\"dropbox\",\"flickr\",\"instagram\",\"gmail\",\"picasa\",\"onedrive\",\"clouddrive\"],\n        maxFiles:10,\n        transformations:{\n            crop:{      force:false,\n                aspectRatio:1.333},\n            rotate:true},\n        imageMax:[800,600],\n        accept:[\"image/*\"],\n        \"uploadInBackground\": false//Disabled because, bg upload causes 2 uploads towards filestack limits\n    }).then(function(response) {\n        // declare this function to handle response\n        var addPropertyImages = Session.get('addPropertyImages');\n        var tmp = {};\n        if(response.filesUploaded)\n            for(var i =0;i<response.filesUploaded.length;i++){\n                tmp = {\n                    name: response.filesUploaded[i].filename,\n                    url: response.filesUploaded[i].url,\n                    handle: response.filesUploaded[i].handle,\n                    mimetype: response.filesUploaded[i].mimetype,\n                    originalFile: response.filesUploaded[i].originalFile,\n                    originalPath: response.filesUploaded[i].originalPath,\n                    size: response.filesUploaded[i].size,\n                    source: response.filesUploaded[i].source,\n                    status: response.filesUploaded[i].status,\n                    uploadId: response.filesUploaded[i].uploadId\n                }\n                addPropertyImages.push(tmp);\n            }\n        Session.set('addPropertyImages',addPropertyImages);\n\n        updateGalleriesInProfile(addPropertyImages, function (err, res) {//No need to show error. Because its just a backup.\n            var addPropertyImages = Session.get('addPropertyImages');\n            console.log(\"Current Count: \"+addPropertyImages.length )\n        });\n        console.log(response);\n    });\n}\nfunction getIndexByHandle(myArray, fileId){\n    for (var i=0; i < myArray.length; i++) {\n        if (myArray[i].handle === fileId) {\n            return i;\n        }\n    }\n}\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction slugifyEmailAddress (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ/_,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '.')           // Replace spaces with \".\"\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with ''\n        // .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single ''\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}","import \"./profile.html\";\n// import \"./accounts/helpers.js\";\n// import \"./accounts/validation.js\";\nvar _validFileExtensions = [\".jpg\", \".jpeg\", \".png\", \".pdf\", \".txt\", \".doc\", \".docx\", \".ODT\"];\nfunction filevalidation(arrInputs){\n    for (var i = 0; i < arrInputs.length; i++) {\n        var oInput = arrInputs[i];\n        var sFileName = oInput.name;\n        if (sFileName.length > 0) {\n            var blnValid = false;\n            for (var j = 0; j < _validFileExtensions.length; j++) {\n                var sCurExtension = _validFileExtensions[j];\n                if (sFileName.substr(sFileName.length - sCurExtension.length, sCurExtension.length).toLowerCase() == sCurExtension.toLowerCase()) {\n                    blnValid = true;\n                    break;\n                }\n            }\n\n            if (!blnValid) {\n                // alert(\"Sorry, \" + sFileName + \" is invalid, allowed extensions are: \" + _validFileExtensions.join(\", \"));\n                return false;\n            }\n        }\n\n    }\n\n    return true;\n}\n\nTemplate.profile.onCreated(function(){\n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.autorun(function(){\n\n        instance.subscribe('userData');\n\n        if(instance.subscriptionsReady()){\n            var data =  Accounts.user();\n            try{\n                if(data.profile.isPublic && data.profile.username){\n                    console.log('')\n                    // FlowRouter.redirect('tenant',{username:data.profile.username})\n                }\n            }catch(e){\n                console.log(e);\n            }\n            instance.isSubsLoaded.set(true)\n        }\n    })\n})\nTemplate.profile.helpers({\n    isSubsLoaded:function(){\n        return Template.instance().subscriptionsReady();\n    },\n    userLoggedIn:function(){\n        if(Meteor.user())return true;\n        return false;\n    }\n})\nTemplate.userProfile.onCreated(function(){\n    this.privacyTermsMore = new ReactiveVar( false );\n    this.hasPasswordSet = new ReactiveVar( false );\n    this.hasPasswordSetReqCompleted = new ReactiveVar( false );\n})\nTemplate.userProfile.helpers({\n    \"data\": function(){\n    var data =  Accounts.user();\n    // console.log(data);\n    var city = '';\n    // profile.files.has\n    // if(data)\n    // if(data.profile)\n    // if(data.profile.addressBook)\n    // if(data.profile.addressBook.length){\n    //   city = data.profile.addressBook[0].city\n    // }\n      clearMeta();\n        try {\n            DocHead.setTitle(titleCase(data.profile.name) + '\\'s profile | SpotMyCrib');\n            DocHead.addMeta({name: \"description\", content: \"Upload and manage your references.\"});\n        }catch(err){\n            DocHead.setTitle(' User not found | SpotMyCrib');\n            DocHead.addMeta({name: \"description\", content: \"\"});\n        }\n    return {\n      \"userData\": data,\n      \"userCity\":city,\n      \"userEmail\":data.profile.email,\n      \"userEmailVerified\":data.profile.emailVerified\n    };\n  },\n    backBtnNeeded:function () {\n        var prevRoute = Session.get('prevRoute');\n        try{if( FlowRouter.current().route.name != prevRoute.name )return true;}catch(e){}\n        return false;\n    },\n    prevRoute:function () {\n        return Session.get('prevRoute');\n    },\n    isPublicProfileSelectYes: function(){\n        var user = Meteor.user();\n        try{\n            if(user.profile.isPublic){\n                return 'selected';\n            }\n        }catch(e){}\n        return '';\n    },\n    isPublicProfileSelectNo: function() {\n        var user = Meteor.user();\n        try {\n            if (!user.profile.isPublic) {\n                return 'selected';\n            }\n        } catch (e) {\n        }\n        return '';\n    },\n    progress:function () {\n      var user = Meteor.user();\n      var score = 0;\n      var css = 'progress-bar-danger';\n      var issues = [];\nif(user.profile.mobile){score += 15;}else{issues.push('Mobile number is required. Landlord needs to contact you.')}\nif(!user.services)user.services={}\nif(user.services.facebook){score += 15;}else{issues.push('Connect with your Facebook profile. Its shows your social presence.')}\n// if(user.services.google){score += 10;}else{issues.push('Connect with your google profile. Its shows your social presence.')}//No weightage\nif(user.services.twitter){score += 10;}else{issues.push('Connect with your Twitter profile. Its shows your social presence.')}\nif(user.services.linkedin){score += 15;}else{issues.push('Connect with your LinkedIn profile. Its shows your professional presence.')}\nif(user.profile.references.hasPassport){score += 10;}else{issues.push('Passport is required. Its your legal identity card.')}\nif(user.profile.references.employerName){score += 3;}else{issues.push('Name of your employer is recommended. It can highlight your profile to landlord.')}\nif(user.profile.references.employerTakeHome){score += 2;}else{issues.push('Monthly take home salary is recommended. It can act as your finantial reference.')}\nif(user.profile.references.hasWorkRef){score += 10;}else{issues.push('Work reference is required. It shows your professional side.')}\nif(user.profile.references.hasLandlordRef){score += 10;}else{issues.push('Landlord reference is required. ')}\nif(user.profile.references.hasPPS){score += 3;}else{issues.push('PPS is recommended. Its your legal identity card.')}\n// if(user.profile.references.hasFinancialRef){score += 0;}else{issues.push('Financial reference if work reference is not given.')}\nif(user.profile.references.hasGovtID){score += 4;}else{issues.push('Govt ID is recommended. Driving license or GNIB as your identity card.')}\nif(user.profile.references.hasResume){score += 3;}else{issues.push('Resume is recommended. It shows your professional side.')}\n\n        if(score>100)score = 100;\n        if(score>50)css = 'progress-bar-warning';\n        if(score>70)css = 'progress-bar-info';\n        if(score>90)css = 'progress-bar-success';\n\n\n        return {\n            css:css,\n            percent:score+\"%\",\n            issues:issues\n        }\n    },\n    privacyTermsMore: function(){\n        return Template.instance().privacyTermsMore.get() ;\n    },\n    showFileTemplate:function () {\n        return Session.get('showFileTemplate');\n    },\n    showHideFileDlg: function () {\n        console.log(\"Event showHideFileDlg\");\n        var ses = Session.get('showFileDlg');\n\n        if(ses) {\n            if (ses.show) {\n                $.fancybox({\n                    'padding': 0,\n                    'href': '#fileupload-dlg',\n                    width: '80%',\n                    afterShow: function () {\n                        Session.set('showFileTemplate', true);\n                    },\n                    afterClose: function () {\n                        var ses = {show: false, cate: \"\"}\n                        Session.set('showFileDlg', ses);// Has the overall info and basic required info.\n                        Session.set('showFileTemplate', false);\n                    }\n                });\n                return true;\n            } else if (ses.show==false){\n                try {\n                    $.fancybox.close();\n                } catch (e) {\n                }\n            }\n        }\n        return false;\n    },\n    hasPasswordSet:function(){\n        var localHasPasswordSet = Session.get('localHasPasswordSet');\n        if(localHasPasswordSet)return localHasPasswordSet;\n        return Template.instance().hasPasswordSet.get();\n    },\n    hasPasswordSetReqCompleted:function(){\n        return Template.instance().hasPasswordSetReqCompleted.get();\n    }\n})\nTemplate.userProfile.events({\n    \"change .togglePublicProfileSetting\":function(event,template){\n        Meteor.call('togglePublicProfileSetting',function(err, res) {\n            if (err) {\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                var msg = 'Public profile setting change failed. Check your internet connection. ';\n                if(err.error)msg += err.error+'. ';\n                msg += \"Please try again. Contact us if needed.\";\n                tmp.push(msg);\n                Session.set(\"showErrorDlg\",tmp)\n            } else {\n                setTimeout(function(){\n                    var data =  Accounts.user();\n                    try{\n                        if(data.profile.isPublic && data.profile.username){\n                            FlowRouter.go('tenant',{username:data.profile.username})\n                        }else{\n                            FlowRouter.go('account/profile')\n                        }\n                    }catch(e){\n                        console.log(e);\n                    }\n                },1000)\n            }\n\n        });\n    },\n    \"click .profileLinkCopyBtn\":function(event, template){\n        console.log(\"Event profileLinkCopyBtn\");\n        $('#profileLinkField').select();\n\n        try {\n            var successful = document.execCommand('copy');\n            var msg = successful ? 'successful' : 'unsuccessful';\n            // console.log('Copying text command was ' + msg);\n\n            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n            var msg = 'Your profile is copied to your clipboard. ';\n            tmp.push(msg);\n            Session.set(\"showErrorDlg\",tmp)\n        } catch (err) {\n            console.log('Oops, unable to copy');\n        }\n    },\n    \"click .requestRedgRefund\":function(event, template){\n        console.log(\"Event requestRedgRefund\");\n        $.fancybox({\n            'padding': 0,\n            'href': '#requestRedgRefund-popup'\n        });\n    },\n    \"click .requestConfRefund\":function(event, template){\n        console.log(\"Event requestConfRefund\");\n        $.fancybox({\n            'padding': 0,\n            'href': '#requestConfRefund-popup'\n        });\n    },\n    \"click .changePwdBtn\":function(event, template){\n        console.log(\"Event changePwdBtn\");\n        $('#changepass-dlg .changePwdAlertMsgs .color-text').html('');\n        $('#changepass-dlg .help-block p').html('');\n\n\n        $(\"#changepass-dlg button[type=submit]\").attr(\"disabled\",false);\n        $.fancybox({\n            'padding'   : 0,\n            'href'      : '#changepass-dlg',\n            'afterClose': () => {\n                console.log(\"Event: Fancybox closed\");\n\n                //reset fields\n                $('.oldpwd').val(\"\");\n                $('.newpwd').val(\"\");\n            }\n        });\n    },\n    \"click .setPwdBtn\":function(event, template){\n        console.log(\"Event setPwdBtn\");\n        $('#setpass-dlg .changePwdAlertMsgs .color-text').html('');\n        $('#setpass-dlg .help-block p').html('');\n\n\n        $(\"#setpass-dlg button[type=submit]\").attr(\"disabled\",false);\n        $.fancybox({\n            'padding'   : 0,\n            'href'      : '#setpass-dlg',\n            'afterClose': () => {\n                console.log(\"Event: Fancybox closed\");\n\n                //reset fields\n                $('.newpwd').val(\"\");\n                $('.newpwdconfirm').val(\"\");\n            }\n        });\n    },\n    \"click .changeMobileBtn\":function(event, template){\n        console.log(\"Event changeMobileBtn\");\n\n        $.fancybox({\n            'padding': 0,\n            'href': '#changeMobile-div'\n        });\n    },\n    \"click .changeCityBtn\":function(event, template){\n        console.log(\"Event changeCityBtn\");\n        $.fancybox({\n            'padding': 0,\n            'href': '#changeCity-div'\n        });\n    },\n    \"click .changeEmployerNameConfirmation\":function(event, template){\n        console.log(\"Event changeEmployerNameConfirmation\");\n\n        var ele = $(event.target);\n        hideSaveBtn(ele)\n        Meteor.call('updateEmployerName',$('.changeEmployerNameValue').val(),function(error, result){\n\n            if(error){\n                console.log(error.error);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                if(!error.error)error.error = 'An error occurred';\n                tmp.push(error.error);\n                Session.set(\"showErrorDlg\",tmp)\n                showSaveBtn(ele)\n                return;\n            }\n            if(result.status=='Success'){\n\n            }\n        });\n    },\n    \"click .changeEmployerTakeHomeConfirmation\":function(event, template){\n        console.log(\"Event changeEmployerTakeHomeConfirmation\");\n        debugger\n        var ele = $(event.target);\n        hideSaveBtn(ele)\n        var num = parseInt($('.changeEmployerTakeHomeValue').val());\n        Meteor.call('updateEmployerTakeHome',num,function(error, result){\n\n            if(error){\n                console.log(error.error);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                if(!error.error)error.error = 'An error occurred';\n                tmp.push(error.error);\n                Session.set(\"showErrorDlg\",tmp)\n                showSaveBtn(ele)\n                return;\n            }\n            if(result.status=='Success'){\n\n            }\n        });\n    },\n    \"click .privacyTermsMore_btn\": function (event, template) {\n        if(template.privacyTermsMore.get() )template.privacyTermsMore.set(false);\n        else template.privacyTermsMore.set(true);\n    },\n    //////// TODO: Events below are not working.\n\n    \"click .requestRedgRefundConf\":function(event, template){\n        console.log(\"Event requestRedgRefundConf\");\n        var ret = Meteor.call('registrationAmountRefund',[],function(ret){\n            if(ret.status=='AlreadyRequested'){\n\n            }\n            $.fancybox.close();\n        });\n\n\n    },\n    \"click .requestConfRefundConf\":function(event, template){\n        console.log(\"Event requestConfRefundConf\");\n        var ret = Meteor.call('confirmationAmountRefund',[],function(ret){\n            if(ret.status=='AlreadyRequested'){\n\n            }\n            $.fancybox.close();\n        });\n\n    },\n    \"click .noBtn\":function(event, template){\n        console.log(\"Event noBtn\");\n        $.fancybox.close();\n\n    },\n    \"click .backBtn\": function(event, template){\n        var prevRoute = Session.get('prevRoute');\n        // Session.set('prevRoute',{\n        //   name:\"letting\",\n        //     args:{key:\"DUN1\"}\n        // });\n        if(prevRoute){\n            FlowRouter.go(prevRoute.name,prevRoute.args)\n            var prevRoute = {name: FlowRouter.current().route.name,args:{} }\n            Session.set('prevRoute',prevRoute);\n        }else{\n            FlowRouter.go(\"home\");\n        }\n\n    },\n    \"click .linkWithGoogleBtn\": function(event, template){\n        Meteor.linkWithGoogle({}, function(err){\n            if (err) {\n                console.log(err)\n\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                var msg = 'Link with Google failed. ';\n                if(err.error)msg += err.error+'. ';\n                msg += \"Please try again. Contact us if needed.\";\n                tmp.push(msg);\n                Session.set(\"showErrorDlg\",tmp)\n\n                throw new Meteor.Error(\"Google login failed\");\n            }else{\n\n            }\n        });\n    },\n    \"click .linkWithTwitterBtn\": function(event, template){\n        Meteor.linkWithTwitter({}, function(err){\n            if (err) {\n                console.log(err)\n\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                var msg = 'Link with Twitter failed. ';\n                if(err.error)msg += err.error+'. ';\n                msg += \"Please try again. Contact us if needed.\";\n                tmp.push(msg);\n                Session.set(\"showErrorDlg\",tmp)\n\n                throw new Meteor.Error(\"Twitter login failed\");\n            }else{\n\n            }\n        });\n    },\n    \"click .linkWithFacebookBtn\": function(event, template){\n        Meteor.linkWithFacebook({}, function(err){\n            if (err) {\n                console.log(err)\n\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                var msg = 'Link with Facebook failed. ';\n                if(err.error)msg += err.error+'. ';\n                msg += \"Please try again. Contact us if needed.\";\n                tmp.push(msg);\n                Session.set(\"showErrorDlg\",tmp)\n\n                throw new Meteor.Error(\"Facebook login failed\");\n            }else{\n\n            }\n        });\n    },\n    \"click .linkWithLinkedInBtn\": function(event, template){\n        Meteor.connectWithLinkedIn({}, function(err){\n            if (err) {\n                console.log(arguments)\n\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                var msg = 'Link with LinkedIn failed. ';\n                if(err.error)msg += err.error+'. ';\n                msg += \"Please try again. Contact us if needed.\";\n                tmp.push(msg);\n                Session.set(\"showErrorDlg\",tmp)\n\n                throw new Meteor.Error(\"LinkedIn login failed\");\n            }else{\n\n            }\n        });\n    }\n})\nTemplate.userProfile.onRendered(function(){\n\n    var templateInstance = Template.instance();\n    Meteor.call('hasPasswordSet',function (err,result) {\n        if(!err){\n            templateInstance.hasPasswordSet.set(result);\n            templateInstance.hasPasswordSetReqCompleted.set(true);\n        }\n    })\n\n    //////// TODO: Remove below JQuery events after making meteor events working.\n    $('.noBtn, .cancel, .close').click(function(){\n        console.log(\"Event noBtn jquery\");\n        $.fancybox.close();\n    })\n    $('.requestRedgRefundConf').click(function(){\n        console.log(\"Event requestRedgRefundConf jquery\");\n        var ret = Meteor.call('registrationAmountRefund',[],function(error, result){\n            if(error){\n                console.log(error.error);\n                return;\n            }\n            if(result.status=='AlreadyRequested'){\n\n            }\n            $.fancybox.close();\n        });\n\n    })\n    $('.requestConfRefundConf').click(function(){\n        console.log(\"Event requestConfRefundConf jquery\");\n        var ele = this;\n        hideSaveBtn(ele)\n        var ret = Meteor.call('confirmationAmountRefund',[],function(error, result){\n            if(error){\n                console.log(error.error);\n                showSaveBtn(ele)\n                return;\n            }\n        });\n\n    })\n    $('.changeMobileConfirmation').click(function(){\n        console.log(\"Event changeMobileConfirmation jquery\");\n        var ele = this;\n        hideSaveBtn(ele)\n        var mobile = $('.changeMobileValue').val();\n        validatedMobile = LoginFormValidation.mobile(mobile);\n        if (validatedMobile !== true) {\n            $('.mobileValidationErrors').show().html(validatedMobile.reason) ;showSaveBtn(ele);return;\n        }\n        Meteor.call('updateMobile',mobile,function(error, result){\n            if(error){\n                console.log(error.error);\n                showSaveBtn(ele)\n                return;\n            }\n            $('.mobileValidationErrors').hide();\n            // Session.set('showMobileVerification',true)\n        });\n\n    })\n    $('.changeEmployerNameConfirmation').click(function(){\n        // console.log(\"Event changeEmployerNameConfirmation jquery\");\n        // var ele = this;\n        // hideSaveBtn(ele)\n        // Meteor.call('updateEmployerName',[$('.changeEmployerNameValue').val()],function(error, result){\n        //\n        //   if(error){\n        //     console.log(error.error);\n        //     showSaveBtn(ele)\n        //     return;\n        //   }\n        //   if(result.status=='Success'){\n        //\n        //   }\n        // });\n    })\n\n\n\n\n    $('.mobileValidationErrors').hide();\n    $('.eyebtn').click(function () {\n        if ($(\".show-pwd\").hasClass(\"shown\"))\n        {\n            $(\".show-pwd\").attr(\"type\", \"password\");\n            $(\".show-pwd\").removeClass(\"shown\");\n\n        } else\n        {\n            $(\".show-pwd\").attr(\"type\", \"text\");\n            $(\".show-pwd\").addClass(\"shown\");\n        }\n\n\n    });\n\n    $(document).ready(function(){\n\n        //$('.change-click').click(function(){\n        //\n        //  });\n\n        $('.cancel-clk').click(function(){\n            hideSaveBtn(this);\n            $('.mobileValidationErrors').hide();\n        });\n        $('.change-click').click(function(){\n            showSaveBtn(this)\n        });\n        //$('.request-clk').click(function(){\n        //  $('.hideen-div').fadeOut();\n        //});\n        $('.sendEmailVerification').click(function(){\n            console.log('event sendEmailVerification');\n            $('.sendEmailVerification').text('Verification mail sent')\n            setTimeout(function(){\n                $('.sendEmailVerification').text('Send verification link')\n            },10000)\n        });\n\n    });\n\n\n})\n\nTemplate.fileUploadDlgTemplate.onCreated(function(){\n    this.sesCate = new ReactiveVar( false );\n    this.p1 = new ReactiveVar( false );\n    this.p2 = new ReactiveVar( false );\n    var ses = Session.get('showFileDlg');\n    if(ses){\n        this.sesCate.set(ses.cate);\n        if(ses.cate){\n            var p1='';\n            var p2='';\n            switch (ses.cate){\n                case \"Resume\": p1 = \"hasResume\"; p2 = \"resume\"; break;\n                case \"Work Reference\": p1 = \"hasWorkRef\"; p2 = \"workRef\"; break;\n                case \"Landlord Reference\": p1 = \"hasLandlordRef\"; p2 = \"landlordRef\"; break;\n                case \"Financial Reference\": p1 = \"hasFinancialRef\"; p2 = \"financialRef\"; break;\n                case \"Government ID\": p1 = \"hasGovtID\"; p2 = \"govtID\"; break;\n                case \"Passport\": p1 = \"hasPassport\"; p2 = \"passport\"; break;\n                case \"PPS\": p1 = \"hasPPS\"; p2 = \"PPS\"; break;\n            }\n\n            // p1 = \"profile.references.\"+p1\n            // p2 = \"profile.references.\" + p2\n            this.p1.set(p1);\n            this.p2.set(p2);\n        }\n    }\n\n    this.step = new ReactiveVar( 1 );\n    this.sFileName = new ReactiveVar( false );\n\n    this.uploading = new ReactiveVar( false );\n    this.fileObj = new ReactiveVar( {} );\n    this.fileObjPrevious = new ReactiveVar( false );\n})\nTemplate.fileUploadDlgTemplate.helpers({\n    dlgTitle: function () {\n        var title = '';\n        var p1 = Template.instance().p1.get();\n        var p2 = Template.instance().p2.get();\n        var uploading = Template.instance().uploading.get();\n        var user = Meteor.user();\n        if(user.profile.references[p1]) var existingFile = true;\n\n\n        if(existingFile){\n            title =  'Update ';\n            if(!Template.instance().fileObjPrevious.get()) // only if its not yet set . Else other function will set it.\n                Template.instance().fileObjPrevious.set(user.profile.references[p2]);\n            console.log('fileObjPrevious')\n            console.log(Template.instance().fileObjPrevious.get())\n        }\n        else if(uploading)title =  'Uploading ';\n        else title = 'Upload ';\n\n        var sesCate = Template.instance().sesCate.get();\n        if(sesCate)title += sesCate;\n        else title+='References';\n\n        return title;\n    },\n    existingFile:function () {\n        var p2 = Template.instance().p2.get();\n        var user = Meteor.user();\n        if(user.profile.references[p2]) return user.profile.references[p2];\n\n        return false;\n    },\n    isStep: function (step) {\n      if(step == Template.instance().step.get() )return true;\n      else return false;\n    },\n    isNotStep: function (step) {\n      if(step != Template.instance().step.get() )return true;\n      else return false;\n    },\n    uploading: function(){\n        return Template.instance().uploading.get() ;\n    },\n    validFileExtensions: function(){\n        return _validFileExtensions;\n    }\n})\n\nTemplate.fileUploadDlgTemplate.events({\n    'click .showCamera':function (event, template) {\n        event.preventDefault();\n\n        template.$('#cropImage').cropper(\"destroy\");\n        template.$('#cropImage').attr(\"src\",'').hide();\n        template.$('#finalImage').attr(\"src\",'').hide();\n        $('.step2, #uploadImagePreviewArea').show();\n        $('.step3').hide();\n\n\n        var cameraOptions = {\n            width: 800,\n            height: 600\n        };\n        MeteorCamera.getPicture(cameraOptions, function (error, data) {\n            if (!error) {\n                template.$('#cropImage').attr('src', data);\n                template.step.set(2)\n                $('.step2').show();\n                $('.step3').hide();\n\n                template.sFileName.set('cameraPhoto.jpg');\n                //Now start the crop\n                if (data) {\n                    $('.step1').hide();\n                    template.$(\"#cropImage\").cropper({\n                        aspectRatio: 4 / 3\n                    });\n                }\n\n            }\n        });\n    },\n    'click .getCroppedImage':function (event, template) {\n\n        template.step.set(3)\n        $('.step2').hide();\n        $('.step3').show();\n        //Ratio 4:3 => 700 * 525\n        var finalImgData = template.$('#cropImage').cropper(\"getCroppedCanvas\", { width: 700, height: 525 }).toDataURL();\n        template.$('#finalImage').attr('src', finalImgData).show();\n\n        var head = 'data:image/png;base64,';\n        var imgFileSize = Math.round((finalImgData.length - head.length)*3/4) ;\n        var sizeKB = imgFileSize/1000;\n        var sizeMB = imgFileSize/1000000;\n        console.log(\"imgFileSize\", imgFileSize, \"size\", sizeMB, \"MB\", \"-----\", sizeKB, \"KB\");\n\n        var mimeType = 'image/jpeg';\n        var imgQuality = 1;\n        if(sizeKB>200)var imgQuality = 0.9;\n        if(sizeKB>300)var imgQuality = 0.8;\n        if(sizeKB>400)var imgQuality = 0.7;\n\n        const cate = template.sesCate.get();\n        var sFileName = template.sFileName.get(); if(!sFileName)sFileName = 'cameraPhoto.jpg';\n        // const inst = Template.instance();\n        var finalImgData = template.$('#cropImage').cropper(\"getCroppedCanvas\", { width: 700, height: 525 }).toBlob(function(blob){\n            template.uploading.set(true);\n            template.fileObj.set({});//Reset old status as this might be 2nd upload.\n\n            var ret = S3.upload({\n                file:new File([blob], sFileName),\n                path:\"profileFiles\"\n            },function(e,r){\n\n                if(e){\n                    $('.step1').show();\n                    var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                    tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n                    try{if(e.error)tmp.push(e.error);}catch (cat){}\n                    Session.set(\"showErrorDlg\",tmp)\n                    throw new Meteor.Error('Upload failed ', e);\n                    template.uploading.set(false);\n                    return;\n                }\n                console.log(r);\n\n                template.fileObj.set(r);\n\n                var tmp = {\n                    name: r.file.original_name,\n                    relative_url: r.relative_url,\n                    url: r.secure_url\n                }\n\n                console.log(tmp);\n                var fileObjPrevious = template.fileObjPrevious.get()//move here due to bug\n                Meteor.call('updateReferenceFile', [cate, tmp], (err, res) => {\n                    template.uploading.set(false);//Make it false even if it failed. Users should know that its not uploading anymore.\n                    $('.step2').hide();\n                    $('.step1').show();\n                    $('.step3').show();//Because its an image from cropped area\n                    if (err) {\n                        console.log(err);\n\n                        var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                        tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n                        try{if(err.error)tmp.push(err.error);}catch (cat){}\n                        Session.set(\"showErrorDlg\",tmp)\n\n                        //If updating in DB failed. Then delete in Amazon as well.\n                        var fileObj = template.fileObj.get();\n                        S3.delete(fileObj.relative_url,function(error, result){})\n                    } else {//If upload is success, then delete the old file and re-set it.\n                        // debugger;\n                        // var fileObjPrevious = template.fileObjPrevious.get()//Don' get it here, as parallely another code is changing this val->lead to bug\n                        if(fileObjPrevious){//only if it exists.\n                            S3.delete(fileObjPrevious.relative_url,function(error, result){})\n                            template.fileObjPrevious.set(template.fileObj.get() );\n                        }\n                    }\n                });\n\n\n            });\n\n\n\n        },mimeType, imgQuality);\n\n    },\n    'click .zoomInBtn':function (event, template) {\n        template.$('#cropImage').cropper(\"zoom\", 0.1);\n    },\n    'click .zoomOutBtn':function (event, template) {\n        template.$('#cropImage').cropper(\"zoom\", -0.1);\n    },\n    'click .rotateLeftBtn':function (event, template) {\n        template.$('#cropImage').cropper(\"rotate\", -90);\n    },\n    'click .rotateRightBtn':function (event, template) {\n        template.$('#cropImage').cropper(\"rotate\", 90);\n    },\n    'click .resetBtn':function (event, template) {\n        template.$('#cropImage').cropper(\"reset\");\n    },\n    'click .goToStep1':function (event, template) {\n        $('.step1').show();\n        template.$('#cropImage').cropper(\"destroy\");\n        template.$('#cropImage').attr(\"src\",'').hide();\n        template.$('#finalImage').attr(\"src\",'').hide();\n        $('.step2').hide();\n        $('.step3').hide();\n    },\n    'click .closeDlg':function (event, template) {\n        var ses = {show: false, cate: \"\"}\n        Session.set('showFileDlg', ses);// Has the overall info and basic required info.\n        Session.set('showFileTemplate', false);\n    },\n    'change .uploadBtn': function(event, template) {\n        var files = event.target.files;\n        if(!files)return;\n        if(files.length == 0)return;\n\n        Template.instance().step.set(2)\n        $('.step2, #uploadImagePreviewArea').show();\n        template.$('#cropImage').cropper(\"destroy\");\n        template.$('#cropImage').attr(\"src\",'').hide();\n        template.$('#finalImage').attr(\"src\",'').hide();\n        $('.step3').hide();\n\n        if (!filevalidation(files)) {\n            var tmp = Session.get(\"showErrorDlg\");\n            if (!tmp) tmp = [];\n            var msg = 'Upload rejected. Please upload only document or image files. Allowed extensions are ' + _validFileExtensions.join(', ') + '.';\n            tmp.push(msg);\n            Session.set(\"showErrorDlg\", tmp)\n\n            throw new Meteor.Error(\"Upload rejected. \");\n            return;\n        }\n\n        const cate = template.sesCate.get();\n        Template.instance().uploading.set(true);\n        // const inst = Template.instance();\n        template.fileObj.set({});//Reset old status as this might be 2nd upload.\n\n\n        if (files.length == 1) {\n            var target = event.target;\n            var sFileName = files[0].name;\n            template.sFileName.set(sFileName);\n            // $(\"#uploadImagePreviewArea\").html(\"\");\n            var regex = /^([a-zA-Z0-9\\s_\\\\.\\-:])+(.jpg|.jpeg|.gif|.png|.bmp)$/;\n            if (regex.test($(target).val().toLowerCase())) {\n                if (isIE() && isIE() <= 9) {\n                    $(\"#uploadImagePreviewArea\").show();\n                    $(\"#uploadImagePreviewArea\")[0].filters.item(\"DXImageTransform.Microsoft.AlphaImageLoader\").src = $(target).val();\n                }\n                else {\n                    if (typeof (FileReader) != \"undefined\") {\n                        template.uploading.set(false);\n                        $(\"#uploadImagePreviewArea, #cropImage\").show();\n                        // $(\"#uploadImagePreviewArea\").append('<img class=\"img-responsive\" id=\"cropImage\"/>');\n                        var reader = new FileReader();\n                        reader.onload = function (e) {\n                            $(\"#cropImage\").attr(\"src\", e.target.result);\n\n                            //File name is set few lines above this\n                            //Now start the crop\n                            var imgData = $(\"#cropImage\").attr('src');\n                            if (imgData) {\n                                $('.step1').hide();\n                                template.$(\"#cropImage\").cropper({\n                                    aspectRatio: 4 / 3\n                                });\n                            }\n\n\n                        }\n                        reader.readAsDataURL($(target)[0].files[0]);\n                        return;//If previewer is available then let the cropper handle the upload.\n                    } else {\n                        console.log(\"This browser does not support FileReader.\");\n                    }\n                }\n            } else {\n                console.log(\"File upload: Not an image file to show preview.\");\n            }\n        }\n\n        // console.log('Not an image, so proceeding with traditional upload')\n\n        var ret = S3.upload({\n            files:files,\n            path:\"profileFiles\"\n        },function(e,r){\n            if(e){\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n                try{if(e.error)tmp.push(e.error);}catch (cat){}\n                Session.set(\"showErrorDlg\",tmp)\n                throw new Meteor.Error('Upload failed ', e);\n                template.uploading.set(false);\n                return;\n            }\n            console.log(r);\n\n            template.fileObj.set(r);\n\n            var tmp = {\n                name: r.file.original_name,\n                relative_url: r.relative_url,\n                url: r.secure_url\n            }\n\n            console.log(tmp);\n            var fileObjPrevious = template.fileObjPrevious.get()//move here due to bug\n            Meteor.call('updateReferenceFile', [cate, tmp], (err, res) => {\n                template.uploading.set(false);//Make it false even if it failed. Users should know that its not uploading anymore.\n                $('.step2').hide();\n                $('.step3').hide();//Because its not an image.\n                if (err) {\n                    console.log(err);\n\n                    var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                    tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n                    try{if(err.error)tmp.push(err.error);}catch (cat){}\n                    Session.set(\"showErrorDlg\",tmp)\n\n                    //If updating in DB failed. Then delete in Amazon as well.\n                    var fileObj = template.fileObj.get();\n                    S3.delete(fileObj.relative_url,function(error, result){})\n                } else {//If upload is success, then delete the old file and re-set it.\n                    // debugger;\n                    // var fileObjPrevious = template.fileObjPrevious.get()//Don' get it here, as parallely another code is changing this val->lead to bug\n                    if(fileObjPrevious){//only if it exists.\n                        S3.delete(fileObjPrevious.relative_url,function(error, result){})\n                        template.fileObjPrevious.set(template.fileObj.get() );\n                    }\n                }\n\n            });\n\n\n        });\n        // for (var i = 0, ln = files.length; i < ln; i++) {\n        //     propertyImagesCollection.insert(files[i], function (err, fileObj) {\n        //         // Inserted new doc with ID fileObj._id, and kicked off the data upload using HTTP\n        //         console.log(fileObj);\n        //         var cursor = propertyImagesCollection.find(fileObj._id);\n        //\n        //         var liveQuery = cursor.observe({\n        //             changed: function(newImage, oldImage) {\n        //\n        //                 console.log(\"Inside live query \");\n        //                 console.log(newImage);\n        //                 if (newImage.isUploaded()) {\n        //                     liveQuery.stop();\n        //\n        //                     // Call your onUploaded callback here...\n        //                 }\n        //             }\n        //         });\n        //     });\n        // }\n    },\n})\nTemplate.fileUploadDlgTemplate.onRendered(function(){\n    $(\"#uploadImagePreviewArea, #cropImage, #finalImage\").hide();\n    $('#cropImage, #finalImage').attr('src','');\n})\nTemplate.fileUploadArea.onCreated(function(){\n    this.uploading = new ReactiveVar( false );\n    // this.fileObj = new ReactiveVar( {} );\n})\nTemplate.fileUploadArea.helpers({\n    uploading: function(isMyBidsPage){\n        return Template.instance().uploading.get() ;\n    },\n    validFileExtensions: function(){\n        return _validFileExtensions;\n    }\n})\nTemplate.fileUploadArea.events({\n    'click .showUploadDlg': function(event, template) {\n        var ses = {show:true,cate:this.title}\n        Session.set('showFileDlg',ses);\n        return false;\n    },\n    // 'change .uploadBtn': function(event, template) {\n    //     var files = event.target.files;\n    //\n    //     if(!filevalidation(files)){\n    //         var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n    //         var msg = 'Upload rejected. Please upload only document or image files. Allowed extensions are '+_validFileExtensions.join(', ')+'.';\n    //         tmp.push(msg);\n    //         Session.set(\"showErrorDlg\",tmp)\n    //\n    //         throw new Meteor.Error(\"Upload rejected. \");\n    //         return;\n    //     }\n    //\n    //     const cate = event.target.getAttribute('cate');\n    //     Template.instance().uploading.set(true);\n    //     const inst = Template.instance();\n    //     inst.fileObj.set({});//Reset old status as this might be 2nd upload.\n    //     var ret = S3.upload({\n    //         files:files,\n    //         path:\"profileFiles\"\n    //     },function(e,r){\n    //         if(e){\n    //             var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n    //             tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n    //             try{if(e.error)tmp.push(e.error);}catch (cat){}\n    //             Session.set(\"showErrorDlg\",tmp)\n    //             throw new Meteor.Error('Upload failed ', e);return;\n    //         }\n    //         console.log(r);\n    //\n    //         inst.fileObj.set(r);\n    //\n    //         var tmp = {\n    //             name: r.file.original_name,\n    //             relative_url: r.relative_url,\n    //             url: r.secure_url\n    //         }\n    //\n    //         console.log(tmp);\n    //         Meteor.call('updateReferenceFile', [cate, tmp], (err, res) => {\n    //             inst.uploading.set(false);//Make it false even if it failed. Users should know that its not uploading anymore.\n    //             if (err) {\n    //                 console.log(err);\n    //\n    //                 var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n    //                 tmp.push(\"Upload failed. Please check your internet connectivity and try again. Contact us if needed.\");\n    //                 try{if(err.error)tmp.push(err.error);}catch (cat){}\n    //                 Session.set(\"showErrorDlg\",tmp)\n    //\n    //                 //If updating in DB failed. Then delete in Amazon as well.\n    //                 var fileObj = inst.fileObj.get();\n    //                 S3.delete(fileObj.relative_url,function(error, result){})\n    //             } else {\n    //\n    //             }\n    //\n    //         });\n    //\n    //\n    //     });\n    //     // for (var i = 0, ln = files.length; i < ln; i++) {\n    //     //     propertyImagesCollection.insert(files[i], function (err, fileObj) {\n    //     //         // Inserted new doc with ID fileObj._id, and kicked off the data upload using HTTP\n    //     //         console.log(fileObj);\n    //     //         var cursor = propertyImagesCollection.find(fileObj._id);\n    //     //\n    //     //         var liveQuery = cursor.observe({\n    //     //             changed: function(newImage, oldImage) {\n    //     //\n    //     //                 console.log(\"Inside live query \");\n    //     //                 console.log(newImage);\n    //     //                 if (newImage.isUploaded()) {\n    //     //                     liveQuery.stop();\n    //     //\n    //     //                     // Call your onUploaded callback here...\n    //     //                 }\n    //     //             }\n    //     //         });\n    //     //     });\n    //     // }\n    // },\n})\n\n\n\n\nfunction showSaveBtn(ele){\n  $(ele).parents('div.inp-hold').find('.overlay-text').fadeOut();\n  $(ele).fadeOut();\n  $(ele).parent('div.inp-hold').find('.save-btn').addClass('show-save');\n  $(ele).parent('div.inp-hold').find('div.cancel-div').css('display','block');\n  $(ele).parent('div.inp-hold').find('input').focus();\n}\nfunction hideSaveBtn(ele){\n  $(ele).parents('div.inp-hold').find('.save-btn').removeClass('show-save');\n  $(ele).parents('div.inp-hold').find('div.cancel-div').css('display','none');\n  $(ele).parents('div.inp-hold').find('.change-click').fadeIn();\n  $(ele).parents('div.inp-hold').find('.overlay-text').fadeIn();\n}\n\n\nTemplate.loginFormSetPassword.onCreated(() => {\n    let template = Template.instance();\n    template.formMessages = new ReactiveVar({});\n    template.isLoading = new ReactiveVar(false);\n});\nTemplate.loginFormSetPassword.helpers(LoginFormSharedHelpers);\nTemplate.loginFormSetPassword.events({\n\n    /**\n     * Submit form for password update\n     * @param  {Event} event - jQuery Event\n     * @param  {Template} template - Blaze Template\n     * @return {void}\n     */\n    \"submit form\": function (event, template) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        template.$(\"button[type=submit]\").attr(\"disabled\",true);\n\n        let password1Input = template.$(\".login-input--password1\");\n        let password2Input = template.$(\".login-input--password2\");\n        let password1 = password1Input.val().trim();\n        let password2 = password2Input.val().trim();\n        let templateInstance = Template.instance();\n        var errors = []\n\n\n        if(password1!=password2){\n            errors.push({\n                error: \"INVALID_PASSWORD\",\n                reason: \"Passwords doesn't match\"\n            });\n            // errors.password2 = [\n            //     {\n            //         error: \"INVALID_PASSWORD\",\n            //         reason: \"Passwords doesn't match\"\n            //     }\n            // ]\n            // templateInstance.$(\"button[type=submit]\").attr(\"disabled\",false);//We need it here because line 560 errors.password2 = validatedPassword2; will over write this message if we don't return here. Also array merge isn't an option as our UI is not ready to show multiple messages. It can only take 1 error at a time.\n            // templateInstance.formMessages.set({\n            //     errors: errors\n            // });\n            // return;\n        }\n        // We only check if it exists, just in case we\"ve change the password strength and want the\n        // user to have an opportunity to update to a stronger password\n        // let validatedPassword1 = LoginFormValidation.password(password1);//Not needed as we are doing equal check\n        let validatedPassword2 = LoginFormValidation.password(password2, {validationLevel: \"length\"});\n\n\n        templateInstance.formMessages.set({});\n        templateInstance.isLoading.set(true);\n\n        // if (validatedPassword1 !== true) {\n        //     errors.push(validatedPassword1);\n        // }\n        if (validatedPassword2 !== true) {\n            errors.push(validatedPassword2);\n        }\n\n        if (errors.length) {\n            templateInstance.$(\"button[type=submit]\").attr(\"disabled\",false);\n            templateInstance.formMessages.set({\n                errors: errors\n            });\n            // prevent signup\n            templateInstance.isLoading.set(false)\n            return;\n        }\n\n        Meteor.call('setUserPwd',[Meteor.userId(),password2],function(error, result){\n            // templateInstance.isLoading.set(false);\n            if (error) {\n                templateInstance.$(\"button[type=submit]\").attr(\"disabled\",false);\n                // Show some error message\n                templateInstance.formMessages.set({\n                    errors: [error]\n                });\n            } else {\n                Session.set('localHasPasswordSet',true);\n                templateInstance.$(\".login-input--password1, .login-input--password2\").val('')\n                $('#setpass-dlg .changePwdAlertMsgs p, #setpass-dlg .help-block p').html('');\n\n                // // Close dropdown or navigate to page\n                templateInstance.formMessages.set({\n                    info: [{\n                        reason: 'Password successfully set'\n                    }]\n                });\n\n                if($)if($.fancybox){\n                    $.fancybox.close();\n                    templateInstance.formMessages.set({});\n                }\n            }\n        })\n    }\n});\n\nTemplate.loginFormChangePassword.onCreated(() => {\n    let template = Template.instance();\n    template.formMessages = new ReactiveVar({});\n    template.isLoading = new ReactiveVar(false);\n});\nTemplate.loginFormChangePassword.helpers(LoginFormSharedHelpers);\nTemplate.loginFormChangePassword.events({\n\n    /**\n     * Submit form for password update\n     * @param  {Event} event - jQuery Event\n     * @param  {Template} template - Blaze Template\n     * @return {void}\n     */\n    \"submit form\": function (event, template) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        template.$(\"button[type=submit]\").attr(\"disabled\",true);\n\n        let oldPasswordInput = template.$(\".login-input--oldPassword\");\n        let passwordInput = template.$(\".login-input--password\");\n\n        let oldPassword = oldPasswordInput.val().trim();\n        let password = passwordInput.val().trim();\n\n        // We only check if it exists, just incase we\"ve change the password strength and want the\n        // user to have an oppurtinity to update to a stronger password\n        let validatedOldPassword = LoginFormValidation.password(oldPassword, {validationLevel: \"exists\"});\n        let validatedPassword = LoginFormValidation.password(password, {validationLevel: \"length\"});\n\n        let templateInstance = Template.instance();\n        templateInstance.isLoading.set(true);\n        var errors = []\n\n        templateInstance.formMessages.set({});\n        templateInstance.isLoading.set(true)\n\n        if(oldPassword==password){\n            errors.push({\n                error: \"INVALID_PASSWORD\",\n                reason: \"New password cannot be same as old password.\"\n            });\n            // errors.password2 = [\n            //     {\n            //         error: \"INVALID_PASSWORD\",\n            //         reason: \"Passwords doesn't match\"\n            //     }\n            // ]\n            // templateInstance.$(\"button[type=submit]\").attr(\"disabled\",false);//We need it here because line 560 errors.password2 = validatedPassword2; will over write this message if we don't return here. Also array merge isn't an option as our UI is not ready to show multiple messages. It can only take 1 error at a time.\n            // templateInstance.formMessages.set({\n            //     errors: errors\n            // });\n            // return;\n        }\n        if (validatedOldPassword !== true) {\n            errors.push(validatedOldPassword);\n        }\n        if (validatedPassword !== true) {\n            errors.push(validatedPassword);\n        }\n\n        if (errors.length) {\n            templateInstance.$(\"button[type=submit]\").attr(\"disabled\",false);\n            templateInstance.formMessages.set({\n                errors: errors\n            });\n            // prevent signup\n            templateInstance.isLoading.set(false)\n            return;\n        }\n\n        Accounts.changePassword(oldPassword, password, (error) => {\n            //console.log('Here in callback');\n            //templateInstance.$(\"button[type=submit]\").attr(\"disabled\",false);\n            templateInstance.isLoading.set(false);\n            if (error) {\n                templateInstance.$(\"button[type=submit]\").attr(\"disabled\",false);\n                // Show some error message\n                templateInstance.formMessages.set({\n                    errors: [error]\n                });\n            } else {\n\n                templateInstance.$(\".login-input--oldPassword, .login-input--password\").val('')\n                $('#changepass-dlg .changePwdAlertMsgs p, #changepass-dlg .help-block p').html('');\n                //$('.login-input--password, .login-input--oldPassword').val('');\n\n                // // Close dropdown or navigate to page\n                templateInstance.formMessages.set({\n                    info: [{\n                        reason: 'Password successfully changed'\n                    }]\n                });\n\n                if($)if($.fancybox){\n                    $.fancybox.close();\n                    templateInstance.formMessages.set({});\n                }\n            }\n        });\n    }\n});\n\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction isIE () {\n    var myNav = navigator.userAgent.toLowerCase();\n    return (myNav.indexOf('msie') != -1) ? parseInt(myNav.split('msie')[1]) : false;\n}","import \"./pagination.html\";\nimport \"./propertyApplications.html\";\nimport SimpleSchema from \"simpl-schema\";\n// SimpleSchema.extendOptions(['autoform']);\n// window.deactivateInProgress = '';\n\n\nfunction setFilters(){\n    var userFilters = Session.get('userFilters');\n    try {\n        if (userFilters.check) {\n            for (var k = 0; k < userFilters.check.length; k++) {\n                if (userFilters.check[k].val == 'all')continue;\n                if (userFilters.check[k].val == 'clearall')continue;\n                if (userFilters.check[k].enabled) {\n                    $(\".dropdown-menu input[value='\" + userFilters.check[k].val + \"']\").prop('checked', true);\n                }\n                dropdownCheckbox();\n            }\n        }\n        if (userFilters.s1) {\n            var offerRangeVal = document.getElementById('offerRangeInput');\n            offerRangeVal.noUiSlider.set(userFilters.s1.range);\n        }\n    }catch (e){}\n    dropdownCheckbox();\n}\nfunction applyFilters(){\n    // console.log('event applyFilters jquery')\n    var slider = document.getElementById('offerRangeInput');\n    var offerRangeVal = slider.noUiSlider.get();\n    var userFilters = Session.get('userFilters');\n    userFilters.s1.range = offerRangeVal;\n    Session.set('userFilters',userFilters);\n}\nfunction applyFilterValues(){\n    // console.log('event applyFiltersValues jquery')\n    var slider = document.getElementById('offerRangeInput');\n    var offerRangeVal = slider.noUiSlider.get();\n    $('.filterS1l').html(numDifferentiation(offerRangeVal[0]))\n    $('.filterS1h').html(numDifferentiation(offerRangeVal[1]))\n    // var userFilters = Session.get('userFilters');\n    // userFilters.s1.range = offerRangeVal;\n    // Session.set('userFilters',userFilters);\n    // $('.filterS2l').html(numDifferentiation(priceRange[0] ))\n    // $('.filterS2h').html(numDifferentiation(priceRange[1] ))\n\n}\nfunction numDifferentiation(val) {\n    if(isNaN(val))return 0;\n    val = parseInt(val);\n    if(val >= 1000000000) val = (val/1000000000).toFixed(0) + ' Billion';\n    else if(val >= 1000000) val = (val/1000000).toFixed(0) + ' Million';\n    else if(val >= 1000) val = val.toFixed(0) ;\n    else val = val.toFixed(0);\n    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction startUISlider(data){\n    var slider = document.getElementById('offerRangeInput');\n\n    noUiSlider.create(slider, {\n\n        start: data.s1.start,\n\n        connect: true,\n\n        step: 1,\n\n        range: {\n\n            'min': data.s1.range[0],\n\n            'max': data.s1.range[1]\n\n        },\n\n        format: wNumb({\n\n            decimals: 0\n\n        })\n\n    });\n\n    slider.noUiSlider.on('update', function(){\n        applyFilterValues();\n    });\n    slider.noUiSlider.on('change', function(){\n        applyFilters();\n    });\n    setTimeout(function () {setFilters();},400)\n}\nfunction startFilters(){\n    try{\n    var gDefaultFilters = Session.get('gDefaultFilters');\n\n    var propertyData = Session.get('propertyData');\n    if(propertyData.auctionId){\n        var auction = Collections.Auctions.findOne(propertyData.auctionId)\n        var min = auction.price*0.7\n        var max = auction.price*1.5\n        gDefaultFilters.s1 = {\n            \"start\": [min, max],\n            \"range\": [min, max]\n        }\n        startUISlider({\n            \"s1\":gDefaultFilters.s1\n        });\n        $('.filterS1l').html(numDifferentiation(min))\n        $('.filterS1h').html(numDifferentiation(max))\n    }\n\n    var userFilters = Session.get('userFilters');\n    var fetchPrevFilters = true;\n\n    var userFiltersAuctionId = Session.get('userFiltersAuctionId');\n    if(!userFiltersAuctionId)fetchPrevFilters=false;\n    if(userFiltersAuctionId != propertyData.auctionId)fetchPrevFilters=false;\n\n    if(!userFilters)fetchPrevFilters=false;\n\n    if(fetchPrevFilters) Session.set('userFilters',userFilters);\n    else Session.set('userFilters',gDefaultFilters);\n\n    Session.set('userFiltersAuctionId',propertyData.auctionId);\n\n    dropdownCheckbox();\n    setTimeout(function () {dropdownCheckbox();},100)\n    setTimeout(function () {dropdownCheckbox();},1000)\n    }catch(e){\n        // console.log('Catch of startFilters')\n        console.log(e)\n    }\n}\nfunction getPaginationData2D(totalResultsCount,resultsPerPage,dimensionNumber){\n    // Page numbers are 2 dimensional, making it store page numbers of 2 pagination elements on the page.\n    //dimensionNumber tells you on which dimension is this method working on ; should start with 0, 1, 2 like an array numbers.\n    var currentPageNo = FlowRouter.current().params.pageno;\n    let originalPgSplit = null, validOriginalPgSplit = false;\n    if(currentPageNo){\n        originalPgSplit = currentPageNo.toString().split('-')\n        if(originalPgSplit.length==2){\n            if(!isNaN(originalPgSplit[dimensionNumber])){ currentPageNo = parseInt(originalPgSplit[dimensionNumber]); validOriginalPgSplit = true;}\n        }\n    }\n    if(!validOriginalPgSplit){//invalid originalPgSplit; reset it\n        originalPgSplit = [1,1]\n    }\n    if(!currentPageNo){currentPageNo = 1}\n    var pages = [], prevPage = {}, nextPage={};\n    var pgMin = currentPageNo-4, pgMax = currentPageNo+ 5, maxPages = Math.ceil(totalResultsCount/resultsPerPage);\n    if(pgMin<1)pgMin =1;\n    if(pgMax<1)pgMax =1;\n    if(maxPages<1)maxPages =1;\n    if(pgMin>maxPages)currentPageNo =maxPages;\n    let tmp={};\n    var href = '';\n\n    var cRoute = FlowRouter.current();\n\n    for (var i=pgMin; i<=maxPages;i++){\n        cRoute.params['pageno'] = (dimensionNumber==0 ? i+'-'+originalPgSplit[1] : originalPgSplit[0]+'-'+i ) ;\n        href = FlowRouter.url(cRoute.route.name,cRoute.params,cRoute.queryParams)\n        tmp = {\n            \"href\": href,\n            \"text\": i\n        }\n        if(i== currentPageNo) {\n            tmp['href'] = 'javascript:void(0);';\n            tmp['current'] = true;\n        }\n        pages.push(tmp)\n    }\n    var prevPageNo = currentPageNo- 1, nextPageNo=currentPageNo+ 1;\n    if(prevPageNo<1){\n        prevPage['href'] = 'javascript:void(0)';\n        prevPage['text'] = 'Previous';\n        prevPage['disabled'] = 'disabled';\n    }else{\n        cRoute.params['pageno'] = (dimensionNumber==0 ? prevPageNo+'-'+originalPgSplit[1] : originalPgSplit[0]+'-'+prevPageNo ) ;\n        prevPage['href'] = FlowRouter.url(cRoute.route.name,cRoute.params,cRoute.queryParams)\n        prevPage['text'] = 'Previous';\n    }\n    if(nextPageNo>maxPages)nextPageNo =maxPages;\n    if(nextPageNo == currentPageNo){\n        nextPage['href'] = 'javascript:void(0)';\n        nextPage['text'] = 'Next';\n        nextPage['disabled'] = 'disabled';\n    }else{\n        cRoute.params['pageno'] = (dimensionNumber==0 ? nextPageNo+'-'+originalPgSplit[1] : originalPgSplit[0]+'-'+nextPageNo ) ;\n        nextPage['href'] = FlowRouter.url(cRoute.route.name,cRoute.params,cRoute.queryParams)\n        nextPage['text'] = 'Next';\n    }\n    return {\n        \"prevPage\":prevPage,\n        \"pages\":pages,\n        \"nextPage\": nextPage\n    }\n}\n\n\nfunction numFormat(x) {\n    //var x=12345652457.557;\n    //console.log(x)\n    if(!x)return x;\n    x=x.toString();\n    var afterPoint = '';\n    if(x.indexOf('.') > 0)\n        afterPoint = x.substring(x.indexOf('.'),x.length);\n    afterPoint = afterPoint.substr(0,3);\n    x = Math.floor(x);\n    x=x.toString();\n    var lastThree = x.substring(x.length-3);\n    var otherNumbers = x.substring(0,x.length-3);\n    if(otherNumbers != '')\n        lastThree = ',' + lastThree;\n    var res = otherNumbers.replace(/\\B(?=(\\d{2})+(?!\\d))/g, \",\") + lastThree + afterPoint;\n    return res;\n}\n\n\n\nTemplate.propertyApplications.onCreated(function(){\n    this.deactivateInProgress = new ReactiveVar( false );\n    Session.set('propertyData',false);\n\n    var gDefaultFilters = {}\n    gDefaultFilters.check = [\n        {val:'empName',label:'Employer name'},\n        {val:'salary',label:'Salary'},\n        {val:'workRef',label:'Work Reference'},\n        {val:'passport',label:'Passport'},\n        {val:'pps',label:'PPS'},\n        {val:'landlordRef',label:'Landlord Reference'},\n        {val:'financialRef',label:'Financial Reference'},\n        {val:'govtID',label:'Govt. ID'},\n        {val:'resume',label:'Resume'}\n    ];\n    gDefaultFilters.s1 = {\n        \"start\": [0, 1000],\n        \"range\": [0, 1000]\n    }\n    Session.set('gDefaultFilters',gDefaultFilters);\n\n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.autorun(function(){\n\n        var pageno = FlowRouter.getParam('pageno');\n        var PAresperpage = 20\n        var EEresperpage = 100\n\n        instance.subscribe('Config');\n        var id = FlowRouter.getParam('id');\n        if(id){\n            instance.subscribe(\"PropertyApplications\",{viewName: 'PropertyApplications.view',pageno:pageno,PAresperpage:PAresperpage,EEresperpage:EEresperpage,id:id}) ;\n            instance.subscribe(\"total-PropertyApplications\",{viewName: 'PropertyApplications.view',pageno:pageno,PAresperpage:PAresperpage,EEresperpage:EEresperpage,id:id}) ;\n            instance.subscribe(\"total-EmailEnquiries\",{viewName: 'PropertyApplications.view',pageno:pageno,PAresperpage:PAresperpage,EEresperpage:EEresperpage,id:id}) ;\n        }\n\n        instance.subscribe('userData');\n\n        if(instance.subscriptionsReady()){\n            instance.isSubsLoaded.set(true)\n        }\n    })\n    // var userFilters = Session.get('userFilters');\n    // if(!userFilters)Session.set('gDefaultFilters',gDefaultFilters);\n\n})\nTemplate.propertyApplications.helpers({\n    isSubsLoaded:function(){\n        return Template.instance().subscriptionsReady();\n    },\n    userLoggedIn:function(){\n        if(Meteor.user())return true;\n        return false;\n    },\n    avgOffer : function () {\n        var tmp = Collections.PA_AvgOffer.find().fetch();\n        if(tmp.length) {\n            var offer = tmp[0]['avgOffer'];\n            if(offer<1)return 0;\n            return parseInt(offer);\n        }\n        else return false;\n    },\n    dataFull : function () {\n\n        var propertyData = Session.get('propertyData');\n\n        try {\n            var selector = {\n                auctionId: propertyData.auctionId,\n                isArchived: false\n            }\n\n            // var totalResultsCount = Collections.Bids.find(selector).count();\n            var totalResultsCount = Counts.get(\"total-PropertyApplications\");\n\n            clearMeta();\n            try{\n                var title = '';\n                if (totalResultsCount > 1) title = totalResultsCount + ' applications';\n                else if (totalResultsCount > 1) title = totalResultsCount + ' applications';\n                else title = 'Applications';\n                title += ' for ' + propertyData.address.address + ', ' + propertyData.address.area;\n\n                if (propertyData.address.county) title += ', ' + propertyData.address.county;\n\n\n                DocHead.setTitle(titleCase(title) + ' | SpotMyCrib Admin');\n                DocHead.addMeta({\n                    name: \"description\",\n                    content: \"View applications for property \" + propertyData.type + \", choose a winning tenant, see their social profiles and much more.\"\n                });\n            }catch(err){\n                DocHead.setTitle(' Property not found | SpotMyCrib Admin');\n                DocHead.addMeta({name: \"description\", content: \"\"});\n            }\n            return {\n                totalResultsCount: totalResultsCount\n            };\n        }catch (err){}\n    },\n    dataChosen : function () {\n        var propertyData = Session.get('propertyData');\n        if(!propertyData){\n            console.log(\"Empty project data\");\n            return false;}\n        try {\n            var selector = {\n                auctionId: propertyData.auctionId,\n                isArchived: false,\n                chosen:true\n            }\n\n            globlaAuctionId1 = propertyData.auctionId;\n            globalAuctionData1 = propertyData.auction\n\n            var totalChosenCount = Collections.Bids.find(selector).count();/// don't use the blow code, it doesn't have pagination.\n            // var totalChosenCount = Counts.get(\"total-PropertyApplications\");\n            var retChosen = Collections.Bids.find(selector, {\n                transform: function (doc) {\n\n                    doc.auction = Collections.Auctions.findOne({\n                        _id: doc.auctionId\n                    });\n                    // if (doc.auctionId != globlaAuctionId1 || !globalAuctionData1._id) {\n                    //     doc.auction = Collections.Auctions.findOne({\n                    //         _id: doc.auctionId\n                    //     });\n                    // } else {\n                    //     doc.auction = globalAuctionData1;\n                    // }\n\n                    // doc.user = Meteor.users.findOne({\n                    //     _id: doc.userId\n                    // });\n\n\n                    return doc;\n                },\n                limit: 100,//Hardcoded logic for now, may be put a max limit of 100 chosen\n                sort: {updatedAt: -1}\n            });\n\n            return {\n                resultsChosen: retChosen,\n                totalChosenCount: totalChosenCount\n            };\n        }catch (err){}\n    },\n    dataEmailEnquiries : function () {\n        var propertyData = Session.get('propertyData');\n        if(!propertyData){\n            console.log(\"Empty project data\");\n            return false;}\n        try {\n            var selector = {\n                propertyId: propertyData._id,\n                isArchived: false\n            }\n\n            /////PAGINATION\n            var resultsPerPage = 100\n            var currentPageNo = FlowRouter.current().params.pageno;\n            if(currentPageNo){\n                let tmp = currentPageNo.toString().split('-')\n                if(tmp.length==2){\n                    if(!isNaN(tmp[1])) currentPageNo = parseInt(tmp[1])\n                }\n            }\n            if(!currentPageNo){currentPageNo = 1}\n            var skip = (currentPageNo -1) * resultsPerPage;\n\n            // var totalEnquiryCount = Collections.EmailEnquiries.find(selector).count();\n            var totalEnquiryCount = Counts.get(\"total-EmailEnquiries\");\n            var retChosen = Collections.EmailEnquiries.find(selector, {\n                limit: resultsPerPage,\n                sort: { updatedAt : -1 }\n                // skip: skip//not needed as the server would do this.\n            });\n\n            let paginationNeeded=(totalEnquiryCount/resultsPerPage > 1.0? true : false);\n\n            return {\n                resultsEnquiries: retChosen,\n                totalEnquiryCount: totalEnquiryCount,\n                pagination: (paginationNeeded ? getPaginationData2D(totalEnquiryCount,resultsPerPage,1) : false ),\n                paginationNeede: paginationNeeded\n            };\n        }catch (err){}\n    },\n    dataNonChosen : function () {\n\n        var propertyData = Session.get('propertyData');\n        var userFilters = Session.get('userFilters');\n        if(!propertyData){\n            console.log(\"Empty project data\");\n            return false;}\n\n        var selector = {\n            auctionId: propertyData.auctionId,\n            isArchived: false,\n            chosen:false\n        }\n        if(userFilters){\n            if(userFilters.s1.range)selector.yourBid =  { $gt: parseInt(userFilters.s1.range[0]), $lt: parseInt(userFilters.s1.range[1]) }\n        }\n\n        globlaAuctionId1 = propertyData.auctionId;\n        globalAuctionData1 = propertyData.auction;\n        /////PAGINATION\n        var resultsPerPage = 20;\n        var currentPageNo = FlowRouter.current().params.pageno;\n        if(currentPageNo){\n            let tmp = currentPageNo.toString().split('-')\n            if(tmp.length==2){\n                if(!isNaN(tmp[0])) currentPageNo = parseInt(tmp[0])\n            }\n        }\n        if(!currentPageNo){currentPageNo = 1}\n        var skip = (currentPageNo -1) * resultsPerPage;\n        var urlBase = 'account/propertyapplications/'+FlowRouter.current().params.id+'/';\n\n\n\n        // var totalNonChosenCount = Collections.Bids.find(selector).count();\n        var totalNonChosenCount = Counts.get(\"total-PropertyApplications\");\n        var resultsNonChosen = Collections.Bids.find(selector, {\n            transform: function (doc) {\n\n                doc.userStatic =  Meteor.users.findOne({_id: doc.userId});\n\n                doc.auction = Collections.Auctions.findOne({\n                    _id: doc.auctionId\n                });\n                // if (doc.auctionId != globlaAuctionId1 || !globalAuctionData1._id) {\n                //     doc.auction = Collections.Auctions.findOne({\n                //         _id: doc.auctionId\n                //     });\n                // } else {\n                //     doc.auction = globalAuctionData1;\n                // }\n\n                return doc;\n            },\n            limit: resultsPerPage,\n            sort: { updatedAt : -1 }\n            // skip: skip//not needed as the server would do this.\n        }).fetch();\n\n        if(userFilters)\n        if(userFilters.check){\n            var isItNeeded=true;var countActiveFilters = 0;\n            for(var k=0;k<userFilters.check.length;k++){\n                if (userFilters.check[k].val == 'all' )continue;\n                if (userFilters.check[k].val == 'clearall' )continue;\n                if(userFilters.check[k].enabled)countActiveFilters++;\n            }\n            if(!countActiveFilters)isItNeeded=false;//if none sel do nothing.\n\n            if(isItNeeded) {\n                var newArr = [];\n                var selSatisfiedCount = 0;\n                for (var i = 0; i < resultsNonChosen.length; i++) {\n                    selSatisfiedCount = 0\n                    var ele = resultsNonChosen[i];\n                    var ref = ele.userStatic.profile.references;\n                    if (!ref)break;\n\n\n                    for (var j = 0; j < userFilters.check.length; j++) {\n                        if (!userFilters.check[j].enabled)continue;//if not enabled , then don' consider it\n                        if (userFilters.check[j].val == 'all' )continue;\n                        if (userFilters.check[j].val == 'clearall' )continue;\n                        if (userFilters.check[j].val == 'empName' && ref.employerName) {\n                            selSatisfiedCount++;\n                            continue;\n                        }\n                        if (userFilters.check[j].val == 'salary' && ref.employerTakeHome) {\n                            selSatisfiedCount++;\n                            continue;\n                        }\n                        if (userFilters.check[j].val == 'workRef' && ref.hasWorkRef) {\n                            selSatisfiedCount++;\n                            continue;\n                        }\n                        if (userFilters.check[j].val == 'passport' && ref.hasPassport) {\n                            selSatisfiedCount++;\n                            continue;\n                        }\n                        if (userFilters.check[j].val == 'pps' && ref.hasPPS) {\n                            selSatisfiedCount++;\n                            continue;\n                        }\n                        if (userFilters.check[j].val == 'landlordRef' && ref.hasLandlordRef) {\n                            selSatisfiedCount++;\n                            continue;\n                        }\n                        if (userFilters.check[j].val == 'financialRef' && ref.hasFinancialRef) {\n                            selSatisfiedCount++;\n                            continue;\n                        }\n                        if (userFilters.check[j].val == 'govtID' && ref.hasGovtID) {\n                            selSatisfiedCount++;\n                            continue;\n                        }\n                        if (userFilters.check[j].val == 'resume' && ref.hasResume) {\n                            selSatisfiedCount++;\n                            continue;\n                        }\n                        // if(userFilters.check[j].val == 'empName' && !user.profile.references.employerName){skip=true;break;}\n                        // if(userFilters.check[j].val == 'salary' && !user.profile.references.employerTakeHome){skip=true;break;}\n                        // if(userFilters.check[j].val == 'workRef' && !user.profile.references.hasWorkRef){skip=true;break;}\n                        // if(userFilters.check[j].val == 'passport' && !user.profile.references.hasPassport){skip=true;break;}\n                        // if(userFilters.check[j].val == 'pps' && !user.profile.references.hasPPS){skip=true;break;}\n                        // if(userFilters.check[j].val == 'landlordRef' && !user.profile.references.hasLandlordRef){skip=true;break;}\n                        // if(userFilters.check[j].val == 'financialRef' && !user.profile.references.hasFinancialRef){skip=true;break;}\n                        // if(userFilters.check[j].val == 'govtID' && !user.profile.references.hasGovtID){skip=true;break;}\n                        // if(userFilters.check[j].val == 'resume' && !user.profile.references.hasResume){skip=true;break;}\n\n                    }\n                    if(selSatisfiedCount==countActiveFilters)newArr.push(ele);\n                    // if (!skip)\n                }\n                resultsNonChosen = newArr;\n            }\n        }\n\n        let paginationNeeded=(totalNonChosenCount/resultsPerPage > 1.0? true : false);\n\n        return {\n            resultsNonChosen: resultsNonChosen,\n            totalNonChosenCount: totalNonChosenCount,\n            pagination: (paginationNeeded ? getPaginationData2D(totalNonChosenCount,resultsPerPage,0) : false ),\n            paginationNeeded: paginationNeeded\n        };\n\n    },\n    showFilters: function(){\n        // return true;\n        var propertyData = Session.get('propertyData');\n        try {\n            var selector = {\n                auctionId: propertyData.auctionId,\n                isArchived: false\n            }\n            // var totalResultsCount = Collections.Bids.find(selector).count();\n            var totalResultsCount = Counts.get(\"total-PropertyApplications\");\n            if(totalResultsCount>5)return true;\n        }catch(e){}\n        return false;\n    },\n    initFilters:function(){\n        setTimeout(startFilters,500);\n    },\n    propertyData : function () {\n        var ret = getpropertyData();\n\n        //Now check if he has auctionId passed in query & prop has no auction ID. if yes, update your session\n        try{if(FlowRouter.current().params.query.auctionId && !ret.auctionId)ret.auctionId = FlowRouter.current().params.query.auctionId}catch(e){}\n\n        if(!ret.auctionId){\n            var prevRoute = Session.get('prevRoute');\n            if(prevRoute){\n                FlowRouter.go(prevRoute.name,prevRoute.args)\n                Session.set('prevRoute',false);\n            }else{\n                FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n            }\n        }\n\n        Session.set('propertyData',ret);\n\n        return ret;\n    },\n    // time: function(){\n    //\n    //     var propertyData = Session.get('propertyData');\n    //     var timestamp = TimeSync.serverTime(null, 30000);\n    //     if(!propertyData.auction.endDate || !timestamp)return;\n    //\n    //\n    //     var dend = Date.parse(propertyData.auction.endDate);\n    //     var timeDiff = dend - timestamp ;\n    //     if(timeDiff<0)return false;\n    //\n    //     var day = Math.floor(timeDiff / (1000 * 3600 * 24))\n    //     var hour = Math.floor(timeDiff / (1000 * 3600 ))\n    //     var min = Math.floor(timeDiff / (1000 * 60 ) )\n    //     hour = hour - (day * 24);\n    //     min = min - (day * 24* 60) - (hour * 60);\n    //     return {\"day\":day,\"hour\":hour,\"min\":min}\n    // },\n    isAuctionClosed:function(){\n        // var timestamp = TimeSync.serverTime(null, 30000);\n        var timestamp = new Date();\n        var propertyData = Session.get('propertyData');\n        var dend = Date.parse(propertyData.auction.endDate);\n        var timeDiff = dend - timestamp;\n        if(timeDiff<0){\n            return true;\n        }\n        return false;\n    },\n    assistanceAlreadyRequested: function(){\n        //Just to make this reactive\n        var user = Meteor.user();\n        if(user)\n            if(user.profile)\n                if(user.profile.assistanceRequested){\n                    return user.profile.assistanceRequested || Session.get('assistanceRequested');\n                }\n\n        return Session.get('assistanceRequested');\n\n    },\n    deactivateInProgress: function(){\n        deactivateInProgress = Template.instance().deactivateInProgress;\n        return Template.instance().deactivateInProgress.get() ;\n    },\n    userFilters:function(){\n        return Session.get('userFilters');\n    }\n})\n\nTemplate.propertyApplications.onRendered(function() {\n    try{\n        jQuery(\"html,body\").animate({scrollTop: 0}, 250);\n    }catch(e){\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n    }\n})\nTemplate.propertyApplications.events({\n    \"click .showEditPropertyForm\": function (event, template) {\n        var prevRoute = {name: FlowRouter.current().route.name,args:{id:FlowRouter.current().params.id, pageno:FlowRouter.current().params.pageno},scrollTo:'body' }\n        Session.set('prevRoute',prevRoute);\n        var propertyData = Session.get('propertyData');\n        FlowRouter.go('account/editproperty',{id:propertyData._id})\n\n    },\n    \"click .deactivatePropertyBtn\": function (event, template) {\n        event.preventDefault();\n        var propertyData = Session.get('propertyData');\n        if(!propertyData){\n            console.log(\"Empty project data\");\n            return false;}\n        var user = Meteor.user();\n        if(!user){console.log(\"Invalid user\");return;}\n        if(propertyData.createdByAgent != user._id){console.log(\"Invalid user\");return;}\n\n        $.fancybox({\n            'padding': 0,\n            'href': '#conf-dactivate-pop',\n            afterShow:function(template){\n                attachEvents();\n            },\n            afterClose:function(template){\n                console.log(template);\n            }\n        })\n    },\n    \"click .backBtn\": function(event, template){\n        var prevRoute = Session.get('prevRoute');\n        if(prevRoute){\n            FlowRouter.go(prevRoute.name,prevRoute.args)\n            Session.set('prevRoute',false);\n        }else{\n            FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n        }\n    },\n    \"click .showCopyDlg\": function (event, template) {\n        var propertyData = Session.get('propertyData');\n\n        let user = Meteor.user();\n        let sluggedName = slugifyEmailAddress(user.profile.name);\n        if(!sluggedName)sluggedName = 'rent'\n        let email = sluggedName+'-let-'+propertyData.auction.lettingAuctionCode.toLowerCase()+\"@spotmycrib.ie\";\n        $('#agentPropertyEmailField').val(email);\n\n        var url = FlowRouter.url('letting',{key:propertyData.auction.lettingAuctionCode})\n        $('#propertyLinkField').val(url);\n        $.fancybox({\n            'padding': 0,\n            'href': '#propertyLinkDlg',\n            afterShow:function(template){\n                $('#agentPropertyEmailField').select();\n                $('#propertyLinkDlg .copyEmailBtn').unbind().bind('click',function () {\n                    $('#agentPropertyEmailField').select();\n\n                    try {\n                        var successful = document.execCommand('copy');\n                        var msg = successful ? 'successful' : 'unsuccessful';\n                        // console.log('Copying text command was ' + msg);\n                        $.fancybox.close()\n                    } catch (err) {\n                        console.log('Oops, unable to copy');\n                    }\n                    ga('send', 'event', 'propertyApplicationsPage', 'copyShareEmail', 'copyShareEmail Btn Clicked');\n                })\n                $('#propertyLinkDlg .copyLinkBtn').unbind().bind('click',function () {\n                    $('#propertyLinkField').select();\n\n                    try {\n                        var successful = document.execCommand('copy');\n                        var msg = successful ? 'successful' : 'unsuccessful';\n                        // console.log('Copying text command was ' + msg);\n                        $.fancybox.close()\n                    } catch (err) {\n                        console.log('Oops, unable to copy');\n                    }\n                    ga('send', 'event', 'propertyApplicationsPage', 'copyShareLink', 'copyShareLink Btn Clicked');\n                })\n                $('#propertyLinkDlg .cancelBtn').unbind().bind('click',function () {\n                    $.fancybox.close()\n                })\n            },\n        });\n\n    },\n    \"click .jns-dropdown-btn\": function (event, template) {\n        $('.jns-dropdown-area').toggle();\n    },\n})\n\nTemplate.bidList.onCreated(function(){\n    this.choosingInProgress = new ReactiveVar( false );\n    this.unChoosingInProgress = new ReactiveVar( false );\n})\nTemplate.bidList.helpers({\n    user:function(){\n        // debugger;\n        var ret = Meteor.users.find({\n            _id: this.userId\n        }).fetch();\n        return ret[0];\n    },\n    canAfford: function(salary){//This works based on the bid (not rent)\n        if( !this.yourBid){return false;}\n        if(salary*0.4 >= this.yourBid ){\n            return true;\n        }\n        return false;\n    },\n    choosingInProgress: function(){\n        return Template.instance().choosingInProgress.get() ;\n    },\n    numDifferentiation: function(data){\n        return numDifferentiation(data);\n    },\n    classBidList:function () {\n        if(this.chosen)return 'active';\n\n        var propertyData = Session.get('propertyData');\n        try {\n            var a = Collections.Auctions.find({_id:propertyData.auction._id}).fetch();\n            propertyData.auction = a[0];\n            if (propertyData.auction.chosenBids.length)return 'archive';\n        }catch (e){}\n        return 'border-top';\n    }\n})\nTemplate.bidList.events({\n    \"click .chooseTenant\": function (event, template) {\n        template.choosingInProgress.set(true);\n        choosingInProgress = template.choosingInProgress\n\n        var r = confirm(\"Are you sure? This will send a confirmation mail to the applicant.\");\n        if (!r){ template.choosingInProgress.set(false);return;}\n\n        Meteor.call('chooseWinning', [this.auctionId, this._id], function(error, result){\n            choosingInProgress.set(false) ;\n            if(error){\n                console.log(error);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(error.error);\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n            console.log(\"Success\");\n\n\n        });\n    },\n    \"click .unChooseTenant\": function (event, template) {\n        template.unChoosingInProgress.set(true);\n        unChoosingInProgress = template.unChoosingInProgress\n\n        var r = confirm(\"Are you sure? This will send a pending mail to the applicant.\");\n        if (!r){ template.unChoosingInProgress.set(false);return;}\n\n        Meteor.call('unChooseWinning', [this.auctionId, this._id], function(error, result){\n            unChoosingInProgress.set(false) ;\n            if(error){\n                console.log(error);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(error.error);\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n            console.log(\"Success\");\n        });\n    },\n    \"click .inviteForViewingBtn\": function (event, template) {\n        var propertyData = Session.get('propertyData');\n        var ret = Meteor.users.find({\n            _id: this.userId\n        }).fetch();\n        var inviteForViewing = Session.get('inviteForViewingData');\n        var today = new Date();\n        var tomorrow = new Date();\n        tomorrow.setDate(today.getDate()+1);tomorrow.setMinutes(0);tomorrow.setSeconds(0);\n        var h = tomorrow.getHours();\n        if(h<9)h=9;else if(h>20)h=20;\n        tomorrow.setHours(h);\n        var inviteDate = tomorrow;\n        try{if(inviteForViewing.inviteDate)inviteDate = inviteForViewing.inviteDate;}catch(e){}\n        Session.set('inviteForViewingData',{user:ret[0],bid:this,inviteDate:inviteDate})\n        $.fancybox({\n            'padding': 0,\n            'href': '#inviteForViewingDlg',\n            afterShow:function () {\n                var inviteForViewing = Session.get('inviteForViewingData');\n                var d = inviteForViewing.inviteDate;var am = ' AM';\n                var df = (d.getMonth()+1)+'/'+d.getDate()+'/'+d.getFullYear()+' '+d.getHours()+':'+d.getMinutes()\n                if(d.getHours()>12)am = ' PM';\n                df = df+am;\n                $('#inviteDate').val(df)\n\n            }\n        });\n    },\n});\nTemplate.emailEnquiryList.onCreated(function(){\n    this.choosingInProgress = new ReactiveVar( false );\n    this.unChoosingInProgress = new ReactiveVar( false );\n})\nTemplate.emailEnquiryList.helpers({\n    user:function(){\n        // debugger;\n        var ret = Meteor.users.find({\n            _id: this.userId\n        }).fetch();\n        return ret[0];\n    },\n    canAfford: function(salary){//This works based on the bid (not rent)\n        if( !this.yourBid){return false;}\n        if(salary*0.4 >= this.yourBid ){\n            return true;\n        }\n        return false;\n    },\n    choosingInProgress: function(){\n        return Template.instance().choosingInProgress.get() ;\n    },\n    numDifferentiation: function(data){\n        return numDifferentiation(data);\n    },\n    classBidList:function () {\n        if(this.chosen)return 'active';\n\n        var propertyData = Session.get('propertyData');\n        try {\n            var a = Collections.Auctions.find({_id:propertyData.auction._id}).fetch();\n            propertyData.auction = a[0];\n            if (propertyData.auction.chosenBids.length)return 'archive';\n        }catch (e){}\n        return 'border-top';\n    }\n})\nTemplate.emailEnquiryList.events({\n    \"click .inviteForViewingBtn\": function (event, template) {\n        var propertyData = Session.get('propertyData');\n        var ret = Meteor.users.find({\n            _id: this.userId\n        }).fetch();\n        var inviteForViewing = Session.get('inviteForViewingData');\n        var today = new Date();\n        var tomorrow = new Date();\n        tomorrow.setDate(today.getDate()+1);tomorrow.setMinutes(0);tomorrow.setSeconds(0);\n        var h = tomorrow.getHours();\n        if(h<9)h=9;else if(h>20)h=20;\n        tomorrow.setHours(h);\n        var inviteDate = tomorrow;\n        try{if(inviteForViewing.inviteDate)inviteDate = inviteForViewing.inviteDate;}catch(e){}\n        Session.set('inviteForViewingData',{user:ret[0],bid:this,inviteDate:inviteDate})\n        $.fancybox({\n            'padding': 0,\n            'href': '#inviteForViewingDlg',\n            afterShow:function () {\n                var inviteForViewing = Session.get('inviteForViewingData');\n                var d = inviteForViewing.inviteDate;var am = ' AM';\n                var df = (d.getMonth()+1)+'/'+d.getDate()+'/'+d.getFullYear()+' '+d.getHours()+':'+d.getMinutes()\n                if(d.getHours()>12)am = ' PM';\n                df = df+am;\n                $('#inviteDate').val(df)\n\n            }\n        });\n    },\n});\n\ninviteInProgress='';\nTemplate.inviteForViewing.onCreated(function () {\n    this.inviteInProgress = new ReactiveVar( false );\n    inviteInProgress = this.inviteInProgress;\n})\nTemplate.inviteForViewing.helpers({\n    data:function () {\n        return Session.get('inviteForViewingData');\n    },\n    inviteInProgress:function () {\n        inviteInProgress = Template.instance().inviteInProgress ;\n        return Template.instance().inviteInProgress.get() ;\n    },\n    inviteDateFormated:function () {\n        var inviteForViewing = Session.get('inviteForViewingData');\n        var options = {\n            weekday: \"long\", year: \"numeric\", month: \"short\",\n            day: \"numeric\", hour: \"2-digit\", minute: \"2-digit\"\n        };\n        try{var d=inviteForViewing.inviteDate; return d.toLocaleTimeString(\"en-us\", options); }catch(e){}\n        return ;\n    },\n    propertyData:function () {\n        return  Session.get('propertyData');\n    },\n})\nTemplate.inviteForViewing.events({\n    'change .inviteDate':function (event, template) {\n        var d = new Date($('.inviteDate').val());\n        var inviteForViewing = Session.get('inviteForViewingData');\n        try{ inviteForViewing.inviteDate=d; Session.set('inviteForViewingData',inviteForViewing) }catch(e){}\n\n    },\n    'click .confirmInviteBtn':function () {\n\n        var inviteDate = $('.inviteDate').val()\n        var inviteMessage = $('.inviteMessage').val()\n        console.log(inviteDate)\n        var inviteForViewing = Session.get('inviteForViewingData');\n\n\n        inviteInProgress.set(true) ;\n        Meteor.call('sendInviteForViewingEmail',[inviteForViewing.bid._id,inviteDate],function(error, result){\n            inviteInProgress.set(false) ;\n            if(error){\n                console.log(error);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Failed applying. Please try again, try checking your internet connectivity. Contact us if needed.\");\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n            if(result.status=='Success'){\n                console.log(\"Success\");\n                closePopupEvent()\n            }\n        });\n\n    },\n    'click .closePopupBtn':function () {\n        closePopupEvent()\n    }\n})\nTemplate.inviteForViewing.onRendered(function () {\n    //Needs to be optimised, this is not the right place to put this code, might cause JS errors if Jquery isn' loaded yet.\n    try{\n        this.$('#inviteDate').datetimepicker();\n\n\n\n        this.$('#moveindate').datetimepicker();\n    }catch(err){\n        console.log('dp failed');\n    }\n})\nfunction attachEvents() {\n    $(\".deactivateConfirmBtn\").unbind().bind(\"click\",function () {\n        deactivateConfEvent();\n    })\n    $(\".closePopupBtn\").unbind().bind(\"click\",function () {\n        closePopupEvent();\n    })\n}\nfunction deactivateConfEvent() {\n    var data = Session.get(\"propertyData\");\n    var auctionId = data.auctionId;\n\n    deactivateInProgress.set(true) ;\n    Meteor.call('deactivateAuction',auctionId,function(error, result){\n        deactivateInProgress.set(false) ;\n        if(error){\n            console.log(error);\n            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n            tmp.push(\"Failed deactivating. Please try again, try checking your internet connectivity. Contact us if needed.\");\n            Session.set(\"showErrorDlg\",tmp)\n            return;\n        }\n        console.log(\"Success\");\n\n        closePopupEvent();\n        var prevRoute = Session.get('prevRoute');\n        if(prevRoute){\n            FlowRouter.go(prevRoute.name,prevRoute.args)\n            Session.set('prevRoute',false);\n        }else{\n            FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n        }\n\n    });\n}\nfunction closePopupEvent() {\n    console.log('closePopupEvent');\n    if($)\n        if($.fancybox)\n            $.fancybox.close();\n}\nfunction getpropertyData(){\n    var id = FlowRouter.current().params.id;\n    var ret = Collections.Properties.find(id, {\n        transform: function(data){\n\n            data.auction = Collections.Auctions.findOne(data.auctionId);\n            // data.applicationsReceivedCount = Collections.Bids.find({auctionId:data.auctionId}).count();\n            data.applicationsReceivedCount = Counts.get(\"total-PropertyApplications\");\n            data.applicationsActiveCount = Counts.get(\"total-PropertyApplications\");//Removing the diff between active and total received for now. date jan 9, 2019\n            // data.applicationsActiveCount = Collections.Bids.find({auctionId:data.auctionId,isArchived:false}).count();\n            data.chosenApplicationCount = Collections.Bids.find({auctionId:data.auctionId,isArchived:false,chosen:true}).count();\n\n            return data;\n        },\n        limit: 1\n    }).fetch();\n\n    Meteor.subscribe('avgOffer', ret[0].auctionId);\n\n    return ret[0];\n}\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction dropdownCheckbox(){\n\n    $( '.dropdown-menu .checkbox' ).unbind().on( 'click', function( event ) {\n\n        var $target = $( event.currentTarget ),\n            val = $target.find( 'input' ).attr( 'value' ),\n            $inp = $target.find( 'input' ),\n            idx;\n        var userFilters = Session.get('userFilters');\n\n        if(val == 'all'){\n            setTimeout( function() { $( '.dropdown-menu input' ).not(\"[value='clearall']\").prop( 'checked',true );dropdownCheckbox(); }, 10);\n            if(userFilters){\n                for(var i=0;i<userFilters.check.length;i++){\n                    userFilters.check[i].enabled=\"enabled\";\n                }\n                Session.set('userFilters',userFilters);\n            }\n            $( event.target ).blur();\n            return false;\n        }\n        if(val == 'clearall'){\n            setTimeout( function() { $( '.dropdown-menu input' ).prop( 'checked',false );dropdownCheckbox(); }, 10);\n            if(userFilters){\n                for(var i=0;i<userFilters.check.length;i++){\n                    userFilters.check[i].enabled=\"\";\n                }\n                Session.set('userFilters',userFilters);\n            }\n            $( event.target ).blur();\n            return false;\n        }\n        if($($inp).prop( 'checked')){\n            $($inp).prop( 'checked',false );\n            if(userFilters.check){\n                for(var i=0;i<userFilters.check.length;i++){\n                    if(userFilters.check[i].val == val)userFilters.check[i].enabled=\"\";\n                }\n            }\n        }else{\n            $($inp).prop( 'checked',true );\n            if(userFilters.check){\n                for(var i=0;i<userFilters.check.length;i++){\n                    if(userFilters.check[i].val == val)userFilters.check[i].enabled=\"enabled\";\n                }\n            }\n        }\n\n\n\n        // if ( ( idx = options.indexOf( val ) ) > -1 ) {\n        //     options.splice( idx, 1 );\n        //     setTimeout( function() { $inp.prop( 'checked', false ) }, 0);\n        //     if(userFilters.check){\n        //         for(var i=0;i<userFilters.check.length;i++){\n        //             if(userFilters.check[i].val == val)userFilters.check[i].enabled=\"\";\n        //         }\n        //     }\n        // } else {\n        //     options.push( val );\n        //     setTimeout( function() { $inp.prop( 'checked', true ) }, 0);\n        //     if(userFilters.check){\n        //         for(var i=0;i<userFilters.check.length;i++){\n        //             if(userFilters.check[i].val == val)userFilters.check[i].enabled=\"enabled\";\n        //         }\n        //     }\n        // }\n\n        if(userFilters){\n            Session.set('userFilters',userFilters);\n        }\n        $( event.target ).blur();\n        dropdownCheckbox();\n        // console.log( options );\n        return false;\n    });\n}\nfunction slugifyEmailAddress (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ/_,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '.')           // Replace spaces with \".\"\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with ''\n        // .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single ''\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}","import \"./pagination.html\";\nimport \"./propertyManage.html\";\n\nvar globalFILTERS = {};\n\nfunction getPaginationData(totalResultsCount,currentPageNo,urlBase, resultsPerPage){\n    var pages = [], prevPage = {}, nextPage={};\n    var pgMin = currentPageNo-4, pgMax = currentPageNo+ 5, maxPages = Math.ceil(totalResultsCount/resultsPerPage)\n    if(pgMin<1)pgMin =1;\n    if(pgMax<1)pgMax =1;\n    if(maxPages<1)maxPages =1;\n    if(pgMin>maxPages)currentPageNo =maxPages;\n    var tmp={};\n    for (var i=pgMin; i<=maxPages;i++){\n        var href = urlBase+i+\"/\";\n        tmp = {\n            \"href\": href,\n            \"text\": i\n        }\n        if(i== currentPageNo) {\n            tmp['href'] = 'javascript:void(0);';\n            tmp['current'] = true;\n        }\n        pages.push(tmp)\n    }\n    // if(pgMin==maxPages){//Above loop won't work if only 1 page result\n    //     pages.push({\n    //         \"href\": 'javascript:void(0);',\n    //         \"text\": 1\n    //     })\n    // }\n    var prevPageNo = currentPageNo- 1, nextPageNo=currentPageNo+ 1;\n    if(prevPageNo<1){\n        prevPage['href'] = 'javascript:void(0)';\n        prevPage['text'] = 'Previous';\n        prevPage['disabled'] = 'disabled';\n    }else{\n        prevPage['href'] = urlBase+prevPageNo+\"/\";\n        prevPage['text'] = 'Previous';\n    }\n    if(nextPageNo>maxPages)nextPageNo =maxPages;\n    if(nextPageNo == currentPageNo){\n        nextPage['href'] = 'javascript:void(0)';\n        nextPage['text'] = 'Next';\n        nextPage['disabled'] = 'disabled';\n    }else{\n        nextPage['href'] = urlBase+nextPageNo+\"/\";\n        nextPage['text'] = 'Next';\n    }\n    return {\n        \"prevPage\":prevPage,\n        \"pages\":pages,\n        \"nextPage\": nextPage\n    }\n}\n\n\nTemplate.registerHelper(\"objectToPairs\",function(object){\n    return _.map(object, function(value, key) {\n        return {\n            key: key,\n            value: value\n        };\n    });\n});\nTemplate.registerHelper(\"hostname\",function(){\n    return Meteor.absoluteUrl();\n});\nfunction numDifferentiation(val) {\n    if(val >= 1000000000) val = (val/1000000000).toFixed(2) + ' Billion';\n    else if(val >= 1000000) val = (val/1000000).toFixed(2) + ' Million';\n    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\nfunction numFormat(x) {\n    //var x=12345652457.557;\n    //console.log(x)\n    if(!x)return x;\n    x=x.toString();\n    var afterPoint = '';\n    if(x.indexOf('.') > 0)\n        afterPoint = x.substring(x.indexOf('.'),x.length);\n    afterPoint = afterPoint.substr(0,3);\n    x = Math.floor(x);\n    x=x.toString();\n    var lastThree = x.substring(x.length-3);\n    var otherNumbers = x.substring(0,x.length-3);\n    if(otherNumbers != '')\n        lastThree = ',' + lastThree;\n    var res = otherNumbers.replace(/\\B(?=(\\d{2})+(?!\\d))/g, \",\") + lastThree + afterPoint;\n    return res;\n}\n\n\n\nTemplate.propertyManage.onCreated(function(){\n    Session.set('propertyData',false);\n    Session.set('PropertyManage',false);\n    this.pdExpanded = new ReactiveVar( true );\n    this.enablingPMS = new ReactiveVar( false );\n\n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.autorun(function(){\n\n        instance.subscribe('Auctions');\n        instance.subscribe('Bids');\n        instance.subscribe('allUserData');\n        instance.subscribe('userData');\n        var id = FlowRouter.getParam('id');\n        instance.subscribe(\"Property\",{viewName: 'property.view',id:id}) ;\n        instance.subscribe(\"PropertyManage\",{viewName: 'propertyManage.view',id:id}) ;\n        instance.subscribe(\"ActivityHistory\",{limit: 50,id:id})  ;\n\n        if(instance.subscriptionsReady()){\n            instance.isSubsLoaded.set(true)\n        }\n    })\n})\nTemplate.propertyManage.helpers({\n    isSubsLoaded:function(){\n        return Template.instance().subscriptionsReady();\n    },\n    userLoggedIn:function(){\n        if(Meteor.user())return true;\n        return false;\n    },\n    data: function(){\n        var id = FlowRouter.current().params.id;\n        if(!id)return [];\n        // debugger;\n        var ret = Collections.PropertyManage.find({propertyId:id});\n        var docs = ret.fetch()\n        if(docs.length)Session.set('PropertyManage',docs[0]);\n        // if(ret.count()==0){\n        //     clearMeta();\n        //     DocHead.setTitle(' Property not found | SpotMyCrib Admin');\n        //     DocHead.addMeta({name: \"description\", content: \"\"});\n        // }\n        // Session.set(\"propertyManageData\",ret);\n        return docs[0];\n    },\n    propertyData: function(){\n        var PropertyManage = Session.get('PropertyManage');\n        if(PropertyManage.propertyId) {\n            var ret = Collections.Properties.find({_id:PropertyManage.propertyId}, {limit: 1})\n            var docs = ret.fetch()\n            var propertyData = docs[0];\n            if(docs.length)Session.set('propertyData',propertyData);\n\n            clearMeta();\n            try{\n                var title = propertyData.address.address + ', ' + propertyData.address.area;\n                if (propertyData.address.county) title += ', ' + propertyData.address.county;\n                title += ' Manage Property';\n\n                DocHead.setTitle(titleCase(title) + ' | SpotMyCrib Admin');\n                DocHead.addMeta({\n                    name: \"description\",\n                    content: \"Manage property \" + propertyData.type + \", view and manage lease, see activity history and much more.\"\n                });\n            }catch(err){\n                DocHead.setTitle('Manage Property | SpotMyCrib Admin');\n                DocHead.addMeta({name: \"description\", content: \"\"});\n            }\n\n            return docs[0];\n        }\n        else {\n            clearMeta();\n            DocHead.setTitle('Manage Property | SpotMyCrib Admin');\n            DocHead.addMeta({name: \"description\", content: \"\"});\n            return [];\n        }\n    },\n    hasPropFound: function(){\n        var id = FlowRouter.current().params.id;\n        var ret = Collections.Properties.find(id, {\n            limit: 1\n        }).fetch();\n        return ret.length;\n    },\n    pdExpanded: function(){\n        return Template.instance().pdExpanded.get() ;\n    },\n    enablingPMS: function(){\n        return Template.instance().enablingPMS.get() ;\n    },\n    // dataFull : function () {\n    //\n    //     var propertyData = Session.get('propertyData');\n    //\n    //     try {\n    //         var selector = {\n    //             auctionId: propertyData.auctionId,\n    //             isArchived: false\n    //         }\n    //\n    //         var totalResultsCount = Collections.Bids.find(selector).count();\n    //\n    //         clearMeta();\n    //         try{\n    //             var title = propertyData.address.address + ', ' + propertyData.address.area;\n    //             if (propertyData.address.county) title += ', ' + propertyData.address.county;\n    //             title += ' Manage Property';\n    //\n    //             DocHead.setTitle(titleCase(title) + ' | SpotMyCrib Admin');\n    //             DocHead.addMeta({\n    //                 name: \"description\",\n    //                 content: \"View applications for property \" + propertyData.type + \", choose a winning tenant, see their social profiles and much more.\"\n    //             });\n    //         }catch(err){\n    //             DocHead.setTitle('Manage Property | SpotMyCrib Admin');\n    //             DocHead.addMeta({name: \"description\", content: \"\"});\n    //         }\n    //         return {\n    //             totalResultsCount: totalResultsCount\n    //         };\n    //     }catch (err){}\n    // },\n    dataChosen : function () {\n\n        var PropertyManage = Session.get('PropertyManage');\n        if(PropertyManage.tenants.length) {\n            var tenIds = [];\n            for(var i=0;i<PropertyManage.tenants.length;i++){\n                if(PropertyManage.tenants[i].id)\n                    tenIds.push(PropertyManage.tenants[i].id)\n            }\n            var selector = {\n                _id: {$in: tenIds},\n                // isArchived: false,//this field isn't needed\n                chosen:true\n            }\n\n            var totalChosenCount = Collections.Bids.find(selector).count();\n            var retChosen = Collections.Bids.find(selector, {\n                sort: {updatedAt: -1}\n            });\n\n            return {\n                resultsChosen: retChosen,\n                totalChosenCount: totalChosenCount\n            };\n        }\n        else return [];\n    },\n    // dataNonChosen : function () {\n    //\n    //     var propertyData = Session.get('propertyData');\n    //     if(!propertyData){\n    //         console.log(\"Empty project data\");\n    //         return false;}\n    //\n    //     var selector = {\n    //         auctionId: propertyData.auctionId,\n    //         isArchived: false,\n    //         chosen:false\n    //     }\n    //\n    //     globlaAuctionId1 = propertyData.auctionId;\n    //     globalAuctionData1 = propertyData.auction;\n    //     /////PAGINATION\n    //     var resultsPerPage = 100;\n    //     var currentPageNo = FlowRouter.current().params.pageno;\n    //     if(!currentPageNo){currentPageNo = 1}\n    //     var skip = (currentPageNo -1) * resultsPerPage;\n    //     var urlBase = 'account/propertyapplications/'+FlowRouter.current().params.id+'/';\n    //\n    //\n    //\n    //     var totalNonChosenCount = Collections.Bids.find(selector).count();\n    //     var resultsNonChosen = Collections.Bids.find(selector, {\n    //         transform: function (doc) {\n    //\n    //             if (doc.auctionId != globlaAuctionId1 || !globalAuctionData1._id) {\n    //                 doc.auction = Collections.Auctions.findOne({\n    //                     _id: doc.auctionId\n    //                 });\n    //             } else {\n    //                 doc.auction = globalAuctionData1;\n    //             }\n    //\n    //             return doc;\n    //         },\n    //         limit: resultsPerPage,\n    //         sort: { updatedAt : -1 },\n    //         skip: skip\n    //     });\n    //\n    //     return {\n    //         resultsNonChosen: resultsNonChosen,\n    //         totalNonChosenCount: totalNonChosenCount,\n    //         pagination: getPaginationData(totalNonChosenCount,currentPageNo,urlBase,resultsPerPage)\n    //     };\n    //\n    // },\n    showFilters: function(){\n        return false;\n    },\n    // propertyData : function () {\n    //     var ret = getpropertyData();\n    //     if(!ret.auctionId){\n    //         var prevRoute = Session.get('prevRoute');\n    //         if(prevRoute){\n    //             FlowRouter.go(prevRoute.name,prevRoute.args)\n    //             Session.set('prevRoute',false);\n    //         }else{\n    //             FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n    //         }\n    //     }\n    //\n    //     Session.set('propertyData',ret);\n    //\n    //     return ret;\n    // },\n    filters:function(){\n        var data = {}//{\"Home Type\":[\"2 BHK\"],\"Floor\":[\"2 to 15\"],\"Price Range\":[\"67.45 to 97.45 \"]}\n        var FILTERS = Session.get('globalFILTERS')\n        var defaultFilters = Session.get('propertyData');defaultFilters = defaultFilters.filter;\n        if( FILTERS['homeType']  ){\n            if(FILTERS['homeType'].length) {\n                if( !isArraysEqual( defaultFilters.homeType , FILTERS['homeType']) )\n                    data['Home Type'] = FILTERS['homeType'];\n            }\n        }\n        if( FILTERS['facing']  ){\n            if(FILTERS['facing'].length) {\n                if( !isArraysEqual( defaultFilters.facing , FILTERS['facing']) )\n                    data['Facing'] = FILTERS['facing'];\n            }\n        }\n        if(  FILTERS['floor'] ){\n            var hasLowerLimit = false, hasUpperLimit = false;\n            var l1 = parseInt(FILTERS['floor'][0]);\n            if(l1 !=0 && l1 != defaultFilters.floor[0])hasLowerLimit = true;\n\n            var l2 = parseInt(FILTERS['floor'][1]);\n            if( l2 != defaultFilters.floor[1])hasUpperLimit = true;\n\n            if(hasLowerLimit && !hasUpperLimit){//Only LowerLimit\n                data['Floor'] = [ 'More than '+l1 ]\n            }else if(!hasLowerLimit && hasUpperLimit){//Only UpperLimit\n                data['Floor'] = [ 'Below '+l2 ]\n            }else if(hasLowerLimit && hasUpperLimit){//Both are there\n                data['Floor'] = [ 'Between '+l1+\" and \"+l2 ]\n            }else{}//Both are not there. So don't show filter.\n\n        }\n\n        if(  FILTERS['priceRange'] ){\n            var hasLowerLimit = false, hasUpperLimit = false;\n            var l1 = parseInt(FILTERS['priceRange'][0]);\n            if(l1 !=0 && l1 != defaultFilters.priceRange[0])hasLowerLimit = true;\n\n            var l2 = parseInt(FILTERS['priceRange'][1]);\n            if( l2 != defaultFilters.priceRange[1])hasUpperLimit = true;\n\n            if(hasLowerLimit && !hasUpperLimit){//Only LowerLimit\n                data['Price Range'] = [ 'More than '+numDifferentiation(l1) ]\n            }else if(!hasLowerLimit && hasUpperLimit){//Only UpperLimit\n                data['Price Range'] = [ 'Below '+numDifferentiation(l2) ]\n            }else if(hasLowerLimit && hasUpperLimit){//Both are there\n                data['Price Range'] = [ 'Between '+numDifferentiation(l1)+\" to \"+numDifferentiation(l2) ]\n            }else{}//Both are not there. So don't show filter.\n\n        }\n        //if( FILTERS['priceRange'] ){\n        //  data['Price Range'] =  [ numDifferentiation(FILTERS['priceRange'][0]) +\" to \"+ numDifferentiation(FILTERS['priceRange'][1]) ]\n        //}\n        applyClearFiltersEvent();\n\n        return {\n            data:data,\n            count: Object.keys(data).length\n        };\n    },\n    // time: function(){\n    //\n    //     var propertyData = Session.get('propertyData');\n    //     var timestamp = TimeSync.serverTime(null, 30000);\n    //     if(!propertyData.auction.endDate || !timestamp)return;\n    //\n    //\n    //     var dend = Date.parse(propertyData.auction.endDate);\n    //     var timeDiff = dend - timestamp ;\n    //     if(timeDiff<0)return false;\n    //\n    //     var day = Math.floor(timeDiff / (1000 * 3600 * 24))\n    //     var hour = Math.floor(timeDiff / (1000 * 3600 ))\n    //     var min = Math.floor(timeDiff / (1000 * 60 ) )\n    //     hour = hour - (day * 24);\n    //     min = min - (day * 24* 60) - (hour * 60);\n    //     return {\"day\":day,\"hour\":hour,\"min\":min}\n    // },\n    isAuctionClosed:function(){\n        // var timestamp = TimeSync.serverTime(null, 30000);\n        var timestamp = new Date();\n        var propertyData = Session.get('propertyData');\n        var dend = Date.parse(propertyData.auction.endDate);\n        var timeDiff = dend - timestamp;\n        if(timeDiff<0){\n            return true;\n        }\n        return false;\n    },\n    numDifferentiation: function(data){\n        return numDifferentiation(data);\n    },\n    assistanceAlreadyRequested: function(){\n        //Just to make this reactive\n        var user = Meteor.user();\n        if(user)\n            if(user.profile)\n                if(user.profile.assistanceRequested){\n                    return user.profile.assistanceRequested || Session.get('assistanceRequested');\n                }\n\n        return Session.get('assistanceRequested');\n\n    },\n})\nTemplate.propertyManage.onRendered(function() {\n})\nTemplate.propertyManage.events({\n    \"click .clearFilters\": function (event, template) {\n        //FlowRouter.query.clear();\n\n        console.log('in .clearFilters meteor event')\n        var defaultFilters = Session.get('propertyData');defaultFilters = defaultFilters.filter;\n        $('.filterUnitFacing, .filterUnitType').val('any');\n        resetUISlider(defaultFilters);\n        setFilters(defaultFilters);\n        $.fancybox.close();\n        applyClearFiltersEvent();\n    },\n    \"click .showEditPropertyForm\": function (event, template) {\n        var prevRoute = {name: FlowRouter.current().route.name,args:{id:FlowRouter.current().params.id, pageno:FlowRouter.current().params.pageno},scrollTo:'body' }\n        Session.set('prevRoute',prevRoute);\n        var propertyData = Session.get('propertyData');\n        FlowRouter.go('account/editproperty',{id:propertyData._id})\n\n    },\n    \"click .backBtn\": function(event, template){\n        var prevRoute = Session.get('prevRoute');\n        if(prevRoute){\n            FlowRouter.go(prevRoute.name,prevRoute.args)\n            Session.set('prevRoute',false);\n        }else{\n            // FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n            history.back();//PPl can come to this page from many other pages.\n        }\n    },\n    \"click .pdExpandedBtn\": function (event, template) {\n        if(template.pdExpanded.get() )template.pdExpanded.set(false);\n        else template.pdExpanded.set(true);\n    },\n    \"click .enablePMS\":function (event, template) {\n        // console.log('enablePMS clicked');\n        enablingPMS = template.enablingPMS;\n        enablingPMS.set(true) ;\n        Meteor.call('addManageProperty',FlowRouter.current().params.id,function(error, result){\n            enablingPMS.set(false) ;\n            if(error){\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Failed enabling this property. Please try again, try checking your internet connectivity. Contact us if needed.\");\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n            if(result.status=='Success'){\n                console.log(\"Success\");\n            }\n        });\n    }\n})\nTemplate.PM_bidList.onCreated(function(){\n    this.choosingInProgress = new ReactiveVar( false );\n    this.unChoosingInProgress = new ReactiveVar( false );\n})\nTemplate.PM_bidList.helpers({\n    user:function(){\n        // debugger;\n        var ret = Meteor.users.find({\n            _id: this.userId\n        }).fetch();\n        return ret[0];\n    },\n    canAfford: function(salary){//This works based on the bid (not rent)\n        if( !this.yourBid){return false;}\n        if(salary*0.4 >= this.yourBid ){\n            return true;\n        }\n        return false;\n    },\n    choosingInProgress: function(){\n        return Template.instance().choosingInProgress.get() ;\n    },\n    numDifferentiation: function(data){\n        return numDifferentiation(data);\n    },\n    classBidList:function () {\n        if(this.chosen)return 'active';\n\n        var propertyData = Session.get('propertyData');\n        try {\n            var a = Collections.Auctions.find({_id:propertyData.auction._id}).fetch();\n            propertyData.auction = a[0];\n            if (propertyData.auction.chosenBids.length)return 'archive';\n        }catch (e){}\n        return 'border-top';\n    }\n})\nTemplate.PM_bidList.events({\n    \"click .chooseTenant\": function (event, template) {\n        template.choosingInProgress.set(true);\n        choosingInProgress = template.choosingInProgress\n\n        var r = confirm(\"Are you sure? This will send a confirmation mail to the applicant.\");\n        if (!r){ template.choosingInProgress.set(false);return;}\n\n        Meteor.call('chooseWinning', [this.auctionId, this._id], function(error, result){\n            choosingInProgress.set(false) ;\n            if(error){\n                console.log(error);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(error.error);\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n            console.log(\"Success\");\n\n\n        });\n    },\n    \"click .unChooseTenant\": function (event, template) {\n        template.unChoosingInProgress.set(true);\n        unChoosingInProgress = template.unChoosingInProgress\n\n        var r = confirm(\"Are you sure? This will send a pending mail to the applicant.\");\n        if (!r){ template.unChoosingInProgress.set(false);return;}\n\n        Meteor.call('unChooseWinning', [this.auctionId, this._id], function(error, result){\n            unChoosingInProgress.set(false) ;\n            if(error){\n                console.log(error);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(error.error);\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n            console.log(\"Success\");\n        });\n    },\n    \"click .inviteForViewingBtn\": function (event, template) {\n        var propertyData = Session.get('propertyData');\n        var ret = Meteor.users.find({\n            _id: this.userId\n        }).fetch();\n        var inviteForViewing = Session.get('inviteForViewingData');\n        var today = new Date();\n        var tomorrow = new Date();\n        tomorrow.setDate(today.getDate()+1);tomorrow.setMinutes(0);tomorrow.setSeconds(0);\n        var h = tomorrow.getHours();\n        if(h<9)h=9;else if(h>20)h=20;\n        tomorrow.setHours(h);\n        var inviteDate = tomorrow;\n        try{if(inviteForViewing.inviteDate)inviteDate = inviteForViewing.inviteDate;}catch(e){}\n        Session.set('inviteForViewingData',{user:ret[0],bid:this,inviteDate:inviteDate})\n        $.fancybox({\n            'padding': 0,\n            'href': '#inviteForViewingDlg',\n            afterShow:function () {\n                var inviteForViewing = Session.get('inviteForViewingData');\n                var d = inviteForViewing.inviteDate;var am = ' AM';\n                var df = (d.getMonth()+1)+'/'+d.getDate()+'/'+d.getFullYear()+' '+d.getHours()+':'+d.getMinutes()\n                if(d.getHours()>12)am = ' PM';\n                df = df+am;\n                $('#inviteDate').val(df)\n\n            }\n        });\n    },\n});\nTemplate.PM_propertyList.onCreated(function(){\n    this.expanded = new ReactiveVar( true );\n    this.showAddAuctionForm = new ReactiveVar( false );\n\n})\nTemplate.PM_propertyList.helpers({\n    expanded: function(){\n        return Template.instance().expanded.get() ;\n    },\n    auction: function () {\n        if(this._id) {\n            var ret = Collections.Auctions.find({propertyId:this._id}, {limit: 1})\n            var docs = ret.fetch()\n            return docs[0];\n        }\n        else return [];\n    },\n    showAddAuctionForm: function () {\n        // debugger;\n        if(Session.get('hideAddAuctionForm') && Session.get('auctionId')==this.auctionId){\n            Template.instance().showAddAuctionForm.set(false);\n            Session.set('auctionId',\"\")\n            Session.set('hideAddAuctionForm',false)\n        }\n\n        return Template.instance().showAddAuctionForm.get();\n    },\n    numDifferentiation: function(data){\n        return numDifferentiation(data);\n    },\n    lettingprintviewData:function () {\n        if(!this.auction)return {key:\"\"}\n        return {key:this.auction.lettingAuctionCode}\n    },\n    chosenTenantCount:function(){\n        var PropertyManage = Session.get('PropertyManage');\n        if(PropertyManage.tenants) {\n            return PropertyManage.tenants.length;\n        }\n        else {\n            return 0;\n        }\n    },\n    PropertyManage:function(){\n        return Session.get('PropertyManage');\n    }\n})\nTemplate.PM_propertyList.events({\n    \"click .prev_activations\": function (event, template) {\n        scrollTo('#activity_history_area',0,300)\n    },\n    \"click .viewTenants\": function (event, template) {\n        scrollTo('#viewTenantsArea',0,300)\n    },\n    \"click .showEditPropertyForm\": function (event, template) {\n        var prevRoute = {name: FlowRouter.current().route.name,args:{pageno:FlowRouter.current().params.pageno} }\n        Session.set('prevRoute',prevRoute);\n\n        FlowRouter.go('account/editproperty',{id:this._id})\n\n    },\n    \"click .hideAddAuctionForm\": function (event, template) {\n        if(template.showAddAuctionForm.get() )template.showAddAuctionForm.set(false);\n        propId = this._id;\n        scrollTo('#property_'+propId,0,700)\n\n    },\n    \"click .viewApplications\": function (event, template) {\n        var prevRoute = {name: FlowRouter.current().route.name,args:{pageno:FlowRouter.current().params.pageno} }\n        Session.set('prevRoute',prevRoute);\n\n        FlowRouter.go(\"account/propertyApplications\",{id:this._id});\n    },\n    \"click .showCopyDlg\": function (event, template) {\n        let user = Meteor.user();\n        let sluggedName = slugifyEmailAddress(user.profile.name);\n        if(!sluggedName)sluggedName = 'rent'\n        let email = sluggedName+'-let-'+this.auction.lettingAuctionCode.toLowerCase()+\"@spotmycrib.ie\";\n        $('#agentPropertyEmailField').val(email);\n\n        var url = FlowRouter.url('letting',{key:this.auction.lettingAuctionCode})\n        $('#propertyLinkField').val(url);\n        $.fancybox({\n            'padding': 0,\n            'href': '#propertyLinkDlg',\n            afterShow:function(template){\n                $('#agentPropertyEmailField').select();\n                $('#propertyLinkDlg .copyEmailBtn').unbind().bind('click',function () {\n                    $('#agentPropertyEmailField').select();\n\n                    try {\n                        var successful = document.execCommand('copy');\n                        var msg = successful ? 'successful' : 'unsuccessful';\n                        // console.log('Copying text command was ' + msg);\n                        $.fancybox.close()\n                    } catch (err) {\n                        console.log('Oops, unable to copy');\n                    }\n                    ga('send', 'event', 'managePropertyPage', 'copyShareEmail', 'copyShareEmail Btn Clicked');\n                })\n                $('#propertyLinkDlg .copyLinkBtn').unbind().bind('click',function () {\n                    $('#propertyLinkField').select();\n\n                    try {\n                        var successful = document.execCommand('copy');\n                        var msg = successful ? 'successful' : 'unsuccessful';\n                        // console.log('Copying text command was ' + msg);\n                        $.fancybox.close()\n                    } catch (err) {\n                        console.log('Oops, unable to copy');\n                    }\n                    ga('send', 'event', 'managePropertyPage', 'copyShareLink', 'copyShareLink Btn Clicked');\n                })\n                $('#propertyLinkDlg .cancelBtn').unbind().bind('click',function () {\n                    $.fancybox.close()\n                })\n            },\n        });\n\n    },\n});\n\ninviteInProgress='';\nTemplate.addTenantDlg.onCreated(function () {\n    console.log('invite for viewing created');\n    this.inviteInProgress = new ReactiveVar( false );\n    inviteInProgress = this.inviteInProgress;\n})\nTemplate.addTenantDlg.helpers({\n    data:function () {\n        return Session.get('inviteForViewingData');\n    },\n    inviteInProgress:function () {\n        inviteInProgress = Template.instance().inviteInProgress ;\n        return Template.instance().inviteInProgress.get() ;\n    },\n    inviteDateFormated:function () {\n        var inviteForViewing = Session.get('inviteForViewingData');\n        var options = {\n            weekday: \"long\", year: \"numeric\", month: \"short\",\n            day: \"numeric\", hour: \"2-digit\", minute: \"2-digit\"\n        };\n        try{var d=inviteForViewing.inviteDate; return d.toLocaleTimeString(\"en-us\", options); }catch(e){}\n        return ;\n    },\n    propertyData:function () {\n        return  Session.get('propertyData');\n    }\n})\nTemplate.addTenantDlg.events({\n    'change .inviteDate':function (event, template) {\n        var d = new Date($('.inviteDate').val());\n        var inviteForViewing = Session.get('inviteForViewingData');\n        try{ inviteForViewing.inviteDate=d; Session.set('inviteForViewingData',inviteForViewing) }catch(e){}\n\n    },\n    'click .confirmInviteBtn':function () {\n\n        var inviteDate = $('.inviteDate').val()\n        var inviteMessage = $('.inviteMessage').val()\n        console.log(inviteDate)\n        var inviteForViewing = Session.get('inviteForViewingData');\n\n\n        inviteInProgress.set(true) ;\n        Meteor.call('sendInviteForViewingEmail',[inviteForViewing.bid._id,inviteDate],function(error, result){\n            inviteInProgress.set(false) ;\n            if(error){\n                console.log(error);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Failed applying. Please try again, try checking your internet connectivity. Contact us if needed.\");\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n            if(result.status=='Success'){\n                console.log(\"Success\");\n                closePopupEvent()\n            }\n        });\n\n    },\n    'click .closePopupBtn':function () {\n        closePopupEvent()\n    }\n})\nTemplate.addTenantDlg.onRendered(function () {\n    console.log('inviteForViewing rendered')\n    //Needs to be optimised, this is not the right place to put this code, might cause JS errors if Jquery isn' loaded yet.\n    try{\n        this.$('#inviteDate').datetimepicker();\n\n\n\n        this.$('#moveindate').datetimepicker();\n    }catch(err){\n        console.log('dp failed');\n    }\n})\nTemplate.activity_history.onCreated(function () {\n    this.loadingMoreText = new ReactiveVar( true );\n    var resultsPerPage = Session.get('resultsPerPage');\n    if(!resultsPerPage)Session.set('resultsPerPage',50)\n})\nTemplate.activity_history.helpers({\n    data : function () {\n        var user = Meteor.user();\n        if (!user) {\n            Template.instance().loadingMoreText.set(false);\n            return {\n                results: [],\n                totalResultsCount: 0\n            }\n        }\n\n        var id = FlowRouter.current().params.id;\n        if(!id) {\n            Template.instance().loadingMoreText.set(false);\n\n            return {\n                results: [],\n                totalResultsCount: 0\n            }\n        }\n        var selector = {propertyId:id};//let limit = 10;\n        // debugger;\n\n        // var FILTERS = Session.get('prop_activation_filters')\n        // var defaultFilters = getDefaultFilters();\n\n        // var arr = [];\n        // if(  FILTERS['homeType'] ){\n        //     if(FILTERS['homeType'].length) {\n        //         if(FILTERS['homeType'].length != defaultFilters.homeType.length)\n        //             selector['homeType'] = FILTERS['homeType'][0]\n        //         /*\n        //          // var arr = [];\n        //          for (var i = 0; i < FILTERS['homeType'].length; i++) {\n        //          arr.push({\"homeType\": FILTERS['homeType'][i]})\n        //          console.log(\"homeType\"+ FILTERS['homeType'][i])\n        //          }*/\n        //         // selector['$or'] = arr;//BUG: this or will over write or of facing; or of homeType will collide with this and\n        //         // while logic won't work\n        //\n        //     }\n        // }\n        // if(  FILTERS['facing'] ){\n        //     if(FILTERS['facing'].length) {\n        //         if(FILTERS['facing'].length != defaultFilters.facing.length)\n        //             selector['facing'] = FILTERS['facing'][0]\n        //         /*\n        //          var arr = [];\n        //          for (var i = 0; i < FILTERS['facing'].length; i++) {\n        //          arr.push({\"facing\": FILTERS['facing'][i]})\n        //          }\n        //          // selector['$or'] = arr;//BUG: this or will over write or of homeType; or of homeType will collide with this and\n        //          // while logic won't work\n        //          */\n        //     }\n        // }\n        // if(arr.length){\n        //     selector['$or'] = arr;\n        // }\n        // if( FILTERS['floor'] ){\n        //     var val_l = FILTERS['floor'][0];\n        //     var val_h = FILTERS['floor'][1];\n        //\n        //     if(isNaN(val_l) && isNaN(val_h)){//Both are not valid numbers\n        //\n        //     }else if(!isNaN(val_l) && isNaN(val_h)){//Low is valid and no upper\n        //         selector['floorLevel'] =  { $gte: parseInt(val_l) }\n        //     }else if(isNaN(val_l) && !isNaN(val_h)){//Upper is valid and no lower\n        //         selector['floorLevel'] =  { $lte: parseInt(val_h) }\n        //     }else{//Both are valid\n        //         selector['floorLevel'] =  { $gte: parseInt(val_l), $lte: parseInt(val_h) }\n        //     }\n        // }\n        // if( FILTERS['priceRange'] ){\n        //     var val_l = FILTERS['priceRange'][0];\n        //     var val_h = FILTERS['priceRange'][1];\n        //\n        //     if(isNaN(val_l) && isNaN(val_h)){//Both are not valid numbers\n        //\n        //     }else if(!isNaN(val_l) && isNaN(val_h)){//Low is valid and no upper\n        //         selector['priceBreakUp.totalAllInclusive'] =  { $gte: parseInt(val_l) }\n        //     }else if(isNaN(val_l) && !isNaN(val_h)){//Upper is valid and no lower\n        //         selector['priceBreakUp.totalAllInclusive'] =  { $lt: parseInt(val_h) }\n        //     }else{//Both are valid\n        //         selector['priceBreakUp.totalAllInclusive'] =  { $gte: parseInt(val_l), $lte: parseInt(val_h) }\n        //     }\n        // }\n\n        /////PAGINATION\n        // var resultsPerPage = 20;\n        // var currentPageNo = FlowRouter.current().params.pageno;\n        // if(!currentPageNo){currentPageNo = 1}\n        // var skip = (currentPageNo -1) * resultsPerPage;\n        // var urlBase = 'account/myproperies/';\n\n\n        var totalResultsCount = Collections.ActivityHistory.find(selector).count()\n\n        var ret = Collections.ActivityHistory.find(selector, {\n            limit: Session.get('resultsPerPage'),\n            sort: { createdAt : -1 }\n            // skip: skip\n        });\n        Template.instance().loadingMoreText.set(false);\n        return {\n            results: ret,\n            totalResultsCount:totalResultsCount\n        };\n    },\n    loadingMoreText: function(){\n        return Template.instance().loadingMoreText.get() ;\n    },\n    decideTemplate:function (type) {\n\n    }\n})\nTemplate.activity_history.events({\n    'click .load_more':function (event, template) {\n        Template.instance().loadingMoreText.set(true);\n        var resultsPerPage = Session.get('resultsPerPage');\n        resultsPerPage*=2;\n        Session.set('resultsPerPage',resultsPerPage)\n        var id = FlowRouter.current().params.id\n        Meteor.subscribe(\"ActivityHistory\",{limit: resultsPerPage,id:id})\n    }\n})\nTemplate.activity_history.onRendered(function () {\n    Template.instance().loadingMoreText.set(false);\n})\nfunction attachEvents() {\n    $(\".deactivateConfirmBtn\").unbind().bind(\"click\",function () {\n        deactivateConfEvent();\n    })\n    $(\".closePopupBtn\").unbind().bind(\"click\",function () {\n        closePopupEvent();\n    })\n}\nfunction deactivateConfEvent() {\n    var data = Session.get(\"propertyData\");\n    var auctionId = data.auctionId;\n\n    deactivateInProgress.set(true) ;\n    Meteor.call('deactivateAuction',auctionId,function(error, result){\n        deactivateInProgress.set(false) ;\n        if(error){\n            console.log(error);\n            var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n            tmp.push(\"Failed deactivating. Please try again, try checking your internet connectivity. Contact us if needed.\");\n            Session.set(\"showErrorDlg\",tmp)\n            return;\n        }\n        console.log(\"Success\");\n\n        closePopupEvent();\n        var prevRoute = Session.get('prevRoute');\n        if(prevRoute){\n            FlowRouter.go(prevRoute.name,prevRoute.args)\n            Session.set('prevRoute',false);\n        }else{\n            FlowRouter.go(\"/account/myproperies/\",{pageno:1});\n        }\n\n    });\n}\nfunction closePopupEvent() {\n    console.log('closePopupEvent');\n    if($)\n        if($.fancybox)\n            $.fancybox.close();\n}\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction slugifyEmailAddress (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ/_,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '.')           // Replace spaces with \".\"\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with ''\n        // .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single ''\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}","/**\n * Created by njanjanam on 20/05/2017.\n */\nupdateGalleriesInServer = function (editPropertyImages, propertyId, callback){\n    if(!editPropertyImages||!propertyId)return;\n    var tmp = [], arr=[];\n    if(editPropertyImages.length) {\n        for (var i = 0; i < editPropertyImages.length; i++) {\n            if(editPropertyImages[i].name){//Means file is not coming from our traditional file uploader\n                tmp.push(editPropertyImages[i])\n            }else{//Else its insert properties form\n                tmp.push({\n                    name: editPropertyImages[i].file.original_name,\n                    relative_url: editPropertyImages[i].relative_url,\n                    url: editPropertyImages[i].secure_url\n                })\n            }\n\n\n        }\n    }\n    console.log(tmp);\n    Meteor.call('updateGalleries', [propertyId, tmp], callback);\n}\nupdateGalleriesInProfile = function (editPropertyImages, callback){\n    if(!editPropertyImages)return;\n    var tmp = [], arr=[];\n    if(editPropertyImages.length) {\n        for (var i = 0; i < editPropertyImages.length; i++) {\n            if(editPropertyImages[i].name){//Means file is not coming from our traditional file uploader\n                tmp.push(editPropertyImages[i])\n            }else{//Else its insert properties form\n                tmp.push({\n                    name: editPropertyImages[i].file.original_name,\n                    relative_url: editPropertyImages[i].relative_url,\n                    url: editPropertyImages[i].secure_url\n                })\n            }\n        }\n    }\n    console.log(tmp);\n    Meteor.call('updateGalleriesInUserProfile', tmp, callback);\n}","import \"./profile.js\";\nimport \"./tenant.html\";\n\nTemplate.tenant.onCreated(function(){\n\n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.autorun(function(){\n\n        instance.subscribe('userData');//works only if viewing your profile\n        instance.subscribe('userDataUsername',FlowRouter.getParam('username'));//works if viewing your profile and others\n\n        if(instance.subscriptionsReady()){\n            instance.isSubsLoaded.set(true)\n        }\n    })\n\n})\nTemplate.tenant.helpers({\n    isSubsLoaded:function(){\n        return Template.instance().subscriptionsReady();\n    },\n    userLoggedIn:function(){\n        if(Meteor.user())return true;\n        return false;\n    },\n    isViewingHisProfile:function () {\n        var currentUser =  Accounts.user();\n        var username = FlowRouter.getParam('username');\n        try{if(currentUser.profile.username==username)return true;}catch(e){}\n        return false;\n    },\n    isPublicProfile:function(){\n        var username = FlowRouter.getParam('username');\n        var u1 = Meteor.users.findOne({ \"profile.username\":username },{limit:1});\n\n        try{if(u1.profile.isPublic){\n            clearMeta();\n            DocHead.setTitle(titleCase(u1.profile.name) + '\\'s profile | Teanat Profile SpotMyCrib');\n            DocHead.addMeta({name: \"description\", content: \"View and download \"+titleCase(u1.profile.name) + \"'s references.\"});\n            return true;\n        }}catch(e){}\n        return false;\n    },\n    userFound:function(){\n        var username = FlowRouter.getParam('username');\n        var u1 = Meteor.users.findOne({ \"profile.username\":username },{limit:1});\n        if(u1)return true;\n\n        clearMeta();\n        DocHead.setTitle(' User not found | SpotMyCrib');\n        DocHead.addMeta({name: \"description\", content: \"\"});\n        return false;\n    },\n    userFirstName:function(){\n        var username = FlowRouter.getParam('username');\n        var u1 = Meteor.users.find({ \"profile.username\":username },{limit:1}).fetch();\n        try{\n            clearMeta();\n            DocHead.setTitle(titleCase(u1.profile.name) + '\\'s profile | Teanat Profile SpotMyCrib');\n            DocHead.addMeta({name: \"description\", content: \"\"});\n            var tmp = u1.profile.name.split(' ');\n            return tmp[0];\n        }catch(e){}\n        return 'Tenant'\n    },\n    user:function(){\n        var username = FlowRouter.getParam('username');\n        return Meteor.users.find({ \"profile.username\":username },{limit:1});\n    }\n})\n\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}","import \"./pagination.html\";\nimport \"./tenants.html\";\n\nTemplate.tenants.onCreated(function(){\n\n    var instance = this;\n    instance.isSubsLoaded = new ReactiveVar(false);\n    instance.autorun(function(){\n\n        instance.subscribe('userData');\n        var pageno = FlowRouter.getParam('pageno'); if(!pageno)pageno=1;\n        instance.subscribe(\"tenants\",pageno) ;\n\n        if(instance.subscriptionsReady()){\n            instance.isSubsLoaded.set(true)\n        }\n    })\n\n})\nTemplate.tenants.helpers({\n    isSubsLoaded:function(){\n        return Template.instance().subscriptionsReady();\n    },\n    userLoggedIn:function(){\n        if(Meteor.user())return true;\n        return false;\n    },\n    dataFull:function(){\n        var pageno = FlowRouter.getParam('pageno'); if(!pageno)pageno=1;\n        var totalResultsCount = Meteor.users.find().count();\n\n        /////PAGINATION\n        var resultsPerPage = 10;\n        var currentPageNo = FlowRouter.getParam('pageno');\n        if(!currentPageNo){currentPageNo = 1}\n        var urlBase = 'tenants/';\n\n        return {\n            totalResultsCount:totalResultsCount,\n            results: Meteor.users.find(),\n            pagination: getPaginationData(totalResultsCount,currentPageNo,urlBase,resultsPerPage)\n        }\n    }\n})\nTemplate.tenantList.helpers({\n    userFirstName:function(){\n        try{\n            var tmp = this.user.profile.name.split(' ');\n            return tmp[0];\n        }catch(e){}\n    }\n})\nTemplate.tenantList.events({\n    'click .inviteToApply':function(event, template){\n        ga('send', 'event', 'tenantsPage', 'inviteToApplyBtnClicked', 'Invite To Apply Btn Clicked');\n        var user = Meteor.user();\n        if(!user){//Login is needed.\n            Session.set('showForgotForm',false)\n            Session.set('showSignupForm',false)\n            Session.set('showLoginSignupFancyBoxDialog',true)\n            Session.set('showLoginDialog',true)\n            return ;\n        }\n        Session.set('inviteToApplyData',{user:this.user})\n        $.fancybox({\n            'padding': 0,\n            'href': '#inviteToApplyDlg',\n            // afterShow:function () {}\n        });\n    }\n})\ninviteInProgress='';\nTemplate.inviteToApply.onCreated(function () {\n    this.inviteInProgress = new ReactiveVar( false );\n    inviteInProgress = this.inviteInProgress;\n    Meteor.subscribe('inviteToApply.MyActiveAdvertisements')\n})\nTemplate.inviteToApply.helpers({\n    data:function(){\n      return Session.get('inviteToApplyData');\n    },\n    myAdvertisements:function(){\n        var select = {\n            \"isArchived\":false,\n            \"createdByAgent\":Meteor.userId()\n        };\n        var totalResultsCount = Collections.Auctions.find(select).count();\n        return {\n            totalResultsCount:totalResultsCount,\n            results: Collections.Auctions.find(select)\n        }\n    },\n    userFirstName:function(){\n        var data = Session.get('inviteToApplyData');\n        try{\n            var tmp = data.user.profile.name.split(' ');\n            return tmp[0];\n        }catch(e){}\n    },\n    inviteInProgress:function () {\n        // console.log('h 1 ')\n        // console.log(Template.instance().inviteInProgress.get())\n        inviteInProgress = Template.instance().inviteInProgress ;\n        return Template.instance().inviteInProgress.get() ;\n    },\n})\nTemplate.inviteToApply.events({\n    'click .advertiseMyProperty':function(){\n        closePopupEvent();\n        FlowRouter.go('account/myProperties');\n    },\n    'click .confirmInviteBtn':function () {\n        var selectedAdvertisements = [];\n        $.each($(\".selectedAdvertisements option:selected\"), function(){\n            selectedAdvertisements.push($(this).val());\n        });\n        if(!selectedAdvertisements.length){\n            alert('Please choose at least 1 advertisement to proceed');return;\n        }\n\n        var data = Session.get('inviteToApplyData');\n        inviteInProgress.set(true) ;\n        Meteor.call('sendInviteToApplyEmail',[selectedAdvertisements,data.user._id],function(error, result){\n            inviteInProgress.set(false) ;\n            if(error){\n                console.log(error);\n                var tmp =  Session.get(\"showErrorDlg\");if(!tmp)tmp=[];\n                tmp.push(\"Failed applying. Please try again, try checking your internet connectivity. Contact us if needed.\");\n                Session.set(\"showErrorDlg\",tmp)\n                return;\n            }\n            if(result.status=='Success'){\n                console.log(\"Success\");\n                closePopupEvent()\n            }\n        });\n\n    },\n    'click .closePopupBtn':function () {\n        closePopupEvent()\n    }\n})\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction getPaginationData(totalResultsCount,currentPageNo,urlBase, resultsPerPage){\n    var pages = [], prevPage = {}, nextPage={};\n    var pgMin = currentPageNo-4, pgMax = currentPageNo+ 5, maxPages = Math.ceil(totalResultsCount/resultsPerPage)\n    if(pgMin<1)pgMin =1;\n    if(pgMax<1)pgMax =1;\n    if(maxPages<1)maxPages =1;\n    if(pgMin>maxPages)currentPageNo =maxPages;\n    var tmp={};\n    for (var i=pgMin; i<=maxPages;i++){\n        var href = urlBase+i+\"/\";\n        tmp = {\n            \"href\": href,\n            \"text\": i\n        }\n        if(i== currentPageNo) {\n            tmp['href'] = 'javascript:void(0);';\n            tmp['current'] = true;\n        }\n        pages.push(tmp)\n    }\n    // if(pgMin==maxPages){//Above loop won't work if only 1 page result\n    //     pages.push({\n    //         \"href\": 'javascript:void(0);',\n    //         \"text\": 1\n    //     })\n    // }\n    var prevPageNo = currentPageNo- 1, nextPageNo=currentPageNo+ 1;\n    if(prevPageNo<1){\n        prevPage['href'] = 'javascript:void(0)';\n        prevPage['text'] = 'Previous';\n        prevPage['disabled'] = 'disabled';\n    }else{\n        prevPage['href'] = urlBase+prevPageNo+\"/\";\n        prevPage['text'] = 'Previous';\n    }\n    if(nextPageNo>maxPages)nextPageNo =maxPages;\n    if(nextPageNo == currentPageNo){\n        nextPage['href'] = 'javascript:void(0)';\n        nextPage['text'] = 'Next';\n        nextPage['disabled'] = 'disabled';\n    }else{\n        nextPage['href'] = urlBase+nextPageNo+\"/\";\n        nextPage['text'] = 'Next';\n    }\n    return {\n        \"prevPage\":prevPage,\n        \"pages\":pages,\n        \"nextPage\": nextPage\n    }\n}\nfunction closePopupEvent() {\n    console.log('closePopupEvent');\n    if($)\n        if($.fancybox)\n            $.fancybox.close();\n}","/**\n * Created by njanjanam on 06/04/2017.\n */\nimport {Mongo} from \"meteor/mongo\";\n// import \"./schemas.js\";\n// export const Tasks = new Mongo.Collection('Property');\n// import SimpleSchema from \"simpl-schema\";\n// SimpleSchema.extendOptions(['autoform']);\nCollections = {}\nCollections.Properties = new Mongo.Collection(\"Properties\");\nCollections.Bids = new Mongo.Collection(\"Bids\");\nCollections.Auctions = new Mongo.Collection(\"Auctions\");\nCollections.Agents = new Mongo.Collection(\"Agents\");\nCollections.Config = new Mongo.Collection(\"Config\");\nCollections.PropertyManage = new Mongo.Collection(\"PropertyManage\");\nCollections.ActivityHistory = new Mongo.Collection(\"ActivityHistory\");\nCollections.Areas = new Mongo.Collection(\"Areas\");\nCollections.Blogs = new Mongo.Collection(\"Blogs\");\nCollections.EmailEnquiries = new Mongo.Collection(\"EmailEnquiries\");\nCollections.EmailRequests = new Mongo.Collection(\"EmailRequests\");\n\nCollections.Properties.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.Properties.before.update(function (userId, doc, fieldNames, modifier, options) {\n    var skip=false;\n    if(Array.isArray(fieldNames))\n        if(fieldNames.indexOf('auctionHistory')!=-1){\n            if(modifier['$set']['auctionId']==\"\" && modifier['$set']['rent']==\"\")\n                skip = true //This is for deactivate\n        }\n    if(!skip){\n        modifier.$set = modifier.$set || {};\n        modifier.$set.updatedAt = new Date()\n    }\n});\nCollections.Bids.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.Bids.before.update(function (userId, doc, fieldNames, modifier, options) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date()\n});\nCollections.Auctions.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.Auctions.before.update(function (userId, doc, fieldNames, modifier, options) {\n    var skip=false;\n    if(Array.isArray(fieldNames))\n    if(fieldNames.length==1 && fieldNames.indexOf('views')!=-1){\n        // console.log('Its just view, so skipping')\n        skip=true\n    }\n    if(fieldNames['isArchived']==true) skip=true //This is for deactivate\n    if(!skip){\n        modifier.$set = modifier.$set || {};\n        modifier.$set.updatedAt = new Date()\n    }\n});\nCollections.Agents.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.Agents.before.update(function (userId, doc, fieldNames, modifier, options) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date()\n});\nCollections.Config.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.Config.before.update(function (userId, doc, fieldNames, modifier, options) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date()\n});\nCollections.PropertyManage.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.PropertyManage.before.update(function (userId, doc, fieldNames, modifier, options) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date()\n});\nCollections.ActivityHistory.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.ActivityHistory.before.update(function (userId, doc, fieldNames, modifier, options) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date()\n});\nCollections.Areas.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.Areas.before.update(function (userId, doc, fieldNames, modifier, options) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date()\n});\nCollections.Blogs.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.Blogs.before.update(function (userId, doc, fieldNames, modifier, options) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date()\n});\nCollections.EmailEnquiries.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.EmailEnquiries.before.update(function (userId, doc, fieldNames, modifier, options) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date()\n});\nCollections.EmailRequests.before.insert(function (userId, doc) {\n    doc.createdAt = new Date()\n    doc.updatedAt = new Date()\n});\nCollections.EmailRequests.before.update(function (userId, doc, fieldNames, modifier, options) {\n    modifier.$set = modifier.$set || {};\n    modifier.$set.updatedAt = new Date()\n});\n\nif (Meteor.isClient) {\n    Collections.PA_AvgOffer = new Mongo.Collection(\"avgOffer\");\n}\nif(Meteor.isServer){\n    Collections.propertyAlerts = new Mongo.Collection(\"propertyAlerts\");\n    Collections.propertyAlerts.before.insert(function (userId, doc) {\n        if(userId)doc.userId = userId\n        doc.createdAt = new Date()\n        doc.updatedAt = new Date()\n    });\n    Collections.propertyAlerts.before.update(function (userId, doc, fieldNames, modifier, options) {\n        modifier.$set = modifier.$set || {};\n        modifier.$set.updatedAt = new Date()\n    });\n\n}\n\n// Collections.Auctions.attachSchema(Schema.Auctions);\n// Collections.Properties.attachSchema(Schema.Properties);\n// Collections.Bids.attachSchema(Schema.Bids);\n\nUI.registerHelper(\"retCollectionProperties\", function () {\n    return  Collections.Properties;\n});\n\n\n\n\nexport {Collections};\n\n\n\n\n//\n// Collections = [\n//     {\"Property\" : new Mongo.Collection(\"Property\") },\n//     {Bids : new Mongo.Collection(\"Bids\")},\n//     {Auctions : new Mongo.Collection(\"Auctions\")},\n//     {Agents : new Mongo.Collection(\"Agents\")},\n//     {Config : new Mongo.Collection(\"Config\")}\n// ];\n\n\n// Collections.Properties = new Mongo.Collection(\"Property\");\n// //Meteor.subscribe(\"Projects\");\n// export Collections.Bids = new Mongo.Collection(\"Bids\");\n// //Meteor.subscribe(\"Bids\");\n// export Collections.Auctions = new Mongo.Collection(\"Auctions\");\n// //Meteor.subscribe(\"Auctions\");\n// export Collections.Config = new Mongo.Collection(\"Config\");\n// //Meteor.subscribe(\"Config\");\n\n\n","import \"./collections.js\";\nimport {check} from \"meteor/check\";\n\nMeteor.methods({\n  updateReferenceFile: function(args){\n    // check([], []);\n    console.log(\"server method updateReferenceFile called\")\n\n    const userId = Meteor.userId();\n    var p1='';\n    var p2='';\n    switch (args[0]){\n        case \"Resume\": p1 = \"hasResume\"; p2 = \"resume\"; break;\n        case \"Work Reference\": p1 = \"hasWorkRef\"; p2 = \"workRef\"; break;\n        case \"Landlord Reference\": p1 = \"hasLandlordRef\"; p2 = \"landlordRef\"; break;\n        case \"Financial Reference\": p1 = \"hasFinancialRef\"; p2 = \"financialRef\"; break;\n        case \"Government ID\": p1 = \"hasGovtID\"; p2 = \"govtID\"; break;\n        case \"Passport\": p1 = \"hasPassport\"; p2 = \"passport\"; break;\n        case \"PPS\": p1 = \"hasPPS\"; p2 = \"PPS\"; break;\n       }\n\n    if(p1 && p2) {\n      p1 = \"profile.references.\"+p1\n      p2 = \"profile.references.\"+p2\n        var setObj = {}\n        setObj[p1] =true;\n        setObj[p2]= args[1]\n\n        console.log(p1);\n        console.log(p2);\n        console.log(setObj);\n        Meteor.users.update(userId, {\n            $set: setObj\n        });\n    }\n    return {\n      status: 'Success'\n    }\n\n  },\n  updateMobile: function(newMobile){\n    // check(newMobile, []);\n    console.log(\"server method updateMobile called\")\n    const userId = Meteor.userId();\n    Meteor.users.update({\n      \"_id\": userId\n    }, {\n      $set: {\n        \"profile.mobile\": newMobile,\n        \"profile.isMobileVerified\": false\n      }\n    });\n    return {\n      status: 'Success'\n    }\n\n  },\n  updateEmployerName: function(newEmp){\n    check(newEmp, String);\n    if(!newEmp.length || newEmp.length<2){\n        throw new Meteor.Error(500, 'Invalid employee name', 'Employee name cannot be less then 2 characters.');\n    }\n    console.log(\"server method updateEmployerName called: \"+newEmp)\n    const userId = Meteor.userId();\n    Meteor.users.update({\n      \"_id\": userId\n    }, {\n      $set: {\n        \"profile.references.employerName\": newEmp\n      }\n    });\n    return {\n      status: 'Success'\n    }\n\n  },\n  updateEmployerTakeHome: function(salary){\n    check(salary, Number);\n    if(salary<0 || salary > Number.MAX_VALUE){\n        throw new Meteor.Error(500, 'Invalid employee take home', 'Employee take home salary cannot be less then 0 or too large.');\n    }\n    console.log(\"server method updateEmployerTakeHome called: \"+salary)\n    const userId = Meteor.userId();\n    Meteor.users.update({\n      \"_id\": userId\n    }, {\n      $set: {\n        \"profile.references.employerTakeHome\": salary\n      }\n    });\n    return {\n      status: 'Success'\n    }\n\n  },\n  sendOTP: function(args){\n    check(args, Match.Any);\n    console.log(\"server method sendOTP called\")\n\n    if(!isLoggedOn()){\n      throw new Meteor.Error(500, 'Error 500: Login needed', 'Please login before you request.');\n    }\n\n    const user = Meteor.user();\n    if( user.profile.isMobileVerified){\n      throw new Meteor.Error(500, 'Error 500: Mobile already verified. ', 'Your mobile is already verified.');\n    }\n\n    //DON'T need below code as we will be using this method for both send and RESEND.\n    //if(user.profile.OTPValue){\n    //  var today = new Date();\n    //  var OTPSentOn = new Date(user.profile.OTPSentOn);\n    //  var diffMs = (OTPSentOn - today); // milliseconds between now & Christmas\n    //  var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000); // minutes\n    //  if(diffMins > 15){//OTP has expired\n    //\n    //  }else{//OTP previous OTP is still valid.\n    //\n    //  }\n    //}\n\n    const newOTP    = Math.floor(100000 + Math.random() * 900000);\n    const userEmail = user.profile.email;\n    const username  = user.profile.name;\n\n    //TODO separate SMS sending in an this.unblock method\n\n    /* Send OTP via email */\n    Meteor.call(\"sendNotificationEmail\", {\n      template: \"otpEmail\",\n      user    : {\n        profile: {\n          username: username\n        }\n      },\n      otp     : newOTP,\n      subject : \"IBidMyHome OTP: Verify your mobile number\",\n      mailTo  : user.profile.email\n    });\n\n    /* Send OTP via mobile*/\n    var OPTsmsText = 'Your OTP is: ' + newOTP;\n\n    var APIURL = 'http://atrans.smscuppa.com/sendsms.jsp?user=mybids&password=mybids&mobiles='+user.profile.mobile+'&general='+OPTsmsText+'&senderid=MYBIDS&version=3';\n    var APIURL = 'http://atrans.smscuppa.com/sendsms.jsp';\n\n    var options = {\n      \"params\":{\n        \"user\" : \"mybids\",\n        \"password\" : \"mybids\",\n        \"mobiles\":user.profile.mobile,\n        \"sms\":OPTsmsText,\n        \"senderid\":\"MYBIDS\",\n        \"version\":\"3\"\n      },\n      \"headers\":{\n        //\"X-API-KEY\" : APIKey,\n        //\"X-Auth-Token\" : AUTHToken\n      }\n    }\n    var response  = HTTP.get(APIURL, options)\n\n\n    Meteor.users.update({\n      \"_id\": user._id\n    }, {\n      $currentDate: {\n        \"profile.OTPSentOn\": { $type: \"timestamp\" }\n      },\n      $set: {\n        \"profile.OTPValue\": newOTP\n      }\n    });\n\n\n    return {\n      status: 'Success'\n    }\n\n  },\n  verifyOTP: function(args){\n    check(args, Match.Any);\n    var otp = args[0];\n    console.log(\"server method verifyOTP called\")\n\n    if(!isLoggedOn()){\n      throw new Meteor.Error(500, 'Error 500: Login needed', 'Please login before you request.');\n    }\n\n    const user = Meteor.user();\n\n    if(user.profile.OTPValue){\n      var today = new Date();\n      var OTPSentOn = new Date(user.profile.OTPSentOn);\n      var diffMs = (OTPSentOn - today); // milliseconds between now & Christmas\n      var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000); // minutes\n      if(diffMins > 15){//OTP has expired\n        throw new Meteor.Error(500, 'Error 500: OTP has expired', 'Your OTP has expired.');\n      }else{//OTP previous OTP is still valid.\n\n      }\n    }else{\n      throw new Meteor.Error(500, 'Error 500: OTP is not valid', 'You need an OTP to verify.');\n    }\n\n\n    if(user.profile.OTPValue == otp) {\n      Meteor.users.update({\n        \"_id\": user._id\n      }, {\n        $set: {\n          \"profile.isMobileVerified\": true\n        }\n      });\n    }else{\n      throw new Meteor.Error(500, 'Error 500: OTP is not valid', 'OTP entered is wrong.');\n    }\n\n    return {\n      status: 'Success'\n    }\n\n  }\n})\n\nfunction randomString(length, chars) {\n  var mask = '';\n  if (chars.indexOf('a') > -1) mask += 'abcdefghijklmnopqrstuvwxyz';\n  if (chars.indexOf('A') > -1) mask += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  if (chars.indexOf('#') > -1) mask += '0123456789';\n  if (chars.indexOf('!') > -1) mask += '~`!@#$%^&*()_+-={}[]:\";\\'<>?,./|\\\\';\n  var result = '';\n  for (var i = length; i > 0; --i) result += mask[Math.floor(Math.random() * mask.length)];\n  return result;\n}\n","import \"./collections.js\";\nimport {check} from \"meteor/check\";\n// import TokenGen from 'token-gen';\n\nMeteor.methods({\n    addProperty: function(data) {\n        console.log(\"common method addProperty called\")\n\n        const userId = Meteor.userId();\n        console.log(userId)\n\n        if (!userId) {\n            throw new Meteor.Error('not-authorized');\n        }\n\n        var doc = {\n            \"address\" : {\n                \"address\" : getA(data,'address.address'),\n                \"county\" : getA(data,'address.county'),\n                \"area\" : getA(data,'address.area'),\n                \"country\" : \"Ireland\"\n            },\n            \"type\" : getA(data,'type'),\n            \"baths\" : parseInt(getA(data,'baths')),\n            \"furnished\" : getA(data,'furnished')==\"true\" ? true : false,\n            \"contacts\" : [\n                {\n                    \"name\" : getA(data,'contacts.0.name'),\n                    \"phone\" : getA(data,'contacts.0.phone'),\n                    \"email\" : getA(data,'contacts.0.email')\n                }\n            ],\n            \"about\" : getA(data,'about'),\n            \"amenities\" : getA(data,'amenities'),\n            \"createdByAgent\":userId,\n            \"isArchived\":false,\n            \"createdAt\":new Date(),\n            \"updatedAt\":new Date()\n        }\n        var slug = '';\n        if(doc.type)slug = doc.type\n        if(doc.address.address)slug += '-'+doc.address.address\n        if(doc.address.area)slug += '-'+doc.address.area\n        if(doc.address.county)slug += '-'+doc.address.county\n\n        doc.slug = slugify(slug);\n        // {name: \"bedrooms.0.ensuite\", value: \"on\"}\n        // 8\n        // :\n        // {name: \"bedrooms.0.bedType\", value: \"single\"}\n        // \"bedrooms\" : [\n        //     {\n        //         \"bedType\" : \"double\",\n        //         \"ensuite\" : true\n        //     },\n        //     {\n        //         \"bedType\" : \"single\",\n        //         \"ensuite\" : false\n        //     }\n        // ],\n\n        var isImported = getA(data,'isImported')\n        if(isImported=='true'){\n            doc['isImported']=true;\n            let url = getA(data,'url')\n            if(url){\n                doc.importData = {'url':url,'lastCheckedDate':new Date()}\n            }\n        }\n\n        var numBedRoomCount = getA(data,'numBedRoomCount')\n        if( numBedRoomCount ){\n            var bedrooms = [];\n            for(var i=0; i<numBedRoomCount; i++){\n                var bne = \"bedrooms.\"+i+\".ensuite\"\n                var bnt = \"bedrooms.\"+i+\".bedType\"\n                var tmp = {}\n\n                if(getA(data,bne)) tmp.ensuite = true;\n                else tmp.ensuite = false;\n                tmp.bedType = getA(data,bnt);\n\n                bedrooms.push(tmp)\n            }\n            doc['bedrooms'] = bedrooms;\n            doc['bedCount'] = bedrooms.length;\n        }else {\n            doc['bedrooms'] = [];\n            doc['bedCount'] = '1';//default 1\n        }\n\n        var docId = Collections.Properties.insert(doc);\n        //, {validationContext: 'create'}, function(err, res) {\n    //     if (err) {\n    //         throw new Meteor.Error(400, Collections.Properties.simpleSchema().namedContext('create').invalidKeys());\n    //     }\n    //     return res;\n    // });\n        Meteor.call('addManageProperty',docId);//Don't show meteor error as users can also enable this later.\n        return docId;\n    }\n})\nArray.prototype.pushUnique = function (item){\n    if(this.indexOf(item) == -1) {\n        //if(jQuery.inArray(item, this) == -1) {\n        this.push(item);\n        return true;\n    }\n    return false;\n}\nfunction getA(arr,find){\n    if(!Array.isArray(arr))return;\n    var eles = [];\n    for(var i=0;i<arr.length;i++){\n        if(arr[i]['name']==find)eles.push(arr[i]['value'])\n    }\n    if(find=='amenities')return eles;\n    if(eles.lenght>1)return eles;\n    if(eles.lenght==0)return false;\n    return eles[0];\n}\nfunction slugify (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/_,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '-')           // Replace spaces with -\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with 'and'\n        .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single -\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}","import \"./collections.js\";\n\nif (Meteor.isClient) {\n\n}\n\n//PUBLICATIONS\nif (Meteor.isServer) {\n    Meteor.publish(\"PropertyManage\", function (terms) {\n        var parameters = queryConstructor(terms);\n        if(parameters.fail) {return [];this.ready();}\n        return Collections.PropertyManage.find(parameters.find, parameters.options);\n    });\n    Meteor.publish(\"ActivityHistory\", function (terms) {\n        // console.log('ActivityHistory');\n\n        return Collections.ActivityHistory.find( {propertyId:terms.id}, {limit: terms.limit,sort: { createdAt : -1 }});\n    });\n    Meteor.publish(\"avgOffer\", function(auctionId) {\n        // console.log(\"Subscribed: auctionId: \"+auctionId)\n        // var self = this;\n        // var handle = Collections.Bids.aggregate([\n        //     { $match : { \"auctionId\" : auctionId } },\n        //     { $group : {\n        //             '_id': this.userId,\n        //             'avgOffer': {\n        //                 // In this case, we're running summation.\n        //                 $avg: '$yourBid'\n        //             }\n        //         }\n        //     }\n        // ]).forEach(function(data) {\n        //     self.added('avgOffer', 'first', data);\n        // });\n\n        ReactiveAggregate(this, Collections.Bids,[\n            { $match : { \"auctionId\" : auctionId } },\n            { $group : {\n                    '_id': this.userId,\n                    'avgOffer': {\n                        // In this case, we're running summation.\n                        $avg: '$yourBid'\n                    }\n                }\n            }\n        ] , { clientCollection: \"avgOffer\" }\n        );\n\n    });\n    Meteor.publish(\"Property\", function (terms) {\n        // console.log('Property');\n        var parameters = queryConstructor(terms);\n        // console.log(parameters.find)\n        // console.log(parameters.options)\n        // console.log(Collections.Properties.find(parameters.find, parameters.options).count())\n        if(parameters.fail) {return [];this.ready();}\n        return Collections.Properties.find(parameters.find, parameters.options);\n    });\n    Meteor.publish(\"userData\", function () {\n        if(!this.userId)return []; //Need to login\n        // 'services.password':1,Don use this , we have a method for this\n        return Meteor.users.find({_id: this.userId},{\n            limit:1, \n            fields: { \n            'services.facebook.id':1,\n            'services.twitter.screenName':1,\n            'services.linkedin.publicProfileUrl':1,\n            'services.google.id':1,\n            'createdAt':1, \n            'lastLoginDate':1, \n            'profile':1 ,\n            'isSA':1 ,\n            },\n        }\n        )\n    });\n    Meteor.publish(\"userDataUsername\", function (username) {\n        if(!username)return [];\n        var ret = Meteor.users.find({ \"profile.username\":username },{\n            limit:1,\n            fields: {\n                'createdAt':1,\n                'lastLoginDate':1,\n                'profile.name':1,\n                'profile.email':1,\n                'profile.role':1,\n                'profile.picture':1,\n                'profile.mobile':1,\n                'profile.isPublic':1,\n                'profile.username':1,\n            }\n        });\n        var user = ret.fetch();\n        // console.log(username)\n        // console.log(user)\n        if(!user.length){ return [];}\n        try{\n        if(user[0].profile.isPublic){//If public then include social info as well.\n            return  Meteor.users.find({ \"profile.username\":username },{\n                limit:1,\n                fields: {\n                    'createdAt':1,\n                    'lastLoginDate':1,\n                    'profile':1,\n                    'services.facebook.id':1,\n                    'services.twitter.screenName':1,\n                    'services.linkedin.publicProfileUrl':1,\n                    'services.google.id':1,\n                }\n            });\n        }\n        }catch(e){\n            console.log(e)\n        }\n        return ret;\n    });\n    Meteor.publish(\"allUserData\", function () {\n        return Meteor.users.find({}, {\n            fields: {\n                'createdAt':1,\n                'lastLoginDate':1,\n                'profile':1,\n                'services.facebook.id':1,\n                'services.twitter.screenName':1,\n                'services.linkedin.publicProfileUrl':1,\n                'services.google.id':1\n            }\n        });//fields: {'nested.things': 1}\n    });\n    Meteor.publish(\"tenants\", function (pageno) {\n        var pg = 1;\n        try{pg = parseInt(pageno);}catch(e){}\n        if(isNaN(pg))pg = 1;\n        var resperpage = 10;\n        var skip = (pg-1)*resperpage;\n\n        return Meteor.users.find({ \"profile.isPublic\":true },{\n            skip:skip,\n            limit:resperpage,\n            fields: {\n                'createdAt':1,\n                'lastLoginDate':1,\n                'profile.name':1,\n                'profile.email':1,\n                'profile.role':1,\n                'profile.picture':1,\n                'profile.mobile':1,\n                'profile.isPublic':1,\n                'services.facebook.id':1,\n                'services.twitter.screenName':1,\n                'services.linkedin.publicProfileUrl':1,\n                'services.google.id':1,\n                // 'profile.username':1,\n            }\n        });\n    });\n\n    Meteor.publish(\"browseLettings\", function (terms) {\n        var parameters = queryConstructor(terms);\n\n        if(parameters.fail) {return [];this.ready();}\n\n        var auctions = [],properties = [];\n        parameters.options.fields = {\n            address:1,\n            createdByAgent:1,\n            type:1,\n            createdAt:1,\n            updatedAt:1,\n            isArchived:1,\n            auctionId:1,\n            slug:1,\n            bedCount:1,\n            baths:1,\n            rent:1,\n            rentType:1,\n            gallery:1\n        };\n\n        // console.log('property key is')\n        // console.log(parameters.propertykey)\n        if(parameters.propertykey)\n        if(parameters.propertykey.length>0){\n            console.log('inside propertykey')\n            auctions = Collections.Auctions.find({lettingAuctionCode:{$in:parameters.propertykey},isArchived:false},parameters.options)\n            var tmp = auctions.fetch();\n\n            var propertyIds = [];\n            for(var i=0;i<tmp.length;i++){\n                propertyIds.push(tmp[i].propertyId);\n                if(i>parameters.options.limit)break;\n            }\n\n            properties = []\n            if(propertyIds.length){\n                properties = Collections.Properties.find({_id:{$in:propertyIds}},{\n                    limit:parameters.options.limit,\n                    sort:parameters.options.sort\n                })\n            }\n            if(!propertyIds.length)return [];\n            return [properties, auctions];\n        }\n\n        parameters.find.isArchived = false;\n        parameters.find.auctionId = {$exists:true, $gt: \"\" };//if we don' put $gt, then its also giving results of records with empty vals - but we don' need deactivated properties\n        if(parameters.minRent && parameters.maxRent){\n            parameters.find.rent = {$gte:parseInt(parameters.minRent),$lte:parseInt(parameters.maxRent)}\n        }else if (parameters.minRent){\n            parameters.find.rent = {$gte:parseInt(parameters.minRent)}\n        }else if (parameters.maxRent){\n            parameters.find.rent = {$lte:parseInt(parameters.maxRent)}\n        }\n        if(parameters.minBeds && parameters.maxBeds){\n            parameters.find.bedCount = {$gte:parseInt(parameters.minBeds),$lte:parseInt(parameters.maxBeds)}\n        }else if (parameters.minBeds){\n            parameters.find.bedCount = {$gte:parseInt(parameters.minBeds)}\n        }else if (parameters.maxBeds){\n            parameters.find.bedCount = {$lte:parseInt(parameters.maxBeds)}\n        }else if(parameters.bedCount && !isNaN(parameters.bedCount)){\n            parameters.find.bedCount = parseInt(parameters.bedCount)\n        }\n\n        // console.log('In browseLettings start')\n        // console.log(parameters.find)\n        // console.log(parameters.options)\n        // console.log(Collections.Properties.find(parameters.find, parameters.options).count())\n        // console.log('In browseLettings end')\n\n        properties = Collections.Properties.find(parameters.find,parameters.options)\n        var tmp = properties.fetch();\n\n        var propertyIds = [];\n        for(var i=0;i<tmp.length;i++){\n            propertyIds.push(tmp[i].auctionId);\n            if(i>parameters.options.limit)break;\n        }\n\n        auctions = []\n        if(propertyIds.length){\n            auctions = Collections.Auctions.find({_id:{$in:propertyIds}},{\n                limit:parameters.options.limit,\n                sort:parameters.options.sort\n            })\n        }\n\n        if(!propertyIds.length)return properties;\n        return [properties, auctions];\n    });\n    Meteor.publish(\"total-houses-for-rent-count\",function(terms){\n        var parameters = queryConstructor(terms);\n\n        if(parameters.fail) {return [];this.ready();}\n\n        parameters.options.fields = {_id:1};\n\n        if(parameters.propertykey) {\n            if (parameters.propertykey.length > 0) {\n\n                Counts.publish(this,\"total-houses-for-rent-count\",Collections.Auctions.find({\n                    lettingAuctionCode: {$in: parameters.propertykey},\n                    isArchived: false\n                }),parameters.options);\n\n            }\n        }else{\n            parameters.find.isArchived = false;\n            parameters.find.auctionId = {$exists:true, $gt: \"\" };//if we don' put $gt, then its also giving results of records with empty vals - but we don' need deactivated properties\n            if(parameters.minRent && parameters.maxRent){\n                parameters.find.rent = {$gte:parseInt(parameters.minRent),$lte:parseInt(parameters.maxRent)}\n            }else if (parameters.minRent){\n                parameters.find.rent = {$gte:parseInt(parameters.minRent)}\n            }else if (parameters.maxRent){\n                parameters.find.rent = {$lte:parseInt(parameters.maxRent)}\n            }\n            if(parameters.minBeds && parameters.maxBeds){\n                parameters.find.bedCount = {$gte:parseInt(parameters.minBeds),$lte:parseInt(parameters.maxBeds)}\n            }else if (parameters.minBeds){\n                parameters.find.bedCount = {$gte:parseInt(parameters.minBeds)}\n            }else if (parameters.maxBeds){\n                parameters.find.bedCount = {$lte:parseInt(parameters.maxBeds)}\n            }else if(parameters.bedCount && !isNaN(parameters.bedCount)){\n                parameters.find.bedCount = parseInt(parameters.bedCount)\n            }\n            // console.log('In count start')\n            // console.log(parameters.find)\n            // console.log(parameters.options)\n            // console.log(Collections.Properties.find(parameters.find, parameters.options).count())\n            // console.log('In count end')\n\n            Counts.publish(this,\"total-houses-for-rent-count\",Collections.Properties.find(parameters.find),parameters.options);\n        }\n    });\n\n    Meteor.publish(\"viewLetting\", function (key) {\n\n        // var auctions = Collections.Auctions.find({lettingAuctionCode:key,isArchived:false},{\n        var auctions = Collections.Auctions.find({lettingAuctionCode:key},{\n            limit:1\n        })\n        var tmp = auctions.fetch();\n\n        var properties = [],bids=[],mainProperty={},relatedPropsTmp=[],maxRel = 5,//Max rel always needs to be 1 number higher than the req, due to the logic below.\n            relPropIds = [],relAuctionIds = [],i=0\n        try{\n            relPropIds.push(tmp[0].propertyId);\n            relAuctionIds.push(tmp[0]._id);\n\n            bids = Collections.Bids.find({auctionId:tmp[0]._id},{\n                limit:100,\n                sort: {updatedAt: -1}\n            })\n\n            //////// RELATED PROPS\n            mainProperty = Collections.Properties.findOne({_id:tmp[0].propertyId});\n            var notArr = [mainProperty._id]\n            var filters = {\n                \"type\":mainProperty.type,\n                \"address.county\":mainProperty.address.county,\n                \"address.area\":mainProperty.address.area,\n                \"auctionId\": {$exists:true, $gt: \"\" },\n                \"isArchived\":false,\n                \"_id\": { $not: { $in: relPropIds } }\n            }\n\n            relatedPropsTmp = Collections.Properties.find(filters,{fields:{_id:1,auctionId:1},limit:maxRel}).fetch();\n            for(i=0;i<relatedPropsTmp.length;i++){\n                relPropIds.push(relatedPropsTmp[i]._id);\n                relAuctionIds.push(relatedPropsTmp[i].auctionId)\n            }\n\n            if(relPropIds.length<maxRel) {\n                delete filters[\"address.area\"];\n                filters[\"_id\"] = { $not: { $in: relPropIds } };\n                relatedPropsTmp = Collections.Properties.find(filters, {\n                    fields: {_id: 1,auctionId:1},\n                    limit: (maxRel - relPropIds.length)\n                }).fetch();\n                for (i = 0; i < relatedPropsTmp.length; i++){ relPropIds.push(relatedPropsTmp[i]._id); relAuctionIds.push(relatedPropsTmp[i].auctionId)}\n            }\n            if(relPropIds.length<maxRel) {\n                delete filters[\"address.county\"];\n                filters[\"_id\"] = { $not: { $in: relPropIds } };\n                relatedPropsTmp = Collections.Properties.find(filters, {\n                    fields: {_id: 1,auctionId:1},\n                    limit: (maxRel - relPropIds.length)\n                }).fetch();\n                for (i = 0; i < relatedPropsTmp.length; i++){ relPropIds.push(relatedPropsTmp[i]._id); relAuctionIds.push(relatedPropsTmp[i].auctionId)}\n            }\n            if(relPropIds.length<maxRel) {\n                delete filters[\"type\"];\n                filters[\"_id\"] = { $not: { $in: relPropIds } };\n                relatedPropsTmp = Collections.Properties.find(filters, {\n                    fields: {_id: 1,auctionId:1},\n                    limit: (maxRel - relPropIds.length)\n                }).fetch();\n                for (i = 0; i < relatedPropsTmp.length; i++){ relPropIds.push(relatedPropsTmp[i]._id); relAuctionIds.push(relatedPropsTmp[i].auctionId)}\n            }\n\n\n            properties = Collections.Properties.find({_id:{$in:relPropIds}},{\n                limit:(maxRel+1)})\n            auctions = Collections.Auctions.find({_id:{$in:relAuctionIds}},{\n                limit:(maxRel+1)})\n        }catch(e){\n            console.log(e);\n        }\n\n        if(!tmp.length)return [];\n        return [properties, auctions,bids];\n    });\n\n    let transformMyActiveAdvertisements = (data) => {\n        // console.log('in transformMyActiveAdvertisements');\n        // console.log(data.propertyId)\n        data.property = Collections.Properties.findOne(data.propertyId,{\n            fields:{\n                address:1,\n                createdByAgent:1,\n                createdAt:1,\n                updatedAt:1,\n                isArchived:1,\n                auctionId:1\n            }\n        });\n        return data;\n    };\n    Meteor.publish(\"inviteToApply.MyActiveAdvertisements\", function () {\n        if(!this.userId)return []; //Need to login\n\n        var self = this;\n        let subHandle = Collections.Auctions\n            .find()\n            .observeChanges({\n                added: (id, fields) => {\n                    fields = transformMyActiveAdvertisements(fields);\n                    this.added('Auctions', id, fields);\n                },\n                changed: (id, fields) => {\n                    this.changed('Auctions', id, fields);\n                },\n                removed: (id) => {\n                    this.removed('Auctions', id);\n                }\n            });\n        this.ready();\n        this.onStop(() => {\n            subHandle.stop();\n        });\n\n        self.ready();\n    });\n\n    Meteor.publish(\"MyProperties\", function (terms) {\n        console.log('In MyProperties Publish ');\n        var parameters = queryConstructor(terms);\n\n        if(parameters.fail) {return [];this.ready();}\n        if(!this.userId)return [];\n\n        find = {}\n        find['createdByAgent'] = {$in:[this.userId,'demoproperty']}\n        find['isArchived'] = false\n        if(terms.onlyActive)find.auctionId = {$exists:true, $gt: \"\" };\n\n        var properties = Collections.Properties.find(find, parameters.options)\n\n        var relAuctionIds = []\n        var props = properties.fetch();\n        for(var i=0;i<props.length;i++)if(props[i].auctionId)relAuctionIds.push(props[i].auctionId)\n\n        var auctions = Collections.Auctions.find({_id:{$in:relAuctionIds}},{limit:(parameters.options.limit?parameters.options.limit+2:22) } )\n        var bids = Collections.Bids.find({auctionId:{$in:relAuctionIds}},{limit:(parameters.options.limit?parameters.options.limit+2:22) } )\n\n        return [properties,\n            auctions,\n            bids\n        ];\n\n        this.ready();\n    });\n    Meteor.publish(\"total-MyProperties\", function (terms) {\n        if(!this.userId)return [];\n\n        find = {}\n        find['createdByAgent'] = {$in:[this.userId,'demoproperty']}\n        find['isArchived'] = false\n        if(terms.onlyActive)find.auctionId = {$exists:true, $gt: \"\" };\n\n        Counts.publish(this,\"total-MyProperties\",Collections.Properties.find(find));\n    });\n\n    Meteor.publish(\"PropertyApplications\", function (terms) {\n\n        var parameters = queryConstructor(terms);\n\n        if(parameters.fail) {return [];this.ready();}\n        if(!this.userId)return [];\n\n        find = {_id:parameters.id}\n        find['isArchived'] = false\n\n        let properties = Collections.Properties.find(find, {limit:1})\n        let tmp = properties.fetch();\n        if(tmp.length==0)return [];\n\n        let auctionId = tmp[0].auctionId;\n        let propertyId = tmp[0]._id;\n\n\n        // console.log('In PropertyApplications start')\n        // console.log(parameters)\n        // console.log('Auctions')\n        // console.log(Collections.Auctions.find({_id:auctionId,isArchived:false},{limit:1 } ).count())\n        // console.log(Collections.Bids.find({auctionId:auctionId,isArchived:false},parameters.propertyApplications.options ).count())\n        // console.log(Collections.EmailEnquiries.find({propertyId:propertyId,isArchived:false},parameters.emailEnquiries.options ).count())\n        // console.log('In PropertyApplications end')\n\n        let auctions = Collections.Auctions.find({_id:auctionId,isArchived:false},{limit:1 } )\n        tmp = auctions.fetch();\n        if(tmp.length==0)return [];\n\n        let bids = Collections.Bids.find({auctionId:auctionId,isArchived:false},parameters.propertyApplications.options )\n\n        let EmailEnquiries = Collections.EmailEnquiries.find({propertyId:propertyId,isArchived:false},parameters.emailEnquiries.options )\n\n        tmp = bids.fetch();\n        let userIds = []\n        for(let j=0; j< tmp.length ; j++){\n            userIds.push(tmp[j].userId);\n        }\n        let users = Meteor.users.find({_id:this.userId})\n        if(parameters.emailEnquiries)\n            users = Meteor.users.find({_id:{$in: userIds}},{limit: parameters.emailEnquiries.options.limit,fields: {\n                    'services.facebook.id':1,\n                    'services.twitter.screenName':1,\n                    'services.linkedin.publicProfileUrl':1,\n                    'services.google.id':1,\n                    'createdAt':1,\n                    'lastLoginDate':1,\n                    'profile':1 ,\n                    'isSA':1 ,\n                } })// just need the limit from there.\n\n\n        return [properties,\n            auctions,\n            bids,\n            EmailEnquiries,\n            users\n        ];\n\n        this.ready();\n    });\n    Meteor.publish(\"total-PropertyApplications\", function (terms) {\n\n        var parameters = queryConstructor(terms);\n\n        if(parameters.fail) {return [];this.ready();}\n        if(!this.userId)return [];\n\n        find = {_id:parameters.id}\n        find['isArchived'] = false\n\n        let properties = Collections.Properties.find(find, {limit:1})\n        let tmp = properties.fetch();\n        if(tmp.length==0)return [];\n\n        let auctionId = tmp[0].auctionId;\n        let propertyId = tmp[0]._id;\n\n        Counts.publish(this,\"total-PropertyApplications\",Collections.Bids.find({auctionId:auctionId,isArchived:false}),parameters.propertyApplications.options)\n    });\n    Meteor.publish(\"total-EmailEnquiries\", function (terms) {\n\n        var parameters = queryConstructor(terms);\n\n        if(parameters.fail) {return [];this.ready();}\n        if(!this.userId)return [];\n\n        find = {_id:parameters.id}\n        find['isArchived'] = false\n\n        let properties = Collections.Properties.find(find, {limit:1})\n        let tmp = properties.fetch();\n        if(tmp.length==0)return [];\n\n        let auctionId = tmp[0].auctionId;\n        let propertyId = tmp[0]._id;\n\n        Counts.publish(this,\"total-EmailEnquiries\",Collections.EmailEnquiries.find({propertyId:propertyId,isArchived:false}),parameters.emailEnquiries.options)\n    });\n    Meteor.publish(\"Advertisement\", function (advertisementId) {\n        let validationSuccess = false;\n        if(advertisementId.length > 12 && advertisementId.length < 20)validationSuccess=true\n\n        if(!validationSuccess) return [];\n        else return Collections.Auctions.find({_id:advertisementId,isArchived:false}, {limit:1});\n\n        this.ready();\n    });\n    Meteor.publish(\"MyAdvertisements\", function (terms) {\n\n        var parameters = queryConstructor(terms);\n\n        if(parameters.fail) {return [];this.ready();}\n        if(!this.userId)return [];\n\n        return Collections.Auctions.find({createdByAgent:{$in:[this.userId,'demoproperty']},isArchived:false}, parameters.options);\n\n        this.ready();\n    });\n    Meteor.publish(\"editProperty\", function (propertyId) {\n        if(!this.userId)return [];\n\n        var auctions = Collections.Auctions.find({isArchived:false,propertyId:propertyId},{\n            transform:function(doc){\n                if(doc.createdByAgent!=this.userId){\n                    return {\n                        _id:doc._id,\n                        propertyId:doc.propertyId,\n                        createdByAgent:doc.createdByAgent\n                    }\n                }\n            },\n            limit:1\n        })\n\n        var properties = Collections.Properties.find({isArchived:false,_id:propertyId},{\n            transform:function(doc){\n                if(doc.createdByAgent!=this.userId){\n                    return {\n                        _id:doc._id,\n                        propertyId:doc.propertyId\n                    }\n                }\n            },\n            limit:1\n        })\n\n        return [auctions,properties];\n    });\n    Meteor.publish(\"propertyApplication\", function (propertyId,auctionId) {\n        if(!this.userId)return [];\n\n        var properties = Collections.Properties.find({isArchived:false,_id:propertyId},{\n            transform:function(doc){\n                if(doc.createdByAgent!=this.userId){\n                    return {\n                        _id:doc._id,\n                        propertyId:doc.propertyId,\n                        invalidAgent:true\n                    }\n                }\n            },\n            limit:1\n        })\n\n        var auctionIDTmp = '';var invalidAgentProp = false;\n        var tmp = properties.fetch()\n        try{\n            auctionIDTmp = tmp[0].auctionId;\n            if(tmp[0].invalidAgent)invalidAgentProp=true\n        }catch(e){}\n\n        if(!tmp.length || invalidAgentProp){//Property not found, no need to find auction\n            console.log(\"invalidAgentProp: \"+invalidAgentProp)\n            console.log(\"tmp.length: \"+tmp.length)\n            return [];\n        }\n\n\n        if(auctionId)auctionIDTmp=auctionId\n\n        var auctions = Collections.Auctions.find({isArchived:false,_id:auctionIDTmp},{\n            transform:function(doc){\n                if(doc.createdByAgent!=this.userId){\n                    return {\n                        _id:doc._id,\n                        propertyId:doc.propertyId,\n                        createdByAgent:doc.createdByAgent\n                    }\n                }\n            },\n            limit:1\n        })\n\n        var tmp = properties.fetch()\n        if(!tmp.length){\n            return [];\n        }\n\n        var bids = Collections.Bids.find({isArchived:false, _id:auctionIDTmp},{\n            transform:function(doc){\n                if(doc.createdByAgent!=this.userId){\n                    return {\n                        _id:doc._id,\n                        propertyId:doc.propertyId,\n                        createdByAgent:doc.createdByAgent\n                    }\n                }\n            },\n            limit:1\n        })\n\n        return [auctions,properties];\n    });\n    Meteor.publish(\"Areas\", function (c1,c2,c3,c4,c5) {\n        // For ireland\n        // c1: Territory: like UK for ireland, its empty\n        // c2: Country => Ireland\n        // c3: County => Dublin / City\n        // c4: Sub County => Dublin 1\n        // c5: Area => Baltinglass\n        // console.log('Vals are c3: '+c3)\n        // return [];\n        var selector = {},paramReceived = false;\n        if(c1){paramReceived=true;selector['Territory']=c1;}\n        if(c2){paramReceived=true;selector['Country']=c2;}\n        if(c3){paramReceived=true;selector['County']=c3;}\n        if(c4){paramReceived=true;selector['Sub County']=c4;}\n        if(c5){paramReceived=true;selector['Area']=c5;}\n        if(!paramReceived){//Don't send all area info, for performance reasons. \n            // console.log('in if c3: '+c3)\n            return [];\n        }else{ \n            // console.log('in else c3: '+c3)\n            // console.log(selector)\n            return Collections.Areas.find(selector, {});}\n        this.ready();\n    });\n\n    Meteor.publish(\"browseBlogs\", function (terms) {\n        var parameters = queryConstructor(terms);\n        if(parameters.fail) {return [];this.ready();}\n\n        parameters.find.isArchived = false;\n\n        var Blogs = Collections.Blogs.find(parameters.find,parameters.options)\n        return Blogs;\n        this.ready();\n    });\n    Meteor.publish(\"total-blogs-count\",function(terms){\n        var parameters = queryConstructor(terms);\n        if(parameters.fail) {return [];this.ready();}\n\n        parameters.find.isArchived = false;\n\n        Counts.publish(this,\"total-blogs-count\",Collections.Blogs.find(parameters.find),{fields:{_id:1}});\n    });\n    Meteor.publish(\"viewBlog\", function (key) {\n\n        if(!key)return [];\n\n        var tmp = Collections.Blogs.findOne({slug:key},{\n            limit:1\n        })\n        if(!tmp || !tmp._id){\n            return []; //Blog not found.\n        }\n\n        let notArr = [], Blogs = [],recentBlogsTmp = [],relBlogIds=[],i=0,maxRecent = 4\n        try{\n            notArr.push(tmp.wpId);\n            relBlogIds.push(tmp._id);\n            for(i=0; i< tmp.related.length;i++ ){\n                notArr.push(tmp.related[i].wpId);\n            }\n            var filters = {\n                \"isArchived\":false,\n                \"wpId\": { $not: { $in: notArr } }\n            }\n            recentBlogsTmp = Collections.Blogs.find(filters,{fields:{_id:1,wpId:1},limit:maxRecent}).fetch();\n            for(i=0;i<recentBlogsTmp.length;i++){\n                relBlogIds.push(recentBlogsTmp[i]._id);\n            }\n\n            Blogs = Collections.Blogs.find({_id:{$in:relBlogIds}},{\n                limit:(maxRecent+1),\n                // sort:{updatedAt : -1} // Not needed, anyway, it will send records to UI without order. and IDs are definitly specified.\n            })\n        }catch(e){\n            console.log(e);\n        }\n\n        return Blogs;this.ready();\n\n    });\n\n\n    Meteor.publish(\"Properties\", function () {\n\n        let Properties = Collections.Properties;\n        let selector = {};\n        return Properties.find(selector, {});\n\n        this.ready();\n    });\n    Meteor.publish(\"Bids\", function () {\n        //if (this.userId) {\n        //  let Projects = Collections.Bids;\n        //  //let selector = {\"userId\":this.userId};\n        //  let selector = {};//We need to query even when he isn't logged in.\n        //  return Projects.find(selector, {});\n        //}else {\n        //    // Declare that no data is being published. If you leave this line\n        //    // out, Meteor will never consider the subscription ready because\n        //    // it thinks you're using the added/changed/removed interface where\n        //    // you have to explicitly call this.ready().\n        //    return [];\n        //  }\n        let Projects = Collections.Bids;\n        let selector = {};\n        return Projects.find(selector, {});\n        this.ready();\n    });\n    Meteor.publish(\"MyBids\", function () {\n        if (this.userId) {\n            let Projects = Collections.Bids;\n            let selector = {\"userId\":this.userId};\n            //let selector = {};//We need to query even when he isn't logged in.\n            return Projects.find(selector, {});\n        }else {\n            // Declare that no data is being published. If you leave this line\n            // out, Meteor will never consider the subscription ready because\n            // it thinks you're using the added/changed/removed interface where\n            // you have to explicitly call this.ready().\n            return [];\n        }\n    });\n    Meteor.publish(\"Auctions\", function () {\n\n        let Projects = Collections.Auctions;\n        let selector = {};\n        return Projects.find(selector, {});\n\n        this.ready();\n    });\n    Meteor.publish(\"Config\", function () {\n\n        let Projects = Collections.Config;\n        let selector = {};\n        return Projects.find(selector, {});\n\n        this.ready();\n    });\n    // Meteor.publish(\"Payments\", function () {\n    //\n    //     if (this.userId) {\n    //         let Payments = Collections.Payments;\n    //         let selector = {\"userId\":this.userId};\n    //         //let selector = {};//We need to query even when he isn't logged in.\n    //         return Payments.find(selector, {});\n    //\n    //         this.ready();\n    //     }else {\n    //         let Payments = Collections.Payments;\n    //         let selector = {};\n    //         return Payments.find(selector, {});\n    //\n    //         this.ready();\n    //     }\n    // });\n    //Meteor.publish(\"MyBids\", function () {//NOT WORKING IN PUBLISH, HAS TO DO IN CLIENT\n    //\n    //  if (this.userId) {//userId is null if no user is logged in.\n    //    let Bids = Collections.Bids;\n    //    //const userId = Meteor.userId();\n    //    let selector = {\"userId\":this.userId};\n    //    return Bids.find(selector, {\n    //      transform: function(doc) {\n    //        doc.unit = Collections.Units.findOne({\n    //          _id: doc.unitId\n    //        });\n    //        doc.auction = Collections.Auctions.findOne({\n    //          _id: doc.auctionId\n    //        });\n    //        doc.project = Collections.Properties.findOne({\n    //          _id: doc.unit.projectId\n    //        });\n    //        return doc;\n    //      },\n    //      sort: {\n    //        createdAt: -1\n    //      }\n    //\n    //    });\n    //  } else {\n    //    // Declare that no data is being published. If you leave this line\n    //    // out, Meteor will never consider the subscription ready because\n    //    // it thinks you're using the added/changed/removed interface where\n    //    // you have to explicitly call this.ready().\n    //    return [];\n    //  }\n    //  this.ready();\n    //});\n    // Meteor.publish('Meteor.users.initials', function ({ userIds }) {\n    //     // Validate the arguments to be what we expect\n    //     new SimpleSchema({\n    //         userIds: { type: [String] }\n    //     }).validate({ userIds });\n    //\n    //     // Select only the users that match the array of IDs passed in\n    //     const selector = {\n    //         _id: { $in: userIds }\n    //     };\n    //\n    //     // Only return one field, `initials`\n    //     const options = {\n    //         fields: { initials: 1 }\n    //     };\n    //\n    //     return Meteor.users.find(selector, options);\n    // });\n}","/**\n * Created by njanjanam on 27/03/2018.\n */\nMeteor.methods({\n    SAGenerateSlugsForMissingProperties: function(auctionCode) {\n        //Will generate slugs to all auctions, missing ones\n        console.log(\"server method Super Admin SAGenerateSlugsForMissingProperties called\")\n\n        var user = Meteor.user();\n        if (!user) {\n            throw new Meteor.Error('not-authorized');\n        }\n        if(!user.isSA){//Only super admins can use this method.\n            throw new Meteor.Error('not-authorized');\n            return false;\n        }\n\n        var properties = Collections.Properties.find({isArchived:false})\n        var tmp = properties.fetch();var property = '';var c=0;var slug='';\n\n        // console.log('Total: '+tmp.length)\n        for(var i=0;i<tmp.length;i++){\n            property = tmp[i];\n            // if(property.slug){\n                //Format: (apartment-for-rent-in-area- // not this format as its for browse pages) (name and are apartment)\n                //Approved format: /rent/apartment-name-of-apt-AREA-CITY\n                if(property.type)slug = property.type\n                if(property.address.address)slug += '-'+property.address.address\n                if(property.address.area)slug += '-'+property.address.area\n                if(property.address.county)slug += '-'+property.address.county\n\n                Collections.Properties.update(property._id, {\n                    $set: {\n                        \"slug\": slugify(slug)\n                    }\n                });\n                c++;\n            // }\n        }\n        return 'Slug Added Count: '+c;\n    },\n    SAdeactivateAuction: function(auctionCode) {\n        //Below is the code used on client to mass delete the objects.\n        // var props = Collections.Auctions.find({},{fields:{lettingAuctionCode:1}}).fetch()\n        // var excludes = ['TUK94','RR5DK','KZ6X9','RCWJG']\n        // var a=[];\n        // for(var i=0;i<props.length;i++){\n        //     if(excludes.indexOf(props[i].lettingAuctionCode)!=-1)continue;\n        //     a.push(props[i].lettingAuctionCode)\n        // }\n        // for(var i=0;i<a.length;i++){\n        //     Meteor.call('SAdeactivateAuction',a[i]);\n        // }\n        check(auctionCode, String);\n        console.log(\"server method Super Admin deactivateAuction called\")\n\n        console.log(auctionCode);\n\n        var user = Meteor.user();\n        if (!user) {\n            throw new Meteor.Error('not-authorized');\n        }\n        if(!user.isSA){//Only super admins can use this method.\n            throw new Meteor.Error('not-authorized');\n            return false;\n        }\n\n        const auction = Collections.Auctions.findOne({lettingAuctionCode:auctionCode});\n        if (!auction)throw new Meteor.Error('Invalid auction');\n\n        const property = Collections.Properties.findOne({\n            _id: auction.propertyId\n        });\n        if (!property)throw new Meteor.Error('Invalid property');\n\n        var userId=property.createdByAgent;\n\n        var auctionHistory = property.auctionHistory;\n        if(!auctionHistory)auctionHistory = [];\n\n        auctionHistory.push({\n            auctionId:property.auctionId,\n            deactivatedOn: new Date()\n        })\n        Collections.Properties.update(auction.propertyId, {\n            $set: {\n                \"auctionId\": \"\",\n                \"rent\": \"\",\n                \"auctionHistory\":auctionHistory\n            }\n        });\n        Collections.Auctions.update(auction._id, {\n            $set: {\n                \"isArchived\": true,\n                \"endDate\":new Date()\n            }\n        });\n\n        var bidCount = Collections.Bids.find({auctionId:auction._id}).count();\n\n        if(bidCount){//Non zero\n            Collections.Bids.update({auctionId:auction._id}, {\n                $set: {\n                    \"isArchived\": true,\n                    \"endDate\":new Date()\n                }\n            });\n        }\n\n        // const user = Meteor.user();\n        user = Meteor.users.findOne(userId);\n\n\n\n        if(!auction.auctionBidProfit)auction.auctionBidProfit=0\n        if(!user.profile.bidProfitActive)user.profile.bidProfitActive=0\n        if(!user.profile.activeAuctions)user.profile.activeAuctions=0\n        if(!user.profile.bidsReceivedActiveAuctions)user.profile.bidsReceivedActiveAuctions=0\n        user.profile.activeAuctions--;\n        user.profile.bidsReceivedActiveAuctions-=bidCount;\n        user.profile.bidProfitActive -= auction.auctionBidProfit;\n\n        if(user.profile.activeAuctions<0)user.profile.activeAuctions=0\n        if(user.profile.bidsReceivedActiveAuctions<0)user.profile.bidsReceivedActiveAuctions=0\n        if(user.profile.bidProfitActive<0)user.profile.bidProfitActive=0\n        Meteor.users.update(userId,{\n            $set: {\n                \"profile.activeAuctions\" :user.profile.activeAuctions,\n                \"profile.bidsReceivedActiveAuctions\" :user.profile.bidsReceivedActiveAuctions,\n                \"profile.bidProfitActive\" :user.profile.bidProfitActive,\n            }\n        });\n\n\n        return {\n            status: 'success'\n        }\n\n    },\n    FixAddRentToProperty:function(){//Add rent field to all property records, take from auction table.\n        console.log(\"server method Super Admin FixAddRentToProperty called\")\n\n        var user = Meteor.user();\n        if (!user) {\n            throw new Meteor.Error('not-authorized');\n        }\n        if(!user.isSA){//Only super admins can use this method.\n            throw new Meteor.Error('not-authorized');\n            return false;\n        }\n\n        var auctions = Collections.Auctions.find({isArchived:false})\n        var tmp = auctions.fetch();var auction = '';var c=0;\n\n        // console.log('Total: '+tmp.length)\n        for(var i=0;i<tmp.length;i++){\n            auction = tmp[i];\n            // if(auction.propertyId=='JGhAi548Bfa3q7TEJ')console.log('found it')\n            // console.log(auction._id)\n            if(!auction.propertyId)continue;\n            Collections.Properties.update(auction.propertyId, {\n                $set: {\n                    \"rent\": parseInt(auction.price)\n                }\n            });\n            c++;\n        }\n        return 'Fixed count: '+c;\n\n    },\n    AddBedCountToAllProperty:function(){//Add rent field to all property records, take from auction table.\n        console.log(\"server method Super Admin AddBedCountToAllProperty called\")\n\n        var user = Meteor.user();\n        if (!user) {\n            throw new Meteor.Error('not-authorized');\n        }\n        if(!user.isSA){//Only super admins can use this method.\n            throw new Meteor.Error('not-authorized');\n            return false;\n        }\n\n        var properties = Collections.Properties.find({isArchived:false})\n        var tmp = properties.fetch();var property = '';var c=0;var bedCount=1;\n\n        console.log('Total: '+tmp.length)\n        for(var i=0;i<tmp.length;i++){\n            property = tmp[i];\n\n            if(property.bedrooms)bedCount = property.bedrooms.length;\n            if(!bedCount)bedCount = 1\n\n            Collections.Properties.update(property._id, {\n                $set: {\n                    \"bedCount\": parseInt(bedCount)\n                }\n            });\n            c++;\n        }\n        console.log('bedCount Added Count: '+c);\n        return 'bedCount Added Count: '+c;\n    },\n    AddMonthlyRentOnAuctionProperty:function(){//Add rent field to all property records, take from auction table.\n        console.log(\"server method Super Admin AddMonthlyRentOnAuctionProperty called\")\n\n        var user = Meteor.user();\n        if (!user) {\n            throw new Meteor.Error('not-authorized');\n        }\n        if(!user.isSA){//Only super admins can use this method.\n            throw new Meteor.Error('not-authorized');\n            return false;\n        }\n\n        var properties = Collections.Properties.find({isArchived:false})\n        var tmp = properties.fetch();var property = '';var c=0;var rentMonthly=0;var auction = {}\n\n        console.log('Total: '+tmp.length)\n        for(var i=0;i<tmp.length;i++){\n            property = tmp[i];\n            if(!property.auctionId)continue;\n\n            auction = Collections.Auctions.findOne({_id:property.auctionId})\n            // if(auction.price==null)auction.price = Math.floor(Math.random() *10 +10) *10\n            rentMonthly = parseFloat(auction.price)\n            if(auction.rentType=='weekly') rentMonthly = parseFloat((rentMonthly/7)*30) // Month has 30 days\n\n            if(!rentMonthly)continue;\n            if(!auction.price)continue;\n\n            Collections.Properties.update(property._id, {\n                $set: {\n                    \"rent\": parseInt(auction.price),\n                    \"rentMonthly\": rentMonthly\n                }\n            });\n            Collections.Auctions.update(property.auctionId, {\n                $set: {\n                    \"price\": parseInt(auction.price),\n                    \"rentMonthly\": rentMonthly\n                }\n            });\n            c++;\n        }\n        console.log('bedCount Added Count: '+c);\n        return 'Fixed count: '+c;\n\n    },\n\n\n\n\n\n\n    ////////////// TEMP - NOT IMP\n    FixRentDataTypeOnAuctionProperty:function(){//Add rent field to all property records, take from auction table.\n        console.log(\"server method Super Admin FixRentFormatOnAuctionProperty called\")\n\n        var user = Meteor.user();\n        if (!user) {\n            throw new Meteor.Error('not-authorized');\n        }\n        if(!user.isSA){//Only super admins can use this method.\n            throw new Meteor.Error('not-authorized');\n            return false;\n        }\n\n        var auctions = Collections.Auctions.find({isArchived:false})\n        var tmp = auctions.fetch();var auction = '';var c=0;\n\n        // console.log('Total: '+tmp.length)\n        for(var i=0;i<tmp.length;i++){\n            auction = tmp[i];\n            if(!auction.propertyId)continue;\n\n            Collections.Auctions.update(auction._id, {\n                $set: {\n                    \"price\": parseInt(auction.price)\n                }\n            });\n            Collections.Properties.update(auction.propertyId, {\n                $set: {\n                    \"rent\": parseInt(auction.price)\n                }\n            });\n            c++;\n        }\n        return 'Fixed count: '+c;\n\n    },\n\n})\n// Meteor.call('FixAddRentToProperty',function(err, res){\n//     debugger;\n//     console.log(res);\n// })\nfunction slugify (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/_,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '-')           // Replace spaces with -\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with 'and'\n        .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single -\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}","import {check} from \"meteor/check\";\n// import TokenGen from 'token-gen';\n\nMeteor.methods({\n    addActivityHistory: function(data) {\n        console.log(\"server method addActivityHistory called\")\n        this.unblock();\n\n        if(!data.userIdPassed){\n            const userId = Meteor.userId();\n            console.log(userId)\n\n            if (!userId)throw new Meteor.Error('not-authorized');\n        }\n        delete data.userIdPassed;\n\n        if (!data.propertyId)throw new Meteor.Error('Property ID id required.');\n\n        data.createdAt = new Date();\n\n        var docId = Collections.ActivityHistory.insert(data);\n\n        return docId;\n\n    }\n})\nArray.prototype.pushUnique = function (item){\n    if(this.indexOf(item) == -1) {\n        //if(jQuery.inArray(item, this) == -1) {\n        this.push(item);\n        return true;\n    }\n    return false;\n}\nfunction numDifferentiation(val) {\n    if(val >= 1000000000) val = (val/1000000000).toFixed(2) + ' Billion';\n    else if(val >= 1000000) val = (val/1000000).toFixed(2) + ' Million';\n    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}","/**\n * Created by srikanth681 on 24/02/16.\n */\nimport {check} from \"meteor/check\";\n\nvar EMAIL_CONFIG = Meteor.settings.EMAIL_CONFIG\nvar SUPPORT_DATA = Meteor.settings.SUPPORT_DATA\n\n\n\n\nMeteor.methods({\n    requestEmail: function (mailData) {\n        this.unblock();\n        console.log('requestEmail method called')\n\n        switch(mailData.requestType){\n            case 'emailEnquiryReceived'://15 mns grouping\n                mailData.frequency = 15;//its a 15min grouping\n                if(!mailData.scheduledDate)mailData.scheduledDate = moment().add(15, 'm').toDate()\n                break;\n            case 'uploadRefsReminder'://1440 mns grouping - 1 day\n                mailData.frequency = 1440;//its a 1 per day grouping\n                if(!mailData.scheduledDate)mailData.scheduledDate = moment().add(1, 'd').toDate()\n                break;\n            case 'reminderUploadReferences'://1440 mns grouping - 1 day\n                mailData.frequency = 1440;//its a 1 per day grouping\n                if(!mailData.scheduledDate)mailData.scheduledDate = moment().add(1, 'd').toDate()\n                break;\n            default: throw new Meteor.Error('Invalid requestType');\n        }\n        mailData.status = 'new';\n        mailData.isArchived = false;\n\n        Collections.EmailRequests.insert(mailData)\n    },\n  sendNotificationEmail: function (data,serialMode=false) {\n    //Format as shown below\n    //data = {\n    //  template: \"bidSuccessfullyPlaced\",\n    //  subject: \"Welcome to SMC\"\n    //}\n    // check(args, [String]);\n\n    // Let other method calls from the same client start running,\n    // without waiting for the email sending to complete.\n    if(!serialMode)this.unblock();\n\n    console.log('sendNotificationEmail '+(serialMode?\"serialMode\":\"\")+' called for '+data.mailTo)\n\n    // don't send account emails unless email server configured\n    // if (!Meteor.settings.MAIL_URL) {\n    if (!process.env.MAIL_URL) {\n      console.log(\"Mail not configured: suppressing sendNotificationEmail output\");\n      console.log('no MAIL_URL in env vars')\n      return true;\n    }\n\n    SSR.compileTemplate(\"email/\"+data.template, Assets.getText(\"email/\"+data.template+\".html\"));\n    let renderArr = {\n        homepage: ( Meteor.isDevelopment ? 'https://www.spotmycrib.ie/' : Meteor.absoluteUrl() ),\n        cdnHomepage: ( Meteor.isDevelopment ? 'https://www.spotmycrib.ie/' : CDN.get_cdn_url()+'/' ),\n        support: EMAIL_CONFIG,\n        headers:{}\n    }\n\n    renderArr.data = data;\n    let renderedTemplate = SSR.render(\"email/\" + data.template, renderArr)\n\n    if(Meteor.isDevelopment && !data.mailTo.endsWith('@spotmycrib.com')){\n        data.mailTo = 'srikanth681@gmail.com'\n    }\n    if(data.mailTo.indexOf('daft.ie')!=-1){\n        console.log(\"Looks like a daft.ie email, supressing it.\");\n        console.log(data.mailTo)\n        return true;\n    }\n\n      var arr = {\n          to: data.mailTo,\n          // to: 'srikanth681@gmail.com',\n          from: EMAIL_CONFIG.name+\" <\"+EMAIL_CONFIG.email+\">\",\n          subject: data.subject,\n          html: renderedTemplate\n      }\n      if(data.replyTo)arr.replyTo = data.replyTo;\n      if(data['o:tag'])arr.headers['o:tag'] = data['o:tag'];\n      if(Meteor.isDevelopment && !data.mailTo.endsWith('@spotmycrib.com')){\n          arr['o:testmode']=true;\n      }\n\n      Email.send(arr);\n\n      return true;\n\n\n\n  },\n  sendEmail: function (to, from, subject, text) {\n    check([to, from, subject, text], [String]);\n\n    // Let other method calls from the same client start running,\n    // without waiting for the email sending to complete.\n    this.unblock();\n\n    //actual email sending method\n    Email.send({\n      to: to,\n      from: from,\n      subject: subject,\n      text: text\n    });\n  },\n  knowMoreRequestReceived:function (email) {\n      console.log('in knowMoreRequestReceived')\n      console.log(email)\n      this.unblock();\n      Email.send({\n          to: 'srikanth681@gmail.com',\n          from: 'sales@spotmycrib.com',\n          subject: \"Know more request received\",\n          text: 'Email provided is: '+email,\n          headers:{\n            'o:tag': 'notifySales',\n          }\n      });\n  },\n  notifyAdmin:function (subject='',desc='') {\n     console.log('in notifyAdmin')\n\n     this.unblock();\n     if(Meteor.isDevelopment)return ;\n     \n     Email.send({\n        to: 'srikanth681@gmail.com',\n        // cc: 'divyarao807@gmail.com',\n        from: 'support@spotmycrib.com',\n        subject: \"Notify: \"+subject,\n        html: 'Content is: '+desc,\n        headers:{\n            'o:tag': 'notifyAdmin',\n          }\n     });\n  },\n  introOfferRequestReceived:function (email,name,company,phone) {\n      console.log('in introOfferRequestReceived')\n      console.log(email+\" \"+ name+\" \"+ company+\" \"+ phone)\n      this.unblock();\n      Email.send({\n          to: 'srikanth681@gmail.com',\n          from: 'sales@spotmycrib.com',\n          subject: \"Intro offer request received\",\n          text: 'Email provided is: '+email+\"\\n   name: \"+name+\"\\n   company: \"+company+\"\\n   phone: \"+phone,\n          headers:{\n            'o:tag': 'notifySales',\n          }\n      });\n  },\n  sendWelcomeEmailCustom: function(args){\n        // check(args, Match.Any);\n        var userId = args[0];\n\n        console.log(\"server method sendWelcomeEmailCustom called\")\n        console.log(userId);\n        var user = Accounts.users.findOne(userId);\n        // console.log(user);\n        if(!user){\n            throw new Meteor.Error(500, 'Error 500: Invalid user', 'User not found.');\n        }\n\n        let userFirstName = user.profile.name;\n        if(userFirstName){\n            userFirstName = titleCase(userFirstName.split(' ')[0]);\n        }\n\n        var globalConfig = Collections.Config.findOne();\n        var mailData = {\n            template: 'welcomeEmail',\n            'o:tag': 'welcomeEmail',\n            subject: \"Welcome to SpotMyCrib\",\n            mailTo: user.profile.email,\n            user: user,\n            conf: globalConfig,\n            data : {\n                userFirstName: userFirstName\n            }\n        }\n        //debugger;\n        // Accounts.sendVerificationEmail(userId);\n        \n\n        Meteor.call('sendNotificationEmailWithoutSSR', mailData)\n\n      /*\n       if( user.profile.isEmailVerified){\n       throw new Meteor.Error(500, 'Error 500: Email already verified. ', 'Your email is already verified.');\n       }\n\n       var newVerifyCode = randomString(32, '#a');//Random alpha numeric string of 32 chars\n       Meteor.users.update({\n       \"_id\": user._id\n       }, {\n       $currentDate: {\n       \"profile.emailVerificationSentOn\": { $type: \"timestamp\" }\n       },\n       $set: {\n       \"profile.emailVerificationValue\": newVerifyCode\n       }\n       });\n       */\n\n\n        return {\n            status: 'Success'\n        }\n\n\n    },\n    sendNotificationEmailWithoutSSR: function (mailData) {\n        //Format as shown below\n        //data = {\n        //  template: \"bidSuccessfullyPlaced\",\n        //  subject: \"Welcome to SMC\"\n        //}\n        // check(args, [String]);\n    \n        // Let other method calls from the same client start running,\n        // without waiting for the email sending to complete.\n        this.unblock();\n    \n        console.log('sendNotificationEmailWithoutSSR called for '+mailData.user.profile.name)\n    \n        // don't send account emails unless email server configured\n        // if (!Meteor.settings.MAIL_URL) {\n        if (!process.env.MAIL_URL) {\n          console.log(\"Mail not configured: suppressing sendNotificationEmail output\");\n          console.log('no MAIL_URL in env vars')\n          return true;\n        }\n        mailData.data.homepage = Meteor.absoluteUrl();\n        if(Meteor.isDevelopment)mailData.data.homepage = 'https://www.spotmycrib.ie/';\n        mailData.data.cdnHomepage = CDN.get_cdn_url()+'/';\n        if(Meteor.isDevelopment)mailData.data.cdnHomepage = 'https://www.spotmycrib.ie/';\n        mailData.data.support = EMAIL_CONFIG;\n\n        let variableData = {}\n        variableData[mailData.mailTo]= mailData.data\n        console.log(variableData)\n\n        if(Meteor.isDevelopment){\n            mailData.mailTo = 'srikanth681@gmail.com'\n        }\n        \n        let arr = {\n            to: mailData.mailTo,\n            from: EMAIL_CONFIG.name+\" <\"+EMAIL_CONFIG.email+\">\",\n            subject: mailData.subject,\n            html: Assets.getText(\"email/\"+mailData.template+\".html\"),\n            headers:{\n                'X-Mailgun-Recipient-Variables':JSON.stringify(variableData)\n            }\n        }\n        if(mailData.replyTo)arr.replyTo = mailData.replyTo;\n        if(mailData['o:tag'])arr.headers['o:tag'] = mailData['o:tag'];\n        if(Meteor.isDevelopment){\n        //   arr['o:testmode']=true;\n        }\n\n          Email.send(arr);\n    \n          console.log({\n            to: mailData.mailTo,\n            from: EMAIL_CONFIG.name+\" <\"+EMAIL_CONFIG.email+\">\",\n            subject: mailData.subject,\n          })\n          return true;\n    \n    \n    \n    },\n    sendNotificationEmailWithTemplate: function (mailData) {\n    this.unblock();\n    console.log('sendNotificationEmailWithTemplate called')\n\n    // don't send account emails unless email server configured\n    if (!process.env.MAIL_URL) {\n        console.log(\"Mail not configured: suppressing sendNotificationEmail output\");\n        console.log('no MAIL_URL in env vars')\n        return true;\n    }\n    mailData.data.homepage = Meteor.absoluteUrl();\n    if(Meteor.isDevelopment)mailData.data.homepage = 'https://www.spotmycrib.ie/';\n    mailData.data.cdnHomepage = CDN.get_cdn_url()+'/';\n    if(Meteor.isDevelopment)mailData.data.cdnHomepage = 'https://www.spotmycrib.ie/';\n    mailData.data.support = EMAIL_CONFIG;\n    \n    let arr = {\n        to: mailData.mailTo,\n        from: EMAIL_CONFIG.name+\" <\"+EMAIL_CONFIG.email+\">\",\n        subject: mailData.subject,\n        template: mailData.template\n        // ,\n        // headers:{\n        //     // 'X-Mailgun-Recipient-Variables':JSON.stringify(variableData),\n        //     'X-Mailgun-Variables':JSON.stringify(mailData.data)\n        // }\n    }\n    if(mailData.replyTo)arr.replyTo = mailData.replyTo;\n    if(mailData['o:tag'])arr.headers['o:tag'] = mailData['o:tag'];\n    // if(Meteor.isDevelopment){\n    //   arr['o:testmode']=true;\n    // }key-85cc066727dcada64aa3e70b96274e55\n\n    arr = {\n        to: 'srikanth681@gmail.com',\n        from: 'Mailgun Sandbox <postmaster@spotmycrib.com>',\n        subject: 'Hello Naga Srikanth',\n        template: 'propertyalerts'\n        // ,\n        // headers:{\n        //     // 'X-Mailgun-Recipient-Variables':JSON.stringify(variableData),\n        //     'X-Mailgun-Variables':JSON.stringify(mailData.data)\n        // }\n    }\n\n    Email.send(arr);\n\n    console.log(arr)\n    return true;\n    },\n})\n\n\nAccounts.emailTemplates.siteName = EMAIL_CONFIG.companyName;\nAccounts.emailTemplates.from = Meteor.settings.NO_REPLY.name+' <'+Meteor.settings.NO_REPLY.email+'>';\n// Accounts.emailTemplates.enrollAccount.subject = (user) => {\n//     return `Welcome to Awesome Town, ${user.profile.name}`;\n// };\n// Accounts.emailTemplates.enrollAccount.text = (user, url) => {\n//     return 'You have been selected to participate in building a better future!'\n//         + ' To activate your account, simply click the link below:\\n\\n'\n//         + url;\n// };\nAccounts.emailTemplates.resetPassword = {\n    from:function(){\n        return Meteor.settings.NO_REPLY.name+' Password Reset <'+Meteor.settings.NO_REPLY.email+'>';\n    },\n    subject:function(user){\n        return titleCase(user.profile.name)+', here\\'s the link to reset your password';\n    },\n    html:function(user, url){\n        SSR.compileTemplate('email/forgotPassword', Assets.getText('email/forgotPassword.html'));\n        console.log(Meteor.absoluteUrl())\n\n        return SSR.render(\"email/forgotPassword\", {\n            homepage: Meteor.absoluteUrl(),\n            support: EMAIL_CONFIG,\n            user: user,\n            activationLink: url,\n        })\n    }\n}\nAccounts.emailTemplates.verifyEmail = {\n    from:function(){\n        return Meteor.settings.NO_REPLY.name+' <'+Meteor.settings.NO_REPLY.email+'>';\n    },\n    subject:function(){\n        return 'Activate your account now!';\n    },\n    html:function(user, url){\n        SSR.compileTemplate('email/verifyEmail', Assets.getText('email/verifyEmail.html'));\n\n        return SSR.render(\"email/verifyEmail\", {\n            homepage: Meteor.absoluteUrl(),\n            support: EMAIL_CONFIG,\n            user: user,\n            activationLink: url,\n        })\n    }\n}\n// Accounts.emailTemplates.verifyEmail = {\n//     subject() {\n//         return \"Activate your account now!\";\n//     },\n//     text(user, url) {\n//         return `Hey ${user}! Verify your e-mail by following this link: ${url}`;\n//     }\n// };\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}","/**\n * Created by naga on 19/03/2018.\n */\n\nMeteor.methods({\n    importPost:function(url){\n        if(!url)return {};//Empty url\n        var user = Meteor.user()\n        if(!user){\n            console.log('not logged in');\n            return;\n        }\n        // var cheerio = Meteor.npmRequire('cheerio');\n        var cheerio = require('cheerio');\n\n        result = Meteor.http.get(url);\n        $ = cheerio.load(result.content);\n\n        var tmp = '';\n\n        return {};//hiding this code\n    }\n})\n","import {check} from \"meteor/check\";\n// import TokenGen from 'token-gen';\n\nMeteor.methods({\n    addManageProperty: function(propertyId) {\n        check(propertyId, String);\n\n        console.log(\"server method addManageProperty called\")\n\n        console.log(propertyId);\n        const userId = Meteor.userId();\n        console.log(userId)\n\n        if (!userId) {\n            throw new Meteor.Error('not-authorized');\n        }\n        const property = Collections.Properties.findOne({\n            _id: propertyId\n        });\n        if (!property)throw new Meteor.Error('Invalid property');\n\n        var doc = {\n            \"propertyId\" : propertyId,\n            \"rent\" : {\n                \"price\" : 0,\n                \"collectionDayInMonth\" : 1,\n                \"frequency\" : \"monthly\",\n                \"reminderEmail\" : false\n            },\n            \"econtract\" : {\n                \"manualFileUploaded\" : false,\n                \"file\" : {\n                    \"name\" : \"\",\n                    \"relative_url\" : \"\",\n                    \"url\" : \"\"\n                },\n                \"reminderEmail\" : false\n            },\n            \"tenants\" : [],\n            \"prevActivationsCount\" : 0,\n            \"createdAt\":new Date(),\n            \"updatedAt\":new Date()\n        }\n\n\n        var docId = Collections.PropertyManage.insert(doc);\n\n        return docId;\n\n    }\n})\nArray.prototype.pushUnique = function (item){\n    if(this.indexOf(item) == -1) {\n        //if(jQuery.inArray(item, this) == -1) {\n        this.push(item);\n        return true;\n    }\n    return false;\n}\nfunction numDifferentiation(val) {\n    if(val >= 1000000000) val = (val/1000000000).toFixed(2) + ' Billion';\n    else if(val >= 1000000) val = (val/1000000).toFixed(2) + ' Million';\n    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}","// import \"./collections.js\";\nimport {check} from \"meteor/check\";\nimport {Meteor} from \"meteor/meteor\";\n\nfunction numDifferentiation(val) {\n    if(val >= 1000000000) val = (val/1000000000).toFixed(2) + ' Billion';\n    else if(val >= 1000000) val = (val/1000000).toFixed(2) + ' Million';\n    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n\nMeteor.methods({\n  placeBid: function(args){\n      check(args[0], String);\n      check(args[1], Number);\n      check(args[2], String);\n      if(args[3])check(args[3], String);\n      // check(price, Number);\n      var auctionId = args[0];\n      var price = args[1];\n      var bidMessage = args[2];\n      let userIdPassed = false;\n      if(args[3])userIdPassed = args[3];\n      bidMessage = bidMessage.substring(0,500);\n      console.log(\"server method outBid called: \" + auctionId)\n\n      let userId  = '';\n      if(!userIdPassed)userId = Meteor.userId();\n      else userId = userIdPassed;\n      var biduser         = Meteor.users.findOne({_id:userId})\n\n      const auction = Collections.Auctions.findOne(auctionId);\n      const property = Collections.Properties.findOne(auction.propertyId);\n\n      const bid = Collections.Bids.findOne({\n          \"auctionId\": auctionId,\n          \"userId\"   : userId\n      });\n      const emailEnquiry = Collections.EmailEnquiries.findOne({\n          \"auctionId\": auctionId,\n          \"email\"   : biduser.profile.email\n      });\n      if (bid) {\n          throw new Meteor.Error(500, 'Error 500: Bid exists', 'Please wait, there might be network lag.');\n      }\n\n      var bidData = {\n          \"auctionCode\"             : auction.lettingAuctionCode,\n          \"auctionId\"               : auctionId,\n          \"userId\"                  : userId,\n          \"yourBid\"                 : price,\n          \"bidMessage\"              : bidMessage,\n          \"isArchived\"              : false,\n          \"chosen\"                  : false\n      }\n      let bidId = Collections.Bids.insert(bidData);\n      if(bidMessage){\n          Accounts.users.update(userId,{\n              $set: {\n                  \"profile.personalMessage\" :bidMessage\n              }\n          });\n      }\n      if(emailEnquiry){//Enquiry exists, deactivate it as now it converted into an application.\n          Collections.EmailEnquiries.update({_id:emailEnquiry._id},{$set:{isArchived:true,bidId:bidId}})\n      }\n\n\n      const agent = Accounts.users.findOne(property.createdByAgent);\n      if(!agent.profile.totalBidsReceived)agent.profile.totalBidsReceived=0\n      if(!agent.profile.bidsReceivedActiveAuctions)agent.profile.bidsReceivedActiveAuctions=0\n      if(!agent.profile.bidProfitActive)agent.profile.bidProfitActive=0\n      if(!agent.profile.totalBidProfit)agent.profile.totalBidProfit=0\n      agent.profile.totalBidsReceived++;\n      agent.profile.bidsReceivedActiveAuctions++;\n      if(price>auction.price){//Its in profit\n          var profit = price -  auction.price;\n          var oldProfit = auction.auctionBidProfit;\n          if(!oldProfit)oldProfit = 0;\n\n          if(profit > oldProfit){\n              //Update auction with auctionProfit as we hv a new highest profit\n              Collections.Auctions.update(auction._id, {\n                  $set: {\n                      \"auctionBidProfit\": profit\n                  }\n              });\n              agent.profile.bidProfitActive = agent.profile.bidProfitActive + (profit - oldProfit);\n              agent.profile.totalBidProfit = agent.profile.totalBidProfit + (profit - oldProfit);\n          }else{\n              //U already hv highest added to auctionBidProfit and agents bidProfit, so do nothing\n          }\n\n      }\n      Collections.Auctions.update(auction._id, {\n          $inc: {\n              \"bids\": 1\n          }\n      });\n\n\n      Accounts.users.update(agent._id,{\n          $set: {\n              \"profile.totalBidsReceived\" :agent.profile.totalBidsReceived,\n              \"profile.bidsReceivedActiveAuctions\" :agent.profile.bidsReceivedActiveAuctions,\n              \"profile.bidProfitActive\" :agent.profile.bidProfitActive,\n              \"profile.totalBidProfit\" :agent.profile.totalBidProfit,\n          }\n      });\n\n      // Meteor.call('requestEmail',{\n      //     userId: biduser._id,\n      //     requestType: 'reminderUploadReferences',//This is an Ack email for all the emailEnqueries placed by user in a group of 15mns.\n      //     propertyId: property._id\n      // });\n\n      ///////////////////////////MAIL CODE - Bid Successfully Placed\n      property.type = titleCase(property.type);\n      property.address.address = titleCase(property.address.address);\n      property.address.area = titleCase(property.address.area);\n      property.address.county = titleCase(property.address.county);\n      var globalConfig = Collections.Config.findOne();\n      let userFirstName = biduser.profile.name;\n      if(userFirstName){\n          userFirstName = titleCase(userFirstName.split(' ')[0]);\n      }\n      let propertyImage = '';\n      if(property.gallery){\n          if(property.gallery[0])propertyImage = property.gallery[0]\n          propertyImage.titleText = 'Photo 1 of ' + property.address.address + (property.address.area ? \", \" + property.address.area : '') + (property.address.county ? \", \" + property.address.county : '');\n      }\n      var mailData     = {\n          template    : 'applicationPlaced',\n          subject     : \"Application Successfully Placed\",\n          mailTo      : biduser.profile.email,\n          // replyTo      : agent.profile.email,//He just placed the application, don't reveal the email yet, agent needs to start the communication first.\n          //mailTo: 'srikanth681@gmail.com',\n          // homepage    : Meteor.absoluteUrl(),//its done by sendNotificationEmail\n          propertyURL: FlowRouter.url('rent', {\n                          slug: property.slug,\n                          key: auction.lettingAuctionCode\n                      }),\n          application : bidData,\n          auction     : auction,\n          project     : property,\n          user        : biduser,\n          userFirstName      : userFirstName,\n          propertyImage      : propertyImage,\n          agentName        : agent.profile.name,\n          agentEmail        : agent.profile.email,\n          bedsCount   : property.bedrooms.length,\n          offerFormated: numDifferentiation(bidData.yourBid),\n          rentFormated: numDifferentiation(auction.price)\n      };\n      Meteor.call('sendNotificationEmail', mailData);\n      \n      var mailData     = {\n          template    : 'applicationReceived',\n          subject     : \"Application Received\",\n          mailTo      : agent.profile.email,\n          replyTo     : biduser.profile.email,//Agent can reach out to the person directly\n          //mailTo: 'srikanth681@gmail.com',\n          // homepage    : Meteor.absoluteUrl(),//its done by sendNotificationEmail\n          application : bidData,\n          auction     : auction,\n          project     : property,\n          user        : biduser,\n          agent        : agent,\n          bedsCount   : property.bedrooms.length,\n          offerFormated: numDifferentiation(bidData.yourBid),\n          rentFormated: numDifferentiation(auction.price)\n      };\n      Meteor.call('sendNotificationEmail', mailData);\n\n      Meteor.call('addActivityHistory', {propertyId:auction.propertyId,auctionId:auction._id,type:'applicationReceived',userId:biduser._id,name:biduser.profile.name,email:biduser.profile.email,userIdPassed:userIdPassed});\n\n\n      ///////////////////////////MAIL CODE END  - SMS CODE START ////\n\n      var smsText = 'Hi ' + biduser.profile.name + '. We have mailed your bid details and the total price to your registered mail id.';\n      // Meteor.call('sendSMS', [user.profile.mobile, smsText]);\n\n      return {\n          status : 'Success',\n          bidData: bidData\n      }\n\n\n  },\n  getDateFromServer: function (args) {\n    check(args, [Match.Any]);\n    return new Date;\n  },\n  updateViews:function (auctionId) {\n    // console.log(\"updateViews called for: \"+auctionId)\n      Collections.Auctions.update(auctionId,{\n          $inc:{\n              \"views\":1\n          }\n      })\n  },\n  withdrawBid: function(auctionId){\n    console.log('withdrawBid called')\n\n    check(auctionId, String);\n    var userId = Meteor.userId();\n\n    const bid = Collections.Bids.findOne({\n        auctionId: auctionId,\n        userId:userId\n    });\n\n      if (bid) {\n          throw new Meteor.Error(500, 'Error 500: Bid not found');\n      }\n\n    //console.log(userId)\n    //console.log(bidId)\n    Collections.Bids.update({\n      \"_id\": bidId\n    }, {\n      $set: {\n          \"isArchived\": true\n      }\n    });\n\n    return {\n      status: 'success'\n    }\n  },\n  sendInviteForViewingEmail: function(args){\n        // check(args, Match.Any);\n        var bidId = args[0];\n\n        console.log(\"server method sendInviteForViewingEmail called\")\n        console.log(bidId);\n        var bid = Collections.Bids.findOne(bidId,{\n            transform:function (data) {\n                data.user = Accounts.users.findOne( data.userId );\n                data.auction = Collections.Auctions.findOne( {_id:data.auctionId,isArchived:false });\n                data.property = Collections.Properties.findOne( data.auction.propertyId );\n                return data;\n            }\n        });\n\n        if(!bid) throw new Meteor.Error(500, 'Error 500: Invalid application', 'Application not found.');\n        if (bid.isArchived)throw new Meteor.Error('This application is withdrawn by the user. Please choose another application.');\n        if(!bid.user)throw new Meteor.Error(500, 'Error 500: Invalid user', 'User not found.');\n        if(!bid.auction)throw new Meteor.Error(500, 'Error 500: Property not active', 'Active property is needed to send an invite.');\n        if(!bid.property)throw new Meteor.Error(500, 'Error 500: Property not active', 'Active property is needed to send an invite.');//In future we will have concept of archiving the property, so the same keywords like 'property not active' just like auction.\n        var d = new Date(args[1]);\n        if(!d)throw new Meteor.Error(500, 'Error 500: Invalid invite date', 'Please select a valid invite date.');\n\n        var property = bid.property;\n        var auction = bid.auction;\n\n        Collections.Bids.update(bidId,{\n            $set: {\n                invitedDate: new Date()\n            }\n        });\n\n\n        var options = {\n            weekday: \"long\", year: \"numeric\", month: \"short\",\n            day: \"numeric\", hour: \"2-digit\", minute: \"2-digit\"\n        };\n\n        const agent = Meteor.user();\n        //////////// SEND MAIL to winning user\n        property.type = titleCase(property.type);\n        property.address.address = titleCase(property.address.address);\n        property.address.area = titleCase(property.address.area);\n        property.address.county = titleCase(property.address.county);\n        var mailData     = {\n            template    : 'inviteForViewing',\n            subject     : \"Invite for viewing\",\n            mailTo      : bid.user.profile.email,\n            replyTo      : agent.profile.email,\n            inviteDateFormated      : d.toLocaleTimeString(\"en-us\", options),\n            //mailTo: 'srikanth681@gmail.com',\n            homepage    : Meteor.absoluteUrl(),\n            application : bid,\n            auction     : auction,\n            project     : property,\n            user        : bid.user,\n            agent        : Accounts.user(),\n            bedsCount   : property.bedrooms.length,\n            offerFormated: numDifferentiation(bid.yourBid),\n            rentFormated: numDifferentiation(auction.price)\n        };\n        Meteor.call('sendNotificationEmail', mailData);\n\n\n        return {\n            status: 'Success'\n        }\n\n\n    },\n    sendInviteToApplyEmail: function(args){\n        // check(args, Match.Any);\n        var advertisements = args[0];\n        var tenantId = args[1];\n        console.log(\"server method sendInviteToApplyEmail called\")\n\n        var tenant = Meteor.users.findOne(tenantId);\n        if(!tenant)throw new Meteor.Error(500, 'Error 500: Invalid tenant', 'Tenant not found.');\n\n        console.log(advertisements);\n        var results = Collections.Auctions.find({_id : {$in: advertisements}},{\n            fields:{\n                lettingAuctionCode:1,\n                propertyId:1,\n                property:1\n            },\n            transform:function(data){\n                data.property = Collections.Properties.findOne(data.propertyId,{\n                    fields:{\n                        address:1,\n                        createdByAgent:1,\n                        createdAt:1,\n                        updatedAt:1,\n                        isArchived:1,\n                        auctionId:1\n                    }\n                });\n                return data;\n            }\n\n        }).fetch();\n        var advertisementCount = results.length;\n\n        console.log(advertisementCount);\n        if(!advertisementCount){//Nothing found.\n            throw new Meteor.Error(500, 'Error 500: Invalid advertisements', 'Advertisements not found.');\n        }\n\n\n        const agent = Meteor.user();\n        //////////// SEND MAIL to winning user\n        var mailData     = {\n            template    : 'inviteToApply',\n            subject     : \"Invitation to apply for properties\",\n            mailTo      : tenant.profile.email,\n            replyTo      : agent.profile.email,\n            //mailTo: 'srikanth681@gmail.com',\n            homepage    : Meteor.absoluteUrl(),\n            user        : tenant,\n            agent        : Accounts.user(),\n            advertisementCount   : advertisementCount,\n            advertisements   : results\n        };\n        // console.log('results are:');\n        // console.log(results);\n        Meteor.call('sendNotificationEmail', mailData);\n\n\n        return {\n            status: 'Success'\n        }\n\n\n    }\n})","\nimport {check} from \"meteor/check\";\n// import TokenGen from 'token-gen';\n\nMeteor.methods({\n    archiveProperty:function (propertyId) {\n        check(propertyId, String);\n        console.log(\"server method archiveProperty called\")\n\n        console.log(propertyId);\n        const userId = Meteor.userId();\n        console.log(userId)\n\n        if (!userId) throw new Meteor.Error('not-authorized');\n        const property = Collections.Properties.findOne({\n            _id: propertyId\n        });\n\n        if (!property)throw new Meteor.Error('Invalid property');\n\n        if (property.createdByAgent != userId)throw new Meteor.Error('Invalid user');\n        //PROPERTY BELONGS TO THIS AGENT\n\n        if(property.auctionId) {//if it has an active auction\n            Meteor.call('deactivateAuction', property.auctionId, function (error, result) {\n                if (error) {\n                    throw new Meteor.Error(400, \"Deactivation Failed\");\n                }\n\n            });\n        }\n\n        Collections.Properties.update(propertyId, {\n            $set: {\n                \"isArchived\": true\n            }\n        });\n    },\n    editProperty: function(propertyId, data) {\n        console.log(\"common method editProperty called\")\n\n        const userId = Meteor.userId();\n        console.log(userId)\n        if (!userId) throw new Meteor.Error('not-authorized');\n\n        var property = Collections.Properties.findOne(propertyId);\n        if (property.createdByAgent != userId)throw new Meteor.Error('not-authorized');// Its not your property\n\n        var price = getA(data, 'price');\n\n        if(price) {\n            var tmpP = price.split('.');\n            tmpP = tmpP[0]//No decimals\n            price = tmpP.trim().match(/\\d+/g).join('');\n        }\n        if (!price) price = 0;\n\n        // console.log('price is: '+price)\n        // console.log('parsed price is: '+parseInt(price))\n\n        var rentMonthly=parseFloat(price);\n        if(getA(data,'type')=='weekly') rentMonthly = parseFloat((rentMonthly/7)*30) // Month has 30 days\n\n        var doc = {\n            \"address\" : {\n                \"address\" : getA(data,'address.address'),\n                \"county\" : getA(data,'address.county'),\n                \"area\" : getA(data,'address.area'),\n                \"country\" : \"Ireland\"\n            },\n            \"rent\" : parseInt(price),\n            \"rentMonthly\" : rentMonthly,\n            \"type\" : getA(data,'type'),\n            \"baths\" : parseInt(getA(data,'baths')),\n            \"furnished\" : getA(data,'furnished')==\"true\" ? true : false,\n            \"contacts\" : [\n                {\n                    \"name\" : getA(data,'contacts.0.name'),\n                    \"phone\" : getA(data,'contacts.0.phone'),\n                    \"email\" : getA(data,'contacts.0.email')\n                }\n            ],\n            \"about\" : getA(data,'about'),\n            \"amenities\" : getA(data,'amenities'),\n            \"createdByAgent\":userId,\n            \"updatedAt\":new Date()\n        }\n        // {name: \"bedrooms.0.ensuite\", value: \"on\"}\n        // 8\n        // :\n        // {name: \"bedrooms.0.bedType\", value: \"single\"}\n        // \"bedrooms\" : [\n        //     {\n        //         \"bedType\" : \"double\",\n        //         \"ensuite\" : true\n        //     },\n        //     {\n        //         \"bedType\" : \"single\",\n        //         \"ensuite\" : false\n        //     }\n        // ],\n\n        var numBedRoomCount = getA(data,'numBedRoomCount')\n        if( numBedRoomCount ){\n            var bedrooms = [];\n            for(var i=0; i<numBedRoomCount; i++){\n                var bne = \"bedrooms.\"+i+\".ensuite\"\n                var bnt = \"bedrooms.\"+i+\".bedType\"\n                var tmp = {}\n\n                if(getA(data,bne)) tmp.ensuite = true;\n                else tmp.ensuite = false;\n                tmp.bedType = getA(data,bnt);\n\n                bedrooms.push(tmp)\n            }\n            doc['bedrooms'] = bedrooms;\n            doc['bedCount'] = bedrooms.length;\n        }else {\n            doc['bedrooms'] = [];\n            doc['bedCount'] = '1';//default 1\n        }\n\n        // console.log('before');\n        // console.log(doc);\n        // console.log('after');\n\n        // debugger;\n\n        // Collections.Properties.update(propertyId,{\n        //     $set:{\n        //         contacts:[],\n        //         bedrooms:[]\n        //     }\n        // });//commeted due to point: editProperty server method has 2 updates one after another - not needed, below code will replace anyways.\n        Collections.Properties.update(propertyId,{\n            $set:doc\n        });\n\n        ////////ADVERTISE FORM DATA\n        var advertiseFormActive = getA(data,'advertiseFormActive'); if(advertiseFormActive=='yes') {\n            console.log(\"common method editProperty - editAdvertisement section\")\n\n            var lease = getA(data, 'lease')\n            var allowedLease = ['1 month', '2 months', '3 months', '4 months', '5  months', '6 months', '7 months', '8 months', '9 months', '10 months', '11 months', '1 year', 'More than a year'];\n            if (!lease || allowedLease.indexOf(lease) == -1) lease = 'More than a year'\n\n            var rentType = getA(data, 'rentType')\n            var allowedRentType = ['weekly', 'monthly', 'other'];\n            if (!rentType || allowedRentType.indexOf(rentType) == -1) rentType = 'monthly'\n\n            var currency = getA(data, 'currency')\n            var allowedCurrencies = [\"EUR\", \"POUND\", \"USD\"];\n            if (!currency || allowedCurrencies.indexOf(currency) == -1) currency = \"EUR\"\n\n            var readyFrom = getA(data, 'readyFrom')\n            if (!readyFrom) readyFrom = new Date(moment().add(1, 'days').startOf('day'))\n            if (readyFrom < new Date(moment().add(1, 'days').startOf('day'))) readyFrom = new Date(moment().add(1, 'days').startOf('day'))\n\n\n            var adDoc = {\n                \"price\": parseInt(price),\n                \"currency\": currency,\n                \"readyFrom\": readyFrom,\n                \"lease\": lease,\n                \"rentType\": rentType,\n                \"updatedAt\": new Date()\n            }\n\n            if (getA(data, 'advertContacts.0.name') || getA(data, 'advertContacts.0.phone') || getA(data, 'advertContacts.0.email')) {\n                adDoc['contacts'] = [{\n                    \"name\": getA(data, 'advertContacts.0.name'),\n                    \"phone\": getA(data, 'advertContacts.0.phone'),\n                    \"email\": getA(data, 'advertContacts.0.email')\n                }]\n            }\n            Collections.Auctions.update(property.auctionId,{\n                $set:adDoc\n            });\n        }//End of auctions\n\n    },\n    updateGalleries: function(args) {\n        console.log(args);\n        // check(args, [String, [null]]);\n        var propertyId = args[0];\n        var galleries = args[1];\n        console.log(\"server method updateGalleries called\")\n\n        if (!Meteor.userId()) {\n            throw new Meteor.Error('not-authorized');\n        }\n\n        const property = Collections.Properties.findOne({\n            _id: propertyId\n        });\n\n        const userId = Meteor.userId();\n        // console.log(userId)\n        //console.log(bidId)\n\n        if (!property)throw new Meteor.Error('Invalid property');\n\n        if (property.createdByAgent != userId)throw new Meteor.Error('Invalid user');\n        //PROPERTY BELONGS TO THIS AGENT\n        console.log(galleries);\n        Collections.Properties.update(propertyId, {\n            $set: {\n                \"gallery\": galleries\n            }\n        });\n\n        return {\n            status: 'success'\n        }\n\n    },\n    updateGalleriesInUserProfile: function(galleries) {\n        // console.log(galleries);\n        console.log(\"server method updateGalleriesInUserProfile called\")\n\n        const userId = Meteor.userId();\n        if (!userId) throw new Meteor.Error('not-authorized');\n\n\n        // console.log(galleries);\n        Meteor.users.update(userId, {\n            $set: {\n                \"profile.session.addproperty.gallery\": galleries\n            }\n        });\n\n        return {\n            status: 'success'\n        }\n\n    },\n    addAuction: function(auctionId) {\n        check(auctionId, String);\n        console.log(\"server method addAuction called\")\n\n        console.log(auctionId);\n        const userId = Meteor.userId();\n        console.log(userId)\n\n        if (!userId) {\n            throw new Meteor.Error('not-authorized');\n        }\n\n        const auction = Collections.Auctions.findOne(auctionId);\n        if (!auction)throw new Meteor.Error('Invalid auction');\n\n        const property = Collections.Properties.findOne({\n            _id: auction.propertyId\n        });\n\n        if (!property)throw new Meteor.Error('Invalid property');\n\n        // if(property.auctionId)throw new Meteor.Error('Property already has an auction ID');//NOT NEEDED, LET IT REWRITE\n\n        if (property.createdByAgent != userId)throw new Meteor.Error('Invalid user');\n        //PROPERTY BELONGS TO THIS AGENT\n\n        var rentMonthly=parseFloat(auction.price);\n        if(auction.rentType=='weekly') rentMonthly = parseFloat((rentMonthly/7)*30) // Month has 30 days\n\n        Collections.Properties.update(auction.propertyId, {\n            $set: {\n                \"auctionId\": auction._id,\n                \"rent\": parseInt(auction.price),\n                \"rentMonthly\":rentMonthly\n            }\n        });\n\n        // var TokenGen = require('token-gen');\n        // var auctionCode = TokenGen();\n        // console.log(auctionCode);\n        // auctionCode = auctionCode.toString()\n        // console.log(auctionCode);\n        //\n        // Collections.Auctions.update(auctionId, {\n        //     $set: {\n        //         \"lettingAuctionCode\": auctionCode\n        //     }\n        // });\n\n        const user = Meteor.user();\n        if(!user.profile.activeAuctions)user.profile.activeAuctions=0\n        if(!user.profile.totalAuctions)user.profile.totalAuctions=0\n        user.profile.activeAuctions++;\n        user.profile.totalAuctions++;\n\n\n        Meteor.users.update(userId,{\n            $set: {\n                \"profile.activeAuctions\" :user.profile.activeAuctions,\n                \"profile.totalAuctions\" :user.profile.totalAuctions\n            }\n        });\n\n        Meteor.call('addActivityHistory', {propertyId:auction.propertyId,auctionId:auction._id,type:'prop_activation',activated:true});\n\n\n        return {\n            status: 'success'\n        }\n\n    },\n    addAdvertisement: function(data,pid) {\n        // check(auctionId, String);\n        console.log(\"server method addAdvertisement called\")\n\n        const userId = Meteor.userId();\n        console.log(userId)\n\n        if (!userId) {\n            throw new Meteor.Error('not-authorized');\n        }\n\n        var propertyId = getA(data,'propertyId');\n        if(!propertyId && pid)propertyId = pid;\n        if(!propertyId){throw  new Meteor.Error('Invalid property ID key. Aborting.');return;}\n\n        const property = Collections.Properties.findOne({\n            _id: propertyId\n        });\n\n        if (!property)throw new Meteor.Error('Invalid property');\n\n        if (property.createdByAgent != userId)throw new Meteor.Error('Invalid user');\n        //PROPERTY BELONGS TO THIS AGENT\n\n\n        var price = getA(data,'price');\n\n        if(price) {\n            var tmpP = price.split('.');\n            tmpP = tmpP[0]//No decimals\n            price = tmpP.trim().match(/\\d+/g).join('');\n        }\n        if(!price)price=0;\n\n        var lease = getA(data,'lease')\n        var allowedLease = ['1 month', '2 months', '3 months', '4 months', '5  months', '6 months', '7 months', '8 months', '9 months', '10 months', '11 months', '1 year', 'More than a year'];\n        if(!lease || allowedLease.indexOf(lease) == -1 ) lease= 'More than a year'\n\n        var rentType = getA(data,'rentType')\n        var allowedRentType = ['weekly', 'monthly', 'other'];\n        if(!rentType || allowedRentType.indexOf(rentType) == -1 ) rentType= 'monthly'\n\n        var currency = getA(data,'currency')\n        var allowedCurrencies = [\"EUR\", \"POUND\", \"USD\"];\n        if(!currency || allowedCurrencies.indexOf(currency) == -1 ) currency= \"EUR\"\n\n        var readyFrom = getA(data,'readyFrom')\n        if(!readyFrom) readyFrom= new Date(moment().add(1, 'days').startOf('day'))\n        if(readyFrom<new Date(moment().add(1, 'days').startOf('day'))) readyFrom= new Date(moment().add(1, 'days').startOf('day'))\n\n        var rentMonthly=parseFloat(price);\n        if(rentType=='weekly') rentMonthly = parseFloat((rentMonthly/7)*30) // Month has 30 days\n\n        var doc = {\n            \"propertyId\" : propertyId,\n            \"price\" : parseInt(price),\n            \"rentMonthly\" : rentMonthly,\n            \"createdByAgent\" : userId,\n            \"isArchived\" : false,\n            \"auctionBidProfit\" : 0,\n            \"currency\" : currency,\n            \"readyFrom\" : readyFrom,\n            \"lease\" : lease,\n            \"rentType\" : rentType,\n            \"views\" : 0,\n            \"bids\" : 0,\n            \"enquiryCount\" : 0,\n            \"createdByAgent\":userId,\n            \"createdAt\":new Date(),\n            \"updatedAt\":new Date()\n        }\n\n        if(getA(data,'contacts.0.name') || getA(data,'contacts.0.phone') || getA(data,'contacts.0.email')){\n            doc['contacts'] = [{\n                \"name\" : getA(data,'contacts.0.name'),\n                \"phone\" : getA(data,'contacts.0.phone'),\n                \"email\" : getA(data,'contacts.0.email')\n            }]\n        }\n\n\n        import TokenGen from 'token-gen';\n        var auctionCode = TokenGen();\n        var key = auctionCode.toString();\n        var auc = Collections.Auctions.findOne({\"lettingAuctionCode\" : key})\n        var i=0;\n        while(auc){// it should be undefined, else loop\n            auctionCode = TokenGen();\n            key = auctionCode.toString();\n            auc = Collections.Auctions.findOne({\"lettingAuctionCode\" : key})\n            if(1>10000){throw  new Meteor.Error('Couldnt generate property key. Aborting.');return;}\n            i++;\n        }\n\n        if(auctionCode){\n            doc['lettingAuctionCode'] = key;\n        }\n\n        // console.log(doc);\n        var auctionId = Collections.Auctions.insert(doc);\n// return 'as';\n        // const auction = Collections.Auctions.findOne(auctionId);\n        const auction = doc;\n\n        Collections.Properties.update(propertyId, {\n            $set: {\n                \"auctionId\": auctionId,\n                \"rent\": parseInt(price),\n                \"rentMonthly\": rentMonthly,\n            }\n        });\n\n\n        const user = Meteor.user();\n        if(!user.profile.activeAuctions)user.profile.activeAuctions=0\n        if(!user.profile.totalAuctions)user.profile.totalAuctions=0\n        user.profile.activeAuctions++;\n        user.profile.totalAuctions++;\n\n\n        Meteor.users.update(userId,{\n            $set: {\n                \"profile.activeAuctions\" :user.profile.activeAuctions,\n                \"profile.totalAuctions\" :user.profile.totalAuctions\n            }\n        });\n\n        Meteor.call('addActivityHistory', {propertyId:auction.propertyId,auctionId:auction._id,type:'prop_activation',activated:true});\n\n        var sub = 'Property added: '+user.profile.name;\n        var desc = `\nProperty ID: `+auction.propertyId+`<br/>\nProperty Key: `+auction.lettingAuctionCode+`<br/>\nProperty Link: <a href=\"https://www.spotmycrib.ie/letting/`+auction.lettingAuctionCode+`\">Link</a><br/>\nProperty Link New: <a href=\"https://www.spotmycrib.ie/rent/`+property.slug+'/'+auction.lettingAuctionCode+`\">Link New</a><br/>\n`\n        Meteor.call('notifyAdmin', sub, desc);\n\n\n        return auctionId;\n\n    },\n    chooseWinning: function (args) {\n        auctionId = args[0]\n        bidId = args[1]\n        check(auctionId, String);\n        check(bidId, String);\n        console.log(\"server method chooseWinning called\")\n\n        const agent = Meteor.user();\n        // console.log(agent._id);\n\n        if (!agent._id)throw new Meteor.Error('not-authorized');\n\n\n        const auction = Collections.Auctions.findOne(auctionId);\n        if (!auction)throw new Meteor.Error('Invalid auction');\n\n        const bid = Collections.Bids.findOne(bidId,{\n            transform: function(doc) {\n                doc.user = Meteor.users.findOne(doc.userId);\n                return doc;\n            }\n        });\n        if (!bid)throw new Meteor.Error('Invalid bid');\n        if (bid.isArchived)throw new Meteor.Error('This application is withdrawn by the user. Please choose another application.');\n\n        const user = bid.user;\n        if (!user._id)throw new Meteor.Error('User not found');\n\n        const property = Collections.Properties.findOne({\n            _id: auction.propertyId\n        });\n        if (!property)throw new Meteor.Error('Invalid property');\n\n        if (property.createdByAgent != agent._id)throw new Meteor.Error('Invalid user');\n        //PROPERTY BELONGS TO THIS AGENT CHECK\n\n\n        ///////DONE WITH ALL THE CHECKS\n        var chosenBids = []; var formattedBid = {} ;\n        if(auction.chosenBids){\n            chosenBids = auction.chosenBids;\n            for(var a=0;a<auction.chosenBids.length;a++){\n                if(auction.chosenBids[a].bidId == bid._id ){throw new Meteor.Error('This application is already chosen');}//Already in chosen\n            }\n        }\n        formattedBid = {bidId : bid._id , chosenOn: new Date()}\n        chosenBids.unshift(formattedBid);\n\n        console.log('chosenBids');\n        console.log(chosenBids);\n        Collections.Auctions.update(auction._id,{\n            $set:{\n                chosenBids: chosenBids\n            }\n        })\n\n        Collections.Bids.update(bid._id,{\n            $set:{\n                chosen: true\n            }\n        })\n\n\n        //////////// CODE TO COPY ALL REFERENCES\n        var bids = Collections.Bids.find({auctionId:auction._id,isArchived:false},{\n            transform: function(doc) {\n                doc.user = Meteor.users.findOne(doc.userId);\n                return doc;\n            },\n        }).fetch();\n        for(var i=0;i<bids.length;i++){//Everytime you click on choose, this field gets refreshed.\n            Collections.Bids.update(bids[i]._id,{\n                $set:{\n                    references: bids[i].user.profile.references,\n                    // isArchived: true//Bid archive is used for bid deletion, so don't archive\n                }\n            })\n        }\n        //////////// SEND MAIL to winning user\n        property.type = titleCase(property.type);\n        property.address.address = titleCase(property.address.address);\n        property.address.area = titleCase(property.address.area);\n        property.address.county = titleCase(property.address.county);\n        var mailData     = {\n            template    : 'applicationWon',\n            subject     : \"Application Won\",\n            mailTo      : bid.user.profile.email,\n            replyTo      : agent.profile.email,\n            //mailTo: 'srikanth681@gmail.com',\n            homepage    : Meteor.absoluteUrl(),\n            application : bid,\n            auction     : auction,\n            project     : property,\n            user        : user,\n            agentName        : agent.profile.name,\n            agentEmail        : agent.profile.email,\n            bedsCount   : property.bedrooms.length,\n            offerFormated: numDifferentiation(bid.yourBid),\n            rentFormated: numDifferentiation(auction.price)\n        };\n        Meteor.call('sendNotificationEmail', mailData);\n\n\n\n        // Meteor.call('deactivateAuction', auctionId);\n\n    },\n    unChooseWinning: function (args) {\n        auctionId = args[0]\n        bidId = args[1]\n        check(auctionId, String);\n        check(bidId, String);\n        console.log(\"server method unChooseWinning called\")\n\n        const agent = Meteor.user();\n        // console.log(agent._id);\n\n        if (!agent._id)throw new Meteor.Error('not-authorized');\n\n\n        const auction = Collections.Auctions.findOne(auctionId);\n        if (!auction)throw new Meteor.Error('Invalid auction');\n\n        const bid = Collections.Bids.findOne(bidId,{\n            transform: function(doc) {\n                doc.user = Meteor.users.findOne(doc.userId);\n                return doc;\n            }\n        });\n        if (!bid)throw new Meteor.Error('Invalid bid');\n        if (bid.isArchived)throw new Meteor.Error('This application is withdrawn by the user. Please choose another application.');\n\n        const user = bid.user;\n        if (!user._id)throw new Meteor.Error('User not found');\n\n        const property = Collections.Properties.findOne({\n            _id: auction.propertyId\n        });\n        if (!property)throw new Meteor.Error('Invalid property');\n\n        if (property.createdByAgent != agent._id)throw new Meteor.Error('Invalid user');\n        //PROPERTY BELONGS TO THIS AGENT CHECK\n\n\n        ///////DONE WITH ALL THE CHECKS\n        var chosenBids = []; var formattedBid = {} ;\n        if(!auction.chosenBids)throw new Meteor.Error('You need to chose an application first.');\n        if(!auction.chosenBids.length)throw new Meteor.Error('You need to chose an application first.');\n\n        chosenBids = auction.chosenBids;\n        var found = false;\n        for(var a=0;a<chosenBids.length;a++){\n            if(chosenBids[a].bidId == bid._id ){found=true;chosenBids.splice(a,1);}//Already in chosen\n        }\n        if(!found)throw new Meteor.Error('You need to chose an application first.');\n\n        // console.log('chosenBids');\n        // console.log(chosenBids);\n        Collections.Auctions.update(auction._id,{\n            $set:{\n                chosenBids: chosenBids\n            }\n        })\n\n        Collections.Bids.update(bid._id,{\n            $set:{\n                chosen: false\n            }\n        })\n\n\n        //////////// CODE TO COPY ALL REFERENCES\n        var bids = Collections.Bids.find({auctionId:auction._id,isArchived:false},{\n            transform: function(doc) {\n                doc.user = Meteor.users.findOne(doc.userId);\n                return doc;\n            },\n        }).fetch();\n        for(var i=0;i<bids.length;i++){//Everytime you click on choose, this field gets refreshed.\n            Collections.Bids.update(bids[i]._id,{\n                $set:{\n                    references: bids[i].user.profile.references,\n                    // isArchived: true//Bid archive is used for bid deletion, so don't archive\n                }\n            })\n        }\n        //////////// SEND MAIL to winning user\n        property.type = titleCase(property.type);\n        property.address.address = titleCase(property.address.address);\n        property.address.area = titleCase(property.address.area);\n        property.address.county = titleCase(property.address.county);\n        var mailData     = {\n            template    : 'applicationPending',\n            subject     : \"Application Pending\",\n            mailTo      : bid.user.profile.email,\n            replyTo      : agent.profile.email,\n            //mailTo: 'srikanth681@gmail.com',\n            homepage    : Meteor.absoluteUrl(),\n            application : bid,\n            auction     : auction,\n            project     : property,\n            user        : user,\n            agentName        : agent.profile.name,\n            agentEmail        : agent.profile.email,\n            bedsCount   : property.bedrooms.length,\n            offerFormated: numDifferentiation(bid.yourBid),\n            rentFormated: numDifferentiation(auction.price)\n        };\n        Meteor.call('sendNotificationEmail', mailData);\n\n\n\n        // Meteor.call('deactivateAuction', auctionId);\n\n    },\n    markChosen: function (args) {\n        bidId = args[0]\n        check(bidId, String);\n        console.log(\"server method markChosen called\")\n\n        const agent = Meteor.user();\n        // console.log(agent._id);\n\n        if (!agent._id)throw new Meteor.Error('not-authorized');\n\n        const bid = Collections.Bids.findOne(bidId,{\n            transform: function(doc) {\n                doc.auction = Collections.Auctions.findOne(doc.auctionId);\n                return doc;\n            }\n        });\n        if (!bid)throw new Meteor.Error('Invalid bid');\n        if (bid.isArchived)throw new Meteor.Error('This application is withdrawn by the user. Please choose another application.');\n        var auction = bid.auction;\n\n        if (!bid.auction)throw new Meteor.Error('Invalid auction');\n\n        if (bid.auction.createdByAgent != agent._id)throw new Meteor.Error('Invalid property owner. '); //PROPERTY BELONGS TO THIS AGENT CHECK\n\n        Collections.Bids.update(bidId,{\n            $set:{\n                chosen: false\n            }\n        })\n    },\n    unMarkChosen: function (args) {\n        bidId = args[0]\n        check(bidId, String);\n        console.log(\"server method unMarkChosen called\")\n\n        const agent = Meteor.user();\n        // console.log(agent._id);\n\n        if (!agent._id)throw new Meteor.Error('not-authorized');\n\n        const bid = Collections.Bids.findOne(bidId,{\n            transform: function(doc) {\n                doc.auction = Collections.Auctions.findOne(doc.auctionId);\n                return doc;\n            }\n        });\n        if (!bid)throw new Meteor.Error('Invalid bid');\n        if (bid.isArchived)throw new Meteor.Error('This application is withdrawn by the user. Please choose another application.');\n        var auction = bid.auction;\n\n        if (!bid.auction)throw new Meteor.Error('Invalid auction');\n\n        if (bid.auction.createdByAgent != agent._id)throw new Meteor.Error('Invalid property owner. '); //PROPERTY BELONGS TO THIS AGENT CHECK\n\n        Collections.Bids.update(bidId,{\n            $set:{\n                chosen: false\n            }\n        })\n    },\n    deactivateAuction: function(auctionId) {\n        check(auctionId, String);\n        console.log(\"server method deactivateAuction called\")\n\n        console.log(auctionId);\n        const userId = Meteor.userId();\n        console.log(userId)\n\n        if (!userId) {\n            throw new Meteor.Error('not-authorized');\n        }\n\n        const auction = Collections.Auctions.findOne(auctionId);\n        if (!auction)throw new Meteor.Error('Invalid auction');\n\n        const property = Collections.Properties.findOne({\n            _id: auction.propertyId\n        });\n        if (!property)throw new Meteor.Error('Invalid property');\n\n        if (property.createdByAgent != userId)throw new Meteor.Error('Invalid user');\n        //PROPERTY BELONGS TO THIS AGENT\n\n        var auctionHistory = property.auctionHistory;\n        if(!auctionHistory)auctionHistory = [];\n\n        auctionHistory.push({\n            auctionId:property.auctionId,\n            deactivatedOn: new Date()\n        })\n        Collections.Properties.update(auction.propertyId, {\n            $set: {\n                \"auctionId\": \"\",\n                \"rent\": \"\",\n                \"auctionHistory\":auctionHistory\n            }\n        });\n        Collections.Auctions.update(auction._id, {\n            $set: {\n                \"isArchived\": true,\n                \"endDate\":new Date()\n            }\n        });\n\n        var bidCount = Collections.Bids.find({auctionId:auction._id}).count();\n\n        if(bidCount){//Non zero\n            Collections.Bids.update({auctionId:auction._id}, {\n                $set: {\n                    \"isArchived\": true,\n                    \"endDate\":new Date()\n                }\n            });\n        }\n\n        const user = Meteor.user();\n\n\n\n\n        if(!auction.auctionBidProfit)auction.auctionBidProfit=0\n        if(!user.profile.bidProfitActive)user.profile.bidProfitActive=0\n        if(!user.profile.activeAuctions)user.profile.activeAuctions=0\n        if(!user.profile.bidsReceivedActiveAuctions)user.profile.bidsReceivedActiveAuctions=0\n        user.profile.activeAuctions--;\n        user.profile.bidsReceivedActiveAuctions-=bidCount;\n        user.profile.bidProfitActive -= auction.auctionBidProfit;\n\n        if(user.profile.activeAuctions<0)user.profile.activeAuctions=0\n        if(user.profile.bidsReceivedActiveAuctions<0)user.profile.bidsReceivedActiveAuctions=0\n        if(user.profile.bidProfitActive<0)user.profile.bidProfitActive=0\n        Meteor.users.update(userId,{\n            $set: {\n                \"profile.activeAuctions\" :user.profile.activeAuctions,\n                \"profile.bidsReceivedActiveAuctions\" :user.profile.bidsReceivedActiveAuctions,\n                \"profile.bidProfitActive\" :user.profile.bidProfitActive,\n            }\n        });\n\n        Meteor.call('addActivityHistory', {propertyId:auction.propertyId,auctionId:auction._id,type:'prop_deactivation',activated:false});\n\n        return {\n            status: 'success'\n        }\n\n    },\n    deactivateAuctionMulti: function(propIds) {\n        // check(auctionId, String);\n        console.log(\"server method deactivateAuctionMulti called\")\n\n        let propId = '', successCount = 0, deactivatedProps = [];\n        for(let i=0;i<propIds.length;i++){\n            propId = propIds[i];\n            console.log('propId is: '+propId);\n            const auction = Collections.Auctions.findOne({propertyId:propId,isArchived:false});//Dont get already archived props\n            if (!auction)continue;\n\n            const property = Collections.Properties.findOne(propId);\n            if (!property)continue;\n\n            var auctionHistory = property.auctionHistory;\n            if(!auctionHistory)auctionHistory = [];\n\n            auctionHistory.push({\n                auctionId:property.auctionId,\n                deactivatedOn: new Date()\n            })\n            console.log('auctionHistory done '+auction._id);\n            Collections.Properties.update(auction.propertyId, {\n                $set: {\n                    \"auctionId\": \"\",\n                    \"rent\": \"\",\n                    \"auctionHistory\":auctionHistory\n                }\n            });\n            console.log('Properties update done '+auction.propertyId);\n            \n            Collections.Auctions.update(auction._id, {\n                $set: {\n                    \"isArchived\": true,\n                    \"endDate\":new Date()\n                }\n            });\n\n            var bidCount = Collections.Bids.find({auctionId:auction._id}).count();\n            if(bidCount){//Non zero\n                Collections.Bids.update({auctionId:auction._id}, {\n                    $set: {\n                        \"isArchived\": true,\n                        \"endDate\":new Date()\n                    }\n                });\n            }\n            console.log('bidCount done '+bidCount);\n\n            const userId = property.createdByAgent;\n            const user = Meteor.users.findOne({_id:userId});\n\n\n            if(!auction.auctionBidProfit)auction.auctionBidProfit=0\n            if(user){ // in Dev with all users deleted, below code would fail, so adding this if condition. \n                if(!user.profile.bidProfitActive)user.profile.bidProfitActive=0\n                if(!user.profile.activeAuctions)user.profile.activeAuctions=0\n                if(!user.profile.bidsReceivedActiveAuctions)user.profile.bidsReceivedActiveAuctions=0\n                user.profile.activeAuctions--;\n                user.profile.bidsReceivedActiveAuctions-=bidCount;\n                user.profile.bidProfitActive -= auction.auctionBidProfit;\n    \n                if(user.profile.activeAuctions<0)user.profile.activeAuctions=0\n                if(user.profile.bidsReceivedActiveAuctions<0)user.profile.bidsReceivedActiveAuctions=0\n                if(user.profile.bidProfitActive<0)user.profile.bidProfitActive=0\n                Meteor.users.update(userId,{\n                    $set: {\n                        \"profile.activeAuctions\" :user.profile.activeAuctions,\n                        \"profile.bidsReceivedActiveAuctions\" :user.profile.bidsReceivedActiveAuctions,\n                        \"profile.bidProfitActive\" :user.profile.bidProfitActive,\n                    }\n                });\n            }\n\n            data = {propertyId:auction.propertyId,auctionId:auction._id,type:'prop_deactivation',activated:false,createdAt : new Date()}\n            \n            Collections.ActivityHistory.insert(data);\n            successCount++;\n            deactivatedProps.push({slug:property.slug,lettingAuctionCode:auction.lettingAuctionCode, address:property.address.address +', '+property.address.county+', '+property.address.area})\n        }\n\n        if(successCount>0){\n            var sub = 'Multi Auctions Deactivated'\n            let tableHtml = '',deactivatedProp={};\n            for(i=0;i<deactivatedProps.length;i++){\n                deactivatedProp = deactivatedProps[i];\n                tableHtml += `<tr>\n                <td>`+deactivatedProps[i].address+`</td>\n                <td><a href=\"https://www.spotmycrib.ie/rent/`+deactivatedProps[i].slug+`/`+deactivatedProps[i].lettingAuctionCode+`\">Link1</a></td>\n                <td><a href=\"https://www.spotmycrib.ie/letting/`+deactivatedProps[i].lettingAuctionCode+`\">Link2</a></td>\n                </tr>`;\n            }\n            var desc = `\n\n    Deactivate Count: `+successCount+`<br/><br/>\n\n    <table>\n    `+tableHtml+`\n    </table>\n    `\n            Meteor.call('notifyAdmin', sub, desc);\n        } \n\n        return {\n            status: 'success'\n        }\n\n    }\n})\nArray.prototype.pushUnique = function (item){\n    if(this.indexOf(item) == -1) {\n        //if(jQuery.inArray(item, this) == -1) {\n        this.push(item);\n        return true;\n    }\n    return false;\n}\nfunction numDifferentiation(val) {\n    if(val >= 1000000000) val = (val/1000000000).toFixed(2) + ' Billion';\n    else if(val >= 1000000) val = (val/1000000).toFixed(2) + ' Million';\n    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction getA(arr,find){\n    if(!Array.isArray(arr))return;\n    var eles = [];\n    for(var i=0;i<arr.length;i++){\n        if(arr[i]['name']==find)eles.push(arr[i]['value'])\n    }\n    if(find=='amenities')return eles;\n    if(eles.lenght>1)return eles;\n    if(eles.lenght==0)return false;\n    return eles[0];\n}\n","/**\n * Created by srikanth681 on 29/02/16.\n */\nimport emailProcessors from './functions.js'\n\n// SyncedCron.add({\n//   name    : 'CORN-E1',\n//   schedule: function(parser) {\n//     return parser.text('every 1 mins');\n//   },\n//   job     : function() {\n//     console.log('CORN-E1 executing ')\n//     deactivateProps();\n    \n//     return true;\n//   }\n// });\n// SyncedCron.add({\n//   name    : 'CORN-E1',\n//   schedule: function(parser) {\n//     return parser.text('every 3 mins');\n//   },\n//   job     : function() {\n//     console.log('CORN-E1 executing ')\n//     emailProcessors.dailyPropAlerts()\n//     return true;\n//   }\n// });\nSyncedCron.add({\n  name    : 'CORN-E15',\n  schedule: function(parser) {\n    return parser.text('every 15 mins');\n  },\n  job     : function() {\n    console.log('CORN-E15 executing ')\n\n    emailProcessors.emailEnquiryReceived()\n    if(!Meteor.Development){\n      // importBlogs();//Disabling as migration to new wordpress has changed the import json format, so the old code doesnt work anymore. \n    }\n\n    return true;\n  }\n});\nSyncedCron.add({\n  name    : 'CORN-E1D',\n  schedule: function(parser) {\n    return parser.text('every 1 day');\n  },\n  job     : function() {\n    console.log('CORN-E1D executing ')\n    // emailProcessors.reminderUploadReferences()\n    deactivateProps();\n    return true;\n  }\n});\nMeteor.startup(function () {\n  // deactivateProps();  \n  if(!process.env.MAIL_URL)console.log('Env URL is empty : ' + process.env.MAIL_URL)\n  if(!process.env.MAIL_URL)process.env.MAIL_URL = 'smtp://dev%40spotmycrib.ie:b399dbc946d2ef90dac4a1c3414d31dc-1d8af1f4-9c3055ea@smtp.mailgun.org:587';\n})\n\nSyncedCron.start();\n\n\n\n\n// SyncedCron.add({\n//   name: 'Auctions are completed. Send mails to users who won aucitons.',\n//     schedule: function(parser) {//12 am of everyday\n//     // parser is a later.parse object\n//     //return parser.text('every 2 hours');\n//     //var gloablConfig = ReactionCore.Collections.Config.findOne()\n//     //return parser.recur().on(parseInt(gloablConfig.auctionEndDay)+1).month();\n//     return parser.text('at 12:00am every day');\n//   },\n//   job: function() {\n//     // sendAuctionWonMails();\n//     processRefunds();\n//     return true;\n//   }\n// });","import {check} from \"meteor/check\";\n\n\nMeteor.methods({\n    subscribeToEmailAlert(email){\n        console.log('in subscribeToEmailAlert: '+email)\n        this.unblock();\n        let validatedEmail = emailValidation(email);\n        if(validatedEmail !== true){\n            throw new Meteor.Error(400, 'Invalid email, please enter a valid email address.');\n        }\n        let ele = Collections.propertyAlerts.findOne({'email':email})// You can make this email field unique index and save 1 mongodb query here, but its async anyway, so ignoring\n        if(ele){\n            //ignore; you alredy have it subscribed ;\n        }else{\n            Collections.propertyAlerts.insert({'email':email})\n        }\n        if(this.userId){\n            Meteor.users.update({\n                \"_id\": this.userId\n            }, {\n                $set: {\n                    \"profile.emailAlertsActive\": true\n                }\n            });\n        }\n        return true;\n    },\n    emailAlertsNoThanks(){\n        console.log('in emailAlertsNoThanks')\n        this.unblock();\n        if(this.userId){\n            Meteor.users.update({\n                \"_id\": this.userId\n            }, {\n                $set: {\n                    \"profile.emailAlertsNoThanks\": true\n                }\n            });\n        }\n        return true;\n    }\n})\n\nfunction emailValidation(email) {\n\n    email = email.trim();\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    // Valid\n    if( re.test(email) ){\n        return true;\n    }\n\n    // Invalid\n    return {\n        error: \"INVALID_EMAIL\",\n        reason: \"Please enter a valid email address in format pat@gmail.com\",\n    };\n\n}","/**\n * Created by srikanth681 on 29/02/16.\n */\nfunction cleanText(str){\n    if(!str)return str;\n    str = str.toString().trim();\n    str = str.replace('http://blog.spotmycrib.com','http://www.spotmycrib.ie/blog');\n    str = str.replace('www.spotmycrib.com','www.spotmycrib.ie');\n    str = str.replace(/(^,)|(,$)/g, \"\") //\",liger, unicorn, snipe,\" will remove first and last comma\n    return str\n}\nfunction titleCase(str) {\n  if(!str)return;\n  return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nfunction decodeHTMLEntities(text) {\n    var entities = [\n        ['amp', '&'],\n        ['apos', '\\''],\n        ['#x27', '\\''],\n        ['#x2F', '/'],\n        ['#39', '\\''],\n        ['#47', '/'],\n        ['lt', '<'],\n        ['gt', '>'],\n        ['nbsp', ' '], ['raquo', ''],\n        ['quot', '\"']\n    ];\n\n    if(text)\n    for (var i = 0, max = entities.length; i < max; ++i)\n        text = text.replace(new RegExp('&'+entities[i][0]+';', 'g'), entities[i][1]);\n\n    return text;\n}\nfunction stripHTML(str){\n    return str.replace(/<\\/?[^>]+(>|$)/g, \"\");\n}\nfunction numDifferentiation(val) {\n    if(val >= 1000000000) val = (val/1000000000).toFixed(2) + ' Billion';\n    else if(val >= 1000000) val = (val/1000000).toFixed(2) + ' Million';\n    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\nfunction onlyUnique(value, index, self) {\n    return self.indexOf(value) === index;\n}\nfunction chunkify(a, n, balanced) {\n\n  if (n < 2)\n      return [a];\n\n  if(!Array.isArray(a))return [];\n\n  var len = a.length,\n      out = [],\n      i = 0,\n      size;\n\n  if (len % n === 0) {\n      size = Math.floor(len / n);\n      while (i < len) {\n          out.push(a.slice(i, i += size));\n      }\n  }\n\n  else if (balanced) {\n      while (i < len) {\n          size = Math.ceil((len - i) / n--);\n          out.push(a.slice(i, i += size));\n      }\n  }\n\n  else {\n\n      n--;\n      size = Math.floor(len / n);\n      if (len % size === 0)\n          size--;\n      while (i < size * n) {\n          out.push(a.slice(i, i += size));\n      }\n      out.push(a.slice(size * n));\n\n  }\n\n  return out;\n}\nfunction chunkifyObj(a, n, balanced){\n  let ret = chunkify(a, n, balanced);\n  if(ret.length > 1){\n    let newRet = [], tmp;\n    // New Format is\n    // [\n    //   {props: [prop1, prop2, prop3]},\n    //   {props: [prop1, prop2, prop3]}\n    // ]\n    for(let i=0;i<ret.length;i++){\n      console.log(ret[i]);\n      tmp = {};\n      tmp = {props: ret[i] };\n      newRet.push(tmp);\n    }\n    ret = newRet;\n  }\n  return ret;\n}\n// todo: \n// Create indexes for emailEnquiries and emailRequests\nvar emailProcessors = {\n  emailEnquiryReceived : function(){\n    /*\n    Assumptions and requirements\n    - There can be only emailRequest / user / property\n    - There can be multiple emailRequests / user but diff properties\n    - There should be only one email send for 1 user - by this method - with a max cut of of 4 props per email\n    - One email can contain props belonging to multiple agents - there is no agent specific grouping - to reduce the number of testing scenarios and the logic simple.\n    */\n    let list = Collections.EmailRequests.find({isArchived:false, requestType: \"emailEnquiryReceived\"},{\n      transform: function(data){\n        data.property = Collections.Properties.findOne({_id:data.propertyId});\n        data.property.address.address = cleanText(data.property.address.address)\n        data.property.address.area = cleanText(data.property.address.area)\n        data.property.address.county = cleanText(data.property.address.county)\n          let altText = '';\n          data.property.sliderImages = []\n          if(data.property.gallery){\n              for(var i=0;i<data.property.gallery.length;i++){\n                  altText = 'Photo '+(i+1)+' of '+titleCase(data.property.address.address)\n                  if (data.property.address.area) altText +=', '+titleCase(data.property.address.area)\n                  if (data.property.address.county) altText +=', '+titleCase(data.property.address.county)\n\n                  data.property.sliderImages.push({url:data.property.gallery[i].url,altText:altText})\n              }\n          }\n          data.property.desktopHideClassName = \"desktop_hide\";\n          if(data.property.sliderImages.length==0)data.property.desktopHideClassName = \"\";\n\n        data.emailEnquiry = Collections.EmailEnquiries.findOne({_id:data.emailEnquiryId});\n        data.propertyImage = null;\n        if(data.property.gallery){\n          if(data.property.gallery[0])data.property.propertyImage = data.property.gallery[0]\n        }\n\n        data.property.bedsCount = data.property.bedrooms.length;\n        data.auction = Collections.Auctions.findOne({_id:data.property.auctionId});\n        if(data.auction)//// Added to handle recoreds with no actions, we can directly archive this records. \n        data.auction.rentFormated = numDifferentiation(data.auction.price);\n        //ToDo: What if property is deactivated in the meanwhile and property.auctionId is empty, then this will throw an error.\n\n        if(data.property)\n            data.agent = Meteor.users.findOne({_id:data.property.createdByAgent});\n        else console.log('no property found for: '+data.propertyId)\n        return data;\n      },\n      sort:{createdAt:-1}\n    }).fetch();\n    if(list.length==0)return;\n    console.log('total requests found: '+list.length)\n    if(!list.length) return true;\n    let userEmailList = [], maxPropertiesPerEmail = 4, i, j, k, a, req = {}, listOfInvalidReqsToArchive = [], listOfReqsToArchive = [], listOfReqsToArchiveTmp = [], user={}, emailReq = {}, tmp = {}, userFirstName='', agentName ='', address='', subject = '', globalConfig = Collections.Config.findOne();\n    for(i=0;i<list.length;i++){\n      req = list[i];\n      listOfReqsToArchiveTmp = []\n      try{\n        if(!req.auction || !req.agent){\n          //Auction not found. \n          console.log('Auction or Agent not found for propId: '+req.property._id)\n          listOfInvalidReqsToArchive.push(req._id);\n          continue;\n        }\n        console.log('Auction found for propId: '+req.property._id)\n        if(listOfReqsToArchive.indexOf(req._id)!=-1){// already processed\n          //duplicate request ; this user already has a fully composed object in emailReqList;\n          continue;\n        }\n        //Now compose a new object that has a list of all emailRequests by this user for all properties\n        emailReq.userEmail = req.userEmail;\n        emailReq.fullname = req.fullname;\n        emailReq.property = req.property;\n        emailReq.auction = req.auction;\n        emailReq.agent = req.agent;\n        ///////Easiest way - but too many DB queries\n        // emailReq.emailRequests = Collections.EmailRequests.find({isArchived:false, status:\"new\",requestType: \"emailEnquiryReceived\", userEmail: req.userEmail},{sort:{createdAt:-1}}).fetch();\n        ///////Efficient way \n        emailReq.emailRequests = []\n        emailReq.landlordNames = []\n        emailReq.propertyKeys = []\n\n        k=0;//This represents the number of sub child props per email.\n        for(j=0;j<list.length;j++){\n          tmp = list[j];\n          if(k >= maxPropertiesPerEmail) break;\n          if(tmp.userEmail == emailReq.userEmail){//of same user, so add it to the list\n            if(k==0){tmp.isFirstProperty=true}else tmp.isFirstProperty=false\n            emailReq.emailRequests.push(tmp);\n            k++;// increment this only of child is added via - emailReq.emailRequests.push\n\n            listOfReqsToArchiveTmp.push(tmp._id);\n            emailReq.landlordNames.push(tmp.agent.profile.name)\n            emailReq.propertyKeys.push(tmp.auction.lettingAuctionCode)\n          }else{continue;}\n        }\n        // emailReqList.push(emailReq);\n        /// END OF loop; now emailReqList is a processed version of \"list\" ; it has a list of users and sub list of all their emailRequests of type emailEnquiryReceived\n        if(!emailReq.emailRequests.length) {// it should be at least 1\n          console.log('No sub requests found. completely ignore this user request');//Code should never come here, its only kept as precaution\n          continue;\n        }\n        ///////////////////////////MAIL CODE - \n        address = titleCase(emailReq.property.address.address);\n        if (emailReq.property.address.area) address +=', '+titleCase(emailReq.property.address.area)\n        if (emailReq.property.address.county) address +=', '+titleCase(emailReq.property.address.county)\n        subject = 'Your enquiry for '+address;\n        a = emailReq.landlordNames;\n        a = a.filter( onlyUnique );//Only unique\n        agentNames = [a.slice(0, -1).join(', '), a.slice(-1)[0]].join(a.length < 2 ? '' : ' and ')\n        userFirstName = emailReq.fullname;\n        if(userFirstName){\n          userFirstName = titleCase(userFirstName.split(' ')[0]);\n        }\n\n        user = {\n            \"profile\":{\n                name:emailReq.fullname,\n                email:emailReq.userEmail,\n                userFirstName:userFirstName\n            }\n        }\n        var mailData     = {\n            template    : 'emailEnquiryReceived',\n            subject     : subject,\n            mailTo      : emailReq.userEmail,\n            replyTo      : emailReq.agent.profile.email,//He just placed the application, don't reveal the email yet, agent needs to start the communication first.\n            //mailTo: 'srikanth681@gmail.com',\n            homepage    : Meteor.absoluteUrl(),\n            firstProperty: emailReq.property,\n            firstAuction: emailReq.auction,\n            emailEnquiries     : emailReq.emailRequests,\n            enquiryCount     : emailReq.emailRequests.length,\n            isSingleEnquiry     : emailReq.emailRequests.length > 1 ? false : true,\n            propertyKeys     : emailReq.propertyKeys.join('-'),\n            // propertyUrl:FlowRouter.url('rent', { slug: emailReq.property.slug, key: emailReq.auction.lettingAuctionCode }),\n            user        : user,//Email requests only exists for users who doesn't exist in SMC. if the user exists, then a bid is placed.\n            agentNames        : agentNames\n        };\n        Meteor.call('sendNotificationEmail', mailData,true);\n        listOfReqsToArchive = listOfReqsToArchive.concat(listOfReqsToArchiveTmp)//At the end because everything should be successful, i.e without going into cache block for it to be archived.\n      }catch(e){\n        console.log('In catch of emailEnquiryReceived email processor')\n        console.log(e);\n      }\n  }\n    if(listOfReqsToArchive.length){\n      Collections.EmailRequests.update({_id : {$in:listOfReqsToArchive} },{$set: {isArchived:true,status:\"completed\"} }, {multi:true});\n    }\n    console.log('total requests completed: '+listOfReqsToArchive.length)\n    if(listOfInvalidReqsToArchive.length){\n      Collections.EmailRequests.update({_id : {$in:listOfInvalidReqsToArchive} },{$set: {isArchived:true,status:\"invalid\"} }, {multi:true});\n      console.log('total invalid requests archived: '+listOfInvalidReqsToArchive.length)\n    }\n\n  },\n  dailyPropAlerts : function(){\n    /*\n    Assumptions and requirements\n    - There should be only one email send for 1 user - by this method - with a max cut of of 20 props per email\n    - One email can contain props belonging to multiple agents - there is no agent specific grouping - to reduce the number of testing scenarios and the logic simple.\n    - There is County wise grouping to make it simple to navigate and scroll\n    */\n    let maxPropertiesPerEmail = 20, today = new Date(), yesterday = new Date();\n    today.setHours(11,59,59,999);\n    yesterday.setDate(today.getDate() - 1);\n    yesterday.setHours(12,0,0,0);\n    // , \"createdAt\": { $lte: today, $gte: yesterday }\n    let list = Collections.Auctions.find({isArchived:false },{\n      transform: function(data){\n        data.property = Collections.Properties.findOne({_id:data.propertyId});\n        data.property.address.address = cleanText(data.property.address.address)\n        data.property.address.area = cleanText(data.property.address.area)\n        data.property.address.county = cleanText(data.property.address.county)\n        data.property.bedsCount = data.property.bedrooms.length;\n        data.rentFormated = numDifferentiation(data.property.rentMonthly);\n        // data.user = Meteor.users.findOne({_id:data.userId});//this userId is same as the createdByAgent\n\n        if(data.property)\n            data.agent = Meteor.users.findOne({_id:data.property.createdByAgent});\n        else console.log('no property found for: '+data.propertyId)\n        return data;\n      },\n      sort:{createdAt:-1},\n      limit:maxPropertiesPerEmail\n    }).fetch();\n    console.log('total requests found: '+list.length)\n    // if(!list.length) return true;\n\n    let i=0, j, k, req = {}, uniqueCounties = [],tmp = {}, tmp2=[], propertyData = [], propTitle, propBedNBath//, tmpPropData = {}\n    \n    // {\n    //   userFirstName:\"Adam\",\n    //   counties : [\n    //             {\n    //               countyName: 'Dublin',\n    //               propLines: [\n    //                 {\n    //                   props : [\n    //                     {propTitle : \"\",propType:\"House\",propBedNBath:\"3 Beds, 2 Baths\",propRent:\"1,750\" },\n    //                     {propAddress},\n    //                     {propAddress},\n    //                   ]\n    //                 }\n    //               ]\n    //             }\n    //           ]\n    // }\n    // propertyData.userFirstName = '';\n    // propertyData.numOfProps=list.length;\n    // propertyData.counties = [];\n\n    /// Create a list of all unique counties\n    for(j=0;j<list.length;j++){\n      tmp = list[j].property.address.county;\n      if(uniqueCounties.indexOf(tmp)== -1)uniqueCounties.push(tmp)//push if its not already found.\n    }\n    // propertyData.countiesList = uniqueCounties;\n    \n    /// Create a list of all props group by county\n    tmp = '';\n    for(k=0;k<uniqueCounties.length;k++){\n      tmp = uniqueCounties[k];\n      tmp2 = [];\n      for(j=0;j<list.length;j++){\n        propTitle = '',bedsCount=0;\n        if(list[j].property.address.county != tmp)continue;\n\n        propTitle = titleCase(list[j].property.address.address);\n        if (list[j].property.address.area) propTitle +=', '+titleCase(list[j].property.address.area)\n        if (list[j].property.address.county) propTitle +=', '+titleCase(list[j].property.address.county)\n        console.log(propTitle);\n        console.log(list[j].property.address.address);\n        console.log(list[j].property.address);\n        propBedNBath = []\n        if(bedsCount) propBedNBath.push(bedsCount+' Beds');\n        if(list[j].property.baths) propBedNBath.push(list[j].property.baths+' Baths');\n        propBedNBath = propBedNBath.join(', ')\n\n        tmp2.push( {\n          propTitle: propTitle,\n          propType: titleCase(list[j].property.type),\n          propBedNBath: propBedNBath,\n          propRent: list[j].rentFormated,\n          propLink: FlowRouter.url('rent', { slug: list[j].property.slug, key: list[j].lettingAuctionCode }),\n        });\n      }\n      propertyData.push({countyName: tmp, propLinesDesktop:chunkifyObj(tmp2,3,true), propLinesMobile:chunkifyObj(tmp2,2,true) })\n      // break;//Temporary measure\n    }\n    console.log('Showing final array')\n    console.log(propertyData);\n    // return;\n    // END\n\n    /// Get list of all users who needs email and send them those\n\n\n    // TODO: \n    // remove the additional anchor tag on the template for propTitle \n    // Add campaign information to all links\n    // Use MailGun template instead of PropertyAlerts.html\n\n    // let user = {name: }\n    // userFirstName = user.name;\n    // if(userFirstName){\n    //   userFirstName = titleCase(userFirstName.split(' ')[0]);\n    // }\n    let countyGroupInfo = '';\n    // They are grouped into Dublin, Galway, Limrick, Cork and Others.\n    if(uniqueCounties.length > 4) countyGroupInfo = uniqueCounties.slice(0, 3).join(', ')+' and others';\n    if(uniqueCounties.length >= 2 && uniqueCounties.length <= 4) countyGroupInfo = uniqueCounties.slice(0, -1).join(', ')+' and '+uniqueCounties.slice(-1);\n    // No need for a logic if there is only 1 \n    countyGroupInfo = 'They are grouped into '+countyGroupInfo+'.';\n    if(uniqueCounties.length <= 1)countyGroupInfo = '';\n    console.log(uniqueCounties)\n    console.log('They are grouped into '+countyGroupInfo+'.')\n\n    var mailData     = {\n      template    : 'propertyalerts',\n      subject     : 'Daily Property Alerts',\n      mailTo: 'srikanth681@gmail.com',\n      data:{\n        countyGroupInfo     : countyGroupInfo,\n        propertyData     : propertyData\n      },\n      \"X-Mailgun-Variables\" :{}\n    };\n    console.log(\"Final maildata\");\n    console.log(mailData);\n    // return;\n    Meteor.call('sendNotificationEmailWithTemplate', mailData);\n    \n\n\n    // console.log('total requests completed: '+listOfReqsToArchive.length)\n\n  },\n    reminderUploadReferences : function(){\n      /*\n      Assumptions and requirements\n      - There can be only emailRequest / user / property\n      - There can be multiple emailRequests / user but diff properties\n      - There should be only one email send for 1 user - by this method - with a max cut of of 4 props per email\n      - One email can contain props belonging to multiple agents - there is no agent specific grouping - to reduce the number of testing scenarios and the logic simple.\n      */\n      let today = new Date();\n          today.setHours(0,0,0,0);\n      let list = Collections.EmailRequests.find({isArchived:false, requestType: \"reminderUploadReferences\", \"createdAt\": { $lte: today } },{\n        transform: function(data){\n          data.property = Collections.Properties.findOne({_id:data.propertyId});\n          data.property.address.address = cleanText(data.property.address.address)\n          data.property.address.area = cleanText(data.property.address.area)\n          data.property.address.county = cleanText(data.property.address.county)\n          data.auction = Collections.Auctions.findOne({_id:data.property.auctionId});\n          // data.auction.rentFormated = numDifferentiation(data.auction.price);\n          data.user = Meteor.users.findOne({_id:data.userId});\n\n          if(data.property)\n              data.agent = Meteor.users.findOne({_id:data.property.createdByAgent});\n          else console.log('no property found for: '+data.propertyId)\n          return data;\n        },\n        sort:{createdAt:-1}\n      }).fetch();\n      if(list.length==0)return;\n      console.log('total requests found: '+list.length)\n      if(!list.length) return true;\n      let userEmailList = [], maxPropertiesPerEmail = 50, i, j, k, a, req = {}, listOfReqsToArchive = [], listOfReqsToArchiveTmp = [], user={}, emailReq = {}, tmp = {}, userFirstName='', agentName ='', address='', subject = '', missingReferences = [], globalConfig = Collections.Config.findOne();\n      for(i=0;i<list.length;i++){\n        req = list[i];\n        listOfReqsToArchiveTmp = []\n        try{\n\n          if(listOfReqsToArchive.indexOf(req._id)!=-1){// already processed\n            //duplicate request ; this user already has a fully composed object in emailReqList;\n            continue;\n          }\n          //Now compose a new object that has a list of all emailRequests by this user for all properties\n          emailReq.user = req.user;\n          emailReq.property = req.property;\n          // emailReq.auction = req.auction;\n          emailReq.agent = req.agent;\n          ///////Easiest way - but too many DB queries\n          // emailReq.emailRequests = Collections.EmailRequests.find({isArchived:false, status:\"new\",requestType: \"reminderUploadReferences\", userEmail: req.userEmail},{sort:{createdAt:-1}}).fetch();\n          ///////Efficient way\n          emailReq.emailRequests = []\n\n          k=0;//This represents the number of sub child props per email.\n          for(j=0;j<list.length;j++){\n            tmp = list[j];\n            if(k >= maxPropertiesPerEmail) break;\n            if(tmp.user.email == emailReq.user.email){//of same user, so add it to the list\n              emailReq.emailRequests.push(tmp);\n              k++;// increment this only of child is added via - emailReq.emailRequests.push\n\n              listOfReqsToArchiveTmp.push(tmp._id);\n            }else{continue;}\n          }\n          // emailReqList.push(emailReq);\n          /// END OF loop; now emailReqList is a processed version of \"list\" ; it has a list of users and sub list of all their emailRequests of type reminderUploadReferences\n          if(!emailReq.emailRequests.length) {// it should be at least 1\n            console.log('No sub requests found. completely ignore this user request');//Code should never come here, its only kept as precaution\n            continue;\n          }\n          ///////////////////////////MAIL CODE -\n          address = titleCase(emailReq.property.address.address);\n          if (emailReq.property.address.area) address +=', '+titleCase(emailReq.property.address.area)\n          if (emailReq.property.address.county) address +=', '+titleCase(emailReq.property.address.county)\n          subject = 'Your enquiry for '+address;\n\n          userFirstName = emailReq.user.name;\n          if(userFirstName){\n            userFirstName = titleCase(userFirstName.split(' ')[0]);\n          }\n\n          missingReferences = [];\n          if(emailReq.user)\n            if(emailReq.user.profile)\n                if(emailReq.user.profile.references) {\n                    // if (!user.profile.references.hasResume) refListArr.push(\"Resume\");//Why do you need it?\n                    if (!emailReq.user.profile.references.hasLandlordRef) missingReferences.push(\"Landlord reference\");\n                    if (!emailReq.user.profile.references.employerName) missingReferences.push(\"Employer name\");\n                    if (!emailReq.user.profile.references.hasWorkRef) missingReferences.push(\"Work reference\");\n                    if (!emailReq.user.profile.references.hasFinancialRef) missingReferences.push(\"Financial reference\");\n                    if (!emailReq.user.profile.references.hasGovtID) missingReferences.push(\"Government ID\");\n                    if (!emailReq.user.profile.references.hasPassport) missingReferences.push(\"Passport\");\n                    if (!emailReq.user.profile.references.hasPPS) missingReferences.push(\"PPS\");\n                    try{\n                        if(emailReq.user.profile.references.hasResume && emailReq.user.profile.references.hasLandlordRef && emailReq.user.profile.references.hasGovtID && emailReq.user.profile.references.hasWorkRef )hasAllReqReferences = true;\n                    }catch(e){console.log(e)}\n                }\n\n          var mailData     = {\n              template    : 'reminderUploadReferences',\n              subject     : subject,\n              mailTo      : emailReq.user.email,\n              replyTo      : emailReq.agent.profile.email,//He just placed the application, don't reveal the email yet, agent needs to start the communication first.\n              //mailTo: 'srikanth681@gmail.com',\n              homepage    : Meteor.absoluteUrl(),\n              firstPropAddress     : address,\n              missingReferences     : missingReferences,\n              bidCount     : emailReq.emailRequests.length,\n              isSingleEnquiry     : emailReq.emailRequests.length > 1 ? false : true,\n              propertyUrl:FlowRouter.url('rent', { slug: emailReq.property.slug, key: emailReq.auction.lettingAuctionCode }),\n              user        : emailReq.user,//Email requests only exists for users who doesn't exist in SMC. if the user exists, then a bid is placed.\n\n          };\n          Meteor.call('sendNotificationEmail', mailData,true);\n          listOfReqsToArchive = listOfReqsToArchive.concat(listOfReqsToArchiveTmp)//At the end because everything should be successful, i.e without going into cache block for it to be archived.\n        }catch(e){\n          console.log('In catch of reminderUploadReferences email processor')\n          console.log(e);\n        }\n      }\n      Collections.EmailRequests.update({_id : {$in:listOfReqsToArchive} },{$set: {isArchived:true,status:\"completed\"} }, {multi:true});\n      console.log('total requests completed: '+listOfReqsToArchive.length)\n\n    },\n}\nexport default emailProcessors;\n\nimportBlogs = function(){\n    let url = 'http://blog.spotmycrib.com/wp-json/wp/v2/posts?status=publish&orderby=modified&per_page=10';\n    // let url = 'https://public-api.wordpress.com/rest/v1.1/sites/spotmycribblog.wordpress.com/posts/?status=publish&orderby=modified&per_page=10';\n    // https://developer.wordpress.com/docs/api/1.1/get/sites/%24site/posts/\n    try{result = Meteor.http.get(url);}catch(c){\n        console.log('Failed to fetch blogs. In cache.'); return;\n    }\n    let blog = {}, isUpdating = false, insertedListLinks = [], updatedListLink = []\n    let newBlog = {}, newBlogRelated = {}\n    let fromDB = {}  , date1 =0 , date2 = 0, insertNewCount = 0, updateCount=0, tmp='';\n    if(result.statusCode !=200){console.log('Failed to fetch blogs. Status code: '+result.statusCode); return;}\n    result = JSON.parse(result.content);\n    for(let i=0;i<result.length;i++){\n        blog = result[i];\n        fromDB = {}\n        fromDB = Collections.Blogs.findOne({wpId:blog.id});\n        if(fromDB){//Blog exists in DB.\n            if(fromDB.isArchived) continue;//Skip this blog.\n            if(fromDB.modified == blog.modified) continue;//Skip this blog.\n            // else there is a mismatch ; overwrite the DB with imported blog.\n            updateCount++;\n            console.log('Updating blog: '+blog.title.rendered)\n            isUpdating = true;\n        }else{//Blog doesn'' exist ; insert new\n            insertNewCount++;\n            console.log('Inserting blog: '+blog.title.rendered)\n        }\n\n        //////////// LOGIC TO GATHER REQUIRED FIELDS START\n        let imgHTML = '', srcImg = '', content = cleanText(blog.content.rendered);\n\n        try {\n            tmp = content.split('src=\"')\n            if (tmp.length > 1) {\n                console.log('Image found');\n                srcImage = tmp[1].split('?resize=')[0];\n                imgHTML = '<img class=\"img-responsive\" src=\"' + srcImage + '\"/><p>';\n                tmp = content.split('/>')[1];\n                if(tmp)content = imgHTML + tmp;\n            }\n        }catch(e){\n            console.log('Failed to extract image');\n            content = cleanText(blog.content.rendered);//Reset\n        }\n\n        newBlog['wpId'] = blog.id;\n        newBlog['created'] = blog.date;\n        newBlog['modified'] = blog.modified;\n        newBlog['slug'] = blog.slug;\n        newBlog['link'] = blog.link;\n        newBlog['title'] = cleanText(blog.title.rendered);\n        newBlog['metaTitle'] = stripHTML(decodeHTMLEntities(newBlog['title']));\n        newBlog['content'] = content;\n        newBlog['excerpt'] = cleanText(blog.excerpt.rendered);\n\n        let metaDesc = decodeHTMLEntities(newBlog['excerpt']);\n        metaDesc = stripHTML(metaDesc);\n        metaDesc = metaDesc.replace('Read More','');\n\n        newBlog['metaDesc'] = metaDesc;\n        newBlog['sticky'] = blog.sticky;\n        newBlog['categories'] = blog.categories;\n        newBlog['image'] = blog.jetpack_featured_media_url;\n        newBlog['related'] = []\n        newBlog['isArchived'] = false\n\n        for(let j=0;j<blog['jetpack-related-posts'].length;j++){\n            newBlogRelated = {}\n            newBlogRelated['wpId'] = blog['jetpack-related-posts'][j].id;\n            newBlogRelated['link'] = blog['jetpack-related-posts'][j].url;\n            // tmp = blog['jetpack-related-posts'][j].url.split('/');\n            newBlogRelated['slug'] = blog['jetpack-related-posts'][j].url.split('/')[3];\n            newBlogRelated['title'] = blog['jetpack-related-posts'][j].title;\n            newBlogRelated['date'] = blog['jetpack-related-posts'][j].date;\n            newBlogRelated['excerpt'] = cleanText(blog['jetpack-related-posts'][j].excerpt);\n            newBlogRelated['context'] = blog['jetpack-related-posts'][j].context;\n            newBlogRelated['image'] = blog['jetpack-related-posts'][j].img;\n            newBlog.related.push(newBlogRelated)\n        }\n        //////////// LOGIC TO GATHER REQUIRED FIELDS END\n        if(isUpdating){\n            Collections.Blogs.update({_id:fromDB._id},newBlog);\n            updatedListLink.push('<a href=\"http://spotmycrib.ie/blog/'+newBlog.slug+'/\" >'+newBlog.title+'</a>')\n        }else{\n            Collections.Blogs.insert(newBlog);\n            insertedListLinks.push('<a href=\"http://spotmycrib.ie/blog/'+newBlog.slug+'/\" >'+newBlog.title+'</a>')\n        }\n\n\n    }\n\n    if(updateCount>0 || insertNewCount>0){\n        var sub = 'Blogs Imported'\n        var desc = `\nInserted Count: `+insertNewCount+`<br/>\nUpdated Count: `+updateCount+`<br/>\nInserted List: `+insertedListLinks.join('<br/>')+`<br/>\nUpdated List: `+updatedListLink.join('<br/>')+`<br/>\n`\n        Meteor.call('notifyAdmin', sub, desc);\n    }else{\n        console.log('No blogs inserted or updated. ');\n    }\n\n}\n\n\n\ndeactivateProps = function(){\n\n  let date2daysbefore = new Date(new Date().setDate(new Date().getDate()-2));\n  let props = Collections.Properties.find(\n      {\n        'importData.url':{$gt:''},\n        'auctionId':{$gt:''},//Only get props that have an active auction. \n        'importData.lastCheckedDate':{$lt:date2daysbefore}  \n      }, // Query for Studio 3T { 'importData.lastCheckedDate':{$lt: ISODate(\"2019-04-07T11:49:11.546+0000\") }, 'importData.url':{$gt:''}, 'auctionId':{$gt:''} }\n      {fields:{importData:1,auctionId:1} }   \n    ).fetch();\n    let url = '',updateCount=0,propsToDeactivate = [],propsCheckedIds = [];\n    \n    console.log('deactivateProps len: '+props.length)\n    // console.log(props.length);\n    for(let i=0;i<props.length;i++){\n      url = props[i].importData.url;\n      // url = 'https://www.spotmycrib.com/';\n      //console.log('Working on: '+url)\n      // Meteor.http.FollowRedirects = false; // useless as its not working\n      // Meteor.http.followAllRedirects = false; // useless as its not working\n      const request = require('request');\n\n      try{result = Meteor.http.get(url);}catch(c){\n        console.log('Failed to get prop url: '); continue;\n      }\n      propsCheckedIds.push(props[i]._id) //if the url check on the above line worked then do this\n      //if(result.statusCode !=200 ){\n      if(result.content.indexOf('- Daft.ie</title>')!=-1){//Only search page has a title ending with \"- Daft.ie</title>\"\n        console.log('prop to deactivate: '+url); \n        propsToDeactivate.push(props[i]._id)\n        //Meteor.call('deactivateAuction',props[i].auctionId)\n        updateCount++;\n      }\n    }\n    if(propsToDeactivate.length) Meteor.call('deactivateAuctionMulti',propsToDeactivate)\n    if(propsCheckedIds.length) Collections.Properties.update({_id:{$in:propsCheckedIds}},{$set:{'importData.lastCheckedDate':new Date()}},{multi:true})\n    \n    if(updateCount==0){\n        console.log('No props deactivated. ');\n    }\n\n}\n/*\n// date1 = New Date(fromDB.modified)\n            // date2 = New Date(blog.modified)\n            // if(date1 > date2){\n            //     blog is updated\n            // }else\n{\n    \"id\": 275,\n    \"date\": \"2018-02-06T02:25:37\",\n    \"date_gmt\": \"2018-02-06T02:25:37\",\n    \"guid\": {\n      \"rendered\": \"http://blog.spotmycrib.com/?p=275\"\n    },\n    \"modified\": \"2018-11-24T13:16:30\",\n    \"modified_gmt\": \"2018-11-24T13:16:30\",\n    \"slug\": \"irish-renting-will-higher-result-tech-establishments-docklands\",\n    \"status\": \"publish\",\n    \"type\": \"post\",\n    \"link\": \"http://blog.spotmycrib.com/irish-renting-will-higher-result-tech-establishments-docklands/\",\n    \"title\": {\n      \"rendered\": \"Irish renting will be higher as a result of tech establishments in Docklands\"\n    },\n    \"content\": {\n      \"rendered\": \"<p><img data-attachment-id=\\\"276\\\" data-permalink=\\\"http://blog.spotmycrib.com/irish-renting-will-higher-result-tech-establishments-docklands/irish-renting/\\\" data-orig-file=\\\"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?fit=622%2C350\\\" data-orig-size=\\\"622,350\\\" data-comments-opened=\\\"1\\\" data-image-meta=\\\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\\\" data-image-title=\\\"irish renting\\\" data-image-description=\\\"&lt;p&gt;irish renting&lt;/p&gt;\\n\\\" data-medium-file=\\\"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?fit=300%2C169\\\" data-large-file=\\\"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?fit=622%2C350\\\" class=\\\"aligncenter size-full wp-image-276\\\" src=\\\"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?resize=622%2C350\\\" alt=\\\"irish renting\\\" width=\\\"622\\\" height=\\\"350\\\" srcset=\\\"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?w=622 622w, https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?resize=300%2C169 300w\\\" sizes=\\\"(max-width: 622px) 100vw, 622px\\\" data-recalc-dims=\\\"1\\\" /></p>\\n<p>Dockland is one of the vibrant places for enterprises in the city of Dublin. The place is known to be the home to most of tech workers who pay around €2,226 per month for a two bed room property. As compared to Irish renting, the rent in Silicon Docks is higher for its establishments. Where the average rent is €1,473 in Dublin, the average capped rent in this place is €1,988. Basically tech workers buy <a href=\\\"http://www.spotmycrib.com\\\">properties</a> in this place and the landlords are Irish. They prefer to buy two bed room apartments and for rent tech workers prefer to share this two bedroom property. Due to rising demand for the rental property, rent increased by 10.8 per cent in 2017. The dwellers in the Dock area are mostly Europeans. Where around 63 per cent are Europeans, 22 per cent are non-Europeans.</p>\\n<p>The rental sector and buying of houses in this area are mostly acquired by European and British nationals working with a number of international companies engaged in technical sector.  The estate agents report that 92 per cent of tenants are non- Irish tech workers. The Irish renting witnesses an increase due to the dwelling of non-Irish tech population. The engagement of tech professionals in <a href=\\\"http://www.spotmycrib.com\\\">large companies</a> such as Google, facebook, LinkedIn and Twitter is one of the reasons for rising the Irish renting. The tech professionals prefer living nearer to their office and they offer higher price for eliminating traveling.</p>\\n<p>The data from the Docklands Residential Report for the year 2018 says that the Irish renting has been decreasing and non-Irish tenants are increasing. Within three years, the population of Irish tenants has been diminished from 35 per cent to 15 per cent. This is another reason why the Irish renting is soaring in this area. Most of the tech workers are German, French, Spanish and Scandinavians. These people who have been working in the tech companies for more than five years have bought houses in this area. They prefer to buy two bed room houses in this area. So, the price of the two bed apartments has also increased from €355,000 to €400,000 in a year.</p>\\n<p>In Dublin 2, the price has increased by 12 per cent in 2017 where in Dublin 4, the price of properties has increased by 7 per cent. Dublin 4 is also mostly referred by the tech workers. More price hike is expected towards the end of 2018 due to the buying of houses in these areas. Again, Irish landlords are getting more interested to buy property in these areas due to higher return on investment. They will be getting higher rent in Dublin 2 and Dublin 4 regions. For getting a higher Irish renting, the landlords are purchasing houses in these regions.</p>\\n<p>One of the increasing Irish renting is the establishment of enterprises and coming of large companies. One cannot avoid establishing the larger establishments so the Irish renting. As far as the tech world will be active in the docklands, the Irish renting will be higher. Visit <a href=\\\"http://www.spotmycrib.com\\\">www.spotmycrib.com</a> and know more about Irish renting.</p>\\n<p>&nbsp;</p>\\n\",\n      \"protected\": false\n    },\n    \"excerpt\": {\n      \"rendered\": \"<p>Dockland is one of the vibrant places for enterprises in the city of Dublin. The place is known to be the home to most of tech workers who pay around €2,226 per month for a two bed room property. As compared to Irish renting, the rent in Silicon Docks is higher for its establishments. Where… <span class=\\\"read-more\\\"><a href=\\\"http://blog.spotmycrib.com/irish-renting-will-higher-result-tech-establishments-docklands/\\\">Read More &raquo;</a></span></p>\\n\",\n      \"protected\": false\n    },\n    \"author\": 2,\n    \"featured_media\": 276,\n    \"comment_status\": \"open\",\n    \"ping_status\": \"open\",\n    \"sticky\": false,\n    \"template\": \"\",\n    \"format\": \"standard\",\n    \"meta\": [],\n    \"categories\": [\n      1\n    ],\n    \"tags\": [],\n    \"jetpack_featured_media_url\": \"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/irish-renting.jpeg?fit=622%2C350\",\n    \"jetpack-related-posts\": [\n      {\n        \"id\": 243,\n        \"url\": \"http://blog.spotmycrib.com/price-property-rent-dublin-increase-25-percent-2018/\",\n        \"url_meta\": {\n          \"origin\": 275,\n          \"position\": 0\n        },\n        \"title\": \"The price of property to rent in Dublin is going to increase by 25 percent by the end of 2018\",\n        \"date\": \"January 26, 2018\",\n        \"format\": false,\n        \"excerpt\": \"According to The Irish Times, the rent is going to increase further in the year 2018.  While the government is planning to bring down the price of property to rent in Dublin, the assessment shows a different figure. The economic factors which are not under the control of government are…\",\n        \"rel\": \"nofollow\",\n        \"context\": \"In \\\"General\\\"\",\n        \"img\": {\n          \"src\": \"https://i2.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/01/prioperty-to-rent-in-dublin.jpeg?fit=466%2C350&resize=350%2C200\",\n          \"width\": 350,\n          \"height\": 200\n        },\n        \"classes\": []\n      },\n      {\n        \"id\": 285,\n        \"url\": \"http://blog.spotmycrib.com/rental-cap-able-control-housing-market-crisis/\",\n        \"url_meta\": {\n          \"origin\": 275,\n          \"position\": 1\n        },\n        \"title\": \"Is Rental Cap Able to Control the Housing Market Crisis?\",\n        \"date\": \"February 19, 2018\",\n        \"format\": false,\n        \"excerpt\": \"Rental cap introduced by the Irish government is becoming an issue for the rental sector. The government issued the rental cap for capturing the price hike. The increasing rent of the properties in Dublin and cork region forced the government to set rental caps. The landlords were barred from increasing…\",\n        \"rel\": \"nofollow\",\n        \"context\": \"In \\\"General\\\"\",\n        \"img\": {\n          \"src\": \"https://i2.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/02/rental-capp-in-rent-pressure-zone.jpeg?fit=523%2C350&resize=350%2C200\",\n          \"width\": 350,\n          \"height\": 200\n        },\n        \"classes\": []\n      },\n      {\n        \"id\": 174,\n        \"url\": \"http://blog.spotmycrib.com/building-more-houses-rent-dublin-affecting-rent/\",\n        \"url_meta\": {\n          \"origin\": 275,\n          \"position\": 2\n        },\n        \"title\": \"Is Building More Houses for rent in Dublin is affecting rent?\",\n        \"date\": \"January 2, 2018\",\n        \"format\": false,\n        \"excerpt\": \"Most of us may think that building more houses for rent in Dublin and nearby areas can mitigate the issues related to the housing crisis. It is impossible to predict that to what extent it can reduce the rental crisis. There has been a lot of discussion on this issue…\",\n        \"rel\": \"nofollow\",\n        \"context\": \"In \\\"General\\\"\",\n        \"img\": {\n          \"src\": \"https://i0.wp.com/blog.spotmycrib.com/wp-content/uploads/2018/01/rent-in-Dublin.jpeg?fit=525%2C350&resize=350%2C200\",\n          \"width\": 350,\n          \"height\": 200\n        },\n        \"classes\": []\n      }\n    ],\n    \"_links\": {\n      \"self\": [\n        {\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/posts/275\"\n        }\n      ],\n      \"collection\": [\n        {\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/posts\"\n        }\n      ],\n      \"about\": [\n        {\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/types/post\"\n        }\n      ],\n      \"author\": [\n        {\n          \"embeddable\": true,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/users/2\"\n        }\n      ],\n      \"replies\": [\n        {\n          \"embeddable\": true,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/comments?post=275\"\n        }\n      ],\n      \"version-history\": [\n        {\n          \"count\": 2,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/posts/275/revisions\"\n        }\n      ],\n      \"predecessor-version\": [\n        {\n          \"id\": 308,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/posts/275/revisions/308\"\n        }\n      ],\n      \"wp:featuredmedia\": [\n        {\n          \"embeddable\": true,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/media/276\"\n        }\n      ],\n      \"wp:attachment\": [\n        {\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/media?parent=275\"\n        }\n      ],\n      \"wp:term\": [\n        {\n          \"taxonomy\": \"category\",\n          \"embeddable\": true,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/categories?post=275\"\n        },\n        {\n          \"taxonomy\": \"post_tag\",\n          \"embeddable\": true,\n          \"href\": \"http://blog.spotmycrib.com/wp-json/wp/v2/tags?post=275\"\n        }\n      ],\n      \"curies\": [\n        {\n          \"name\": \"wp\",\n          \"href\": \"https://api.w.org/{rel}\",\n          \"templated\": true\n        }\n      ]\n    }\n  },\n\n\n\n\n\n\nsendAuctionWonMails = function(){\n  //To be executed at 12:00 am, mid night, once the day is closed.\n\n  today = new Date();\n  yesterday = new Date(today);\n  yesterday.setDate(today.getDate() - 1);\n  var start = yesterday\n  // start.setHours(0,0,0,0);\n  start = start.setHours(0,0,0,0);\n  start = new Date(start)\n  var end = yesterday\n  end.setHours(23,59,59,999);\n\n  // debugger;\n  // var AuctionDocuments = ReactionCore.Collections.Auctions.find({endDate:{$gte: start, $lte: end}},{\n  //   transform: function(doc){\n  //     if(doc.highestBid)\n  //       doc.highestBidUser = Meteor.users.findOne({_id:doc.highestBid});\n  //     if(doc.secondHighestBidUser)\n  //       doc.secondHighestBidUser = Meteor.users.findOne({_id:doc.secondHighestBid});\n  //\n  //     return doc;\n  //   }\n  // }).fetch();\n\n  var globalConfig = ReactionCore.Collections.Config.findOne();\n\n  //fetch list to whom highest bid email is to be send\n  var AuctionDocuments = ReactionCore.Collections.Auctions.find({\n      \"endDate\": {$lte: end},\n      $or      : [\n        {\"highestBid\": {$ne: \"\"}, \"isHighestBidWonEmailSent\": false},\n        {\"secondHighestBid\": {$ne: \"\"}, \"isSecondHighestBidWonEmailSent\": false}]\n    },\n    {\n    transform: function(doc){\n      if (doc.highestBid && !doc.isHighestBidWonEmailSent)\n        doc.highestBidUser = Meteor.users.findOne({_id:doc.highestBid});\n      if (doc.secondHighestBid && !doc.isSecondHighestBidWonEmailSent)\n        doc.secondHighestBidUser = Meteor.users.findOne({_id:doc.secondHighestBid});\n\n      return doc;\n    }\n  }).fetch();\n\n  for (var i = 0; i < AuctionDocuments.length; i++) {\n    var auction                   = AuctionDocuments[i]\n    var endDate = new Date(auction.endDate);\n    var firstHigestBidderEndDate = new Date(endDate.setDate(endDate.getDate() + 2));\n    var secondHigestBidderEndDate = new Date(endDate.setDate(endDate.getDate() + 4));\n\n    if (auction.highestBidUser && !auction.isHighestBidWonEmailSent) {\n      var mailDataHighestBidUser = {\n        template: 'userWonBid',\n        subject: \"Congratulation! You have placed the winning bid.\",\n        mailTo: auction.highestBidUser.emails[0].address,\n        //mailTo: 'srikanth681@gmail.com',\n        homepage: Meteor.absoluteUrl(),\n        auction: auction,\n        user:auction.highestBidUser,\n        endDate: endDate.toDateString(),\n        firstHigestBidderEndDate: firstHigestBidderEndDate.toDateString(),\n        secondHigestBidderEndDate: secondHigestBidderEndDate.toDateString(),\n        conf: globalConfig\n      }\n      Meteor.call('sendNotificationEmail',mailDataHighestBidUser)\n      var smsText = 'Hi ' + auction.highestBidUser.profile.username + '. Congratulations! You bid is the highest. Login to ibidmyhome.com and confirm your unit!';\n      Meteor.call('sendSMS',[auction.highestBidUser.profile.mobile[0], smsText]);\n\n      //update email sent flag\n      ReactionCore.Collections.Auctions.update({_id: auction._id},\n        {$set: {isHighestBidWonEmailSent: true}});\n    }\n    if (auction.secondHighestBidUser && !auction.isSecondHighestBidWonEmailSent) {\n      var mailDataSecondHighestBidUser = {\n        template: 'userAnnouncedAsSecondHigest',\n        subject: \"Congratulations! You have placed the 2nd highest bid.\",\n        mailTo: auction.secondHighestBidUser.emails[0].address,\n        //mailTo: 'srikanth681@gmail.com',\n        homepage: Meteor.absoluteUrl(),\n        auction: auction,\n        user:auction.secondHighestBidUser,\n        endDate: endDate.toDateString(),\n        firstHigestBidderEndDate: firstHigestBidderEndDate.toDateString(),\n        secondHigestBidderEndDate: secondHigestBidderEndDate.toDateString(),\n        conf: globalConfig\n      }\n      Meteor.call('sendNotificationEmail',mailDataSecondHighestBidUser)\n      var smsText = 'Hi '+auction.secondHighestBidUser.profile.username+'. You have placed the 2nd highest bid. You have a chance to buy it. Login to follow the post-auction procedure closely.';\n      Meteor.call('sendSMS',[auction.secondHighestBidUser.profile.mobile[0], smsText]);\n\n      //update email sent flag\n      ReactionCore.Collections.Auctions.update({_id: auction._id},\n        {$set: {isSecondHighestBidWonEmailSent: true}});\n    }\n  }\n\n  return true;\n}\nnotYetARegisteredBidder = function(){\n  var today = new Date()\n  var start = new Date(today.getYear() , today.getMonth() , today.getDate() , today.getHours() , today.getMinutes(), 0, 0);\n  var end = new Date(today.getYear() , today.getMonth() , today.getDate() , today.getHours() , today.getMinutes(), 59, 999);\n\n  // var data = Meteor.users.find({\n  //   \"profile.isRegisteredBidder\":false,\n  //   createdAt:{$gte: start, $lte: end}\n  // }).fetch();\n  var data = Meteor.users.find({\n    \"profile.hasSignedUpButNotPaidRegistrationAmount\": true,\n    \"profile.isRegistrationPaymentReminderSent\"      : false\n  }).fetch();\n\n  var globalConfig = ReactionCore.Collections.Config.findOne();\n\n  for(var i=0;i<data.length;i++) {\n    var user = data[i]\n\n    var mailData = {\n      template: 'notYetARegisteredBidder',\n      subject : \"Created account but not paid Rs 499\",\n      //mailTo: 'srikanth681@gmail.com',\n      mailTo  : user.emails[0].address,\n      homepage: Meteor.absoluteUrl(),\n      user    : user,\n      conf    : globalConfig\n    }\n    Meteor.call('sendNotificationEmail', mailData)\n    ///////////////////////////MAIL CODE END  - SMS CODE START ////\n\n    var smsText = 'Hi ' + user.profile.username + '. Now that you have signed in, select an apartment and proceed to bid by paying an auction amount of Rs.499';\n    Meteor.call('sendSMS', [user.profile.mobile[0], smsText]);\n\n    ///////////////////////////SMS END  - SMS CODE START ////\n\n    //update email remidner flags\n    Meteor.users.update({\"_id\": user._id}, {\n      $set: {\n        \"profile.isRegistrationPaymentReminderSent\": true\n      }\n    });\n  }\n}\nnotYetBidOnProperty = function(){\n  // debugger;\n  var auctionDocuments = ReactionCore.Collections.Auctions.find({\n      propertyConfirmationNotificationNeededForBidders: {$exists: true, $ne: []},\n    },\n    {\n      transform: function (doc) {\n        doc.userDocuments = Meteor.users.find({\n            _id: {$in: doc.propertyConfirmationNotificationNeededForBidders}\n          }\n        ).fetch();\n\n        return doc;\n      }\n    }).fetch();\n\n  var globalConfig = ReactionCore.Collections.Config.findOne();\n\n  //loop on all auctionDocuments\n  for (var i = 0; i < auctionDocuments.length; i++) {\n    //loop on all users in auctionDocuments.userDocuments\n    for (var j = 0; j < auctionDocuments[i].userDocuments.length; j++) {\n      var user = auctionDocuments[i].userDocuments[j];\n\n      var mailData = {\n        template: 'notYetBidOnProperty',\n        subject : \"We have observed that you are yet to place the bid on ibidmyhome.com.\",\n        //mailTo: 'srikanth681@gmail.com',\n        mailTo  : user.emails[0].address,\n        homepage: Meteor.absoluteUrl(),\n        user    : user,\n        conf    : globalConfig\n      }\n      Meteor.call('sendNotificationEmail', mailData)\n      ///////////////////////////MAIL CODE END  - SMS CODE START ////\n\n      var smsText = 'Hi ' + user.profile.username + '. You are now a registered bidder, but have not placed your bid. Avail the apartment by outbidding current highest bid.';\n      Meteor.call('sendSMS', [user.profile.mobile[0], smsText]);\n\n      ///////////////////////////SMS END  - SMS CODE START ////\n\n      //update email reminder flags\n      ReactionCore.Collections.Auctions.update({_id: auctionDocuments[i]._id},\n        {\n          $pull: {\n            propertyConfirmationNotificationNeededForBidders: user._id\n          }\n        });\n    }\n  }\n\n};\nprocessRefunds = function(){\n  //To be executed at 12:00 am, mid night, once the auction winner is diclared, auction is closed 5 days ago.\n  today = new Date();\n  yesterday = new Date($today);\n  yesterday.setDate(today.getDate() - 5);\n  var start = yesterday\n  start = start.setHours(0,0,0,0);\n  start = new Date(start)\n  var end = yesterday\n  end.setHours(23,59,59,999);\n\n  //isAuctionConfirmed: true\n  var data = ReactionCore.Collections.Auctions.find({endDate:{$gte: start, $lte: end}},{}).fetch();\n\n  for(var i=0;i<data.length;i++){\n    var auction = data[i]\n    var user;\n    for (var i=0;i<auction.registeredBidders.length;i++){\n      userId = auction.registeredBidders[i]\n\n      if(auction.highestBid == userId && !auction.highestBidWithdrawed){continue;}\n      if(auction.highestBidWithdrawed && auction.secondHighestBid){continue;}\n      //if(auction.auctionConfirmedUser  == userId ){continue;}\n\n      var payment = ReactionCore.Collections.Payments.findOne({_id:userId, auctionId:auction._id });\n      Meteor.call('requestRefund',[payment._id,'Bidder registration amount refunded as unit is confirmed to another user.'])\n    }\n\n\n    //var mailDataHighestBidUser = {\n    //  template: 'userWonBid',\n    //  subject: \"Congratulation! You have placed the winning bid.\",\n    //  mailTo: auction.highestBidUser.emails[0].address,\n    //  //mailTo: 'srikanth681@gmail.com',\n    //  homepage: Meteor.absoluteUrl(),\n    //  data: auction,\n    //  conf: globalConfig\n    //}\n    //var mailDataSecondHighestBidUser = {\n    //  template: 'userAnnouncedAsSecondHigest',\n    //  subject: \"Congratulations! You have placed the 2nd highest bid.\",\n    //  mailTo: auction.highestBidUser.emails[0].address,\n    //  //mailTo: 'srikanth681@gmail.com',\n    //  homepage: Meteor.absoluteUrl(),\n    //  data: auction,\n    //  conf: globalConfig\n    //}\n    //Meteor.call('sendNotificationEmail',mailDataHighestBidUser)\n    //Meteor.call('sendNotificationEmail',mailDataSecondHighestBidUser)\n\n  }\n\n  return true;\n}\n\n transform: function(doc){\n doc.registeredBidUsers = []\n if(doc.registeredBidders){\n for (var i=0;i<doc.registeredBidders.length;i++){\n if(doc.highestBid == doc.registeredBidders[i] && !doc.highestBidWithdrawed){continue;}\n if(doc.highestBidWithdrawed && doc.secondHighestBid){continue;}\n //if(doc.auctionConfirmedUser  == doc.registeredBidders[i] ){continue;}\n var user = Meteor.users.findOne({_id:doc.registeredBidders[i] });\n doc.registeredBidUsers.push(user);\n }\n }\n return doc;\n }\n\n\n\n var user;\n for (var i=0;i<auction.registeredBidUsers.length;i++){\n user = auction.registeredBidUsers[i]\n var payment = ReactionCore.Collections.Payments.findOne({_id:user._id, auctionId:auction._id });\n Meteor.call('requestRefund',[payment._id,'Bidder registration amount refunded as unit is confirmed to another user.'])\n }\n\n */\nfunction getUserProfileScore (user) {\n    let score = 0;\n\n    if(user.profile.mobile){score += 15;}\n    if(!user.services)user.services={}\n    if(user.services.facebook){score += 15;}\n    // if(user.services.google){score += 10;}\n    if(user.services.twitter){score += 10;}\n    if(user.services.linkedin){score += 15;}\n    if(user.profile.references.hasPassport){score += 10;}\n    if(user.profile.references.employerName){score += 3;}\n    if(user.profile.references.employerTakeHome){score += 2;}\n    if(user.profile.references.hasWorkRef){score += 10;}\n    if(user.profile.references.hasLandlordRef){score += 10;}\n    if(user.profile.references.hasPPS){score += 3;}\n    // if(user.profile.references.hasFinancialRef){score += 0;}\n    if(user.profile.references.hasGovtID){score += 4;}\n    if(user.profile.references.hasResume){score += 3;}\n\n    if(score>100)score = 100;\n    return score;\n}","/**\n * Created by srikanth681 on 09/12/2018. Dev 09, 2018\n */\nimport {Meteor} from \"meteor/meteor\";\nimport \"../../imports/api/publications.js\";\nimport bodyParser from 'body-parser';\n\nfunction validateEmail(email) {\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n}\nvar stripedhtml = \"%3Cdiv+dir%3D%22ltr%22%3E%3Cimg+width%3D%220%22+height%3D%220%22+class%3D%22mailtrack-img%22+alt%3D%22%22+style%3D%22display%3Aflex%22+src%3D%22https%3A%2F%2Fmailtrack.io%2Ftrace%2Fmail%2F7706d8d19240906d922f05d56f1dc1b59d192efd.png%3Fu%3D2390507%22%3E%3Cdiv%3E%3C%2Fdiv%3E%3Cdiv%3E%3C%2Fdiv%3E%3Cdiv+class%3D%22gmail_quote%22%3E%3Cbr%3E%3Cu%3E%3C%2Fu%3E+%3Cdiv%3E+%3Cdiv+style%3D%22color%3Atransparent%3Bopacity%3A0%3Bfont-size%3A0px%3Bborder%3A0%3Bmax-height%3A1px%3Bwidth%3A1px%3Bmargin%3A0px%3Bpadding%3A0px%3Bborder-width%3A0px%21important%3Bdisplay%3Anone%21important%3Bline-height%3A0px%21important%22%3E%3Cimg+border%3D%220%22+width%3D%221%22+height%3D%221%22+src%3D%22http%3A%2F%2Fpost.spmailtechnol.com%2Fq%2FTHE-IBC7KjfGMZ2g91VIzA%7E%7E%2FAAFbhgA%7E%2FRgRdkLCdPVcDc3BjQgoAAB19r1slyyCmUhVzcmlrYW50aDY4MUBnbWFpbC5jb21YBAAAAAA%7E%22%3E%3C%2Fdiv%3E+%3Ctable+style%3D%22width%3A100%25%21important%3Bbackground-color%3A%23efefef%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+align%3D%22center%22+style%3D%22font-family%3Aarial%3Bfont-size%3A12px%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd+style%3D%22width%3A2%25%22%3E%26nbsp%3B%3C%2Ftd%3E+%3Ctd+style%3D%22width%3A96%25%22%3E+%3Cdiv+style%3D%22max-width%3A800px%3Bmin-width%3A180px%22%3E+%3Ctable+id%3D%22m_-9020740417607596646background-table%22+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22margin%3A0%3Bpadding%3A0%3Bcolor%3A%23000000%3Bborder-top%3A10px+solid+%23efefef%3Bborder-bottom%3A10px+solid+%23efefef%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+align%3D%22center%22+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%21important%3Bbackground-color%3Awhite%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+align%3D%22center%22+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%21important%3Bbackground-color%3Awhite%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd+height%3D%2214%22+style%3D%22height%3A14px%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd%3E+%3Cimg+src%3D%22https%3A%2F%2Fc1.dmstatic.com%2F402%2Fi%2Femail_alerts%2Fdomain-logos%2Fdaft.png%22+border%3D%220%22+alt%3D%22+Daft.ie+%22+style%3D%22margin-left%3A20px%3Bwidth%3A119px%3Bheight%3A37px%3Bdisplay%3Ablock%22%3E+%3C%2Ftd%3E+%3Ctd+style%3D%22width%3A9px%3Bmargin%3A3px%22%3E%26nbsp%3B%3C%2Ftd%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A14px%3Bpadding-right%3A30px%3Bcolor%3A%23333%3Btext-align%3Aright%22%3E+%3Cstrong+style%3D%22color%3A%23000%22%3E+Ad+enquiry+%3C%2Fstrong%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+height%3D%2214px%22+style%3D%22height%3A14px%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3Ctable+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%3Bheight%3A10px%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd+height%3D%2210%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3Ctable+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%3Bbackground-color%3Awhite%3Bmargin-left%3Aauto%3Bmargin-right%3Aauto%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22margin-left%3A20px%3Bmargin-right%3A20px%3Bcolor%3A%23525252%3Bfont-family%3Aarial%3Bmin-width%3A120px%3Bmax-width%3A588px%3Bfont-size%3A14px%22%3E+%3Ctbody%3E%3Ctr%3E%3Ctd+height%3D%2220%22+style%3D%22height%3A20px%22%3E%3C%2Ftd%3E%3C%2Ftr%3E+%3Ctr%3E+%3Ctd%3E+%3Ctable+border%3D%220%22+cellpadding%3D%220%22+cellspacing%3D%220%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd%3E+%3Ctable+cellpadding%3D%220%22+cellspacing%3D%220%22+border%3D%220%22+style%3D%22width%3A100%25%3Bmargin-left%3Aauto%3Bmargin-right%3Aauto%3Bmin-width%3A120px%3Bmax-width%3A588px%22%3E+%3Ctbody%3E%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A16px%3Bfont-weight%3Abold%3Bcolor%3A%23000%22%3E+From%3A+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%3Bpadding-bottom%3A10px%22%3E+Anthony+Bloomer+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A16px%3Bfont-weight%3Abold%3Bcolor%3A%23000%22%3E+Email%3A+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%3Bpadding-bottom%3A10px%22%3E+%3Ca+href%3D%22mailto%3Aabloomer%40newrelic.com%22+style%3D%22color%3A%232953aa%3Btext-decoration%3Anone%22+target%3D%22_blank%22%3E+abloomer%40newrelic.com+%3C%2Fa%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A16px%3Bfont-weight%3Abold%3Bcolor%3A%23000%22%3E+Phone+number%3A+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%3Bpadding-bottom%3A10px%22%3E+%3Ca+style%3D%22color%3A%23333%3Btext-decoration%3Anone%22+href%3D%22tel%3A0858278968%22+target%3D%22_blank%22%3E+0858278968+%3C%2Fa%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A16px%3Bfont-weight%3Abold%3Bcolor%3A%23000%22%3E+Property%3A+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%3Bpadding-bottom%3A10px%22%3E+%3Ca+style%3D%22text-decoration%3Anone%3Bcolor%3A%232953aa%22+href%3D%22https%3A%2F%2Fwww.daft.ie%2F31041941%22+target%3D%22_blank%22%3E+Rockfield%2C+Dundrum%2C+Dublin+14+%3C%2Fa%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bfont-size%3A16px%3Bfont-weight%3Abold%3Bcolor%3A%23000%22%3E+Message%3A+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%22%3E+Hi%2C%3Cbr%3E+%3Cbr%3E+My+name+is+Anthony+Bloomer%2C+an+Engineering+professional+in+the+IT+industry.%3Cbr%3E+%3Cbr%3E+Currently%2C+I+am+working+for+a+large+multinational+company+called+New+Relic+as+a+Technical+Support+Engineer.%3Cbr%3E+%3Cbr%3E+This+property+you+are+advertising+is+ideal+since+it+is+very+close+to+my+workplace+in+Dublin+City+Centre.%3Cbr%3E+%3Cbr%3E+I+would+be+very+grateful+for+an+opportunity+to+view+the+room+in+person+and+chat+with+you+about+it.%3Cbr%3E+%3Cbr%3E+I+can+provide+references+and+letter+of+employment+on+request.%3Cbr%3E+%3Cbr%3E+I+do+look+forward+to+hearing+back+from+you.%3Cbr%3E+%3Cbr%3E+All+the+best%2C%3Cbr%3E+Anthony+Bloomer+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3Cbr%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+height%3D%2215%22+style%3D%22height%3A15px%3Bborder-bottom%3A2px+solid+%23efefef%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E%3Ctd+height%3D%2215%22+style%3D%22height%3A15px%22%3E%3C%2Ftd%3E%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%22%3E+Please+be+aware+of+suspicious+behaviour.+Never+wire+funds+through+a+third+party+money+transfer+service.+For+more+advice+please+see+%3Ca+style%3D%22text-decoration%3Anone%3Bcolor%3A%232953aa%22+href%3D%22https%3A%2F%2Fwww.daft.ie%2Fsafety-online%22+target%3D%22_blank%22%3E+Daft%26%2339%3Bs+Safety+Online+Guide+%3C%2Fa%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+height%3D%2215%22+style%3D%22height%3A15px%3Bborder-bottom%3A2px+solid+%23efefef%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E%3Ctd+height%3D%2215%22+style%3D%22height%3A15px%22%3E%3C%2Ftd%3E%3C%2Ftr%3E+%3Ctr%3E%3Ctd+height%3D%2210%22+style%3D%22height%3A10px%22%3E%3C%2Ftd%3E%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bmargin%3A0px%3Bfont-size%3A16px%22%3E+Kind+Regards%2C+%3C%2Ftd%3E+%3C%2Ftr%3E%3Ctr%3E+%3Ctd+style%3D%22font-family%3Aarial%3Bcolor%3A%23333%3Bfont-size%3A16px%22%3E+The+Daft.ie+Team+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+height%3D%2220%22+style%3D%22height%3A20px%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+style%3D%22color%3A%23777%3Bmargin%3A0px%3Bfont-family%3Aarial%3Bfont-size%3A11px%22%3E+Email%3A+%3Ca+href%3D%22mailto%3Asupportdesk%40daft.ie%22+style%3D%22font-weight%3Abold%3Btext-decoration%3Anone%3Bcolor%3A%232953aa%22+target%3D%22_blank%22%3E+supportdesk%40daft.ie+%3C%2Fa%3E+%7C+Daft+Media+Ltd.%2C+3rd+Floor+Latin+Hall%2C+Golden+Lane%2C+Dublin+8+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd+height%3D%2210%22+style%3D%22height%3A10px%22%3E%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3Ctr%3E+%3Ctd%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Fdiv%3E+%3C%2Ftd%3E+%3Ctd+style%3D%22width%3A2%25%22%3E%26nbsp%3B%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3C%2Ftd%3E+%3C%2Ftr%3E+%3C%2Ftbody%3E%3C%2Ftable%3E+%3Cimg+border%3D%220%22+width%3D%221%22+height%3D%221%22+alt%3D%22%22+src%3D%22http%3A%2F%2Fpost.spmailtechnol.com%2Fq%2Fokk99SCiCrBeq5auetPObw%7E%7E%2FAAFbhgA%7E%2FRgRdkLCdPlcDc3BjQgoAAB19r1slyyCmUhVzcmlrYW50aDY4MUBnbWFpbC5jb21YBAAAAAA%7E%22%3E+%3C%2Fdiv%3E+%3C%2Fdiv%3E%3Cdiv%3E%3Cbr%3E%3C%2Fdiv%3E%3Cbr%3E%3C%2Fdiv%3E\";\n// Add two middleware calls. The first attempting to parse the request body as\n// JSON data and the second as URL encoded data.\n\nPicker.middleware( bodyParser.json() );\nPicker.middleware( bodyParser.urlencoded( { extended: true } ) );\n// Picker.middleware( bodyParser.raw( ) );\n// Picker.middleware( bodyParser.text( ) );\n\n  Picker.route('/lettingEnquiry2', function(params, req, res, next) {\n      if(req.method!='POST') {\n          res.writeHead(400, 'Bad Request');\n          res.end();\n          return false; // This is an invalid request\n      }\n      console.log('in lettingEnquiry2');\n\n      let body = ''\n      req.on('data', Meteor.bindEnvironment((data) => {\n          body += data;\n      })).on('end', Meteor.bindEnvironment(() => {\n          // console.log(body)\n\n          // keys = Object.keys(body)\n          // json = keys[0];\n          console.log(\"typeof body\");\n          console.log(typeof body);\n          console.log(body);\n          // console.log(typeof keys);\n          // console.log(typeof json);\n          // console.log(json);\n          try{\n              json = JSON.parse(body);\n          }catch(e){\n              console.log('Parse failed');\n              console.log(e)\n              res.writeHead(400, 'Bad Request');\n              res.end();\n              return;\n          }\n\n          if(!json){\n              res.writeHead(400);\n              res.end('Invalid input');\n              return;\n          }\n\n          processEmail = processEmail.bind(this);\n          let ret = processEmail(json);\n          if(!ret.status ){\n              res.writeHead(400);\n              res.end('Invalid input. Error: '+ret.message);\n              return;\n          }\n\n          res.writeHead(200);\n          res.end('success');\n\n    })\n      )\n  })\n  Picker.route('/lettingEnquiry', function(params, req, res, next) {\n    if(req.method!='POST') {\n        res.writeHead(400, 'Bad Request');\n        res.end();\n        return false; // This is an invalid request\n    }\n    console.log('in lettingEnquiry');\n\n    let json = {}\n    if(req.body) {\n        // console.log(\"req.body\")\n        // console.log(req.body)\n        json = req.body;\n        json = JSON.stringify(json);\n        // console.log(typeof json);\n        // console.log(json);\n        try{\n            json = JSON.parse(json);\n        }catch(e){\n            console.log('Parse failed');\n            console.log(e)\n            res.writeHead(400, 'Bad Request');\n            res.end();\n            return;\n        }\n    }else{\n\n    }\n    \n    if(!json){\n        res.writeHead(400);\n        res.end('Invalid input');\n        return;\n    }\n    processEmail = processEmail.bind(this);\n    let ret = processEmail(json);\n    if(!ret.status ){\n        res.writeHead(400);\n        console.log('Invalid input. Error: '+ret.message);\n        res.end('Invalid input. Error: '+ret.message);\n        return;\n    }\n    \n    res.writeHead(200);\n    res.end('success');\n});\nfunction processEmail(json){\n    //How to handle spam, email \n    // console.log(json);\n    // console.log(json.recipient);\n    // console.log(json['recipient']);\n    let enq = {}\n    try{\n        enq.fullname = json.subject.split('from ')[1].split(' on')[0];//Enquiry from Anthony Bloomer on Daft.ie | Flat share in Rockfield, Dundrum, Co. Dublin\n    }\n    catch(e){\n        console.log('failed to retrive full name')\n    }\n    // enq.date = new Date(json.Date);\n    try{\n        enq.message = json['body-plain'].split('Message:')[1].split('Please be aware of suspicious')[0].trim();\n        // enq.message = json['body-plain'].split('Message:')[1].split('</tr>')[0].trim();\n    }\n    catch(e){\n        console.log('failed to retrive message')\n        console.log(e)\n    }\n    // enq.recipient = json.recipient;\n    let propKey = '';\n    try{\n        propKey = json.recipient.split('let-')[1].split('@')[0];\n        if(propKey.length!=5) throw \"Invalid property Key\";\n        propKey = propKey.toUpperCase();\n    }\n    catch(e){\n        return {\n            status:false,\n            message:'failed to retrieve property Key'\n        }\n    }\n    enq.propKey = propKey;\n    // console.log(json['body-plain'].replace(/\\n/g, \" \") );\n    // console.log('more deeper');\n    // console.log(json['body-plain'].replace(/\\n/g, \" \").replace(/ {1,}/g,\" \") );\n    // console.log('with split');\n    // console.log(json['body-plain'].replace(/\\n/g, \" \").replace(/ {1,}/g,\" \").split('Email: ')[1] );\n    try{\n        enq.email = json['body-plain'].match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi)[0]\n        // enq.email = json['body-plain'].replace(/\\n/g, \" \").replace(/ {1,}/g,\" \").split('Email: ')[1].split(' ')[0];\n        if(enq.email.indexOf('supportdesk@daft.ie')!=-1){//it took dafts email. use 2nd logic now.\n            console.log('Using 2nd logic to fetch email')\n            enq.email = json['body-plain'].split('Email:')[1].split(' ')[1].trim();\n            if( !validateEmail(enq.email) ){\n                console.log('Using 3rd logic to fetch email')\n                enq.email = json['body-plain'].split('Email:')[1].split(' ')[0].trim();\n            }\n            if( !validateEmail(enq.email) ){\n                console.log('Using 4rd logic to fetch email')\n                enq.email = enq.email.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi)[0]\n            }\n            console.log('Email is: '+enq.email)\n        }\n    }catch(e){}\n    if( !validateEmail(enq.email) ) {\n        return {\n            status:false,\n            message:'failed to retrieve email'\n        }\n    }\n    console.log(enq.email);\n\n\n\n    try{\n        enq.mobile = json['body-plain'].split('Phone number:')[1].split('Property')[0].trim();\n        // enq.mobile = json['body-plain'].split('Phone number: ')[1].split(' ')[0];\n    }catch(e){}\n    // console.log(enq);\n\n    let auction = Collections.Auctions.findOne({lettingAuctionCode: enq.propKey});\n    if(!auction ){\n        //Auction not found, don't process this \n        return {\n            status:false,\n            message:'Auction not found'\n        }\n    }\n    let property = false;\n    if(auction.propertyId) property = Collections.Properties.findOne({_id:auction.propertyId})\n    if(!property ){\n        //Auction not found, don't process this \n        return {\n            status:false,\n            message:'Property not found'\n        }\n    }\n    let user = Meteor.users.findOne({'profile.email': enq.email})\n    if(!user){//User not found, so insert a new emailEnquiry, send emailEnquiryReceived\n        let existingEnquiry = Collections.EmailEnquiries.findOne({email: enq.email,propertyId: property._id,auctionId: auction._id})\n\n        if(!existingEnquiry){//Not existing, insert new one\n            let emailEnquiryId = Collections.EmailEnquiries.insert({\n                fullname: enq.fullname,\n                email: enq.email,\n                mobile: enq.mobile,\n                // propKey: enq.propKey,\n                propertyId: property._id,\n                auctionId: auction._id,\n                createdAt: new Date(),\n                message: enq.message,\n                isArchived: false\n            })\n            console.log(\"emailEnquiry placed: \"+emailEnquiryId);\n            var data = {\n                userEmail: enq.email,\n                fullname: enq.fullname,\n                requestType: 'emailEnquiryReceived',//This is an Ack email for all the emailEnqueries placed by user in a group of 15mns. \n                emailEnquiryId:emailEnquiryId,\n                propertyId: property._id,\n            }\n            Meteor.call('requestEmail',data);\n\n            if(isNaN(auction.enquiryCount)){//if its not a number ; for first time scenarios.\n                Collections.Auctions.update(auction._id, {\n                    $set: {\n                        \"enquiryCount\": 1\n                    }\n                });\n            }else{\n                Collections.Auctions.update(auction._id, {\n                    $inc: {\n                        \"enquiryCount\": 1\n                    }\n                });\n            }\n\n            //////////////LANDLORD EMAIL\n            let address = titleCase(property.address.address);\n            if (property.address.area) address +=', '+titleCase(property.address.area)\n            if (property.address.county) address +=', '+titleCase(property.address.county)\n            let subject = 'Enquiry received for '+address;\n\n            let agent = Meteor.users.findOne({_id:property.createdByAgent})\n            let userFirstName = agent.profile.name;\n            if(userFirstName){\n                userFirstName = titleCase(userFirstName.split(' ')[0]);\n            }\n            let ec = auction.enquiryCount;\n            if(!ec)ec=1;\n            else ec+=1;\n            let ac = auction.bids;\n            let subHeading = 'This letting has received '+ec+' email '+(ec>1 ? 'enquiries':'enquiry')+' and '+(ac==0 ? 'no':ac)+' '+(ac!=1 ? 'applications':'application')+' so far.'\n            let sluggedName = slugifyEmailAddress(agent.profile.name);\n            if(!sluggedName)sluggedName = 'rent'\n            let propertyEmail = sluggedName+'-let-'+auction.lettingAuctionCode.toLowerCase()+\"@spotmycrib.ie\";\n            let user = {\n                \"profile\":{\n                    name:enq.fullname,\n                    email:enq.email,\n                    userFirstName:userFirstName\n                }\n            }\n            var mailData     = {\n                template    : 'emailEnquiryReceivedLandlord',\n                subject     : subject,\n                mailTo      : agent.profile.email,//mailTo: 'srikanth681@gmail.com',\n                replyTo      : enq.email,\n                property: property,\n                bedsCount   : property.bedrooms.length,\n                rentFormated: numDifferentiation(auction.price),\n                auction: auction,\n                enquiry:enq,\n                propertyKeys     : auction.lettingAuctionCode,\n                agent        : agent,\n                user        : user,\n                propertyImage:false,//dont need it here\n                propertyUrl:FlowRouter.url('rent', { slug: property.slug, key: auction.lettingAuctionCode }),\n                propertyApplicationsUrl:FlowRouter.url('account/propertyApplications', { id: property._id }),\n                propertyEmail:propertyEmail,\n                subHeading: subHeading\n            };\n            try{\n                Meteor.call('sendNotificationEmail', mailData);//Keep it asynchronous for speed\n                // Meteor.call('sendNotificationEmail', mailData,true);//if you don't want it to fail and need it to be sync, use email queues instead.\n            }catch(e){\n                console.log('Mail sending failed. ')\n                console.log(e)\n                return {\n                    status:false,\n                    message:'Mail sending failed'\n                }\n            }\n\n\n        }else{//There is an existing enquiry\n            return {\n                status:false,\n                message:'Request already exists'\n            }\n        }\n    }else if(user){// User found, insert bid, send uploadRefsReminder\n        this.placeBidCallback = function(error, result){\n            if(error){\n                console.log(\"emailEnquiry bid failed\");\n                console.log(error);\n                return false;\n            }\n            if(result.status=='Success'){\n                console.log(\"emailEnquiry bid success\");\n            }\n        }\n        this.placeBidCallback = this.placeBidCallback.bind(this);\n        Meteor.call('placeBid',[auction._id, auction.price, enq.message,user._id],this.placeBidCallback);\n        if(getUserProfileScore(user)< 70){\n            var mailData = {\n                userEmail: enq.email,\n                fullname: enq.fullname,\n                requestType: 'uploadRefsReminder',//This is a reminder email for the user to complete their profile. \n                propertyId: property._id,\n                auctionId: auction._id,\n            }\n            // Meteor.call('requestEmail',mailData);//Temporarly disabling the reminder emails.\n        }\n    }\n    \n    return {\n        status:true,\n        message:'end of method'\n    }\n}\n\nfunction getUserProfileScore (user) {\n    let score = 0;\n\n    if(user.profile.mobile){score += 15;}\n    if(!user.services)user.services={}\n    if(user.services.facebook){score += 15;}\n    // if(user.services.google){score += 10;}\n    if(user.services.twitter){score += 10;}\n    if(user.services.linkedin){score += 15;}\n    if(user.profile.references.hasPassport){score += 10;}\n    if(user.profile.references.employerName){score += 3;}\n    if(user.profile.references.employerTakeHome){score += 2;}\n    if(user.profile.references.hasWorkRef){score += 10;}\n    if(user.profile.references.hasLandlordRef){score += 10;}\n    if(user.profile.references.hasPPS){score += 3;}\n    // if(user.profile.references.hasFinancialRef){score += 0;}\n    if(user.profile.references.hasGovtID){score += 4;}\n    if(user.profile.references.hasResume){score += 3;}\n\n    if(score>100)score = 100;\n    return score;\n}\nfunction numDifferentiation(val) {\n    if(val >= 1000000000) val = (val/1000000000).toFixed(2) + ' Billion';\n    else if(val >= 1000000) val = (val/1000000).toFixed(2) + ' Million';\n    return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\nfunction slugifyEmailAddress (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ/_,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '.')           // Replace spaces with \".\"\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with ''\n        // .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single ''\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\n/*\nUrl {\n            I20181205-20:24:53.640(0)?   protocol: null,\n            I20181205-20:24:53.640(0)?   slashes: null,\n            I20181205-20:24:53.642(0)?   auth: null,\n            I20181205-20:24:53.644(0)?   host: null,\n            I20181205-20:24:53.645(0)?   port: null,\n            I20181205-20:24:53.646(0)?   hostname: null,\n            I20181205-20:24:53.646(0)?   hash: null,\n            I20181205-20:24:53.647(0)?   search: null,\n            I20181205-20:24:53.648(0)?   query: null,\n            I20181205-20:24:53.649(0)?   pathname: '/account/profile',\n            I20181205-20:24:53.649(0)?   path: '/account/profile',\n            I20181205-20:24:53.651(0)?   href: '/account/profile',\n            I20181205-20:24:53.651(0)?   _raw: '/account/profile' }\n\n\n */","/**\n * Created by njanjanam on 08/04/2017.\n */\n\n// Deny all client-side updates to user documents\n// Meteor.users.deny({\n//     update() { return true; }\n// });\nMeteor.users.deny({\n    insert() { return true; },\n    update() { return true; },\n    remove() { return true; }\n});\nAccounts.onCreateUser(function(options, user) {\n    //@RELATIVE: imports/ui/templates/accounts/signUp/signUp.js\n\n    if (options.profile) {\n        if(user.services.facebook){\n            options.profile.picture = \"http://graph.facebook.com/\" + user.services.facebook.id + \"/picture/?width=40\";//?type=large\n            options.profile.email = user.services.facebook.email ;\n        }\n        if(user.services.twitter){\n            options.profile.picture = user.services.twitter.profile_image_url_https;//?type=large\n            options.profile.name = user.services.twitter.screenName ;\n            options.profile.email = \"\";//Twitter doesn' give email.\n        }\n        if(user.services.google){\n            options.profile.picture = user.services.google.picture+\"?sz=40\";\n            options.profile.name = user.services.google.given_name + user.services.google.family_name;\n            options.profile.email = user.services.google.email;\n        }\n        if(user.services.linkedin){\n            options.profile.picture = user.services.linkedin.pictureUrl;\n            options.profile.name = user.services.linkedin.firstName + user.services.linkedin.lastName;\n            options.profile.email = user.services.linkedin.emailAddress;\n        }\n        // user.profile = options.profile; Dont overwrite like this\n        if(user.profile){\n            if(options.profile.name)user.profile.name = options.profile.name\n            user.profile.email = options.profile.email\n            user.profile.picture = options.profile.picture\n        }else user.profile = options.profile;\n\n    }\n    // user.createdAt = new Date();\n\n    return user;\n});\n// Meteor.users.before.insert(function (userId, user) {\n//\n// });\n//https://guide.meteor.com/accounts.html\n// https://github.com/lirbank/meteor-accounts-merge\n// Ensuring every user has an email address, should be in server-side code\nAccounts.validateNewUser((user) => {\n    console.log('In validate new user');\n    console.log(user);\n\n    if(user.profile.email){\n        var tmp = Meteor.users.findOne({'profile.email':user.profile.email});\n        var msg = '';var t1 = []; var t2=[];\n        if(tmp)\n        if(tmp.services){\n            if(tmp.services.facebook){\n                t1.push('Facebook');\n                t2.push('Facebook');\n                // msg = 'Existing Facebook account exists, please login with your Facebook account.'\n            }\n            if(tmp.services.twitter){\n                t1.push('Twitter')\n                t2.push('Twitter')\n            }\n            if(tmp.services.google){\n                t1.push('Google')\n                t2.push('Google')\n            }\n            if(tmp.services.linkedin){\n                t1.push('LinkedIn')\n                t2.push('LinkedIn')\n            }\n            if(tmp.services.password){\n                t1.push('Password');\n                t2.push('Username-password');\n            }\n        }\n        if(t1.length){\n            var s = t1.length>1 ? 's' :''\n            msg = 'Existing '+formatArray(t1)+' account'+s+' found, please login with your '+formatArray(t2,'or')+'.'\n            throw new Meteor.Error('account-exists', msg);\n        }\n\n    }\n\n    // Return true to allow user creation to proceed\n    return true;\n});\nfunction formatArray(arr, con='and'){\n    var outStr = \"\";\n    if (arr.length === 1) {\n        outStr = arr[0];\n    } else if (arr.length === 2) {\n        //joins all with \"and\" but no commas\n        //example: \"bob and sam\"\n        outStr = arr.join(' '+con+' ');\n    } else if (arr.length > 2) {\n        //joins all with commas, but last one gets \", and\" (oxford comma!)\n        //example: \"bob, joe, and sam\"\n        outStr = arr.slice(0, -1).join(', ') + ' '+con+' ' + arr.slice(-1);\n    }\n    return outStr;\n}\nMeteor.users.after.insert(function (userId, user) {\n\n    console.log(user);\n\n    var toUpdate = {\n        \"profile.role\" : \"agent\",\n        \"profile.personalMessage\" : \"\",\n        \"lastLoginDate\": new Date(),\n        \"profile.isPublic\":false\n    }\n\n    if(!user.profile.picture)toUpdate[\"profile.picture\"] = \"\";\n    if(!user.profile.mobile)toUpdate[\"profile.mobile\"] = \"\";\n    if(!user.profile.email)toUpdate[\"profile.email\"] = \"\";\n\n\n    var references = {};\n    references.hasResume = false;\n    references.hasLandlordRef = false;\n    references.hasGovtID = false;\n    references.employerName = \"\";\n    references.employerTakeHome = \"\";\n    references.hasWorkRef = false;\n    references.hasPassport = false;\n    references.hasPPS = false;\n    references.hasFinancialRef = false;\n    references.others = [];\n\n    toUpdate[\"profile.references\"] = references ;\n\n    console.log(\"Account Created hook: \")\n\n    if(user.profile.email){//Check if this user already has any emailEnquiry with us?\n        let req = Collections.EmailEnquiries.findOne({email: user.profile.email,message:{$exists:true, $gt: \"\" } },{sort:{createdAt:-1}});\n        if(req){\n            toUpdate['profile.personalMessage'] = req.message;\n        }\n    }\n\n    Meteor.users.update({\n        \"_id\": user._id\n    }, {\n        $set: toUpdate\n    });\n\n    // if(!user.services.password && user.profile.email){\n    //     Accounts.sendEnrollmentEmail(user._id);\n    // }\n\n    // Meteor.call('sendWelcomeEmailCustom',[userId]); Moved to server side in Accounts.onCreateUser\n    // var smsText = 'Hi '+fullName+'. Welcome to SpotMyCrib. ';//Please verify your mobile number and email id.\n    // Meteor.call('sendSMS',[mobile, smsText]);\n\n    Meteor.call('sendWelcomeEmailCustom',[user._id]);\n});\n\nMeteor.methods({\n    'setUserPwd':function(args){\n        var clientUserId = args[0]\n        var newPassword = args[1]\n        const userId  = Meteor.userId();\n        if(clientUserId!=userId) throw new Meteor.Error(400, 'Invalid user, please re-login and try again. ');\n\n        Accounts.setPassword(userId, newPassword,{logout:false});\n    },\n    'togglePublicProfileSetting':function () {\n        console.log('togglePublicProfileSetting called.')\n        var currentUser = Meteor.user();\n        if(!currentUser){\n            throw new Meteor.Error(500, 'Error 500: Invalid user', 'You need to login first.');\n        }\n        var update =currentUser.profile.isPublic;\n\n        if(update==undefined)update = true;//First time, users get the option of public to true.\n        else{\n            if(update)update=false;\n            else update =true;\n        }\n\n        Meteor.users.update({\n            \"_id\": currentUser._id\n        }, {\n            $set: {\n                \"profile.isPublic\" :update\n            }\n        });\n\n        if(update){//If its true\n            if(!currentUser.profile.username) {//Check if user name doesnt exists\n                Meteor.call('generateUsername',currentUser._id);\n            }\n        }\n\n    },\n    'userLoggedIn':function () {\n        // Let other method calls from the same client start running,\n        // without waiting for the email sending to complete.\n        this.unblock();\n\n        var currentUser = Meteor.userId();\n        if(!currentUser){\n            throw new Meteor.Error(500, 'Error 500: Invalid user', 'You need to login first.');\n        }\n\n        Meteor.users.update({\n            \"_id\": currentUser\n        }, {\n            $set: {\n                \"lastLoginDate\" :new Date()\n            }\n        });\n\n    },\n    'generateUsername'(userId) {\n        this.unblock();\n        var currentUser = Meteor.userId();\n        if(!currentUser){\n            throw new Meteor.Error(500, 'Error 500: Invalid user', 'You need to login first.');\n        }\n        var user = Meteor.user(userId);\n        if(!user)throw new Meteor.Error(500, 'Error 500: Invalid user', 'Please send a valid userID');\n        console.log('user found: '+user._id)\n\n        let username = slugify(user.profile.name);\n        if(!username)return false;\n        let u1 = Meteor.users.findOne({ \"profile.username\":username });\n\n        let number = 0;\n\n        while(u1) {\n            number++;\n            username = slugify(user.profile.name+number);\n            u1 = Meteor.users.findOne({ \"profile.username\":username });\n        }\n        if(username){\n            Accounts.users.update(user._id,{\n                $set: {\n                    \"profile.username\" :username\n                }\n            });\n        }\n        return username;\n    },\n    isSocialAccount:function(email){\n        // new SimpleSchema({\n        //     email: { type: [email] }\n        // }).validate({ email });\n\n        // User has no password set\n        var user = Accounts.findUserByEmail(email)\n        if(!user){//Not found in generic way\n            var users = Meteor.users.find({'profile.email':email}).fetch()\n            if(users.length)user= users[0];\n        }\n        if(user){\n            var social = '';\n            if(user.services.facebook)social = 'Facebook';\n            if(user.services.twitter)social = 'Twitter';\n            if(user.services.google)social = 'Google';\n            if(user.services.linkedin)social = 'LinkedIn';\n\n            if(social) return {\n                error:false,\n                reason: social+' user found. Please try login with '+social+'.'\n            }\n        }\n        return {\n            error:'NoUser',\n            reason:'User not found'\n        }\n    },\n    hasPasswordSet:function(){\n        // new SimpleSchema({\n        //     email: { type: [email] }\n        // }).validate({ email });\n\n        var user = Meteor.user();\n        if(!user)return false;\n\n        try{\n            if(user.services.password) return true;\n        }catch(e){\n            console.log(e)\n        }\n        return false;\n    }\n})\nfunction slugify (text) {\n    if(!text)return '';\n    const a = 'àáäâèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/_,:;'\n    const b = 'aaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------'\n    const p = new RegExp(a.split('').join('|'), 'g')\n\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '')           // Replace spaces with \"\"\n        .replace(p, c =>\n            b.charAt(a.indexOf(c)))     // Replace special chars\n        .replace(/&/g, '-and-')         // Replace & with ''\n        .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single ''\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '')             // Trim - from end of text\n}","/**\n * Created by njanjanam on 23/12/2017.\n */\nsitemaps.add('/sitemap.xml', function() {\n    // 'page' is reqired\n    // 'lastmod', 'changefreq', 'priority' are optional.\n\n    var ret = [\n        { page: '/', changefreq: 'daily', priority: 0.9 } ,\n        { page: '/advertisewithus', changefreq: 'hourly', priority: 0.9 } ,\n        { page: '/estateagent', changefreq: 'hourly', priority: 0.9 } ,\n        { page: '/faqs', changefreq: 'daily', priority: 0.9 } ,\n        { page: '/about', changefreq: 'monthly', priority: 0.4 } ,\n        { page: '/contactus', changefreq: 'daily', priority: 0.4 } ,\n        { page: '/careers', changefreq: 'monthly', priority: 0.2 } ,\n        { page: '/howitworks', changefreq: 'daily', priority: 0.5 } ,\n        { page: '/cookiepolicy', changefreq: 'monthly', priority: 0.2 } ,\n        { page: '/terms', changefreq: 'monthly', priority: 0.2 } ,\n        { page: '/privacy', changefreq: 'monthly', priority: 0.2 } ,\n        { page: '/gdpr', changefreq: 'monthly', priority: 0.2 } ,\n        { page: '/b/rent-in-ireland', changefreq: 'hourly', priority: 1 } ,\n    ];\n\n\n    var ele;\n    var auctions = Collections.Auctions.find({isArchived:false},{\n        transform:function(doc){\n            var prop = Collections.Properties.findOne({_id:doc.propertyId})\n            doc.slug = prop.slug\n            return doc;\n        },\n        limit:1000,\n        sort: {updatedAt: -1}\n    }).fetch()\n    for(var i=0;i<auctions.length;i++){\n        ele = auctions[i];\n        if(!ele.lettingAuctionCode)continue;\n        if(!ele.slug)continue;\n        ret.push({ page: 'rent/'+ele.slug+'/'+ele.lettingAuctionCode,priority: 1 })\n        // ret.push({ page: 'letting/'+ele.lettingAuctionCode,priority: 1 })\n    }\n\n\n//lastmod: new Date().getTime(),\n    return ret;\n});\n\n","/**\n * Created by njanjanam on 01/04/2017.\n */\n","import {Meteor} from \"meteor/meteor\";\nimport \"../imports/api/publications.js\";\n// import \"../imports/api/properties.js\";\n\nif(Meteor.isProduction) FlowRouter.setDeferScriptLoading(true);\nvar timeInMillis = 1000 * 300; // 300 secs\nFlowRouter.setPageCacheTimeout(timeInMillis)\n\nString.prototype.replaceAll = function(search, replacement) {\n    var target = this;\n    return target.replace(new RegExp(search, 'g'), replacement);\n};\n_hijackWrite = function(res) {\n    var originalWrite = res.write;\n    res.write = function(chunk, encoding) {\n        //prevent hijacking other http requests\n        if(!res.iInjected &&\n            encoding === undefined && /^<!DOCTYPE html>/.test(chunk)) {\n            chunk = chunk.toString();\n            // console.log('chunk html '+chunk.substring(0,10))\n            chunk = chunk.replace(/<html>/, '<!-- HTML 5 -->\\n<html lang=\"en\">');\n            if(Meteor.isProduction) chunk = chunk.replaceAll('<script type=\"text/javascript\" src', '<script type=\"text/javascript\" async src');\n\n            res.iInjected = true;\n        }\n\n        originalWrite.call(res, chunk, encoding);\n    };\n}\nWebApp.connectHandlers.use(function(req, res, next) {\n    var path = req._parsedUrl.path;\n    // console.log(req._parsedUrl);\n    // console.log(req.headers.host);\n    // console.log(res);\n    ///////Below logic to check if the URL ends with / and remove ending slash unless its a homepage\n    var pathname = req._parsedUrl.pathname\n\n    _hijackWrite(res);\n\n    if ( pathname[pathname.length-1]  == '/') {//url ends with tailing /\n        if(pathname!=\"/\"){//Its not a home page\n            pathname = pathname.substring(0, pathname.length - 1);\n            var search = req._parsedUrl.search;\n            if(!search)search=\"\"\n            var protocol = 'https://'\n            if(Meteor.isDevelopment)protocol = 'http://'\n\n            res.writeHead(301, {Location: protocol+req.headers.host+pathname+search});\n            res.end();\n            return;\n        }\n    }\n    // if (req.headers.host == 'localhost:3000') {\n    if (req.headers.host == 'www.spotmycrib.com') {\n        // temporary redirect - https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\n        res.writeHead(301, {Location: 'https://www.spotmycrib.ie'+path});\n        res.end();\n    }\n    else next.apply();\n});\n\n// if(Meteor.isProduction)\n// WebAppInternals.setBundledJsCssUrlRewriteHook((url) => {\n//     console.log(\"CDN: \"+url)\n//     return `http://d30nklzkhaqiiz.cloudfront.net${url}&_g_app_v_=${process.env.GALAXY_APP_VERSION_ID}`;\n// });\n\n// if (Meteor.isProduction) {\n    CDN.config({\n        headers: {\n            \"/\": { \"cache-control\": \"public, max-age: 2592000\" }//30 days in seconds\n        }\n    });\n// }\n\nfunction titleCase(str){\n    if(!str)return;\n    return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\nTemplate.registerHelper(\"titleCase\",function(str){\n    return titleCase(str);\n});\n// Security.permit(['insert', 'update']).collections([Collections.Properties, Collections.Auctions]).ruleChainMethods();\n// Collections.Properties.permit(['insert', 'update']).ifLoggedIn();\n// Collections.Auctions.permit(['insert', 'update']).ifLoggedIn();//, 'remove'\nCollections.Properties.allow({\n    insert: function (userId, doc) {\n      var user = Meteor.user();\n      if(user.profile.role='agent'){\n          return true;\n      }\n      return false;\n    },\n    update: function (userId, doc, fields, modifier) {\n        var user = Meteor.user();\n        if( userId === doc.createdByAgent) {\n            return true;\n        }\n        return false;\n    }\n});\nCollections.Auctions.allow({\n    insert: function (userId, doc, fields, modifier) {\n        var user = Meteor.user();\n        if(user.profile.role='agent'){\n            return true;\n        }\n        return false;\n    },\n    update: function (userId, doc, fields, modifier){\n        if( userId === doc.createdByAgent) {\n            return true;\n        }\n        return false;\n    }\n});\nCollections.PropertyManage.deny({\n    insert() { return true; },\n    update() { return false; },\n    remove() { return true; },\n});\nCollections.ActivityHistory.deny({\n    insert() { return true; },\n    update() { return true; },\n    remove() { return true; },\n});\n\nMeteor.startup(() => {\n  // code to run on server at startup\n    if(!process.env.MAIL_URL)process.env.MAIL_URL = Meteor.settings[\"galaxy.meteor.com\"]['env']['MAIL_URL'];\n});\n\n\n\nS3.config = {\n    key: 'AKIA5S4UA6UV3RUSZ7XK',\n    secret: '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',\n    bucket: 'spotmycrib',\n    region: 'eu-west-1' // Only needed if not \"us-east-1\" or \"us-standard\"\n};\n\n","import \"../imports/api/publications.js\";\nimport '../imports/api/profile.js';\nimport \"../imports/api/properties.js\";\nimport {Meteor} from \"meteor/meteor\";\n// import '../imports/ui/templates/accounts/signIn/signIn.js'\n// import '../imports/ui/templates/accounts/signUp/signUp.js'\n// import '../imports/ui/templates/accounts/forgot/forgot.js'\n\nviews = {};\n\nviews['propertyManage.view'] = function(terms){\n    try{\n        // var id = Router.current().params.id\n        return {\n            find: {propertyId:terms.id},\n            options: {limit: 1}\n            // sort: {sort: {createdAt: -1}, limit: 1}\n        };\n    }catch(e){\n        return {\n            find:{},\n            options: {limit: 1},\n            fail:true\n        }\n    }\n}\nviews['property.view'] = function(terms){\n    try{\n        return {\n            find: {_id:terms.id},\n            options: {limit: 1}\n        };\n    }catch(e){\n        return {\n            find:{},\n            options: {limit: 1},\n            fail:true\n        }\n    }\n}\nviews['PMactivityHistory.view'] = function(terms){\n    try{\n        // var id = Router.current().params.id\n        var lim = Session.get('resultsPerPage');\n        if(!lim) lim = 100;\n        return {\n            find: {propertyId:terms.id},\n            options: {limit: lim,sort: { createdAt : -1 }}\n            // sort: {sort: {createdAt: -1}, limit: 1}\n        };\n    }catch(e){\n        return {\n            find:{},\n            options: {limit: 1},\n            fail:true\n        }\n    }\n}\nviews['MyProperties.view'] = function(terms){\n    try{\n        var resperpage = terms.resperpage;\n        if(isNaN(resperpage))resperpage = 20;\n        if(!resperpage) resperpage = 20;\n        if(resperpage<0||resperpage>100) resperpage = 20;\n\n\n        var pg = 1;\n        try{pg = parseInt(terms.pageno);}catch(e){}\n        if(isNaN(pg))pg = 1;\n        var skip = (pg-1)*resperpage;\n        if(isNaN(skip))skip = 0;\n\n        return {\n            find: {},\n            options: {limit: parseInt(resperpage),sort: { updatedAt : -1 }, skip: parseInt(skip)}\n        };\n    }catch(e){\n        console.log(e);\n        return {\n            find:{},\n            options: {limit: 1},\n            fail:true\n        }\n    }\n}\nviews['PropertyApplications.view'] = function(terms){\n    try{\n        let originalPgSplit = null, validOriginalPgSplit = false;\n        if(terms.pageno){\n            originalPgSplit = terms.pageno.toString().split('-')\n            if(originalPgSplit.length==2){//if format issue, then reset issue.\n                // if inside it means that format is correct, below if will correct data if required.\n                validOriginalPgSplit = true;\n                if(isNaN(originalPgSplit[0])) originalPgSplit[0] = 1;// if its not a number then reset it.\n                if(isNaN(originalPgSplit[1])) originalPgSplit[1] = 1;// if its not a number then reset it.\n            }\n        }\n        if(!validOriginalPgSplit){//invalid originalPgSplit; reset it\n            originalPgSplit = [1,1]\n        }\n\n        //// for property applications\n        var resperpage = terms.PAresperpage;\n        if(isNaN(resperpage))resperpage = 20;\n        if(!resperpage) resperpage = 20;\n        if(resperpage<0||resperpage>100) resperpage = 20;\n        var pg = originalPgSplit[0];\n        var skip = (pg-1)*resperpage;\n        if(isNaN(skip))skip = 0;\n        let out = {id:terms.id,options:{limit:resperpage}}\n        out.propertyApplications = {\n            find: {},\n            options: {limit: parseInt(resperpage),sort: { createdAt : -1 }, skip: parseInt(skip)}\n        }\n        //// for Email Enquiries\n        resperpage = terms.EEresperpage;\n        if(isNaN(resperpage))resperpage = 20;\n        if(!resperpage) resperpage = 20;\n        if(resperpage<0||resperpage>100) resperpage = 20;\n        pg = originalPgSplit[1];\n        skip = (pg-1)*resperpage;\n        if(isNaN(skip))skip = 0;\n        out.emailEnquiries = {\n            find: {},\n            options: {limit: parseInt(resperpage),sort: { createdAt : -1 }, skip: parseInt(skip)}\n        }\n\n        return out;\n    }catch(e){\n        console.log(e);\n        return {\n            propertyApplications: {\n                find:{},\n                options: {limit: 1},\n                fail:true\n            },\n            emailEnquiries: {\n                find:{},\n                options: {limit: 1},\n                fail:true\n            },\n            fail:true\n        }\n    }\n}\nviews['MyAdvertisements.view'] = function(terms){\n\n    try{\n        var resperpage = terms.resperpage;\n        if(isNaN(resperpage))resperpage = 20;\n        if(!resperpage) resperpage = 20;\n        if(resperpage<0||resperpage>100) resperpage = 20;\n\n\n        var pg = 1;\n        try{pg = parseInt(terms.pageno);}catch(e){}\n        if(isNaN(pg))pg = 1;\n        var skip = (pg-1)*resperpage;\n        if(isNaN(skip))skip = 0;\n\n        return {\n            find: {},\n            options: {limit: parseInt(resperpage),sort: { updatedAt : -1 }, skip: parseInt(skip)}\n        };\n    }catch(e){\n        console.log(e);\n        return {\n            find:{},\n            options: {limit: 1},\n            fail:true\n        }\n    }\n}\nviews['browseLettings.view'] = function(terms){\n\n    try{\n        var resperpage = terms.resperpage;\n        if(isNaN(resperpage))resperpage = 20;\n        if(!resperpage) resperpage = 20;\n        if(resperpage<0||resperpage>100) resperpage = 20;\n\n        var slugData = getSlugData(terms.slug,terms.query);\n\n        var find={}\n        if(slugData.area) find['address.area']=slugData.area\n        if(slugData.county) find['address.county']=slugData.county\n        if(slugData.propertyType) find['type']=slugData.propertyType //.toString().toLowerCase()\n        // if(slugData.country) find.address.country=slugData.country;\n        // console.log(slugData)\n        var bedCount = null;\n        if(slugData.bedCount && !isNaN(slugData.bedCount) )bedCount=parseInt(slugData.bedCount)\n\n        var pg = 1;\n        try{pg = parseInt(terms.pageno);}catch(e){}\n        if(isNaN(pg))pg = 1;\n        var skip = (pg-1)*resperpage;\n        if(isNaN(skip))skip = 0;\n\n        var sortOptions = { updatedAt : -1 }\n        if( slugData.luxurySort )sortOptions = { rentMonthly : -1 }\n        else if( slugData.cheapSort )sortOptions = { rentMonthly : 1 }\n        else if( slugData.mostRecentSort )sortOptions = { updatedAt : -1 }\n        else if( slugData.leastRecentSort )sortOptions = { updatedAt : 1 }\n\n        let tmp = [],validKeys = null;\n        if(terms.propertykey){\n            validKeys = []\n            tmp = terms.propertykey.split('-');\n            for(let i=0;i<tmp.length;i++){\n                if(tmp[i].length==5)validKeys.push(tmp[i].toUpperCase())//This is the validation we are doing.\n            }\n        }\n\n        return {\n            find: find,\n            propertykey:validKeys,\n            minRent:slugData.minRent,\n            maxRent:slugData.maxRent,\n            minBeds:slugData.minBeds,\n            maxBeds:slugData.maxBeds,\n            bedCount:bedCount,\n            options: {limit: parseInt(resperpage),sort: sortOptions, skip: parseInt(skip)}\n        };\n    }catch(e){\n        console.log(e);\n        return {\n            find:{},\n            options: {limit: 1},\n            fail:true\n        }\n    }\n}\nviews['browseBlogs.view'] = function(terms){\n\n    try{\n        var resperpage = terms.resperpage;\n        if(isNaN(resperpage))resperpage = 6;\n        if(!resperpage) resperpage = 6;\n        if(resperpage<0||resperpage>100) resperpage = 6;\n\n        // if(!terms.slug) throw 'Slug required';\n        var find={}\n        // if(terms.slug) find['slug']=slug\n\n        var pg = 1;\n        try{pg = parseInt(terms.pageno);}catch(e){}\n        if(isNaN(pg))pg = 1;\n        var skip = (pg-1)*resperpage;\n        if(isNaN(skip))skip = 0;\n\n        var sortOptions = { updatedAt : -1 }\n\n        return {\n            find: find,\n            options: {limit: parseInt(resperpage),sort: sortOptions, skip: parseInt(skip)}\n        };\n    }catch(e){\n        console.log(e);\n        return {\n            find:{},\n            options: {limit: 1},\n            fail:true\n        }\n    }\n}\n\nqueryConstructor = function (terms) {\n\n    var viewFunction = views[terms.viewName]\n    var data = viewFunction(terms);\n\n    if (data.options.limit > 100) {\n        data.options.limit = 100;\n    }\n\n    return data;\n\n}//http://www.discovermeteor.com/blog/query-constructors/\n\nfunction getSlugData(slug, query){//This needs to be seperate on common.\n    var propertyType = \"\";\n    var county = \"\";\n    var area = \"\";\n    var maxRent = \"\";\n    var minRent = \"\";\n    var minBeds = \"\";\n    var maxBeds = \"\";\n    var country = \"\";\n    var bedCount = \"\";\n    var luxurySort = \"\";\n    var cheapSort = \"\";\n    var mostRecentSort = \"\";\n    var leastRecentSort = \"\";\n\n    var range = [{cur:\"eur\",min:0,max:10000}]\n    var selectedCur = range[0];\n\n    if(query) {\n        if(query.minRent)minRent = query.minRent;\n        if(query.maxRent)maxRent = query.maxRent;\n        if(query.minBeds)minBeds = query.minBeds;\n        if(query.maxBeds)maxBeds = query.maxBeds;\n        if(query.bedCount)bedCount = query.bedCount;\n        if(query.luxurySort)luxurySort = query.luxurySort;\n        if(query.cheapSort)cheapSort = query.cheapSort;\n        if(query.mostRecentSort)mostRecentSort = query.mostRecentSort;\n        if(query.leastRecentSort)leastRecentSort = query.leastRecentSort;\n    }\n\n    if(!slug){\n        return {\n            country:country,\n            county:county,\n            area:area,\n            minRent:minRent,\n            maxRent:maxRent,\n            minBeds:minBeds,\n            maxBeds:maxBeds,\n            bedCount:bedCount,\n            luxurySort:luxurySort,\n            cheapSort:cheapSort,\n            mostRecentSort:mostRecentSort,\n            leastRecentSort:leastRecentSort,\n            propertyType:propertyType,\n        };\n    }\n    if(slug.indexOf('-for-')!=-1){\n        propertyType = slug.split('-for-')[0];\n        propertyType = propertyType.split('-').join(' ');\n    }\n    if(slug.indexOf('-in-')!=-1) {\n        var tmp = slug.split('-in-')[1].split('-')\n        switch (tmp.length) {\n            case 3:\n                country = tmp[2];\n                county = tmp[1];\n                area = tmp[0];\n                break;\n            case 2:\n                country = tmp[1];\n                county = tmp[0];\n                break;\n            case 1:\n                country = tmp[0];\n                break;\n        }\n        if (propertyType) propertyType = propertyType.replace(/_/g, ' ')\n        if (county) county = titleCaseAllWords(county.replace(/_/g, ' '))\n        if (country) country = titleCaseAllWords(country.replace(/_/g, ' '))\n        if (area) area = titleCaseAllWords(area.replace(/_/g, ' '))\n    }\n    return {\n        country:country,\n        county:county,\n        area:area,\n        minRent:minRent,\n        maxRent:maxRent,\n        minBeds:minBeds,\n        maxBeds:maxBeds,\n        bedCount:bedCount,\n        luxurySort:luxurySort,\n        cheapSort:cheapSort,\n        mostRecentSort:mostRecentSort,\n        leastRecentSort:leastRecentSort,\n        propertyType:propertyType,\n    }\n}\nfunction titleCaseAllWords(str){\n    if(!str)return;\n    return str.split(' ').map(function(str){\n        return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n    }).join(' ')\n    // var words = str.split(' ')\n    // for(var i=0;i<words.length;i++){\n    //\n    // }\n    // return str.charAt(0).toUpperCase() + str.toLowerCase().substring(1);\n}\ncdnPath = function(url){\n    if(Meteor.settings.public.CDN_ENABLED){\n        return CDN.get_cdn_url()+url;\n\n        // if(Meteor.isDevelopment || !process.env.GALAXY_APP_VERSION_ID) return `http://d30nklzkhaqiiz.cloudfront.net${url}`;\n        //\n        // if(url.indexOf('?')!=-1)return `http://d30nklzkhaqiiz.cloudfront.net${url}?_g_app_v_=${process.env.GALAXY_APP_VERSION_ID}`;\n        // else return `http://d30nklzkhaqiiz.cloudfront.net${url}&_g_app_v_=${process.env.GALAXY_APP_VERSION_ID}`;\n    }\n    return url;\n}\nclearMeta = function() {\n    addLangLink();\n    if(!Meteor.isClient)return;\n    var arr_elms = [];\n    arr_elms = document.head.getElementsByTagName(\"meta\"); // This var is reactive\n    var c = 0;\n    while(arr_elms[c]){//First 3 are default and useful\n        // console.log(arr_elms[3])\n        if(arr_elms[c].name == \"description\")\n            document.head.removeChild(arr_elms[c]);\n        c++;\n    }\n    // console.log('Removed: '+c);\n    ///Below code removed extra link hreflang 's\n    arr_elms = []\n    arr_elms = document.head.getElementsByTagName(\"link\"); // This var is reactive\n    c = 0;\n    while(arr_elms[c]){//First 3 are default and useful\n        if(arr_elms[c].hreflang)\n            document.head.removeChild(arr_elms[c]);\n        c++;\n    }\n}\naddLangLink = function(){\n    try {\n        // <link rel=\"alternate\" href=\"https://www.spotmycrib.ie/\" hreflang=\"en-ie\" />\n        var currentURL = FlowRouter.url(FlowRouter.current().route.name, FlowRouter.current().params, FlowRouter.current().queryParams)\n        var linkInfo = {rel: \"alternate\", hreflang: \"en-ie\", href: currentURL};\n        DocHead.addLink(linkInfo);\n\n        if(FlowRouter.current().route.name != 'letting')\n            DocHead.addMeta({rel: \"canonical\", href: currentURL });\n        // console.log('In addLang');\n    }catch(e){\n\n    }\n}\nfbq = function(){}//Replacement for FB pixel code"]}}]