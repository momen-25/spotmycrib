[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Tracker = Package.tracker.Tracker;\nvar Deps = Package.tracker.Deps;\nvar meteorInstall = Package.modules.meteorInstall;\nvar Promise = Package.promise.Promise;\n\n/* Package-scope variables */\nvar npmLoadScript, DocHead;\n\nvar require = meteorInstall({\"node_modules\":{\"meteor\":{\"kadira:dochead\":{\"main.js\":function module(require){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// packages/kadira_dochead/main.js                                                                                  //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nnpmLoadScript = require('load-script');\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"lib\":{\"both.js\":function module(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// packages/kadira_dochead/lib/both.js                                                                              //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nvar FlowRouter = null;\n\nif (Package['jns:flow-router-ssr']) {\n  FlowRouter = Package['jns:flow-router-ssr'].FlowRouter;\n}\n\nif (Meteor.isClient) {\n  var titleDependency = new Tracker.Dependency();\n}\n\nDocHead = {\n  currentTitle: null,\n\n  setTitle(title) {\n    if (Meteor.isClient) {\n      titleDependency.changed();\n      document.title = title;\n    } else {\n      this.currentTitle = title;\n      const titleHtml = \"<title>\".concat(title, \"</title>\");\n\n      this._addToHead(titleHtml);\n    }\n  },\n\n  addMeta(info) {\n    this._addTag(info, 'meta');\n  },\n\n  addLink(info) {\n    this._addTag(info, 'link');\n  },\n\n  getTitle() {\n    if (Meteor.isClient) {\n      titleDependency.depend();\n      return document.title;\n    }\n\n    return this.currentTitle;\n  },\n\n  addLdJsonScript(jsonObj) {\n    const strObj = JSON.stringify(jsonObj);\n\n    this._addLdJsonScript(strObj);\n  },\n\n  loadScript(url, options, callback) {\n    if (Meteor.isClient) {\n      npmLoadScript(url, options, callback);\n    }\n  },\n\n  _addTag(info, tag) {\n    const meta = this._buildTag(info, tag);\n\n    if (Meteor.isClient) {\n      document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', meta);\n    } else {\n      this._addToHead(meta);\n    }\n  },\n\n  _addToHead(html) {\n    // only work there is jns:flow-router-ssr\n    if (!FlowRouter) {\n      return;\n    }\n\n    let ssrContext = FlowRouter.ssrContext.get();\n\n    if (ssrContext) {\n      ssrContext.addToHead(html);\n    }\n  },\n\n  _buildTag(metaInfo, type) {\n    let props = \"\";\n\n    for (let key in metaInfo) {\n      props += \"\".concat(key, \"=\\\"\").concat(metaInfo[key], \"\\\" \");\n    }\n\n    props += 'dochead=\"1\"';\n    var meta = \"<\".concat(type, \" \").concat(props, \"/>\");\n    return meta;\n  },\n\n  _addLdJsonScript(stringifiedObject) {\n    const scriptTag = \"<script type=\\\"application/ld+json\\\" dochead=\\\"1\\\">\".concat(stringifiedObject, \"</script>\");\n\n    if (Meteor.isClient) {\n      document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', scriptTag);\n    } else {\n      this._addToHead(scriptTag);\n    }\n  },\n\n  removeDocHeadAddedTags() {\n    if (Meteor.isClient) {\n      const elements = document.querySelectorAll('[dochead=\"1\"]'); // We use for-of here to loop only over iterable objects\n\n      for (let element of elements) {\n        element.parentNode.removeChild(element);\n      }\n    }\n  }\n\n};\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"flow_router.js\":function module(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// packages/kadira_dochead/lib/flow_router.js                                                                       //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nif (Package['jns:flow-router-ssr']) {\n  var FlowRouter = Package['jns:flow-router-ssr'].FlowRouter; // remove added tags when changing routes\n\n  FlowRouter.triggers.enter(function () {\n    Meteor.startup(DocHead.removeDocHeadAddedTags);\n  });\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"node_modules\":{\"load-script\":{\"package.json\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// node_modules/meteor/kadira_dochead/node_modules/load-script/package.json                                         //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.exports = {\n  \"name\": \"load-script\",\n  \"version\": \"1.0.0\"\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// node_modules/meteor/kadira_dochead/node_modules/load-script/index.js                                             //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\n\nmodule.exports = function load (src, opts, cb) {\n  var head = document.head || document.getElementsByTagName('head')[0]\n  var script = document.createElement('script')\n\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  opts = opts || {}\n  cb = cb || function() {}\n\n  script.type = opts.type || 'text/javascript'\n  script.charset = opts.charset || 'utf8';\n  script.async = 'async' in opts ? !!opts.async : true\n  script.src = src\n\n  if (opts.attrs) {\n    setAttributes(script, opts.attrs)\n  }\n\n  if (opts.text) {\n    script.text = '' + opts.text\n  }\n\n  var onend = 'onload' in script ? stdOnEnd : ieOnEnd\n  onend(script, cb)\n\n  // some good legacy browsers (firefox) fail the 'in' detection above\n  // so as a fallback we always set onload\n  // old IE will ignore this and new IE will set onload\n  if (!script.onload) {\n    stdOnEnd(script, cb);\n  }\n\n  head.appendChild(script)\n}\n\nfunction setAttributes(script, attrs) {\n  for (var attr in attrs) {\n    script.setAttribute(attr, attrs[attr]);\n  }\n}\n\nfunction stdOnEnd (script, cb) {\n  script.onload = function () {\n    this.onerror = this.onload = null\n    cb(null, script)\n  }\n  script.onerror = function () {\n    // this.onload = null here is necessary\n    // because even IE9 works not like others\n    this.onerror = this.onload = null\n    cb(new Error('Failed to load ' + this.src), script)\n  }\n}\n\nfunction ieOnEnd (script, cb) {\n  script.onreadystatechange = function () {\n    if (this.readyState != 'complete' && this.readyState != 'loaded') return\n    this.onreadystatechange = null\n    cb(null, script) // there is no way to catch loading errors in IE8\n  }\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}}}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\"\n  ]\n});\n\nrequire(\"/node_modules/meteor/kadira:dochead/main.js\");\nrequire(\"/node_modules/meteor/kadira:dochead/lib/both.js\");\nrequire(\"/node_modules/meteor/kadira:dochead/lib/flow_router.js\");\n\n/* Exports */\nPackage._define(\"kadira:dochead\", {\n  DocHead: DocHead\n});\n\n})();\n","servePath":"/packages/kadira_dochead.js","sourceMap":{"version":3,"sources":["packages/kadira:dochead/main.js","packages/kadira:dochead/lib/both.js","packages/kadira:dochead/lib/flow_router.js"],"names":["npmLoadScript","require","FlowRouter","Package","Meteor","isClient","titleDependency","Tracker","Dependency","DocHead","currentTitle","setTitle","title","changed","document","titleHtml","_addToHead","addMeta","info","_addTag","addLink","getTitle","depend","addLdJsonScript","jsonObj","strObj","JSON","stringify","_addLdJsonScript","loadScript","url","options","callback","tag","meta","_buildTag","getElementsByTagName","insertAdjacentHTML","html","ssrContext","get","addToHead","metaInfo","type","props","key","stringifiedObject","scriptTag","removeDocHeadAddedTags","elements","querySelectorAll","element","parentNode","removeChild","triggers","enter","startup"],"mappings":"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","file":"/packages/kadira_dochead.js","sourcesContent":["npmLoadScript = require('load-script');\n","var FlowRouter = null;\nif (Package['jns:flow-router-ssr']) {\n  FlowRouter = Package['jns:flow-router-ssr'].FlowRouter;\n}\n\nif (Meteor.isClient) {\n  var titleDependency = new Tracker.Dependency();\n}\n\nDocHead = {\n  currentTitle: null,\n  setTitle(title) {\n    if (Meteor.isClient) {\n      titleDependency.changed();\n      document.title = title;\n    } else {\n      this.currentTitle = title;\n      const titleHtml = `<title>${title}</title>`;\n      this._addToHead(titleHtml);\n    }\n  },\n  addMeta(info) {\n    this._addTag(info, 'meta');\n  },\n  addLink(info) {\n    this._addTag(info, 'link');\n  },\n  getTitle() {\n    if (Meteor.isClient) {\n      titleDependency.depend();\n      return document.title;\n    }\n    return this.currentTitle;\n  },\n  addLdJsonScript(jsonObj) {\n    const strObj = JSON.stringify(jsonObj);\n    this._addLdJsonScript(strObj);\n  },\n  loadScript(url, options, callback) {\n    if (Meteor.isClient) {\n      npmLoadScript(url, options, callback);\n    }\n  },\n  _addTag(info, tag) {\n    const meta = this._buildTag(info, tag);\n    if (Meteor.isClient) {\n      document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', meta);\n    } else {\n      this._addToHead(meta);\n    }\n  },\n  _addToHead(html) {\n    // only work there is jns:flow-router-ssr\n    if (!FlowRouter) {\n      return;\n    }\n    let ssrContext = FlowRouter.ssrContext.get();\n    if (ssrContext) {\n      ssrContext.addToHead(html);\n    }\n  },\n  _buildTag(metaInfo, type) {\n    let props = \"\";\n    for (let key in metaInfo) {\n      props += `${key}=\"${metaInfo[key]}\" `;\n    }\n    props += 'dochead=\"1\"';\n    var meta = `<${type} ${props}/>`;\n    return meta;\n  },\n  _addLdJsonScript(stringifiedObject) {\n    const scriptTag = `<script type=\"application/ld+json\" dochead=\"1\">${stringifiedObject}</script>`;\n    if (Meteor.isClient) {\n      document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', scriptTag);\n    } else {\n      this._addToHead(scriptTag);\n    }\n  },\n  removeDocHeadAddedTags() {\n    if (Meteor.isClient) {\n      const elements = document.querySelectorAll('[dochead=\"1\"]');\n      // We use for-of here to loop only over iterable objects\n      for (let element of elements) {\n        element.parentNode.removeChild(element);\n      }\n    }\n  }\n};\n","if(Package['jns:flow-router-ssr']) {\n  var FlowRouter = Package['jns:flow-router-ssr'].FlowRouter;\n  // remove added tags when changing routes\n  FlowRouter.triggers.enter(function() {\n    Meteor.startup(DocHead.removeDocHeadAddedTags);\n  });\n}\n"]}}]